var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(s,a,i)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[a]=i,c=(e,s)=>{for(var a in s||(s={}))t.call(s,a)&&r(e,a,s[a]);if(i)for(var a of i(s))l.call(s,a)&&r(e,a,s[a]);return e},n=(e,s,a)=>new Promise((i,t)=>{var l=e=>{try{c(a.next(e))}catch(s){t(s)}},r=e=>{try{c(a.throw(e))}catch(s){t(s)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(l,r);c((a=a.apply(e,s)).next())});import{c as d,r as o,j as m,o as x,Y as h,Z as p,P as u,s as j,e as g,_ as y,S as v,X as N,$ as f,a0 as b,a1 as w,a2 as k,a3 as C,a4 as S,a5 as F,a6 as M,T as E,a7 as R,h as A,C as L,a8 as $,a9 as O,aa as T,ab as z,ac as G,ad as P,ae as B,af as D,ag as H,m as I,ah as U,F as W,ai as K,aj as Q}from"./react-vendor-D3e9mB0t.js";import{d as V,s as q,i as J}from"./state-management-1pAawPW8.js";import{C as _,a as Y,B as Z,b as X,c as ee}from"./auth-pages-CzONVztS.js";import{m as se,A as ae}from"./ui-libs-Dk258laF.js";import"./vendor-DSQ4hJBv.js";import"./utils-CwiBC-Fu.js";const ie={searchResults:[],recommendations:[],selectedFacility:null,searchFilters:{},matchingPreference:{preferredRegions:new Set,preferredFacilityTypes:new Set,maxMonthlyFee:null,minFacilityGrade:"C",requiredSpecialties:new Set,maxDistanceKm:null,prioritizeAvailability:!0,prioritizeCost:!1,prioritizeQuality:!0},userHistory:[],isSearching:!1,isLoadingRecommendations:!1,isLoadingHistory:!1,searchError:null,recommendationError:null,isDetailModalOpen:!1,isRecommendationModalOpen:!1,isMatchingFormOpen:!1},te={searchFacilities(e){return n(this,null,function*(){const s=new URLSearchParams;e.facilityType&&s.append("facilityType",e.facilityType),e.facilityGrade&&s.append("facilityGrade",e.facilityGrade),e.region&&s.append("region",e.region),e.careGradeLevel&&s.append("careGradeLevel",e.careGradeLevel.toString());const a=yield fetch(`/api/facilities?${s.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(!a.ok)throw new Error(`ì‹œì„¤ ê²€ìƒ‰ ì‹¤íŒ¨: ${a.statusText}`);return(yield a.json()).content||[]})},getRecommendations(e,s,a){return n(this,null,function*(){const i={memberId:e,coordinatorId:a,preference:{preferredRegions:Array.from(s.preferredRegions),preferredFacilityTypes:Array.from(s.preferredFacilityTypes),maxMonthlyFee:s.maxMonthlyFee,minFacilityGrade:s.minFacilityGrade,requiredSpecialties:Array.from(s.requiredSpecialties),maxDistanceKm:s.maxDistanceKm,prioritizeAvailability:s.prioritizeAvailability,prioritizeCost:s.prioritizeCost,prioritizeQuality:s.prioritizeQuality},maxResults:10},t=yield fetch("/api/facilities/recommendations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify(i)});if(!t.ok)throw new Error(`ì¶”ì²œ ì‹œì„¤ ì¡°íšŒ ì‹¤íŒ¨: ${t.statusText}`);return t.json()})},trackFacilityAction(e,s){return n(this,null,function*(){const a=yield fetch(`/api/facilities/${e}/${s}`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(!a.ok)throw new Error(`ì‹œì„¤ ${s} ì¶”ì  ì‹¤íŒ¨: ${a.statusText}`)})},completeMatching(e,s,a,i){return n(this,null,function*(){const t={outcome:s,satisfactionScore:a,feedback:i},l=yield fetch(`/api/facilities/${e}/complete-matching`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify(t)});if(!l.ok)throw new Error(`ë§¤ì¹­ ì™„ë£Œ ì²˜ë¦¬ ì‹¤íŒ¨: ${l.statusText}`)})},getUserHistory(){return n(this,null,function*(){const e=yield fetch("/api/facilities/matching-history",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(!e.ok)throw new Error(`ë§¤ì¹­ ì´ë ¥ ì¡°íšŒ ì‹¤íŒ¨: ${e.statusText}`);return e.json()})}},le=d()(V(q(J((e,i)=>{return t=c({},ie),s(t,a({searchFacilities:s=>n(null,null,function*(){e(e=>{e.isSearching=!0,e.searchError=null});try{const a=yield te.searchFacilities(s);e(e=>{e.searchResults=a,e.searchFilters=s,e.isSearching=!1})}catch(a){e(e=>{e.searchError=a instanceof Error?a.message:"ì‹œì„¤ ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",e.isSearching=!1})}}),updateSearchFilters:s=>{e(e=>{Object.assign(e.searchFilters,s)})},clearSearchResults:()=>{e(e=>{e.searchResults=[],e.searchFilters={},e.searchError=null})},getRecommendations:(s,a)=>n(null,null,function*(){e(e=>{e.isLoadingRecommendations=!0,e.recommendationError=null});try{const t=yield te.getRecommendations(s,i().matchingPreference,a);e(e=>{e.recommendations=t,e.isLoadingRecommendations=!1})}catch(t){e(e=>{e.recommendationError=t instanceof Error?t.message:"ì‹œì„¤ ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",e.isLoadingRecommendations=!1})}}),updateMatchingPreference:s=>{e(e=>{Object.assign(e.matchingPreference,s)})},clearRecommendations:()=>{e(e=>{e.recommendations=[],e.recommendationError=null})},selectFacility:s=>{e(e=>{e.selectedFacility=s})},clearSelectedFacility:()=>{e(e=>{e.selectedFacility=null})},trackFacilityView:e=>n(null,null,function*(){}),trackFacilityContact:e=>n(null,null,function*(){try{yield te.trackFacilityAction(e,"contact"),i().loadUserHistory()}catch(s){}}),trackFacilityVisit:e=>n(null,null,function*(){try{yield te.trackFacilityAction(e,"visit"),i().loadUserHistory()}catch(s){}}),completeMatching:(e,s,a,t)=>n(null,null,function*(){try{yield te.completeMatching(e,s,a,t),i().loadUserHistory()}catch(l){throw l}}),loadUserHistory:()=>n(null,null,function*(){e(e=>{e.isLoadingHistory=!0});try{const s=yield te.getUserHistory();e(e=>{e.userHistory=s,e.isLoadingHistory=!1})}catch(s){e(e=>{e.isLoadingHistory=!1})}}),clearUserHistory:()=>{e(e=>{e.userHistory=[]})},openDetailModal:()=>{e(e=>{e.isDetailModalOpen=!0})},closeDetailModal:()=>{e(e=>{e.isDetailModalOpen=!1})},openRecommendationModal:()=>{e(e=>{e.isRecommendationModalOpen=!0})},closeRecommendationModal:()=>{e(e=>{e.isRecommendationModalOpen=!1})},openMatchingForm:()=>{e(e=>{e.isMatchingFormOpen=!0})},closeMatchingForm:()=>{e(e=>{e.isMatchingFormOpen=!1})},setSearchError:s=>{e(e=>{e.searchError=s})},setRecommendationError:s=>{e(e=>{e.recommendationError=s})},clearAllErrors:()=>{e(e=>{e.searchError=null,e.recommendationError=null})},resetFacilityState:()=>{e(()=>c({},ie))}}));var t})),{name:"FacilityStore"})),re=({facility:e,viewMode:s="list",onSelect:a,showActions:i=!0,isRecommendation:t=!1,matchScore:l,recommendationReason:r})=>{const[c,d]=o.useState(null),{selectFacility:y,openDetailModal:v,trackFacilityContact:N,trackFacilityVisit:f}=le(),b=()=>{y(e),v(),null==a||a(e)},w=s=>n(null,null,function*(){s.stopPropagation(),d("contact");try{yield N(e.id),window.open(`tel:${e.phoneNumber}`)}catch(a){}finally{d(null)}}),k=s=>n(null,null,function*(){s.stopPropagation(),d("visit");try{yield f(e.id),alert("ë°©ë¬¸ ì˜ˆì•½ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹œì„¤ì—ì„œ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.")}catch(a){}finally{d(null)}}),C=e=>{switch(e){case"A":return"text-green-600 bg-green-100";case"B":return"text-blue-600 bg-blue-100";case"C":return"text-yellow-600 bg-yellow-100";case"D":return"text-orange-600 bg-orange-100";case"E":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},S=e.totalCapacity-e.currentOccupancy,F=e.currentOccupancy/e.totalCapacity*100,M=e=>e?`${(e/1e4).toFixed(0)}ë§Œì›`:"ë¬¸ì˜";return"grid"===s?m.jsx(se.div,{whileHover:{y:-4},transition:{duration:.2},children:m.jsxs(_,{className:"h-full cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:b,children:[t&&l&&m.jsx("div",{className:"absolute top-4 right-4 z-10",children:m.jsxs("div",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium flex items-center",children:[m.jsx(x,{className:"w-3 h-3 mr-1"}),Math.round(l),"% ë§¤ì¹­"]})}),m.jsxs("div",{className:"relative h-48 bg-gray-200 rounded-t-lg overflow-hidden",children:[e.imageUrl?m.jsx("img",{src:e.imageUrl,alt:e.facilityName,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center",children:m.jsx(h,{className:"w-12 h-12 text-gray-400"})}),m.jsx("div",{className:"absolute top-3 left-3",children:m.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C(e.facilityGrade)}`,children:[e.facilityGrade,"ë“±ê¸‰"]})})]}),m.jsxs(Y,{className:"p-4",children:[m.jsxs("div",{className:"mb-3",children:[m.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-1 line-clamp-1",children:e.facilityName}),m.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.facilityType}),m.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[m.jsx(p,{className:"w-4 h-4 mr-1"}),m.jsx("span",{className:"line-clamp-1",children:e.address})]})]}),m.jsxs("div",{className:"mb-3",children:[m.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[m.jsx("span",{className:"text-gray-600",children:"ì…ì†Œ í˜„í™©"}),m.jsx("span",{className:"font-medium "+(S>0?"text-green-600":"text-red-600"),children:S>0?`${S}ëª… ì…ì†Œ ê°€ëŠ¥`:"ì…ì†Œ ëŒ€ê¸°"})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:"h-2 rounded-full "+(F>=90?"bg-red-500":F>=70?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(F,100)}%`}})})]}),m.jsx("div",{className:"mb-4",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-gray-600",children:"ì›” ê¸°ë³¸ë£Œ"}),m.jsx("span",{className:"font-semibold text-lg text-gray-900",children:M(e.monthlyBasicFee)})]})}),e.specialties&&e.specialties.length>0&&m.jsx("div",{className:"mb-4",children:m.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.specialties.slice(0,2).map(e=>m.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full",children:e},e)),e.specialties.length>2&&m.jsxs("span",{className:"px-2 py-1 bg-gray-50 text-gray-600 text-xs rounded-full",children:["+",e.specialties.length-2]})]})}),t&&r&&m.jsx("div",{className:"mb-4 p-2 bg-purple-50 rounded-lg",children:m.jsxs("p",{className:"text-xs text-purple-700 line-clamp-2",children:["ğŸ’¡ ",r]})}),i&&m.jsxs("div",{className:"flex space-x-2",children:[m.jsx(Z,{variant:"outline",size:"sm",onClick:w,disabled:"contact"===c,className:"flex-1",children:"contact"===c?m.jsx(se.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:m.jsx(u,{className:"w-4 h-4"})}):m.jsx(u,{className:"w-4 h-4"})}),m.jsx(Z,{size:"sm",onClick:k,disabled:"visit"===c,className:"flex-1",children:"visit"===c?m.jsx(se.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:m.jsx(j,{className:"w-4 h-4"})}):m.jsxs(m.Fragment,{children:[m.jsx(j,{className:"w-4 h-4 mr-1"}),"ë°©ë¬¸"]})})]})]})]})}):m.jsx(se.div,{whileHover:{x:4},transition:{duration:.2},children:m.jsx(_,{className:"cursor-pointer hover:shadow-md transition-shadow duration-200",onClick:b,children:m.jsx(Y,{className:"p-6",children:m.jsxs("div",{className:"flex items-start space-x-4",children:[m.jsx("div",{className:"relative w-24 h-24 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0",children:e.imageUrl?m.jsx("img",{src:e.imageUrl,alt:e.facilityName,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center",children:m.jsx(h,{className:"w-8 h-8 text-gray-400"})})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("div",{className:"flex items-start justify-between mb-2",children:m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-xl text-gray-900 mb-1",children:e.facilityName}),m.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[m.jsx("span",{className:"text-gray-600",children:e.facilityType}),m.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C(e.facilityGrade)}`,children:[e.facilityGrade,"ë“±ê¸‰"]}),t&&l&&m.jsxs("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium flex items-center",children:[m.jsx(x,{className:"w-3 h-3 mr-1"}),Math.round(l),"% ë§¤ì¹­"]})]})]})}),m.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-3",children:[m.jsx(p,{className:"w-4 h-4 mr-1"}),m.jsx("span",{children:e.address})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[m.jsx("span",{className:"text-gray-600",children:"ì…ì†Œ í˜„í™©"}),m.jsx("span",{className:"font-medium "+(S>0?"text-green-600":"text-red-600"),children:S>0?`${S}ëª… ê°€ëŠ¥`:"ëŒ€ê¸°"})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:"h-2 rounded-full "+(F>=90?"bg-red-500":F>=70?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(F,100)}%`}})})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"ì›” ê¸°ë³¸ë£Œ"}),m.jsx("div",{className:"font-semibold text-lg text-gray-900",children:M(e.monthlyBasicFee)})]})]}),e.specialties&&e.specialties.length>0&&m.jsx("div",{className:"mb-3",children:m.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.specialties.slice(0,4).map(e=>m.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full",children:e},e)),e.specialties.length>4&&m.jsxs("span",{className:"px-2 py-1 bg-gray-50 text-gray-600 text-xs rounded-full",children:["+",e.specialties.length-4,"ê°œ ë”"]})]})}),t&&r&&m.jsx("div",{className:"mb-3 p-3 bg-purple-50 rounded-lg",children:m.jsxs("p",{className:"text-sm text-purple-700",children:["ğŸ’¡ ",r]})}),i&&m.jsxs("div",{className:"flex space-x-2 pt-2",children:[m.jsx(Z,{variant:"outline",size:"sm",onClick:w,disabled:"contact"===c,children:"contact"===c?m.jsx(se.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:m.jsx(u,{className:"w-4 h-4"})}):m.jsxs(m.Fragment,{children:[m.jsx(u,{className:"w-4 h-4 mr-1"}),"ì—°ë½í•˜ê¸°"]})}),m.jsx(Z,{size:"sm",onClick:k,disabled:"visit"===c,children:"visit"===c?m.jsx(se.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:m.jsx(j,{className:"w-4 h-4"})}):m.jsxs(m.Fragment,{children:[m.jsx(j,{className:"w-4 h-4 mr-1"}),"ë°©ë¬¸ ì˜ˆì•½"]})}),m.jsxs(Z,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),b()},children:[m.jsx(g,{className:"w-4 h-4 mr-1"}),"ìƒì„¸ë³´ê¸°"]})]})]})]})})})})},ce=({facilities:e,viewMode:s="list",isLoading:a=!1,emptyMessage:i="ì‹œì„¤ì´ ì—†ìŠµë‹ˆë‹¤.",onFacilitySelect:t,showActions:l=!0})=>{const r=()=>m.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((e,s)=>m.jsx(_,{className:"animate-pulse",children:m.jsx(Y,{className:"p-6",children:m.jsxs("div",{className:"flex items-start space-x-4",children:[m.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-lg flex-shrink-0"}),m.jsxs("div",{className:"flex-1 space-y-3",children:[m.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),m.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]}),m.jsxs("div",{className:"flex space-x-2 pt-2",children:[m.jsx("div",{className:"h-8 bg-gray-200 rounded w-20"}),m.jsx("div",{className:"h-8 bg-gray-200 rounded w-20"})]})]}),m.jsxs("div",{className:"text-right space-y-2",children:[m.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"}),m.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded w-12"})]})]})})},s))}),c=()=>m.jsx(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"text-center py-12",children:m.jsx(_,{children:m.jsx(Y,{className:"p-12",children:m.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[m.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:m.jsx(v,{className:"w-8 h-8 text-gray-400"})}),m.jsxs("div",{className:"text-center",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤"}),m.jsx("p",{className:"text-gray-500 max-w-md",children:i})]}),m.jsx("div",{className:"text-sm text-gray-400 mt-4",children:m.jsx("p",{children:"ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ í•„í„°ë¥¼ ì¡°ì •í•´ë³´ì„¸ìš”."})})]})})})});return a?m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"flex items-center justify-center py-8",children:m.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[m.jsx(y,{className:"w-5 h-5 animate-spin"}),m.jsx("span",{children:"ì‹œì„¤ì„ ê²€ìƒ‰í•˜ê³  ìˆìŠµë‹ˆë‹¤..."})]})}),m.jsx(r,{})]}):0===e.length?m.jsx(c,{}):"grid"===s?m.jsx(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.jsx(ae,{children:e.map((e,s)=>m.jsx(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.05*s},children:m.jsx(re,{facility:e,viewMode:"grid",onSelect:t,showActions:l})},e.id))})}):m.jsx(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"space-y-4",children:m.jsx(ae,{children:e.map((e,s)=>m.jsx(se.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,delay:.05*s},children:m.jsx(re,{facility:e,viewMode:"list",onSelect:t,showActions:l})},e.id))})})},ne=[{value:"ìš”ì–‘ì‹œì„¤",label:"ë…¸ì¸ìš”ì–‘ì‹œì„¤",description:"24ì‹œê°„ ì¼€ì–´ ì„œë¹„ìŠ¤"},{value:"ìš”ì–‘ë³‘ì›",label:"ìš”ì–‘ë³‘ì›",description:"ì˜ë£Œì§„ ìƒì£¼ ì¹˜ë£Œ"},{value:"ì–‘ë¡œì‹œì„¤",label:"ì–‘ë¡œì‹œì„¤",description:"ë…ë¦½ìƒí™œ ì§€ì›"},{value:"ì¹˜ë§¤ì „ë¬¸ì‹œì„¤",label:"ì¹˜ë§¤ì „ë¬¸ì‹œì„¤",description:"ì¹˜ë§¤ íŠ¹í™” ì¼€ì–´"},{value:"ì¬í™œì „ë¬¸ì‹œì„¤",label:"ì¬í™œì „ë¬¸ì‹œì„¤",description:"ì¬í™œì¹˜ë£Œ ì¤‘ì‹¬"},{value:"ë‹¨ê¸°ë³´í˜¸ì‹œì„¤",label:"ë‹¨ê¸°ë³´í˜¸ì‹œì„¤",description:"ì„ì‹œ ë³´í˜¸ ì„œë¹„ìŠ¤"}],de=[{value:"A",label:"Aë“±ê¸‰",description:"ìµœìš°ìˆ˜ (90ì  ì´ìƒ)",color:"text-green-600"},{value:"B",label:"Bë“±ê¸‰",description:"ìš°ìˆ˜ (80-89ì )",color:"text-blue-600"},{value:"C",label:"Cë“±ê¸‰",description:"ì–‘í˜¸ (70-79ì )",color:"text-yellow-600"},{value:"D",label:"Dë“±ê¸‰",description:"ë³´í†µ (60-69ì )",color:"text-orange-600"},{value:"E",label:"Eë“±ê¸‰",description:"ë¯¸í¡ (60ì  ë¯¸ë§Œ)",color:"text-red-600"}],oe=[{value:1,label:"1ë“±ê¸‰",description:"ìµœì¤‘ì¦ (95ì  ì´ìƒ)"},{value:2,label:"2ë“±ê¸‰",description:"ì¤‘ì¦ (75-94ì )"},{value:3,label:"3ë“±ê¸‰",description:"ì¤‘ë“±ë„ (60-74ì )"},{value:4,label:"4ë“±ê¸‰",description:"ê²½ì¦ (51-59ì )"},{value:5,label:"5ë“±ê¸‰",description:"ê²½ì¦ (45-50ì )"}],me=["ì„œìš¸íŠ¹ë³„ì‹œ","ë¶€ì‚°ê´‘ì—­ì‹œ","ëŒ€êµ¬ê´‘ì—­ì‹œ","ì¸ì²œê´‘ì—­ì‹œ","ê´‘ì£¼ê´‘ì—­ì‹œ","ëŒ€ì „ê´‘ì—­ì‹œ","ìš¸ì‚°ê´‘ì—­ì‹œ","ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ","ê²½ê¸°ë„","ê°•ì›ë„","ì¶©ì²­ë¶ë„","ì¶©ì²­ë‚¨ë„","ì „ë¼ë¶ë„","ì „ë¼ë‚¨ë„","ê²½ìƒë¶ë„","ê²½ìƒë‚¨ë„","ì œì£¼íŠ¹ë³„ìì¹˜ë„"],xe=[{value:1e6,label:"100ë§Œì› ì´í•˜"},{value:15e5,label:"150ë§Œì› ì´í•˜"},{value:2e6,label:"200ë§Œì› ì´í•˜"},{value:25e5,label:"250ë§Œì› ì´í•˜"},{value:3e6,label:"300ë§Œì› ì´í•˜"},{value:5e6,label:"500ë§Œì› ì´í•˜"}],he=["ì¹˜ë§¤ì¼€ì–´","ì¬í™œì¹˜ë£Œ","ë¬¼ë¦¬ì¹˜ë£Œ","ì‘ì—…ì¹˜ë£Œ","ì–¸ì–´ì¹˜ë£Œ","ì¸ì§€ì¹˜ë£Œ","í˜¸ìŠ¤í”¼ìŠ¤ì¼€ì–´","ì˜ë£Œì¼€ì–´","ì˜ì–‘ê´€ë¦¬","ì‹¬ë¦¬ìƒë‹´"],pe=({filters:e,onFiltersChange:s,onClear:a})=>{const[i,t]=o.useState(new Set(["type","grade"])),l=e=>{const s=new Set(i);s.has(e)?s.delete(e):s.add(e),t(s)},r=(e,a)=>{s({[e]:a})},c=Object.values(e).filter(e=>null!=e&&""!==e).length;return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["ìƒì„¸ í•„í„°",c>0&&m.jsxs("span",{className:"ml-2 bg-blue-100 text-blue-800 text-sm px-2 py-1 rounded-full",children:[c,"ê°œ ì ìš©ë¨"]})]}),c>0&&m.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>{s({facilityType:void 0,facilityGrade:void 0,region:void 0,careGradeLevel:void 0,maxMonthlyFee:void 0,minFacilityGrade:void 0,specialties:void 0,maxDistanceKm:void 0,hasAvailableSlots:void 0}),null==a||a()},className:"text-gray-500 hover:text-gray-700",children:[m.jsx(N,{className:"w-4 h-4 mr-1"}),"ì „ì²´ ì´ˆê¸°í™”"]})]}),m.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[m.jsxs("button",{onClick:()=>l("type"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(h,{className:"w-5 h-5 text-gray-400 mr-2"}),m.jsx("span",{className:"font-medium",children:"ì‹œì„¤ íƒ€ì…"})]}),m.jsx(se.div,{animate:{rotate:i.has("type")?180:0},transition:{duration:.2},children:m.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),i.has("type")&&m.jsx(se.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:ne.map(s=>m.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[m.jsx("input",{type:"radio",name:"facilityType",value:s.value,checked:e.facilityType===s.value,onChange:e=>r("facilityType",e.target.value),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.label}),m.jsx("div",{className:"text-xs text-gray-500",children:s.description})]})]},s.value))})})]}),m.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[m.jsxs("button",{onClick:()=>l("grade"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(x,{className:"w-5 h-5 text-gray-400 mr-2"}),m.jsx("span",{className:"font-medium",children:"ì‹œì„¤ ë“±ê¸‰"})]}),m.jsx(se.div,{animate:{rotate:i.has("grade")?180:0},transition:{duration:.2},children:m.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),i.has("grade")&&m.jsx(se.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:de.map(s=>m.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[m.jsx("input",{type:"radio",name:"facilityGrade",value:s.value,checked:e.facilityGrade===s.value,onChange:e=>r("facilityGrade",e.target.value),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),m.jsxs("div",{children:[m.jsx("div",{className:`text-sm font-medium ${s.color}`,children:s.label}),m.jsx("div",{className:"text-xs text-gray-500",children:s.description})]})]},s.value))})})]}),m.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[m.jsxs("button",{onClick:()=>l("region"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(p,{className:"w-5 h-5 text-gray-400 mr-2"}),m.jsx("span",{className:"font-medium",children:"ì§€ì—­"})]}),m.jsx(se.div,{animate:{rotate:i.has("region")?180:0},transition:{duration:.2},children:m.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),i.has("region")&&m.jsx(se.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:m.jsxs("select",{value:e.region||"",onChange:e=>r("region",e.target.value||void 0),className:"mt-3 w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[m.jsx("option",{value:"",children:"ì „ì²´ ì§€ì—­"}),me.map(e=>m.jsx("option",{value:e,children:e},e))]})})]}),m.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[m.jsxs("button",{onClick:()=>l("care"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(f,{className:"w-5 h-5 text-gray-400 mr-2"}),m.jsx("span",{className:"font-medium",children:"ì¼€ì–´ ë“±ê¸‰"})]}),m.jsx(se.div,{animate:{rotate:i.has("care")?180:0},transition:{duration:.2},children:m.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),i.has("care")&&m.jsx(se.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:oe.map(s=>m.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[m.jsx("input",{type:"radio",name:"careGradeLevel",value:s.value,checked:e.careGradeLevel===s.value,onChange:e=>r("careGradeLevel",parseInt(e.target.value)),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.label}),m.jsx("div",{className:"text-xs text-gray-500",children:s.description})]})]},s.value))})})]}),m.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[m.jsxs("button",{onClick:()=>l("cost"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(b,{className:"w-5 h-5 text-gray-400 mr-2"}),m.jsx("span",{className:"font-medium",children:"ì›” ë¹„ìš©"})]}),m.jsx(se.div,{animate:{rotate:i.has("cost")?180:0},transition:{duration:.2},children:m.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),i.has("cost")&&m.jsx(se.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:m.jsx("div",{className:"space-y-2 mt-3",children:xe.map(s=>m.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[m.jsx("input",{type:"radio",name:"maxMonthlyFee",value:s.value,checked:e.maxMonthlyFee===s.value,onChange:e=>r("maxMonthlyFee",parseInt(e.target.value)),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),m.jsx("span",{className:"text-sm text-gray-900",children:s.label})]},s.value))})})]}),m.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[m.jsxs("button",{onClick:()=>l("specialties"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(x,{className:"w-5 h-5 text-gray-400 mr-2"}),m.jsx("span",{className:"font-medium",children:"ì „ë¬¸ ì„œë¹„ìŠ¤"})]}),m.jsx(se.div,{animate:{rotate:i.has("specialties")?180:0},transition:{duration:.2},children:m.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),i.has("specialties")&&m.jsx(se.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:m.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:he.map(s=>m.jsx("button",{onClick:()=>{const a=e.specialties||[],i=a.includes(s)?a.filter(e=>e!==s):[...a,s];r("specialties",i.length>0?i:void 0)},className:"px-3 py-1 text-sm rounded-full border transition-colors "+((e.specialties||[]).includes(s)?"bg-blue-100 border-blue-300 text-blue-800":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"),children:s},s))})})]}),m.jsx("div",{className:"border border-gray-200 rounded-lg",children:m.jsxs("div",{className:"px-4 py-3",children:[m.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"ê¸°íƒ€ ì˜µì…˜"}),m.jsx("div",{className:"space-y-3",children:m.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:e.hasAvailableSlots||!1,onChange:e=>r("hasAvailableSlots",!!e.target.checked||void 0),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),m.jsx("span",{className:"text-sm text-gray-900",children:"ì…ì†Œ ê°€ëŠ¥í•œ ì‹œì„¤ë§Œ ë³´ê¸°"})]})})]})})]})},ue=({recommendations:e,isLoading:s=!1,onRefresh:a,memberId:i,showPreferences:t=!0})=>{const{matchingPreference:l,updateMatchingPreference:r}=le(),[c,n]=o.useState(!1),[d,x]=o.useState(!1),h={averageScore:e.length>0?Math.round(e.reduce((e,s)=>e+s.matchScore,0)/e.length):0,highScoreCount:e.filter(e=>e.matchScore>=80).length,mediumScoreCount:e.filter(e=>e.matchScore>=60&&e.matchScore<80).length,lowScoreCount:e.filter(e=>e.matchScore<60).length},p=(()=>{const e=[];return h.averageScore>=80?e.push({type:"success",icon:A,title:"ìš°ìˆ˜í•œ ë§¤ì¹­ ê²°ê³¼",description:"íšŒì›ë‹˜ì˜ ìš”êµ¬ì‚¬í•­ì— ì˜ ë§ëŠ” ì‹œì„¤ë“¤ì´ ë§ì´ ì°¾ì•„ì¡ŒìŠµë‹ˆë‹¤."}):h.averageScore>=60?e.push({type:"warning",icon:L,title:"ì–‘í˜¸í•œ ë§¤ì¹­ ê²°ê³¼",description:"ì¼ë¶€ ì¡°ê±´ì„ ì¡°ì •í•˜ë©´ ë” ì í•©í•œ ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."}):e.push({type:"info",icon:$,title:"ë§¤ì¹­ ì¡°ê±´ ê²€í†  í•„ìš”",description:"ì„ í˜¸ ì¡°ê±´ì„ ì¡°ì •í•˜ì—¬ ë” ë‚˜ì€ ì¶”ì²œ ê²°ê³¼ë¥¼ ë°›ì•„ë³´ì„¸ìš”."}),0===h.highScoreCount&&e.push({type:"tip",icon:R,title:"ì¶”ì²œ íŒ",description:"ì§€ì—­ ë²”ìœ„ë¥¼ ë„“íˆê±°ë‚˜ ë¹„ìš© ì¡°ê±´ì„ ì¡°ì •í•´ë³´ì„¸ìš”."}),e})(),u=(e,s)=>{r({[e]:s})};return s?m.jsxs("div",{className:"space-y-6",children:[m.jsx(_,{children:m.jsx(Y,{className:"p-6",children:m.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[m.jsx(se.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:m.jsx(w,{className:"w-6 h-6 text-purple-600"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AIê°€ ë§ì¶¤í˜• ì‹œì„¤ì„ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤"}),m.jsx("p",{className:"text-gray-600",children:"íšŒì›ë‹˜ì˜ ê±´ê°• ìƒíƒœì™€ ì„ í˜¸ë„ë¥¼ ì¢…í•©ì ìœ¼ë¡œ ë¶„ì„í•˜ê³  ìˆì–´ìš”..."})]})]})})}),m.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((e,s)=>m.jsx(_,{className:"animate-pulse",children:m.jsx(Y,{className:"p-6",children:m.jsxs("div",{className:"flex items-start space-x-4",children:[m.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-lg"}),m.jsxs("div",{className:"flex-1 space-y-3",children:[m.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),m.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),m.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]}),m.jsxs("div",{className:"text-right space-y-2",children:[m.jsx("div",{className:"h-8 bg-gray-200 rounded w-16"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"})]})]})})},s))})]}):0===e.length?m.jsx("div",{className:"text-center py-12",children:m.jsx(_,{children:m.jsx(Y,{className:"p-12",children:m.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[m.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center",children:m.jsx(k,{className:"w-8 h-8 text-purple-600"})}),m.jsxs("div",{className:"text-center",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ì¶”ì²œ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤"}),m.jsx("p",{className:"text-gray-500 max-w-md",children:"í˜„ì¬ ì¡°ê±´ì— ë§ëŠ” ì‹œì„¤ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì„ í˜¸ ì¡°ê±´ì„ ì¡°ì •í•˜ê±°ë‚˜ ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”."})]}),a&&m.jsxs(Z,{onClick:a,variant:"outline",children:[m.jsx(y,{className:"w-4 h-4 mr-2"}),"ë‹¤ì‹œ ì¶”ì²œë°›ê¸°"]})]})})})}):m.jsxs("div",{className:"space-y-6",children:[m.jsxs(_,{children:[m.jsx(X,{children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:m.jsx(k,{className:"w-5 h-5 text-purple-600"})}),m.jsxs("div",{children:[m.jsx(ee,{className:"text-xl",children:"ë§ì¶¤í˜• ì¶”ì²œ ê²°ê³¼"}),m.jsxs("p",{className:"text-gray-600",children:["AIê°€ ë¶„ì„í•œ íšŒì›ë‹˜ê»˜ ìµœì ì˜ ì‹œì„¤ ",e.length,"ê³³"]})]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[a&&m.jsxs(Z,{variant:"outline",size:"sm",onClick:a,children:[m.jsx(y,{className:"w-4 h-4 mr-1"}),"ìƒˆë¡œê³ ì¹¨"]}),t&&m.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>n(!c),children:[m.jsx(C,{className:"w-4 h-4 mr-1"}),"ì„ í˜¸ë„ ì„¤ì •"]})]})]})}),m.jsxs(Y,{children:[m.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[m.jsxs("div",{className:"text-center",children:[m.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[h.averageScore,"%"]}),m.jsx("div",{className:"text-sm text-gray-600",children:"í‰ê·  ë§¤ì¹­ë„"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-green-600",children:h.highScoreCount}),m.jsx("div",{className:"text-sm text-gray-600",children:"ìš°ìˆ˜ ë§¤ì¹­ (80%+)"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:h.mediumScoreCount}),m.jsx("div",{className:"text-sm text-gray-600",children:"ì–‘í˜¸ ë§¤ì¹­ (60-79%)"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-gray-600",children:h.lowScoreCount}),m.jsx("div",{className:"text-sm text-gray-600",children:"ë³´í†µ ë§¤ì¹­ (60% ë¯¸ë§Œ)"})]})]}),m.jsxs("button",{onClick:()=>x(!d),className:"w-full flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(w,{className:"w-5 h-5 text-purple-600"}),m.jsx("span",{className:"font-medium",children:"AI ì¶”ì²œ ë¶„ì„ ê²°ê³¼"})]}),d?m.jsx(S,{className:"w-5 h-5 text-gray-400"}):m.jsx(F,{className:"w-5 h-5 text-gray-400"})]}),m.jsx(ae,{children:d&&m.jsx(se.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:m.jsx("div",{className:"pt-4 space-y-3",children:p.map((e,s)=>{const a=e.icon,i={success:"text-green-600 bg-green-50",warning:"text-yellow-600 bg-yellow-50",info:"text-blue-600 bg-blue-50",tip:"text-purple-600 bg-purple-50"}[e.type];return m.jsx("div",{className:`p-3 rounded-lg ${i}`,children:m.jsxs("div",{className:"flex items-start space-x-2",children:[m.jsx(a,{className:"w-5 h-5 mt-0.5"}),m.jsxs("div",{children:[m.jsx("div",{className:"font-medium",children:e.title}),m.jsx("div",{className:"text-sm opacity-90",children:e.description})]})]})},s)})})})})]})]}),m.jsx(ae,{children:c&&m.jsx(se.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:m.jsxs(_,{children:[m.jsx(X,{children:m.jsxs(ee,{className:"text-lg flex items-center",children:[m.jsx(C,{className:"w-5 h-5 mr-2"}),"ì¶”ì²œ ì„ í˜¸ë„ ì„¤ì •"]})}),m.jsxs(Y,{children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{className:"space-y-3",children:[m.jsx("h4",{className:"font-medium",children:"ìš°ì„ ìˆœìœ„"}),m.jsxs("label",{className:"flex items-center space-x-2",children:[m.jsx("input",{type:"checkbox",checked:l.prioritizeQuality,onChange:e=>u("prioritizeQuality",e.target.checked),className:"rounded border-gray-300"}),m.jsx("span",{className:"text-sm",children:"í’ˆì§ˆ ìš°ì„ "})]}),m.jsxs("label",{className:"flex items-center space-x-2",children:[m.jsx("input",{type:"checkbox",checked:l.prioritizeCost,onChange:e=>u("prioritizeCost",e.target.checked),className:"rounded border-gray-300"}),m.jsx("span",{className:"text-sm",children:"ë¹„ìš© ìš°ì„ "})]}),m.jsxs("label",{className:"flex items-center space-x-2",children:[m.jsx("input",{type:"checkbox",checked:l.prioritizeAvailability,onChange:e=>u("prioritizeAvailability",e.target.checked),className:"rounded border-gray-300"}),m.jsx("span",{className:"text-sm",children:"ì…ì†Œ ê°€ëŠ¥ì„± ìš°ì„ "})]})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("h4",{className:"font-medium",children:"ìµœëŒ€ ì›” ë¹„ìš©"}),m.jsxs("select",{value:l.maxMonthlyFee||"",onChange:e=>u("maxMonthlyFee",e.target.value?parseInt(e.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",children:[m.jsx("option",{value:"",children:"ì œí•œ ì—†ìŒ"}),m.jsx("option",{value:"1500000",children:"150ë§Œì›"}),m.jsx("option",{value:"2000000",children:"200ë§Œì›"}),m.jsx("option",{value:"2500000",children:"250ë§Œì›"}),m.jsx("option",{value:"3000000",children:"300ë§Œì›"}),m.jsx("option",{value:"4000000",children:"400ë§Œì›"}),m.jsx("option",{value:"5000000",children:"500ë§Œì›"})]})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("h4",{className:"font-medium",children:"ìµœì†Œ ì‹œì„¤ ë“±ê¸‰"}),m.jsxs("select",{value:l.minFacilityGrade,onChange:e=>u("minFacilityGrade",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",children:[m.jsx("option",{value:"E",children:"Eë“±ê¸‰ ì´ìƒ"}),m.jsx("option",{value:"D",children:"Dë“±ê¸‰ ì´ìƒ"}),m.jsx("option",{value:"C",children:"Cë“±ê¸‰ ì´ìƒ"}),m.jsx("option",{value:"B",children:"Bë“±ê¸‰ ì´ìƒ"}),m.jsx("option",{value:"A",children:"Aë“±ê¸‰ë§Œ"})]})]})]}),m.jsx("div",{className:"mt-4 pt-4 border-t",children:m.jsxs(Z,{onClick:a,className:"w-full",children:[m.jsx(M,{className:"w-4 h-4 mr-2"}),"ìƒˆë¡œìš´ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ ì¶”ì²œë°›ê¸°"]})})]})]})})}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"ì¶”ì²œ ì‹œì„¤ ëª©ë¡"}),m.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[m.jsx(E,{className:"w-4 h-4"}),m.jsx("span",{children:"ë§¤ì¹­ë„ ìˆœìœ¼ë¡œ ì •ë ¬ë¨"})]})]}),m.jsx(ae,{children:e.map((e,s)=>m.jsx(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.1*s},children:m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute -left-4 top-4 z-10",children:m.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold "+(0===s?"bg-yellow-500":1===s?"bg-gray-400":2===s?"bg-amber-600":"bg-gray-300"),children:s+1})}),m.jsx(re,{facility:e.facility,viewMode:"list",isRecommendation:!0,matchScore:e.matchScore,recommendationReason:e.recommendationReason,showActions:!0})]})},e.facility.id))})]}),m.jsx(_,{children:m.jsx(Y,{className:"p-6",children:m.jsxs("div",{className:"flex items-start space-x-3",children:[m.jsx(R,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"ì¶”ì²œ ê²°ê³¼ë¥¼ ê°œì„ í•˜ë ¤ë©´?"}),m.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[m.jsx("li",{children:"â€¢ ì„ í˜¸ ì§€ì—­ ë²”ìœ„ë¥¼ ì¡°ì •í•´ë³´ì„¸ìš”"}),m.jsx("li",{children:"â€¢ ì˜ˆì‚° ì¡°ê±´ì„ ë‹¤ì‹œ ê²€í† í•´ë³´ì„¸ìš”"}),m.jsx("li",{children:"â€¢ í•„ìˆ˜ ì„œë¹„ìŠ¤ ì¡°ê±´ì„ ëª…í™•íˆ í•´ë³´ì„¸ìš”"}),m.jsx("li",{children:"â€¢ ì‹œì„¤ ë°©ë¬¸ í›„ í”¼ë“œë°±ì„ ë‚¨ê²¨ì£¼ì‹œë©´ ë” ì •í™•í•œ ì¶”ì²œì´ ê°€ëŠ¥í•©ë‹ˆë‹¤"})]})]})]})})})]})},je=()=>{const e=le(e=>e.selectedFacility),{isDetailModalOpen:s,closeDetailModal:a,clearSelectedFacility:i,trackFacilityContact:t,trackFacilityVisit:l,openMatchingForm:r}=le(),[c,d]=o.useState("overview"),[h,g]=o.useState(null),[y,v]=o.useState(0),b=()=>{a(),setTimeout(()=>{i()},300)};o.useEffect(()=>{const e=e=>{"Escape"===e.key&&b()};return s&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[s]);if(!s||!e)return null;const w=e.totalCapacity-e.currentOccupancy,k=e.currentOccupancy/e.totalCapacity*100,C=e.imageUrl?[e.imageUrl]:["/images/facility-placeholder-1.jpg","/images/facility-placeholder-2.jpg","/images/facility-placeholder-3.jpg"],S=[{icon:z,label:"ë¬´ë£Œ WiFi",available:!0},{icon:G,label:"ì£¼ì°¨ì¥",available:!0},{icon:P,label:"ì‹ë‹¹",available:!0},{icon:B,label:"ìš´ë™ì‹œì„¤",available:!1},{icon:D,label:"CCTV",available:!0},{icon:H,label:"24ì‹œê°„ ë³´ì•ˆ",available:!0}];return m.jsx(ae,{children:m.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:b,children:[m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(se.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full max-w-4xl max-h-[90vh] bg-white rounded-lg shadow-xl overflow-hidden",onClick:e=>e.stopPropagation(),children:[m.jsxs("div",{className:"relative",children:[m.jsxs("div",{className:"relative h-64 bg-gray-200",children:[m.jsx("img",{src:C[y],alt:e.facilityName,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/images/facility-default.jpg"}}),C.length>1&&m.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:C.map((e,s)=>m.jsx("button",{onClick:()=>v(s),className:"w-2 h-2 rounded-full "+(s===y?"bg-white":"bg-white bg-opacity-50")},s))}),m.jsx("div",{className:"absolute top-4 left-4",children:m.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${(e=>{switch(e){case"A":return"text-green-600 bg-green-100";case"B":return"text-blue-600 bg-blue-100";case"C":return"text-yellow-600 bg-yellow-100";case"D":return"text-orange-600 bg-orange-100";case"E":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}})(e.facilityGrade)}`,children:[e.facilityGrade,"ë“±ê¸‰"]})}),m.jsx("button",{onClick:b,className:"absolute top-4 right-4 w-8 h-8 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-colors",children:m.jsx(N,{className:"w-5 h-5"})})]}),m.jsxs("div",{className:"p-6 border-b",children:[m.jsxs("div",{className:"flex justify-between items-start mb-4",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:e.facilityName}),m.jsx("p",{className:"text-gray-600 mb-2",children:e.facilityType}),m.jsxs("div",{className:"flex items-center text-gray-500",children:[m.jsx(p,{className:"w-4 h-4 mr-1"}),m.jsx("span",{children:e.address})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"ì›” ê¸°ë³¸ë£Œ"}),m.jsx("div",{className:"text-2xl font-bold text-gray-900",children:(F=e.monthlyBasicFee,F?`${(F/1e4).toFixed(0)}ë§Œì›`:"ë¬¸ì˜")})]})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-sm text-gray-600",children:"ì´ ì •ì›"}),m.jsxs("div",{className:"text-lg font-semibold",children:[e.totalCapacity,"ëª…"]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-sm text-gray-600",children:"í˜„ì¬ ì…ì†Œ"}),m.jsxs("div",{className:"text-lg font-semibold",children:[e.currentOccupancy,"ëª…"]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-sm text-gray-600",children:"ì…ì†Œ ê°€ëŠ¥"}),m.jsx("div",{className:"text-lg font-semibold "+(w>0?"text-green-600":"text-red-600"),children:w>0?`${w}ëª…`:"ëŒ€ê¸°"})]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[m.jsx("span",{children:"ì…ì†Œìœ¨"}),m.jsxs("span",{children:[Math.round(k),"%"]})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:"h-2 rounded-full "+(k>=90?"bg-red-500":k>=70?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(k,100)}%`}})})]}),m.jsxs("div",{className:"flex space-x-3",children:[m.jsxs(Z,{onClick:()=>n(null,null,function*(){if(e){g("contact");try{yield t(e.id),window.open(`tel:${e.phoneNumber}`)}catch(s){}finally{g(null)}}}),disabled:"contact"===h,className:"flex-1",children:["contact"===h?m.jsx(se.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:m.jsx(u,{className:"w-4 h-4 mr-2"})}):m.jsx(u,{className:"w-4 h-4 mr-2"}),"ì—°ë½í•˜ê¸°"]}),m.jsxs(Z,{variant:"outline",onClick:()=>n(null,null,function*(){if(e){g("visit");try{yield l(e.id),alert("ë°©ë¬¸ ì˜ˆì•½ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹œì„¤ì—ì„œ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.")}catch(s){}finally{g(null)}}}),disabled:"visit"===h,className:"flex-1",children:["visit"===h?m.jsx(se.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:m.jsx(j,{className:"w-4 h-4 mr-2"})}):m.jsx(j,{className:"w-4 h-4 mr-2"}),"ë°©ë¬¸ ì˜ˆì•½"]}),m.jsxs(Z,{variant:"outline",onClick:()=>{r()},className:"flex-1",children:[m.jsx(f,{className:"w-4 h-4 mr-2"}),"ë§¤ì¹­ ì‹ ì²­"]})]})]})]}),m.jsx("div",{className:"border-b",children:m.jsx("nav",{className:"flex px-6",children:[{key:"overview",label:"ê°œìš”",icon:O},{key:"services",label:"ì„œë¹„ìŠ¤",icon:T},{key:"location",label:"ìœ„ì¹˜",icon:p},{key:"reviews",label:"ë¦¬ë·°",icon:x}].map(({key:e,label:s,icon:a})=>m.jsxs("button",{onClick:()=>d(e),className:"flex items-center px-4 py-3 border-b-2 font-medium text-sm "+(c===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[m.jsx(a,{className:"w-4 h-4 mr-2"}),s]},e))})}),m.jsx("div",{className:"flex-1 overflow-y-auto max-h-96",children:m.jsxs(ae,{mode:"wait",children:["overview"===c&&m.jsxs(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"ì‹œì„¤ ì†Œê°œ"}),m.jsx("p",{className:"text-gray-700 leading-relaxed",children:e.description||`${e.facilityName}ì€(ëŠ”) ${e.facilityType}ë¡œì„œ ì „ë¬¸ì ì¸ ëŒë´„ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. \n                        ìˆ™ë ¨ëœ ì „ë¬¸ ì¸ë ¥ê³¼ ì²´ê³„ì ì¸ ì¼€ì–´ í”„ë¡œê·¸ë¨ì„ í†µí•´ ì…ì†Œìë¶„ë“¤ì˜ ê±´ê°•í•˜ê³  ì•ˆì „í•œ ìƒí™œì„ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤.`})]}),e.specialties&&e.specialties.length>0&&m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"ì „ë¬¸ ì„œë¹„ìŠ¤"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:e.specialties.map(e=>m.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm",children:e},e))})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"í¸ì˜ì‹œì„¤"}),m.jsx("div",{className:"grid grid-cols-2 gap-3",children:S.map(({icon:e,label:s,available:a})=>m.jsxs("div",{className:"flex items-center space-x-2 "+(a?"text-gray-900":"text-gray-400"),children:[m.jsx(e,{className:"w-4 h-4"}),m.jsx("span",{className:"text-sm",children:s}),a?m.jsx(A,{className:"w-4 h-4 text-green-500"}):m.jsx(N,{className:"w-4 h-4 text-gray-400"})]},s))})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"ìš´ì˜ ì •ë³´"}),m.jsxs("div",{className:"space-y-2 text-sm",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(I,{className:"w-4 h-4 mr-2 text-gray-400"}),m.jsxs("span",{children:["ìš´ì˜ì‹œê°„: ",e.operatingHours||"24ì‹œê°„ ìš´ì˜"]})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(u,{className:"w-4 h-4 mr-2 text-gray-400"}),m.jsxs("span",{children:["ì—°ë½ì²˜: ",e.phoneNumber]})]})]})]})]},"overview"),"services"===c&&m.jsxs(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ì œê³µ ì„œë¹„ìŠ¤"}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h4",{className:"font-medium mb-3",children:"ì¼€ì–´ ë“±ê¸‰ë³„ ì„œë¹„ìŠ¤"}),m.jsx("div",{className:"space-y-2",children:e.availableCareGrades.map(e=>m.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded",children:[m.jsxs("span",{children:[e,"ë“±ê¸‰ ì¼€ì–´"]}),m.jsx(A,{className:"w-4 h-4 text-green-500"})]},e))})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx(_,{children:m.jsxs(Y,{className:"p-4",children:[m.jsx("h5",{className:"font-medium mb-2",children:"ì¼ìƒìƒí™œ ì§€ì›"}),m.jsx("p",{className:"text-sm text-gray-600",children:"ì‹ì‚¬, ëª©ìš•, ë°°ì„¤, ì´ë™ ë“± ì¼ìƒìƒí™œ ì „ë°˜ì— ëŒ€í•œ ì „ë¬¸ì ì¸ ëŒë´„ ì„œë¹„ìŠ¤"})]})}),m.jsx(_,{children:m.jsxs(Y,{className:"p-4",children:[m.jsx("h5",{className:"font-medium mb-2",children:"ê±´ê°• ê´€ë¦¬"}),m.jsx("p",{className:"text-sm text-gray-600",children:"ì •ê¸° ê±´ê°•ê²€ì§„, íˆ¬ì•½ ê´€ë¦¬, ì‘ê¸‰ìƒí™© ëŒ€ì‘ ë“± ì²´ê³„ì ì¸ ê±´ê°• ê´€ë¦¬"})]})}),m.jsx(_,{children:m.jsxs(Y,{className:"p-4",children:[m.jsx("h5",{className:"font-medium mb-2",children:"ì—¬ê°€ í™œë™"}),m.jsx("p",{className:"text-sm text-gray-600",children:"ë‹¤ì–‘í•œ í”„ë¡œê·¸ë¨ê³¼ ì—¬ê°€ í™œë™ì„ í†µí•œ ì •ì„œì  ì§€ì› ë° ì‚¬íšŒì  êµë¥˜"})]})})]})]},"services"),"location"===c&&m.jsxs(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ìœ„ì¹˜ ì •ë³´"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center mb-2",children:[m.jsx(p,{className:"w-4 h-4 mr-2 text-gray-400"}),m.jsx("span",{className:"font-medium",children:"ì£¼ì†Œ"})]}),m.jsx("p",{className:"text-gray-700 ml-6",children:e.address})]}),e.latitude&&e.longitude&&m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center mb-2",children:[m.jsx(U,{className:"w-4 h-4 mr-2 text-gray-400"}),m.jsx("span",{className:"font-medium",children:"ì¢Œí‘œ"})]}),m.jsxs("p",{className:"text-gray-700 ml-6",children:["ìœ„ë„: ",e.latitude,", ê²½ë„: ",e.longitude]})]}),m.jsxs(Z,{onClick:()=>{if((null==e?void 0:e.latitude)&&(null==e?void 0:e.longitude)){const s=`https://map.kakao.com/link/map/${e.facilityName},${e.latitude},${e.longitude}`;window.open(s,"_blank")}},variant:"outline",className:"w-full",children:[m.jsx(p,{className:"w-4 h-4 mr-2"}),"ì§€ë„ì—ì„œ ë³´ê¸°"]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium mb-3",children:"êµí†µ ì •ë³´"}),m.jsxs("div",{className:"space-y-2 text-sm",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(G,{className:"w-4 h-4 mr-2 text-gray-400"}),m.jsx("span",{children:"ì£¼ì°¨ì¥ ì´ìš© ê°€ëŠ¥"})]}),m.jsx("div",{className:"text-gray-600 ml-6",children:"ëŒ€ì¤‘êµí†µ ì´ìš© ì‹œ ê°€ì¥ ê°€ê¹Œìš´ ì§€í•˜ì² ì—­ì—ì„œ ë„ë³´ 10ë¶„ ê±°ë¦¬"})]})]})]})]},"location"),"reviews"===c&&m.jsxs(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ì´ìš© í›„ê¸°"}),m.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("span",{className:"text-lg font-semibold",children:"ì „ì²´ í‰ì "}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(x,{className:"w-5 h-5 text-yellow-400 fill-current"}),m.jsx("span",{className:"ml-1 text-lg font-semibold",children:"4.2"}),m.jsx("span",{className:"ml-1 text-gray-600",children:"(24ê°œ ë¦¬ë·°)"})]})]})}),m.jsx("div",{className:"space-y-4",children:[{id:1,author:"ê¹€**",rating:5,date:"2024-01-15",content:"ì§ì›ë¶„ë“¤ì´ ì •ë§ ì¹œì ˆí•˜ì‹œê³  ì‹œì„¤ë„ ê¹¨ë—í•©ë‹ˆë‹¤. ì–´ë¨¸ë‹ˆê»˜ì„œ ë§Œì¡±í•´í•˜ì„¸ìš”."},{id:2,author:"ì´**",rating:4,date:"2024-01-10",content:"ì „ë°˜ì ìœ¼ë¡œ ì¢‹ì€ ì‹œì„¤ì´ì§€ë§Œ ì£¼ì°¨ê³µê°„ì´ ì¡°ê¸ˆ ë¶€ì¡±í•œ ê²ƒ ê°™ì•„ìš”."},{id:3,author:"ë°•**",rating:5,date:"2024-01-05",content:"ì¼€ì–´ ì„œë¹„ìŠ¤ê°€ ì •ë§ ì „ë¬¸ì ì´ê³  ì²´ê³„ì ì…ë‹ˆë‹¤. ì¶”ì²œí•©ë‹ˆë‹¤."}].map(e=>m.jsx(_,{children:m.jsxs(Y,{className:"p-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("span",{className:"font-medium",children:e.author}),m.jsx("div",{className:"flex items-center ml-2",children:Array.from({length:e.rating}).map((e,s)=>m.jsx(x,{className:"w-4 h-4 text-yellow-400 fill-current"},s))})]}),m.jsx("span",{className:"text-sm text-gray-500",children:e.date})]}),m.jsx("p",{className:"text-gray-700",children:e.content})]})},e.id))})]},"reviews")]})})]})]})});var F},ge=({memberId:e,coordinatorId:s,showRecommendations:a=!0})=>{const i=le(e=>e.searchResults),{isSearching:t,isLoadingRecommendations:l}=le(e=>({isSearching:e.isSearching,isLoadingRecommendations:e.isLoadingRecommendations,isLoadingHistory:e.isLoadingHistory})),{searchError:r,recommendationError:d}=le(e=>({searchError:e.searchError,recommendationError:e.recommendationError})),{recommendations:x,searchFilters:h,isDetailModalOpen:p,isRecommendationModalOpen:u,searchFacilities:j,getRecommendations:g,updateSearchFilters:N,clearSearchResults:f,clearRecommendations:b,openRecommendationModal:w,closeRecommendationModal:C,clearAllErrors:S}=le(),[F,M]=o.useState("list"),[E,R]=o.useState(!1),[A,$]=o.useState(""),[O,T]=o.useState("search");o.useEffect(()=>(S(),a&&e&&(T("recommendations"),G()),()=>{f(),b()}),[e,a]);const z=()=>n(null,null,function*(){if(!A.trim()&&0===Object.keys(h).length)return;const e=c(c({},h),A&&{region:A});yield j(e),T("search")}),G=()=>n(null,null,function*(){e&&(yield g(e,s))});return m.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"ì‹œì„¤ ê²€ìƒ‰ ë° ì¶”ì²œ"}),m.jsx("p",{className:"text-gray-600",children:"ë§ì¶¤í˜• ìš”ì–‘ ì‹œì„¤ì„ ì°¾ì•„ë³´ì„¸ìš”. AI ê¸°ë°˜ ì¶”ì²œìœ¼ë¡œ ìµœì ì˜ ì‹œì„¤ì„ ì œì•ˆí•´ë“œë¦½ë‹ˆë‹¤."})]}),m.jsx("div",{className:"mb-6",children:m.jsx("div",{className:"border-b border-gray-200",children:m.jsxs("nav",{className:"-mb-px flex space-x-8",children:[m.jsxs("button",{onClick:()=>T("search"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("search"===O?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[m.jsx(v,{className:"w-4 h-4 inline mr-2"}),"ì‹œì„¤ ê²€ìƒ‰"]}),a&&m.jsxs("button",{onClick:()=>{T("recommendations"),e&&G()},className:"py-2 px-1 border-b-2 font-medium text-sm "+("recommendations"===O?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[m.jsx(k,{className:"w-4 h-4 inline mr-2"}),"ë§ì¶¤ ì¶”ì²œ",x.length>0&&m.jsx("span",{className:"ml-2 bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full",children:x.length})]})]})})}),m.jsxs(ae,{mode:"wait",children:["search"===O&&m.jsxs(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[m.jsx(_,{className:"mb-6",children:m.jsxs(Y,{className:"p-6",children:[m.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[m.jsx("div",{className:"flex-1",children:m.jsxs("div",{className:"relative",children:[m.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),m.jsx("input",{type:"text",placeholder:"ì§€ì—­ëª…ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì„œìš¸ì‹œ ê°•ë‚¨êµ¬)",value:A,onChange:e=>{$(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&z()},className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),m.jsx(Z,{onClick:z,disabled:t,className:"px-8 py-3",children:t?m.jsxs(m.Fragment,{children:[m.jsx(y,{className:"w-4 h-4 mr-2 animate-spin"}),"ê²€ìƒ‰ ì¤‘..."]}):m.jsxs(m.Fragment,{children:[m.jsx(v,{className:"w-4 h-4 mr-2"}),"ê²€ìƒ‰"]})}),m.jsxs(Z,{variant:"outline",onClick:()=>R(!E),className:"px-4 py-3",children:[m.jsx(W,{className:"w-4 h-4 mr-2"}),"í•„í„°"]})]}),m.jsx(ae,{children:E&&m.jsx(se.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:m.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:m.jsx(pe,{filters:h,onFiltersChange:e=>{N(e),"search"===O&&setTimeout(()=>{z()},500)}})})})})]})}),r&&m.jsx(se.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6",children:m.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(L,{className:"w-5 h-5 text-red-500 mr-2"}),m.jsx("span",{className:"text-red-700",children:r})]})})}),i.length>0&&m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"ê²€ìƒ‰ ê²°ê³¼"}),m.jsxs("p",{className:"text-gray-600",children:["ì´ ",i.length,"ê°œì˜ ì‹œì„¤ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤."]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Z,{variant:"list"===F?"default":"outline",size:"sm",onClick:()=>M("list"),children:m.jsx(K,{className:"w-4 h-4"})}),m.jsx(Z,{variant:"grid"===F?"default":"outline",size:"sm",onClick:()=>M("grid"),children:m.jsx(Q,{className:"w-4 h-4"})})]})]}),m.jsx(ce,{facilities:i,viewMode:F,isLoading:t,emptyMessage:"ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ì‹œì„¤ì´ ì—†ìŠµë‹ˆë‹¤."})]},"search"),"recommendations"===O&&m.jsxs(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[d&&m.jsx(se.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6",children:m.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(L,{className:"w-5 h-5 text-red-500 mr-2"}),m.jsx("span",{className:"text-red-700",children:d})]})})}),m.jsx(ue,{recommendations:x,isLoading:l,onRefresh:G,memberId:e})]},"recommendations")]}),m.jsx(je,{})]})})};export{ge as default};
