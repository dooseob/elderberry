import{r as e,al as r,R as a,j as l,a as i,M as t}from"./react-vendor-DjlEhPtN.js";import{r as s}from"./StarRating-Bve-my31.js";import{B as n}from"./core-ui-CLdLL7GI.js";import"./facility-pages-CdldLj64.js";import{C as c,a as o}from"./chat-pages-DZlm3u1D.js";import{L as m,E as d}from"./board-pages-Boj7UMsD.js";import{R as h}from"./ReviewCard-Bq1iDFz2.js";import{m as p}from"./animation-lib-Df_skjj_.js";import"./state-management-DnGX11vy.js";import"./vendor-Bp3O2Fb0.js";import"./style-utils-DeQRAeyh.js";import"./theme-layout-lfdIx57L.js";import"./http-client-9JY-woyA.js";const u=()=>{const[u,y]=e.useState("latest"),[b,x]=e.useState(null),{data:f,isLoading:v,error:N,refetch:g}=r({queryKey:["my-reviews"],queryFn:()=>s.getMyReviews(),staleTime:3e5}),w=a.useMemo(()=>{if(!f)return[];let e=f;return null!==b&&(e=e.filter(e=>Math.floor(e.overallRating)===b)),e.sort((e,r)=>{switch(u){case"rating":return r.overallRating-e.overallRating;case"facility":return(e.facilityName||"").localeCompare(r.facilityName||"");default:return new Date(r.createdAt).getTime()-new Date(e.createdAt).getTime()}})},[f,u,b]);return v?l.jsx("div",{className:"min-h-screen bg-elderberry-25 py-8",children:l.jsx("div",{className:"max-w-4xl mx-auto px-4",children:l.jsx(m,{})})}):N?l.jsx("div",{className:"min-h-screen bg-elderberry-25 py-8",children:l.jsx("div",{className:"max-w-4xl mx-auto px-4",children:l.jsx(d,{message:"내 리뷰 목록을 불러오는 중 오류가 발생했습니다.",onRetry:()=>g()})})}):l.jsx("div",{className:"min-h-screen bg-elderberry-25 py-8",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-elderberry-900 mb-2",children:"내 리뷰 관리"}),l.jsx("p",{className:"text-elderberry-600",children:"작성한 시설 리뷰를 관리하고 수정할 수 있습니다"})]}),l.jsx(c,{className:"mb-6",children:l.jsx(o,{className:"p-4",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-elderberry-700 mb-1",children:"정렬"}),l.jsxs("select",{value:u,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-elderberry-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-elderberry-500",children:[l.jsx("option",{value:"latest",children:"최신순"}),l.jsx("option",{value:"rating",children:"평점순"}),l.jsx("option",{value:"facility",children:"시설명순"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-elderberry-700 mb-1",children:"평점 필터"}),l.jsxs("select",{value:b||"",onChange:e=>x(e.target.value?parseInt(e.target.value):null),className:"px-3 py-2 border border-elderberry-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-elderberry-500",children:[l.jsx("option",{value:"",children:"전체"}),l.jsx("option",{value:"5",children:"5점"}),l.jsx("option",{value:"4",children:"4점"}),l.jsx("option",{value:"3",children:"3점"}),l.jsx("option",{value:"2",children:"2점"}),l.jsx("option",{value:"1",children:"1점"})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(n,{variant:"outline",size:"sm",onClick:()=>g(),className:"flex items-center gap-2",children:[l.jsx(i,{className:"w-4 h-4"}),"새로고침"]}),f&&l.jsxs("span",{className:"text-sm text-elderberry-600",children:["총 ",f.length,"개 리뷰"]})]})]})})}),w.length>0?l.jsx("div",{className:"space-y-4",children:w.map((e,r)=>l.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*r},children:l.jsx(h,{review:e,showFacilityInfo:!0,showActions:!0,onEdit:()=>{e.id},onDelete:()=>{e.id}})},e.id))}):l.jsx(c,{className:"text-center py-12",children:l.jsxs(o,{children:[l.jsx(t,{className:"w-12 h-12 text-elderberry-300 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-elderberry-900 mb-2",children:"작성한 리뷰가 없습니다"}),l.jsx("p",{className:"text-elderberry-600 mb-6",children:"시설을 이용해보고 첫 번째 리뷰를 작성해보세요."}),l.jsx(n,{variant:"primary",onClick:()=>{window.location.href="/facility-search"},children:"시설 찾아보기"})]})})]})})};export{u as default};
