var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,n=(e,s)=>{for(var a in s||(s={}))l.call(s,a)&&i(e,a,s[a]);if(t)for(var a of t(s))r.call(s,a)&&i(e,a,s[a]);return e},c=(e,t)=>s(e,a(t)),d=(e,s,a)=>new Promise((t,l)=>{var r=e=>{try{n(a.next(e))}catch(s){l(s)}},i=e=>{try{n(a.throw(e))}catch(s){l(s)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,i);n((a=a.apply(e,s)).next())});import{r as x,j as o,X as m,al as h,U as u,P as p,$ as j,N as g,O as N,aR as b,_ as f,M as y,t as v,n as w,m as C,a as E,C as D,a8 as S,p as I,an as R,aG as T,l as A,o as L,S as k,F as P,a7 as O,y as _,a1 as M,Z as V,aS as H,f as $,z as U,ay as W,a2 as G,aT as F,e as q,E as z,aU as J,aL as K,aV as Y,am as B,aB as X,D as Z,T as Q,aW as ee,ak as se,a5 as ae,aM as te,Y as le,x as re,as as ie}from"./react-vendor-NBmhJu69.js";import{b as ne,B as ce,C as de,c as xe,d as oe,e as me,M as he}from"./auth-pages-CET0Wacd.js";import{u as ue}from"./profile-pages-CoRPQ_9l.js";import{b as pe}from"./facility-pages-B_M2czrp.js";import{u as je}from"./job-pages-CVWPFYvu.js";import{A as ge,m as Ne}from"./ui-libs-DxRLeP0W.js";import{u as be,N as fe}from"./index-BHIHNhHD.js";import"./vendor-MoQSWkxU.js";import"./utils-cIyM4dU9.js";import"./state-management-DQx9wNSQ.js";import"./chat-pages-DmMwbQEe.js";const ye=({isOpen:e,onClose:s,user:a,profile:t})=>{const{updateProfile:l}=ne(),{updateProfile:r,loading:i}=ue(),[b,f]=x.useState({name:a.name,phone:(null==t?void 0:t.phone)||"",address:(null==t?void 0:t.address)||"",introduction:(null==t?void 0:t.introduction)||""}),[y,v]=x.useState({}),[w,C]=x.useState(null);x.useEffect(()=>{e&&(f({name:a.name,phone:(null==t?void 0:t.phone)||"",address:(null==t?void 0:t.address)||"",introduction:(null==t?void 0:t.introduction)||""}),v({}),C(null))},[e,a,t]);const E=(e,s)=>{f(a=>c(n({},a),{[e]:s})),y[e]&&v(s=>c(n({},s),{[e]:void 0}))},D=e=>d(null,null,function*(){if(e.preventDefault(),(()=>{const e={};return b.name.trim()||(e.name="이름은 필수입니다."),b.phone&&!/^[0-9-+\s()]+$/.test(b.phone)&&(e.phone="올바른 전화번호 형식이 아닙니다."),b.introduction&&b.introduction.length>500&&(e.introduction="자기소개는 500자 이하로 작성해주세요."),v(e),0===Object.keys(e).length})())try{b.name!==a.name&&(yield l({name:b.name})),(null==t?void 0:t.id)&&(yield r(t.id,{phone:b.phone,address:b.address,introduction:b.introduction})),s()}catch(i){}});return o.jsx(ge,{children:e&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx(Ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black bg-opacity-50",onClick:s}),o.jsxs(Ne.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"프로필 편집"}),o.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(m,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:D,className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[o.jsxs("div",{className:"flex items-center space-x-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-elderberry-400 to-elderberry-600 rounded-full flex items-center justify-center text-white text-xl font-bold overflow-hidden",children:w?o.jsx("img",{src:w,alt:"프로필 미리보기",className:"w-full h-full object-cover"}):a.name.charAt(0).toUpperCase()}),o.jsx("label",{htmlFor:"profile-image",className:"absolute bottom-0 right-0 w-6 h-6 bg-elderberry-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-elderberry-700 transition-colors",children:o.jsx(h,{className:"w-3 h-3 text-white"})}),o.jsx("input",{id:"profile-image",type:"file",accept:"image/*",onChange:e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];if(a){if(a.size>5242880)return void v(e=>c(n({},e),{profileImage:"이미지 파일은 5MB 이하여야 합니다."}));if(!a.type.startsWith("image/"))return void v(e=>c(n({},e),{profileImage:"이미지 파일만 업로드 가능합니다."}));f(e=>c(n({},e),{profileImage:a}));const e=new FileReader;e.onload=e=>{var s;C(null==(s=e.target)?void 0:s.result)},e.readAsDataURL(a)}},className:"hidden"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900",children:"프로필 사진"}),o.jsx("p",{className:"text-sm text-gray-500",children:"JPG, PNG 파일 (최대 5MB)"}),y.profileImage&&o.jsx("p",{className:"text-sm text-red-600 mt-1",children:y.profileImage})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(u,{className:"w-4 h-4 inline mr-1"}),"이름 *"]}),o.jsx("input",{type:"text",value:b.name,onChange:e=>E("name",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500 "+(y.name?"border-red-500":"border-gray-300"),placeholder:"이름을 입력하세요"}),y.name&&o.jsx("p",{className:"text-sm text-red-600 mt-1",children:y.name})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(p,{className:"w-4 h-4 inline mr-1"}),"전화번호"]}),o.jsx("input",{type:"tel",value:b.phone,onChange:e=>E("phone",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500 "+(y.phone?"border-red-500":"border-gray-300"),placeholder:"전화번호를 입력하세요"}),y.phone&&o.jsx("p",{className:"text-sm text-red-600 mt-1",children:y.phone})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(j,{className:"w-4 h-4 inline mr-1"}),"주소"]}),o.jsx("input",{type:"text",value:b.address,onChange:e=>E("address",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500",placeholder:"주소를 입력하세요"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(g,{className:"w-4 h-4 inline mr-1"}),"자기소개"]}),o.jsx("textarea",{value:b.introduction,onChange:e=>E("introduction",e.target.value),rows:4,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500 "+(y.introduction?"border-red-500":"border-gray-300"),placeholder:"자기소개를 작성해주세요"}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[y.introduction&&o.jsx("p",{className:"text-sm text-red-600",children:y.introduction}),o.jsxs("p",{className:"text-sm text-gray-500 ml-auto",children:[b.introduction.length,"/500"]})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[o.jsx(ce,{type:"button",variant:"outline",onClick:s,disabled:i.update,children:"취소"}),o.jsxs(ce,{type:"submit",variant:"primary",onClick:D,loading:i.update,className:"flex items-center space-x-2",children:[o.jsx(N,{className:"w-4 h-4"}),o.jsx("span",{children:"저장"})]})]})]})]})})},ve=({user:e,profile:s})=>{const[a,t]=x.useState(!1),l=(()=>{const s=e.profileCompletionRate;return s>=90?{status:"excellent",color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200",icon:E,message:"프로필이 거의 완성되었습니다!"}:s>=70?{status:"good",color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",icon:w,message:"프로필을 더 완성해보세요."}:{status:"needs-improvement",color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200",icon:D,message:"프로필 완성도를 높여주세요."}})(),r=l.icon,i=(e=>{switch(e){case he.CAREGIVER:return[{label:"매칭 성공",value:"12건",icon:S,color:"text-green-600"},{label:"평균 평점",value:"4.8점",icon:I,color:"text-yellow-500"},{label:"활동 기간",value:"8개월",icon:C,color:"text-blue-600"},{label:"완료 케어",value:"5건",icon:R,color:"text-purple-600"}];case he.COORDINATOR:return[{label:"매칭 성공",value:"45건",icon:S,color:"text-green-600"},{label:"고객 만족도",value:"96%",icon:I,color:"text-yellow-500"},{label:"활동 기간",value:"2년",icon:C,color:"text-blue-600"},{label:"관리 회원",value:"23명",icon:f,color:"text-purple-600"}];case he.EMPLOYER:return[{label:"등록 구인",value:"8건",icon:S,color:"text-green-600"},{label:"채용 성공",value:"6건",icon:I,color:"text-yellow-500"},{label:"활동 기간",value:"1년",icon:C,color:"text-blue-600"},{label:"평균 평점",value:"4.7점",icon:R,color:"text-purple-600"}];default:return[]}})(e.role);return o.jsxs("div",{className:"space-y-6",children:[o.jsx(de,{className:`${l.bgColor} ${l.borderColor} border-2`,children:o.jsxs(xe,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(r,{className:`w-8 h-8 ${l.color}`}),o.jsxs("div",{children:[o.jsxs("h3",{className:`text-lg font-semibold ${l.color}`,children:["프로필 완성도 ",e.profileCompletionRate,"%"]}),o.jsx("p",{className:"text-gray-600",children:l.message})]})]}),o.jsxs(ce,{variant:"primary",onClick:()=>t(!0),className:"flex items-center space-x-2",children:[o.jsx(b,{className:"w-4 h-4"}),o.jsx("span",{children:"프로필 편집"})]})]}),o.jsx("div",{className:"mt-4",children:o.jsx("div",{className:"bg-white rounded-full h-3 overflow-hidden",children:o.jsx(Ne.div,{className:"h-full "+("excellent"===l.status?"bg-green-500":"good"===l.status?"bg-blue-500":"bg-orange-500"),initial:{width:0},animate:{width:`${e.profileCompletionRate}%`},transition:{duration:1,ease:"easeOut"}})})})]})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs(de,{className:"lg:col-span-2",children:[o.jsx(oe,{children:o.jsxs(me,{className:"flex items-center space-x-2",children:[o.jsx(f,{className:"w-5 h-5"}),o.jsx("span",{children:"기본 정보"})]})}),o.jsxs(xe,{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(y,{className:"w-5 h-5 text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"이메일"}),o.jsx("p",{className:"font-medium",children:e.email})]})]}),(null==s?void 0:s.phone)&&o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(p,{className:"w-5 h-5 text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"전화번호"}),o.jsx("p",{className:"font-medium",children:s.phone})]})]}),(null==s?void 0:s.address)&&o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(j,{className:"w-5 h-5 text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"주소"}),o.jsx("p",{className:"font-medium",children:s.address})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(v,{className:"w-5 h-5 text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"가입일"}),o.jsx("p",{className:"font-medium",children:new Date((null==s?void 0:s.createdAt)||Date.now()).toLocaleDateString("ko-KR")})]})]})]}),(null==s?void 0:s.introduction)&&o.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"자기소개"}),o.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.introduction})]})]})]}),o.jsxs(de,{children:[o.jsx(oe,{children:o.jsxs(me,{className:"flex items-center space-x-2",children:[o.jsx(w,{className:"w-5 h-5"}),o.jsx("span",{children:"활동 통계"})]})}),o.jsx(xe,{children:o.jsx("div",{className:"space-y-4",children:i.map((e,s)=>{const a=e.icon;return o.jsxs(Ne.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1*s},className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(a,{className:`w-5 h-5 ${e.color}`}),o.jsx("span",{className:"text-gray-600",children:e.label})]}),o.jsx("span",{className:"font-semibold text-gray-900",children:e.value})]},e.label)})})})]})]}),o.jsxs(de,{children:[o.jsx(oe,{children:o.jsxs(me,{className:"flex items-center space-x-2",children:[o.jsx(C,{className:"w-5 h-5"}),o.jsx("span",{children:"최근 활동"})]})}),o.jsx(xe,{children:o.jsx("div",{className:"space-y-3",children:[{date:"2025-01-25",action:"프로필 업데이트",status:"completed"},{date:"2025-01-23",action:"시설 매칭 신청",status:"pending"},{date:"2025-01-20",action:"리뷰 작성",status:"completed"}].map((e,s)=>o.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-3 h-3 rounded-full "+("completed"===e.status?"bg-green-400":"bg-yellow-400")}),o.jsx("span",{className:"text-gray-900",children:e.action})]}),o.jsx("span",{className:"text-sm text-gray-500",children:e.date})]},s))})})]}),o.jsx(ye,{isOpen:a,onClose:()=>t(!1),user:e,profile:s})]})},we=({reviews:e})=>{const[s,a]=x.useState(""),[t,l]=x.useState("date"),[r,i]=x.useState(null),[n,c]=x.useState(!1),{deleteReview:m,loading:h}=pe(),u=T.useMemo(()=>e.filter(e=>{var a;const t=e.content.toLowerCase().includes(s.toLowerCase())||(null==(a=e.facilityName)?void 0:a.toLowerCase().includes(s.toLowerCase())),l=null===r||e.rating===r;return t&&l}).sort((e,s)=>{switch(t){case"rating":return s.rating-e.rating;case"helpful":return s.helpfulCount-e.helpfulCount;default:return new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime()}}),[e,s,t,r]),p=T.useMemo(()=>{if(0===e.length)return{totalReviews:0,averageRating:0,totalHelpfulVotes:0,mostRecentDate:null};const s=e.reduce((e,s)=>e+s.helpfulCount,0),a=e.reduce((e,s)=>e+s.rating,0)/e.length,t=e.map(e=>new Date(e.createdAt)).sort((e,s)=>s.getTime()-e.getTime())[0];return{totalReviews:e.length,averageRating:Number(a.toFixed(1)),totalHelpfulVotes:s,mostRecentDate:t}},[e]),j=(e,s="sm")=>{const a="sm"===s?"w-4 h-4":"w-5 h-5";return o.jsx("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(s=>o.jsx(I,{className:`${a} ${s<=e?"text-yellow-400 fill-current":"text-gray-300"}`},s))})};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(A,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"총 리뷰"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[p.totalReviews,"개"]})]})]})})}),o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center",children:o.jsx(I,{className:"w-5 h-5 text-yellow-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"평균 평점"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[p.averageRating,"점"]})]})]})})}),o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:o.jsx(L,{className:"w-5 h-5 text-green-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"도움됨 투표"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[p.totalHelpfulVotes,"개"]})]})]})})}),o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:o.jsx(v,{className:"w-5 h-5 text-purple-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"최근 작성"}),o.jsx("p",{className:"text-sm font-medium text-gray-900",children:p.mostRecentDate?p.mostRecentDate.toLocaleDateString("ko-KR"):"-"})]})]})})})]}),o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",placeholder:"리뷰 내용이나 시설명으로 검색...",value:s,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500"})]}),o.jsxs(ce,{variant:"outline",onClick:()=>c(!n),className:"flex items-center space-x-2",children:[o.jsx(P,{className:"w-4 h-4"}),o.jsx("span",{children:"필터"}),o.jsx(O,{className:"w-4 h-4 transition-transform "+(n?"rotate-180":"")})]})]}),n&&o.jsxs(Ne.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center space-x-4 pt-4 border-t border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"정렬:"}),o.jsxs("select",{value:t,onChange:e=>l(e.target.value),className:"border border-gray-300 rounded px-3 py-1 text-sm",children:[o.jsx("option",{value:"date",children:"작성일순"}),o.jsx("option",{value:"rating",children:"평점순"}),o.jsx("option",{value:"helpful",children:"도움됨순"})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"평점:"}),o.jsxs("select",{value:r||"",onChange:e=>i(e.target.value?Number(e.target.value):null),className:"border border-gray-300 rounded px-3 py-1 text-sm",children:[o.jsx("option",{value:"",children:"전체"}),o.jsx("option",{value:"5",children:"5점"}),o.jsx("option",{value:"4",children:"4점"}),o.jsx("option",{value:"3",children:"3점"}),o.jsx("option",{value:"2",children:"2점"}),o.jsx("option",{value:"1",children:"1점"})]})]})]})]})})}),o.jsx("div",{className:"space-y-4",children:0===u.length?o.jsx(de,{children:o.jsxs(xe,{className:"p-8 text-center",children:[o.jsx(A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s||r?"검색 결과가 없습니다":"작성한 리뷰가 없습니다"}),o.jsx("p",{className:"text-gray-600",children:s||r?"다른 검색어나 필터를 시도해보세요.":"이용하신 시설에 대한 리뷰를 작성해보세요."})]})}):u.map((e,s)=>o.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},children:o.jsx(de,{children:o.jsxs(xe,{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e.facilityName||"시설명 없음"}),j(e.rating,"md"),o.jsxs("span",{className:"text-sm text-gray-500",children:[e.rating,"점"]})]}),o.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-3",children:[o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(v,{className:"w-4 h-4"}),o.jsx("span",{children:new Date(e.createdAt).toLocaleDateString("ko-KR")})]}),o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(L,{className:"w-4 h-4"}),o.jsxs("span",{children:["도움됨 ",e.helpfulCount]})]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs(ce,{variant:"outline",size:"sm",className:"flex items-center space-x-1",children:[o.jsx(b,{className:"w-4 h-4"}),o.jsx("span",{children:"수정"})]}),o.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>{return s=e.id,d(null,null,function*(){if(window.confirm("정말로 이 리뷰를 삭제하시겠습니까?"))try{yield m(s)}catch(e){}});var s},disabled:h.delete,className:"flex items-center space-x-1 text-red-600 hover:text-red-700",children:[o.jsx(_,{className:"w-4 h-4"}),o.jsx("span",{children:"삭제"})]})]})]}),o.jsx("div",{className:"mb-4",children:o.jsx("p",{className:"text-gray-700 leading-relaxed",children:e.content})}),e.imageUrls&&e.imageUrls.length>0&&o.jsx("div",{className:"mb-4",children:o.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:e.imageUrls.map((e,s)=>o.jsx("img",{src:e,alt:`리뷰 이미지 ${s+1}`,className:"w-20 h-20 object-cover rounded-lg flex-shrink-0"},s))})}),e.adminResponse&&o.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-l-4 border-blue-400",children:[o.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"시설 관리자 답변"}),o.jsx("p",{className:"text-blue-800",children:e.adminResponse}),e.adminResponseDate&&o.jsx("p",{className:"text-xs text-blue-600 mt-2",children:new Date(e.adminResponseDate).toLocaleDateString("ko-KR")})]})]})})},e.id))})]})},Ce=({userId:e})=>{const[s,a]=x.useState([]),[t,l]=x.useState(!0),[r,i]=x.useState(""),[n,c]=x.useState(""),[d,m]=x.useState(""),[h,u]=x.useState(!1);x.useEffect(()=>{const e=[{id:1,facilityId:101,facilityName:"서울실버케어센터",facilityType:"요양원",facilityAddress:"서울시 강남구 논현동",facilityGrade:"A",matchScore:92,status:"COMPLETED",outcome:"CONTRACT_SIGNED",matchedAt:"2025-01-20T10:30:00",completedAt:"2025-01-22T14:15:00",userSatisfactionScore:4.8,coordinatorId:"C001",coordinatorName:"김코디",notes:"매우 만족스러운 매칭이었습니다."},{id:2,facilityId:102,facilityName:"부산노인요양원",facilityType:"요양원",facilityAddress:"부산시 해운대구 우동",facilityGrade:"B",matchScore:87,status:"CONTACTED",outcome:"INTERVIEW_SCHEDULED",matchedAt:"2025-01-18T09:15:00",coordinatorId:"C002",coordinatorName:"이매니저"},{id:3,facilityId:103,facilityName:"대구돌봄센터",facilityType:"주간보호센터",facilityAddress:"대구시 중구 동성로",facilityGrade:"A",matchScore:79,status:"FAILED",outcome:"DECLINED",matchedAt:"2025-01-15T16:20:00",completedAt:"2025-01-16T11:30:00",notes:"위치가 맞지 않아 거절"}];setTimeout(()=>{a(e),l(!1)},1e3)},[e]);const g=T.useMemo(()=>s.filter(e=>{const s=e.facilityName.toLowerCase().includes(r.toLowerCase())||e.facilityAddress.toLowerCase().includes(r.toLowerCase()),a=!n||e.status===n,t=!d||e.outcome===d;return s&&a&&t}),[s,r,n,d]),N=T.useMemo(()=>{const e=s.length,a=s.filter(e=>"COMPLETED"===e.status).length,t=e>0?Math.round(a/e*100):0,l=s.length>0?Math.round(s.reduce((e,s)=>e+s.matchScore,0)/s.length):0,r=s.filter(e=>e.userSatisfactionScore).reduce((e,s,a,t)=>e+(s.userSatisfactionScore||0)/t.length,0);return{total:e,completed:a,successRate:t,averageScore:l,averageSatisfaction:Math.round(10*r)/10}},[s]);return t?o.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>o.jsx(de,{children:o.jsx(xe,{className:"p-6",children:o.jsxs("div",{className:"animate-pulse space-y-4",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),o.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),o.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})})},e))}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(S,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"총 매칭"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[N.total,"건"]})]})]})})}),o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:o.jsx(E,{className:"w-5 h-5 text-green-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"성공률"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[N.successRate,"%"]})]})]})})}),o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center",children:o.jsx(w,{className:"w-5 h-5 text-yellow-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"평균 점수"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[N.averageScore,"점"]})]})]})})}),o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:o.jsx(I,{className:"w-5 h-5 text-purple-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"만족도"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N.averageSatisfaction||"-"})]})]})})})]}),o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",placeholder:"시설명이나 주소로 검색...",value:r,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500"})]}),o.jsxs(ce,{variant:"outline",onClick:()=>u(!h),className:"flex items-center space-x-2",children:[o.jsx(P,{className:"w-4 h-4"}),o.jsx("span",{children:"필터"})]})]}),h&&o.jsxs(Ne.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"flex items-center space-x-4 pt-4 border-t border-gray-200",children:[o.jsxs("select",{value:n,onChange:e=>c(e.target.value),className:"border border-gray-300 rounded px-3 py-2",children:[o.jsx("option",{value:"",children:"전체 상태"}),o.jsx("option",{value:"PENDING",children:"대기중"}),o.jsx("option",{value:"VIEWED",children:"확인됨"}),o.jsx("option",{value:"CONTACTED",children:"연락됨"}),o.jsx("option",{value:"COMPLETED",children:"완료"}),o.jsx("option",{value:"FAILED",children:"실패"}),o.jsx("option",{value:"CANCELLED",children:"취소됨"})]}),o.jsxs("select",{value:d,onChange:e=>m(e.target.value),className:"border border-gray-300 rounded px-3 py-2",children:[o.jsx("option",{value:"",children:"전체 결과"}),o.jsx("option",{value:"CONTRACT_SIGNED",children:"계약 체결"}),o.jsx("option",{value:"INTERVIEW_SCHEDULED",children:"면접 예정"}),o.jsx("option",{value:"DECLINED",children:"거절"}),o.jsx("option",{value:"EXPIRED",children:"만료"})]})]})]})})}),o.jsx("div",{className:"space-y-4",children:0===g.length?o.jsx(de,{children:o.jsxs(xe,{className:"p-8 text-center",children:[o.jsx(M,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:r||n||d?"검색 결과가 없습니다":"매칭 이력이 없습니다"}),o.jsx("p",{className:"text-gray-600",children:r||n||d?"다른 검색어나 필터를 시도해보세요.":"시설 매칭을 신청하여 이력을 쌓아보세요."})]})}):g.map((e,s)=>{const a=(e=>{switch(e){case"COMPLETED":return{bg:"bg-green-100",text:"text-green-800",icon:E,label:"완료"};case"CONTACTED":return{bg:"bg-blue-100",text:"text-blue-800",icon:p,label:"연락됨"};case"VIEWED":return{bg:"bg-purple-100",text:"text-purple-800",icon:$,label:"확인됨"};case"PENDING":return{bg:"bg-yellow-100",text:"text-yellow-800",icon:C,label:"대기중"};case"FAILED":return{bg:"bg-red-100",text:"text-red-800",icon:H,label:"실패"};case"CANCELLED":return{bg:"bg-gray-100",text:"text-gray-800",icon:H,label:"취소됨"};default:return{bg:"bg-gray-100",text:"text-gray-800",icon:D,label:"알 수 없음"}}})(e.status),t=(e=>{switch(e){case"CONTRACT_SIGNED":return{text:"text-green-600",label:"계약 체결"};case"INTERVIEW_SCHEDULED":return{text:"text-blue-600",label:"면접 예정"};case"DECLINED":return{text:"text-red-600",label:"거절"};case"EXPIRED":return{text:"text-gray-600",label:"만료"};default:return{text:"text-gray-600",label:"-"}}})(e.outcome);return a.icon,o.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},children:o.jsx(de,{children:o.jsxs(xe,{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e.facilityName}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a.bg} ${a.text}`,children:a.label}),"NONE"!==e.outcome&&o.jsx("span",{className:`text-sm font-medium ${t.text}`,children:t.label})]}),o.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(j,{className:"w-4 h-4"}),o.jsx("span",{children:e.facilityAddress})]}),o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(R,{className:"w-4 h-4"}),o.jsxs("span",{children:[e.facilityType," (",e.facilityGrade,"등급)"]})]})]}),o.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(v,{className:"w-4 h-4"}),o.jsxs("span",{children:["매칭: ",new Date(e.matchedAt).toLocaleDateString("ko-KR")]})]}),e.completedAt&&o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(E,{className:"w-4 h-4"}),o.jsxs("span",{children:["완료: ",new Date(e.completedAt).toLocaleDateString("ko-KR")]})]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-2xl font-bold text-elderberry-600 mb-1",children:[e.matchScore,"점"]}),o.jsx("div",{className:"text-xs text-gray-500",children:"매칭 점수"})]})]}),e.coordinatorName&&o.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(f,{className:"w-4 h-4 text-gray-600"}),o.jsx("span",{className:"text-sm text-gray-600",children:"담당 코디네이터:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.coordinatorName})]})}),e.userSatisfactionScore&&o.jsx("div",{className:"bg-yellow-50 rounded-lg p-3 mb-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(I,{className:"w-4 h-4 text-yellow-600"}),o.jsx("span",{className:"text-sm text-gray-600",children:"만족도 평가:"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[(l=Math.round(e.userSatisfactionScore),o.jsx("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(e=>o.jsx(I,{className:"w-4 h-4 "+(e<=l?"text-yellow-400 fill-current":"text-gray-300")},e))})),o.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[e.userSatisfactionScore,"점"]})]})]})}),e.notes&&o.jsx("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:o.jsx("p",{className:"text-sm text-blue-900",children:e.notes})}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsxs(ce,{variant:"outline",size:"sm",className:"flex items-center space-x-1",children:[o.jsx(V,{className:"w-4 h-4"}),o.jsx("span",{children:"시설 보기"})]}),"PENDING"===e.status&&o.jsxs(ce,{variant:"primary",size:"sm",className:"flex items-center space-x-1",children:[o.jsx(p,{className:"w-4 h-4"}),o.jsx("span",{children:"연락하기"})]})]})]})})},e.id);var l})})]})},Ee=({applications:e})=>{const[s,a]=x.useState(""),[t,l]=x.useState(""),[r,i]=x.useState(!1),{withdrawApplication:n,loading:c}=je(),m=T.useMemo(()=>e.filter(e=>{const a=e.jobTitle.toLowerCase().includes(s.toLowerCase())||e.companyName.toLowerCase().includes(s.toLowerCase())||e.location.toLowerCase().includes(s.toLowerCase()),l=!t||e.status===t;return a&&l}),[e,s,t]),h=T.useMemo(()=>{const s=e.length,a=e.filter(e=>"PENDING"===e.status).length;return{total:s,pending:a,interviewing:e.filter(e=>"INTERVIEW_SCHEDULED"===e.status).length,hired:e.filter(e=>"HIRED"===e.status).length,rejected:e.filter(e=>"REJECTED"===e.status).length,responseRate:s>0?Math.round((s-a)/s*100):0}},[e]);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(U,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"총 지원"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[h.total,"건"]})]})]})})}),o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center",children:o.jsx(C,{className:"w-5 h-5 text-yellow-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"검토중"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[h.pending,"건"]})]})]})})}),o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:o.jsx(v,{className:"w-5 h-5 text-purple-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"면접예정"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[h.interviewing,"건"]})]})]})})}),o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:o.jsx(E,{className:"w-5 h-5 text-green-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"채용"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[h.hired,"건"]})]})]})})})]}),o.jsx(de,{className:"bg-gradient-to-r from-elderberry-50 to-blue-50",children:o.jsx(xe,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"지원 응답률"}),o.jsxs("p",{className:"text-3xl font-bold text-elderberry-600",children:[h.responseRate,"%"]}),o.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[h.total-h.pending,"개 지원서에 응답 받음"]})]}),o.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center",children:o.jsx(w,{className:"w-8 h-8 text-elderberry-600"})})]})})}),o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",placeholder:"회사명이나 직책으로 검색...",value:s,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500"})]}),o.jsxs(ce,{variant:"outline",onClick:()=>i(!r),className:"flex items-center space-x-2",children:[o.jsx(P,{className:"w-4 h-4"}),o.jsx("span",{children:"필터"})]})]}),r&&o.jsx(Ne.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"pt-4 border-t border-gray-200",children:o.jsxs("select",{value:t,onChange:e=>l(e.target.value),className:"border border-gray-300 rounded px-3 py-2",children:[o.jsx("option",{value:"",children:"전체 상태"}),o.jsx("option",{value:"PENDING",children:"검토중"}),o.jsx("option",{value:"REVIEWED",children:"검토완료"}),o.jsx("option",{value:"INTERVIEW_SCHEDULED",children:"면접예정"}),o.jsx("option",{value:"HIRED",children:"채용"}),o.jsx("option",{value:"REJECTED",children:"불합격"}),o.jsx("option",{value:"WITHDRAWN",children:"철회"})]})})]})})}),o.jsx("div",{className:"space-y-4",children:0===m.length?o.jsx(de,{children:o.jsxs(xe,{className:"p-8 text-center",children:[o.jsx(W,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s||t?"검색 결과가 없습니다":"지원한 내역이 없습니다"}),o.jsx("p",{className:"text-gray-600",children:s||t?"다른 검색어나 필터를 시도해보세요.":"관심 있는 구인공고에 지원해보세요."})]})}):m.map((e,s)=>{const a=(e=>{switch(e){case"PENDING":return{bg:"bg-yellow-100",text:"text-yellow-800",icon:C,label:"검토중"};case"REVIEWED":return{bg:"bg-blue-100",text:"text-blue-800",icon:$,label:"검토완료"};case"INTERVIEW_SCHEDULED":return{bg:"bg-purple-100",text:"text-purple-800",icon:v,label:"면접예정"};case"HIRED":return{bg:"bg-green-100",text:"text-green-800",icon:E,label:"채용"};case"REJECTED":return{bg:"bg-red-100",text:"text-red-800",icon:H,label:"불합격"};case"WITHDRAWN":return{bg:"bg-gray-100",text:"text-gray-800",icon:F,label:"철회"};default:return{bg:"bg-gray-100",text:"text-gray-800",icon:D,label:"알 수 없음"}}})(e.status),t=a.icon;return o.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},children:o.jsx(de,{children:o.jsxs(xe,{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e.jobTitle}),o.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${a.bg} ${a.text} flex items-center space-x-1`,children:[o.jsx(t,{className:"w-3 h-3"}),o.jsx("span",{children:a.label})]})]}),o.jsx("div",{className:"space-y-2 mb-3",children:o.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(W,{className:"w-4 h-4"}),o.jsx("span",{children:e.companyName})]}),o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(j,{className:"w-4 h-4"}),o.jsx("span",{children:e.location})]}),e.salary&&o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(G,{className:"w-4 h-4"}),o.jsx("span",{children:e.salary})]})]})}),o.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(v,{className:"w-4 h-4"}),o.jsxs("span",{children:["지원일: ",new Date(e.appliedAt).toLocaleDateString("ko-KR")]})]}),e.updatedAt&&e.updatedAt!==e.appliedAt&&o.jsxs("span",{className:"flex items-center space-x-1",children:[o.jsx(C,{className:"w-4 h-4"}),o.jsxs("span",{children:["최종수정: ",new Date(e.updatedAt).toLocaleDateString("ko-KR")]})]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs(ce,{variant:"outline",size:"sm",className:"flex items-center space-x-1",children:[o.jsx($,{className:"w-4 h-4"}),o.jsx("span",{children:"상세보기"})]}),"PENDING"===e.status&&o.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>{return s=e.id,d(null,null,function*(){if(window.confirm("정말로 지원서를 철회하시겠습니까?"))try{yield n(s)}catch(e){}});var s},disabled:c.applicationsLoading,className:"flex items-center space-x-1 text-red-600 hover:text-red-700",children:[o.jsx(_,{className:"w-4 h-4"}),o.jsx("span",{children:"철회"})]})]})]}),e.interviewDate&&o.jsx("div",{className:"bg-purple-50 rounded-lg p-4 mb-4 border-l-4 border-purple-400",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-purple-900 mb-1",children:"면접 일정"}),o.jsx("p",{className:"text-purple-800",children:new Date(e.interviewDate).toLocaleString("ko-KR")}),e.interviewLocation&&o.jsxs("p",{className:"text-sm text-purple-700 mt-1",children:["장소: ",e.interviewLocation]})]}),e.interviewType&&o.jsx("span",{className:"px-2 py-1 bg-purple-200 text-purple-800 rounded text-xs font-medium",children:"ONLINE"===e.interviewType?"온라인":"PHONE"===e.interviewType?"전화":"대면"})]})}),e.feedback&&o.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:[o.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"피드백"}),o.jsx("p",{className:"text-blue-800 text-sm",children:e.feedback})]}),e.coverLetter&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"지원 동기"}),o.jsx("p",{className:"text-gray-700 text-sm line-clamp-3",children:e.coverLetter})]}),o.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-100",children:[o.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.resumeId&&o.jsxs("button",{className:"flex items-center space-x-1 hover:text-elderberry-600",children:[o.jsx(g,{className:"w-4 h-4"}),o.jsx("span",{children:"이력서 보기"})]}),e.portfolioUrl&&o.jsxs("button",{className:"flex items-center space-x-1 hover:text-elderberry-600",children:[o.jsx(V,{className:"w-4 h-4"}),o.jsx("span",{children:"포트폴리오"})]})]}),"HIRED"===e.status&&o.jsxs(ce,{variant:"primary",size:"sm",className:"flex items-center space-x-1",children:[o.jsx(E,{className:"w-4 h-4"}),o.jsx("span",{children:"계약서 확인"})]})]})]})})},e.id)})})]})},De=({user:e})=>{const{updateProfile:s,logout:a}=ne(),{settings:t,updateSettings:l}=be(),[r,i]=x.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[h,u]=x.useState({current:!1,new:!1,confirm:!1}),[p,j]=x.useState(!1),[g,b]=x.useState(!1),[f,v]=x.useState({profileVisibility:"public",showContactInfo:!1,allowDirectMessage:!0,showActivityStatus:!0,dataSharing:!1}),w=(e=>{const s=e.length>=8,a=/[A-Z]/.test(e),t=/[a-z]/.test(e),l=/\d/.test(e),r=/[!@#$%^&*(),.?":{}|<>]/.test(e);return{minLength:s,hasUpper:a,hasLower:t,hasNumber:l,hasSpecial:r,isValid:s&&a&&t&&l&&r}})(r.newPassword),C=(e,s)=>d(null,null,function*(){b(!0);try{yield l({[e]:s})}catch(a){}finally{b(!1)}}),E=(e,s,a)=>d(null,null,function*(){b(!0);try{const r={enabled:e,start:s||t.quietHours.start,end:a||t.quietHours.end};yield l({quietHours:r})}catch(r){}finally{b(!1)}}),D=(e,s)=>{v(a=>c(n({},a),{[e]:s}))},S=e=>({[fe.FACILITY_MATCH_FOUND]:"시설 매칭 발견",[fe.FACILITY_MATCH_CONFIRMED]:"시설 매칭 확정",[fe.FACILITY_MATCH_CANCELLED]:"시설 매칭 취소",[fe.REVIEW_APPROVED]:"리뷰 승인",[fe.REVIEW_REJECTED]:"리뷰 거부",[fe.REVIEW_REPORTED]:"리뷰 신고",[fe.JOB_APPLICATION_RECEIVED]:"지원서 접수",[fe.JOB_APPLICATION_APPROVED]:"지원서 승인",[fe.JOB_APPLICATION_REJECTED]:"지원서 거부",[fe.JOB_INTERVIEW_SCHEDULED]:"면접 일정 안내",[fe.SYSTEM_MAINTENANCE]:"시스템 점검",[fe.SYSTEM_UPDATE]:"시스템 업데이트",[fe.ACCOUNT_SECURITY]:"계정 보안",[fe.GENERAL_INFO]:"일반 정보",[fe.PROMOTION]:"프로모션"}[e]||e);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(de,{children:[o.jsx(oe,{children:o.jsxs(me,{className:"flex items-center space-x-2",children:[o.jsx(q,{className:"w-5 h-5"}),o.jsx("span",{children:"비밀번호 변경"})]})}),o.jsx(xe,{children:o.jsxs("form",{onSubmit:e=>d(null,null,function*(){if(e.preventDefault(),w.isValid)if(r.newPassword===r.confirmPassword){j(!0);try{yield s({currentPassword:r.currentPassword,newPassword:r.newPassword}),i({currentPassword:"",newPassword:"",confirmPassword:""}),alert("비밀번호가 성공적으로 변경되었습니다.")}catch(a){alert("비밀번호 변경에 실패했습니다.")}finally{j(!1)}}else alert("새 비밀번호가 일치하지 않습니다.");else alert("비밀번호 조건을 확인해주세요.")}),className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"현재 비밀번호"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:h.current?"text":"password",value:r.currentPassword,onChange:e=>i(s=>c(n({},s),{currentPassword:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500 pr-10",placeholder:"현재 비밀번호를 입력하세요"}),o.jsx("button",{type:"button",onClick:()=>u(e=>c(n({},e),{current:!e.current})),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:h.current?o.jsx(z,{className:"w-4 h-4"}):o.jsx($,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"새 비밀번호"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:h.new?"text":"password",value:r.newPassword,onChange:e=>i(s=>c(n({},s),{newPassword:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500 pr-10",placeholder:"새 비밀번호를 입력하세요"}),o.jsx("button",{type:"button",onClick:()=>u(e=>c(n({},e),{new:!e.new})),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:h.new?o.jsx(z,{className:"w-4 h-4"}):o.jsx($,{className:"w-4 h-4"})})]}),r.newPassword&&o.jsxs("div",{className:"mt-3 space-y-1",children:[o.jsxs("div",{className:"flex items-center space-x-2 text-sm "+(w.minLength?"text-green-600":"text-red-600"),children:[w.minLength?o.jsx(J,{className:"w-4 h-4"}):o.jsx(m,{className:"w-4 h-4"}),o.jsx("span",{children:"8자 이상"})]}),o.jsxs("div",{className:"flex items-center space-x-2 text-sm "+(w.hasUpper?"text-green-600":"text-red-600"),children:[w.hasUpper?o.jsx(J,{className:"w-4 h-4"}):o.jsx(m,{className:"w-4 h-4"}),o.jsx("span",{children:"대문자 포함"})]}),o.jsxs("div",{className:"flex items-center space-x-2 text-sm "+(w.hasLower?"text-green-600":"text-red-600"),children:[w.hasLower?o.jsx(J,{className:"w-4 h-4"}):o.jsx(m,{className:"w-4 h-4"}),o.jsx("span",{children:"소문자 포함"})]}),o.jsxs("div",{className:"flex items-center space-x-2 text-sm "+(w.hasNumber?"text-green-600":"text-red-600"),children:[w.hasNumber?o.jsx(J,{className:"w-4 h-4"}):o.jsx(m,{className:"w-4 h-4"}),o.jsx("span",{children:"숫자 포함"})]}),o.jsxs("div",{className:"flex items-center space-x-2 text-sm "+(w.hasSpecial?"text-green-600":"text-red-600"),children:[w.hasSpecial?o.jsx(J,{className:"w-4 h-4"}):o.jsx(m,{className:"w-4 h-4"}),o.jsx("span",{children:"특수문자 포함"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"새 비밀번호 확인"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:h.confirm?"text":"password",value:r.confirmPassword,onChange:e=>i(s=>c(n({},s),{confirmPassword:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500 pr-10",placeholder:"새 비밀번호를 다시 입력하세요"}),o.jsx("button",{type:"button",onClick:()=>u(e=>c(n({},e),{confirm:!e.confirm})),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:h.confirm?o.jsx(z,{className:"w-4 h-4"}):o.jsx($,{className:"w-4 h-4"})})]}),r.confirmPassword&&r.newPassword!==r.confirmPassword&&o.jsx("p",{className:"text-sm text-red-600 mt-1",children:"비밀번호가 일치하지 않습니다."})]}),o.jsxs(ce,{type:"submit",variant:"primary",loading:p,disabled:!w.isValid||r.newPassword!==r.confirmPassword,className:"flex items-center space-x-2",children:[o.jsx(N,{className:"w-4 h-4"}),o.jsx("span",{children:"비밀번호 변경"})]})]})})]}),o.jsxs(de,{children:[o.jsx(oe,{children:o.jsxs(me,{className:"flex items-center space-x-2",children:[o.jsx(K,{className:"w-5 h-5"}),o.jsx("span",{children:"알림 설정"})]})}),o.jsx(xe,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"알림 전체 설정"}),o.jsx("p",{className:"text-sm text-gray-500",children:"모든 알림을 한번에 켜거나 끌 수 있습니다"})]}),o.jsx("button",{onClick:()=>C("enabled",!t.enabled),disabled:g,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(t.enabled?"bg-elderberry-600":"bg-gray-200"),children:o.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(t.enabled?"translate-x-6":"translate-x-1")})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx("div",{children:o.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[o.jsx(y,{className:"w-5 h-5 text-blue-600"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"이메일"}),o.jsx("button",{onClick:()=>C("email",!t.email),disabled:g||!t.enabled,className:"ml-auto relative inline-flex h-5 w-9 items-center rounded-full transition-colors "+(t.email&&t.enabled?"bg-blue-600":"bg-gray-200"),children:o.jsx("span",{className:"inline-block h-3 w-3 transform rounded-full bg-white transition-transform "+(t.email&&t.enabled?"translate-x-5":"translate-x-1")})})]})}),o.jsx("div",{children:o.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[o.jsx(Y,{className:"w-5 h-5 text-green-600"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"푸시"}),o.jsx("button",{onClick:()=>C("push",!t.push),disabled:g||!t.enabled,className:"ml-auto relative inline-flex h-5 w-9 items-center rounded-full transition-colors "+(t.push&&t.enabled?"bg-green-600":"bg-gray-200"),children:o.jsx("span",{className:"inline-block h-3 w-3 transform rounded-full bg-white transition-transform "+(t.push&&t.enabled?"translate-x-5":"translate-x-1")})})]})}),o.jsx("div",{children:o.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[o.jsx(y,{className:"w-5 h-5 text-yellow-600"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"SMS"}),o.jsx("button",{onClick:()=>C("sms",!t.sms),disabled:g||!t.enabled,className:"ml-auto relative inline-flex h-5 w-9 items-center rounded-full transition-colors "+(t.sms&&t.enabled?"bg-yellow-600":"bg-gray-200"),children:o.jsx("span",{className:"inline-block h-3 w-3 transform rounded-full bg-white transition-transform "+(t.sms&&t.enabled?"translate-x-5":"translate-x-1")})})]})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"알림 유형별 설정"}),o.jsx("div",{className:"space-y-3",children:Object.entries(t.types).map(([e,s])=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-700",children:S(e)}),o.jsx("button",{onClick:()=>((e,s)=>d(null,null,function*(){b(!0);try{const a=c(n({},t.types),{[e]:s});yield l({types:a})}catch(a){}finally{b(!1)}}))(e,!s),disabled:g||!t.enabled,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(s&&t.enabled?"bg-elderberry-600":"bg-gray-200"),children:o.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(s&&t.enabled?"translate-x-6":"translate-x-1")})})]},e))})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"조용한 시간"}),o.jsx("p",{className:"text-sm text-gray-500",children:"지정된 시간에는 알림을 받지 않습니다"})]}),o.jsx("button",{onClick:()=>E(!t.quietHours.enabled),disabled:g||!t.enabled,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(t.quietHours.enabled&&t.enabled?"bg-elderberry-600":"bg-gray-200"),children:o.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(t.quietHours.enabled&&t.enabled?"translate-x-6":"translate-x-1")})})]}),t.quietHours.enabled&&o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"시작 시간"}),o.jsx("input",{type:"time",value:t.quietHours.start,onChange:e=>E(!0,e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"종료 시간"}),o.jsx("input",{type:"time",value:t.quietHours.end,onChange:e=>E(!0,void 0,e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500"})]})]})]})]})})]}),o.jsxs(de,{children:[o.jsx(oe,{children:o.jsxs(me,{className:"flex items-center space-x-2",children:[o.jsx(B,{className:"w-5 h-5"}),o.jsx("span",{children:"개인정보 보호"})]})}),o.jsx(xe,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"프로필 공개 범위"}),o.jsx("div",{className:"space-y-2",children:[{value:"public",label:"전체 공개",desc:"모든 사용자가 볼 수 있습니다"},{value:"members-only",label:"회원만",desc:"가입한 회원만 볼 수 있습니다"},{value:"private",label:"비공개",desc:"본인만 볼 수 있습니다"}].map(e=>o.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"profileVisibility",value:e.value,checked:f.profileVisibility===e.value,onChange:e=>D("profileVisibility",e.target.value),className:"text-elderberry-600 focus:ring-elderberry-500"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:e.label}),o.jsx("div",{className:"text-sm text-gray-500",children:e.desc})]})]},e.value))})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900",children:"연락처 정보 공개"}),o.jsx("p",{className:"text-sm text-gray-500",children:"이메일, 전화번호 공개 여부"})]}),o.jsx("button",{onClick:()=>D("showContactInfo",!f.showContactInfo),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(f.showContactInfo?"bg-elderberry-600":"bg-gray-200"),children:o.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(f.showContactInfo?"translate-x-6":"translate-x-1")})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900",children:"직접 메시지 허용"}),o.jsx("p",{className:"text-sm text-gray-500",children:"다른 사용자의 메시지 수신"})]}),o.jsx("button",{onClick:()=>D("allowDirectMessage",!f.allowDirectMessage),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(f.allowDirectMessage?"bg-elderberry-600":"bg-gray-200"),children:o.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(f.allowDirectMessage?"translate-x-6":"translate-x-1")})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900",children:"활동 상태 표시"}),o.jsx("p",{className:"text-sm text-gray-500",children:"온라인 상태 및 최근 활동 시간"})]}),o.jsx("button",{onClick:()=>D("showActivityStatus",!f.showActivityStatus),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(f.showActivityStatus?"bg-elderberry-600":"bg-gray-200"),children:o.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(f.showActivityStatus?"translate-x-6":"translate-x-1")})})]})]})]})})]}),o.jsxs(de,{children:[o.jsx(oe,{children:o.jsxs(me,{className:"flex items-center space-x-2",children:[o.jsx(X,{className:"w-5 h-5"}),o.jsx("span",{children:"데이터 관리"})]})}),o.jsx(xe,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-blue-900",children:"데이터 다운로드"}),o.jsx("p",{className:"text-sm text-blue-700",children:"내 데이터를 JSON 형태로 내려받기"})]}),o.jsxs(ce,{variant:"outline",onClick:()=>{},className:"flex items-center space-x-2",children:[o.jsx(Z,{className:"w-4 h-4"}),o.jsx("span",{children:"다운로드"})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg border border-red-200",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"font-medium text-red-900 flex items-center space-x-2",children:[o.jsx(Q,{className:"w-4 h-4"}),o.jsx("span",{children:"계정 삭제"})]}),o.jsx("p",{className:"text-sm text-red-700",children:"계정과 모든 데이터가 영구적으로 삭제됩니다"})]}),o.jsxs(ce,{variant:"outline",onClick:()=>{window.confirm("정말로 계정을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.")},className:"flex items-center space-x-2 text-red-600 border-red-300 hover:bg-red-50",children:[o.jsx(ee,{className:"w-4 h-4"}),o.jsx("span",{children:"계정 삭제"})]})]})]})})]})]})},Se=({userId:e})=>{const[s,a]=x.useState([]),[t,l]=x.useState(!0),[r,i]=x.useState(""),[n,c]=x.useState(""),[d,m]=x.useState("7d"),[h,p]=x.useState(!1);x.useEffect(()=>{const e=[{id:1,type:"login",title:"로그인",description:"계정에 로그인했습니다",timestamp:"2025-01-27T09:15:00",metadata:{ipAddress:"192.168.1.100",userAgent:"Chrome/120.0.0.0",location:"서울시 강남구"},status:"success"},{id:2,type:"review_created",title:"리뷰 작성",description:"서울실버케어센터에 리뷰를 작성했습니다",timestamp:"2025-01-27T08:30:00",metadata:{facilityName:"서울실버케어센터",rating:5},status:"success"},{id:3,type:"job_application",title:"구직 지원",description:"요양보호사 채용공고에 지원했습니다",timestamp:"2025-01-26T16:45:00",metadata:{jobTitle:"요양보호사",company:"부산노인요양원"},status:"info"},{id:4,type:"matching_completed",title:"매칭 완료",description:"시설 매칭이 성공적으로 완료되었습니다",timestamp:"2025-01-26T14:20:00",metadata:{facilityName:"대구돌봄센터",matchScore:92},status:"success"},{id:5,type:"profile_update",title:"프로필 수정",description:"연락처 정보를 업데이트했습니다",timestamp:"2025-01-25T11:10:00",status:"info"},{id:6,type:"settings_changed",title:"설정 변경",description:"알림 설정을 변경했습니다",timestamp:"2025-01-25T10:05:00",status:"info"},{id:7,type:"system_alert",title:"시스템 알림",description:"프로필 완성도가 85%에 도달했습니다",timestamp:"2025-01-24T18:30:00",status:"warning"},{id:8,type:"logout",title:"로그아웃",description:"계정에서 로그아웃했습니다",timestamp:"2025-01-24T17:45:00",metadata:{sessionDuration:"2시간 15분"},status:"info"}];setTimeout(()=>{a(e),l(!1)},1e3)},[e]);const g=T.useMemo(()=>{let e=s;if(r&&(e=e.filter(e=>e.title.toLowerCase().includes(r.toLowerCase())||e.description.toLowerCase().includes(r.toLowerCase()))),n&&(e=e.filter(e=>e.type===n)),"all"!==d){const s="7d"===d?7:"30d"===d?30:90,a=new Date((new Date).getTime()-24*s*60*60*1e3);e=e.filter(e=>new Date(e.timestamp)>=a)}return e.sort((e,s)=>new Date(s.timestamp).getTime()-new Date(e.timestamp).getTime())},[s,r,n,d]),N=e=>{const s=new Date(e),a=((new Date).getTime()-s.getTime())/36e5;if(a<1){return`${Math.floor(60*a)}분 전`}if(a<24)return`${Math.floor(a)}시간 전`;if(a<168){return`${Math.floor(a/24)}일 전`}return s.toLocaleDateString("ko-KR")},b=T.useMemo(()=>{const e=new Date,a=s.filter(s=>new Date(s.timestamp).toDateString()===e.toDateString()),t=s.filter(s=>new Date(s.timestamp)>=new Date(e.getTime()-6048e5));return{today:a.length,thisWeek:t.length,total:s.length}},[s]);return t?o.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(e=>o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"animate-pulse flex items-center space-x-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),o.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]}),o.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})})},e))}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:o.jsx(se,{className:"w-5 h-5 text-green-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"오늘 활동"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[b.today,"건"]})]})]})})}),o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(v,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"이번 주"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[b.thisWeek,"건"]})]})]})})}),o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:o.jsx(C,{className:"w-5 h-5 text-purple-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"전체 활동"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[b.total,"건"]})]})]})})})]}),o.jsx(de,{children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",placeholder:"활동 내역 검색...",value:r,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500"})]}),o.jsxs(ce,{variant:"outline",onClick:()=>p(!h),className:"flex items-center space-x-2",children:[o.jsx(P,{className:"w-4 h-4"}),o.jsx("span",{children:"필터"}),o.jsx(O,{className:"w-4 h-4 transition-transform "+(h?"rotate-180":"")})]})]}),h&&o.jsxs(Ne.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"flex items-center space-x-4 pt-4 border-t border-gray-200",children:[o.jsxs("select",{value:n,onChange:e=>c(e.target.value),className:"border border-gray-300 rounded px-3 py-2",children:[o.jsx("option",{value:"",children:"전체 유형"}),o.jsx("option",{value:"login",children:"로그인/로그아웃"}),o.jsx("option",{value:"profile_update",children:"프로필 관리"}),o.jsx("option",{value:"review_created",children:"리뷰 활동"}),o.jsx("option",{value:"job_application",children:"구직 활동"}),o.jsx("option",{value:"matching_request",children:"매칭 활동"}),o.jsx("option",{value:"settings_changed",children:"설정 변경"}),o.jsx("option",{value:"system_alert",children:"시스템 알림"})]}),o.jsxs("select",{value:d,onChange:e=>m(e.target.value),className:"border border-gray-300 rounded px-3 py-2",children:[o.jsx("option",{value:"7d",children:"최근 7일"}),o.jsx("option",{value:"30d",children:"최근 30일"}),o.jsx("option",{value:"90d",children:"최근 90일"}),o.jsx("option",{value:"all",children:"전체"})]})]})]})})}),o.jsx("div",{className:"space-y-3",children:0===g.length?o.jsx(de,{children:o.jsxs(xe,{className:"p-8 text-center",children:[o.jsx(se,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:r||""!==n||"all"!==d?"검색 결과가 없습니다":"활동 내역이 없습니다"}),o.jsx("p",{className:"text-gray-600",children:r||""!==n||"all"!==d?"다른 검색어나 필터를 시도해보세요.":"서비스를 이용하시면 활동 내역이 표시됩니다."})]})}):g.map((e,s)=>{const{icon:a,color:t,bg:l}=(e=>{switch(e){case"login":return{icon:le,color:"text-green-600",bg:"bg-green-100"};case"logout":return{icon:te,color:"text-gray-600",bg:"bg-gray-100"};case"profile_update":return{icon:u,color:"text-blue-600",bg:"bg-blue-100"};case"review_created":case"review_updated":return{icon:I,color:"text-yellow-600",bg:"bg-yellow-100"};case"review_deleted":return{icon:_,color:"text-red-600",bg:"bg-red-100"};case"job_application":return{icon:W,color:"text-purple-600",bg:"bg-purple-100"};case"job_application_withdrawn":return{icon:W,color:"text-red-600",bg:"bg-red-100"};case"matching_request":case"matching_completed":return{icon:M,color:"text-pink-600",bg:"bg-pink-100"};case"settings_changed":return{icon:ae,color:"text-gray-600",bg:"bg-gray-100"};case"notification":return{icon:A,color:"text-blue-600",bg:"bg-blue-100"};case"system_alert":return{icon:D,color:"text-orange-600",bg:"bg-orange-100"};default:return{icon:se,color:"text-gray-600",bg:"bg-gray-100"}}})(e.type),r=(e=>{switch(e){case"success":return"border-l-green-400";case"warning":return"border-l-yellow-400";case"error":return"border-l-red-400";default:return"border-l-blue-400"}})(e.status);return o.jsx(Ne.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*s},children:o.jsx(de,{className:`border-l-4 ${r}`,children:o.jsx(xe,{className:"p-4",children:o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:`w-10 h-10 ${l} rounded-full flex items-center justify-center flex-shrink-0`,children:o.jsx(a,{className:`w-5 h-5 ${t}`})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900",children:e.title}),o.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0",children:N(e.timestamp)})]}),o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),e.metadata&&o.jsxs("div",{className:"space-y-1",children:[e.metadata.facilityName&&o.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[o.jsx(j,{className:"w-3 h-3"}),o.jsxs("span",{children:["시설: ",e.metadata.facilityName]})]}),e.metadata.jobTitle&&o.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[o.jsx(W,{className:"w-3 h-3"}),o.jsxs("span",{children:["직책: ",e.metadata.jobTitle]})]}),e.metadata.rating&&o.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[o.jsx(I,{className:"w-3 h-3"}),o.jsxs("span",{children:["평점: ",e.metadata.rating,"점"]})]}),e.metadata.matchScore&&o.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[o.jsx(E,{className:"w-3 h-3"}),o.jsxs("span",{children:["매칭 점수: ",e.metadata.matchScore,"점"]})]}),e.metadata.ipAddress&&o.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[o.jsx(V,{className:"w-3 h-3"}),o.jsxs("span",{children:["IP: ",e.metadata.ipAddress]}),e.metadata.location&&o.jsxs("span",{children:["(",e.metadata.location,")"]})]})]})]})]})})})},e.id)})}),g.length>0&&o.jsx("div",{className:"text-center",children:o.jsx(ce,{variant:"outline",children:"더 많은 활동 내역 보기"})})]})},Ie=()=>{const[e,s]=x.useState("overview"),{user:a,isLoading:t}=ne(),{currentProfile:l,getProfile:r}=ue(),{myReviews:i,loadMyReviews:n}=pe(),{applications:c,loadMyApplications:d}=je();x.useEffect(()=>{(null==a?void 0:a.id)&&(r(a.id),n(),d())},[null==a?void 0:a.id,r,n,d]);const m=[{id:"overview",label:"프로필 개요",icon:u,description:"기본 정보 및 완성도"},{id:"reviews",label:"내 리뷰",icon:I,description:"작성한 리뷰 및 평점",badge:i.length},{id:"matching",label:"매칭 이력",icon:M,description:"시설 매칭 기록"},{id:"jobs",label:"지원 현황",icon:W,description:"구직 지원서 관리",badge:c.length},{id:"settings",label:"계정 설정",icon:ae,description:"비밀번호 및 알림 설정"},{id:"activity",label:"활동 내역",icon:se,description:"최근 활동 기록"}];if(t||!a)return o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-elderberry-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"프로필 정보를 불러오는 중..."})]})});return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white border-b border-gray-200",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsx("div",{className:"py-8",children:o.jsxs("div",{className:"flex items-center space-x-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-elderberry-400 to-elderberry-600 rounded-full flex items-center justify-center text-white text-2xl font-bold",children:a.name.charAt(0).toUpperCase()}),o.jsx("button",{className:"absolute bottom-0 right-0 w-8 h-8 bg-white rounded-full border-2 border-gray-200 flex items-center justify-center hover:bg-gray-50 transition-colors",children:o.jsx(h,{className:"w-4 h-4 text-gray-600"})})]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:a.name}),o.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+("CAREGIVER"===a.role?"bg-green-100 text-green-800":"COORDINATOR"===a.role?"bg-blue-100 text-blue-800":"EMPLOYER"===a.role?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:"CAREGIVER"===a.role?"요양보호사":"COORDINATOR"===a.role?"코디네이터":"EMPLOYER"===a.role?"구인업체":"관리자"})]}),o.jsx("p",{className:"text-gray-600 mb-2",children:a.email}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"프로필 완성도"}),o.jsx("div",{className:"flex-1 max-w-xs bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-elderberry-600 h-2 rounded-full transition-all duration-300",style:{width:`${a.profileCompletionRate}%`}})}),o.jsxs("span",{className:"text-sm font-medium text-elderberry-600",children:[a.profileCompletionRate,"%"]})]})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsxs(ce,{variant:"outline",onClick:()=>s("overview"),className:"flex items-center space-x-2",children:[o.jsx(re,{className:"w-4 h-4"}),o.jsx("span",{children:"프로필 편집"})]}),o.jsxs(ce,{variant:"primary",onClick:()=>s("settings"),className:"flex items-center space-x-2",children:[o.jsx(ae,{className:"w-4 h-4"}),o.jsx("span",{children:"설정"})]})]})]})})})}),o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[o.jsx("div",{className:"lg:col-span-1",children:o.jsxs(de,{className:"sticky top-8",children:[o.jsx(oe,{children:o.jsx(me,{className:"text-lg",children:"메뉴"})}),o.jsx(xe,{className:"p-0",children:o.jsx("nav",{className:"space-y-1",children:m.map(a=>{const t=a.icon,l=e===a.id;return o.jsxs(Ne.button,{onClick:()=>s(a.id),className:"w-full flex items-center justify-between px-6 py-4 text-left transition-colors "+(l?"bg-elderberry-50 text-elderberry-700 border-r-2 border-elderberry-600":"text-gray-700 hover:bg-gray-50"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(t,{className:"w-5 h-5 "+(l?"text-elderberry-600":"text-gray-400")}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:a.label}),o.jsx("div",{className:"text-xs text-gray-500",children:a.description})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[void 0!==a.badge&&a.badge>0&&o.jsx("span",{className:"bg-elderberry-100 text-elderberry-700 text-xs font-medium px-2 py-1 rounded-full",children:a.badge}),o.jsx(ie,{className:"w-4 h-4 transition-transform "+(l?"rotate-90 text-elderberry-600":"text-gray-400")})]})]},a.id)})})})]})}),o.jsx("div",{className:"lg:col-span-3",children:o.jsx(ge,{mode:"wait",children:o.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(()=>{switch(e){case"overview":default:return o.jsx(ve,{user:a,profile:l});case"reviews":return o.jsx(we,{reviews:i});case"matching":return o.jsx(Ce,{userId:a.id});case"jobs":return o.jsx(Ee,{applications:c});case"settings":return o.jsx(De,{user:a});case"activity":return o.jsx(Se,{userId:a.id})}})()},e)})})]})})]})};export{Ie as default};
