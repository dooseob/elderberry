var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,n=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&i(e,a,t[a]);if(l)for(var a of l(t))r.call(t,a)&&i(e,a,t[a]);return e},c=(e,l)=>t(e,a(l)),d=(e,t,a)=>i(e,"symbol"!=typeof t?t+"":t,a),o=(e,t,a)=>new Promise((l,s)=>{var r=e=>{try{n(a.next(e))}catch(t){s(t)}},i=e=>{try{n(a.throw(e))}catch(t){s(t)}},n=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,i);n((a=a.apply(e,t)).next())});import{c as m,r as h,j as u,N as x,d as p,af as g,f as y,V as b,i as N,T as f,b6 as v,ae as w,a$ as E,W as k,M as D,S as C,F as R,a4 as j,E as T,e as P,p as I,an as A,C as $,ac as M,Y as O,b7 as S,am as L,$ as V,P as Y,w as _,aE as W,aC as z,aB as F,a2 as q,O as G,Q as U,Z as B,x as J,ao as H,aF as K,b8 as Q,aw as Z,av as X,aH as ee,aR as te,b9 as ae,D as le,aq as se,ba as re,H as ie}from"./react-vendor-DgfdclPJ.js";import{C as ne,j as ce}from"./board-pages-D2pf0vfR.js";import{B as de}from"./core-ui-DRCkfLHi.js";import{u as oe}from"./profile-pages-DaMF41sX.js";import{i as me}from"./state-management-DFZwgI-2.js";import{a as he}from"./http-client-9JY-woyA.js";import{m as ue,A as xe}from"./animation-lib-Bccw-fVq.js";import{u as pe}from"./facility-pages-BFjBWYu8.js";import{u as ge}from"./job-pages-j0hFwdt1.js";import"./vendor-DKWjmJEO.js";import"./style-utils-DeQRAeyh.js";import"./theme-layout-DBJeLQKe.js";var ye=(e=>(e.LATEST="latest",e.OLDEST="oldest",e.HIGHEST_RATING="highest",e.LOWEST_RATING="lowest",e.MOST_HELPFUL="helpful",e))(ye||{});const be={baseURL:"http://localhost:8080",timeout:3e4,headers:{"Content-Type":"application/json"}};class Ne{constructor(){d(this,"ACCESS_TOKEN_KEY","accessToken"),d(this,"REFRESH_TOKEN_KEY","refreshToken")}getAccessToken(){return localStorage.getItem(this.ACCESS_TOKEN_KEY)}getRefreshToken(){return localStorage.getItem(this.REFRESH_TOKEN_KEY)}setTokens(e,t){localStorage.setItem(this.ACCESS_TOKEN_KEY,e),localStorage.setItem(this.REFRESH_TOKEN_KEY,t)}clearTokens(){localStorage.removeItem(this.ACCESS_TOKEN_KEY),localStorage.removeItem(this.REFRESH_TOKEN_KEY)}isTokenExpired(e){try{return 1e3*JSON.parse(atob(e.split(".")[1])).exp<Date.now()}catch(t){return!0}}}const fe=new class{constructor(){d(this,"client"),d(this,"tokenManager"),d(this,"isRefreshing",!1),d(this,"refreshPromise",null),this.client=he.create(be),this.tokenManager=new Ne,this.setupInterceptors()}setupInterceptors(){this.client.interceptors.request.use(e=>{const t=this.tokenManager.getAccessToken();return t&&!this.tokenManager.isTokenExpired(t)&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,e=>o(this,null,function*(){var t;const a=e.config;if(401===(null==(t=e.response)?void 0:t.status)&&!a.t){a.t=!0;try{const e=yield this.refreshAccessToken();return a.headers.Authorization=`Bearer ${e}`,this.client(a)}catch(l){return this.tokenManager.clearTokens(),window.location.href="/login",Promise.reject(l)}}return Promise.reject(this.handleError(e))}))}refreshAccessToken(){return o(this,null,function*(){if(this.isRefreshing&&this.refreshPromise)return this.refreshPromise;this.isRefreshing=!0,this.refreshPromise=this.performTokenRefresh();try{return yield this.refreshPromise}finally{this.isRefreshing=!1,this.refreshPromise=null}})}performTokenRefresh(){return o(this,null,function*(){const e=this.tokenManager.getRefreshToken();if(!e)throw new Error("No refresh token available");const t=yield he.post(`${be.baseURL}/auth/refresh`,{refreshToken:e},{headers:be.headers}),{accessToken:a,refreshToken:l}=t.data;return this.tokenManager.setTokens(a,l),a})}handleError(e){var t,a;return(null==(t=e.response)?void 0:t.data)?e.response.data:{error:"NETWORK_ERROR",message:e.message||"Network error occurred",statusCode:(null==(a=e.response)?void 0:a.status)||0,timestamp:(new Date).toISOString()}}get(e,t){return o(this,null,function*(){return(yield this.client.get(e,t)).data})}post(e,t,a){return o(this,null,function*(){return(yield this.client.post(e,t,a)).data})}put(e,t,a){return o(this,null,function*(){return(yield this.client.put(e,t,a)).data})}patch(e,t,a){return o(this,null,function*(){return(yield this.client.patch(e,t,a)).data})}delete(e,t){return o(this,null,function*(){return(yield this.client.delete(e,t)).data})}uploadFile(e,t,a){return o(this,null,function*(){const l=new FormData;l.append("file",t);const s={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(a&&e.total){const t=Math.round(100*e.loaded/e.total);a(t)}}};return(yield this.client.post(e,l,s)).data})}setTokens(e,t){this.tokenManager.setTokens(e,t)}clearTokens(){this.tokenManager.clearTokens()}getAccessToken(){return this.tokenManager.getAccessToken()}isAuthenticated(){const e=this.tokenManager.getAccessToken();return!!e&&!this.tokenManager.isTokenExpired(e)}},ve=e=>{var t,a,l;if(null==(a=null==(t=e.response)?void 0:t.data)?void 0:a.message)return e.response.data.message;switch(null==(l=e.response)?void 0:l.status){case 400:return"잘못된 요청입니다. 입력 정보를 확인해주세요.";case 401:return"로그인이 필요합니다.";case 403:return"권한이 없습니다.";case 404:return"리뷰를 찾을 수 없습니다.";case 409:return"이미 리뷰를 작성하셨거나 중복된 요청입니다.";case 500:return"서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.";default:return"알 수 없는 오류가 발생했습니다."}},we={reviews:[],currentReview:null,reviewStatistics:null,pagination:{page:0,size:10,totalElements:0,totalPages:0,hasNext:!1,hasPrevious:!1},currentFilter:{},currentSort:ye.LATEST,loading:{reviews:!1,create:!1,update:!1,delete:!1,vote:!1,report:!1,statistics:!1},error:null,selectedFacilityId:null,myReviews:[],myReviewsPagination:{page:0,totalElements:0,totalPages:0}},Ee=m()(me((e,t)=>c(n({},we),{loadReviews:(t,a=0,l=10)=>o(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null,e.selectedFacilityId=t});try{const s=yield((e,t=0,a=10)=>o(null,null,function*(){return(yield fe.get(`/reviews/facility/${e}?page=${t}&size=${a}`)).data}))(t,a,l);e(e=>{e.reviews=s.content,e.pagination={page:s.number,size:s.size,totalElements:s.totalElements,totalPages:s.totalPages,hasNext:!s.last,hasPrevious:!s.first},e.loading.reviews=!1})}catch(s){e(e=>{e.error=ve(s),e.loading.reviews=!1})}}),loadReviewById:t=>o(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null});try{const a=yield(e=>o(null,null,function*(){return(yield fe.get(`/reviews/${e}`)).data}))(t);e(e=>{e.currentReview=a,e.loading.reviews=!1})}catch(a){e(e=>{e.error=ve(a),e.loading.reviews=!1})}}),createReview:(t,a)=>o(null,null,function*(){e(e=>{e.loading.create=!0,e.error=null});try{const l=yield((e,t)=>o(null,null,function*(){return(yield fe.post(`/reviews/facility/${e}`,t)).data}))(t,a);return e(e=>{e.reviews.unshift(l),e.loading.create=!1}),l}catch(l){throw e(e=>{e.error=ve(l),e.loading.create=!1}),l}}),updateReview:(t,a)=>o(null,null,function*(){e(e=>{e.loading.update=!0,e.error=null});try{const l=yield((e,t)=>o(null,null,function*(){return(yield fe.put(`/reviews/${e}`,t)).data}))(t,a);return e(e=>{var a;const s=e.reviews.findIndex(e=>e.id===t);-1!==s&&(e.reviews[s]=l),(null==(a=e.currentReview)?void 0:a.id)===t&&(e.currentReview=l),e.loading.update=!1}),l}catch(l){throw e(e=>{e.error=ve(l),e.loading.update=!1}),l}}),deleteReview:t=>o(null,null,function*(){e(e=>{e.loading.delete=!0,e.error=null});try{yield(e=>o(null,null,function*(){yield fe.delete(`/reviews/${e}`)}))(t),e(e=>{var a;e.reviews=e.reviews.filter(e=>e.id!==t),(null==(a=e.currentReview)?void 0:a.id)===t&&(e.currentReview=null),e.loading.delete=!1})}catch(a){throw e(e=>{e.error=ve(a),e.loading.delete=!1}),a}}),loadLatestReviews:(a,l=0)=>o(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null,e.selectedFacilityId=a,e.currentSort=ye.LATEST});try{const s=yield((e,t=0,a=10)=>o(null,null,function*(){return(yield fe.get(`/reviews/facility/${e}/latest?page=${t}&size=${a}`)).data}))(a,l,t().pagination.size);e(e=>{e.reviews=s.content,e.pagination.page=s.number,e.pagination.totalElements=s.totalElements,e.pagination.totalPages=s.totalPages,e.pagination.hasNext=!s.last,e.pagination.hasPrevious=!s.first,e.loading.reviews=!1})}catch(s){e(e=>{e.error=ve(s),e.loading.reviews=!1})}}),loadBestReviews:(a,l=0)=>o(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null,e.selectedFacilityId=a,e.currentSort=ye.MOST_HELPFUL});try{const s=yield((e,t=0,a=10)=>o(null,null,function*(){return(yield fe.get(`/reviews/facility/${e}/best?page=${t}&size=${a}`)).data}))(a,l,t().pagination.size);e(e=>{e.reviews=s.content,e.pagination.page=s.number,e.pagination.totalElements=s.totalElements,e.pagination.totalPages=s.totalPages,e.pagination.hasNext=!s.last,e.pagination.hasPrevious=!s.first,e.loading.reviews=!1})}catch(s){e(e=>{e.error=ve(s),e.loading.reviews=!1})}}),loadVerifiedReviews:(a,l=0)=>o(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null,e.selectedFacilityId=a,e.currentFilter=c(n({},e.currentFilter),{verified:!0})});try{const s=yield((e,t=0,a=10)=>o(null,null,function*(){return(yield fe.get(`/reviews/facility/${e}/verified?page=${t}&size=${a}`)).data}))(a,l,t().pagination.size);e(e=>{e.reviews=s.content,e.pagination.page=s.number,e.pagination.totalElements=s.totalElements,e.pagination.totalPages=s.totalPages,e.pagination.hasNext=!s.last,e.pagination.hasPrevious=!s.first,e.loading.reviews=!1})}catch(s){e(e=>{e.error=ve(s),e.loading.reviews=!1})}}),loadReviewsWithImages:(a,l=0)=>o(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null,e.selectedFacilityId=a,e.currentFilter=c(n({},e.currentFilter),{hasImages:!0})});try{const s=yield((e,t=0,a=10)=>o(null,null,function*(){return(yield fe.get(`/reviews/facility/${e}/with-images?page=${t}&size=${a}`)).data}))(a,l,t().pagination.size);e(e=>{e.reviews=s.content,e.pagination.page=s.number,e.pagination.totalElements=s.totalElements,e.pagination.totalPages=s.totalPages,e.pagination.hasNext=!s.last,e.pagination.hasPrevious=!s.first,e.loading.reviews=!1})}catch(s){e(e=>{e.error=ve(s),e.loading.reviews=!1})}}),applyFilter:a=>o(null,null,function*(){const{selectedFacilityId:l,currentSort:s,pagination:r}=t();l&&(e(e=>{e.currentFilter=a}),yield t().loadFilteredReviews(l,a,s,0))}),changeSort:a=>o(null,null,function*(){const{selectedFacilityId:l,currentFilter:s}=t();l&&(e(e=>{e.currentSort=a}),yield t().loadFilteredReviews(l,s,a,0))}),loadFilteredReviews:(a,l,s,r=0)=>o(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null,e.selectedFacilityId=a,e.currentFilter=l,e.currentSort=s});try{const i=yield((e,t,...a)=>o(null,[e,t,...a],function*(e,t,a=ye.LATEST,l=0,s=10){const r=new URLSearchParams({page:l.toString(),size:s.toString(),sort:a});return t.reviewType&&r.append("reviewType",t.reviewType),t.minRating&&r.append("minRating",t.minRating.toString()),t.maxRating&&r.append("maxRating",t.maxRating.toString()),void 0!==t.verified&&r.append("verified",t.verified.toString()),void 0!==t.hasImages&&r.append("hasImages",t.hasImages.toString()),void 0!==t.recommended&&r.append("recommended",t.recommended.toString()),(yield fe.get(`/reviews/facility/${e}/filtered?${r.toString()}`)).data}))(a,l,s,r,t().pagination.size);e(e=>{e.reviews=i.content,e.pagination.page=i.number,e.pagination.totalElements=i.totalElements,e.pagination.totalPages=i.totalPages,e.pagination.hasNext=!i.last,e.pagination.hasPrevious=!i.first,e.loading.reviews=!1})}catch(i){e(e=>{e.error=ve(i),e.loading.reviews=!1})}}),clearFilter:()=>{e(e=>{e.currentFilter={}})},voteHelpful:t=>o(null,null,function*(){e(e=>{e.loading.vote=!0,e.error=null});try{yield(e=>o(null,null,function*(){yield fe.post(`/reviews/${e}/vote/helpful`)}))(t),e(e=>{var a;const l=e.reviews.find(e=>e.id===t);l&&(l.helpfulCount+=1),(null==(a=e.currentReview)?void 0:a.id)===t&&(e.currentReview.helpfulCount+=1),e.loading.vote=!1})}catch(a){throw e(e=>{e.error=ve(a),e.loading.vote=!1}),a}}),voteNotHelpful:t=>o(null,null,function*(){e(e=>{e.loading.vote=!0,e.error=null});try{yield(e=>o(null,null,function*(){yield fe.post(`/reviews/${e}/vote/not-helpful`)}))(t),e(e=>{var a;const l=e.reviews.find(e=>e.id===t);l&&(l.notHelpfulCount+=1),(null==(a=e.currentReview)?void 0:a.id)===t&&(e.currentReview.notHelpfulCount+=1),e.loading.vote=!1})}catch(a){throw e(e=>{e.error=ve(a),e.loading.vote=!1}),a}}),reportReview:(t,a,l)=>o(null,null,function*(){e(e=>{e.loading.report=!0,e.error=null});try{yield((e,t,a)=>o(null,null,function*(){yield fe.post(`/reviews/${e}/report`,{reason:t,description:a})}))(t,a,l),e(e=>{var a;const l=e.reviews.find(e=>e.id===t);l&&(l.reportCount+=1),(null==(a=e.currentReview)?void 0:a.id)===t&&(e.currentReview.reportCount+=1),e.loading.report=!1})}catch(s){throw e(e=>{e.error=ve(s),e.loading.report=!1}),s}}),loadReviewStatistics:t=>o(null,null,function*(){e(e=>{e.loading.statistics=!0,e.error=null});try{const a=yield(e=>o(null,null,function*(){return(yield fe.get(`/reviews/facility/${e}/statistics`)).data}))(t);e(e=>{e.reviewStatistics=a,e.loading.statistics=!1})}catch(a){e(e=>{e.error=ve(a),e.loading.statistics=!1})}}),loadMyReviews:(t=0)=>o(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null});try{const a=yield((e=0,t=10)=>o(null,null,function*(){return(yield fe.get(`/reviews/my?page=${e}&size=${t}`)).data}))(t,10);e(e=>{e.myReviews=a.content,e.myReviewsPagination={page:a.number,totalElements:a.totalElements,totalPages:a.totalPages},e.loading.reviews=!1})}catch(a){e(e=>{e.error=ve(a),e.loading.reviews=!1})}}),addAdminResponse:(t,a)=>o(null,null,function*(){e(e=>{e.loading.update=!0,e.error=null});try{const l=yield((e,t)=>o(null,null,function*(){return(yield fe.post(`/admin/reviews/${e}/response`,t)).data}))(t,{response:a});e(e=>{var a;const s=e.reviews.findIndex(e=>e.id===t);-1!==s&&(e.reviews[s]=l),(null==(a=e.currentReview)?void 0:a.id)===t&&(e.currentReview=l),e.loading.update=!1})}catch(l){throw e(e=>{e.error=ve(l),e.loading.update=!1}),l}}),blockReview:t=>o(null,null,function*(){try{const a=yield(e=>o(null,null,function*(){return(yield fe.post(`/admin/reviews/${e}/block`)).data}))(t);e(e=>{var l;const s=e.reviews.findIndex(e=>e.id===t);-1!==s&&(e.reviews[s]=a),(null==(l=e.currentReview)?void 0:l.id)===t&&(e.currentReview=a)})}catch(a){throw e(e=>{e.error=ve(a)}),a}}),activateReview:t=>o(null,null,function*(){try{const a=yield(e=>o(null,null,function*(){return(yield fe.post(`/admin/reviews/${e}/activate`)).data}))(t);e(e=>{var l;const s=e.reviews.findIndex(e=>e.id===t);-1!==s&&(e.reviews[s]=a),(null==(l=e.currentReview)?void 0:l.id)===t&&(e.currentReview=a)})}catch(a){throw e(e=>{e.error=ve(a)}),a}}),setReviewVerified:(t,a)=>o(null,null,function*(){try{const l=yield((e,t)=>o(null,null,function*(){return(yield fe.patch(`/admin/reviews/${e}/verified`,{verified:t})).data}))(t,a);e(e=>{var a;const s=e.reviews.findIndex(e=>e.id===t);-1!==s&&(e.reviews[s]=l),(null==(a=e.currentReview)?void 0:a.id)===t&&(e.currentReview=l)})}catch(l){throw e(e=>{e.error=ve(l)}),l}}),setSelectedFacility:t=>{e(e=>{e.selectedFacilityId=t})},clearCurrentReview:()=>{e(e=>{e.currentReview=null})},clearError:()=>{e(e=>{e.error=null})},resetStore:()=>{e(e=>{Object.assign(e,we)})},goToPage:e=>o(null,null,function*(){const{selectedFacilityId:a,currentFilter:l,currentSort:s}=t();a&&(Object.keys(l).length>0?yield t().loadFilteredReviews(a,l,s,e):yield t().loadReviews(a,e))}),goToNextPage:()=>o(null,null,function*(){const{pagination:e}=t();e.hasNext&&(yield t().goToPage(e.page+1))}),goToPreviousPage:()=>o(null,null,function*(){const{pagination:e}=t();e.hasPrevious&&(yield t().goToPage(e.page-1))})}))),ke=({user:e})=>{const{profile:t,loading:a,fetchProfile:l}=oe(),{reviews:s,fetchMyReviews:r}=Ee(),[i,n]=h.useState([]),[c,d]=h.useState({completed:0,total:0,percentage:0});h.useEffect(()=>{l(),r()},[l,r]),h.useEffect(()=>{if(t){const e=[{key:"name",label:"이름",value:t.name,required:!0,weight:10},{key:"email",label:"이메일",value:t.email,required:!0,weight:10},{key:"phone",label:"전화번호",value:t.phone,required:!0,weight:10},{key:"profileImage",label:"프로필 사진",value:t.profileImageUrl,required:!1,weight:5},{key:"bio",label:"자기소개",value:t.bio,required:!1,weight:10},{key:"address",label:"주소",value:t.address,required:!1,weight:10},{key:"birthDate",label:"생년월일",value:t.birthDate,required:!1,weight:5},{key:"gender",label:"성별",value:t.gender,required:!1,weight:5},{key:"emergencyContact",label:"비상연락처",value:t.emergencyContact,required:!1,weight:10},{key:"experience",label:"경력",value:t.experience,required:!1,weight:15}],a=e.filter(e=>e.value).length,l=e.length,s=Math.round(a/l*100);n(e),d({completed:a,total:l,percentage:s})}},[t]);const o=()=>{let t=0;return t+=.5*c.percentage,t+=5*s.length,t+=e.verified?20:0,Math.round(t)};return a?u.jsx("div",{className:"space-y-6",children:[...Array(3)].map((e,t)=>u.jsx(ne,{className:"p-6",children:u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"h-3 bg-gray-200 rounded"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]})]})},t))}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs(ne,{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"프로필 완성도"}),u.jsxs("span",{className:"text-sm font-medium px-3 py-1 rounded-full "+(c.percentage>=80?"bg-green-100 text-green-800":c.percentage>=50?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[c.completed,"/",c.total," 완료"]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"전체 진행률"}),u.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[c.percentage,"%"]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:u.jsx(ue.div,{className:"bg-blue-500 h-3 rounded-full",initial:{width:0},animate:{width:`${c.percentage}%`},transition:{duration:1,ease:"easeOut"}})})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(e=>u.jsxs(ue.div,{className:"flex items-center space-x-3 p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",whileHover:{scale:1.02},children:[e.value?u.jsx(x,{className:"h-5 w-5 text-green-500"}):u.jsx(p,{className:"h-5 w-5 "+(e.required?"text-red-500":"text-gray-400")}),u.jsx("div",{className:"flex-1",children:u.jsxs("span",{className:"text-sm font-medium "+(e.value?"text-gray-900":"text-gray-600"),children:[e.label,e.required&&!e.value&&u.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})})]},e.key))}),c.percentage<100&&u.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:u.jsx("p",{className:"text-sm text-blue-800",children:"💡 프로필을 완성하면 더 많은 매칭 기회를 얻을 수 있습니다!"})})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"가입일",value:new Date(e.createdAt||Date.now()).toLocaleDateString(),icon:N,color:"text-gray-600"},{label:"프로필 완성도",value:`${c.percentage}%`,icon:f,color:c.percentage>=80?"text-green-600":"text-orange-600"},{label:"작성한 리뷰",value:s.length,icon:y,color:"text-yellow-600"},{label:"활동 점수",value:o(),icon:g,color:"text-blue-600"}].map((e,t)=>u.jsx(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:u.jsxs(ne,{className:"p-4 text-center",children:[u.jsx(e.icon,{className:`h-6 w-6 mx-auto mb-2 ${e.color}`}),u.jsx("div",{className:"text-lg font-bold text-gray-900",children:e.value}),u.jsx("div",{className:"text-sm text-gray-600",children:e.label})]})},e.label))}),u.jsxs(ne,{className:"p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"빠른 작업"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(()=>{const t=[{label:"프로필 수정",icon:v,href:"/profile/edit",color:"blue",description:"기본 정보를 수정합니다"},{label:"계정 설정",icon:w,onClick:()=>{},color:"gray",description:"보안 및 알림 설정을 관리합니다"}];return"CAREGIVER"===e.role&&t.push({label:"자격증 관리",icon:E,href:"/profile/certificates",color:"green",description:"자격증 정보를 등록하고 관리합니다"},{label:"경력 관리",icon:f,href:"/profile/experience",color:"purple",description:"경력 사항을 등록하고 관리합니다"}),"EMPLOYER"===e.role&&t.push({label:"시설 정보",icon:k,href:"/facility/manage",color:"orange",description:"시설 정보를 관리합니다"}),t})().map((e,t)=>u.jsx(ue.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:u.jsxs(de,{variant:"outline",size:"lg",className:"w-full h-auto p-4 flex flex-col items-center space-y-2",href:e.href,onClick:e.onClick,children:[u.jsx(e.icon,{className:`h-6 w-6 text-${e.color}-500`}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"font-medium",children:e.label}),u.jsx("div",{className:"text-xs text-gray-500 mt-1",children:e.description})]})]})},e.label))})]}),u.jsxs(ne,{className:"p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"최근 활동"}),u.jsxs("div",{className:"space-y-3",children:[e.lastLoginAt&&u.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[u.jsx(g,{className:"h-4 w-4"}),u.jsxs("span",{children:["마지막 로그인: ",new Date(e.lastLoginAt).toLocaleString()]})]}),u.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[u.jsx(y,{className:"h-4 w-4"}),u.jsxs("span",{children:["작성한 리뷰: ",s.length,"개"]})]}),u.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[u.jsx(b,{className:"h-4 w-4"}),u.jsxs("span",{children:["활동 점수: ",o(),"점"]})]})]})]})]})},De=()=>{const{reviews:e,loading:t,error:a,fetchMyReviews:l,updateReview:s,deleteReview:r}=Ee(),[i,d]=h.useState([]),[m,x]=h.useState({status:"ALL",rating:null,searchQuery:"",sortBy:"latest"}),[g,b]=h.useState(!1),[f,w]=h.useState(null),[k,A]=h.useState(null);h.useEffect(()=>{l()},[l]),h.useEffect(()=>{let t=[...e];if("ALL"!==m.status&&(t=t.filter(e=>e.status===m.status)),m.rating&&(t=t.filter(e=>e.rating===m.rating)),m.searchQuery){const e=m.searchQuery.toLowerCase();t=t.filter(t=>{var a;return(null==(a=t.facilityName)?void 0:a.toLowerCase().includes(e))||t.content.toLowerCase().includes(e)})}t.sort((e,t)=>{switch(m.sortBy){case"latest":return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime();case"oldest":return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime();case"rating_high":return t.rating-e.rating;case"rating_low":return e.rating-t.rating;default:return 0}}),d(t)},[e,m]);const $=(e,t="sm")=>{const a="sm"===t?"h-4 w-4":"h-5 w-5";return u.jsx("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(t=>u.jsx(y,{className:`${a} ${t<=e?"text-yellow-400 fill-current":"text-gray-300"}`},t))})},M=e=>{switch(e){case"APPROVED":return"bg-green-100 text-green-800";case"PENDING":return"bg-yellow-100 text-yellow-800";case"REJECTED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},O=e=>{switch(e){case"APPROVED":return"승인됨";case"PENDING":return"검토 중";case"REJECTED":return"반려됨";default:return"알 수 없음"}},S=(()=>{const t=e.length,a=e.filter(e=>"APPROVED"===e.status).length,l=e.filter(e=>"PENDING"===e.status).length,s=t>0?e.reduce((e,t)=>e+t.rating,0)/t:0;return{total:t,approved:a,pending:l,avgRating:Math.round(10*s)/10}})();return t||0!==e.length?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxs(ne,{className:"p-4 text-center",children:[u.jsx(D,{className:"h-6 w-6 text-blue-500 mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:S.total}),u.jsx("div",{className:"text-sm text-gray-600",children:"전체 리뷰"})]}),u.jsxs(ne,{className:"p-4 text-center",children:[u.jsx(E,{className:"h-6 w-6 text-green-500 mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:S.approved}),u.jsx("div",{className:"text-sm text-gray-600",children:"승인된 리뷰"})]}),u.jsxs(ne,{className:"p-4 text-center",children:[u.jsx(p,{className:"h-6 w-6 text-yellow-500 mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:S.pending}),u.jsx("div",{className:"text-sm text-gray-600",children:"검토 중"})]}),u.jsxs(ne,{className:"p-4 text-center",children:[u.jsx(y,{className:"h-6 w-6 text-yellow-400 mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:S.avgRating}),u.jsx("div",{className:"text-sm text-gray-600",children:"평균 평점"})]})]}),u.jsxs(ne,{className:"p-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4",children:[u.jsxs("div",{className:"flex-1 relative",children:[u.jsx(C,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),u.jsx("input",{type:"text",placeholder:"시설명 또는 리뷰 내용으로 검색...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:m.searchQuery,onChange:e=>x(t=>c(n({},t),{searchQuery:e.target.value}))})]}),u.jsxs(de,{variant:"outline",onClick:()=>b(!g),className:"flex items-center space-x-2",children:[u.jsx(R,{className:"h-4 w-4"}),u.jsx("span",{children:"필터"}),u.jsx(j,{className:"h-4 w-4 transition-transform "+(g?"rotate-180":"")})]})]}),u.jsx(xe,{children:g&&u.jsx(ue.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t border-gray-200",children:u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"상태"}),u.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:m.status,onChange:e=>x(t=>c(n({},t),{status:e.target.value})),children:[u.jsx("option",{value:"ALL",children:"전체"}),u.jsx("option",{value:"APPROVED",children:"승인됨"}),u.jsx("option",{value:"PENDING",children:"검토 중"}),u.jsx("option",{value:"REJECTED",children:"반려됨"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"평점"}),u.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:m.rating||"",onChange:e=>x(t=>c(n({},t),{rating:e.target.value?parseInt(e.target.value):null})),children:[u.jsx("option",{value:"",children:"전체"}),u.jsx("option",{value:"5",children:"5점"}),u.jsx("option",{value:"4",children:"4점"}),u.jsx("option",{value:"3",children:"3점"}),u.jsx("option",{value:"2",children:"2점"}),u.jsx("option",{value:"1",children:"1점"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"정렬"}),u.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:m.sortBy,onChange:e=>x(t=>c(n({},t),{sortBy:e.target.value})),children:[u.jsx("option",{value:"latest",children:"최신순"}),u.jsx("option",{value:"oldest",children:"오래된순"}),u.jsx("option",{value:"rating_high",children:"평점 높은순"}),u.jsx("option",{value:"rating_low",children:"평점 낮은순"})]})]})]})})})]}),t?u.jsx("div",{className:"space-y-4",children:[...Array(3)].map((e,t)=>u.jsx(ne,{className:"p-6",children:u.jsxs("div",{className:"animate-pulse space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})},t))}):u.jsxs("div",{className:"space-y-4",children:[u.jsx(xe,{children:i.map(e=>u.jsx(ue.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:u.jsxs(ne,{className:"p-6 hover:shadow-md transition-shadow",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:e.facilityName||"시설명 없음"}),u.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${M(e.status)}`,children:O(e.status)})]}),u.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[$(e.rating),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(N,{className:"h-4 w-4"}),u.jsx("span",{children:new Date(e.createdAt).toLocaleDateString()})]}),e.viewCount&&u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(T,{className:"h-4 w-4"}),u.jsxs("span",{children:[e.viewCount,"회 조회"]})]}),e.likeCount&&u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(P,{className:"h-4 w-4"}),u.jsxs("span",{children:[e.likeCount,"개의 좋아요"]})]})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs(de,{size:"sm",variant:"outline",onClick:()=>w(e),className:"flex items-center space-x-1",children:[u.jsx(v,{className:"h-4 w-4"}),u.jsx("span",{children:"수정"})]}),u.jsxs(de,{size:"sm",variant:"outline",onClick:()=>A(e.id),className:"flex items-center space-x-1 text-red-600 hover:text-red-700",children:[u.jsx(I,{className:"h-4 w-4"}),u.jsx("span",{children:"삭제"})]})]})]}),u.jsx("p",{className:"text-gray-700 leading-relaxed",children:e.content}),"REJECTED"===e.status&&e.rejectionReason&&u.jsx("div",{className:"mt-4 p-3 bg-red-50 rounded-lg",children:u.jsxs("p",{className:"text-sm text-red-800",children:[u.jsx("strong",{children:"반려 사유:"})," ",e.rejectionReason]})})]})},e.id))}),0===i.length&&!t&&u.jsxs("div",{className:"text-center py-8",children:[u.jsx(p,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),u.jsx("p",{className:"text-gray-600",children:"검색 조건에 맞는 리뷰가 없습니다."})]})]}),u.jsx(xe,{children:k&&u.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs(ue.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"리뷰 삭제"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"이 리뷰를 정말 삭제하시겠습니까? 삭제된 리뷰는 복구할 수 없습니다."}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsx(de,{variant:"outline",onClick:()=>A(null),className:"flex-1",children:"취소"}),u.jsx(de,{variant:"outline",onClick:()=>{return e=k,o(null,null,function*(){try{yield r(e),A(null)}catch(t){}});var e},className:"flex-1 text-red-600 hover:text-red-700 border-red-200",children:"삭제"})]})]})})})]}):u.jsxs("div",{className:"text-center py-12",children:[u.jsx(D,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"작성한 리뷰가 없습니다"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"이용한 시설에 대한 리뷰를 작성해보세요. 다른 사용자들에게 도움이 됩니다."}),u.jsx(de,{href:"/facilities",children:"시설 찾아보기"})]})},Ce=()=>{const{user:e}=ce(),{facilities:t,loading:a}=pe(),[l,s]=h.useState([]),[r,i]=h.useState([]),[d,o]=h.useState({status:"ALL",facilityType:"",searchQuery:"",dateRange:"all",sortBy:"latest"}),[m,g]=h.useState(!1),[b,v]=h.useState(null);h.useEffect(()=>{s([{id:1,facilityId:1,facilityName:"서울시립요양원",facilityType:"요양원",facilityAddress:"서울시 강남구 테헤란로 123",matchingStatus:"COMPLETED",requestDate:"2024-01-15",responseDate:"2024-01-17",interviewDate:"2024-01-20",startDate:"2024-02-01",coordinatorName:"김코디",coordinatorPhone:"010-1234-5678",coordinatorEmail:"coordinator@facility.com",rating:4.5,salary:28e5,position:"요양보호사",workSchedule:"주간 근무 (08:00-17:00)",notes:"경력 인정받아 우대 조건으로 계약 성사"},{id:2,facilityId:2,facilityName:"행복한 요양병원",facilityType:"요양병원",facilityAddress:"서울시 서초구 강남대로 456",matchingStatus:"INTERVIEW",requestDate:"2024-01-25",responseDate:"2024-01-26",interviewDate:"2024-01-30",coordinatorName:"이매니저",coordinatorPhone:"010-2345-6789",position:"간병인",salary:25e5,workSchedule:"야간 근무 (22:00-08:00)"},{id:3,facilityId:3,facilityName:"은빛마을 데이케어센터",facilityType:"데이케어센터",facilityAddress:"서울시 송파구 올림픽로 789",matchingStatus:"REJECTED",requestDate:"2024-01-10",responseDate:"2024-01-12",rejectionReason:"경력 부족으로 인한 부적합 판정"}])},[]),h.useEffect(()=>{let e=[...l];if("ALL"!==d.status&&(e=e.filter(e=>e.matchingStatus===d.status)),d.facilityType&&(e=e.filter(e=>e.facilityType===d.facilityType)),d.searchQuery){const t=d.searchQuery.toLowerCase();e=e.filter(e=>{var a;return e.facilityName.toLowerCase().includes(t)||e.facilityAddress.toLowerCase().includes(t)||(null==(a=e.coordinatorName)?void 0:a.toLowerCase().includes(t))})}if("all"!==d.dateRange){const t=new Date,a={"1month":1,"3month":3,"6month":6,"1year":12}[d.dateRange],l=new Date(t.getFullYear(),t.getMonth()-a,t.getDate());e=e.filter(e=>new Date(e.requestDate)>=l)}e.sort((e,t)=>{switch(d.sortBy){case"latest":return new Date(t.requestDate).getTime()-new Date(e.requestDate).getTime();case"oldest":return new Date(e.requestDate).getTime()-new Date(t.requestDate).getTime();case"status":return e.matchingStatus.localeCompare(t.matchingStatus);case"facility":return e.facilityName.localeCompare(t.facilityName);default:return 0}}),i(e)},[l,d]);const w=(()=>{const e=l.length,t=l.filter(e=>"COMPLETED"===e.matchingStatus).length;return{total:e,completed:t,pending:l.filter(e=>["PENDING","REVIEWING","INTERVIEW","APPROVED"].includes(e.matchingStatus)).length,successRate:e>0?Math.round(t/e*100):0}})();return a||0!==l.length?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxs(ne,{className:"p-4 text-center",children:[u.jsx(A,{className:"h-6 w-6 text-blue-500 mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:w.total}),u.jsx("div",{className:"text-sm text-gray-600",children:"총 신청"})]}),u.jsxs(ne,{className:"p-4 text-center",children:[u.jsx(x,{className:"h-6 w-6 text-green-500 mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:w.completed}),u.jsx("div",{className:"text-sm text-gray-600",children:"완료"})]}),u.jsxs(ne,{className:"p-4 text-center",children:[u.jsx($,{className:"h-6 w-6 text-yellow-500 mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:w.pending}),u.jsx("div",{className:"text-sm text-gray-600",children:"진행 중"})]}),u.jsxs(ne,{className:"p-4 text-center",children:[u.jsx(f,{className:"h-6 w-6 text-purple-500 mx-auto mb-2"}),u.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[w.successRate,"%"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"성공률"})]})]}),u.jsxs(ne,{className:"p-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4",children:[u.jsxs("div",{className:"flex-1 relative",children:[u.jsx(C,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),u.jsx("input",{type:"text",placeholder:"시설명, 주소, 담당자로 검색...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:d.searchQuery,onChange:e=>o(t=>c(n({},t),{searchQuery:e.target.value}))})]}),u.jsxs(de,{variant:"outline",onClick:()=>g(!m),className:"flex items-center space-x-2",children:[u.jsx(R,{className:"h-4 w-4"}),u.jsx("span",{children:"필터"})]})]}),u.jsx(xe,{children:m&&u.jsx(ue.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t border-gray-200",children:u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"상태"}),u.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:d.status,onChange:e=>o(t=>c(n({},t),{status:e.target.value})),children:[u.jsx("option",{value:"ALL",children:"전체"}),u.jsx("option",{value:"PENDING",children:"신청 중"}),u.jsx("option",{value:"REVIEWING",children:"검토 중"}),u.jsx("option",{value:"INTERVIEW",children:"면접 예정"}),u.jsx("option",{value:"APPROVED",children:"승인됨"}),u.jsx("option",{value:"REJECTED",children:"거절됨"}),u.jsx("option",{value:"COMPLETED",children:"완료됨"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"시설 유형"}),u.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:d.facilityType,onChange:e=>o(t=>c(n({},t),{facilityType:e.target.value})),children:[u.jsx("option",{value:"",children:"전체"}),u.jsx("option",{value:"요양원",children:"요양원"}),u.jsx("option",{value:"요양병원",children:"요양병원"}),u.jsx("option",{value:"데이케어센터",children:"데이케어센터"}),u.jsx("option",{value:"재활센터",children:"재활센터"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"기간"}),u.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:d.dateRange,onChange:e=>o(t=>c(n({},t),{dateRange:e.target.value})),children:[u.jsx("option",{value:"all",children:"전체"}),u.jsx("option",{value:"1month",children:"최근 1개월"}),u.jsx("option",{value:"3month",children:"최근 3개월"}),u.jsx("option",{value:"6month",children:"최근 6개월"}),u.jsx("option",{value:"1year",children:"최근 1년"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"정렬"}),u.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:d.sortBy,onChange:e=>o(t=>c(n({},t),{sortBy:e.target.value})),children:[u.jsx("option",{value:"latest",children:"최신순"}),u.jsx("option",{value:"oldest",children:"오래된순"}),u.jsx("option",{value:"status",children:"상태순"}),u.jsx("option",{value:"facility",children:"시설명순"})]})]})]})})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(xe,{children:r.map(e=>{const t=(e=>{switch(e){case"PENDING":return{color:"bg-blue-100 text-blue-800",icon:$,label:"신청 중"};case"REVIEWING":return{color:"bg-yellow-100 text-yellow-800",icon:p,label:"검토 중"};case"INTERVIEW":return{color:"bg-purple-100 text-purple-800",icon:M,label:"면접 예정"};case"APPROVED":return{color:"bg-green-100 text-green-800",icon:x,label:"승인됨"};case"REJECTED":return{color:"bg-red-100 text-red-800",icon:S,label:"거절됨"};case"CANCELLED":return{color:"bg-gray-100 text-gray-800",icon:S,label:"취소됨"};case"COMPLETED":return{color:"bg-emerald-100 text-emerald-800",icon:x,label:"완료됨"};case"EXPIRED":return{color:"bg-gray-100 text-gray-800",icon:$,label:"만료됨"};default:return{color:"bg-gray-100 text-gray-800",icon:p,label:"알 수 없음"}}})(e.matchingStatus),a=t.icon;return u.jsx(ue.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:u.jsxs(ne,{className:"p-6 hover:shadow-md transition-shadow",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:e.facilityName}),u.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${t.color} flex items-center space-x-1`,children:[u.jsx(a,{className:"h-4 w-4"}),u.jsx("span",{children:t.label})]})]}),u.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(A,{className:"h-4 w-4"}),u.jsx("span",{children:e.facilityType})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(k,{className:"h-4 w-4"}),u.jsx("span",{children:e.facilityAddress})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(N,{className:"h-4 w-4"}),u.jsxs("span",{children:["신청일: ",new Date(e.requestDate).toLocaleDateString()]})]})]}),e.position&&u.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-2",children:[u.jsxs("span",{children:[u.jsx("strong",{children:"직책:"})," ",e.position]}),e.salary&&u.jsxs("span",{children:[u.jsx("strong",{children:"급여:"})," ",e.salary.toLocaleString(),"원"]})]}),e.workSchedule&&u.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[u.jsx("strong",{children:"근무시간:"})," ",e.workSchedule]}),e.coordinatorName&&u.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(M,{className:"h-4 w-4"}),u.jsx("span",{children:e.coordinatorName})]}),e.coordinatorPhone&&u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(O,{className:"h-4 w-4"}),u.jsx("span",{children:e.coordinatorPhone})]})]})]}),u.jsxs(de,{size:"sm",variant:"outline",onClick:()=>v(e),className:"flex items-center space-x-1",children:[u.jsx(T,{className:"h-4 w-4"}),u.jsx("span",{children:"상세보기"})]})]}),"INTERVIEW"===e.matchingStatus&&e.interviewDate&&u.jsx("div",{className:"mt-4 p-3 bg-purple-50 rounded-lg",children:u.jsxs("p",{className:"text-sm text-purple-800",children:[u.jsx("strong",{children:"면접 일정:"})," ",new Date(e.interviewDate).toLocaleString()]})}),"REJECTED"===e.matchingStatus&&e.rejectionReason&&u.jsx("div",{className:"mt-4 p-3 bg-red-50 rounded-lg",children:u.jsxs("p",{className:"text-sm text-red-800",children:[u.jsx("strong",{children:"거절 사유:"})," ",e.rejectionReason]})}),"COMPLETED"===e.matchingStatus&&u.jsxs("div",{className:"mt-4 p-3 bg-green-50 rounded-lg flex items-center justify-between",children:[u.jsxs("div",{className:"text-sm text-green-800",children:[u.jsx("strong",{children:"근무 시작일:"})," ",e.startDate&&new Date(e.startDate).toLocaleDateString()]}),e.rating&&u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(y,{className:"h-4 w-4 text-yellow-400 fill-current"}),u.jsx("span",{className:"text-sm font-medium",children:e.rating})]})]}),e.notes&&u.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:u.jsxs("p",{className:"text-sm text-blue-800",children:[u.jsx("strong",{children:"메모:"})," ",e.notes]})})]})},e.id)})}),0===r.length&&!a&&u.jsxs("div",{className:"text-center py-8",children:[u.jsx(p,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),u.jsx("p",{className:"text-gray-600",children:"검색 조건에 맞는 매칭 기록이 없습니다."})]})]}),u.jsx(xe,{children:b&&u.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>v(null),children:u.jsxs(ue.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-start mb-6",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"매칭 상세 정보"}),u.jsx(de,{size:"sm",variant:"outline",onClick:()=>v(null),children:"닫기"})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"시설 정보"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-sm text-gray-600",children:"시설명"}),u.jsx("p",{className:"font-medium",children:b.facilityName})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-sm text-gray-600",children:"시설 유형"}),u.jsx("p",{className:"font-medium",children:b.facilityType})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"주소"}),u.jsx("p",{className:"font-medium",children:b.facilityAddress})]})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"일정"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"신청일"}),u.jsx("span",{children:new Date(b.requestDate).toLocaleDateString()})]}),b.responseDate&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"응답일"}),u.jsx("span",{children:new Date(b.responseDate).toLocaleDateString()})]}),b.interviewDate&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"면접일"}),u.jsx("span",{children:new Date(b.interviewDate).toLocaleDateString()})]}),b.startDate&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"근무 시작일"}),u.jsx("span",{children:new Date(b.startDate).toLocaleDateString()})]})]})]}),b.coordinatorName&&u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"담당자 정보"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"이름"}),u.jsx("span",{children:b.coordinatorName})]}),b.coordinatorPhone&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"전화번호"}),u.jsx("span",{children:b.coordinatorPhone})]}),b.coordinatorEmail&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"이메일"}),u.jsx("span",{children:b.coordinatorEmail})]})]})]}),(b.position||b.salary||b.workSchedule)&&u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"근무 조건"}),u.jsxs("div",{className:"space-y-2",children:[b.position&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"직책"}),u.jsx("span",{children:b.position})]}),b.salary&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"급여"}),u.jsxs("span",{children:[b.salary.toLocaleString(),"원"]})]}),b.workSchedule&&u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"근무시간"}),u.jsx("span",{children:b.workSchedule})]})]})]}),(b.notes||b.rejectionReason)&&u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"추가 정보"}),b.notes&&u.jsxs("div",{className:"mb-3",children:[u.jsx("span",{className:"text-sm text-gray-600 block mb-1",children:"메모"}),u.jsx("p",{className:"text-sm bg-gray-50 p-3 rounded",children:b.notes})]}),b.rejectionReason&&u.jsxs("div",{children:[u.jsx("span",{className:"text-sm text-gray-600 block mb-1",children:"거절 사유"}),u.jsx("p",{className:"text-sm bg-red-50 p-3 rounded text-red-800",children:b.rejectionReason})]})]})]})]})})})]}):u.jsxs("div",{className:"text-center py-12",children:[u.jsx(k,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"매칭 신청 이력이 없습니다"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"관심 있는 시설에 매칭을 신청해보세요."}),u.jsx(de,{href:"/facilities",children:"시설 찾아보기"})]})},Re=()=>{const{user:e}=ce(),{jobs:t,applications:a,loading:l,fetchApplications:s,fetchMyJobs:r}=ge(),[i,n]=h.useState("applications"),[c,d]=h.useState({status:"ALL",workType:"",searchQuery:"",dateRange:"all",sortBy:"latest"}),[o,m]=h.useState(!1),[g,y]=h.useState(null),[f]=h.useState([{id:1,jobId:1,jobTitle:"요양보호사 (주간 근무)",facilityName:"서울시립요양원",facilityLocation:"서울시 강남구",applicationStatus:"INTERVIEW",applicationDate:"2024-01-20",reviewDate:"2024-01-22",interviewDate:"2024-01-25",salary:28e5,workType:"정규직",workSchedule:"주간 근무 (08:00-17:00)",requirements:["요양보호사 자격증","경력 1년 이상"],benefits:["4대보험","퇴직금","성과급"],notes:"경력 우대로 면접 기회 제공"},{id:2,jobId:2,jobTitle:"간병인 (야간 근무)",facilityName:"행복한 요양병원",facilityLocation:"서울시 서초구",applicationStatus:"REJECTED",applicationDate:"2024-01-15",reviewDate:"2024-01-18",salary:25e5,workType:"계약직",workSchedule:"야간 근무 (22:00-08:00)",requirements:["간병인 경험","야간 근무 가능"],benefits:["야간 수당","교통비 지원"],rejectionReason:"야간 근무 경험 부족으로 부적합 판정"}]),[w]=h.useState([{id:1,title:"경력직 요양보호사 모집",description:"노인 케어 전문 시설에서 함께 일할 경력직 요양보호사를 모집합니다.",facilityName:"우리요양원",location:"서울시 송파구",salary:3e6,workType:"정규직",workSchedule:"주간 근무",requirements:["요양보호사 자격증","경력 2년 이상"],benefits:["4대보험","퇴직금","성과급","교육비 지원"],status:"ACTIVE",createdDate:"2024-01-10",closingDate:"2024-02-10",applicantCount:15,viewCount:120,isActive:!0}]);h.useEffect(()=>{"CAREGIVER"===(null==e?void 0:e.role)?s():"EMPLOYER"===(null==e?void 0:e.role)&&r()},[e,s,r]);const E=(()=>{const t=[];return"CAREGIVER"===(null==e?void 0:e.role)&&t.push({key:"applications",label:"지원 현황",count:f.length}),"EMPLOYER"===(null==e?void 0:e.role)&&t.push({key:"postings",label:"구인 공고",count:w.length}),t})(),D={total:f.length,interview:f.filter(e=>"INTERVIEW"===e.applicationStatus).length,accepted:f.filter(e=>"ACCEPTED"===e.applicationStatus).length,pending:f.filter(e=>["SUBMITTED","REVIEWING"].includes(e.applicationStatus)).length},C={total:w.length,active:w.filter(e=>"ACTIVE"===e.status).length,totalApplicants:w.reduce((e,t)=>e+t.applicantCount,0),totalViews:w.reduce((e,t)=>e+t.viewCount,0)};return u.jsxs("div",{className:"space-y-6",children:[E.length>1&&u.jsx("div",{className:"border-b border-gray-200",children:u.jsx("nav",{className:"-mb-px flex space-x-8",children:E.map(e=>u.jsxs("button",{onClick:()=>n(e.key),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors "+(i===e.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.label," (",e.count,")"]},e.key))})}),"applications"===i&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxs(ne,{className:"p-4 text-center",children:[u.jsx(L,{className:"h-6 w-6 text-blue-500 mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:D.total}),u.jsx("div",{className:"text-sm text-gray-600",children:"총 지원"})]}),u.jsxs(ne,{className:"p-4 text-center",children:[u.jsx(M,{className:"h-6 w-6 text-purple-500 mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:D.interview}),u.jsx("div",{className:"text-sm text-gray-600",children:"면접 진행"})]}),u.jsxs(ne,{className:"p-4 text-center",children:[u.jsx(x,{className:"h-6 w-6 text-green-500 mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:D.accepted}),u.jsx("div",{className:"text-sm text-gray-600",children:"합격"})]}),u.jsxs(ne,{className:"p-4 text-center",children:[u.jsx($,{className:"h-6 w-6 text-yellow-500 mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:D.pending}),u.jsx("div",{className:"text-sm text-gray-600",children:"대기 중"})]})]}),u.jsx("div",{className:"space-y-4",children:0===f.length?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(L,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"지원한 공고가 없습니다"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"관심 있는 구인 공고에 지원해보세요."}),u.jsx(de,{href:"/jobs",children:"구인공고 보기"})]}):f.map(e=>{const t=(e=>{switch(e){case"SUBMITTED":return{color:"bg-blue-100 text-blue-800",icon:$,label:"지원 완료"};case"REVIEWING":return{color:"bg-yellow-100 text-yellow-800",icon:p,label:"검토 중"};case"INTERVIEW":return{color:"bg-purple-100 text-purple-800",icon:M,label:"면접 진행"};case"ACCEPTED":return{color:"bg-green-100 text-green-800",icon:x,label:"합격"};case"REJECTED":return{color:"bg-red-100 text-red-800",icon:S,label:"불합격"};case"WITHDRAWN":return{color:"bg-gray-100 text-gray-800",icon:S,label:"지원 취소"};case"EXPIRED":return{color:"bg-gray-100 text-gray-800",icon:$,label:"만료됨"};default:return{color:"bg-gray-100 text-gray-800",icon:p,label:"알 수 없음"}}})(e.applicationStatus),a=t.icon;return u.jsx(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:u.jsxs(ne,{className:"p-6 hover:shadow-md transition-shadow",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:e.jobTitle}),u.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${t.color} flex items-center space-x-1`,children:[u.jsx(a,{className:"h-4 w-4"}),u.jsx("span",{children:t.label})]})]}),u.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(A,{className:"h-4 w-4"}),u.jsx("span",{children:e.facilityName})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(k,{className:"h-4 w-4"}),u.jsx("span",{children:e.facilityLocation})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(V,{className:"h-4 w-4"}),u.jsxs("span",{children:[e.salary.toLocaleString(),"원"]})]})]}),u.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[u.jsxs("span",{children:[u.jsx("strong",{children:"근무형태:"})," ",e.workType]}),u.jsxs("span",{children:[u.jsx("strong",{children:"근무시간:"})," ",e.workSchedule]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(N,{className:"h-4 w-4"}),u.jsxs("span",{children:["지원일: ",new Date(e.applicationDate).toLocaleDateString()]})]})]})]}),u.jsxs(de,{size:"sm",variant:"outline",onClick:()=>y(e),className:"flex items-center space-x-1",children:[u.jsx(T,{className:"h-4 w-4"}),u.jsx("span",{children:"상세보기"})]})]}),"INTERVIEW"===e.applicationStatus&&e.interviewDate&&u.jsx("div",{className:"mt-4 p-3 bg-purple-50 rounded-lg",children:u.jsxs("p",{className:"text-sm text-purple-800",children:[u.jsx("strong",{children:"면접 일정:"})," ",new Date(e.interviewDate).toLocaleString()]})}),"REJECTED"===e.applicationStatus&&e.rejectionReason&&u.jsx("div",{className:"mt-4 p-3 bg-red-50 rounded-lg",children:u.jsxs("p",{className:"text-sm text-red-800",children:[u.jsx("strong",{children:"불합격 사유:"})," ",e.rejectionReason]})}),e.notes&&u.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:u.jsxs("p",{className:"text-sm text-blue-800",children:[u.jsx("strong",{children:"메모:"})," ",e.notes]})})]})},e.id)})})]}),"postings"===i&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxs(ne,{className:"p-4 text-center",children:[u.jsx(A,{className:"h-6 w-6 text-blue-500 mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:C.total}),u.jsx("div",{className:"text-sm text-gray-600",children:"총 공고"})]}),u.jsxs(ne,{className:"p-4 text-center",children:[u.jsx(x,{className:"h-6 w-6 text-green-500 mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:C.active}),u.jsx("div",{className:"text-sm text-gray-600",children:"활성 공고"})]}),u.jsxs(ne,{className:"p-4 text-center",children:[u.jsx(b,{className:"h-6 w-6 text-purple-500 mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:C.totalApplicants}),u.jsx("div",{className:"text-sm text-gray-600",children:"총 지원자"})]}),u.jsxs(ne,{className:"p-4 text-center",children:[u.jsx(T,{className:"h-6 w-6 text-orange-500 mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:C.totalViews}),u.jsx("div",{className:"text-sm text-gray-600",children:"총 조회수"})]})]}),u.jsx("div",{className:"flex justify-end",children:u.jsxs(de,{href:"/jobs/create",className:"flex items-center space-x-2",children:[u.jsx(Y,{className:"h-4 w-4"}),u.jsx("span",{children:"새 공고 작성"})]})}),u.jsx("div",{className:"space-y-4",children:0===w.length?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"등록된 구인공고가 없습니다"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"첫 번째 구인공고를 작성해보세요."}),u.jsx(de,{href:"/jobs/create",children:"공고 작성하기"})]}):w.map(e=>{const t=(e=>{switch(e){case"ACTIVE":return{color:"bg-green-100 text-green-800",icon:x,label:"모집 중"};case"PAUSED":return{color:"bg-yellow-100 text-yellow-800",icon:p,label:"일시중지"};case"CLOSED":return{color:"bg-gray-100 text-gray-800",icon:S,label:"모집 완료"};case"DRAFT":return{color:"bg-blue-100 text-blue-800",icon:_,label:"임시저장"};default:return{color:"bg-gray-100 text-gray-800",icon:p,label:"알 수 없음"}}})(e.status),a=t.icon;return u.jsx(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:u.jsxs(ne,{className:"p-6 hover:shadow-md transition-shadow",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:e.title}),u.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${t.color} flex items-center space-x-1`,children:[u.jsx(a,{className:"h-4 w-4"}),u.jsx("span",{children:t.label})]})]}),u.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(k,{className:"h-4 w-4"}),u.jsx("span",{children:e.location})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(V,{className:"h-4 w-4"}),u.jsxs("span",{children:[e.salary.toLocaleString(),"원"]})]}),u.jsxs("span",{children:[u.jsx("strong",{children:"근무형태:"})," ",e.workType]})]}),u.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(b,{className:"h-4 w-4"}),u.jsxs("span",{children:["지원자 ",e.applicantCount,"명"]})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(T,{className:"h-4 w-4"}),u.jsxs("span",{children:["조회수 ",e.viewCount,"회"]})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(N,{className:"h-4 w-4"}),u.jsxs("span",{children:["마감일: ",new Date(e.closingDate).toLocaleDateString()]})]})]}),u.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:e.description})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs(de,{size:"sm",variant:"outline",href:`/jobs/${e.id}/edit`,className:"flex items-center space-x-1",children:[u.jsx(v,{className:"h-4 w-4"}),u.jsx("span",{children:"수정"})]}),u.jsxs(de,{size:"sm",variant:"outline",onClick:()=>y(e),className:"flex items-center space-x-1",children:[u.jsx(T,{className:"h-4 w-4"}),u.jsx("span",{children:"상세보기"})]})]})]}),e.requirements.length>0&&u.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:e.requirements.map((e,t)=>u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e},t))})]})},e.id)})})]}),u.jsx(xe,{children:g&&u.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>y(null),children:u.jsxs(ue.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-start mb-6",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"jobTitle"in g?"지원 상세 정보":"공고 상세 정보"}),u.jsx(de,{size:"sm",variant:"outline",onClick:()=>y(null),children:"닫기"})]}),u.jsx("div",{className:"space-y-6",children:u.jsx("div",{className:"text-sm text-gray-600",children:"상세 정보 컴포넌트는 실제 개발 시 구현됩니다."})})]})})})]})},je=()=>{const{user:e,updateProfile:t}=ce(),[a,l]=h.useState("password"),[s,r]=h.useState(!1),[i,d]=h.useState(null),[m,p]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[g,y]=h.useState({current:!1,new:!1,confirm:!1}),[b,N]=h.useState({email:{matchingUpdates:!0,jobAlerts:!0,reviewNotifications:!0,systemUpdates:!1,weeklyDigest:!0},push:{matchingUpdates:!0,jobAlerts:!0,messages:!0,reminders:!1},sms:{importantUpdates:!0,securityAlerts:!0}}),[f,v]=h.useState({profileVisibility:"public",showEmail:!1,showPhone:!1,allowContactFromEmployers:!0,allowContactFromCaregivers:!0,shareActivityStatus:!0}),[E,k]=h.useState({twoFactorEnabled:!1,loginNotifications:!0,deviceManagement:!0,autoLogout:30}),[D,C]=h.useState({theme:"system",language:"ko",timezone:"Asia/Seoul",dateFormat:"YYYY-MM-DD",soundEnabled:!0});h.useEffect(()=>{if(i){const e=setTimeout(()=>d(null),5e3);return()=>clearTimeout(e)}},[i]);const R=(e,t)=>o(null,null,function*(){r(!0);try{yield new Promise(e=>setTimeout(e,1e3)),d({type:"success",text:"설정이 성공적으로 저장되었습니다."})}catch(e){d({type:"error",text:"설정 저장에 실패했습니다."})}finally{r(!1)}}),j=[{key:"password",label:"비밀번호 변경",icon:W},{key:"notifications",label:"알림 설정",icon:z},{key:"privacy",label:"개인정보 설정",icon:w},{key:"security",label:"보안 설정",icon:F},{key:"app",label:"앱 설정",icon:q}];return u.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[u.jsx("div",{className:"lg:w-64",children:u.jsxs(ne,{className:"p-4",children:[u.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"설정 메뉴"}),u.jsx("nav",{className:"space-y-2",children:j.map(e=>{const t=e.icon,s=a===e.key;return u.jsxs("button",{onClick:()=>l(e.key),className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors "+(s?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-700 hover:bg-gray-50"),children:[u.jsx(t,{className:"h-5 w-5 "+(s?"text-blue-500":"text-gray-400")}),u.jsx("span",{className:"font-medium",children:e.label})]},e.key)})})]})}),u.jsxs("div",{className:"flex-1",children:[i&&u.jsxs(ue.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 p-4 rounded-lg flex items-center space-x-3 "+("success"===i.type?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:["success"===i.type?u.jsx(x,{className:"h-5 w-5"}):u.jsx(G,{className:"h-5 w-5"}),u.jsx("span",{children:i.text})]}),"password"===a&&u.jsxs(ne,{className:"p-6",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"비밀번호 변경"}),u.jsxs("form",{onSubmit:e=>o(null,null,function*(){e.preventDefault(),r(!0);try{if(m.newPassword!==m.confirmPassword)throw new Error("새 비밀번호가 일치하지 않습니다.");if(m.newPassword.length<8)throw new Error("새 비밀번호는 8자 이상이어야 합니다.");yield t({currentPassword:m.currentPassword,newPassword:m.newPassword}),p({currentPassword:"",newPassword:"",confirmPassword:""}),d({type:"success",text:"비밀번호가 성공적으로 변경되었습니다."})}catch(a){d({type:"error",text:a.message||"비밀번호 변경에 실패했습니다."})}finally{r(!1)}}),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"현재 비밀번호"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:g.current?"text":"password",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-10",value:m.currentPassword,onChange:e=>p(t=>c(n({},t),{currentPassword:e.target.value}))}),u.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",onClick:()=>y(e=>c(n({},e),{current:!e.current})),children:g.current?u.jsx(U,{className:"h-4 w-4"}):u.jsx(T,{className:"h-4 w-4"})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"새 비밀번호"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:g.new?"text":"password",required:!0,minLength:8,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-10",value:m.newPassword,onChange:e=>p(t=>c(n({},t),{newPassword:e.target.value}))}),u.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",onClick:()=>y(e=>c(n({},e),{new:!e.new})),children:g.new?u.jsx(U,{className:"h-4 w-4"}):u.jsx(T,{className:"h-4 w-4"})})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"8자 이상의 문자, 숫자, 특수문자를 포함해주세요."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"새 비밀번호 확인"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:g.confirm?"text":"password",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-10",value:m.confirmPassword,onChange:e=>p(t=>c(n({},t),{confirmPassword:e.target.value}))}),u.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",onClick:()=>y(e=>c(n({},e),{confirm:!e.confirm})),children:g.confirm?u.jsx(U,{className:"h-4 w-4"}):u.jsx(T,{className:"h-4 w-4"})})]}),m.newPassword&&m.confirmPassword&&m.newPassword!==m.confirmPassword&&u.jsx("p",{className:"text-xs text-red-500 mt-1",children:"비밀번호가 일치하지 않습니다."})]}),u.jsx(de,{type:"submit",disabled:s||!m.currentPassword||!m.newPassword||m.newPassword!==m.confirmPassword,className:"w-full",children:s?u.jsxs(u.Fragment,{children:[u.jsx(B,{className:"h-4 w-4 mr-2 animate-spin"}),"변경 중..."]}):"비밀번호 변경"})]})]}),"notifications"===a&&u.jsxs(ne,{className:"p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"알림 설정"}),u.jsxs(de,{onClick:()=>R(),disabled:s,className:"flex items-center space-x-2",children:[u.jsx(J,{className:"h-4 w-4"}),u.jsx("span",{children:"저장"})]})]}),u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[u.jsx(H,{className:"h-5 w-5 text-gray-400"}),u.jsx("h3",{className:"font-medium text-gray-900",children:"이메일 알림"})]}),u.jsx("div",{className:"space-y-3 ml-7",children:Object.entries(b.email).map(([e,t])=>u.jsxs("label",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-sm text-gray-700",children:["matchingUpdates"===e&&"매칭 업데이트","jobAlerts"===e&&"구인 알림","reviewNotifications"===e&&"리뷰 알림","systemUpdates"===e&&"시스템 업데이트","weeklyDigest"===e&&"주간 요약"]}),u.jsx("input",{type:"checkbox",checked:t,onChange:t=>N(a=>c(n({},a),{email:c(n({},a.email),{[e]:t.target.checked})})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]},e))})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[u.jsx(z,{className:"h-5 w-5 text-gray-400"}),u.jsx("h3",{className:"font-medium text-gray-900",children:"푸시 알림"})]}),u.jsx("div",{className:"space-y-3 ml-7",children:Object.entries(b.push).map(([e,t])=>u.jsxs("label",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-sm text-gray-700",children:["matchingUpdates"===e&&"매칭 업데이트","jobAlerts"===e&&"구인 알림","messages"===e&&"메시지","reminders"===e&&"리마인더"]}),u.jsx("input",{type:"checkbox",checked:t,onChange:t=>N(a=>c(n({},a),{push:c(n({},a.push),{[e]:t.target.checked})})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]},e))})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[u.jsx(K,{className:"h-5 w-5 text-gray-400"}),u.jsx("h3",{className:"font-medium text-gray-900",children:"SMS 알림"})]}),u.jsx("div",{className:"space-y-3 ml-7",children:Object.entries(b.sms).map(([e,t])=>u.jsxs("label",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-sm text-gray-700",children:["importantUpdates"===e&&"중요 업데이트","securityAlerts"===e&&"보안 알림"]}),u.jsx("input",{type:"checkbox",checked:t,onChange:t=>N(a=>c(n({},a),{sms:c(n({},a.sms),{[e]:t.target.checked})})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]},e))})]})]})]}),"privacy"===a&&u.jsxs(ne,{className:"p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"개인정보 설정"}),u.jsxs(de,{onClick:()=>R(),disabled:s,className:"flex items-center space-x-2",children:[u.jsx(J,{className:"h-4 w-4"}),u.jsx("span",{children:"저장"})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"프로필 공개 범위"}),u.jsxs("select",{value:f.profileVisibility,onChange:e=>v(t=>c(n({},t),{profileVisibility:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[u.jsx("option",{value:"public",children:"전체 공개"}),u.jsx("option",{value:"contacts",children:"연락처만"}),u.jsx("option",{value:"private",children:"비공개"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"font-medium text-gray-900",children:"정보 공개 설정"}),Object.entries(f).map(([e,t])=>"profileVisibility"===e?null:u.jsxs("label",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-sm text-gray-700",children:["showEmail"===e&&"이메일 주소 공개","showPhone"===e&&"전화번호 공개","allowContactFromEmployers"===e&&"구인업체 연락 허용","allowContactFromCaregivers"===e&&"요양보호사 연락 허용","shareActivityStatus"===e&&"활동 상태 공유"]}),u.jsx("input",{type:"checkbox",checked:t,onChange:t=>v(a=>c(n({},a),{[e]:t.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]},e))]})]})]}),"security"===a&&u.jsxs(ne,{className:"p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"보안 설정"}),u.jsxs(de,{onClick:()=>R(),disabled:s,className:"flex items-center space-x-2",children:[u.jsx(J,{className:"h-4 w-4"}),u.jsx("span",{children:"저장"})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-gray-900",children:"2단계 인증"}),u.jsx("p",{className:"text-sm text-gray-600",children:"추가 보안을 위한 2단계 인증을 활성화합니다."})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[E.twoFactorEnabled?u.jsx(Q,{className:"h-5 w-5 text-green-500"}):u.jsx(F,{className:"h-5 w-5 text-gray-400"}),u.jsx("input",{type:"checkbox",checked:E.twoFactorEnabled,onChange:e=>k(t=>c(n({},t),{twoFactorEnabled:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]})]}),u.jsx("div",{className:"space-y-4",children:Object.entries(E).map(([e,t])=>"twoFactorEnabled"===e||"autoLogout"===e?null:u.jsxs("label",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-sm text-gray-700",children:["loginNotifications"===e&&"로그인 알림","deviceManagement"===e&&"기기 관리"]}),u.jsx("input",{type:"checkbox",checked:t,onChange:t=>k(a=>c(n({},a),{[e]:t.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]},e))}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"자동 로그아웃 (분)"}),u.jsxs("select",{value:E.autoLogout,onChange:e=>k(t=>c(n({},t),{autoLogout:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[u.jsx("option",{value:15,children:"15분"}),u.jsx("option",{value:30,children:"30분"}),u.jsx("option",{value:60,children:"1시간"}),u.jsx("option",{value:120,children:"2시간"}),u.jsx("option",{value:0,children:"사용 안함"})]})]})]})]}),"app"===a&&u.jsxs(ne,{className:"p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"앱 설정"}),u.jsxs(de,{onClick:()=>R(),disabled:s,className:"flex items-center space-x-2",children:[u.jsx(J,{className:"h-4 w-4"}),u.jsx("span",{children:"저장"})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"테마"}),u.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"light",label:"라이트",icon:Z},{value:"dark",label:"다크",icon:X},{value:"system",label:"시스템",icon:ee}].map(e=>{const t=e.icon;return u.jsxs("button",{onClick:()=>C(t=>c(n({},t),{theme:e.value})),className:"p-3 border rounded-lg flex flex-col items-center space-y-2 transition-colors "+(D.theme===e.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"),children:[u.jsx(t,{className:"h-5 w-5"}),u.jsx("span",{className:"text-sm font-medium",children:e.label})]},e.value)})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"언어"}),u.jsxs("select",{value:D.language,onChange:e=>C(t=>c(n({},t),{language:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[u.jsx("option",{value:"ko",children:"한국어"}),u.jsx("option",{value:"en",children:"English"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"날짜 형식"}),u.jsxs("select",{value:D.dateFormat,onChange:e=>C(t=>c(n({},t),{dateFormat:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[u.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"}),u.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),u.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[D.soundEnabled?u.jsx(te,{className:"h-5 w-5 text-gray-400"}):u.jsx(ae,{className:"h-5 w-5 text-gray-400"}),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"소리 효과"})]}),u.jsx("input",{type:"checkbox",checked:D.soundEnabled,onChange:e=>C(t=>c(n({},t),{soundEnabled:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]})]})]})]})]})},Te=()=>{const{user:e}=ce(),[t,a]=h.useState("activity"),[l,s]=h.useState([]),[r,i]=h.useState([]),[d,o]=h.useState(!1),[m,x]=h.useState({type:"all",dateRange:"month",riskLevel:"all",searchQuery:""}),[p,b]=h.useState(!1);h.useEffect(()=>{s([{id:1,type:"login",action:"로그인",description:"성공적으로 로그인했습니다.",timestamp:"2024-01-26T09:30:00Z",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",location:"서울시 강남구",device:{type:"desktop",os:"Windows 10",browser:"Chrome 120",fingerprint:"fp_desktop_001"},riskLevel:"low"},{id:2,type:"profile_update",action:"프로필 수정",description:"연락처 정보를 업데이트했습니다.",timestamp:"2024-01-25T14:15:00Z",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",device:{type:"desktop",os:"Windows 10",browser:"Chrome 120",fingerprint:"fp_desktop_001"},riskLevel:"low"},{id:3,type:"login",action:"로그인",description:"새로운 기기에서 로그인했습니다.",timestamp:"2024-01-24T18:45:00Z",ipAddress:"192.168.1.200",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X)",location:"서울시 서초구",device:{type:"mobile",os:"iOS 17",browser:"Safari",fingerprint:"fp_mobile_001"},riskLevel:"medium"},{id:4,type:"job_application",action:"구인 지원",description:"서울시립요양원 요양보호사 포지션에 지원했습니다.",timestamp:"2024-01-23T11:20:00Z",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",device:{type:"desktop",os:"Windows 10",browser:"Chrome 120",fingerprint:"fp_desktop_001"},riskLevel:"low"}]),i([{id:1,type:"new_device_login",severity:"warning",message:"새로운 iPhone 기기에서 로그인이 감지되었습니다.",timestamp:"2024-01-24T18:45:00Z",resolved:!0,ipAddress:"192.168.1.200",location:"서울시 서초구"},{id:2,type:"password_changed",severity:"info",message:"비밀번호가 성공적으로 변경되었습니다.",timestamp:"2024-01-20T16:30:00Z",resolved:!0,ipAddress:"192.168.1.100"}])},[]);const N=e=>{switch(e){case"info":return"text-blue-500 bg-blue-50";case"warning":return"text-yellow-500 bg-yellow-50";case"critical":return"text-red-500 bg-red-50";default:return"text-gray-500 bg-gray-50"}},f=e=>{switch(e){case"low":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},v=l.filter(e=>{if("all"!==m.type&&e.type!==m.type)return!1;if("all"!==m.riskLevel&&e.riskLevel!==m.riskLevel)return!1;if(m.searchQuery){const t=m.searchQuery.toLowerCase();return e.action.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.ipAddress.includes(t)}const t=new Date,a=new Date(e.timestamp);switch(m.dateRange){case"today":return a.toDateString()===t.toDateString();case"week":return a>=new Date(t.getTime()-6048e5);case"month":return a>=new Date(t.getTime()-2592e6);case"3months":return a>=new Date(t.getTime()-7776e6);default:return!0}});return u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"border-b border-gray-200",children:u.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"activity",label:"활동 기록",count:l.length},{key:"security",label:"보안 이벤트",count:r.length},{key:"devices",label:"기기 관리",count:3}].map(e=>u.jsxs("button",{onClick:()=>a(e.key),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors "+(t===e.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.label," (",e.count,")"]},e.key))})}),"activity"===t&&u.jsxs(u.Fragment,{children:[u.jsx(ne,{className:"p-4",children:u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(C,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),u.jsx("input",{type:"text",placeholder:"활동, IP 주소로 검색...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:m.searchQuery,onChange:e=>x(t=>c(n({},t),{searchQuery:e.target.value}))})]}),u.jsxs("select",{value:m.dateRange,onChange:e=>x(t=>c(n({},t),{dateRange:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[u.jsx("option",{value:"today",children:"오늘"}),u.jsx("option",{value:"week",children:"최근 1주일"}),u.jsx("option",{value:"month",children:"최근 1개월"}),u.jsx("option",{value:"3months",children:"최근 3개월"}),u.jsx("option",{value:"all",children:"전체"})]}),u.jsxs("select",{value:m.type,onChange:e=>x(t=>c(n({},t),{type:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[u.jsx("option",{value:"all",children:"모든 활동"}),u.jsx("option",{value:"login",children:"로그인"}),u.jsx("option",{value:"logout",children:"로그아웃"}),u.jsx("option",{value:"profile_update",children:"프로필 수정"}),u.jsx("option",{value:"password_change",children:"비밀번호 변경"}),u.jsx("option",{value:"job_application",children:"구인 지원"}),u.jsx("option",{value:"matching_request",children:"매칭 신청"})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs(de,{variant:"outline",size:"sm",onClick:()=>{const e="data:text/csv;charset=utf-8,시간,활동,설명,IP주소,기기,위험도\n"+v.map(e=>`${new Date(e.timestamp).toLocaleString()},${e.action},"${e.description}",${e.ipAddress},${e.device.type},${e.riskLevel}`).join("\n"),t=encodeURI(e),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download","activity_history.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},className:"flex items-center space-x-2",children:[u.jsx(le,{className:"h-4 w-4"}),u.jsx("span",{children:"내보내기"})]}),u.jsxs(de,{variant:"outline",size:"sm",onClick:()=>o(!0),className:"flex items-center space-x-2",children:[u.jsx(B,{className:"h-4 w-4 "+(d?"animate-spin":"")}),u.jsx("span",{children:"새로고침"})]})]})]})}),u.jsx("div",{className:"space-y-4",children:0===v.length?u.jsxs(ne,{className:"p-8 text-center",children:[u.jsx(g,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"활동 기록이 없습니다"}),u.jsx("p",{className:"text-gray-600",children:"선택한 기간 또는 필터 조건에 맞는 활동이 없습니다."})]}):v.map(e=>{const{icon:t,color:a}=(e=>{switch(e){case"login":return{icon:ie,color:"text-green-500"};case"logout":return{icon:re,color:"text-gray-500"};case"profile_update":return{icon:M,color:"text-blue-500"};case"password_change":return{icon:w,color:"text-orange-500"};case"settings_change":return{icon:q,color:"text-purple-500"};case"review_created":return{icon:y,color:"text-yellow-500"};case"job_application":return{icon:L,color:"text-indigo-500"};case"matching_request":return{icon:k,color:"text-pink-500"};case"facility_view":return{icon:T,color:"text-gray-500"};case"search":return{icon:C,color:"text-gray-500"};case"download":return{icon:le,color:"text-teal-500"};default:return{icon:g,color:"text-gray-500"}}})(e.type),l=(e=>{switch(e){case"desktop":case"tablet":return ee;case"mobile":return K;default:return se}})(e.device.type);return u.jsx(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:u.jsx(ne,{className:"p-6",children:u.jsxs("div",{className:"flex items-start space-x-4",children:[u.jsx("div",{className:`p-2 rounded-lg ${a.replace("text-","bg-").replace("-500","-100")}`,children:u.jsx(t,{className:`h-5 w-5 ${a}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("h3",{className:"font-medium text-gray-900",children:e.action}),u.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f(e.riskLevel)}`,children:["low"===e.riskLevel&&"낮음","medium"===e.riskLevel&&"보통","high"===e.riskLevel&&"높음"]})]}),u.jsx("time",{className:"text-sm text-gray-500",children:new Date(e.timestamp).toLocaleString()})]}),u.jsx("p",{className:"text-gray-700 mb-3",children:e.description}),u.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(l,{className:"h-4 w-4"}),u.jsxs("span",{children:[e.device.os," • ",e.device.browser]})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(se,{className:"h-4 w-4"}),u.jsx("span",{children:e.ipAddress})]}),e.location&&u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(k,{className:"h-4 w-4"}),u.jsx("span",{children:e.location})]})]})]})]})})},e.id)})})]}),"security"===t&&u.jsx("div",{className:"space-y-4",children:0===r.length?u.jsxs(ne,{className:"p-8 text-center",children:[u.jsx(w,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"보안 이벤트가 없습니다"}),u.jsx("p",{className:"text-gray-600",children:"계정에 대한 보안 이벤트가 기록되지 않았습니다."})]}):r.map(e=>u.jsx(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:u.jsx(ne,{className:"p-6",children:u.jsxs("div",{className:"flex items-start space-x-4",children:[u.jsx("div",{className:`p-2 rounded-lg ${N(e.severity)}`,children:u.jsx(G,{className:"h-5 w-5"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("info"===e.severity?"bg-blue-100 text-blue-800":"warning"===e.severity?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:["info"===e.severity&&"정보","warning"===e.severity&&"경고","critical"===e.severity&&"심각"]}),e.resolved&&u.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"해결됨"})]}),u.jsx("time",{className:"text-sm text-gray-500",children:new Date(e.timestamp).toLocaleString()})]}),u.jsx("p",{className:"text-gray-700 mb-3",children:e.message}),u.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(se,{className:"h-4 w-4"}),u.jsx("span",{children:e.ipAddress})]}),e.location&&u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(k,{className:"h-4 w-4"}),u.jsx("span",{children:e.location})]})]})]})]})})},e.id))}),"devices"===t&&u.jsx("div",{className:"space-y-4",children:u.jsxs(ne,{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"등록된 기기"}),u.jsx(de,{variant:"outline",size:"sm",children:"모든 기기에서 로그아웃"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-4 p-4 border border-green-200 bg-green-50 rounded-lg",children:[u.jsx(ee,{className:"h-8 w-8 text-green-600"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-medium text-gray-900",children:"Windows PC (현재)"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Chrome 120 • 서울시 강남구"}),u.jsx("p",{className:"text-xs text-gray-500",children:"마지막 활동: 지금"})]}),u.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"활성"})]}),u.jsxs("div",{className:"flex items-center space-x-4 p-4 border border-gray-200 rounded-lg",children:[u.jsx(K,{className:"h-8 w-8 text-gray-600"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-medium text-gray-900",children:"iPhone"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Safari • 서울시 서초구"}),u.jsx("p",{className:"text-xs text-gray-500",children:"마지막 활동: 2일 전"})]}),u.jsx(de,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:"제거"})]}),u.jsxs("div",{className:"flex items-center space-x-4 p-4 border border-gray-200 rounded-lg",children:[u.jsx(ee,{className:"h-8 w-8 text-gray-600"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-medium text-gray-900",children:"MacBook Pro"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Safari • 부산시 해운대구"}),u.jsx("p",{className:"text-xs text-gray-500",children:"마지막 활동: 1주 전"})]}),u.jsx(de,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:"제거"})]})]}),u.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:u.jsx("p",{className:"text-sm text-blue-800",children:"💡 의심스러운 기기나 더 이상 사용하지 않는 기기는 보안을 위해 제거하는 것이 좋습니다."})})]})})]})},Pe=()=>{const{user:e,isAuthenticated:t}=ce(),[a,l]=h.useState("overview"),[s,r]=h.useState(0),i=[{key:"overview",label:"프로필 개요",icon:M,description:"기본 정보 및 프로필 현황"},{key:"reviews",label:"내 리뷰",icon:y,description:"작성한 리뷰 및 평점 관리",badge:0},{key:"matching",label:"매칭 이력",icon:k,description:"시설 매칭 신청 및 결과",roles:["CAREGIVER","COORDINATOR"]},{key:"jobs",label:"지원 현황",icon:L,description:"구직/구인 활동 현황",roles:["CAREGIVER","EMPLOYER"]},{key:"settings",label:"계정 설정",icon:q,description:"비밀번호 변경 및 알림 설정"},{key:"activity",label:"활동 내역",icon:g,description:"로그인 및 활동 기록"}].filter(t=>!t.roles||(null==e?void 0:e.role)&&t.roles.includes(e.role));return h.useEffect(()=>{if(e){let t=0;const a=10;e.name&&t++,e.email&&t++,e.phone&&t++,e.profileImageUrl&&t++,e.bio&&t++,r(Math.round(t/a*100))}},[e]),t&&e?u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white border-b",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsx("div",{className:"py-6",children:u.jsxs("div",{className:"flex items-center space-x-6",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"h-20 w-20 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:e.profileImageUrl?u.jsx("img",{src:e.profileImageUrl,alt:e.name,className:"h-full w-full object-cover"}):u.jsx(M,{className:"h-8 w-8 text-gray-400"})}),u.jsx("div",{className:"absolute -top-1 -right-1",children:u.jsxs("div",{className:"relative h-6 w-6",children:[u.jsxs("svg",{className:"h-6 w-6 transform -rotate-90",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none",className:"text-gray-200"}),u.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeDasharray:""+2*Math.PI*10,strokeDashoffset:""+2*Math.PI*10*(1-s/100),className:"text-blue-500 transition-all duration-500"})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"text-xs font-medium text-blue-600",children:s})})]})})]}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.name||"사용자"}),u.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${(e=>{switch(e){case"CAREGIVER":return"bg-blue-100 text-blue-800";case"COORDINATOR":return"bg-green-100 text-green-800";case"EMPLOYER":return"bg-purple-100 text-purple-800";case"ADMIN":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(e.role)}`,children:(e=>{switch(e){case"CAREGIVER":return"요양보호사";case"COORDINATOR":return"코디네이터";case"EMPLOYER":return"구인업체";case"ADMIN":return"관리자";default:return"일반회원"}})(e.role)}),e.verified&&u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(E,{className:"h-4 w-4 text-green-500"}),u.jsx("span",{className:"text-sm text-green-600",children:"인증됨"})]})]}),u.jsx("p",{className:"text-gray-600 mb-2",children:e.email}),u.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(N,{className:"h-4 w-4"}),u.jsxs("span",{children:["가입일: ",new Date(e.createdAt).toLocaleDateString()]})]}),e.lastLoginAt&&u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(g,{className:"h-4 w-4"}),u.jsxs("span",{children:["최근 접속: ",new Date(e.lastLoginAt).toLocaleDateString()]})]})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"프로필 완성도"}),u.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:[s,"%"]}),u.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:u.jsx(ue.div,{className:"bg-blue-500 h-2 rounded-full",initial:{width:0},animate:{width:`${s}%`},transition:{duration:1,ease:"easeOut"}})}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s<100?"프로필을 완성해보세요!":"프로필 완성!"})]})]})})})}),u.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsx("nav",{className:"flex space-x-8 overflow-x-auto","aria-label":"마이페이지 탭",children:i.map(e=>{const t=e.icon,s=a===e.key;return u.jsxs("button",{onClick:()=>l(e.key),className:"group flex items-center py-4 px-1 border-b-2 font-medium text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors "+(s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),role:"tab","aria-selected":s,"aria-controls":`tabpanel-${e.key}`,id:`tab-${e.key}`,children:[u.jsx(t,{className:"mr-2 h-5 w-5 "+(s?"text-blue-500":"text-gray-400 group-hover:text-gray-500")}),u.jsx("span",{className:"whitespace-nowrap",children:e.label}),e.badge&&e.badge>0&&u.jsx("span",{className:"ml-2 bg-red-100 text-red-800 text-xs px-2 py-0.5 rounded-full",children:e.badge})]},e.key)})})})}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u.jsx(xe,{mode:"wait",children:u.jsxs(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},role:"tabpanel",id:`tabpanel-${a}`,"aria-labelledby":`tab-${a}`,children:["overview"===a&&u.jsx(ke,{user:e}),"reviews"===a&&u.jsx(De,{}),"matching"===a&&u.jsx(Ce,{}),"jobs"===a&&u.jsx(Re,{}),"settings"===a&&u.jsx(je,{}),"activity"===a&&u.jsx(Te,{})]},a)})})]}):u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs(ne,{className:"p-8 text-center max-w-md",children:[u.jsx(w,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),u.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"로그인이 필요합니다"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"마이페이지를 이용하려면 로그인을 해주세요."}),u.jsx(de,{href:"/login",children:"로그인하기"})]})})};export{Pe as MyPage};
