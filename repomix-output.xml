This file is a merged representation of a subset of the codebase, containing files not matching ignore patterns, combined into a single document by Repomix.
The content has been processed where content has been compressed (code blocks are separated by â‹®---- delimiter).

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching these patterns are excluded: build/**, node_modules/**, *.jar
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Content has been compressed - code blocks are separated by â‹®---- delimiter
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.claude/
  settings.local.json
.github/
  workflows/
    auto-commit.yml
.gradle-temp/
  gradle-8.10.2/
    init.d/
      readme.txt
    LICENSE
    NOTICE
    README
docs/
  phases/
    phase-1.md
    phase-2.md
    phase-3.md
    phase-4.md
    phase-5.md
    phase-6.md
    phase-overview.md
    ëŒë´„ì§€ìˆ˜-ì²´í¬ë¦¬ìŠ¤íŠ¸-ë§¤ì¹­ì„œë¹„ìŠ¤.md
  DEVELOPMENT_PLAN.md
  ì „ì²´ê³„íšë°±ì—….md
frontend/
  src/
    components/
      coordinator/
        CoordinatorCard.tsx
        MatchingPreferencePanel.tsx
        MatchingStatsDashboard.tsx
      ui/
        Button.tsx
        Card.tsx
        ProgressBar.tsx
        RadioGroup.tsx
    features/
      coordinator/
        CoordinatorMatchingWizard.tsx
      facility/
        components/
          FacilityCard.tsx
          FacilityDetailModal.tsx
          FacilityList.tsx
          FacilitySearchFilters.tsx
          MatchingCompletionForm.tsx
          RecommendationResults.tsx
        FacilitySearchPage.tsx
      health/
        steps/
          AdditionalInfoStep.tsx
          AdlCommunicationStep.tsx
          AdlEatingStep.tsx
          AdlMobilityStep.tsx
          AdlToiletStep.tsx
          BasicInfoStep.tsx
          LtciGradeStep.tsx
          ReviewStep.tsx
        HealthAssessmentWizard.tsx
    hooks/
      useHealthAssessmentWizard.ts
    services/
      coordinatorApi.ts
      healthApi.ts
    stores/
      facilityStore.ts
      healthAssessmentStore.ts
    types/
      health.ts
    App.css
    App.tsx
    main.tsx
    vite-env.d.ts
  index.html
  package.json
  postcss.config.js
  tailwind.config.js
  tsconfig.json
  tsconfig.node.json
  vite.config.ts
gradle/
  wrapper/
    gradle-wrapper.properties
src/
  main/
    java/
      com/
        globalcarelink/
          auth/
            dto/
              EnhancedTokenResponse.java
              LoginRequest.java
              MemberRegisterRequest.java
              MemberResponse.java
              MemberUpdateRequest.java
              RefreshTokenRequest.java
              TokenMetadataResponse.java
              TokenResponse.java
              TokenValidationRequest.java
              TokenValidationResponse.java
            AuthController.java
            JwtAuthenticationFilter.java
            JwtTokenProvider.java
            Member.java
            MemberController.java
            MemberRepository.java
            MemberRole.java
            MemberService.java
            PasswordEncoderConfig.java
          common/
            config/
              AsyncConfig.java
              CacheConfig.java
              JpaConfig.java
              LoggingAspect.java
              LoggingFilter.java
              SecurityConfig.java
            entity/
              BaseEntity.java
            exception/
              CustomException.java
              GlobalExceptionHandler.java
              ValidationErrorBuilder.java
              ValidationErrorDetails.java
            util/
              DateUtil.java
              SecurityUtil.java
              ValidationUtil.java
            HealthController.java
          coordinator/
            CoordinatorCareSettings.java
            CoordinatorCareSettingsRepository.java
            CoordinatorCareSettingsService.java
            CoordinatorLanguageSkill.java
            CoordinatorLanguageSkillRepository.java
            CoordinatorMatch.java
            CoordinatorMatchingController.java
            CoordinatorMatchingStatistics.java
            CoordinatorWorkloadOptimizer.java
            LanguageMatchingService.java
            MatchingExplanationGenerator.java
            MatchingPreference.java
            MatchingSimulationRequest.java
            MatchingSimulationResult.java
            OptimizedCoordinatorMatchingService.java
          external/
            config/
              AsyncConfig.java
              PublicDataApiConfig.java
              RetryConfig.java
            dto/
              FacilityStatusResponse.java
              HospitalSearchResponse.java
              LtciDetailResponse.java
              LtciSearchResponse.java
              PharmacySearchResponse.java
            FacilitySyncService.java
            PublicDataApiClient.java
            PublicDataApiException.java
            PublicDataSyncScheduler.java
          facility/
            dto/
              FacilityMatchingPreference.java
              FacilityMatchingRequest.java
              FacilityProfileCreateRequest.java
              FacilityProfileResponse.java
              FacilityProfileUpdateRequest.java
              FacilityRecommendation.java
              MatchingCompletionRequest.java
            FacilityController.java
            FacilityMatchingAnalyticsService.java
            FacilityMatchingHistory.java
            FacilityMatchingHistoryRepository.java
            FacilityProfile.java
            FacilityProfileController.java
            FacilityProfileRepository.java
            FacilityProfileService.java
          health/
            dto/
              HealthAssessmentCreateRequest.java
              HealthAssessmentStatistics.java
              HealthAssessmentUpdateRequest.java
            CareGradeCalculator.java
            HealthAssessment.java
            HealthAssessmentController.java
            HealthAssessmentQueryService.java
            HealthAssessmentRepository.java
            HealthAssessmentService.java
            HealthAssessmentStatsService.java
          profile/
            dto/
              BaseProfileRequest.java
              DomesticProfileRequest.java
              DomesticProfileResponse.java
              OverseasProfileRequest.java
              OverseasProfileResponse.java
            BaseProfile.java
            DomesticProfile.java
            DomesticProfileRepository.java
            OverseasProfile.java
            OverseasProfileRepository.java
            ProfileController.java
            ProfileService.java
          GlobalCareLinkApplication.java
          PlainJavaServer.java
          SimpleApp.java
    resources/
      application-test.yml
      application.yml
      logback-spring.xml
  test/
    java/
      com/
        globalcarelink/
          auth/
            AuthControllerTest.java
            MemberRepositoryTest.java
            MemberServiceTest.java
          coordinator/
            CoordinatorMatchingControllerTest.java
            CoordinatorMatchingE2ETest.java
            CoordinatorMatchingServiceIntegrationTest.java
          e2e/
            HealthAssessmentToCoordinatorMatchingE2ETest.java
          facility/
            FacilityControllerIntegrationTest.java
            FacilityMatchingAnalyticsServiceTest.java
          health/
            HealthAssessmentControllerIntegrationTest.java
            HealthAssessmentIntegrationTest.java
          GlobalCareLinkApplicationTest.java
.env.example
.gitignore
build.gradle.kts
check-system.ps1
CLAUDE_GUIDELINES.md
CLAUDE.md
debug-system.ps1
DEVELOPMENT_SUMMARY.md
gradlew
gradlew.bat
README.md
settings.gradle.kts
start-backend.ps1
start-dev.ps1
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".gradle-temp/gradle-8.10.2/init.d/readme.txt">
You can add .gradle (e.g. test.gradle) init scripts to this directory. Each one is executed at the start of the build.
</file>

<file path=".gradle-temp/gradle-8.10.2/LICENSE">
Apache License
                           Version 2.0, January 2004
                        http://www.apache.org/licenses/

   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION

   1. Definitions.

      "License" shall mean the terms and conditions for use, reproduction,
      and distribution as defined by Sections 1 through 9 of this document.

      "Licensor" shall mean the copyright owner or entity authorized by
      the copyright owner that is granting the License.

      "Legal Entity" shall mean the union of the acting entity and all
      other entities that control, are controlled by, or are under common
      control with that entity. For the purposes of this definition,
      "control" means (i) the power, direct or indirect, to cause the
      direction or management of such entity, whether by contract or
      otherwise, or (ii) ownership of fifty percent (50%) or more of the
      outstanding shares, or (iii) beneficial ownership of such entity.

      "You" (or "Your") shall mean an individual or Legal Entity
      exercising permissions granted by this License.

      "Source" form shall mean the preferred form for making modifications,
      including but not limited to software source code, documentation
      source, and configuration files.

      "Object" form shall mean any form resulting from mechanical
      transformation or translation of a Source form, including but
      not limited to compiled object code, generated documentation,
      and conversions to other media types.

      "Work" shall mean the work of authorship, whether in Source or
      Object form, made available under the License, as indicated by a
      copyright notice that is included in or attached to the work
      (an example is provided in the Appendix below).

      "Derivative Works" shall mean any work, whether in Source or Object
      form, that is based on (or derived from) the Work and for which the
      editorial revisions, annotations, elaborations, or other modifications
      represent, as a whole, an original work of authorship. For the purposes
      of this License, Derivative Works shall not include works that remain
      separable from, or merely link (or bind by name) to the interfaces of,
      the Work and Derivative Works thereof.

      "Contribution" shall mean any work of authorship, including
      the original version of the Work and any modifications or additions
      to that Work or Derivative Works thereof, that is intentionally
      submitted to Licensor for inclusion in the Work by the copyright owner
      or by an individual or Legal Entity authorized to submit on behalf of
      the copyright owner. For the purposes of this definition, "submitted"
      means any form of electronic, verbal, or written communication sent
      to the Licensor or its representatives, including but not limited to
      communication on electronic mailing lists, source code control systems,
      and issue tracking systems that are managed by, or on behalf of, the
      Licensor for the purpose of discussing and improving the Work, but
      excluding communication that is conspicuously marked or otherwise
      designated in writing by the copyright owner as "Not a Contribution."

      "Contributor" shall mean Licensor and any individual or Legal Entity
      on behalf of whom a Contribution has been received by Licensor and
      subsequently incorporated within the Work.

   2. Grant of Copyright License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      copyright license to reproduce, prepare Derivative Works of,
      publicly display, publicly perform, sublicense, and distribute the
      Work and such Derivative Works in Source or Object form.

   3. Grant of Patent License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      (except as stated in this section) patent license to make, have made,
      use, offer to sell, sell, import, and otherwise transfer the Work,
      where such license applies only to those patent claims licensable
      by such Contributor that are necessarily infringed by their
      Contribution(s) alone or by combination of their Contribution(s)
      with the Work to which such Contribution(s) was submitted. If You
      institute patent litigation against any entity (including a
      cross-claim or counterclaim in a lawsuit) alleging that the Work
      or a Contribution incorporated within the Work constitutes direct
      or contributory patent infringement, then any patent licenses
      granted to You under this License for that Work shall terminate
      as of the date such litigation is filed.

   4. Redistribution. You may reproduce and distribute copies of the
      Work or Derivative Works thereof in any medium, with or without
      modifications, and in Source or Object form, provided that You
      meet the following conditions:

      (a) You must give any other recipients of the Work or
          Derivative Works a copy of this License; and

      (b) You must cause any modified files to carry prominent notices
          stating that You changed the files; and

      (c) You must retain, in the Source form of any Derivative Works
          that You distribute, all copyright, patent, trademark, and
          attribution notices from the Source form of the Work,
          excluding those notices that do not pertain to any part of
          the Derivative Works; and

      (d) If the Work includes a "NOTICE" text file as part of its
          distribution, then any Derivative Works that You distribute must
          include a readable copy of the attribution notices contained
          within such NOTICE file, excluding those notices that do not
          pertain to any part of the Derivative Works, in at least one
          of the following places: within a NOTICE text file distributed
          as part of the Derivative Works; within the Source form or
          documentation, if provided along with the Derivative Works; or,
          within a display generated by the Derivative Works, if and
          wherever such third-party notices normally appear. The contents
          of the NOTICE file are for informational purposes only and
          do not modify the License. You may add Your own attribution
          notices within Derivative Works that You distribute, alongside
          or as an addendum to the NOTICE text from the Work, provided
          that such additional attribution notices cannot be construed
          as modifying the License.

      You may add Your own copyright statement to Your modifications and
      may provide additional or different license terms and conditions
      for use, reproduction, or distribution of Your modifications, or
      for any such Derivative Works as a whole, provided Your use,
      reproduction, and distribution of the Work otherwise complies with
      the conditions stated in this License.

   5. Submission of Contributions. Unless You explicitly state otherwise,
      any Contribution intentionally submitted for inclusion in the Work
      by You to the Licensor shall be under the terms and conditions of
      this License, without any additional terms or conditions.
      Notwithstanding the above, nothing herein shall supersede or modify
      the terms of any separate license agreement you may have executed
      with Licensor regarding such Contributions.

   6. Trademarks. This License does not grant permission to use the trade
      names, trademarks, service marks, or product names of the Licensor,
      except as required for reasonable and customary use in describing the
      origin of the Work and reproducing the content of the NOTICE file.

   7. Disclaimer of Warranty. Unless required by applicable law or
      agreed to in writing, Licensor provides the Work (and each
      Contributor provides its Contributions) on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
      implied, including, without limitation, any warranties or conditions
      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
      PARTICULAR PURPOSE. You are solely responsible for determining the
      appropriateness of using or redistributing the Work and assume any
      risks associated with Your exercise of permissions under this License.

   8. Limitation of Liability. In no event and under no legal theory,
      whether in tort (including negligence), contract, or otherwise,
      unless required by applicable law (such as deliberate and grossly
      negligent acts) or agreed to in writing, shall any Contributor be
      liable to You for damages, including any direct, indirect, special,
      incidental, or consequential damages of any character arising as a
      result of this License or out of the use or inability to use the
      Work (including but not limited to damages for loss of goodwill,
      work stoppage, computer failure or malfunction, or any and all
      other commercial damages or losses), even if such Contributor
      has been advised of the possibility of such damages.

   9. Accepting Warranty or Additional Liability. While redistributing
      the Work or Derivative Works thereof, You may choose to offer,
      and charge a fee for, acceptance of support, warranty, indemnity,
      or other liability obligations and/or rights consistent with this
      License. However, in accepting such obligations, You may act only
      on Your own behalf and on Your sole responsibility, not on behalf
      of any other Contributor, and only if You agree to indemnify,
      defend, and hold each Contributor harmless for any liability
      incurred by, or claims asserted against, such Contributor by reason
      of your accepting any such warranty or additional liability.

   END OF TERMS AND CONDITIONS


==============================================================================
Licenses for included components:

------------------------------------------------------------------------------
Eclipse Public License 1.0
https://opensource.org/licenses/EPL-1.0

junit:junit
org.sonatype.aether:aether-api
org.sonatype.aether:aether-connector-wagon
org.sonatype.aether:aether-impl
org.sonatype.aether:aether-spi
org.sonatype.aether:aether-util

------------------------------------------------------------------------------
3-Clause BSD
https://opensource.org/licenses/BSD-3-Clause

com.google.code.findbugs:jsr305

org.hamcrest:hamcrest-core
BSD License

Copyright (c) 2000-2015 www.hamcrest.org
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this list of
conditions and the following disclaimer. Redistributions in binary form must reproduce
the above copyright notice, this list of conditions and the following disclaimer in
the documentation and/or other materials provided with the distribution.

Neither the name of Hamcrest nor the names of its contributors may be used to endorse
or promote products derived from this software without specific prior written
permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY
WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.

com.esotericsoftware.kryo:kryo
com.esotericsoftware.minlog:minlog
Copyright (c) 2008-2018, Nathan Sweet All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
Neither the name of Esoteric Software nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

org.ow2.asm:asm
org.ow2.asm:asm-analysis
org.ow2.asm:asm-commons
org.ow2.asm:asm-tree
org.ow2.asm:asm-util
ASM: a very small and fast Java bytecode manipulation framework
 Copyright (c) 2000-2011 INRIA, France Telecom
 All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions
 are met:
 1. Redistributions of source code must retain the above copyright
    notice, this list of conditions and the following disclaimer.
 2. Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the
    documentation and/or other materials provided with the distribution.
 3. Neither the name of the copyright holders nor the names of its
    contributors may be used to endorse or promote products derived from
    this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
 THE POSSIBILITY OF SUCH DAMAGE.

------------------------------------------------------------------------------
MIT

com.googlecode.plist:dd-plist
dd-plist - An open source library to parse and generate property lists
Copyright (C) 2016 Daniel Dreibrodt

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

org.bouncycastle:bcpg-jdk15on
org.bouncycastle:bcprov-jdk15on
Copyright (c) 2000 - 2019 The Legion of the Bouncy Castle Inc. (https://www.bouncycastle.org)

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

org.slf4j:jcl-over-slf4j
org.slf4j:jul-to-slf4j
org.slf4j:log4j-over-slf4j
org.slf4j:slf4j-api
 Copyright (c) 2004-2017 QOS.ch
 All rights reserved.

 Permission is hereby granted, free  of charge, to any person obtaining
 a  copy  of this  software  and  associated  documentation files  (the
 "Software"), to  deal in  the Software without  restriction, including
 without limitation  the rights to  use, copy, modify,  merge, publish,
 distribute,  sublicense, and/or sell  copies of  the Software,  and to
 permit persons to whom the Software  is furnished to do so, subject to
 the following conditions:

 The  above  copyright  notice  and  this permission  notice  shall  be
 included in all copies or substantial portions of the Software.

 THE  SOFTWARE IS  PROVIDED  "AS  IS", WITHOUT  WARRANTY  OF ANY  KIND,
 EXPRESS OR  IMPLIED, INCLUDING  BUT NOT LIMITED  TO THE  WARRANTIES OF
 MERCHANTABILITY,    FITNESS    FOR    A   PARTICULAR    PURPOSE    AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 OF CONTRACT, TORT OR OTHERWISE,  ARISING FROM, OUT OF OR IN CONNECTION
 WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


------------------------------------------------------------------------------
CDDL
https://opensource.org/licenses/CDDL-1.0

com.sun.xml.bind:jaxb-impl

------------------------------------------------------------------------------
LGPL 2.1
https://www.gnu.org/licenses/old-licenses/lgpl-2.1.en.html

org.samba.jcifs:jcifs

org.jetbrains.intellij.deps:trove4j

------------------------------------------------------------------------------
License for the GNU Trove library included by the Kotlin embeddable compiler
------------------------------------------------------------------------------
The source code for GNU Trove is licensed under the Lesser GNU Public License (LGPL).

    Copyright (c) 2001, Eric D. Friedman All Rights Reserved. This library is free software; you can redistribute it and/or modify it under
    the terms of the GNU Lesser General Public License as published by the Free Software Foundation; either version 2.1 of the License, or
    (at your option) any later version. This library is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without
    even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.
    You should have received a copy of the GNU Lesser General Public License along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.


Two classes (HashFunctions and PrimeFinder) included in Trove are licensed under the following terms:

    Copyright (c) 1999 CERN - European Organization for Nuclear Research. Permission to use, copy, modify, distribute and sell this software
    and its documentation for any purpose is hereby granted without fee, provided that the above copyright notice appear in all copies and
    that both that copyright notice and this permission notice appear in supporting documentation. CERN makes no representations about the
    suitability of this software for any purpose. It is provided "as is" without expressed or implied warranty.

The source code of modified GNU Trove library is available at
    https://github.com/JetBrains/intellij-deps-trove4j (with trove4j_changes.txt describing the changes)

------------------------------------------------------------------------------
Eclipse Distribution License 1.0
https://www.eclipse.org/org/documents/edl-v10.php

org.eclipse.jgit:org.eclipse.jgit

------------------------------------------------------------------------------
BSD-style

com.jcraft:jzlib
com.github.mwiede:jsch

Copyright (c) 2002-2015 Atsuhiko Yamanaka, JCraft,Inc.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

  1. Redistributions of source code must retain the above copyright notice,
     this list of conditions and the following disclaimer.

  2. Redistributions in binary form must reproduce the above copyright
     notice, this list of conditions and the following disclaimer in
     the documentation and/or other materials provided with the distribution.

  3. The names of the authors may not be used to endorse or promote products
     derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,
INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

------------------------------------------------------------------------------
Eclipse Public License 2.0
https://www.eclipse.org/legal/epl-2.0/

org.junit.platform:junit-platform-launcher

------------------------------------------------------------------------------
Mozilla Public License 2.0
https://www.mozilla.org/en-US/MPL/2.0/

org.mozilla:rhino
</file>

<file path=".gradle-temp/gradle-8.10.2/NOTICE">
=========================================================================
==  NOTICE file corresponding to the section 4 d of                    ==
==  the Apache License, Version 2.0,                                   ==
==  in this case for the Gradle distribution.                          ==
=========================================================================

This product includes software developed by
The Apache Software Foundation (http://www.apache.org/).

It includes the following other software:

Groovy (http://groovy-lang.org)
SLF4J (http://www.slf4j.org)
JUnit (http://www.junit.org)
JCIFS (http://jcifs.samba.org)
HttpClient (https://hc.apache.org/httpcomponents-client-4.5.x/)

For licenses, see the LICENSE file.

If any software distributed with Gradle does not have an Apache 2 License, its license is explicitly listed in the
LICENSE file.
</file>

<file path=".gradle-temp/gradle-8.10.2/README">
Gradle is a build tool with a focus on build automation and support for multi-language development. If you are building, testing, publishing, and deploying software on any platform, Gradle offers a flexible model that can support the entire development lifecycle from compiling and packaging code to publishing web sites. Gradle has been designed to support build automation across multiple languages and platforms including Java, Scala, Android, C/C++, and Groovy, and is closely integrated with development tools and continuous integration servers including Eclipse, IntelliJ, and Jenkins.

For more information about Gradle, please visit: https://gradle.org

If you are using the "all" distribution, the User Manual is included in your distribution.

If you are using the "bin" distribution, a copy of the User Manual is available on https://docs.gradle.org.

Typing `gradle help` prints the command line help.

Typing `gradle tasks` shows all the tasks of a Gradle build.
</file>

<file path="docs/phases/ëŒë´„ì§€ìˆ˜-ì²´í¬ë¦¬ìŠ¤íŠ¸-ë§¤ì¹­ì„œë¹„ìŠ¤.md">
# ëŒë´„ì§€ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ - ë§¤ì¹­ì„œë¹„ìŠ¤ í™œìš© ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”
KBë¼ì´í”„ìƒëª… ìš”ì–‘ê°„ë³‘ ì»¨ì„¤íŒ… ì„œë¹„ìŠ¤ì˜ ëŒë´„ì§€ìˆ˜ ì²´í¬ ë¡œì§ì„ ë¶„ì„í•˜ì—¬, ìš°ë¦¬ LightCare ë§¤ì¹­ì„œë¹„ìŠ¤ì— í™œìš©í•  ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

## ğŸ¯ ëª©ì 
- ìš”ì–‘ì‹œì„¤ê³¼ ì´ìš©ìì˜ ì •í™•í•œ ë§¤ì¹­ì„ ìœ„í•œ ëŒë´„ í•„ìš”ë„ í‰ê°€
- í‘œì¤€í™”ëœ í‰ê°€ ê¸°ì¤€ì„ í†µí•œ ê°ê´€ì  íŒì •
- ë‹¨ê³„ë³„ ì§ˆë¬¸ì„ í†µí•œ ì‚¬ìš©ì ì¹œí™”ì  ì¸í„°í˜ì´ìŠ¤ ì œê³µ

## ğŸ“Š í‰ê°€ í•­ëª© ë° ë‹¨ê³„

### 1. ê¸°ë³¸ ì •ë³´
- **ì„±ë³„**: ë‚¨ì / ì—¬ì
- **ì¶œìƒë…„ë„**: 4ìë¦¬ ì—°ë„ ì…ë ¥ (ìœ íš¨ì„± ê²€ì¦: í˜„ì¬ë…„ë„-150 ~ í˜„ì¬ë…„ë„)

### 2. ì¼ìƒìƒí™œ ê¸°ë³¸ë™ì‘ í‰ê°€ (ADL)

#### 2.1 ê±·ê¸° í™œë™ ëŠ¥ë ¥
- **1ë‹¨ê³„ (ì–‘í˜¸)**: í˜¼ìì„œ ê°€ëŠ¥í•´ìš”
- **2ë‹¨ê³„ (ë³´í†µ)**: ë¶€ë¶„ì ì¸ ë„ì›€ì´ í•„ìš”í•´ìš” (íƒ€ì¸ì˜ ë¶€ì¶•, ì§€íŒ¡ì´ ì´ìš© ë“±)
- **3ë‹¨ê³„ (ì¤‘ì¦)**: í˜¼ìì„œëŠ” ë³´í–‰ì´ ì–´ë ¤ì›Œìš” (íœ ì²´ì–´ ì‚¬ìš© ë“±)

#### 2.2 ì‹ì‚¬ í™œë™ ëŠ¥ë ¥
- **1ë‹¨ê³„ (ì–‘í˜¸)**: í˜¼ìì„œ ê°€ëŠ¥í•´ìš”
- **2ë‹¨ê³„ (ë³´í†µ)**: ë¶€ë¶„ì ì¸ ë„ì›€ì´ í•„ìš”í•´ìš” (ë°˜ì°¬ ì§‘ê¸°, ìë¥´ê¸° ë“± ì¼ë¶€ ë„ì›€)
- **3ë‹¨ê³„ (ì¤‘ì¦)**: ì™„ì „í•œ ë„ì›€ì´ í•„ìš”í•´ìš” (ìŒì‹ì„ ë–  ë¨¹ì—¬ì¤Œ)

#### 2.3 ë°°ë³€ í™œë™ ëŠ¥ë ¥
- **1ë‹¨ê³„ (ì–‘í˜¸)**: í˜¼ìì„œ í™”ì¥ì‹¤ì„ ì´ìš©í•  ìˆ˜ ìˆì–´ìš”
- **2ë‹¨ê³„ (ë³´í†µ)**: í™”ì¥ì‹¤ ì´ìš© ì‹œ ë¶€ë¶„ì ì¸ ë„ì›€ì´ í•„ìš”í•´ìš”
- **3ë‹¨ê³„ (ì¤‘ì¦)**: ì™„ì „í•œ ë„ì›€ì´ í•„ìš”í•´ìš” (ê°„ì´ë³€ê¸°, ê¸°ì €ê·€ ì°©ìš© ë“±)

#### 2.4 ì˜ì‚¬ì†Œí†µ ëŠ¥ë ¥
- **1ë‹¨ê³„ (ì–‘í˜¸)**: ì •ìƒì ìœ¼ë¡œ ê°€ëŠ¥í•´ìš”
- **2ë‹¨ê³„ (ë³´í†µ)**: ë•Œë•Œë¡œ ì–´ë ¤ì›Œìš” (í™”ì¥ì‹¤ ì´ìš©ì˜ì‚¬ í‘œí˜„ ê°€ëŠ¥)
- **3ë‹¨ê³„ (ì¤‘ì¦)**: ì†Œí†µì´ ì–´ë ¤ì›Œìš” (í™”ì¥ì‹¤ ì´ìš©ì˜ì‚¬ í‘œí˜„ ì˜ ëª»í•¨)

### 3. ì‹ì‚¬ í˜•íƒœ
- **1ë‹¨ê³„ (ì¼ë°˜)**: ì¼ë°˜ì‹
- **2ë‹¨ê³„ (ë³´ì¡°)**: ë‹¤ì§„ì‹/ê°ˆì€ì‹
- **3ë‹¨ê³„ (íŠ¹ìˆ˜)**: ê²½ê´€ì‹(íŠœë¸Œ ì£¼ì…)

### 4. ì¥ê¸°ìš”ì–‘ íŒì •ë“±ê¸‰
- **1ë“±ê¸‰**: ê°€ì¥ ì¤‘ì¦
- **2ë“±ê¸‰**: ì¤‘ì¦
- **3ë“±ê¸‰**: ì¤‘ë“±ë„
- **4ë“±ê¸‰**: ê²½ì¦
- **5ë“±ê¸‰**: ê²½ë¯¸
- **ì¸ì§€ì§€ì›ë“±ê¸‰**: ì¹˜ë§¤íŠ¹í™”
- **ì˜ ëª¨ë¥´ê² ìŒ**: ë¯¸í™•ì¸
- **ì—†ìŒ**: í•´ë‹¹ì—†ìŒ

### 5. íŠ¹ìˆ˜ ìƒí™© í‰ê°€ (ì¹˜ëª…ì  ìƒíƒœ)
- **1ë‹¨ê³„**: 6ê°œì›” ì´í•˜ì˜ ê¸°ëŒ€ìˆ˜ëª… ìƒíƒœ
- **2ë‹¨ê³„**: ì§ˆë³‘ì´ íšŒë³µí•˜ê¸° ì–´ë ¤ìš´ ìƒí™©ìœ¼ë¡œ ìˆ˜ëª…ì´ ì–¼ë§ˆ ë‚¨ì§€ ì•ŠìŒ
- **3ë‹¨ê³„**: ì™„ì „íˆ íƒ€ì¸ ì˜ì¡´ì ì¸ ìƒíƒœì´ë‚˜ ì‚¬ë§ìœ„í—˜ì´ ë†’ì§€ ì•ŠìŒ
- **4ë‹¨ê³„**: í•´ë‹¹ì‚¬í•­ ì—†ìŒ

### 6. ì§ˆí™˜ ë¶„ë¥˜
- **ì¹˜ë§¤**: ì¸ì§€ê¸°ëŠ¥ ì €í•˜
- **íŒŒí‚¨ìŠ¨**: ìš´ë™ì¥ì• 
- **ë‡Œí˜ˆê´€ì§ˆí™˜**: ë‡Œì¡¸ì¤‘ ë“±
- **ì˜ ëª¨ë¥´ê² ìŒ**: ë¯¸í™•ì¸

## ğŸ”¢ ë“±ê¸‰ ì‚°ì • ë¡œì§

### ìµœì¢… ë“±ê¸‰ (1-9ë‹¨ê³„)
1. **1ë“±ê¸‰ (ìµœê²½ì¦)**: ê±´ê°•í•œ ì„±ì¸
2. **2ë“±ê¸‰**: ê²½ë¯¸í•œ ë„ì›€ í•„ìš” (ì¤‘ë…„ì¸µ)
3. **3ë“±ê¸‰**: ê²½ë¯¸í•œ ë„ì›€ í•„ìš” (ê³ ë ¹ì¸µ)
4. **4ë“±ê¸‰**: ë¶€ë¶„ ë„ì›€ í•„ìš”
5. **5ë“±ê¸‰**: ì¼ë°˜ì  ë„ì›€ í•„ìš”
6. **6ë“±ê¸‰**: ìƒë‹¹í•œ ë„ì›€ í•„ìš”
7. **7ë“±ê¸‰**: ì¤‘ì¦ ìƒíƒœ
8. **8ë“±ê¸‰**: ìƒëª…ìœ„í—˜ ì¤‘ë“±ë„
9. **9ë“±ê¸‰**: ìƒëª…ìœ„í—˜ ê³ ë„

### ë“±ê¸‰ ì‚°ì • ê·œì¹™

#### íŠ¹ìˆ˜ ìƒí™© ìš°ì„  ì ìš©
```javascript
// ì¹˜ëª…ì  ìƒíƒœì— ë”°ë¥¸ ë“±ê¸‰
if (ì¹˜ëª…ì ìƒíƒœ === "1") return 9; // 6ê°œì›” ì´í•˜ ê¸°ëŒ€ìˆ˜ëª…
if (ì¹˜ëª…ì ìƒíƒœ === "2") return 8; // íšŒë³µ ì–´ë ¤ìš´ ìƒí™©
if (ì¹˜ëª…ì ìƒíƒœ === "3") return 7; // ì™„ì „ ì˜ì¡´ì  ìƒíƒœ
```

#### ì¤‘ì¦ ì§€í‘œ ìš°ì„  ì²´í¬
```javascript
// ë°°ë³€í™œë™ ì™„ì „ë„ì›€ ë˜ëŠ” ê²½ê´€ì‹ â†’ 7ë“±ê¸‰
if (ë°°ë³€í™œë™ === "3" || ì‹ì‚¬í˜•íƒœ === "3") return 7;
```

#### ì¥ê¸°ìš”ì–‘ë“±ê¸‰ ê¸°ë°˜ íŒì •
- **1-3ë“±ê¸‰**: ê³µì‹ë“±ê¸‰ì— ë”°ë¥¸ ì¤‘ì¦ë„ ë°˜ì˜
- **4-6ë“±ê¸‰**: ì¼ìƒìƒí™œëŠ¥ë ¥ê³¼ ì¡°í•©í•˜ì—¬ íŒì •
- **ë¯¸í™•ì¸/ì—†ìŒ**: ë‚˜ì´ì™€ ê¸°ëŠ¥ìƒíƒœë¡œ íŒì •

## ğŸ¥ ë§¤ì¹­ì„œë¹„ìŠ¤ í™œìš© ë°©ì•ˆ

### 1. ì‹œì„¤ ë“±ê¸‰ë³„ ë¶„ë¥˜
- **1-3ë“±ê¸‰**: ì¬ê°€ì„œë¹„ìŠ¤, ê²½ì¦ ì‹œì„¤
- **4-5ë“±ê¸‰**: ì¼ë°˜ ìš”ì–‘ì›, ë°ì´ì¼€ì–´
- **6-7ë“±ê¸‰**: ì „ë¬¸ ìš”ì–‘ì›, ê°„ë³‘ì„œë¹„ìŠ¤
- **8-9ë“±ê¸‰**: í˜¸ìŠ¤í”¼ìŠ¤, ì¤‘ì¦ ì „ë¬¸ì‹œì„¤

### 2. íŠ¹í™” ì„œë¹„ìŠ¤ ë§¤ì¹­
- **ì¹˜ë§¤**: ì¹˜ë§¤ì „ë¬¸ì‹œì„¤, ì¸ì§€ì¬í™œ í”„ë¡œê·¸ë¨
- **íŒŒí‚¨ìŠ¨**: ì¬í™œì¹˜ë£Œ ì „ë¬¸ì‹œì„¤
- **ë‡Œí˜ˆê´€ì§ˆí™˜**: ì¬í™œë³‘ì› ì—°ê³„ ì‹œì„¤

### 3. ê²½ê³  ì•Œë¦¼ ì‹œìŠ¤í…œ
```javascript
// ê³µì‹ë“±ê¸‰ê³¼ ì‹¤ì œìƒíƒœ ë¶ˆì¼ì¹˜ ì‹œ ê²½ê³ 
if (ì¥ê¸°ìš”ì–‘ë“±ê¸‰ <= 3 && ëª¨ë“ ì¼ìƒìƒí™œëŠ¥ë ¥ === 1) {
    alert("ë“±ê¸‰ ì¬í‰ê°€ ê¶Œì¥");
}
```

## ğŸ› ï¸ êµ¬í˜„ ê³ ë ¤ì‚¬í•­

### 1. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤
- ë‹¨ê³„ë³„ ì§„í–‰ (GSAP ì• ë‹ˆë©”ì´ì…˜ í™œìš©)
- ì´ì „/ë‹¤ìŒ ë²„íŠ¼ìœ¼ë¡œ ë‹¨ê³„ ì´ë™
- í•„ìˆ˜ ì…ë ¥ ê²€ì¦
- ì‹¤ì‹œê°„ í”¼ë“œë°±

### 2. ë°ì´í„° ì €ì¥ êµ¬ì¡°
```sql
CREATE TABLE care_assessment (
    id BIGINT PRIMARY KEY,
    member_id BIGINT,
    birth_year INT,
    gender VARCHAR(1),
    walking_ability INT,     -- ê±·ê¸°ëŠ¥ë ¥ 1-3
    eating_ability INT,      -- ì‹ì‚¬ëŠ¥ë ¥ 1-3  
    toilet_ability INT,      -- ë°°ë³€ëŠ¥ë ¥ 1-3
    communication INT,       -- ì˜ì‚¬ì†Œí†µ 1-3
    meal_type INT,          -- ì‹ì‚¬í˜•íƒœ 1-3
    ltc_grade INT,          -- ì¥ê¸°ìš”ì–‘ë“±ê¸‰
    critical_status INT,     -- ì¹˜ëª…ì ìƒíƒœ
    disease_type INT,       -- ì§ˆí™˜ëª…
    calculated_grade INT,   -- ì‚°ì¶œë“±ê¸‰ 1-9
    alert_flag VARCHAR(1),  -- ê²½ê³ ì—¬ë¶€ Y/N
    created_at TIMESTAMP
);
```

### 3. API ì„¤ê³„
```java
@RestController
public class CareAssessmentController {
    
    @PostMapping("/api/care/assessment")
    public ResponseEntity<CareGradeResult> calculateGrade(@RequestBody CareAssessmentDTO dto) {
        // ë“±ê¸‰ ê³„ì‚° ë¡œì§
        int grade = careService.calculateGrade(dto);
        boolean alertFlag = careService.checkAlertCondition(dto);
        
        return ResponseEntity.ok(new CareGradeResult(grade, alertFlag));
    }
}
```

## ğŸ“ˆ í’ˆì§ˆ ê°œì„  ë°©ì•ˆ

### 1. ê²€ì¦ ë¡œì§ ê°•í™”
- ì…ë ¥ê°’ ìœ íš¨ì„± ê²€ì‚¬
- ë…¼ë¦¬ì  ì¼ê´€ì„± ê²€ì¦
- ì´ìƒê°’ íƒì§€

### 2. ê°œì¸í™” ì¶”ì²œ
- ê³¼ê±° í‰ê°€ ì´ë ¥ ë°˜ì˜
- ì§€ì—­ë³„ ì‹œì„¤ í˜„í™© ì—°ê³„
- ê°€ì¡± ì„ í˜¸ë„ ê³ ë ¤

### 3. ë°ì´í„° ë¶„ì„ í™œìš©
- í‰ê°€ ê²°ê³¼ í†µê³„ ë¶„ì„
- ë§¤ì¹­ ì„±ê³µë¥  ì¶”ì 
- ì„œë¹„ìŠ¤ ê°œì„  í”¼ë“œë°±

## ğŸ”’ ë³´ì•ˆ ë° ê°œì¸ì •ë³´ë³´í˜¸
- ë¯¼ê°í•œ ê±´ê°•ì •ë³´ ì•”í˜¸í™” ì €ì¥
- ì ‘ê·¼ ê¶Œí•œ ì„¸ë¶„í™”
- ë°ì´í„° ë³´ì¡´ ê¸°ê°„ ê´€ë¦¬
- ê°œì¸ì •ë³´ ë™ì˜ ì ˆì°¨

---

*ì´ ì²´í¬ë¦¬ìŠ¤íŠ¸ëŠ” KBë¼ì´í”„ìƒëª…ì˜ ëŒë´„ì§€ìˆ˜ ì²´í¬ ì‹œìŠ¤í…œì„ ì°¸ê³ í•˜ì—¬ LightCare ë§¤ì¹­ì„œë¹„ìŠ¤ì— ìµœì í™”í•˜ì—¬ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.*
</file>

<file path="docs/ì „ì²´ê³„íšë°±ì—….md">
# CLAUDE.md

ì´ ë¬¸ì„œëŠ” ì´ ì €ì¥ì†Œì—ì„œ Claude Code (claude.ai/code)ê°€ ì½”ë“œë¥¼ ë‹¤ë£° ë•Œ ì°¸ê³ í•  ê°€ì´ë“œì…ë‹ˆë‹¤.

---

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” í•œêµ­ íŒ€ì› 4ëª…ì´ ê°œë°œí•˜ëŠ” \*\*ê¸€ë¡œë²Œ ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ ì›¹ì‚¬ì´íŠ¸ "ë¼ì´íŠ¸ì¼€ì–´(LightCare)"\*\*ì…ë‹ˆë‹¤. ì´ í”Œë«í¼ì€ ìš”ì–‘ ì‹œì„¤ê³¼ ìš”ì–‘ì—…ê³„ êµ¬ì§ìë¥¼ ì—°ê²°í•´ì£¼ëŠ” ì„œë¹„ìŠ¤ì—ì„œ ì‹œì‘í•˜ì—¬, **ì¬ì™¸ë™í¬ ëŒ€ìƒ ê¸€ë¡œë²Œ ìš”ì–‘ ì„œë¹„ìŠ¤**ë¡œ í™•ì¥ë˜ê³  ìˆìŠµë‹ˆë‹¤.

**âš ï¸ ì¤‘ìš”: ì´ í”„ë¡œì íŠ¸ëŠ” JDK 21 + Spring Boot 3.3.5 ê¸°ë°˜ì˜ ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¡œ ì¬êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ê¸°ì¡´ ë ˆê±°ì‹œ ì½”ë“œëŠ” ì°¸ê³ ìš©ìœ¼ë¡œë§Œ í™œìš©í•˜ë©°, ëª¨ë“  ìƒˆë¡œìš´ ê°œë°œì€ ìµœì‹  ê¸°ìˆ  ìŠ¤íƒ ê¸°ë°˜ìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.**

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ (ìµœì‹ í™”)

### ë°±ì—”ë“œ (Modern Java Stack - ì™„ì „ ë¬´ë£Œ)
* **ì–¸ì–´**: Java 21 LTS (Virtual Threads, Pattern Matching)
* **í”„ë ˆì„ì›Œí¬**: Spring Boot 3.3.5 
* **ORM**: Spring Data JPA + Hibernate 6.x
* **ë³´ì•ˆ**: Spring Security 6.x + JWT + OAuth2
* **ë°ì´í„°ë² ì´ìŠ¤**: SQLite (ìë³¸ê¸ˆ 0ì› ê³ ë ¤)
* **ìºì‹œ**: Caffeine (ë©”ëª¨ë¦¬ ìºì‹œ, ë¬´ë£Œ)
* **ë¹Œë“œ**: Gradle 8.x + Kotlin DSL

### í”„ë¡ íŠ¸ì—”ë“œ (Modern React Stack)  
* **ì–¸ì–´**: TypeScript 5.x (íƒ€ì… ì•ˆì •ì„±)
* **í”„ë ˆì„ì›Œí¬**: React 18 + Vite 5.x
* **ìƒíƒœê´€ë¦¬**: Zustand (ë‹¨ìˆœí•˜ê³  í˜„ëŒ€ì )
* **UI ë¼ì´ë¸ŒëŸ¬ë¦¬**: Tailwind CSS + Shadcn/ui
* **HTTP í´ë¼ì´ì–¸íŠ¸**: TanStack Query (React Query v5)
* **í¼ ê´€ë¦¬**: React Hook Form + Zod

### ì¸í”„ë¼ & ë„êµ¬ (ë¬´ë£Œ ìš°ì„ )
* **ì‹¤ì‹œê°„ í†µì‹ **: WebSocket, STOMP (WebRTCëŠ” ì¶”í›„)  
* **API ë¬¸ì„œ**: OpenAPI 3.0 + Swagger UI
* **í…ŒìŠ¤íŠ¸**: JUnit 5 + Spring Boot Test
* **CI/CD**: GitHub Actions (ì›” 2000ë¶„ ë¬´ë£Œ)
* **íŒŒì¼ ì €ì¥**: GitHub Repository (ë¬´ë£Œ CDN)
* **ì´ë©”ì¼**: Gmail SMTP (ì¼ì¼ 500í†µ ë¬´ë£Œ)
* **ì§€ë„**: OpenStreetMap + Leaflet.js (ì™„ì „ ë¬´ë£Œ), ì¹´ì¹´ì˜¤ë§µ (ì›” 30ë§Œê±´ ë¬´ë£Œ)
* **ë°°í¬**: Railway/Render (ë¬´ë£Œ í”Œëœ) â†’ GitHub Pages (í”„ë¡ íŠ¸ì—”ë“œ)
* **ê°œë°œ ë„êµ¬**: Lombok, MapStruct, Spring Boot DevTools
* **ëª¨ë‹ˆí„°ë§**: Spring Boot Actuator (ë¬´ë£Œ)

---

## âš™ï¸ ë©€í‹°ëª¨ë“ˆ ê°œë°œ ëª…ë ¹ì–´

### ë¹Œë“œ ë° ì‹¤í–‰ (JDK 21 ê¸°ë°˜)

```bash
# JDK ë²„ì „ í™•ì¸ (21 ì´ìƒì´ì–´ì•¼ í•¨)
java -version

# ì „ì²´ í”„ë¡œì íŠ¸ ë¹Œë“œ (ëª¨ë“  ëª¨ë“ˆ)
./gradlew build

# íŠ¹ì • ëª¨ë“ˆë§Œ ë¹Œë“œ
./gradlew :api-module:build
./gradlew :member-module:build

# API ì„œë²„ ì‹¤í–‰ (ê°œë°œ í”„ë¡œíŒŒì¼)
./gradlew :api-module:bootRun --args='--spring.profiles.active=dev'

# í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì„œë²„ ì‹¤í–‰
cd web-module && npm run dev

# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (ë³‘ë ¬ ì²˜ë¦¬)
./gradlew test --parallel

# íŠ¹ì • ëª¨ë“ˆ í…ŒìŠ¤íŠ¸
./gradlew :member-module:test

# ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ (ì „ì²´)
./gradlew check

# API ë¬¸ì„œ ìƒì„± (OpenAPI)
./gradlew :api-module:generateOpenApiDocs

# ì˜ì¡´ì„± ì—…ë°ì´íŠ¸ í™•ì¸
./gradlew dependencyUpdates
```

### ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • (SQLite - ë¬´ë£Œ)

```bash
# SQLite ë°ì´í„°ë² ì´ìŠ¤ (íŒŒì¼ ê¸°ë°˜, ì„¤ì¹˜ ë¶ˆí•„ìš”)
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— data/ í´ë” ìƒì„±
mkdir data

# JPA ìë™ DDLë¡œ ìŠ¤í‚¤ë§ˆ ìƒì„± (ê°œë°œ í™˜ê²½)
# application.ymlì—ì„œ spring.jpa.hibernate.ddl-auto: create-drop
# SQLite íŒŒì¼ì´ ìë™ìœ¼ë¡œ ìƒì„±ë¨: ./data/lightcare.db
```

### ê°œë°œ ì„œë²„ ì •ë³´

* **ë°±ì—”ë“œ**: `http://localhost:8080` (Spring Boot)
* **í”„ë¡ íŠ¸ì—”ë“œ**: `http://localhost:5173` (Vite React)
* **ë°ì´í„°ë² ì´ìŠ¤**: `jdbc:sqlite:./data/lightcare.db` (íŒŒì¼ ê¸°ë°˜)
* **ìºì‹œ**: ë©”ëª¨ë¦¬ ìºì‹œ (Caffeine)
* **Hot Reload**: DevTools(ë°±ì—”ë“œ) + Vite HMR(í”„ë¡ íŠ¸ì—”ë“œ)

---

## ğŸ§± ì•„í‚¤í…ì²˜ ê°œìš”

### AI ì£¼ë„ ê°œë°œì„ ìœ„í•œ êµ¬ì¡° (1ì¸ + AI í˜‘ì—… ìµœì í™”)

ì´ í”„ë¡œì íŠ¸ëŠ” **ê¸°ì¡´ ë ˆê±°ì‹œ ì½”ë“œì˜ ë§ˆì´ê·¸ë ˆì´ì…˜ ì–´ë ¤ì›€** (JDK 11â†’21, Spring Boot 2.xâ†’3.x ì—…ê·¸ë ˆì´ë“œ ì‹œ ëŒ€ëŸ‰ ì»´íŒŒì¼ ì˜¤ë¥˜)ì„ í•´ê²°í•˜ê¸° ìœ„í•´ **ì™„ì „íˆ ìƒˆë¡œìš´ ê·¸ë¦°í•„ë“œ í”„ë¡œì íŠ¸**ë¡œ ì‹œì‘í•©ë‹ˆë‹¤.

**âš ï¸ ê°œë°œ ì „ëµ**:
- **AI ì˜ì¡´ë„**: 100% (ì£¼ë‹ˆì–´ ë ˆë²¨ íŒ€)
- **ê°œë°œ ë°©ì‹**: ê¸°ì¡´ ì½”ë“œ í¬íŒ… ëŒ€ì‹  ìƒˆë¡œìš´ ì½”ë“œ ìƒì„±
- **ë ˆê±°ì‹œ í™œìš©**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì°¸ê³ ìš©ìœ¼ë¡œë§Œ í™œìš©

**ê¸°ëŠ¥ë³„ íŒ¨í‚¤ì§€ êµ¬ì¡° (ë‹¨ì¼ í”„ë¡œì íŠ¸ - AI ê°œë°œ ìµœì í™”)**:
* **auth**: ì¸ì¦ ê¸°ëŠ¥ (ë¡œê·¸ì¸, íšŒì›ê°€ì…, JWT) - Spring Security 6.x ê¸°ë°˜
* **profile**: í”„ë¡œí•„ ê´€ë¦¬ (êµ­ë‚´/í•´ì™¸ ì‚¬ìš©ì êµ¬ë¶„)  
* **facility**: ì‹œì„¤ ê´€ë¦¬ (ë“±ë¡, ê²€ìƒ‰, ì§€ë„ ì—°ë™) - OpenStreetMap + ì¹´ì¹´ì˜¤ë§µ
* **job**: êµ¬ì¸êµ¬ì§ (ê³µê³  ì‘ì„±, ì§€ì›, ë§¤ì¹­) - AI ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ ì ìš©
* **review**: ë¦¬ë·° ì‹œìŠ¤í…œ (í‰ì , í›„ê¸°, ì¶”ì²œ) - ê°ì • ë¶„ì„ ì ìš© ì˜ˆì •
* **overseas**: ì¬ì™¸ë™í¬ ì „ìš© ê¸°ëŠ¥ (ì™¸êµë¶€ API, í™”ìƒìƒë‹´) - WebRTC ê¸°ë°˜
* **coordinator**: ì½”ë””ë„¤ì´í„° ì›ìŠ¤í†± ì„œë¹„ìŠ¤ - ì¬ì™¸ë™í¬ ì…êµ­ë¶€í„° ìš”ì–‘ì› ì…ì£¼ê¹Œì§€ ì „ ê³¼ì • ì§€ì›
* **notification**: ì•Œë¦¼ ì‹œìŠ¤í…œ (Gmail SMTP, WebSocket) - ë¬´ë£Œ ì„œë¹„ìŠ¤ ê¸°ë°˜
* **common**: ê³µí†µ ì„¤ì •, ìœ í‹¸, ì˜ˆì™¸ì²˜ë¦¬ - Spring Boot 3.3.5 ìµœì í™”

### ê¸°ëŠ¥ë³„ íŒ¨í‚¤ì§€ êµ¬ì¡° (1ì¸ ê°œë°œ ìµœì í™”)

```
global-care-link/
â”œâ”€â”€ build.gradle.kts                   # ë‹¨ì¼ ë¹Œë“œ íŒŒì¼ (ë©€í‹°ëª¨ë“ˆ ì œê±°)
â”œâ”€â”€ src/main/java/com/globalcarelink/
â”‚   â”œâ”€â”€ auth/                          # ğŸ” ì¸ì¦ ê¸°ëŠ¥ ì „ì²´
â”‚   â”‚   â”œâ”€â”€ AuthController.java        # ë¡œê·¸ì¸/íšŒì›ê°€ì… API
â”‚   â”‚   â”œâ”€â”€ AuthService.java           # ì¸ì¦ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ JwtTokenProvider.java      # JWT í† í° ì²˜ë¦¬
â”‚   â”‚   â”œâ”€â”€ LoginRequest.java          # ë¡œê·¸ì¸ ìš”ì²­ DTO
â”‚   â”‚   â”œâ”€â”€ RegisterRequest.java       # íšŒì›ê°€ì… ìš”ì²­ DTO
â”‚   â”‚   â”œâ”€â”€ TokenResponse.java         # í† í° ì‘ë‹µ DTO
â”‚   â”‚   â””â”€â”€ Member.java                # ê¸°ë³¸ íšŒì› ì—”í‹°í‹°
â”‚   â”œâ”€â”€ profile/                       # ğŸ‘¤ í”„ë¡œí•„ ê´€ë¦¬ ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ ProfileController.java     # í”„ë¡œí•„ ê´€ë¦¬ API
â”‚   â”‚   â”œâ”€â”€ ProfileService.java        # í”„ë¡œí•„ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ DomesticProfile.java       # êµ­ë‚´ ì‚¬ìš©ì í”„ë¡œí•„ ì—”í‹°í‹°
â”‚   â”‚   â”œâ”€â”€ OverseasProfile.java       # í•´ì™¸ ì‚¬ìš©ì í”„ë¡œí•„ ì—”í‹°í‹°
â”‚   â”‚   â””â”€â”€ ProfileRepository.java     # í”„ë¡œí•„ ë°ì´í„° ì ‘ê·¼
â”‚   â”œâ”€â”€ facility/                      # ğŸ¥ ì‹œì„¤ ê´€ë¦¬ ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ FacilityController.java    # ì‹œì„¤ ê´€ë¦¬ API
â”‚   â”‚   â”œâ”€â”€ FacilityService.java       # ì‹œì„¤ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ Facility.java              # ì‹œì„¤ ì—”í‹°í‹°
â”‚   â”‚   â”œâ”€â”€ FacilityRepository.java    # ì‹œì„¤ ë°ì´í„° ì ‘ê·¼
â”‚   â”‚   â”œâ”€â”€ MapService.java            # ì§€ë„ ì„œë¹„ìŠ¤ (ì¹´ì¹´ì˜¤/êµ¬ê¸€)
â”‚   â”‚   â””â”€â”€ FacilitySearchDTO.java     # ì‹œì„¤ ê²€ìƒ‰ DTO
â”‚   â”œâ”€â”€ job/                           # ğŸ’¼ êµ¬ì¸êµ¬ì§ ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ JobController.java         # êµ¬ì¸êµ¬ì§ API
â”‚   â”‚   â”œâ”€â”€ JobService.java            # êµ¬ì¸êµ¬ì§ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ JobPosting.java            # êµ¬ì¸ê³µê³  ì—”í‹°í‹°
â”‚   â”‚   â”œâ”€â”€ JobApplication.java        # êµ¬ì§ì§€ì› ì—”í‹°í‹°
â”‚   â”‚   â”œâ”€â”€ JobRepository.java         # êµ¬ì¸êµ¬ì§ ë°ì´í„° ì ‘ê·¼
â”‚   â”‚   â””â”€â”€ JobMatchingService.java    # ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜
â”‚   â”œâ”€â”€ review/                        # â­ ë¦¬ë·° ì‹œìŠ¤í…œ
â”‚   â”‚   â”œâ”€â”€ ReviewController.java      # ë¦¬ë·° API
â”‚   â”‚   â”œâ”€â”€ ReviewService.java         # ë¦¬ë·° ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ Review.java                # ë¦¬ë·° ì—”í‹°í‹°
â”‚   â”‚   â””â”€â”€ ReviewRepository.java      # ë¦¬ë·° ë°ì´í„° ì ‘ê·¼
â”‚   â”œâ”€â”€ overseas/                      # ğŸŒ ì¬ì™¸ë™í¬ ì „ìš© ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ OverseasController.java    # ì¬ì™¸ë™í¬ ì„œë¹„ìŠ¤ API
â”‚   â”‚   â”œâ”€â”€ DiplomaticService.java     # ì™¸êµë¶€ API ì—°ë™
â”‚   â”‚   â”œâ”€â”€ ConsultationService.java   # í™”ìƒ ìƒë‹´ ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ DiplomaticApiClient.java   # ì™¸êµë¶€ API í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ coordinator/                   # ğŸ¤ ì½”ë””ë„¤ì´í„° ì›ìŠ¤í†± ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ CoordinatorController.java # ì½”ë””ë„¤ì´í„° ë§¤ì¹­ API
â”‚   â”‚   â”œâ”€â”€ CoordinatorService.java    # ì›ìŠ¤í†± ì„œë¹„ìŠ¤ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ CoordinatorProfile.java    # ì½”ë””ë„¤ì´í„° í”„ë¡œí•„ (ì „ë¬¸ë¶„ì•¼, ì–¸ì–´ëŠ¥ë ¥)
â”‚   â”‚   â”œâ”€â”€ ServiceRequest.java        # ì„œë¹„ìŠ¤ ìš”ì²­ ì—”í‹°í‹° (ì…êµ­~ì…ì£¼)
â”‚   â”‚   â”œâ”€â”€ ServicePlan.java           # ê°œì¸ë³„ ë§ì¶¤ ì„œë¹„ìŠ¤ ê³„íš
â”‚   â”‚   â”œâ”€â”€ ServiceProgress.java       # ì„œë¹„ìŠ¤ ì§„í–‰ ìƒí™© ì¶”ì 
â”‚   â”‚   â”œâ”€â”€ EmergencyContact.java      # ì‘ê¸‰ìƒí™© ì—°ë½ì²˜ ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ ServicePayment.java        # ì„œë¹„ìŠ¤ ìš”ê¸ˆ ë° ì •ì‚°
â”‚   â”œâ”€â”€ notification/                  # ğŸ“§ ì•Œë¦¼ ì‹œìŠ¤í…œ
â”‚   â”‚   â”œâ”€â”€ EmailService.java          # ì´ë©”ì¼ ë°œì†¡ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ NotificationService.java   # í†µí•© ì•Œë¦¼ ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ NotificationTemplate.java  # ì•Œë¦¼ í…œí”Œë¦¿ ê´€ë¦¬
â”‚   â”œâ”€â”€ common/                        # ğŸ”§ ê³µí†µ ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ config/                    # ì„¤ì • í´ë˜ìŠ¤
â”‚   â”‚   â”‚   â”œâ”€â”€ SecurityConfig.java    # Spring Security ì„¤ì •
â”‚   â”‚   â”‚   â”œâ”€â”€ DatabaseConfig.java    # SQLite ì„¤ì •
â”‚   â”‚   â”‚   â””â”€â”€ SwaggerConfig.java     # API ë¬¸ì„œ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ exception/                 # ì˜ˆì™¸ ì²˜ë¦¬
â”‚   â”‚   â”‚   â”œâ”€â”€ GlobalExceptionHandler.java
â”‚   â”‚   â”‚   â””â”€â”€ CustomException.java
â”‚   â”‚   â”œâ”€â”€ util/                      # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”‚   â”œâ”€â”€ FileUtil.java          # íŒŒì¼ ì²˜ë¦¬ ìœ í‹¸
â”‚   â”‚   â”‚   â””â”€â”€ DateUtil.java          # ë‚ ì§œ ì²˜ë¦¬ ìœ í‹¸
â”‚   â”‚   â””â”€â”€ entity/                    # ê³µí†µ ì—”í‹°í‹°
â”‚   â”‚       â””â”€â”€ BaseEntity.java        # ê¸°ë³¸ ì—”í‹°í‹° (ìƒì„±ì¼, ìˆ˜ì •ì¼)
â”‚   â””â”€â”€ GlobalCareLinkApplication.java # ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ í´ë˜ìŠ¤
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ application.yml                # SQLite ê¸°ë°˜ ì„¤ì •
â”‚   â”œâ”€â”€ data.sql                       # ì´ˆê¸° ë°ì´í„°
â”‚   â””â”€â”€ static/                        # ì •ì  íŒŒì¼
â”œâ”€â”€ frontend/                          # ğŸ¨ React í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ src/features/                  # í”„ë¡ íŠ¸ì—”ë“œë„ ê¸°ëŠ¥ë³„ êµ¬ì¡°
â”‚   â”‚   â”œâ”€â”€ auth/                      # ì¸ì¦ ê´€ë ¨ React ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ facility/                  # ì‹œì„¤ ê´€ë ¨ React ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ job/                       # êµ¬ì¸êµ¬ì§ ê´€ë ¨ React ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â””â”€â”€ overseas/                  # ì¬ì™¸ë™í¬ ê´€ë ¨ React ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â””â”€â”€ data/                              # SQLite ë°ì´í„°ë² ì´ìŠ¤
    â””â”€â”€ lightcare.db                   # SQLite íŒŒì¼
```

### ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

ê´€ê³„í˜• í…Œì´ë¸” ê¸°ë°˜ìœ¼ë¡œ ì™¸ë˜í‚¤(FK)ë¥¼ ì ì ˆíˆ ì‚¬ìš©:

* **member**: ì‚¬ìš©ì ê³„ì • ë° ì¸ì¦ ì •ë³´
* **facility**: ìš”ì–‘ì‹œì„¤ ì •ë³´ (ìœ„ì¹˜ ì¢Œí‘œ í¬í•¨)
* **job\_posting**: êµ¬ì¸ê³µê³  ì •ë³´
* **review**: ì‹œì„¤ ë¦¬ë·° ë° í‰ì 
* **board**: ì»¤ë®¤ë‹ˆí‹°/ì •ë³´ ê²Œì‹œíŒ

### JPA êµ¬ì„± (ìµœì‹ í™”)

* **ORM**: Spring Data JPA 3.x
* **ì—”í‹°í‹° íŒ¨í‚¤ì§€**: `com.example.carelink.entity`
* **Repository íŒ¨í‚¤ì§€**: `com.example.carelink.repository`
* **ìë™ DDL**: ê°œë°œ í™˜ê²½ì—ì„œ `spring.jpa.hibernate.ddl-auto=update`
* **ë„¤ì´ë° ì „ëµ**: camelCase â†’ underscore ìë™ ë§¤í•‘

---

## ğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡° (React SPA)

### React í”„ë¡œì íŠ¸ êµ¬ì¡° (Feature-Based)
```
frontend/src/
â”œâ”€â”€ components/              # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ ui/                 # ê¸°ë³¸ UI ì»´í¬ë„ŒíŠ¸ (Shadcn/ui)
â”‚   â””â”€â”€ layout/             # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ features/               # ê¸°ëŠ¥ë³„ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ auth/               # ì¸ì¦ ê´€ë ¨
â”‚   â”œâ”€â”€ facility/           # ì‹œì„¤ ê´€ë ¨
â”‚   â”œâ”€â”€ job/                # êµ¬ì¸êµ¬ì§ ê´€ë ¨
â”‚   â””â”€â”€ diplomatic/         # ì™¸êµ ì„œë¹„ìŠ¤ ê´€ë ¨
â”œâ”€â”€ hooks/                  # ì»¤ìŠ¤í…€ í›…
â”œâ”€â”€ services/               # API ì„œë¹„ìŠ¤ (TanStack Query)
â”œâ”€â”€ stores/                 # ìƒíƒœ ê´€ë¦¬ (Zustand)
â”œâ”€â”€ types/                  # TypeScript íƒ€ì… ì •ì˜
â””â”€â”€ utils/                  # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
```

### UI/UX ê¸°ìˆ  ìŠ¤íƒ & ë””ìì¸ ì»¨ì…‰
* **ë””ìì¸ ì‹œìŠ¤í…œ**: Tailwind CSS + Shadcn/ui
* **ì•„ì´ì½˜**: Lucide React  
* **ë°˜ì‘í˜•**: Mobile-First ë””ìì¸
* **ë‹¤êµ­ì–´**: i18next (í•œêµ­ì–´, ì˜ì–´, ì¤‘êµ­ì–´, ì¼ë³¸ì–´)
* **ë””ìì¸ ì»¨ì…‰**: 'elderberry' - ì•„ë©œë¦¬(ameli.co.kr) ìŠ¤íƒ€ì¼ ë¯¸ë‹ˆë©€ & ê°ì„±ì 
* **ìƒ‰ìƒ íŒ”ë ˆíŠ¸**: íŒŒìŠ¤í…”í†¤ ê·¸ë¦°/ë² ì´ì§€/ë¼ì´íŠ¸ë¸”ë£¨ + ë”°ëœ»í•œ ì˜¤ë Œì§€/ì˜ë¡œìš°
* **í°íŠ¸**: Noto Sans KR, Pretendard (ê°€ë…ì„± + ë”°ëœ»í•¨)
* **ì• ë‹ˆë©”ì´ì…˜**: Framer Motion (ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜ + í˜¸ë²„ íš¨ê³¼)

---

## ğŸ§¾ ì£¼ìš” ì„¤ì • íŒŒì¼

### application.yml (SQLite ê¸°ë°˜ - ë¬´ë£Œ ì„¤ì •)

```yaml
spring:
  application:
    name: global-care-link
  
  # SQLite ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • (ì™„ì „ ë¬´ë£Œ)
  datasource:
    url: jdbc:sqlite:./data/lightcare.db
    driver-class-name: org.sqlite.JDBC
    username: ""
    password: ""
  
  jpa:
    hibernate:
      ddl-auto: create-drop # ê°œë°œìš©, ìš´ì˜ì—ì„œëŠ” update
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.SQLiteDialect
  
  # Gmail SMTP ì„¤ì • (ë¬´ë£Œ)
  mail:
    host: smtp.gmail.com
    port: 587
    username: ${GMAIL_USERNAME}
    password: ${GMAIL_APP_PASSWORD}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
  
  # ìºì‹œ ì„¤ì • (ë©”ëª¨ë¦¬ ìºì‹œ)
  cache:
    type: caffeine
    caffeine:
      spec: maximumSize=1000,expireAfterWrite=30m
  
  security:
    jwt:
      secret: ${JWT_SECRET:default-secret-key-change-in-production}
      expiration: 86400000 # 24ì‹œê°„

server:
  port: 8080
  
logging:
  level:
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    com.globalcarelink: DEBUG
```

### í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì • (package.json)

```json
{
  "name": "global-care-link-frontend",
  "type": "module",
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.20.0",
    "zustand": "^4.4.6",
    "@tanstack/react-query": "^5.8.0",
    "axios": "^1.6.0",
    "react-hook-form": "^7.47.0",
    "zod": "^3.22.0",
    "tailwindcss": "^3.3.0",
    "lucide-react": "^0.292.0",
    "i18next": "^23.0.0",
    "react-i18next": "^13.0.0",
    "framer-motion": "^10.0.0",
    "@radix-ui/react-navigation-menu": "^1.1.0",
    "@radix-ui/react-dropdown-menu": "^2.0.0"
  }
}
```

---

## ğŸ”„ ê°œë°œ íŒ¨í„´

### ì»¨íŠ¸ë¡¤ëŸ¬ íŒ¨í„´ (ìµœì‹ í™”)

Spring Boot 3.x MVC êµ¬ì¡°:

* **REST API**: `@RestController` + `@RequestMapping` ì¡°í•©
* **View ì»¨íŠ¸ë¡¤ëŸ¬**: `@Controller` + Model ê°ì²´ í™œìš©
* **HTTP ë§¤í•‘**: `@GetMapping`, `@PostMapping`, `@PutMapping`, `@DeleteMapping`
* **ê²€ì¦**: `@Valid` + `@Validated` ì–´ë…¸í…Œì´ì…˜ í™œìš©
* **ë¡œê¹…**: `@Slf4j` + êµ¬ì¡°í™”ëœ ë¡œê·¸ ë©”ì‹œì§€

### ì„œë¹„ìŠ¤ ê³„ì¸µ

ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ë¡œì§ ë¶„ë¦¬:

* íŠ¸ëœì­ì…˜ ì²˜ë¦¬
* ì…ë ¥ ê²€ì¦
* íš¡ë‹¨ ê´€ì‹¬ì‚¬ ê´€ë¦¬

### JPA Repository íŒ¨í„´ (ìµœì‹ í™”)

Spring Data JPA ê¸°ë°˜:

* `JpaRepository<Entity, ID>` ìƒì†
* ë©”ì„œë“œ ì´ë¦„ ê¸°ë°˜ ì¿¼ë¦¬ ìë™ ìƒì„±
* `@Query` ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ë³µì¡í•œ ì¿¼ë¦¬ ì²˜ë¦¬
* `@Modifying`ìœ¼ë¡œ ìˆ˜ì •/ì‚­ì œ ì¿¼ë¦¬ ì •ì˜

---

## âœ… í…ŒìŠ¤íŠ¸

### í…ŒìŠ¤íŠ¸ êµ¬ì¡°

* ë‹¨ìœ„ í…ŒìŠ¤íŠ¸: JUnit 5
* í†µí•© í…ŒìŠ¤íŠ¸: Spring Boot Test
* í…ŒìŠ¤íŠ¸ ì„¤ì •ì€ ìš´ì˜ê³¼ ë³„ë„ êµ¬ì„±

### í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./gradlew test

# íŠ¹ì • í´ë˜ìŠ¤ë§Œ ì‹¤í–‰
./gradlew test --tests "ClassName"
```

---

## ğŸ¤ íŒ€ í˜‘ì—… ê·œì¹™

### Git ì›Œí¬í”Œë¡œìš°

* ê¸°ëŠ¥ ë¸Œëœì¹˜ ëª…: `feature/member-ê¸°ëŠ¥ëª…`
* ì»¤ë°‹ ë©”ì‹œì§€: `[feat] ê¸°ëŠ¥ ì„¤ëª…`
* PRì„ í†µí•œ ì½”ë“œ ë¦¬ë·° ì§„í–‰

### ì½”ë“œ ì»¨ë²¤ì…˜

* í´ë˜ìŠ¤ëª…: PascalCase
* ë©”ì„œë“œëª…: camelCase
* ìƒìˆ˜ëª…: UPPER\_SNAKE\_CASE
* íŒ¨í‚¤ì§€ëª…: ëª¨ë‘ ì†Œë¬¸ì

---

## âš ï¸ íŠ¹ì´ ì‚¬í•­

### í•œê¸€ ì§€ì›

* ëª¨ë“  í…ìŠ¤íŠ¸ ì½˜í…ì¸ ëŠ” í•œê¸€ë¡œ ì‘ì„±
* UTF-8 ì¸ì½”ë”© ìœ ì§€
* ì£¼ì„/ë¬¸ì„œë„ í•œê¸€ ê¸°ë°˜

### ì§€ë„ ì—°ë™

* ì¹´ì¹´ì˜¤ë§µ API ì—°ë™ ì˜ˆì •
* ìœ„ë„/ê²½ë„ ê¸°ë°˜ ì‹œì„¤ ê²€ìƒ‰ ê¸°ëŠ¥ í¬í•¨

### ì‚¬ìš©ì ì—­í• 

* `USER`: ì¼ë°˜ êµ¬ì§ì
* `FACILITY`: ìš”ì–‘ì‹œì„¤ ê´€ë¦¬ì
* `ADMIN`: ì‹œìŠ¤í…œ ê´€ë¦¬ì

---

## ğŸ¤– AI ê°œë°œ ì§€ì› ìµœì í™”

### ê°œë°œ ì „ëµ (ê·¸ë¦°í•„ë“œ ê°œë°œ)

í”„ë¡œì íŠ¸ ìƒí™© ë¶„ì„ì— ë”°ë¼ ë‹¤ìŒê³¼ ê°™ì€ ì „ëµì„ ì±„íƒí•©ë‹ˆë‹¤:

#### **í˜„ì¬ ë¬¸ì œì **:
- JDK 11â†’21 ë° Spring Boot 2.xâ†’3.3.5 ì—…ê·¸ë ˆì´ë“œ ê³¼ì •ì—ì„œ 24ê°œ ì—ëŸ¬, 5ê°œ ê²½ê³  ë°œìƒ
- Spring Security API ë³€ê²½, Lombok í˜¸í™˜ì„±, íƒ€ì… ì¶”ë¡  ë¬¸ì œ ë“± ë³µì¡í•œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì´ìŠˆ
- íŒ€ ê°œë°œ ëŠ¥ë ¥: AIì— 100% ì˜ì¡´í•˜ëŠ” ì£¼ë‹ˆì–´ ë ˆë²¨

#### **í•´ê²° ë°©ì•ˆ**:
* **ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ ì ‘ê·¼**: ê¸°ì¡´ ë ˆê±°ì‹œ ì½”ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜ ëŒ€ì‹  ìµœì‹  ê¸°ìˆ  ìŠ¤íƒ ê¸°ë°˜ ìƒˆë¡œìš´ ê°œë°œ
* **ìµœì‹  Spring Boot 3.x íŒ¨í„´ í™œìš©**: Spring Security 6.x, Spring Data JPA 3.x ë“± ìµœì‹  API ì‚¬ìš©
* **AI ì¹œí™”ì  ì½”ë“œ ì‘ì„±**: ëª…í™•í•œ íŒ¨í„´, í‘œì¤€ ì–´ë…¸í…Œì´ì…˜, ì¼ê´€ëœ ë„¤ì´ë° ê·œì¹™
* **ê¸°ì¡´ ì½”ë“œ ì¬í™œìš©**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ê°œë…ì  ì°¸ê³  + AI í¬íŒ…ìœ¼ë¡œ ìµœì‹  ë¬¸ë²• ì ìš©

### AIì—ê²Œ ìš”ì²­í•  ë•Œ ê¶Œì¥ ì‚¬í•­

**âœ… ì¢‹ì€ ì§ˆë¬¸ ì˜ˆì‹œ (ìµœì‹  ê¸°ìˆ  ìŠ¤íƒ ê¸°ë°˜):**
```
- "Java 21 + Spring Boot 3.3.5ì—ì„œ JWT ì¸ì¦ êµ¬í˜„ ë°©ë²•"
- "Spring Security 6.x SecurityFilterChainìœ¼ë¡œ ì‚¬ìš©ì ë¡œê·¸ì¸ êµ¬í˜„"  
- "JPA Entityì™€ Repository íŒ¨í„´ìœ¼ë¡œ íšŒì› ê´€ë¦¬ ê¸°ëŠ¥ êµ¬í˜„ (Hibernate 6.x)"
- "React 18 + TypeScriptë¡œ ë¡œê·¸ì¸ í¼ êµ¬í˜„ (React Hook Form + Zod)"
- "SQLite + Spring Data JPA ì„¤ì • ë°©ë²•"
- "Gradle 8.x Kotlin DSLë¡œ ë©€í‹°ëª¨ë“ˆ í”„ë¡œì íŠ¸ ì„¤ì •"
```

**âŒ í”¼í•´ì•¼ í•  ìš”ì²­ (ë ˆê±°ì‹œ ê¸°ìˆ ):**
```
- ë ˆê±°ì‹œ Spring Boot 2.x ê¸°ë°˜ ì½”ë“œ ìˆ˜ì • ìš”ì²­
- MyBatis XML ë§¤í¼ íŒŒì¼ ìˆ˜ì • ìš”ì²­  
- JDK 11 ê¸°ë°˜ ì½”ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜ ìš”ì²­
- Spring Security WebSecurityConfigurerAdapter ì‚¬ìš© ìš”ì²­ (Deprecated)
```

### ê°œë°œ ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸

* **ê¸°ìˆ  ìŠ¤íƒ í™•ì¸**: ëª¨ë“  ìƒˆ ì½”ë“œëŠ” JDK 21 + Spring Boot 3.3.5 ê¸°ë°˜
* **ì˜ì¡´ì„± ê²€ì¦**: `build.gradle`ì—ì„œ ìµœì‹  ë²„ì „ ì‚¬ìš© í™•ì¸
* **ë³´ì•ˆ ì„¤ì •**: Spring Security 6.x ë°©ì‹ìœ¼ë¡œ êµ¬í˜„
* **í…ŒìŠ¤íŠ¸ ì½”ë“œ**: JUnit 5 + Spring Boot Test í™œìš©

---

## ğŸŒ í™˜ê²½ ë³€ìˆ˜ (ë¬´ë£Œ ì„œë¹„ìŠ¤ ê¸°ë°˜)

### ë°±ì—”ë“œ í™˜ê²½ ë³€ìˆ˜ (.env)
```bash
# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • (SQLite - íŒŒì¼ ê¸°ë°˜, ë¹„ë°€ë²ˆí˜¸ ë¶ˆí•„ìš”)
DATABASE_URL=jdbc:sqlite:./data/lightcare.db

# JWT ë³´ì•ˆ
JWT_SECRET=your_super_secret_jwt_key_with_256_bits_minimum
JWT_EXPIRATION=86400000

# Gmail SMTP ì„¤ì • (ë¬´ë£Œ)
GMAIL_USERNAME=your-email@gmail.com
GMAIL_APP_PASSWORD=your_gmail_app_password

# ì™¸ë¶€ API (ë¬´ë£Œ í”Œëœ)
KAKAO_API_KEY=your_kakao_map_api_key # ì›” 30ë§Œê±´ ë¬´ë£Œ
GITHUB_TOKEN=your_github_token # íŒŒì¼ ì €ì¥ìš©

# ê°œë°œ í™˜ê²½
JAVA_HOME=/path/to/jdk-21
SPRING_PROFILES_ACTIVE=dev
```

### í”„ë¡ íŠ¸ì—”ë“œ í™˜ê²½ ë³€ìˆ˜ (.env.local)
```bash
# API ì—”ë“œí¬ì¸íŠ¸
VITE_API_BASE_URL=http://localhost:8080/api
VITE_WS_URL=ws://localhost:8080/ws

# ë¬´ë£Œ ì§€ë„ ì„œë¹„ìŠ¤
VITE_KAKAO_API_KEY=your_kakao_api_key # ì›” 30ë§Œê±´ ë¬´ë£Œ
VITE_USE_FREE_MAP=true # OpenStreetMap ì‚¬ìš© í”Œë˜ê·¸

# GitHub íŒŒì¼ ì €ì¥ì†Œ
VITE_GITHUB_REPO_OWNER=your-username
VITE_GITHUB_REPO_NAME=lightcare-files

# ê°œë°œ ì„¤ì •
VITE_DEV_MODE=true
VITE_LOG_LEVEL=debug
```

## ğŸš€ AI ì£¼ë„ 2ì£¼ ì™„ì„± ê°œë°œ ì›Œí¬í”Œë¡œìš°

### ê°œë°œì 1ì¸ + AI í˜‘ì—… ëª¨ë¸ (í˜„ì‹¤ì  ì ‘ê·¼)

* **ê°œë°œ ì£¼ì²´**: 1ì¸ ê°œë°œì (100% AI ì˜ì¡´) + Claude AI
* **ì˜ì‚¬ê²°ì •**: ê°œë°œìê°€ ìš”êµ¬ì‚¬í•­ ì •ì˜, AIê°€ ì „ì²´ êµ¬í˜„ ë‹´ë‹¹ (ì„¤ê³„â†’ì½”ë”©â†’í…ŒìŠ¤íŠ¸)  
* **í’ˆì§ˆ ê´€ë¦¬**: AIê°€ ì½”ë“œ ë¦¬ë·°, í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±, ë¦¬íŒ©í† ë§, ë¬¸ì„œí™” ëª¨ë‘ ë‹´ë‹¹

### 2ì£¼ ê°œë°œ ë¡œë“œë§µ (AI-Driven Development)

#### **1ì£¼ì°¨: ë°±ì—”ë“œ í˜„ëŒ€í™” ë° API í•µì‹¬ êµ¬í˜„**

**Day 1-2: ë°±ì—”ë“œ ê¸°ë°˜ ì‹œìŠ¤í…œ êµ¬ì¶• (AI-Powered Scaffolding)**
- âœ… Spring Boot 3.3.5, Java 21, Gradle ê¸°ë°˜ í”„ë¡œì íŠ¸ ë¼ˆëŒ€ ìƒì„±
- âœ… ê¸°ì¡´ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë¶„ì„í•˜ì—¬ JPA Entity í´ë˜ìŠ¤ ìë™ ìƒì„±
- âœ… QueryDSL ì„¤ì • ë° ê¸°ë³¸ Q-Type í´ë˜ìŠ¤ ìƒì„±
- âœ… Spring WebFlux, Spring Data JPA, Spring Security ì˜ì¡´ì„± ì¶”ê°€

**Day 3-4: í•µì‹¬ API êµ¬í˜„ (AI Code Generation)**
- âœ… ê¸°ì¡´ Controller/Service ë¶„ì„í•˜ì—¬ íšŒì›, ì‹œì„¤, êµ¬ì¸êµ¬ì§, ë¦¬ë·° ë„ë©”ì¸ í•µì‹¬ CRUD API ì¬êµ¬í˜„
- âœ… Spring MVC ê¸°ë°˜ ì»¨íŠ¸ë¡¤ëŸ¬ ë¡œì§ ìƒì„±
- âœ… OpenAPI 3.0 ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ API ë¬¸ì„œ ìë™í™”

**Day 5: ë³´ì•ˆ ë° ê¸°ë³¸ ì„¤ì • (AI Configuration)**  
- âœ… Spring Security 6.x JWT ì¸ì¦/ì¸ê°€ ì‹œìŠ¤í…œ êµ¬ì¶•
- âœ… @RestControllerAdvice ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬ê¸° êµ¬í˜„
- âœ… ë¡œê¹… ì„¤ì • ë° ê°œë°œ í™˜ê²½ ìµœì í™”

#### **2ì£¼ì°¨: í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¶• ë° ë°°í¬ ìë™í™”**

**Day 6-7: í”„ë¡ íŠ¸ì—”ë“œ í”„ë¡œì íŠ¸ ìƒì„± (AI-Powered Frontend Setup)**
- âœ… Vite React 18, TypeScript í”„ë¡œì íŠ¸ ë¼ˆëŒ€ ìƒì„±
- âœ… 'elderberry' ë””ìì¸ ì‹œìŠ¤í…œ ê¸°ë°˜ ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±
- âœ… Zustand, React Query, Tailwind CSS, Axios ì„¤ì •

**Day 8-10: UI êµ¬í˜„ ë° API ì—°ë™ (AI Component Generation & Integration)**
- âœ… ê¸°ëŠ¥ë³„ React ì»´í¬ë„ŒíŠ¸(Button, Header, FacilityCard) ê¸°ë³¸ ì½”ë“œ ìƒì„±
- âœ… API ì—°ë™ í•¨ìˆ˜(authApi, facilityApi) êµ¬í˜„
- âœ… React Queryì™€ Axiosë¡œ ë°±ì—”ë“œ ì—°ë™ ë° í™”ë©´ í‘œì‹œ

**Day 11-12: CI/CD ë° í…ŒìŠ¤íŠ¸ ìë™í™” (AI DevOps)**
- âœ… GitHub Actions ì›Œí¬í”Œë¡œìš° ìƒì„± (Build â†’ Test â†’ Deploy)
- âœ… Dockerfile ë° docker-compose.yml ìƒì„±
- âœ… JUnit5, Mockito ë‹¨ìœ„/í†µí•© í…ŒìŠ¤íŠ¸ ì½”ë“œ ìƒì„±

**Day 13-14: ìµœì¢… í†µí•© ë° ë°°í¬ (Finalization)**
- âœ… Railway/Render ë“± ë¬´ë£Œ ë°°í¬ ì„œë¹„ìŠ¤ ì„¤ì •
- âœ… README.md í”„ë¡œì íŠ¸ ë¬¸ì„œ ìë™ ì—…ë°ì´íŠ¸
- âœ… ìµœì¢… í†µí•© í…ŒìŠ¤íŠ¸ ë° í”„ë¡œë•ì…˜ ë°°í¬

### AI í™œìš© ë‹¨ê³„ë³„ ê°€ì´ë“œ (ì‹¤ë¬´ ì¤‘ì‹¬)

**1ë‹¨ê³„: ìƒí™© ë¶„ì„ ë° ì „ëµ ìˆ˜ë¦½**
```
- "JDK 11â†’21 ë§ˆì´ê·¸ë ˆì´ì…˜ ëŒ€ì‹  ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±í•˜ëŠ” ê²Œ ë§ë‚˜ìš”?"
- "Spring Boot 2.x ì½”ë“œë¥¼ 3.3.5ë¡œ í¬íŒ…í•˜ëŠ” ë°©ë²•"
- "ë©€í‹°ëª¨ë“ˆ vs ë‹¨ì¼ ëª¨ë“ˆ ì¤‘ 1ì¸ ê°œë°œì— ì í•©í•œ êµ¬ì¡°"
- "SQLite vs PostgreSQL ì¤‘ ìë³¸ê¸ˆ 0ì›ì— ì í•©í•œ DB"
```

**2ë‹¨ê³„: í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ê³„**
```
- "ê¸°ëŠ¥ë³„ íŒ¨í‚¤ì§€ êµ¬ì¡°ë¡œ auth/profile/facility/job ëª¨ë“ˆ ì„¤ê³„"
- "Spring Boot 3.3.5 ê¸°ë°˜ Gradle Kotlin DSL ì„¤ì • íŒŒì¼ ì‘ì„±"
- "SQLite + JPA Entity ì„¤ê³„ (ê¸°ì¡´ schema.sql ê¸°ë°˜)"
- "React + TypeScript + Vite í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡° ì„¤ê³„"
```

**3ë‹¨ê³„: í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„**
```
- "Spring Security 6.x JWT ì¸ì¦ ì‹œìŠ¤í…œ ì™„ì „ êµ¬í˜„"
- "Member Entity + Repository + Service + Controller ì „ì²´ êµ¬í˜„"
- "React ë¡œê·¸ì¸/íšŒì›ê°€ì… í¼ + API ì—°ë™ ì™„ì „ êµ¬í˜„"
- "Swagger UI API ë¬¸ì„œí™” ìë™ ì„¤ì •"
```

**4ë‹¨ê³„: í†µí•© ë° ë°°í¬**
```
- "JUnit5 í…ŒìŠ¤íŠ¸ ì½”ë“œ ìë™ ìƒì„±"
- "GitHub Actions CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì„±"
- "Railway ë¬´ë£Œ ë°°í¬ë¥¼ ìœ„í•œ Dockerfile ì‘ì„±"
- "ìµœì¢… í”„ë¡œì íŠ¸ README.md ì‘ì„±"
```

### íš¨ìœ¨ì ì¸ AI ì§ˆë¬¸ íŒ¨í„´

**êµ¬ì²´ì  ìš”ì²­ ì˜ˆì‹œ:**
- "Member ì—”í‹°í‹° í´ë˜ìŠ¤ë¥¼ JPAë¡œ êµ¬í˜„, ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸/ì—­í•  í•„ë“œ í¬í•¨"
- "MemberServiceì— íšŒì›ê°€ì… ë¡œì§ êµ¬í˜„, BCrypt ì•”í˜¸í™” ì ìš©"  
- "Spring Security 6.xë¡œ JWT ê¸°ë°˜ ì¸ì¦ ì„¤ì • êµ¬í˜„"
- "MemberController REST API êµ¬í˜„, OpenAPI 3.0 ë¬¸ì„œí™” í¬í•¨"
- "ë©€í‹°ëª¨ë“ˆ êµ¬ì¡°ë¡œ member-moduleê³¼ api-module ë¶„ë¦¬"
- "Gradle build.gradle.kts íŒŒì¼ ë©€í‹°ëª¨ë“ˆ ì„¤ì • êµ¬í˜„"

---

## ğŸ—ï¸ ì´ˆê¸° ê°œë°œë¶€í„° í™•ì¥ì„± ê³ ë ¤ì‚¬í•­

### ëª¨ë“ˆ ê°„ ì˜ì¡´ì„± ê´€ë¦¬

**ì˜ì¡´ì„± ë°©í–¥ (Clean Architecture):**
```
api-module â†’ [member, facility, job, review, diplomatic]-module â†’ core-module
```

**ê¸ˆì§€ëœ ì˜ì¡´ì„±:**
- ë„ë©”ì¸ ëª¨ë“ˆ ê°„ ì§ì ‘ ì˜ì¡´ (âŒ)
- core-moduleì˜ ë‹¤ë¥¸ ëª¨ë“ˆ ì˜ì¡´ (âŒ)

### í™•ì¥ ê°€ëŠ¥í•œ ì„¤ê³„ ì›ì¹™

#### 1. ë„ë©”ì¸ ì£¼ë„ ì„¤ê³„ (DDD)
```java
// member-module/src/main/java/com/globalcarelink/member/
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ Member.java              # ë„ë©”ì¸ ì—”í‹°í‹°
â”‚   â”œâ”€â”€ MemberService.java       # ë„ë©”ì¸ ì„œë¹„ìŠ¤
â”‚   â””â”€â”€ MemberRepository.java    # ë¦¬í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤
â”œâ”€â”€ application/
â”‚   â””â”€â”€ MemberApplicationService.java  # ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤
â””â”€â”€ infrastructure/
    â””â”€â”€ MemberJpaRepository.java       # JPA êµ¬í˜„ì²´
```

#### 2. ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜
```java
// íšŒì› ê°€ì… ì‹œ ì´ë²¤íŠ¸ ë°œí–‰
@Service
public class MemberService {
    public void register(Member member) {
        memberRepository.save(member);
        // ì´ë²¤íŠ¸ ë°œí–‰ (ì´ë©”ì¼ ë°œì†¡, ë¡œê·¸ ê¸°ë¡ ë“±)
        applicationEventPublisher.publishEvent(new MemberRegisteredEvent(member));
    }
}
```

#### 3. API ê³„ì•½ ìš°ì„  ê°œë°œ (Contract-First)
```yaml
# OpenAPI ìŠ¤í™ ë¨¼ì € ì •ì˜
openapi: 3.0.3
info:
  title: Global CareLink API
  version: 1.0.0
paths:
  /api/v1/members:
    post:
      summary: íšŒì› ê°€ì…
      operationId: registerMember
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MemberRegisterRequest'
```

### ì„±ëŠ¥ ë° í™•ì¥ì„± ì¤€ë¹„

#### 1. ìºì‹± ì „ëµ
```java
@Service
public class FacilityService {
    
    @Cacheable(value = "facilities", key = "#id")
    public Facility findById(Long id) {
        return facilityRepository.findById(id).orElse(null);
    }
    
    @CacheEvict(value = "facilities", key = "#facility.id")
    public Facility update(Facility facility) {
        return facilityRepository.save(facility);
    }
}
```

#### 2. ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
```java
// JPA N+1 ë¬¸ì œ ë°©ì§€
@EntityGraph(attributePaths = {"reviews", "images"})
List<Facility> findAllWithReviewsAndImages();

// í˜ì´ì§• ì²˜ë¦¬
Pageable pageable = PageRequest.of(0, 10, Sort.by("createdAt").descending());
Page<Facility> facilities = facilityRepository.findAll(pageable);
```

### ê°œë°œ í™˜ê²½ ìš°ì„  ì§‘ì¤‘

#### 1. ë¡œì»¬ ê°œë°œ ì„¤ì • ìµœì í™”
```yaml
# application-dev.yml (ê°œë°œ ì „ìš©)
spring:
  jpa:
    hibernate:
      ddl-auto: create-drop # ìŠ¤í‚¤ë§ˆ ìë™ ìƒì„±/ì‚­ì œ
    show-sql: true
    properties:
      hibernate:
        format_sql: true
  
  h2:
    console:
      enabled: true # H2 ì½˜ì†” í™œì„±í™” (ê°œë°œìš©)
  
  devtools:
    restart:
      enabled: true # ì½”ë“œ ë³€ê²½ ì‹œ ìë™ ì¬ì‹œì‘
    livereload:
      enabled: true # ë¸Œë¼ìš°ì € ìë™ ìƒˆë¡œê³ ì¹¨

# ê°œë°œ í¸ì˜ì„± ì„¤ì •
logging:
  level:
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    com.globalcarelink: DEBUG
```

#### 2. ê°œë°œ ë„êµ¬ í™œìš©
```bash
# ê°œë°œ ì¤‘ ìì£¼ ì‚¬ìš©í•  ëª…ë ¹ì–´
./gradlew bootRun --args='--spring.profiles.active=dev'
./gradlew test --continuous # í…ŒìŠ¤íŠ¸ ìë™ ì‹¤í–‰
./gradlew :api-module:generateOpenApiDocs # API ë¬¸ì„œ ìƒì„±
```

**Docker/ë°°í¬ëŠ” ëª¨ë“  ê¸°ëŠ¥ ì™„ì„± í›„ ë§ˆì§€ë§‰ ë‹¨ê³„ì—ì„œ ì§„í–‰ (ìë³¸ê¸ˆ 0ì› ê³ ë ¤)**

---

## ğŸŒ ê¸€ë¡œë²Œ í™•ì¥ ê³„íš

### ì¬ì™¸ë™í¬ ì„œë¹„ìŠ¤ ê°œìš”

* **ì„œë¹„ìŠ¤ ëŒ€ìƒ**: í•´ì™¸ ê±°ì£¼ ì¬ì™¸ë™í¬ ë° ê·¸ ê°€ì¡±
* **ì£¼ìš” ê¸°ëŠ¥**: í•œêµ­ ìš”ì–‘ì› ì •ë³´ ì œê³µ, í™”ìƒ ìƒë‹´, ë‹¤êµ­ì–´ ì§€ì›
* **íƒ€ê²Ÿ êµ­ê°€**: ë¯¸êµ­, ì¤‘êµ­, ì¼ë³¸, ìºë‚˜ë‹¤, í˜¸ì£¼ ë“±
* **ì—°ë™ API**: ì™¸êµë¶€ ì¬ì™¸êµ­ë¯¼ì˜ì‚¬ì„œë¹„ìŠ¤, ê³µê³µë°ì´í„°í¬í„¸

### ì™¸êµë¶€ API ì—°ë™

**ì—°ë™ ì˜ˆì • API ëª©ë¡:**
```
1. ì¬ì™¸êµ­ë¯¼ í˜„í™© API
2. ì˜ì‚¬ê´€/ì´ì˜ì‚¬ê´€ ì •ë³´ API  
3. ì¬ì™¸ë™í¬ ì§€ì› ì •ì±… API
4. êµ­ê°€ë³„ ì˜ë£Œ ì •ë³´ API
```

**ê°œë°œ ì‹œ ê³ ë ¤ì‚¬í•­:**
- ê³µê³µë°ì´í„°í¬í„¸ ì¸ì¦í‚¤ ê´€ë¦¬
- API í˜¸ì¶œ ì œí•œ ë° ìºì‹± ì „ëµ
- ë‹¤êµ­ì–´ ë°ì´í„° ì²˜ë¦¬ ë° ë³€í™˜
- ì‹œê°„ëŒ€ë³„ ë°ì´í„° ë™ê¸°í™”

### ë‹¤êµ­ì–´ ì§€ì› ì‹œìŠ¤í…œ

* **ì§€ì› ì–¸ì–´**: í•œêµ­ì–´, ì˜ì–´, ì¤‘êµ­ì–´(ê°„ì²´), ì¼ë³¸ì–´
* **êµ­ì œí™” êµ¬í˜„**: Spring Boot MessageSource + i18n
* **í”„ë¡ íŠ¸ì—”ë“œ**: Thymeleaf ë‹¤êµ­ì–´ í…œí”Œë¦¿
* **ì‹¤ì‹œê°„ ë²ˆì—­**: Google Translate API ì—°ë™ ì˜ˆì •

### í™”ìƒ ìƒë‹´ ì‹œìŠ¤í…œ

* **ê¸°ìˆ  ìŠ¤íƒ**: WebRTC, STOMP, WebSocket
* **ê¸°ëŠ¥**: 1:1 í™”ìƒ ìƒë‹´, í™”ë©´ ê³µìœ , ì±„íŒ…
* **ëŒ€ìƒ**: ì¬ì™¸ë™í¬-êµ­ë‚´ ìš”ì–‘ì› ìƒë‹´ì ë§¤ì¹­
* **ë³´ì•ˆ**: HTTPS, JWT í† í° ì¸ì¦

---

## ğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ ë©”ë‰´ êµ¬ì„± & ì‚¬ìš©ì ê²½í—˜

### 'elderberry' ì‚¬ì´íŠ¸ êµ¬ì¡°

**ë©”ì¸ ë„¤ë¹„ê²Œì´ì…˜ (ë“œë¡­ë‹¤ìš´ ë°©ì‹)**:

#### 1. ìš”ì–‘ ì‹œì„¤ ì°¾ê¸°
- **ì‹œì„¤ ê²€ìƒ‰** (ì „ì²´): ì „êµ­ ìš”ì–‘ ì‹œì„¤ ê²€ìƒ‰ ë° ìƒì„¸ ì •ë³´
- **ì‹œì„¤ ë¦¬ë·°** (ì¼ë°˜ íšŒì›): ì‹œì„¤ ì´ìš© í›„ê¸° ì‘ì„± ë° ì—´ëŒ
- **ìš°ë¦¬ ì‹œì„¤ ê´€ë¦¬** (ì‹œì„¤ íšŒì›): ì‹œì„¤ ì •ë³´ ê´€ë¦¬, ê³µì§€ì‚¬í•­, ì˜ˆì•½ í˜„í™©

#### 2. ì¼ìë¦¬ ì •ë³´  
- **êµ¬ì¸ ê³µê³ ** (ì „ì²´): ìš”ì–‘ ê´€ë ¨ êµ¬ì¸ ê²Œì‹œê¸€ ì—´ëŒ ë° ì§€ì›
- **êµ¬ì§ ê³µê³ ** (ì „ì²´): ìš”ì–‘ ê´€ë ¨ êµ¬ì§ ê²Œì‹œê¸€ ì—´ëŒ
- **êµ¬ì¸ê¸€ ì‘ì„±** (ì‹œì„¤ íšŒì›): ìš”ì–‘ ì¸ë ¥ ì±„ìš© ê³µê³  ë“±ë¡
- **êµ¬ì§ê¸€ ì‘ì„±** (ì¼ë°˜ íšŒì›): ìš”ì–‘ ê´€ë ¨ ì¼ìë¦¬ í¬ë§ ê¸€ ë“±ë¡

#### 3. ì •ë³´ ë§ˆë‹¹
- ê³µì§€ì‚¬í•­, ì´ë²¤íŠ¸, FAQ
- ìë£Œì‹¤ (ìš”ì–‘ ê°€ì´ë“œ, ì„œì‹)
- ìš”ì–‘ ë‰´ìŠ¤ & ì¹¼ëŸ¼

#### 4. ì½”ë””ë„¤ì´í„° ì„œë¹„ìŠ¤
- **ì½”ë””ë„¤ì´í„° ì†Œê°œ** (ì „ì²´): í”„ë¡œí•„ ë° ì „ë¬¸ ë¶„ì•¼ í™•ì¸
- **ìƒë‹´ ì‹ ì²­** (íšŒì›): 1:1 ìƒë‹´ ì˜ˆì•½
- **ë‚˜ì˜ ë§¤ì¹­ í˜„í™©** (íšŒì›): ë§¤ì¹­ ì§„í–‰ ìƒí™© í™•ì¸
- **ê³„ì•½ ê´€ë¦¬** (íšŒì›): ì„œë¹„ìŠ¤ ê³„ì•½ ë‚´ì—­ í™•ì¸

### ë©”ì¸ í™”ë©´ êµ¬ì„±

**Hero Section**:
- **ë°°ê²½**: ìš”ì–‘ì›/ë…¸ì¸ ëŒë´„ ê´€ë ¨ ë”°ëœ»í•˜ê³  í‰í™”ë¡œìš´ í’€ìŠ¤í¬ë¦° ì´ë¯¸ì§€
- **ì¤‘ì•™ ì½˜í…ì¸ **: "ì±—ë´‡ ì—˜ë¹„ì™€ í•¨ê»˜ ê¶ê¸ˆì¦ì„ í•´ê²°í•˜ì„¸ìš”!"
- **CTA ë²„íŠ¼**: "ì—˜ë¹„ì—ê²Œ ì§ˆë¬¸í•˜ê¸°" / "ì±—ë´‡ ì—˜ë¹„ ì‹œì‘í•˜ê¸°"

**ìŠ¤í¬ë¡¤ ì„¹ì…˜** (ê° ì„¹ì…˜ë³„ ë°°ê²½ ì´ë¯¸ì§€ + CTA):
1. **ìš”ì–‘ ì‹œì„¤ ì°¾ê¸°**: "ë‚˜ì—ê²Œ ë§ëŠ” ìš”ì–‘ ì‹œì„¤ì„ ì°¾ì•„ë³´ì„¸ìš”"
2. **ì¼ìë¦¬ ì •ë³´**: "ìš”ì–‘ ë¶„ì•¼ì˜ ìƒˆë¡œìš´ ê¸°íšŒë¥¼ íƒìƒ‰í•˜ì„¸ìš”"  
3. **ì •ë³´ ë§ˆë‹¹**: "ìš”ì–‘ ê´€ë ¨ ìµœì‹  ì •ë³´ì™€ ìœ ìš©í•œ ì§€ì‹ì„ ì–»ìœ¼ì„¸ìš”"
4. **ì½”ë””ë„¤ì´í„° ì„œë¹„ìŠ¤**: "ì „ë¬¸ ì½”ë””ë„¤ì´í„°ì™€ 1:1 ë§ì¶¤ ìƒë‹´ì„ ì‹œì‘í•˜ì„¸ìš”"

### ì±—ë´‡ 'ì—˜ë¹„' ì—°ë™ (ì™¸ë¶€ ê°œë°œ)

* **ê°œë°œ ë‹´ë‹¹**: ë³„ë„ íŒ€ì› (Python + React)
* **ì—°ë™ ë°©ì‹**: REST API + WebSocket í†µì‹ 
* **ìœ„ì¹˜**: ìš°ì¸¡ í•˜ë‹¨ í”Œë¡œíŒ… ë²„íŠ¼ (ìŠ¤í¬ë¡¤ ì‹œì—ë„ ê³ ì •)
* **ë””ìì¸**: ì¹œê·¼í•œ ì±—ë´‡ ìºë¦­í„° ì•„ì´ì½˜
* **ê¸°ëŠ¥**: íŒì—…/ì˜¤ë²„ë ˆì´ í˜•íƒœë¡œ ì‹¤ì‹œê°„ ì±—ë´‡ ìƒë‹´

### ì‚¬ìš©ì ê¶Œí•œ ì‹œìŠ¤í…œ (êµ­ë‚´/í•´ì™¸ êµ¬ë¶„)

#### ì—­í•  êµ¬ë¶„ (5ê°€ì§€)
* **ê´€ë¦¬ì** (ADMIN): ì „ì²´ ì‹œìŠ¤í…œ ê´€ë¦¬ (êµ­ê°€ ë¬´ê´€)
* **ì‹œì„¤íšŒì›** (FACILITY): êµ­ë‚´ ì‹œì„¤ ê´€ë¦¬ì (êµ­ë‚´ë§Œ)
* **ì½”ë””ë„¤ì´í„°** (COORDINATOR): ê¸€ë¡œë²Œ ìƒë‹´ì‚¬ (ë‹¤êµ­ì–´ ì§€ì›)
* **êµ­ë‚´ ì‚¬ìš©ì** (DOMESTIC_USER): ì¼ë°˜ + êµ¬ì§ì í†µí•© (is_job_seeker í”Œë˜ê·¸)
* **í•´ì™¸ ì‚¬ìš©ì** (OVERSEAS_USER): ì¬ì™¸ë™í¬ ì¼ë°˜ + êµ¬ì§ì í†µí•© (is_job_seeker í”Œë˜ê·¸)

#### ê¶Œí•œë³„ ê¸°ëŠ¥ ì ‘ê·¼
* **ë¹„íšŒì›**: ì‹œì„¤ ê²€ìƒ‰, êµ¬ì¸êµ¬ì§ ì—´ëŒ, ì •ë³´ ë§ˆë‹¹, ì½”ë””ë„¤ì´í„° ì†Œê°œ
* **êµ­ë‚´ ì¼ë°˜ì‚¬ìš©ì**: + ë¦¬ë·° ì‘ì„±, ì‹œì„¤ ì¦ê²¨ì°¾ê¸°
* **êµ­ë‚´ êµ¬ì§ì**: + êµ¬ì§ ì§€ì›, ì´ë ¥ì„œ ì—…ë¡œë“œ, ë§¤ì¹­ ê´€ë¦¬
* **í•´ì™¸ ì¼ë°˜ì‚¬ìš©ì**: + ì¬ì™¸ë™í¬ ì„œë¹„ìŠ¤, ì™¸êµë¶€ ì •ë³´
* **í•´ì™¸ êµ¬ì§ì**: + í™”ìƒ ìƒë‹´, êµ­ì œ ë§¤ì¹­, ê·€êµ­ ê³„íš ê´€ë¦¬
* **ì‹œì„¤ íšŒì›**: + ì‹œì„¤ ì •ë³´ ê´€ë¦¬, êµ¬ì¸ê³µê³  ì‘ì„±
* **ì½”ë””ë„¤ì´í„°**: + ìƒë‹´ ê´€ë¦¬, ë‹¤êµ­ì–´ ì„œë¹„ìŠ¤ ì œê³µ
* **ê´€ë¦¬ì**: ì „ì²´ ì‹œìŠ¤í…œ ê´€ë¦¬

---

## ğŸ¥ ìš”ì–‘ì› ì…ì£¼ì ê±´ê°• ìƒíƒœ ë“±ê¸‰ ê´€ë¦¬ ì‹œìŠ¤í…œ

### ëŒë´„ì§€ìˆ˜ ì²´í¬ ì‹œìŠ¤í…œ (KBë¼ì´í”„ìƒëª… ì°¸ì¡°)

#### **ê±´ê°• ìƒíƒœ í‰ê°€ í•­ëª© (4ê°œ í•µì‹¬ ì˜ì—­)**

**1. ê±·ê¸° í™œë™ ëŠ¥ë ¥ (care_mobility)**
```yaml
ë“±ê¸‰ 1 (ë…ë¦½): í˜¼ìì„œ ê°€ëŠ¥í•´ìš”
ë“±ê¸‰ 2 (ë¶€ë¶„ë„ì›€): ë¶€ë¶„ì ì¸ ë„ì›€ì´ í•„ìš”í•´ìš” (íƒ€ì¸ì˜ ë¶€ì¶•, ì§€íŒ¡ì´ ì´ìš© ë“±)
ë“±ê¸‰ 3 (ì™„ì „ë„ì›€): í˜¼ìì„œëŠ” ë³´í–‰ì´ ì–´ë ¤ì›Œìš” (íœ ì²´ì–´ ì‚¬ìš© ë“±)
```

**2. ì‹ì‚¬ í™œë™ ëŠ¥ë ¥ (care_eating)**
```yaml
ë“±ê¸‰ 1 (ë…ë¦½): í˜¼ìì„œ ê°€ëŠ¥í•´ìš”
ë“±ê¸‰ 2 (ë¶€ë¶„ë„ì›€): ë¶€ë¶„ì ì¸ ë„ì›€ì´ í•„ìš”í•´ìš” (ë°˜ì°¬ ì§‘ê¸°, ìë¥´ê¸° ë“± ì¼ë¶€ ë„ì›€)
ë“±ê¸‰ 3 (ì™„ì „ë„ì›€): ì™„ì „í•œ ë„ì›€ì´ í•„ìš”í•´ìš” (ìŒì‹ì„ ë–  ë¨¹ì—¬ì¤Œ)
```

**3. ë°°ë³€ í™œë™ ëŠ¥ë ¥ (care_toilet)**
```yaml
ë“±ê¸‰ 1 (ë…ë¦½): í˜¼ìì„œ í™”ì¥ì‹¤ì„ ì´ìš©í•  ìˆ˜ ìˆì–´ìš”
ë“±ê¸‰ 2 (ë¶€ë¶„ë„ì›€): í™”ì¥ì‹¤ ì´ìš© ì‹œ ë¶€ë¶„ì ì¸ ë„ì›€ì´ í•„ìš”í•´ìš”
ë“±ê¸‰ 3 (ì™„ì „ë„ì›€): ì™„ì „í•œ ë„ì›€ì´ í•„ìš”í•´ìš” (ê°„ì´ë³€ê¸°, ê¸°ì €ê·€ ì°©ìš© ë“±)
```

**4. ì˜ì‚¬ì†Œí†µ ëŠ¥ë ¥ (care_communication)**
```yaml
ë“±ê¸‰ 1 (ì •ìƒ): ì •ìƒì ìœ¼ë¡œ ê°€ëŠ¥í•´ìš”
ë“±ê¸‰ 2 (ë¶€ë¶„ì œí•œ): ë•Œë•Œë¡œ ì–´ë ¤ì›Œìš” (í™”ì¥ì‹¤ ì´ìš©ì˜ì‚¬ í‘œí˜„ ê°€ëŠ¥)
ë“±ê¸‰ 3 (ì‹¬ê°ì œí•œ): ì†Œí†µì´ ì–´ë ¤ì›Œìš” (í™”ì¥ì‹¤ ì´ìš©ì˜ì‚¬ í‘œí˜„ ì˜ ëª»í•¨)
```

#### **ì¢…í•© ëŒë´„ë“±ê¸‰ ì‚°ì¶œ ì‹œìŠ¤í…œ**

**A. ì¥ê¸°ìš”ì–‘ë³´í—˜ ë“±ê¸‰ ê¸°ë°˜**
```yaml
1ë“±ê¸‰: ê°€ì¥ ì¤‘ì¦ (95ì  ì´ìƒ)
2ë“±ê¸‰: ì¤‘ì¦ (75ì ~94ì )
3ë“±ê¸‰: ì¤‘ë“±ì¦ (60ì ~74ì )
4ë“±ê¸‰: ê²½ì¦ (51ì ~59ì )
5ë“±ê¸‰: ê²½ì¦ (45ì ~50ì )
ì¸ì§€ì§€ì›ë“±ê¸‰: ì¹˜ë§¤ íŠ¹í™” (45ì  ë¯¸ë§Œ, ì¸ì§€ê¸°ëŠ¥ ì €í•˜)
```

**B. ëŒë´„ëŒ€ìƒì ìƒíƒœ ë¶„ë¥˜**
```yaml
ìƒíƒœ 1: 6ê°œì›” ì´í•˜ì˜ ê¸°ëŒ€ìˆ˜ëª… ìƒíƒœ (í˜¸ìŠ¤í”¼ìŠ¤ ì¼€ì–´)
ìƒíƒœ 2: ì§ˆë³‘ì´ íšŒë³µí•˜ê¸° ì–´ë ¤ìš´ ìƒí™©ìœ¼ë¡œ ìˆ˜ëª…ì´ ì–¼ë§ˆ ë‚¨ì§€ ì•ŠìŒ
ìƒíƒœ 3: ì™„ì „íˆ íƒ€ì¸ ì˜ì¡´ì ì¸ ìƒíƒœì´ë‚˜ ì‚¬ë§ìœ„í—˜ì´ ë†’ì§€ ì•ŠìŒ
ìƒíƒœ 4: í•´ë‹¹ì‚¬í•­ ì—†ìŒ (ì¼ë°˜ ìš”ì–‘)
```

#### **ìš”ì–‘ ì‹œì„¤ ë“±ê¸‰ ë° íƒ€ì… ë¶„ë¥˜ ì‹œìŠ¤í…œ**

**A. ì‹œì„¤ íƒ€ì…ë³„ ë¶„ë¥˜**
```yaml
ì£¼ê±°ë³µì§€ì‹œì„¤:
  - ì–‘ë¡œì‹œì„¤: 65ì„¸ ì´ìƒ ë…¸ì¸ ê³µë™ìƒí™œ (ë“±ê¸‰ ë¶ˆí•„ìš”)
  - ë…¸ì¸ê³µë™ìƒí™œê°€ì •: ì†Œê·œëª¨ ê³µë™ì£¼íƒ (5-9ëª…)
  - ë…¸ì¸ë³µì§€ì£¼íƒ: ë…ë¦½ì£¼ê±° + ë³µì§€ì„œë¹„ìŠ¤

ì˜ë£Œë³µì§€ì‹œì„¤:
  - ë…¸ì¸ìš”ì–‘ì‹œì„¤: ì¥ê¸°ìš”ì–‘ 1-5ë“±ê¸‰ ëŒ€ìƒ (24ì‹œê°„ ì¼€ì–´)
  - ë…¸ì¸ìš”ì–‘ê³µë™ìƒí™œê°€ì •: ì†Œê·œëª¨ ìš”ì–‘ì‹œì„¤ (5-9ëª…)
  - ë‹¨ê¸°ë³´í˜¸ì‹œì„¤: ì„ì‹œë³´í˜¸ ì„œë¹„ìŠ¤ (ìµœëŒ€ 15ì¼)

ì˜ë£Œê¸°ê´€:
  - ìš”ì–‘ë³‘ì›: ì˜ë£Œì§„ ìƒì£¼, ì˜ë£Œì„œë¹„ìŠ¤ ì œê³µ
  - ë…¸ì¸ì „ë¬¸ë³‘ì›: ë…¸ì¸ íŠ¹í™” ì˜ë£Œì„œë¹„ìŠ¤
  - ë…¸ì¸ìš”ì–‘ë³‘ì›: ì¥ê¸°ì…ì› + ìš”ì–‘ì„œë¹„ìŠ¤

ì¬ê°€ë³µì§€ì‹œì„¤:
  - ë°©ë¬¸ìš”ì–‘ì„œë¹„ìŠ¤: ê°€ì • ë°©ë¬¸ ì¼€ì–´
  - ì£¼ì•¼ê°„ë³´í˜¸ì„œë¹„ìŠ¤: ë‚®/ë°¤ ì„ì‹œë³´í˜¸
  - ë‹¨ê¸°ë³´í˜¸ì„œë¹„ìŠ¤: ê°€ì¡± íœ´ì‹ ì§€ì›
```

**B. ì‹œì„¤ ë“±ê¸‰ ë¶„ë¥˜ (ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì› ê¸°ì¤€)**
```yaml
Aë“±ê¸‰ (ìµœìš°ìˆ˜):
  - í‰ê°€ì ìˆ˜: 90ì  ì´ìƒ
  - íŠ¹ì§•: ìµœê³  ìˆ˜ì¤€ì˜ ì¼€ì–´ í’ˆì§ˆ, ì˜ë£Œì§„ ìš°ìˆ˜, ì‹œì„¤ í˜„ëŒ€í™”
  - ëŒ€ìƒ: 1-2ë“±ê¸‰ ì¤‘ì¦í™˜ì ì „ë¬¸ ì¼€ì–´

Bë“±ê¸‰ (ìš°ìˆ˜):
  - í‰ê°€ì ìˆ˜: 80-89ì   
  - íŠ¹ì§•: ì–‘ì§ˆì˜ ì¼€ì–´ ì„œë¹„ìŠ¤, ì•ˆì •ì  ìš´ì˜
  - ëŒ€ìƒ: 2-3ë“±ê¸‰ ì¤‘ë“±ë„ í™˜ì ì í•©

Cë“±ê¸‰ (ë³´í†µ):
  - í‰ê°€ì ìˆ˜: 70-79ì 
  - íŠ¹ì§•: ê¸°ë³¸ ì¼€ì–´ ì„œë¹„ìŠ¤ ì œê³µ, í‘œì¤€ì  ìš´ì˜
  - ëŒ€ìƒ: 3-5ë“±ê¸‰ ê²½ì¦í™˜ì ì í•©

Dë“±ê¸‰ (ê°œì„ í•„ìš”):
  - í‰ê°€ì ìˆ˜: 60-69ì 
  - íŠ¹ì§•: ì¼€ì–´ í’ˆì§ˆ ê°œì„  í•„ìš”, ìš´ì˜ìƒ ì´ìŠˆ
  - ì£¼ì˜: ë§¤ì¹­ ì‹œ ì‹ ì¤‘ ê²€í†  í•„ìš”

Eë“±ê¸‰ (ë¶€ì í•©):
  - í‰ê°€ì ìˆ˜: 60ì  ë¯¸ë§Œ
  - íŠ¹ì§•: ì‹¬ê°í•œ í’ˆì§ˆ ë¬¸ì œ, í–‰ì •ì²˜ë¶„ ì´ë ¥
  - ì œì™¸: ë§¤ì¹­ ëŒ€ìƒì—ì„œ ì œì™¸ ê¶Œì¥
```

**C. ì „ë¬¸ íŠ¹í™” ì‹œì„¤ ë¶„ë¥˜**
```yaml
ì¹˜ë§¤ ì „ë¬¸ ì‹œì„¤:
  - ì¹˜ë§¤ì•ˆì‹¬ì„¼í„° ì—°ê³„ ì‹œì„¤
  - ì¸ì§€ì§€ì›ë“±ê¸‰ ì „ë¬¸ ì¼€ì–´
  - ì¹˜ë§¤ í–‰ë™ì¦ìƒ ê´€ë¦¬ í”„ë¡œê·¸ë¨

ì¤‘ì¦í™˜ì ì „ë¬¸ ì‹œì„¤:
  - 1-2ë“±ê¸‰ ì „ë¬¸ ì¼€ì–´
  - ì˜ë£Œì§„ 24ì‹œê°„ ìƒì£¼
  - ì¤‘í™˜ìì‹¤ê¸‰ ì¼€ì–´ ì‹œì„¤

ì¬í™œ ì „ë¬¸ ì‹œì„¤:
  - ë¬¼ë¦¬ì¹˜ë£Œ, ì‘ì—…ì¹˜ë£Œ ì „ë¬¸
  - ì¬í™œì˜í•™ê³¼ ì „ë¬¸ì˜ ìƒì£¼
  - ìš´ë™ê¸°ëŠ¥ ê°œì„  í”„ë¡œê·¸ë¨

í˜¸ìŠ¤í”¼ìŠ¤ ì „ë¬¸ ì‹œì„¤:
  - ìƒì• ë§ê¸° ì¼€ì–´ ì „ë¬¸
  - ê°€ì¡± ìƒë‹´ ë° ì§€ì›
  - ì¢…êµì /ì •ì‹ ì  ì¼€ì–´
```

**D. ì‹œì„¤ ì„ íƒ ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜**
```java
@Entity
public class FacilityProfile {
    @Id
    private Long facilityId;
    
    // ê¸°ë³¸ ì •ë³´
    private String facilityName;
    private String facilityType;           // "ì–‘ë¡œì‹œì„¤", "ë…¸ì¸ìš”ì–‘ì‹œì„¤", "ìš”ì–‘ë³‘ì›" ë“±
    private String facilityGrade;          // "A", "B", "C", "D", "E"
    private Integer evaluationScore;       // ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì› ì ìˆ˜
    
    // ì¼€ì–´ ê°€ëŠ¥ ë“±ê¸‰
    @ElementCollection
    private Set<Integer> acceptableCareGrades;  // [1,2,3,4,5,6]
    
    // ì „ë¬¸ ë¶„ì•¼
    @ElementCollection
    private Set<String> specializations;       // ["dementia", "medical", "rehabilitation"]
    
    // ì‹œì„¤ ê·œëª¨ ë° ì •ì›
    private Integer totalCapacity;             // ì´ ì •ì›
    private Integer currentOccupancy;          // í˜„ì¬ ì…ì£¼ì ìˆ˜
    private Integer availableBeds;             // ê°€ìš© ì¹¨ëŒ€ ìˆ˜
    
    // ì˜ë£Œì§„ ì •ë³´
    private Boolean hasDoctor;                 // ì˜ì‚¬ ìƒì£¼ ì—¬ë¶€
    private Boolean hasNurse24h;               // 24ì‹œê°„ ê°„í˜¸ì‚¬ ìƒì£¼
    private Integer nurseCount;                // ê°„í˜¸ì‚¬ ìˆ˜
    private Integer caregiverCount;            // ìš”ì–‘ë³´í˜¸ì‚¬ ìˆ˜
    
    // ì‹œì„¤ íŠ¹ì§•
    private Boolean hasElevator;               // ì—˜ë¦¬ë² ì´í„° ë³´ìœ 
    private Boolean hasEmergencySystem;        // ì‘ê¸‰ì‹œìŠ¤í…œ êµ¬ë¹„
    private Boolean hasRehabilitationRoom;     // ì¬í™œì‹¤ ë³´ìœ 
    private Boolean hasDementiaProgram;        // ì¹˜ë§¤ í”„ë¡œê·¸ë¨ ìš´ì˜
    
    // ìœ„ì¹˜ ë° ì ‘ê·¼ì„±
    private String region;                     // ì§€ì—­ (ì‹œ/ë„)
    private String district;                   // êµ¬/êµ°
    private Double latitude;                   // ìœ„ë„
    private Double longitude;                  // ê²½ë„
    private Boolean nearSubway;                // ì§€í•˜ì²  ì ‘ê·¼ì„±
    private Boolean nearHospital;              // ë³‘ì› ê·¼ì ‘ì„±
    
    // ë¹„ìš© ì •ë³´
    private Integer monthlyBasicFee;           // ì›” ê¸°ë³¸ë£Œ
    private Integer admissionFee;              // ì…ì†Œê¸ˆ
    private Boolean acceptsLtci;               // ì¥ê¸°ìš”ì–‘ë³´í—˜ ì ìš©
    
    private LocalDateTime lastUpdated;
}

@Service
public class FacilityMatchingService {
    
    public List<FacilityMatch> findCompatibleFacilities(HealthAssessment assessment, 
                                                       FacilityPreference preference) {
        
        CareGrade careGrade = assessment.getOverallCareGrade();
        
        return facilityRepository.findAll().stream()
            .filter(facility -> isBasicCompatible(facility, careGrade))
            .filter(facility -> hasAvailability(facility))
            .filter(facility -> meetsQualityStandard(facility))
            .map(facility -> calculateFacilityMatch(facility, assessment, preference))
            .sorted(Comparator.comparing(FacilityMatch::getMatchScore).reversed())
            .limit(20)
            .collect(Collectors.toList());
    }
    
    private boolean isBasicCompatible(FacilityProfile facility, CareGrade careGrade) {
        // 1. ì¼€ì–´ ë“±ê¸‰ í˜¸í™˜ì„± ì²´í¬
        boolean gradeCompatible = facility.getAcceptableCareGrades().contains(careGrade.getLevel());
        
        // 2. ì‹œì„¤ íƒ€ì…ë³„ ì¼€ì–´ ë“±ê¸‰ ì œí•œ
        boolean typeCompatible = checkFacilityTypeCompatibility(facility.getFacilityType(), careGrade);
        
        // 3. ìµœì†Œ í’ˆì§ˆ ê¸°ì¤€ (Dë“±ê¸‰ ì´ìƒ)
        boolean qualityAcceptable = !"E".equals(facility.getFacilityGrade());
        
        return gradeCompatible && typeCompatible && qualityAcceptable;
    }
    
    private boolean checkFacilityTypeCompatibility(String facilityType, CareGrade careGrade) {
        switch (facilityType) {
            case "ì–‘ë¡œì‹œì„¤":
                return careGrade.getLevel() >= 4; // 4-5ë“±ê¸‰ë§Œ ê°€ëŠ¥
                
            case "ë…¸ì¸ìš”ì–‘ì‹œì„¤":
                return true; // ëª¨ë“  ë“±ê¸‰ ê°€ëŠ¥
                
            case "ìš”ì–‘ë³‘ì›":
                return careGrade.getLevel() <= 3; // 1-3ë“±ê¸‰ ê¶Œì¥
                
            case "ë…¸ì¸ìš”ì–‘ê³µë™ìƒí™œê°€ì •":
                return careGrade.getLevel() >= 3; // 3-5ë“±ê¸‰ ì í•©
                
            case "ì¹˜ë§¤ì „ë¬¸ì‹œì„¤":
                return careGrade.getLevel() == 6; // ì¸ì§€ì§€ì›ë“±ê¸‰
                
            default:
                return true;
        }
    }
    
    private FacilityMatch calculateFacilityMatch(FacilityProfile facility, 
                                               HealthAssessment assessment, 
                                               FacilityPreference preference) {
        double score = 0.0;
        
        // 1. ì‹œì„¤ ë“±ê¸‰ ì ìˆ˜ (30%)
        score += calculateFacilityGradeScore(facility) * 0.3;
        
        // 2. ì „ë¬¸ì„± ë§¤ì¹­ ì ìˆ˜ (25%)
        score += calculateSpecializationScore(facility, assessment) * 0.25;
        
        // 3. ì˜ë£Œì§„ ì í•©ì„± ì ìˆ˜ (20%)
        score += calculateMedicalStaffScore(facility, assessment) * 0.2;
        
        // 4. ìœ„ì¹˜ ì ‘ê·¼ì„± ì ìˆ˜ (15%)
        score += calculateLocationScore(facility, preference) * 0.15;
        
        // 5. ë¹„ìš© ì í•©ì„± ì ìˆ˜ (10%)
        score += calculateCostScore(facility, preference) * 0.1;
        
        String explanation = generateFacilityMatchExplanation(facility, assessment, score);
        
        return new FacilityMatch(facility, score, explanation);
    }
    
    private double calculateFacilityGradeScore(FacilityProfile facility) {
        switch (facility.getFacilityGrade()) {
            case "A": return 5.0;
            case "B": return 4.0;
            case "C": return 3.0;
            case "D": return 2.0;
            case "E": return 0.0;
            default: return 2.5;
        }
    }
    
    private double calculateSpecializationScore(FacilityProfile facility, HealthAssessment assessment) {
        double score = 0.0;
        Set<String> specializations = facility.getSpecializations();
        
        // ì¹˜ë§¤ ì „ë¬¸ì„±
        if (assessment.getLtciGrade() == 6 && specializations.contains("dementia")) {
            score += 2.0;
        }
        
        // ì˜ë£Œ ì „ë¬¸ì„± (1-2ë“±ê¸‰)
        if (assessment.getOverallCareGrade().getLevel() <= 2 && specializations.contains("medical")) {
            score += 2.0;
        }
        
        // ì¬í™œ ì „ë¬¸ì„±
        if (assessment.getMobilityLevel() >= 2 && specializations.contains("rehabilitation")) {
            score += 1.5;
        }
        
        // í˜¸ìŠ¤í”¼ìŠ¤ ì „ë¬¸ì„±
        if (assessment.getCareTargetStatus() <= 2 && specializations.contains("hospice")) {
            score += 1.5;
        }
        
        return Math.min(score, 5.0);
    }
    
    private double calculateMedicalStaffScore(FacilityProfile facility, HealthAssessment assessment) {
        double score = 2.5; // ê¸°ë³¸ ì ìˆ˜
        
        CareGrade careGrade = assessment.getOverallCareGrade();
        
        // ì¤‘ì¦í™˜ì(1-2ë“±ê¸‰)ëŠ” ì˜ë£Œì§„ í•„ìˆ˜
        if (careGrade.getLevel() <= 2) {
            if (facility.getHasDoctor()) score += 1.5;
            if (facility.getHasNurse24h()) score += 1.0;
        }
        
        // ê°„í˜¸ì‚¬ ëŒ€ í™˜ì ë¹„ìœ¨
        double nurseRatio = (double) facility.getNurseCount() / facility.getCurrentOccupancy();
        if (nurseRatio >= 0.1) score += 0.5; // 10:1 ë¹„ìœ¨ ì´ìƒ
        
        return Math.min(score, 5.0);
    }
}
```

#### **ì½”ë””ë„¤ì´í„° ì‹œì„¤ ë§¤ì¹­ ì§€ì› ì‹œìŠ¤í…œ**

**ì½”ë””ë„¤ì´í„° ì—­í• : ì‹œì„¤ ì„ íƒ ì»¨ì„¤íŒ… ë° ì…ì£¼ ì¤‘ê°œ**
```yaml
ì½”ë””ë„¤ì´í„°ì˜ ì‹œì„¤ ê´€ë ¨ ì—…ë¬´:
  - ê³ ê° ìš”êµ¬ì‚¬í•­ ë¶„ì„ ë° ì í•© ì‹œì„¤ ì¶”ì²œ
  - ì‹œì„¤ ê²¬í•™ ë™í–‰ ë° ì „ë¬¸ì  í‰ê°€
  - ì‹œì„¤-í™˜ì ë§¤ì¹­ ì í•©ì„± íŒë‹¨  
  - ì…ì£¼ ê³„ì•½ í˜‘ìƒ ë° í–‰ì • ì§€ì›
  - ì…ì£¼ í›„ ì ì‘ ëª¨ë‹ˆí„°ë§

ì‹œì„¤ ê´€ë¦¬ëŠ” ì‹œì„¤ ë‚´ë¶€ ì§ì›:
  - ìš”ì–‘ë³´í˜¸ì‚¬: ì¼ìƒ ì¼€ì–´ ë‹´ë‹¹
  - ê°„í˜¸ì‚¬: ì˜ë£Œ ì¼€ì–´ ë‹´ë‹¹
  - ì‹œì„¤ì¥: ìš´ì˜ ê´€ë¦¬ ë‹´ë‹¹
```

**A. ì½”ë””ë„¤ì´í„° ì‹œì„¤ ì „ë¬¸ì„± ì„¤ì •**
```java
@Entity
public class CoordinatorFacilityExpertise {
    @Id
    private Long id;
    private String coordinatorId;
    
    // ì‹œì„¤ íƒ€ì…ë³„ ì „ë¬¸ì„±
    @ElementCollection
    private Set<String> expertFacilityTypes;     // ["ë…¸ì¸ìš”ì–‘ì‹œì„¤", "ìš”ì–‘ë³‘ì›", "ì¹˜ë§¤ì „ë¬¸ì‹œì„¤"]
    
    // ì‹œì„¤ ë“±ê¸‰ë³„ ê²½í—˜
    @ElementCollection
    private Map<String, Integer> facilityGradeExperience; // {"A": 5, "B": 12, "C": 8}
    
    // ì§€ì—­ë³„ ì‹œì„¤ ë„¤íŠ¸ì›Œí¬
    @ElementCollection
    private Set<String> familiarRegions;         // ["ì„œìš¸ ê°•ë‚¨êµ¬", "ê²½ê¸° ì„±ë‚¨ì‹œ"]
    
    // í˜‘ë ¥ ì‹œì„¤ ëª©ë¡
    @ElementCollection
    private Set<Long> partnerFacilities;         // í˜‘ë ¥ ê´€ê³„ ì‹œì„¤ ID
    
    // ì‹œì„¤ í‰ê°€ ëŠ¥ë ¥
    private Boolean canEvaluateMedicalCare;      // ì˜ë£Œ ì¼€ì–´ í‰ê°€ ê°€ëŠ¥
    private Boolean canEvaluateFacilities;       // ì‹œì„¤ í™˜ê²½ í‰ê°€ ê°€ëŠ¥
    private Boolean canNegotiateContracts;       // ê³„ì•½ í˜‘ìƒ ê°€ëŠ¥
    
    // ì‹œì„¤ ë§¤ì¹­ ì„±ê³¼
    private Integer successfulFacilityMatches;   // ì„±ê³µí•œ ì‹œì„¤ ë§¤ì¹­ ìˆ˜
    private Double facilityMatchSatisfaction;    // ì‹œì„¤ ë§¤ì¹­ ë§Œì¡±ë„
    private Integer facilityVisitCount;          // ì‹œì„¤ ë°©ë¬¸ íšŸìˆ˜
}
```

**B. ì‹œì„¤ ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ (ì½”ë””ë„¤ì´í„° ê´€ì )**
```java
@Service
public class CoordinatorFacilityRecommendationService {
    
    public List<FacilityRecommendation> recommendFacilities(
        String coordinatorId,
        HealthAssessment assessment, 
        FamilyPreference preference) {
        
        Coordinator coordinator = coordinatorRepository.findById(coordinatorId);
        CoordinatorFacilityExpertise expertise = coordinator.getFacilityExpertise();
        
        // 1. ì½”ë””ë„¤ì´í„° ì „ë¬¸ ë¶„ì•¼ ê¸°ë°˜ ì‹œì„¤ í•„í„°ë§
        List<FacilityProfile> candidateFacilities = findFacilitiesInExpertise(expertise, assessment);
        
        // 2. ì½”ë””ë„¤ì´í„° ë„¤íŠ¸ì›Œí¬ ì‹œì„¤ ìš°ì„  ì¶”ì²œ
        List<FacilityRecommendation> recommendations = candidateFacilities.stream()
            .map(facility -> createRecommendation(coordinator, facility, assessment, preference))
            .sorted(Comparator.comparing(FacilityRecommendation::getRecommendationScore).reversed())
            .limit(10)
            .collect(Collectors.toList());
            
        return recommendations;
    }
    
    private FacilityRecommendation createRecommendation(
        Coordinator coordinator,
        FacilityProfile facility,
        HealthAssessment assessment,
        FamilyPreference preference) {
        
        double score = 0.0;
        
        // 1. ê¸°ë³¸ ì‹œì„¤-í™˜ì ë§¤ì¹­ ì ìˆ˜ (40%)
        score += calculateBasicMatchScore(facility, assessment) * 0.4;
        
        // 2. ì½”ë””ë„¤ì´í„° ì „ë¬¸ì„± ë§¤ì¹­ ì ìˆ˜ (25%)
        score += calculateCoordinatorExpertiseScore(coordinator, facility) * 0.25;
        
        // 3. ê³¼ê±° ë§¤ì¹­ ì„±ê³µë¥  ì ìˆ˜ (20%)
        score += calculateHistoricalSuccessScore(coordinator, facility) * 0.2;
        
        // 4. ê°€ì¡± ì„ í˜¸ë„ ë§¤ì¹­ ì ìˆ˜ (15%)
        score += calculateFamilyPreferenceScore(facility, preference) * 0.15;
        
        String reason = generateRecommendationReason(coordinator, facility, assessment, score);
        
        return new FacilityRecommendation(facility, score, reason, coordinator.getId());
    }
    
    private double calculateCoordinatorExpertiseScore(Coordinator coordinator, FacilityProfile facility) {
        CoordinatorFacilityExpertise expertise = coordinator.getFacilityExpertise();
        double score = 2.5; // ê¸°ë³¸ ì ìˆ˜
        
        // ì‹œì„¤ íƒ€ì… ì „ë¬¸ì„±
        if (expertise.getExpertFacilityTypes().contains(facility.getFacilityType())) {
            score += 1.5;
        }
        
        // ì‹œì„¤ ë“±ê¸‰ ê²½í—˜
        Integer gradeExperience = expertise.getFacilityGradeExperience()
            .get(facility.getFacilityGrade());
        if (gradeExperience != null && gradeExperience > 0) {
            score += Math.min(gradeExperience * 0.1, 1.0); // ê²½í—˜ì¹˜ ë°˜ì˜
        }
        
        // ì§€ì—­ ì¹œìˆ™ë„
        String facilityRegion = facility.getRegion() + " " + facility.getDistrict();
        if (expertise.getFamiliarRegions().contains(facilityRegion)) {
            score += 0.5;
        }
        
        // í˜‘ë ¥ ì‹œì„¤ ì—¬ë¶€
        if (expertise.getPartnerFacilities().contains(facility.getFacilityId())) {
            score += 0.5; // í˜‘ë ¥ ì‹œì„¤ ê°€ì‚°ì 
        }
        
        return Math.min(score, 5.0);
    }
}
```

**C. ì‹œì„¤ ê²¬í•™ ë° í‰ê°€ ì§€ì›**
```java
@Entity
public class FacilityVisitPlan {
    @Id
    private Long id;
    private String coordinatorId;
    private String clientId;
    
    // ê²¬í•™ ê³„íš
    @ElementCollection
    private List<Long> plannedFacilities;        // ê²¬í•™ ì˜ˆì • ì‹œì„¤
    private LocalDateTime visitDate;
    private String visitPurpose;                  // "ì´ˆê¸°ìƒë‹´", "ìµœì¢…ì„ íƒ", "ì¬í‰ê°€"
    
    // í‰ê°€ ì²´í¬ë¦¬ìŠ¤íŠ¸
    private String medicalCareEvaluation;         // ì˜ë£Œ ì¼€ì–´ í‰ê°€
    private String livingEnvironmentEvaluation;   // ìƒí™œ í™˜ê²½ í‰ê°€
    private String staffQualityEvaluation;        // ì§ì› í’ˆì§ˆ í‰ê°€
    private String costEvaluation;                // ë¹„ìš© ì ì •ì„± í‰ê°€
    
    // ê°€ì¡± í”¼ë“œë°±
    private String familyFeedback;
    private Integer familySatisfactionScore;      // 1-5ì 
    
    private LocalDateTime createdAt;
}

@Service
public class FacilityVisitSupportService {
    
    public FacilityVisitPlan planFacilityVisits(
        String coordinatorId,
        String clientId, 
        List<FacilityRecommendation> recommendations) {
        
        // ìƒìœ„ 3-5ê°œ ì‹œì„¤ ì„ ë³„
        List<Long> topFacilities = recommendations.stream()
            .limit(5)
            .map(rec -> rec.getFacility().getFacilityId())
            .collect(Collectors.toList());
            
        FacilityVisitPlan plan = new FacilityVisitPlan();
        plan.setCoordinatorId(coordinatorId);
        plan.setClientId(clientId);
        plan.setPlannedFacilities(topFacilities);
        plan.setVisitPurpose("ì´ˆê¸°ìƒë‹´");
        
        return facilityVisitPlanRepository.save(plan);
    }
    
    public FacilityEvaluationReport evaluateFacility(
        String coordinatorId,
        Long facilityId,
        HealthAssessment assessment) {
        
        FacilityProfile facility = facilityRepository.findById(facilityId);
        Coordinator coordinator = coordinatorRepository.findById(coordinatorId);
        
        FacilityEvaluationReport report = new FacilityEvaluationReport();
        
        // 1. ì¼€ì–´ ì í•©ì„± í‰ê°€
        report.setCareCompatibilityScore(
            evaluateCareCompatibility(facility, assessment));
        
        // 2. ì‹œì„¤ í™˜ê²½ í‰ê°€
        report.setEnvironmentScore(
            evaluateEnvironment(facility, assessment));
            
        // 3. ë¹„ìš© ì ì •ì„± í‰ê°€
        report.setCostEffectivenessScore(
            evaluateCostEffectiveness(facility, assessment));
            
        // 4. ì¢…í•© ì¶”ì²œë„
        report.setOverallRecommendation(
            calculateOverallRecommendation(report));
            
        return report;
    }
}
```

**D. ì…ì£¼ ì¤‘ê°œ ë° ê³„ì•½ ì§€ì›**
```java
@Entity
public class FacilityAdmissionSupport {
    @Id
    private Long id;
    private String coordinatorId;
    private String clientId;
    private Long selectedFacilityId;
    
    // ì…ì£¼ ì ˆì°¨ ì§„í–‰ ìƒí™©
    private String admissionStatus;               // "ìƒë‹´ì™„ë£Œ", "ê³„ì•½í˜‘ìƒ", "ì„œë¥˜ì¤€ë¹„", "ì…ì£¼ì™„ë£Œ"
    
    // ê³„ì•½ í˜‘ìƒ ë‚´ìš©
    private Integer negotiatedMonthlyFee;         // í˜‘ìƒëœ ì›” ì´ìš©ë£Œ
    private Integer negotiatedAdmissionFee;       // í˜‘ìƒëœ ì…ì†Œê¸ˆ
    private String specialTerms;                  // íŠ¹ë³„ ì•½ì • ì‚¬í•­
    
    // í•„ìš” ì„œë¥˜ ì²´í¬ë¦¬ìŠ¤íŠ¸
    private Boolean healthCertificateReady;       // ê±´ê°•ì§„ë‹¨ì„œ
    private Boolean ltciCertificateReady;         // ì¥ê¸°ìš”ì–‘ì¸ì •ì„œ
    private Boolean insuranceReady;               // ë³´í—˜ ê°€ì… í™•ì¸
    private Boolean emergencyContactReady;        // ì‘ê¸‰ì—°ë½ì²˜
    
    // ì…ì£¼ ì¤€ë¹„ ì§€ì›
    private String personalItemsList;             // ê°œì¸ ë¬¼í’ˆ ëª©ë¡
    private LocalDateTime estimatedAdmissionDate; // ì˜ˆìƒ ì…ì£¼ì¼
    private String specialCareInstructions;       // íŠ¹ë³„ ì¼€ì–´ ì§€ì‹œì‚¬í•­
    
    private LocalDateTime createdAt;
    private LocalDateTime lastUpdated;
}

@Component
public class AdmissionSupportWorkflow {
    
    public void initiateAdmissionProcess(
        String coordinatorId,
        String clientId,
        Long facilityId) {
        
        FacilityAdmissionSupport support = new FacilityAdmissionSupport();
        support.setCoordinatorId(coordinatorId);
        support.setClientId(clientId);
        support.setSelectedFacilityId(facilityId);
        support.setAdmissionStatus("ìƒë‹´ì™„ë£Œ");
        
        // ìë™ìœ¼ë¡œ í•„ìš” ì„œë¥˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ ìƒì„±
        initializeDocumentChecklist(support);
        
        // ì‹œì„¤ê³¼ ì´ˆê¸° í˜‘ìƒ ì¼ì • ì¡°ìœ¨
        scheduleInitialNegotiation(support);
        
        admissionSupportRepository.save(support);
    }
    
    public void updateAdmissionProgress(Long supportId, String newStatus) {
        FacilityAdmissionSupport support = admissionSupportRepository.findById(supportId);
        support.setAdmissionStatus(newStatus);
        support.setLastUpdated(LocalDateTime.now());
        
        // ìƒíƒœë³„ ìë™ ì‘ì—… ì‹¤í–‰
        switch (newStatus) {
            case "ê³„ì•½í˜‘ìƒ":
                prepareNegotiationMaterials(support);
                break;
            case "ì„œë¥˜ì¤€ë¹„":
                sendDocumentReminders(support);
                break;
            case "ì…ì£¼ì™„ë£Œ":
                scheduleFollowUpVisit(support);
                break;
        }
        
        admissionSupportRepository.save(support);
    }
}
```

**E. ì…ì£¼ í›„ ì ì‘ ëª¨ë‹ˆí„°ë§**
```java
@Entity
public class PostAdmissionMonitoring {
    @Id
    private Long id;
    private String coordinatorId;
    private String clientId;
    private Long facilityId;
    
    // ëª¨ë‹ˆí„°ë§ ì¼ì •
    private LocalDateTime admissionDate;
    private LocalDateTime firstCheckDate;         // 1ì£¼ í›„
    private LocalDateTime monthlyCheckDate;       // 1ê°œì›” í›„
    private LocalDateTime quarterlyCheckDate;     // 3ê°œì›” í›„
    
    // ì ì‘ ìƒíƒœ í‰ê°€
    private Integer clientSatisfactionScore;      // ì…ì£¼ì ë§Œì¡±ë„ (1-5)
    private Integer familySatisfactionScore;      // ê°€ì¡± ë§Œì¡±ë„ (1-5)
    private Integer facilitySatisfactionScore;    // ì‹œì„¤ ë§Œì¡±ë„ (1-5)
    
    // ì´ìŠˆ ë° ê°œì„ ì‚¬í•­
    private String identifiedIssues;             // ë°œê²¬ëœ ë¬¸ì œì 
    private String improvementActions;           // ê°œì„  ì¡°ì¹˜ì‚¬í•­
    private Boolean needsRemediation;            // ì¤‘ì¬ í•„ìš” ì—¬ë¶€
    
    // ì„œë¹„ìŠ¤ ì§€ì†ì„±
    private Boolean serviceCompleted;            // ì„œë¹„ìŠ¤ ì™„ë£Œ ì—¬ë¶€
    private LocalDateTime serviceEndDate;        // ì„œë¹„ìŠ¤ ì¢…ë£Œì¼
    private String completionReason;             // ì™„ë£Œ ì‚¬ìœ 
}
```

#### **AI ê¸°ë°˜ ì¢…í•© ì¼€ì–´ ë“±ê¸‰ ì‚°ì¶œ**

**ì¼€ì–´ ë“±ê¸‰ ê³„ì‚° ë¡œì§**
```java
public class CareGradeCalculator {
    
    public CareGrade calculateComprehensiveGrade(HealthAssessment assessment) {
        // 1. ê¸°ë³¸ ADL ì ìˆ˜ ê³„ì‚° (ì¼ìƒìƒí™œìˆ˜í–‰ëŠ¥ë ¥)
        int adlScore = calculateADLScore(assessment);
        
        // 2. ì¥ê¸°ìš”ì–‘ë³´í—˜ ë“±ê¸‰ ë°˜ì˜
        int ltciGrade = assessment.getLtciGrade();
        
        // 3. ëŒë´„ëŒ€ìƒì ìƒíƒœ ë°˜ì˜
        int careTargetStatus = assessment.getCareTargetStatus();
        
        // 4. ì¢…í•© ì¼€ì–´ ë“±ê¸‰ ë„ì¶œ
        return determineOverallCareGrade(adlScore, ltciGrade, careTargetStatus);
    }
    
    private int calculateADLScore(HealthAssessment assessment) {
        int mobility = assessment.getMobilityLevel();    // 1-3
        int eating = assessment.getEatingLevel();        // 1-3  
        int toilet = assessment.getToiletLevel();        // 1-3
        int communication = assessment.getCommunicationLevel(); // 1-3
        
        // ê° ì˜ì—­ë³„ ê°€ì¤‘ì¹˜ ì ìš©
        return (mobility * 25) + (eating * 20) + (toilet * 30) + (communication * 25);
    }
}
```

#### **ì½”ë””ë„¤ì´í„° ìê¸° ì„¤ì • ì¼€ì–´ ë“±ê¸‰ ì‹œìŠ¤í…œ**

**ì½”ë””ë„¤ì´í„° í”„ë¡œí•„ ê´€ë¦¬ (Self-Configuration)**
```yaml
ê¸°ë³¸ ìê²© ë“±ê¸‰ (ì‹œìŠ¤í…œ ìë™ ì„¤ì •):
  - ìê²©ì¦ ê¸°ë°˜ ìµœì†Œ ì¼€ì–´ ë“±ê¸‰ ìë™ ì‚°ì¶œ
  - ê²½ë ¥ ì—°ìˆ˜ë³„ ë“±ê¸‰ ìƒí•œì„  ì„¤ì •
  - êµìœ¡ ì´ìˆ˜ í˜„í™© ë°˜ì˜

ê°œì¸ ì„¤ì • ì¼€ì–´ ë“±ê¸‰ (ì½”ë””ë„¤ì´í„° ì§ì ‘ ì„¤ì •):
  - í¬ë§ ì¼€ì–´ ë“±ê¸‰ ë²”ìœ„ ì„ íƒ (ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)
  - ì „ë¬¸ ë¶„ì•¼ë³„ ì„¸ë¶€ ë“±ê¸‰ ì„¤ì •
  - ì¼€ì–´ ê±°ë¶€ ë“±ê¸‰ ì„¤ì • (ê°œì¸ ì‚¬ì •ìœ¼ë¡œ ë‹´ë‹¹ ë¶ˆê°€)
  - ë™ì‹œ ë‹´ë‹¹ ê°€ëŠ¥ ì¼€ì´ìŠ¤ ìˆ˜ ì„¤ì •

ì‹¤ì œ ë§¤ì¹­ ë“±ê¸‰ (AI ê¸°ë°˜ ìµœì í™”):
  - ê¸°ë³¸ ìê²© + ê°œì¸ ì„¤ì • + ì„±ê³¼ ì´ë ¥ ì¢…í•©
  - ê³ ê° ë§Œì¡±ë„ ê¸°ë°˜ ë“±ê¸‰ ì¡°ì •
  - ì¼€ì´ìŠ¤ ì„±ê³µë¥  ê¸°ë°˜ ì‹ ë¢°ë„ ì ìˆ˜
```

**ì½”ë””ë„¤ì´í„° ë“±ê¸‰ ì„¸ë¶„í™” ì‹œìŠ¤í…œ**
```yaml
ìê²©ì¦ ê¸°ë°˜ ê¸°ë³¸ ë“±ê¸‰:
  Tier 1 (ìš”ì–‘ë³´í˜¸ì‚¬): 
    - ê¸°ë³¸ ì¼€ì–´ ë“±ê¸‰: 4-5ë“±ê¸‰, ì¸ì§€ì§€ì›ë“±ê¸‰
    - ìƒí•œì„ : 3ë“±ê¸‰ê¹Œì§€ ê°€ëŠ¥ (ê²½ë ¥ 2ë…„+ ì‹œ)
    
  Tier 2 (ê°„í˜¸ì¡°ë¬´ì‚¬, ì‚¬íšŒë³µì§€ì‚¬):
    - ê¸°ë³¸ ì¼€ì–´ ë“±ê¸‰: 2-5ë“±ê¸‰  
    - ìƒí•œì„ : 1ë“±ê¸‰ê¹Œì§€ ê°€ëŠ¥ (ê²½ë ¥ 5ë…„+ ì‹œ)
    
  Tier 3 (ê°„í˜¸ì‚¬, ì˜ë£Œì§„):
    - ê¸°ë³¸ ì¼€ì–´ ë“±ê¸‰: 1-5ë“±ê¸‰ ì „ì²´
    - íŠ¹ìˆ˜ ì¼€ì–´: í˜¸ìŠ¤í”¼ìŠ¤, ì˜ë£Œì§„ í˜‘ë ¥ ì¼€ì–´

ê²½ë ¥ë³„ ë“±ê¸‰ í™•ì¥:
  ì‹ ì… (0-1ë…„): ê¸°ë³¸ ë“±ê¸‰ì—ì„œ -1ë‹¨ê³„
  ê²½ë ¥ì (2-4ë…„): ê¸°ë³¸ ë“±ê¸‰ 
  ì „ë¬¸ê°€ (5ë…„+): ê¸°ë³¸ ë“±ê¸‰ì—ì„œ +1ë‹¨ê³„
  ë§ˆìŠ¤í„° (10ë…„+): ì „ì²´ ë“±ê¸‰ + íŠ¹ìˆ˜ ì¼€ì–´
```

**ì½”ë””ë„¤ì´í„° ê°œì¸ ì„¤ì • ì‹œìŠ¤í…œ**
```java
@Entity
public class CoordinatorCareSettings {
    @Id
    private Long id;
    private String coordinatorId;
    
    // ì‹œìŠ¤í…œ ìë™ ì‚°ì¶œ ë“±ê¸‰
    private Integer baseCareLevel;           // ìê²©ì¦ ê¸°ë°˜ ê¸°ë³¸ ë“±ê¸‰
    private Integer maxCareLevel;            // ê²½ë ¥ ê¸°ë°˜ ìµœëŒ€ ë“±ê¸‰
    
    // ì½”ë””ë„¤ì´í„° ê°œì¸ ì„¤ì •
    @ElementCollection
    private Set<Integer> preferredCareGrades;    // ì„ í˜¸ ì¼€ì–´ ë“±ê¸‰ [1,2,3,4,5,6]
    
    @ElementCollection  
    private Set<Integer> excludedCareGrades;     // ê±°ë¶€ ì¼€ì–´ ë“±ê¸‰ [1,2]
    
    @ElementCollection
    private Set<String> specialtyAreas;         // ì „ë¬¸ ë¶„ì•¼ ["dementia", "medical"]
    
    // ì—…ë¬´ëŸ‰ ì„¤ì •
    private Integer maxSimultaneousCases;       // ë™ì‹œ ë‹´ë‹¹ ê°€ëŠ¥ ì¼€ì´ìŠ¤ ìˆ˜
    private Integer preferredCasesPerMonth;     // ì›” ì„ í˜¸ ì¼€ì´ìŠ¤ ìˆ˜
    
    // ê·¼ë¬´ ì¡°ê±´ ì„¤ì •
    private Boolean availableWeekends;          // ì£¼ë§ ê·¼ë¬´ ê°€ëŠ¥ ì—¬ë¶€
    private Boolean availableEmergency;         // ì‘ê¸‰ ìƒí™© ëŒ€ì‘ ê°€ëŠ¥ ì—¬ë¶€
    private Set<String> workingRegions;         // ê·¼ë¬´ ê°€ëŠ¥ ì§€ì—­
    
    // ì„±ê³¼ ê¸°ë°˜ ì¡°ì •
    private Double performanceScore;            // ì„±ê³¼ ì ìˆ˜ (0.0-5.0)
    private Double customerSatisfaction;        // ê³ ê° ë§Œì¡±ë„ (0.0-5.0)
    private Integer successfulCases;            // ì„±ê³µ ì¼€ì´ìŠ¤ ìˆ˜
    private Integer totalCases;                 // ì´ ë‹´ë‹¹ ì¼€ì´ìŠ¤ ìˆ˜
    
    private LocalDateTime lastUpdated;
}
```

#### **AI ê¸°ë°˜ ìµœì í™” ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜**

**1. ë‹¤ì¸µ ë§¤ì¹­ ì‹œìŠ¤í…œ (Multi-Layer Matching)**
```java
@Service
public class OptimizedCoordinatorMatchingService {
    
    public List<CoordinatorMatch> findOptimalMatches(HealthAssessment assessment, 
                                                   MatchingPreference preference) {
        
        // 1ë‹¨ê³„: ê¸°ë³¸ ìê²© í•„í„°ë§
        List<Coordinator> eligibleCoordinators = filterByBasicQualifications(assessment);
        
        // 2ë‹¨ê³„: ì½”ë””ë„¤ì´í„° ì„¤ì • ë§¤ì¹­
        List<Coordinator> settingsMatched = filterByCoordinatorSettings(eligibleCoordinators, assessment);
        
        // 3ë‹¨ê³„: AI ìŠ¤ì½”ì–´ë§ ë° ìµœì í™”
        List<CoordinatorMatch> scoredMatches = calculateOptimalMatches(settingsMatched, assessment);
        
        // 4ë‹¨ê³„: ì‹¤ì‹œê°„ ê°€ìš©ì„± í™•ì¸
        return filterByRealTimeAvailability(scoredMatches, preference);
    }
    
    private List<Coordinator> filterByBasicQualifications(HealthAssessment assessment) {
        CareGrade requiredGrade = assessment.getOverallCareGrade();
        
        return coordinatorRepository.findAll().stream()
            .filter(coordinator -> {
                CoordinatorCareSettings settings = coordinator.getCareSettings();
                
                // ê¸°ë³¸ ìê²© ì²´í¬
                boolean hasBasicQualification = settings.getBaseCareLevel() <= requiredGrade.getLevel();
                
                // ìµœëŒ€ ë“±ê¸‰ ì²´í¬  
                boolean withinMaxLevel = settings.getMaxCareLevel() >= requiredGrade.getLevel();
                
                // ê°œì¸ ì„¤ì • ì²´í¬
                boolean inPreferredGrades = settings.getPreferredCareGrades().contains(requiredGrade.getLevel());
                boolean notExcluded = !settings.getExcludedCareGrades().contains(requiredGrade.getLevel());
                
                return hasBasicQualification && withinMaxLevel && inPreferredGrades && notExcluded;
            })
            .collect(Collectors.toList());
    }
    
    private List<CoordinatorMatch> calculateOptimalMatches(List<Coordinator> coordinators, 
                                                         HealthAssessment assessment) {
        return coordinators.stream()
            .map(coordinator -> {
                double matchScore = calculateComprehensiveMatchScore(coordinator, assessment);
                return new CoordinatorMatch(coordinator, matchScore, 
                    generateMatchReason(coordinator, assessment));
            })
            .sorted(Comparator.comparing(CoordinatorMatch::getMatchScore).reversed())
            .limit(10) // ìƒìœ„ 10ëª…ë§Œ ì„ ë³„
            .collect(Collectors.toList());
    }
    
    private double calculateComprehensiveMatchScore(Coordinator coordinator, HealthAssessment assessment) {
        double score = 0.0;
        
        // 1. ì „ë¬¸ì„± ë§¤ì¹­ ì ìˆ˜ (40%)
        score += calculateSpecialtyMatchScore(coordinator, assessment) * 0.4;
        
        // 2. ê²½ë ¥ ë° ì„±ê³¼ ì ìˆ˜ (25%)
        score += calculateExperienceScore(coordinator) * 0.25;
        
        // 3. ê³ ê° ë§Œì¡±ë„ ì ìˆ˜ (20%)
        score += coordinator.getCareSettings().getCustomerSatisfaction() * 0.2;
        
        // 4. ì§€ì—­ ì ‘ê·¼ì„± ì ìˆ˜ (10%)
        score += calculateLocationScore(coordinator, assessment) * 0.1;
        
        // 5. ì‹¤ì‹œê°„ ê°€ìš©ì„± ë³´ë„ˆìŠ¤ (5%)
        score += calculateAvailabilityBonus(coordinator) * 0.05;
        
        return Math.min(score, 5.0); // ìµœëŒ€ 5ì 
    }
}
```

**2. ì „ë¬¸ì„± ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸ ë§¤ì¹­**
```java
private double calculateSpecialtyMatchScore(Coordinator coordinator, HealthAssessment assessment) {
    double specialtyScore = 0.0;
    Set<String> coordinatorSpecialties = coordinator.getCareSettings().getSpecialtyAreas();
    
    // ì¹˜ë§¤ ì „ë¬¸ì„± ë§¤ì¹­
    if (assessment.getLtciGrade() == 6 || assessment.getCommunicationLevel() == 3) {
        if (coordinatorSpecialties.contains("dementia")) {
            specialtyScore += 2.0;
        }
    }
    
    // ì˜ë£Œ ì „ë¬¸ì„± ë§¤ì¹­ (1-2ë“±ê¸‰, ìƒíƒœ1-2)
    if (assessment.getOverallCareGrade().getLevel() <= 2 || assessment.getCareTargetStatus() <= 2) {
        if (coordinatorSpecialties.contains("medical")) {
            specialtyScore += 2.0;
        }
    }
    
    // ì¬í™œ ì „ë¬¸ì„± ë§¤ì¹­
    if (assessment.getMobilityLevel() >= 2) {
        if (coordinatorSpecialties.contains("rehabilitation")) {
            specialtyScore += 1.5;
        }
    }
    
    // ì˜ì–‘ ì „ë¬¸ì„± ë§¤ì¹­
    if (assessment.getEatingLevel() >= 2) {
        if (coordinatorSpecialties.contains("nutrition")) {
            specialtyScore += 1.5;
        }
    }
    
    // ë‹¤êµ­ì–´ ì§€ì› (ì¬ì™¸ë™í¬)
    if (assessment.isOverseasKorean()) {
        if (coordinatorSpecialties.contains("multilingual")) {
            specialtyScore += 1.0;
        }
    }
    
    return Math.min(specialtyScore, 5.0);
}
```

**3. ì‹¤ì‹œê°„ ê°€ìš©ì„± ë° ì—…ë¬´ëŸ‰ ìµœì í™”**
```java
@Component
public class CoordinatorWorkloadOptimizer {
    
    public List<CoordinatorMatch> optimizeWorkloadDistribution(List<CoordinatorMatch> matches) {
        return matches.stream()
            .map(match -> {
                Coordinator coordinator = match.getCoordinator();
                double workloadScore = calculateWorkloadScore(coordinator);
                
                // ì—…ë¬´ëŸ‰ì´ ì ì€ ì½”ë””ë„¤ì´í„°ì—ê²Œ ê°€ì‚°ì 
                double adjustedScore = match.getMatchScore() + (workloadScore * 0.3);
                
                return new CoordinatorMatch(coordinator, adjustedScore, 
                    match.getMatchReason() + generateWorkloadReason(workloadScore));
            })
            .sorted(Comparator.comparing(CoordinatorMatch::getMatchScore).reversed())
            .collect(Collectors.toList());
    }
    
    private double calculateWorkloadScore(Coordinator coordinator) {
        CoordinatorCareSettings settings = coordinator.getCareSettings();
        int currentCases = getCurrentActiveCases(coordinator.getId());
        int maxCases = settings.getMaxSimultaneousCases();
        
        // ì—…ë¬´ëŸ‰ ë¹„ìœ¨ ê³„ì‚° (ë‚®ì„ìˆ˜ë¡ ë†’ì€ ì ìˆ˜)
        double workloadRatio = (double) currentCases / maxCases;
        
        if (workloadRatio >= 1.0) return 0.0;      // í¬í™” ìƒíƒœ
        if (workloadRatio >= 0.8) return 1.0;      // ê±°ì˜ í¬í™”
        if (workloadRatio >= 0.6) return 2.0;      // ì ì • ìˆ˜ì¤€
        if (workloadRatio >= 0.4) return 3.0;      // ì—¬ìœ  ìˆìŒ
        return 4.0;                                // ë§¤ìš° ì—¬ìœ 
    }
}
```

**4. ì§€ëŠ¥í˜• ë§¤ì¹­ ê²°ê³¼ ì„¤ëª…**
```java
public class MatchingExplanationGenerator {
    
    public String generateMatchReason(Coordinator coordinator, HealthAssessment assessment) {
        StringBuilder reason = new StringBuilder();
        
        // ì „ë¬¸ì„± ë§¤ì¹­ ì´ìœ 
        if (isSpecialtyMatch(coordinator, assessment)) {
            reason.append("ğŸ¯ ì „ë¬¸ ë¶„ì•¼ ì™„ë²½ ë§¤ì¹­: ");
            reason.append(getSpecialtyDescription(coordinator, assessment));
            reason.append("\n");
        }
        
        // ê²½ë ¥ ë§¤ì¹­ ì´ìœ 
        int experience = coordinator.getCareSettings().getExperienceYears();
        reason.append("ğŸ“Š ê²½ë ¥: ").append(experience).append("ë…„ (");
        if (experience >= 10) reason.append("ìµœê³  ì „ë¬¸ê°€");
        else if (experience >= 5) reason.append("ìˆ™ë ¨ ì „ë¬¸ê°€");
        else if (experience >= 2) reason.append("ê²½ë ¥ì");
        else reason.append("ì‹ ì…");
        reason.append(")\n");
        
        // ì„±ê³¼ ì´ìœ 
        double satisfaction = coordinator.getCareSettings().getCustomerSatisfaction();
        reason.append("â­ ê³ ê° ë§Œì¡±ë„: ").append(satisfaction).append("/5.0");
        if (satisfaction >= 4.5) reason.append(" (ìµœìš°ìˆ˜)");
        else if (satisfaction >= 4.0) reason.append(" (ìš°ìˆ˜)");
        else if (satisfaction >= 3.5) reason.append(" (ì–‘í˜¸)");
        reason.append("\n");
        
        // ê°€ìš©ì„± ì´ìœ 
        int currentLoad = getCurrentActiveCases(coordinator.getId());
        int maxLoad = coordinator.getCareSettings().getMaxSimultaneousCases();
        reason.append("â° í˜„ì¬ ì—…ë¬´ëŸ‰: ").append(currentLoad).append("/").append(maxLoad);
        if (currentLoad < maxLoad * 0.6) reason.append(" (ì¦‰ì‹œ ë°°ì • ê°€ëŠ¥)");
        else if (currentLoad < maxLoad * 0.8) reason.append(" (ë°°ì • ê°€ëŠ¥)");
        else reason.append(" (ì¼ì • ì¡°ìœ¨ í•„ìš”)");
        
        return reason.toString();
    }
}
```

**5. ë§¤ì¹­ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**
```yaml
ë§¤ì¹­ ì„±ê³µë¥  ì¶”ì :
  - ì´ˆê¸° ë§¤ì¹­ ì„±ê³µë¥ : ë§¤ì¹­ í›„ ê³„ì•½ ì²´ê²°ìœ¨
  - ì¥ê¸° ë§Œì¡±ë„: 3ê°œì›” í›„ ê³ ê° ë§Œì¡±ë„  
  - ì½”ë””ë„¤ì´í„° ë§Œì¡±ë„: ì—…ë¬´ ë¶€í•˜ ì ì •ì„±
  - ì¬ë§¤ì¹­ë¥ : ì½”ë””ë„¤ì´í„° ë³€ê²½ ìš”ì²­ë¥ 

ì‹¤ì‹œê°„ ìµœì í™”:
  - A/B í…ŒìŠ¤íŠ¸: ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ ì„±ëŠ¥ ë¹„êµ
  - ë¨¸ì‹ ëŸ¬ë‹: ë§¤ì¹­ ì„±ê³µ íŒ¨í„´ í•™ìŠµ
  - í”¼ë“œë°± ë£¨í”„: ê²°ê³¼ ê¸°ë°˜ ì•Œê³ ë¦¬ì¦˜ ê°œì„ 
  - ê³„ì ˆë³„ ì¡°ì •: ì‹œê¸°ë³„ ìˆ˜ìš” íŒ¨í„´ ë°˜ì˜
```

#### **ê±´ê°• ìƒíƒœ ì²´í¬ë¦¬ìŠ¤íŠ¸ API**

**ì—”í‹°í‹° ì„¤ê³„**
```java
@Entity
public class HealthAssessment {
    @Id
    private Long id;
    
    // ê¸°ë³¸ ì •ë³´
    private String memberId;
    private String gender;
    private Integer birthYear;
    
    // ADL í‰ê°€ (1-3ì )
    private Integer mobilityLevel;        // ê±·ê¸° í™œë™
    private Integer eatingLevel;          // ì‹ì‚¬ í™œë™  
    private Integer toiletLevel;          // ë°°ë³€ í™œë™
    private Integer communicationLevel;   // ì˜ì‚¬ì†Œí†µ
    
    // ì¥ê¸°ìš”ì–‘ë³´í—˜ ì •ë³´
    private Integer ltciGrade;           // 1-5ë“±ê¸‰, 6(ì¸ì§€ì§€ì›), 7(ëª¨ë¦„), 8(ì—†ìŒ)
    
    // ëŒë´„ëŒ€ìƒì ìƒíƒœ
    private Integer careTargetStatus;    // 1-4 (ìƒëª…ì˜ˆí›„ ìƒíƒœ)
    
    // ê³„ì‚°ëœ ê²°ê³¼
    private Integer adlScore;            // ADL ì ìˆ˜ (4-12ì )
    private String overallCareGrade;     // ì¢…í•© ì¼€ì–´ ë“±ê¸‰
    private LocalDateTime assessmentDate;
}

@Entity  
public class CoordinatorProfile {
    @Id
    private Long id;
    private String coordinatorId;
    
    // ì „ë¬¸ì„± ë ˆë²¨
    private Integer professionalLevel;   // 1(ì´ˆê¸‰), 2(ì¤‘ê¸‰), 3(ê³ ê¸‰)
    
    // ì¼€ì–´ ê°€ëŠ¥ ë“±ê¸‰ (JSON ë°°ì—´)
    private String compatibleCareGrades; // ["1", "2", "3"]
    
    // ì „ë¬¸ ë¶„ì•¼ (JSON ë°°ì—´)  
    private String specialties;          // ["dementia", "medical", "rehabilitation"]
    
    // ìê²©ì¦ ì •ë³´
    private String certifications;       // ["nurse", "social_worker_1"]
    
    // ê²½ë ¥ ì •ë³´
    private Integer experienceYears;
    private Integer totalCases;
    private Double satisfactionScore;
}
```

#### **ì½”ë””ë„¤ì´í„° í”„ë¡œí•„ ê´€ë¦¬ ì‹œìŠ¤í…œ**

**API ì—”ë“œí¬ì¸íŠ¸ ì„¤ê³„**
```java
@RestController
@RequestMapping("/api/coordinators")
public class CoordinatorProfileController {
    
    @GetMapping("/{coordinatorId}/care-settings")
    public ResponseEntity<CoordinatorCareSettings> getCareSettings(@PathVariable String coordinatorId) {
        // ì½”ë””ë„¤ì´í„° ì¼€ì–´ ì„¤ì • ì¡°íšŒ
    }
    
    @PutMapping("/{coordinatorId}/care-settings")
    public ResponseEntity<CoordinatorCareSettings> updateCareSettings(
        @PathVariable String coordinatorId,
        @RequestBody @Valid CoordinatorCareSettingsRequest request) {
        // ì¼€ì–´ ì„¤ì • ì—…ë°ì´íŠ¸
    }
    
    @PostMapping("/{coordinatorId}/care-grades/preferences")
    public ResponseEntity<Void> updateCareGradePreferences(
        @PathVariable String coordinatorId,
        @RequestBody CareGradePreferencesRequest request) {
        // ì„ í˜¸/ê±°ë¶€ ì¼€ì–´ ë“±ê¸‰ ì„¤ì •
    }
    
    @GetMapping("/{coordinatorId}/matching-statistics")
    public ResponseEntity<MatchingStatistics> getMatchingStatistics(@PathVariable String coordinatorId) {
        // ë§¤ì¹­ ì„±ê³¼ í†µê³„ ì¡°íšŒ
    }
    
    @PostMapping("/{coordinatorId}/availability")
    public ResponseEntity<Void> updateAvailability(
        @PathVariable String coordinatorId,
        @RequestBody AvailabilityRequest request) {
        // ì‹¤ì‹œê°„ ê°€ìš©ì„± ì—…ë°ì´íŠ¸
    }
}
```

**React ì»´í¬ë„ŒíŠ¸ - ì½”ë””ë„¤ì´í„° í”„ë¡œí•„ ê´€ë¦¬**
```typescript
// ì½”ë””ë„¤ì´í„° ì¼€ì–´ ì„¤ì • ê´€ë¦¬ ì»´í¬ë„ŒíŠ¸
export const CoordinatorCareSettingsForm: React.FC = () => {
  const [settings, setSettings] = useState<CoordinatorCareSettings>({
    preferredCareGrades: [],
    excludedCareGrades: [],
    specialtyAreas: [],
    maxSimultaneousCases: 3,
    preferredCasesPerMonth: 10,
    availableWeekends: false,
    availableEmergency: false,
    workingRegions: []
  });

  const careGradeOptions = [
    { value: 1, label: "1ë“±ê¸‰ (ìµœì¤‘ì¦)", description: "24ì‹œê°„ ì „ë¬¸ ì¼€ì–´ í•„ìš”" },
    { value: 2, label: "2ë“±ê¸‰ (ì¤‘ì¦)", description: "ì§‘ì¤‘ì ì¸ ì˜ë£Œ ì§€ì› í•„ìš”" },
    { value: 3, label: "3ë“±ê¸‰ (ì¤‘ë“±ì¦)", description: "ì¼ìƒ í™œë™ ìƒë‹¹í•œ ë„ì›€ í•„ìš”" },
    { value: 4, label: "4ë“±ê¸‰ (ê²½ì¦)", description: "ë¶€ë¶„ì ì¸ ë„ì›€ í•„ìš”" },
    { value: 5, label: "5ë“±ê¸‰ (ê²½ì¦)", description: "ê¸°ë³¸ì ì¸ ì§€ì› í•„ìš”" },
    { value: 6, label: "ì¸ì§€ì§€ì›ë“±ê¸‰", description: "ì¹˜ë§¤ ì „ë¬¸ ì¼€ì–´" }
  ];

  const specialtyOptions = [
    { value: "dementia", label: "ì¹˜ë§¤ ì „ë¬¸", icon: "ğŸ§ " },
    { value: "medical", label: "ì˜ë£Œ ì „ë¬¸", icon: "ğŸ¥" },
    { value: "rehabilitation", label: "ì¬í™œ ì „ë¬¸", icon: "ğŸ’ª" },
    { value: "nutrition", label: "ì˜ì–‘ ì „ë¬¸", icon: "ğŸ¥—" },
    { value: "multilingual", label: "ë‹¤êµ­ì–´ ì§€ì›", icon: "ğŸŒ" },
    { value: "hospice", label: "í˜¸ìŠ¤í”¼ìŠ¤ ì¼€ì–´", icon: "ğŸ•Šï¸" }
  ];

  const handleSaveSettings = async () => {
    try {
      await coordinatorApi.updateCareSettings(coordinatorId, settings);
      toast.success("ì¼€ì–´ ì„¤ì •ì´ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.");
    } catch (error) {
      toast.error("ì„¤ì • ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
    }
  };

  return (
    <div className="coordinator-care-settings">
      <div className="settings-section">
        <h3>ì„ í˜¸ ì¼€ì–´ ë“±ê¸‰ ì„¤ì •</h3>
        <p className="description">ë‹´ë‹¹í•˜ê³  ì‹¶ì€ ì¼€ì–´ ë“±ê¸‰ì„ ì„ íƒí•˜ì„¸ìš”. (ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)</p>
        
        <div className="care-grade-selection">
          {careGradeOptions.map(option => (
            <div key={option.value} className="grade-option">
              <Checkbox
                checked={settings.preferredCareGrades.includes(option.value)}
                onChange={(checked) => handleGradeToggle('preferred', option.value, checked)}
              />
              <div className="grade-info">
                <span className="grade-label">{option.label}</span>
                <span className="grade-description">{option.description}</span>
              </div>
            </div>
          ))}
        </div>
      </div>

      <div className="settings-section">
        <h3>ì¼€ì–´ ê±°ë¶€ ë“±ê¸‰ ì„¤ì •</h3>
        <p className="description">ê°œì¸ ì‚¬ì •ìœ¼ë¡œ ë‹´ë‹¹í•˜ê¸° ì–´ë ¤ìš´ ë“±ê¸‰ì„ ì„ íƒí•˜ì„¸ìš”.</p>
        
        <div className="excluded-grades">
          {careGradeOptions.map(option => (
            <div key={option.value} className="grade-option">
              <Checkbox
                checked={settings.excludedCareGrades.includes(option.value)}
                onChange={(checked) => handleGradeToggle('excluded', option.value, checked)}
              />
              <span>{option.label}</span>
            </div>
          ))}
        </div>
      </div>

      <div className="settings-section">
        <h3>ì „ë¬¸ ë¶„ì•¼ ì„¤ì •</h3>
        <div className="specialty-selection">
          {specialtyOptions.map(specialty => (
            <div key={specialty.value} className="specialty-card">
              <input
                type="checkbox"
                checked={settings.specialtyAreas.includes(specialty.value)}
                onChange={(e) => handleSpecialtyToggle(specialty.value, e.target.checked)}
              />
              <div className="specialty-info">
                <span className="specialty-icon">{specialty.icon}</span>
                <span className="specialty-label">{specialty.label}</span>
              </div>
            </div>
          ))}
        </div>
      </div>

      <div className="settings-section">
        <h3>ì—…ë¬´ëŸ‰ ì„¤ì •</h3>
        <div className="workload-settings">
          <div className="input-group">
            <label>ë™ì‹œ ë‹´ë‹¹ ê°€ëŠ¥ ì¼€ì´ìŠ¤ ìˆ˜</label>
            <input
              type="number"
              min="1"
              max="10"
              value={settings.maxSimultaneousCases}
              onChange={(e) => setSettings({...settings, maxSimultaneousCases: parseInt(e.target.value)})}
            />
          </div>
          
          <div className="input-group">
            <label>ì›” ì„ í˜¸ ì¼€ì´ìŠ¤ ìˆ˜</label>
            <input
              type="number"
              min="1"
              max="30"
              value={settings.preferredCasesPerMonth}
              onChange={(e) => setSettings({...settings, preferredCasesPerMonth: parseInt(e.target.value)})}
            />
          </div>
        </div>
      </div>

      <div className="settings-section">
        <h3>ê·¼ë¬´ ì¡°ê±´ ì„¤ì •</h3>
        <div className="work-conditions">
          <div className="condition-item">
            <Checkbox
              checked={settings.availableWeekends}
              onChange={(checked) => setSettings({...settings, availableWeekends: checked})}
            />
            <span>ì£¼ë§ ê·¼ë¬´ ê°€ëŠ¥</span>
          </div>
          
          <div className="condition-item">
            <Checkbox
              checked={settings.availableEmergency}
              onChange={(checked) => setSettings({...settings, availableEmergency: checked})}
            />
            <span>ì‘ê¸‰ ìƒí™© ëŒ€ì‘ ê°€ëŠ¥</span>
          </div>
        </div>
      </div>

      <div className="settings-actions">
        <button onClick={handleSaveSettings} className="save-button">
          ì„¤ì • ì €ì¥
        </button>
        <button onClick={handlePreviewMatching} className="preview-button">
          ë§¤ì¹­ ë¯¸ë¦¬ë³´ê¸°
        </button>
      </div>
    </div>
  );
};
```

**ë§¤ì¹­ ë¯¸ë¦¬ë³´ê¸° ì»´í¬ë„ŒíŠ¸**
```typescript
export const MatchingPreview: React.FC<{coordinatorId: string}> = ({coordinatorId}) => {
  const [matchingPreview, setMatchingPreview] = useState<MatchingPreviewData | null>(null);
  
  const loadMatchingPreview = async () => {
    const preview = await coordinatorApi.getMatchingPreview(coordinatorId);
    setMatchingPreview(preview);
  };

  return (
    <div className="matching-preview">
      <h3>ğŸ¯ ë§¤ì¹­ ë¯¸ë¦¬ë³´ê¸°</h3>
      <p>í˜„ì¬ ì„¤ì •ìœ¼ë¡œ ë§¤ì¹­ ê°€ëŠ¥í•œ ì¼€ì´ìŠ¤ë“¤ì„ í™•ì¸í•´ë³´ì„¸ìš”.</p>
      
      {matchingPreview && (
        <div className="preview-results">
          <div className="preview-stats">
            <div className="stat-item">
              <span className="stat-number">{matchingPreview.totalEligibleCases}</span>
              <span className="stat-label">ë§¤ì¹­ ê°€ëŠ¥ ì¼€ì´ìŠ¤</span>
            </div>
            
            <div className="stat-item">
              <span className="stat-number">{matchingPreview.averageMatchScore.toFixed(1)}</span>
              <span className="stat-label">í‰ê·  ë§¤ì¹­ ì ìˆ˜</span>
            </div>
            
            <div className="stat-item">
              <span className="stat-number">{matchingPreview.weeklyExpectedCases}</span>
              <span className="stat-label">ì£¼ê°„ ì˜ˆìƒ ë°°ì •</span>
            </div>
          </div>

          <div className="preview-recommendations">
            <h4>ğŸ’¡ ì„¤ì • ê°œì„  ì œì•ˆ</h4>
            {matchingPreview.recommendations.map((rec, index) => (
              <div key={index} className="recommendation-item">
                <span className="rec-icon">ğŸ’¡</span>
                <span className="rec-text">{rec.message}</span>
                {rec.actionable && (
                  <button 
                    className="apply-recommendation"
                    onClick={() => applyRecommendation(rec)}
                  >
                    ì ìš©
                  </button>
                )}
              </div>
            ))}
          </div>
        </div>
      )}
    </div>
  );
};
```

**ì‹¤ì‹œê°„ ê°€ìš©ì„± ê´€ë¦¬**
```typescript
export const CoordinatorAvailabilityWidget: React.FC = () => {
  const [availability, setAvailability] = useState({
    status: 'available', // available, busy, offline
    currentCases: 2,
    maxCases: 5,
    nextAvailable: null as Date | null
  });

  const updateAvailability = async (newStatus: string) => {
    await coordinatorApi.updateAvailability(coordinatorId, {
      status: newStatus,
      timestamp: new Date()
    });
    setAvailability({...availability, status: newStatus});
  };

  return (
    <div className="availability-widget">
      <h4>ğŸ“Š ì‹¤ì‹œê°„ ê°€ìš©ì„±</h4>
      
      <div className="current-status">
        <div className={`status-indicator ${availability.status}`}>
          <span className="status-dot"></span>
          <span className="status-text">
            {availability.status === 'available' && 'ë§¤ì¹­ ê°€ëŠ¥'}
            {availability.status === 'busy' && 'ì—…ë¬´ ì¤‘'}
            {availability.status === 'offline' && 'ì˜¤í”„ë¼ì¸'}
          </span>
        </div>
      </div>

      <div className="workload-indicator">
        <div className="workload-bar">
          <div 
            className="workload-fill"
            style={{width: `${(availability.currentCases / availability.maxCases) * 100}%`}}
          ></div>
        </div>
        <span className="workload-text">
          {availability.currentCases}/{availability.maxCases} ì¼€ì´ìŠ¤ ë‹´ë‹¹ ì¤‘
        </span>
      </div>

      <div className="status-controls">
        <button 
          onClick={() => updateAvailability('available')}
          className={availability.status === 'available' ? 'active' : ''}
        >
          ë§¤ì¹­ ê°€ëŠ¥
        </button>
        <button 
          onClick={() => updateAvailability('busy')}
          className={availability.status === 'busy' ? 'active' : ''}
        >
          ì—…ë¬´ ì¤‘
        </button>
        <button 
          onClick={() => updateAvailability('offline')}
          className={availability.status === 'offline' ? 'active' : ''}
        >
          ì˜¤í”„ë¼ì¸
        </button>
      </div>
    </div>
  );
};
```

#### **ì²´í¬ë¦¬ìŠ¤íŠ¸ UI ì»´í¬ë„ŒíŠ¸**

**React ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°**
```typescript
// ê±´ê°• ìƒíƒœ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì»´í¬ë„ŒíŠ¸
export const HealthAssessmentForm: React.FC = () => {
  const [assessment, setAssessment] = useState<HealthAssessmentData>({
    mobility: null,
    eating: null, 
    toilet: null,
    communication: null,
    ltciGrade: null,
    careTargetStatus: null
  });

  const assessmentQuestions = {
    mobility: {
      title: "ê±·ê¸° í™œë™ ëŠ¥ë ¥",
      options: [
        { value: 1, label: "í˜¼ìì„œ ê°€ëŠ¥í•´ìš”" },
        { value: 2, label: "ë¶€ë¶„ì ì¸ ë„ì›€ì´ í•„ìš”í•´ìš”\n(íƒ€ì¸ì˜ ë¶€ì¶•, ì§€íŒ¡ì´ ì´ìš© ë“±)" },
        { value: 3, label: "í˜¼ìì„œëŠ” ë³´í–‰ì´ ì–´ë ¤ì›Œìš”\n(íœ ì²´ì–´ ì‚¬ìš© ë“±)" }
      ]
    },
    // ... ë‹¤ë¥¸ í•­ëª©ë“¤
  };

  const handleSubmit = async () => {
    const result = await healthAssessmentApi.calculate(assessment);
    // ê²°ê³¼ ì²˜ë¦¬ ë° ì½”ë””ë„¤ì´í„° ì¶”ì²œ
  };
};
```

---

## ğŸ¤– ì±—ë´‡ 'ì—˜ë¹„' ìë™í™” ì‹œìŠ¤í…œ (AI-Powered Process Automation)

### ì±—ë´‡ ìë™í™”ì˜ í•µì‹¬ ê°€ì¹˜

**ì¬ì™¸ë™í¬ë¥¼ ìœ„í•œ í•œêµ­ í–‰ì • ì ˆì°¨ ìë™í™”**
```yaml
ìë™í™” ëª©í‘œ:
  - ë³µì¡í•œ í•œêµ­ í–‰ì • ì ˆì°¨ë¥¼ ë‹¨ê³„ë³„ ëŒ€í™”ë¡œ ë‹¨ìˆœí™”
  - ë°˜ë³µì ì¸ ì„œë¥˜ ì‘ì„± ì‘ì—…ì„ AIê°€ ëŒ€ì‹  ì²˜ë¦¬
  - 24ì‹œê°„ ë‹¤êµ­ì–´ ì§€ì›ìœ¼ë¡œ ì‹œì°¨ ë¬¸ì œ í•´ê²°
  - ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™© ì¶”ì  ë° ì•Œë¦¼

ëŒ€ìƒ ì‚¬ìš©ì:
  - ì¬ì™¸ë™í¬: í•œêµ­ ì‹œìŠ¤í…œì— ìµìˆ™í•˜ì§€ ì•Šì€ í•´ì™¸ ê±°ì£¼ì
  - ê³ ë ¹ì: ë³µì¡í•œ ì˜¨ë¼ì¸ ì–‘ì‹ ì‘ì„±ì´ ì–´ë ¤ìš´ ì‚¬ìš©ì
  - ê°€ì¡±: ë¶€ëª¨ë‹˜ ëŒ€ì‹  ì„œë¥˜ë¥¼ ì¤€ë¹„í•˜ëŠ” ìë…€ë“¤
```

#### **A. ì±—ë´‡ ê¸°ë°˜ ì„œë¥˜ ì‘ì„± ìë™í™”**

**1. ê±´ê°• ê´€ë ¨ ì„œë¥˜ ìë™í™”**
```java
@Component
public class HealthDocumentAutomation {
    
    public class HealthCertificateBot {
        
        public ChatResponse processHealthCertificate(String userId, ChatMessage message) {
            HealthDocumentSession session = getOrCreateSession(userId, "health_certificate");
            
            switch (session.getCurrentStep()) {
                case "GREETING":
                    return askBasicInfo();
                    
                case "BASIC_INFO":
                    session.setBasicInfo(extractBasicInfo(message));
                    return askMedicalHistory();
                    
                case "MEDICAL_HISTORY":
                    session.setMedicalHistory(extractMedicalHistory(message));
                    return askCurrentSymptoms();
                    
                case "CURRENT_SYMPTOMS":
                    session.setCurrentSymptoms(extractSymptoms(message));
                    return askPreferredHospital();
                    
                case "HOSPITAL_SELECTION":
                    session.setPreferredHospital(extractHospital(message));
                    return generateHealthCertificateForm(session);
                    
                case "FORM_REVIEW":
                    if (message.getContent().contains("í™•ì¸") || message.getContent().contains("ì œì¶œ")) {
                        return submitHealthCertificateApplication(session);
                    }
                    return askForCorrections(message);
            }
        }
        
        private ChatResponse askBasicInfo() {
            return ChatResponse.builder()
                .message("ì•ˆë…•í•˜ì„¸ìš”! ê±´ê°•ì§„ë‹¨ì„œ ì‹ ì²­ì„ ë„ì™€ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ë¨¼ì € ê¸°ë³¸ ì •ë³´ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.\n\n" +
                        "ğŸ“‹ í•„ìš”í•œ ì •ë³´:\n" +
                        "â€¢ ì„±ëª… (í•œê¸€)\n" +
                        "â€¢ ìƒë…„ì›”ì¼ (ì˜ˆ: 1950ë…„ 3ì›” 15ì¼)\n" +
                        "â€¢ ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ ì• 6ìë¦¬\n\n" +
                        "ì˜ˆì‹œ: í™ê¸¸ë™, 1950ë…„ 3ì›” 15ì¼, 500315")
                .type(ChatMessageType.FORM_INPUT)
                .expectedInput(Arrays.asList("name", "birthDate", "residentNumber"))
                .build();
        }
        
        private ChatResponse generateHealthCertificateForm(HealthDocumentSession session) {
            // AIê°€ ìˆ˜ì§‘ëœ ì •ë³´ë¡œ ê±´ê°•ì§„ë‹¨ì„œ ì‹ ì²­ì„œ ìë™ ì‘ì„±
            HealthCertificateForm form = HealthCertificateForm.builder()
                .name(session.getBasicInfo().getName())
                .birthDate(session.getBasicInfo().getBirthDate())
                .residentNumber(session.getBasicInfo().getResidentNumber())
                .medicalHistory(session.getMedicalHistory())
                .currentSymptoms(session.getCurrentSymptoms())
                .preferredHospital(session.getPreferredHospital())
                .applicationDate(LocalDateTime.now())
                .build();
                
            String formPreview = generateFormPreview(form);
            
            return ChatResponse.builder()
                .message("âœ… ê±´ê°•ì§„ë‹¨ì„œ ì‹ ì²­ì„œê°€ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤!\n\n" + formPreview + 
                        "\n\në‚´ìš©ì„ í™•ì¸í•˜ì‹œê³  'ì œì¶œ'ì´ë¼ê³  ë§ì”€í•´ì£¼ì„¸ìš”. ìˆ˜ì •ì´ í•„ìš”í•˜ë©´ 'ìˆ˜ì •'ì´ë¼ê³  í•´ì£¼ì„¸ìš”.")
                .type(ChatMessageType.FORM_PREVIEW)
                .attachments(Arrays.asList(generatePdfForm(form)))
                .build();
        }
    }
}
```

**2. ì¥ê¸°ìš”ì–‘ì¸ì •ì„œ ì‹ ì²­ ìë™í™”**
```java
@Component
public class LtciApplicationBot {
    
    public ChatResponse processLtciApplication(String userId, ChatMessage message) {
        LtciApplicationSession session = getOrCreateSession(userId, "ltci_application");
        
        switch (session.getCurrentStep()) {
            case "GREETING":
                return explainLtciProcess();
                
            case "CARE_ASSESSMENT":
                return conductCareAssessment(message);
                
            case "FAMILY_INFO":
                return collectFamilyInformation(message);
                
            case "PREFERRED_SERVICES":
                return askPreferredServices(message);
                
            case "DOCUMENT_PREPARATION":
                return prepareRequiredDocuments(session);
                
            case "FINAL_REVIEW":
                return submitLtciApplication(session);
        }
    }
    
    private ChatResponse explainLtciProcess() {
        return ChatResponse.builder()
            .message("ğŸ¥ ì¥ê¸°ìš”ì–‘ì¸ì • ì‹ ì²­ ì ˆì°¨ë¥¼ ì•ˆë‚´í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\n" +
                    "ğŸ“ í•„ìš”í•œ ë‹¨ê³„:\n" +
                    "1ï¸âƒ£ ê±´ê°• ìƒíƒœ í‰ê°€ (5ë¶„)\n" +
                    "2ï¸âƒ£ ê°€ì¡± ì •ë³´ ì…ë ¥ (3ë¶„)\n" +
                    "3ï¸âƒ£ í¬ë§ ì„œë¹„ìŠ¤ ì„ íƒ (2ë¶„)\n" +
                    "4ï¸âƒ£ ì„œë¥˜ ìë™ ìƒì„± ë° ì œì¶œ\n\n" +
                    "ì´ ì†Œìš”ì‹œê°„: ì•½ 10ë¶„\n\n" +
                    "ì‹œì‘í•˜ì‹œë ¤ë©´ 'ì‹œì‘'ì´ë¼ê³  ë§ì”€í•´ì£¼ì„¸ìš”!")
            .type(ChatMessageType.PROCESS_GUIDE)
            .quickReplies(Arrays.asList("ì‹œì‘", "ë” ìì„¸í•œ ì„¤ëª…"))
            .build();
    }
    
    private ChatResponse conductCareAssessment(ChatMessage message) {
        // ê¸°ì¡´ ê±´ê°• ìƒíƒœ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ëŒ€í™”í˜•ìœ¼ë¡œ ì§„í–‰
        return HealthAssessmentChatbot.processCareAssessment(message);
    }
}
```

#### **B. ì²´í¬ë¦¬ìŠ¤íŠ¸ ìë™í™” ì‹œìŠ¤í…œ**

**1. ëŒ€í™”í˜• ê±´ê°• ìƒíƒœ ì²´í¬ë¦¬ìŠ¤íŠ¸**
```java
@Component
public class InteractiveCareAssessment {
    
    public class CareAssessmentChatbot {
        
        public ChatResponse processCareAssessment(ChatMessage message) {
            AssessmentSession session = getOrCreateSession(message.getUserId(), "care_assessment");
            
            switch (session.getCurrentQuestion()) {
                case "MOBILITY":
                    return askMobilityLevel();
                    
                case "EATING":
                    return askEatingLevel(session);
                    
                case "TOILET":
                    return askToiletLevel(session);
                    
                case "COMMUNICATION":
                    return askCommunicationLevel(session);
                    
                case "LTCI_GRADE":
                    return askLtciGrade(session);
                    
                case "ASSESSMENT_COMPLETE":
                    return generateAssessmentResult(session);
            }
        }
        
        private ChatResponse askMobilityLevel() {
            return ChatResponse.builder()
                .message("ğŸš¶â€â™‚ï¸ **ê±·ê¸° í™œë™ ëŠ¥ë ¥**ì— ëŒ€í•´ ì§ˆë¬¸ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\n" +
                        "ë‹¤ìŒ ì¤‘ ì–´ëŠ ê²ƒì´ ê°€ì¥ ê°€ê¹Œìš°ì‹ ê°€ìš”?\n\n" +
                        "1ï¸âƒ£ í˜¼ìì„œ ê±¸ì„ ìˆ˜ ìˆì–´ìš”\n" +
                        "2ï¸âƒ£ ì§€íŒ¡ì´ë‚˜ ë¶€ì¶•ì´ í•„ìš”í•´ìš”\n" +
                        "3ï¸âƒ£ íœ ì²´ì–´ë¥¼ ì‚¬ìš©í•´ìš”\n\n" +
                        "ë²ˆí˜¸ë‚˜ ì„¤ëª…ìœ¼ë¡œ ë‹µë³€í•´ì£¼ì„¸ìš”.")
                .type(ChatMessageType.MULTIPLE_CHOICE)
                .quickReplies(Arrays.asList("1", "2", "3", "í˜¼ìì„œ ê°€ëŠ¥", "ë¶€ì¶• í•„ìš”", "íœ ì²´ì–´ ì‚¬ìš©"))
                .build();
        }
        
        private ChatResponse generateAssessmentResult(AssessmentSession session) {
            HealthAssessment assessment = calculateAssessment(session);
            
            String resultMessage = String.format(
                "âœ… **ê±´ê°• ìƒíƒœ í‰ê°€ ì™„ë£Œ**\n\n" +
                "ğŸ“Š **í‰ê°€ ê²°ê³¼:**\n" +
                "â€¢ ADL ì ìˆ˜: %dì \n" +
                "â€¢ ì¢…í•© ì¼€ì–´ ë“±ê¸‰: %s\n" +
                "â€¢ ì¶”ì²œ ì‹œì„¤ íƒ€ì…: %s\n\n" +
                "ğŸ¯ **ë§¤ì¹­ëœ ì½”ë””ë„¤ì´í„°:** %dëª…\n" +
                "ğŸ¥ **ì¶”ì²œ ìš”ì–‘ì‹œì„¤:** %dê³³\n\n" +
                "ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                assessment.getAdlScore(),
                assessment.getOverallCareGrade(),
                getRecommendedFacilityTypes(assessment),
                getMatchedCoordinatorCount(assessment),
                getRecommendedFacilityCount(assessment)
            );
            
            return ChatResponse.builder()
                .message(resultMessage)
                .type(ChatMessageType.ASSESSMENT_RESULT)
                .quickReplies(Arrays.asList("ì½”ë””ë„¤ì´í„° ë§¤ì¹­", "ì‹œì„¤ ë‘˜ëŸ¬ë³´ê¸°", "ê²°ê³¼ ì €ì¥"))
                .data(assessment)
                .build();
        }
    }
}
```

**2. ì‹œì„¤ ê²¬í•™ ì²´í¬ë¦¬ìŠ¤íŠ¸ ìë™í™”**
```java
@Component
public class FacilityVisitChecklistBot {
    
    public ChatResponse processFacilityVisit(String userId, Long facilityId, ChatMessage message) {
        VisitSession session = getOrCreateSession(userId, facilityId);
        
        switch (session.getCurrentStep()) {
            case "PRE_VISIT":
                return providePreVisitGuidance();
                
            case "DURING_VISIT":
                return guideDuringVisit(message);
                
            case "POST_VISIT":
                return collectPostVisitFeedback(message);
                
            case "EVALUATION_COMPLETE":
                return generateVisitReport(session);
        }
    }
    
    private ChatResponse providePreVisitGuidance() {
        return ChatResponse.builder()
            .message("ğŸ¥ **ì‹œì„¤ ê²¬í•™ ì¤€ë¹„ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!**\n\n" +
                    "ğŸ“‹ **ê²¬í•™ ì‹œ í™•ì¸í•  í•­ëª©ë“¤:**\n\n" +
                    "ğŸ” **ì‹œì„¤ í™˜ê²½**\n" +
                    "â€¢ ì²­ê²°ë„ ë° ëƒ„ìƒˆ\n" +
                    "â€¢ ì•ˆì „ì‹œì„¤ (ë‚œê°„, ì‘ê¸‰ë²¨)\n" +
                    "â€¢ ê³µìš©ê³µê°„ í™œìš©ë„\n\n" +
                    "ğŸ‘¥ **ì§ì› ì„œë¹„ìŠ¤**\n" +
                    "â€¢ ì§ì› ì¹œì ˆë„\n" +
                    "â€¢ ì „ë¬¸ì„± ë° ê²½í—˜\n" +
                    "â€¢ ì…ì£¼ìì™€ì˜ ì†Œí†µ ë°©ì‹\n\n" +
                    "ğŸ’° **ë¹„ìš© ë° ê³„ì•½**\n" +
                    "â€¢ ì›” ì´ìš©ë£Œ ë° ì¶”ê°€ ë¹„ìš©\n" +
                    "â€¢ ê³„ì•½ ì¡°ê±´ ë° í™˜ë¶ˆ ì •ì±…\n\n" +
                    "ê²¬í•™ì„ ì‹œì‘í•˜ì‹œë©´ 'ê²¬í•™ ì‹œì‘'ì´ë¼ê³  ì•Œë ¤ì£¼ì„¸ìš”!")
            .type(ChatMessageType.VISIT_GUIDE)
            .quickReplies(Arrays.asList("ê²¬í•™ ì‹œì‘", "ì²´í¬ë¦¬ìŠ¤íŠ¸ ë°›ê¸°", "ì§ˆë¬¸ ëª©ë¡"))
            .build();
    }
    
    private ChatResponse guideDuringVisit(ChatMessage message) {
        if (message.getContent().contains("ê²¬í•™ ì‹œì‘")) {
            return startInteractiveChecklist();
        }
        
        // ìŒì„±/í…ìŠ¤íŠ¸ë¡œ ì‹¤ì‹œê°„ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì§„í–‰
        return processChecklistItem(message);
    }
    
    private ChatResponse startInteractiveChecklist() {
        return ChatResponse.builder()
            .message("ğŸ“± **ì‹¤ì‹œê°„ ê²¬í•™ ê°€ì´ë“œë¥¼ ì‹œì‘í•©ë‹ˆë‹¤!**\n\n" +
                    "ğŸ¤ ìŒì„±ìœ¼ë¡œ ë‹µë³€í•˜ì‹œê±°ë‚˜ í…ìŠ¤íŠ¸ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.\n\n" +
                    "**ì²« ë²ˆì§¸ ì§ˆë¬¸:**\n" +
                    "ì‹œì„¤ì— ë“¤ì–´ì„œìë§ˆì ëŠê»´ì§€ëŠ” ì²«ì¸ìƒì€ ì–´ë– ì‹ ê°€ìš”?\n" +
                    "(ì²­ê²°ë„, ëƒ„ìƒˆ, ë¶„ìœ„ê¸° ë“±)")
            .type(ChatMessageType.VOICE_INPUT_ENABLED)
            .expectedInput(Arrays.asList("cleanliness", "smell", "atmosphere"))
            .build();
    }
}
```

#### **C. ì¼ì • ê´€ë¦¬ ë° ì˜ˆì•½ ìë™í™”**

**1. ë³‘ì› ì˜ˆì•½ ìë™í™”**
```java
@Component
public class HospitalBookingBot {
    
    public ChatResponse processHospitalBooking(String userId, ChatMessage message) {
        BookingSession session = getOrCreateSession(userId, "hospital_booking");
        
        switch (session.getCurrentStep()) {
            case "HOSPITAL_SELECTION":
                return recommendHospitals(session);
                
            case "APPOINTMENT_TYPE":
                return askAppointmentType(message);
                
            case "PREFERRED_TIME":
                return askPreferredTime(message);
                
            case "BOOKING_CONFIRMATION":
                return confirmAndBook(session);
        }
    }
    
    private ChatResponse recommendHospitals(BookingSession session) {
        // ê±´ê°• ìƒíƒœ ê¸°ë°˜ ë³‘ì› ì¶”ì²œ
        List<Hospital> recommendedHospitals = hospitalRecommendationService
            .recommend(session.getHealthAssessment());
            
        String hospitalList = recommendedHospitals.stream()
            .map(hospital -> String.format(
                "ğŸ¥ **%s**\n" +
                "ğŸ“ %s\n" +
                "â­ %s (%dê°œ ë¦¬ë·°)\n" +
                "ğŸš— ê±°ë¦¬: %s\n" +
                "ğŸ’° ì§„ë£Œë¹„: %s\n",
                hospital.getName(),
                hospital.getAddress(),
                hospital.getRating(),
                hospital.getReviewCount(),
                hospital.getDistance(),
                hospital.getEstimatedCost()
            ))
            .collect(Collectors.joining("\n"));
            
        return ChatResponse.builder()
            .message("ğŸ¥ **ê±´ê°•ê²€ì§„ ê°€ëŠ¥í•œ ë³‘ì›ì„ ì¶”ì²œí•´ë“œë¦½ë‹ˆë‹¤:**\n\n" + hospitalList +
                    "\nì–´ëŠ ë³‘ì›ì—ì„œ ê²€ì§„ë°›ìœ¼ì‹œê² ì–´ìš”?")
            .type(ChatMessageType.HOSPITAL_SELECTION)
            .quickReplies(recommendedHospitals.stream()
                .map(Hospital::getName)
                .collect(Collectors.toList()))
            .build();
    }
}
```

#### **D. ë‹¤êµ­ì–´ ì§€ì› ë° ìŒì„± ì¸ì‹**

**1. ë‹¤êµ­ì–´ ëŒ€í™” ì‹œìŠ¤í…œ**
```java
@Component
public class MultilingualChatbot {
    
    public ChatResponse processMessage(ChatMessage message) {
        String detectedLanguage = languageDetectionService.detect(message.getContent());
        String userId = message.getUserId();
        
        // ì‚¬ìš©ì ì–¸ì–´ ì„¤ì • ì €ì¥
        userPreferenceService.setLanguage(userId, detectedLanguage);
        
        // ë©”ì‹œì§€ë¥¼ í•œêµ­ì–´ë¡œ ë²ˆì—­ (ì²˜ë¦¬ìš©)
        String translatedMessage = translationService.translate(message.getContent(), detectedLanguage, "ko");
        
        // ì±—ë´‡ ë¡œì§ ì²˜ë¦¬
        ChatResponse response = chatbotEngine.process(translatedMessage, userId);
        
        // ì‘ë‹µì„ ì‚¬ìš©ì ì–¸ì–´ë¡œ ë²ˆì—­
        String localizedResponse = translationService.translate(response.getMessage(), "ko", detectedLanguage);
        response.setMessage(localizedResponse);
        
        return response;
    }
    
    @Service
    public class VoiceInteractionService {
        
        public ChatResponse processVoiceInput(String userId, AudioData audioData) {
            // ìŒì„±ì„ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜
            String recognizedText = speechToTextService.recognize(audioData);
            
            // ì–¸ì–´ ê°ì§€ ë° ë²ˆì—­
            ChatMessage textMessage = ChatMessage.builder()
                .userId(userId)
                .content(recognizedText)
                .type(MessageType.VOICE)
                .build();
                
            ChatResponse response = processMessage(textMessage);
            
            // ì‘ë‹µì„ ìŒì„±ìœ¼ë¡œ ë³€í™˜
            AudioData responseAudio = textToSpeechService.synthesize(
                response.getMessage(), 
                userPreferenceService.getLanguage(userId)
            );
            
            response.setAudioResponse(responseAudio);
            return response;
        }
    }
}
```

#### **E. ì§„í–‰ ìƒí™© ì¶”ì  ë° ì•Œë¦¼**

**1. í”„ë¡œì„¸ìŠ¤ ì¶”ì  ì‹œìŠ¤í…œ**
```java
@Entity
public class ChatbotProcessTracker {
    @Id
    private Long id;
    private String userId;
    private String processType;              // "health_certificate", "ltci_application"
    private String currentStep;
    private Integer totalSteps;
    private Integer completedSteps;
    private Double progressPercentage;
    
    // ìˆ˜ì§‘ëœ ë°ì´í„°
    @Column(columnDefinition = "TEXT")
    private String collectedData;            // JSON í˜•íƒœë¡œ ì €ì¥
    
    // ìƒì„±ëœ ë¬¸ì„œë“¤
    @ElementCollection
    private List<String> generatedDocuments;
    
    // ë‹¤ìŒ ì•¡ì…˜
    private String nextAction;
    private LocalDateTime nextActionDate;
    
    private LocalDateTime createdAt;
    private LocalDateTime lastUpdated;
}

@Service
public class ProcessNotificationService {
    
    public void sendProgressUpdate(String userId, String processType) {
        ChatbotProcessTracker tracker = processTrackerRepository
            .findByUserIdAndProcessType(userId, processType);
            
        String progressMessage = String.format(
            "ğŸ“‹ **%s ì§„í–‰ ìƒí™©**\n\n" +
            "âœ… ì™„ë£Œ: %d/%d ë‹¨ê³„ (%.0f%%)\n" +
            "ğŸ“ í˜„ì¬ ë‹¨ê³„: %s\n" +
            "â° ë‹¤ìŒ í• ì¼: %s\n" +
            "ğŸ“… ì˜ˆì •ì¼: %s",
            getProcessDisplayName(processType),
            tracker.getCompletedSteps(),
            tracker.getTotalSteps(),
            tracker.getProgressPercentage(),
            getCurrentStepName(tracker.getCurrentStep()),
            tracker.getNextAction(),
            tracker.getNextActionDate()
        );
        
        notificationService.sendChatbotMessage(userId, progressMessage);
    }
    
    @Scheduled(cron = "0 0 9 * * *") // ë§¤ì¼ ì˜¤ì „ 9ì‹œ
    public void sendDailyReminders() {
        List<ChatbotProcessTracker> pendingProcesses = processTrackerRepository
            .findPendingProcesses();
            
        pendingProcesses.forEach(tracker -> {
            if (needsReminder(tracker)) {
                sendReminderMessage(tracker);
            }
        });
    }
}
```

#### **F. ì±—ë´‡ ì‹œìŠ¤í…œ í˜¸í™˜ì„± ë° í™•ì¥ì„± ê²€í† **

**1. ê¸°ì¡´ ì‹œìŠ¤í…œê³¼ì˜ API í˜¸í™˜ì„±**
```yaml
í˜¸í™˜ ê°€ëŠ¥í•œ ê¸°ì¡´ API:
  - HealthAssessment API: ê±´ê°• ìƒíƒœ ì²´í¬ë¦¬ìŠ¤íŠ¸ ê²°ê³¼ ì—°ë™
  - CoordinatorMatching API: ì±—ë´‡ â†’ ë§¤ì¹­ ì‹œìŠ¤í…œ ìë™ ì—°ê³„
  - FacilityRecommendation API: ì‹œì„¤ ì¶”ì²œ ê²°ê³¼ í™œìš©
  - DocumentGeneration API: ì„œë¥˜ ìë™ ìƒì„± ì—°ë™

ë°ì´í„° êµ¬ì¡° í˜¸í™˜ì„±:
  - ê¸°ì¡´ HealthAssessment ì—”í‹°í‹°ì™€ 100% í˜¸í™˜
  - ChatbotProcessTrackerê°€ ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ ì¶”ì ê³¼ ì—°ê³„
  - ìƒì„±ëœ ë¬¸ì„œëŠ” ê¸°ì¡´ íŒŒì¼ ê´€ë¦¬ ì‹œìŠ¤í…œ í™œìš©
```

**2. í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜**
```java
// ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ ì¶”ê°€ ì‹œ í™•ì¥ ì˜ˆì‹œ
@Component
public class InsuranceApplicationBot extends BaseDocumentBot {
    
    @Override
    protected List<String> getRequiredSteps() {
        return Arrays.asList(
            "INSURANCE_TYPE_SELECTION",
            "BENEFICIARY_INFO", 
            "COVERAGE_SELECTION",
            "DOCUMENT_GENERATION"
        );
    }
    
    @Override
    protected String getProcessType() {
        return "insurance_application";
    }
}

// ë‹¤êµ­ì–´ í™•ì¥
@Component
public class LanguageExpansionService {
    
    public void addNewLanguage(String languageCode, Map<String, String> translations) {
        // ìƒˆë¡œìš´ ì–¸ì–´ ë™ì  ì¶”ê°€ ì§€ì›
        translationService.addLanguageSupport(languageCode, translations);
        voiceService.addTTSSupport(languageCode);
    }
}
```

**3. ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™ í™•ì¥ì„±**
```yaml
í™•ì¥ ê°€ëŠ¥í•œ ì—°ë™:
  - ì™¸êµë¶€ API: ì¬ì™¸êµ­ë¯¼ ì •ë³´ ìë™ ì¡°íšŒ
  - ë³´ê±´ë³µì§€ë¶€ API: ì¥ê¸°ìš”ì–‘ë³´í—˜ ì‹ ì²­ ìë™ ì œì¶œ
  - êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨ API: ê±´ê°•ë³´í—˜ ì •ë³´ ì—°ë™
  - ì „ìì •ë¶€ API: ê°ì¢… ë¯¼ì› ì„œë¥˜ ìë™ ì œì¶œ

ëª¨ë“ˆí™”ëœ í™•ì¥:
  - ìƒˆë¡œìš´ ì„œë¥˜ íƒ€ì… í”ŒëŸ¬ê·¸ì¸ ë°©ì‹ ì¶”ê°€
  - ìƒˆë¡œìš´ ì²´í¬ë¦¬ìŠ¤íŠ¸ í…œí”Œë¦¿ ë™ì  ë¡œë”©
  - ìƒˆë¡œìš´ ì–¸ì–´íŒ© ëŸ°íƒ€ì„ ì¶”ê°€
  - ìƒˆë¡œìš´ ìŒì„± ì—”ì§„ ì—°ë™
```

**4. ì„±ëŠ¥ ë° í™•ì¥ì„± ê³ ë ¤ì‚¬í•­**
```yaml
ì„±ëŠ¥ ìµœì í™”:
  - ì„¸ì…˜ ê´€ë¦¬: Redis ê¸°ë°˜ ë¶„ì‚° ì„¸ì…˜ ì§€ì›
  - ë³‘ë ¬ ì²˜ë¦¬: ë‹¤ì¤‘ ì‚¬ìš©ì ë™ì‹œ ëŒ€í™” ì§€ì›
  - ìºì‹±: ìì£¼ ì‚¬ìš©ë˜ëŠ” í…œí”Œë¦¿ ë©”ëª¨ë¦¬ ìºì‹œ
  - ë¡œë“œë°¸ëŸ°ì‹±: ë‹¤ì¤‘ ì±—ë´‡ ì¸ìŠ¤í„´ìŠ¤ ì§€ì›

ëª¨ë‹ˆí„°ë§:
  - ëŒ€í™” ì„±ê³µë¥  ì¶”ì 
  - í”„ë¡œì„¸ìŠ¤ ì™„ë£Œìœ¨ ëª¨ë‹ˆí„°ë§
  - ì‚¬ìš©ì ë§Œì¡±ë„ ìˆ˜ì§‘
  - ì‹œìŠ¤í…œ ì‘ë‹µ ì‹œê°„ ì¸¡ì •
```

---

## ğŸ¤ ì½”ë””ë„¤ì´í„° ì›ìŠ¤í†± ì„œë¹„ìŠ¤ (í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸)

### ì„œë¹„ìŠ¤ ê°œìš”

ì½”ë””ë„¤ì´í„°ëŠ” **í•´ì™¸ ì¬ì™¸ë™í¬**ë¥¼ ëŒ€ìƒìœ¼ë¡œ **ì…êµ­ ì ˆì°¨ë¶€í„° ìš”ì–‘ì› ì…ì£¼ê¹Œì§€** ì „ ê³¼ì •ì„ ì›ìŠ¤í†±ìœ¼ë¡œ ì§€ì›í•˜ëŠ” ì „ë¬¸ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

### 4ë‹¨ê³„ ì›ìŠ¤í†± ì„œë¹„ìŠ¤ í”„ë¡œì„¸ìŠ¤

#### **1ë‹¨ê³„: ì…êµ­ ì „ ì¤€ë¹„ ì§€ì› (Pre-Arrival)**
```yaml
ì„œë¹„ìŠ¤ ê¸°ê°„: 1-2ê°œì›”
ì£¼ìš” ì—…ë¬´:
  - ğŸ›‚ ë¹„ì ìƒë‹´ ë° ì„œë¥˜ ì¤€ë¹„ ì§€ì› (ë°©ë¬¸ë™ë°˜ë¹„ì, ê´€ê´‘ë¹„ì ë“±)
  - âœˆï¸ í•­ê³µí¸ ì˜ˆì•½ ë° êµí†µí¸ ì•ˆë‚´
  - ğŸ¨ ì„ì‹œ ìˆ™ì†Œ ì˜ˆì•½ (ë‹¨ê¸° ë Œíƒˆ, ê²ŒìŠ¤íŠ¸í•˜ìš°ìŠ¤)
  - ğŸ“‹ ì‚¬ì „ ìƒë‹´ (í™”ìƒí†µí™”ë¡œ ê°€ì¡± ìƒí™©, ìš”êµ¬ì‚¬í•­ íŒŒì•…)
  - ğŸ’° ì˜ˆì‚° ê³„íš ìˆ˜ë¦½ (ìš”ì–‘ì› ë¹„ìš©, ìƒí™œë¹„, ì„œë¹„ìŠ¤ ë¹„ìš©)
  - ğŸ“± í•œêµ­ ìƒí™œ í•„ìˆ˜ ì •ë³´ ì œê³µ (í†µì‹ , êµí†µ, ì˜ë£Œ ë“±)
```

#### **2ë‹¨ê³„: ì…êµ­ ë° ì •ì°© ì§€ì› (Arrival & Settlement)**  
```yaml
ì„œë¹„ìŠ¤ ê¸°ê°„: 1-2ì£¼
ì£¼ìš” ì—…ë¬´:
  - ğŸš— ê³µí•­ í”½ì—… ì„œë¹„ìŠ¤ (ì¸ì²œê³µí•­ â†’ ì„ì‹œ ìˆ™ì†Œ)
  - ğŸª ìƒí™œ í•„ìˆ˜ ì—…ë¬´ ë™í–‰ ì§€ì›:
    * ì€í–‰ ê³„ì¢Œ ê°œì„¤ (ì™¸êµ­ì¸ ì „ìš© ê³„ì¢Œ)
    * íœ´ëŒ€í° ê°œí†µ (ì„ ë¶ˆ/í›„ë¶ˆ ìš”ê¸ˆì œ ì„ íƒ)
    * ê±´ê°•ë³´í—˜ ê°€ì… ì ˆì°¨ (êµ­ë¯¼ê±´ê°•ë³´í—˜, ì™¸êµ­ì¸ ë³´í—˜)
    * êµí†µì¹´ë“œ ë°œê¸‰ (T-money, Wowpass)
  - ğŸ›ï¸ ìƒí™œìš©í’ˆ êµ¬ë§¤ ë™í–‰ (ë§ˆíŠ¸, ì•½êµ­, ìƒí•„í’ˆ)
  - ğŸ—£ï¸ ì–¸ì–´ ì¥ë²½ í•´ê²° (ì‹¤ì‹œê°„ í†µë²ˆì—­ ì§€ì›)
  - ğŸ“ ì£¼ë³€ í™˜ê²½ ì•ˆë‚´ (ë³‘ì›, ì•½êµ­, ë§ˆíŠ¸, ê´€ê³µì„œ ìœ„ì¹˜)
```

#### **3ë‹¨ê³„: ìš”ì–‘ì› ë§¤ì¹­ ë° ì„ íƒ ì§€ì› (Care Facility Matching)**
```yaml
ì„œë¹„ìŠ¤ ê¸°ê°„: 2-4ì£¼  
ì£¼ìš” ì—…ë¬´:
  - ğŸ¥ ë¶€ëª¨ë‹˜ ê±´ê°•ìƒíƒœ ì¢…í•© í‰ê°€:
    * ì „ë¬¸ì˜ ê±´ê°•ê²€ì§„ ë™í–‰
    * ìš”ì–‘ë“±ê¸‰ ì‹ ì²­ ë„ì›€ (ì¥ê¸°ìš”ì–‘ë³´í—˜)
    * ì˜ë£Œì§„ ì†Œê²¬ ë²ˆì—­ ë° ì„¤ëª…
  - ğŸ¯ ë§ì¶¤í˜• ìš”ì–‘ì› ì¶”ì²œ:
    * ê±´ê°•ìƒíƒœ/ì˜ˆì‚°/ìœ„ì¹˜ ê¸°ë°˜ ë§¤ì¹­
    * AI ë§¤ì¹­ ì‹œìŠ¤í…œ í™œìš© (ê±°ë¦¬, ë¹„ìš©, í‰ì , íŠ¹í™”ì„œë¹„ìŠ¤)
    * 3-5ê°œ í›„ë³´ ìš”ì–‘ì› ì„ ë³„
  - ğŸ‘€ ìš”ì–‘ì› ê²¬í•™ ë° ìƒë‹´ ë™í–‰:
    * ì‹œì„¤ íˆ¬ì–´ ê°€ì´ë“œ (ê° ì‹œì„¤ íŠ¹ì§• ì„¤ëª…)
    * ì›ì¥/ê°„í˜¸ì‚¬ì™€ ìƒë‹´ í†µì—­
    * ê³„ì•½ì„œ ë° ì´ìš©ì•½ê´€ ê²€í† 
    * ë¹„ìš© ì‚°ì • ë° í˜‘ìƒ ëŒ€í–‰
  - ğŸ“„ ì…ì£¼ ì¤€ë¹„ ë° í–‰ì • ì§€ì›:
    * ì…ì£¼ ì„œë¥˜ ì‘ì„± ë„ì›€
    * ì…ì£¼ ì¤€ë¹„ë¬¼ ë¦¬ìŠ¤íŠ¸ ì œê³µ
    * ì…ì£¼ì¼ ì¡°ì • ë° ì´ì‚¬ ì¤€ë¹„
```

#### **4ë‹¨ê³„: ì‚¬í›„ ê´€ë¦¬ ë° ì§€ì† ì§€ì› (Ongoing Support)**
```yaml
ì„œë¹„ìŠ¤ ê¸°ê°„: ê³„ì•½ì— ë”°ë¼ (6ê°œì›”~2ë…„)
ì£¼ìš” ì—…ë¬´:
  - ğŸ“… ì •ê¸° ë°©ë¬¸ ë° ëª¨ë‹ˆí„°ë§:
    * ì›” 2-4íšŒ ìš”ì–‘ì› ë°©ë¬¸
    * ë¶€ëª¨ë‹˜ ê±´ê°•ìƒíƒœ ë° ë§Œì¡±ë„ ì²´í¬
    * ìš”ì–‘ì›ê³¼ì˜ ì†Œí†µ ë° ê°œì„ ì‚¬í•­ ë…¼ì˜
  - ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ê°€ì¡± ì†Œí†µ ì§€ì›:
    * ì •ê¸° í™”ìƒí†µí™” ì£¼ì„  (í•´ì™¸ ê°€ì¡±ê³¼ ë¶€ëª¨ë‹˜)
    * ê±´ê°•ìƒíƒœ ë¦¬í¬íŠ¸ ë²ˆì—­ ë° ì „ë‹¬
    * ì‘ê¸‰ìƒí™© ì‹œ ì¦‰ì‹œ ì—°ë½ ë° ëŒ€ì‘
  - ğŸ¥ ì˜ë£Œ ì—°ê³„ ì„œë¹„ìŠ¤:
    * ë³‘ì› ì§„ë£Œ ë™í–‰ (ì‘ê¸‰ì‹¤, ì™¸ë˜ì§„ë£Œ)
    * ì˜ë£Œì§„ê³¼ì˜ ì†Œí†µ ë° í†µì—­
    * ì²˜ë°©ì „ ë° ì¹˜ë£Œê³„íš ì„¤ëª…
  - ğŸ‰ íŠ¹ë³„ í–‰ì‚¬ ì§€ì›:
    * ìƒì¼, ëª…ì ˆ ë“± ê¸°ë…ì¼ ì±™ê¹€
    * ê°€ì¡± ë°©ë¬¸ ì‹œ ê³µí•­ í”½ì—… ë° ì•ˆë‚´
    * ë¬¸í™” ì²´í—˜ í”„ë¡œê·¸ë¨ ê¸°íš
```

### ì½”ë””ë„¤ì´í„° ì „ë¬¸ ë¶„ì•¼ ë° ìê²© ìš”ê±´

#### **ì „ë¬¸ ë¶„ì•¼ë³„ ì½”ë””ë„¤ì´í„°**
```yaml
ì˜ë£Œ ì „ë¬¸ ì½”ë””ë„¤ì´í„°:
  - ê°„í˜¸ì‚¬, ì‚¬íšŒë³µì§€ì‚¬, ìš”ì–‘ë³´í˜¸ì‚¬ ìê²© ë³´ìœ 
  - ì˜ë£Œì§„ê³¼ì˜ ì „ë¬¸ì  ì†Œí†µ ëŠ¥ë ¥
  - ì¹˜ë§¤, ë‡Œì¡¸ì¤‘ ë“± íŠ¹ì • ì§ˆí™˜ ì „ë¬¸ì„±

ë²•ë¬´/í–‰ì • ì „ë¬¸ ì½”ë””ë„¤ì´í„°:  
  - í–‰ì •ì‚¬, ë²•ë¬´ì‚¬ ë“± ìê²© ë³´ìœ 
  - ë¹„ì, ë³´í—˜, í–‰ì •ì ˆì°¨ ì „ë¬¸ ì§€ì‹
  - ì™¸êµ­ì¸ ê´€ë ¨ ë²•ë ¹ ìˆ™ì§€

ì–¸ì–´ ì „ë¬¸ ì½”ë””ë„¤ì´í„°:
  - ë‹¤êµ­ì–´ êµ¬ì‚¬ ëŠ¥ë ¥ (ì˜ì–´, ì¤‘êµ­ì–´, ì¼ë³¸ì–´)
  - ë²ˆì—­/í†µì—­ ìê²©ì¦ ë³´ìœ 
  - ë¬¸í™”ì  ì°¨ì´ ì´í•´ ë° ì¤‘ì¬ ëŠ¥ë ¥

ì‹¬ë¦¬ ìƒë‹´ ì „ë¬¸ ì½”ë””ë„¤ì´í„°:
  - ì‹¬ë¦¬ìƒë‹´ì‚¬, ì‚¬íšŒë³µì§€ì‚¬ ìê²©
  - ê°€ì¡± ê°ˆë“± ì¤‘ì¬ ë° ì‹¬ë¦¬ì  ì§€ì›
  - ì¹˜ë§¤ í™˜ì ë° ê°€ì¡± ìƒë‹´ ì „ë¬¸ì„±
```

### ìˆ˜ìµ ëª¨ë¸ ë° ì„œë¹„ìŠ¤ ìš”ê¸ˆ

#### **ì„œë¹„ìŠ¤ íŒ¨í‚¤ì§€ë³„ ìš”ê¸ˆ**
```yaml
ê¸°ë³¸ íŒ¨í‚¤ì§€ (Essential):
  - ê¸°ê°„: 3ê°œì›” (ì…êµ­~ì…ì£¼ ì™„ë£Œ)
  - ì„œë¹„ìŠ¤: 1-3ë‹¨ê³„ í¬í•¨
  - ìš”ê¸ˆ: 300-500ë§Œì›
  - ëŒ€ìƒ: ê¸°ë³¸ì ì¸ ì§€ì›ë§Œ í•„ìš”í•œ ê²½ìš°

í”„ë¦¬ë¯¸ì—„ íŒ¨í‚¤ì§€ (Premium):
  - ê¸°ê°„: 6ê°œì›” (ì…êµ­~ì‚¬í›„ê´€ë¦¬ 6ê°œì›”)
  - ì„œë¹„ìŠ¤: ì „ ë‹¨ê³„ í¬í•¨ + ì§‘ì¤‘ ì‚¬í›„ê´€ë¦¬
  - ìš”ê¸ˆ: 800-1200ë§Œì›  
  - ëŒ€ìƒ: ì „ë¬¸ì  ì¼€ì–´ê°€ í•„ìš”í•œ ê²½ìš°

VIP íŒ¨í‚¤ì§€ (Concierge):
  - ê¸°ê°„: 1-2ë…„ (ì¥ê¸° ì‚¬í›„ê´€ë¦¬)
  - ì„œë¹„ìŠ¤: ë§ì¶¤í˜• í”„ë¦¬ë¯¸ì—„ ì„œë¹„ìŠ¤
  - ìš”ê¸ˆ: 1500-3000ë§Œì›
  - ëŒ€ìƒ: ê³ ì†Œë“ì¸µ, ë³µì¡í•œ ìƒí™© ì¼€ì´ìŠ¤
```

### ë¶€ê°€ ì„œë¹„ìŠ¤ (ì¶”ê°€ ìˆ˜ìµì›)

#### **ì „ë¬¸ ìƒë‹´ ì„œë¹„ìŠ¤**
```yaml
ë²•ë¬´ ìƒë‹´:
  - ìƒì†, ì¬ì‚° ê´€ë¦¬, ì„¸ë¬´ ë¬¸ì œ
  - í•´ì™¸ ê±°ì£¼ì íŠ¹í™” ë²•ì  ì´ìŠˆ
  - ì‹œê°„ë‹¹ 10-20ë§Œì›

ê¸ˆìœµ ìƒë‹´:  
  - í•´ì™¸ ì†¡ê¸ˆ, í™˜ì „, íˆ¬ì ìƒë‹´
  - ë³´í—˜ ê°€ì… ë° í´ë ˆì„ ì²˜ë¦¬
  - ê±´ë³„ 50-200ë§Œì›

ì˜ë£Œ ì½”ë””ë„¤ì´ì…˜:
  - ì „ë¬¸ì˜ ì†Œê°œ ë° ì˜ˆì•½ ëŒ€í–‰
  - ê±´ê°•ê²€ì§„ íŒ¨í‚¤ì§€ ê¸°íš
  - ê±´ë³„ 30-100ë§Œì›

ë¶€ë™ì‚° ì„œë¹„ìŠ¤:
  - ì„ì‹œ ê±°ì£¼ì§€ ì„ëŒ€ì°¨ ê³„ì•½
  - ì¥ê¸° ê±°ì£¼ ì‹œ ë¶€ë™ì‚° íˆ¬ì ìƒë‹´
  - ì¤‘ê°œìˆ˜ìˆ˜ë£Œ ìˆ˜ìµ ë¶„ë°°
```

#### **ê¸°ì—… ë° ê¸°ê´€ ì—°ê³„ ì„œë¹„ìŠ¤**
```yaml
ë³´í—˜íšŒì‚¬ ì—°ê³„:
  - ì™¸êµ­ì¸ ì „ìš© ë³´í—˜ ìƒí’ˆ íŒë§¤
  - ë³´í—˜ê¸ˆ ì²­êµ¬ ëŒ€í–‰ ì„œë¹„ìŠ¤
  - ìˆ˜ìˆ˜ë£Œ ìˆ˜ìµ

í•­ê³µì‚¬/ì—¬í–‰ì‚¬ ì—°ê³„:
  - í•­ê³µê¶Œ ì˜ˆì•½ ëŒ€í–‰
  - ê°€ì¡± ë°©ë¬¸ ì‹œ ì—¬í–‰ íŒ¨í‚¤ì§€
  - ìˆ˜ìˆ˜ë£Œ ìˆ˜ìµ

ì˜ë£Œê¸°ê´€ ì—°ê³„:
  - ê±´ê°•ê²€ì§„ íŒ¨í‚¤ì§€ ê¸°íš
  - ì˜ë£Œê´€ê´‘ ì„œë¹„ìŠ¤ ì—°ê³„
  - ìˆ˜ìˆ˜ë£Œ ìˆ˜ìµ

ìš”ì–‘ì› ì—°ê³„:
  - ìš”ì–‘ì› ì…ì£¼ ì¤‘ê°œ ìˆ˜ìˆ˜ë£Œ
  - ì‹œì„¤ ê°œì„  ì»¨ì„¤íŒ…
  - ë§¤ì¹­ ì„±ê³µ ìˆ˜ìˆ˜ë£Œ
```

### ì½”ë””ë„¤ì´í„° í’ˆì§ˆ ê´€ë¦¬ ì‹œìŠ¤í…œ

#### **ê³ ê° ë§Œì¡±ë„ ê´€ë¦¬**
```yaml
ì‹¤ì‹œê°„ í”¼ë“œë°± ì‹œìŠ¤í…œ:
  - ì„œë¹„ìŠ¤ ë‹¨ê³„ë³„ ë§Œì¡±ë„ ì¡°ì‚¬
  - ëª¨ë°”ì¼ ì•±ì„ í†µí•œ ì¦‰ì‹œ í”¼ë“œë°±
  - ë¶ˆë§Œ ì‚¬í•­ ì¦‰ì‹œ ëŒ€ì‘ ì²´ê³„

ì •ê¸° í‰ê°€ ì‹œìŠ¤í…œ:
  - ì›”ë³„ ì„œë¹„ìŠ¤ í’ˆì§ˆ í‰ê°€
  - ê³ ê° ì¶”ì²œë„ ì¡°ì‚¬ (NPS)
  - ì½”ë””ë„¤ì´í„° ì„±ê³¼ í‰ê°€

ê°œì„  ì‹œìŠ¤í…œ:
  - ê³ ê° ì˜ê²¬ ë°˜ì˜ í”„ë¡œì„¸ìŠ¤
  - ì„œë¹„ìŠ¤ í‘œì¤€í™” ë° ë§¤ë‰´ì–¼ ì—…ë°ì´íŠ¸
  - ì½”ë””ë„¤ì´í„° êµìœ¡ ë° íŠ¸ë ˆì´ë‹
```

### ğŸ”‘ ì‹¤ì œ ê³µê³µë°ì´í„° API í™œìš© (ë°œê¸‰ë°›ì€ ì¸ì¦í‚¤ ê¸°ë°˜)

#### **ë°œê¸‰ë°›ì€ API ëª©ë¡ ë° í™œìš© ë°©ì•ˆ**
```yaml
ì¸ì¦í‚¤: CCXHQiSSQ0J+RRaadSjmmS7ltxG/tlSVOYMjh45MmGne68ptgGAaAJVJti8nBazSjLemTAyb5gAuj43xq7fTog==
í™œìš©ê¸°ê°„: 2025-07-16 ~ 2027-07-18

ğŸ¥ êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨_ì¥ê¸°ìš”ì–‘ê¸°ê´€ ê²€ìƒ‰ ì„œë¹„ìŠ¤:
  í™œìš©ë‹¨ê³„: "3ë‹¨ê³„ - ìš”ì–‘ì› ë§¤ì¹­"
  ê¸°ëŠ¥: ë§ì¶¤í˜• ìš”ì–‘ì› ì¶”ì²œ (ì§€ì—­/ì˜ˆì‚°/íŠ¹ì„±ë³„)
  URL: https://apis.data.go.kr/B550928/searchLtcInsttService01

ğŸ“‹ êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨_ì¥ê¸°ìš”ì–‘ê¸°ê´€ ì‹œì„¤ë³„ ìƒì„¸ì¡°íšŒ ì„œë¹„ìŠ¤:
  í™œìš©ë‹¨ê³„: "3ë‹¨ê³„ - ìš”ì–‘ì› ìƒì„¸ ì •ë³´"
  ê¸°ëŠ¥: ì‹œì„¤ ê·œëª¨, ì„œë¹„ìŠ¤, ìš”ê¸ˆ ìƒì„¸ ì¡°íšŒ
  URL: https://apis.data.go.kr/B550928/getLtcInsttDetailInfoService02

âš•ï¸ ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì›_ë³‘ì›ì •ë³´ì„œë¹„ìŠ¤:
  í™œìš©ë‹¨ê³„: "2ë‹¨ê³„ - ê±´ê°•ê²€ì§„", "4ë‹¨ê³„ - ì˜ë£Œ ì—°ê³„"
  ê¸°ëŠ¥: ê±´ê°•ê²€ì§„ ë³‘ì› ì¶”ì²œ, ì‘ê¸‰ ì˜ë£Œì§„ ì—°ê²°
  URL: https://apis.data.go.kr/B551182/hospInfoServicev2

ğŸ’Š êµ­ë¦½ì¤‘ì•™ì˜ë£Œì›_ì „êµ­ ì•½êµ­ ì •ë³´ ì¡°íšŒ ì„œë¹„ìŠ¤:
  í™œìš©ë‹¨ê³„: "2ë‹¨ê³„ - ìƒí™œ ì •ì°©", "4ë‹¨ê³„ - ì˜ë£Œ ì§€ì›"
  ê¸°ëŠ¥: ì²˜ë°©ì „ ì²˜ë¦¬ ê°€ëŠ¥ ì•½êµ­ ì•ˆë‚´
  URL: https://apis.data.go.kr/B552657/ErmctInsttInfoInqireService

ğŸ” ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì›_ìš”ì–‘ê¸°ê´€ê°œíì—…ì •ë³´ì¡°íšŒì„œë¹„ìŠ¤:
  í™œìš©ë‹¨ê³„: "3ë‹¨ê³„ - ì‹ ë¢°ì„± ê²€ì¦"
  ê¸°ëŠ¥: ìš”ì–‘ê¸°ê´€ ìš´ì˜ ìƒíƒœ ì‹¤ì‹œê°„ í™•ì¸
  URL: https://apis.data.go.kr/B551182/yadmOpCloInfoService2

ğŸ›‚ ì™¸êµë¶€_êµ­ê°€Â·ì§€ì—­ë³„ ì…êµ­í—ˆê°€ìš”ê±´:
  í™œìš©ë‹¨ê³„: "1ë‹¨ê³„ - ì…êµ­ ì „ ì¤€ë¹„"
  ê¸°ëŠ¥: êµ­ê°€ë³„ ë¹„ì ìš”ê±´, í•„ìˆ˜ ì„œë¥˜ ì•ˆë‚´
  URL: https://apis.data.go.kr/1262000/EntranceVisaService2
```

#### **ë‹¨ê³„ë³„ API ì—°ë™ í™œìš©**

**1ë‹¨ê³„: ì…êµ­ ì „ ì¤€ë¹„**
```java
// ì™¸êµë¶€ API í™œìš© - êµ­ê°€ë³„ ì…êµ­ ìš”ê±´ ì¡°íšŒ
public KoreaEntryRequirementResponse getKoreaEntryRequirements(String overseasCountry) {
    // ì¬ì™¸ë™í¬ ê±°ì£¼êµ­ â†’ í•œêµ­ ì…êµ­ ìš”ê±´ ìë™ ì¡°íšŒ
    // ë¹„ì ì¢…ë¥˜, í•„ìˆ˜ ì„œë¥˜, ì²´ë¥˜ ê¸°ê°„ ì •ë³´ ì œê³µ
    // ëŒ€ì‚¬ê´€/ì˜ì‚¬ê´€ ì—°ë½ì²˜ ìë™ ë§¤ì¹­
}

// ì½”ë””ë„¤ì´í„° ì„œë¹„ìŠ¤: ë§ì¶¤í˜• ì…êµ­ ê°€ì´ë“œ ìƒì„±
public PreArrivalGuideResponse createPreArrivalGuide(String country, String purpose) {
    KoreaEntryRequirementResponse requirements = mofaApiService.getKoreaEntryRequirements(country);
    return buildCustomizedGuide(requirements, purpose);
}
```

**2ë‹¨ê³„: ì…êµ­ ë° ì •ì°© + ê±´ê°•ê²€ì§„**
```java
// ë³‘ì› ì •ë³´ API í™œìš© - ê±´ê°•ê²€ì§„ ë³‘ì› ì¶”ì²œ
public List<HospitalInfo> findHealthCheckupHospitals(String region, String language) {
    // ì§€ì—­ ê¸°ë°˜ ë³‘ì› ê²€ìƒ‰
    List<HospitalInfo> hospitals = hospitalApiService.getHospitalsByLocation(sido, sigungu);
    
    // ì¬ì™¸ë™í¬ ì¹œí™”ì  ë³‘ì› í•„í„°ë§ (ë‹¤êµ­ì–´ ì§€ì›, êµ­ì œì§„ë£Œì„¼í„° ë³´ìœ )
    return hospitals.stream()
        .filter(h -> h.hasInternationalCenter())
        .filter(h -> h.supportsLanguage(language))
        .collect(Collectors.toList());
}

// ì•½êµ­ ì •ë³´ API í™œìš© - ìƒí™œê¶Œ ë‚´ ì•½êµ­ ì•ˆë‚´
public List<PharmacyInfo> findNearbyPharmacies(String address) {
    // ì„ì‹œ ê±°ì£¼ì§€ ì£¼ë³€ ì•½êµ­ ê²€ìƒ‰
    // 24ì‹œê°„ ìš´ì˜, ë‹¤êµ­ì–´ ì²˜ë°©ì „ ì²˜ë¦¬ ê°€ëŠ¥ ì•½êµ­ ìš°ì„  ì¶”ì²œ
    return pharmacyApiService.getPharmaciesByLocation(sido, sigungu)
        .stream()
        .sorted(Comparator.comparing(PharmacyInfo::getDistance))
        .collect(Collectors.toList());
}
```

**3ë‹¨ê³„: ìš”ì–‘ì› ë§¤ì¹­ (í•µì‹¬ ê¸°ëŠ¥)**
```java
// ì¥ê¸°ìš”ì–‘ê¸°ê´€ ê²€ìƒ‰ API í™œìš© - ì¬ì™¸ë™í¬ ë§ì¶¤ ì¶”ì²œ
public OverseasKoreanNursingFacilityResponse searchForOverseasKoreans(
    OverseasKoreanNursingSearchRequest request) {
    
    // 1. ê¸°ë³¸ ê²€ìƒ‰ (ì§€ì—­, ìœ í˜•ë³„)
    NursingFacilitySearchResponse basicResults = nursingSearchApiService
        .searchNursingFacilities(request.getSidoName(), request.getSigunguName());
    
    // 2. ì¬ì™¸ë™í¬ ì¹œí™”ì„± ì ìˆ˜ ê³„ì‚°
    List<EnhancedFacilityInfo> enhanced = basicResults.getFacilities().stream()
        .map(facility -> {
            // ê³µí•­ ì ‘ê·¼ì„±, ë‹¤êµ­ì–´ ì§€ì›, ì˜ë£Œì§„ ìˆ˜ì¤€ ë“± í‰ê°€
            int score = calculateOverseasFriendlyScore(facility, request);
            
            // ì‹ ë¢°ì„± ê²€ì¦ (ê°œíì—… ì •ë³´ API í™œìš©)
            FacilityReliabilityResponse reliability = facilityStatusApiService
                .validateFacilityReliability(facility.getFacilityCode());
            
            return EnhancedFacilityInfo.builder()
                .basicInfo(facility)
                .overseasFriendlyScore(score)
                .reliabilityInfo(reliability)
                .build();
        })
        .filter(f -> f.getReliabilityInfo().getRiskLevel() != RiskLevel.HIGH)
        .sorted(Comparator.comparing(EnhancedFacilityInfo::getOverseasFriendlyScore).reversed())
        .collect(Collectors.toList());
    
    // 3. ìƒì„¸ ì •ë³´ ì¡°íšŒ (ìƒìœ„ 10ê°œ ì‹œì„¤)
    List<CompleteNursingFacilityInfo> completeFacilities = enhanced.stream()
        .limit(10)
        .map(facility -> {
            NursingFacilityDetailResponse detail = nursingDetailApiService
                .getNursingFacilityDetail(facility.getFacilityCode());
            
            return CompleteNursingFacilityInfo.builder()
                .enhancedInfo(facility)
                .detailInfo(detail)
                .countrySpecificAdvice(generateAdvice(request.getOverseasCountry()))
                .build();
        })
        .collect(Collectors.toList());
    
    return OverseasKoreanNursingFacilityResponse.builder()
        .facilities(completeFacilities)
        .totalCount(enhanced.size())
        .searchCriteria(request)
        .build();
}

// ì‹ ë¢°ì„± ì ìˆ˜ ê³„ì‚° (ê°œíì—… ì •ë³´ ê¸°ë°˜)
private int calculateReliabilityScore(FacilityStatusResponse status) {
    int score = 50; // ê¸°ë³¸ ì ìˆ˜
    
    // ìš´ì˜ ìƒíƒœë³„ ì ìˆ˜
    switch (status.getBusinessStatus()) {
        case "ì •ìƒ", "ìš´ì˜ì¤‘": score += 40; break;
        case "íœ´ì—…": score += 10; break;
        case "íì—…", "ë§ì†Œ": score = 0; break;
    }
    
    // ìš´ì˜ ê¸°ê°„ë³„ ì¶”ê°€ ì ìˆ˜ (ì‹ ë¢°ì„± ì§€í‘œ)
    if (status.getOpeningDate() != null) {
        long years = ChronoUnit.YEARS.between(status.getOpeningDate(), LocalDate.now());
        score += Math.min(years * 2, 10);
    }
    
    return Math.min(score, 100);
}
```

**4ë‹¨ê³„: ì‚¬í›„ ê´€ë¦¬**
```java
// í†µí•© ì˜ë£Œ ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤
public MedicalNetworkResponse buildMedicalNetwork(String facilityCode, String region) {
    // ìš”ì–‘ì› ì •ë³´
    NursingFacilityDetailResponse facility = nursingDetailApiService
        .getNursingFacilityDetail(facilityCode);
    
    // ì£¼ë³€ ë³‘ì› ë„¤íŠ¸ì›Œí¬
    List<HospitalInfo> nearbyHospitals = hospitalApiService
        .getHospitalsByLocation(region);
    
    // ì£¼ë³€ ì•½êµ­ ë„¤íŠ¸ì›Œí¬  
    List<PharmacyInfo> nearbyPharmacies = pharmacyApiService
        .getPharmaciesByLocation(region);
    
    return MedicalNetworkResponse.builder()
        .centerFacility(facility)
        .partnerHospitals(nearbyHospitals)
        .nearbyPharmacies(nearbyPharmacies)
        .emergencyContacts(buildEmergencyContacts(region))
        .build();
}
```

#### **ê¸°ìˆ ì  ìš°ìœ„ ë° ì°¨ë³„í™” ìš”ì†Œ**
```yaml
âœ… ì‹¤ì œ ì •ë¶€ ë°ì´í„° ê¸°ë°˜:
  - ê°€ì§œ ì •ë³´ ì—†ëŠ” ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë°ì´í„°
  - ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ë˜ëŠ” ìš´ì˜ ìƒíƒœ
  - ì •ë¶€ ì¸ì¦ ì‹œì„¤ë§Œ ì¶”ì²œ

âœ… AI ê¸°ë°˜ ë§ì¶¤í˜• ë§¤ì¹­:
  - ì¬ì™¸ë™í¬ë³„ íŠ¹ì„± ê³ ë ¤í•œ ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜
  - êµ­ê°€ë³„/ì–¸ì–´ë³„/ë¬¸í™”ì  ì°¨ì´ ë°˜ì˜
  - ì‹ ë¢°ì„± ì ìˆ˜ ê¸°ë°˜ í•„í„°ë§

âœ… ì›ìŠ¤í†± ì˜ë£Œ ìƒíƒœê³„:
  - ìš”ì–‘ì› + ë³‘ì› + ì•½êµ­ í†µí•© ì •ë³´
  - ì‘ê¸‰ìƒí™© ëŒ€ì‘ ë„¤íŠ¸ì›Œí¬ êµ¬ì¶•
  - ì˜ë£Œì§„ ê°„ ì†Œí†µ ì§€ì›

âœ… ì‹¤ì‹œê°„ ì‹ ë¢°ì„± ê²€ì¦:
  - ê°œíì—… ìƒíƒœ ìë™ í™•ì¸
  - ìœ„í—˜ ì‹œì„¤ ì‚¬ì „ í•„í„°ë§
  - ì§€ì†ì ì¸ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ
```

---

## ğŸ“‹ API ë¬¸ì„œí™” ì „ëµ

### OpenAPI 3.0 ê¸°ë°˜ ë¬¸ì„œí™”

**API ë¬¸ì„œí™” ë„êµ¬ ìŠ¤íƒ:**
```yaml
OpenAPI Spec: 3.0.3 (ìµœì‹  ë²„ì „)
ë¬¸ì„œ UI: Swagger UI + Redoc (ë‹¤ì¤‘ ë·°)
ì½”ë“œ ìƒì„±: OpenAPI Generator
ë¬¸ì„œ í˜¸ìŠ¤íŒ…: GitHub Pages (ìë™ ë°°í¬)
API í…ŒìŠ¤íŠ¸: Postman + Newman (ìë™í™”)
```

### API ë¬¸ì„œí™” êµ¬ì¡°

#### 1. OpenAPI ì„¤ì • (api-module)
```yaml
# api-module/src/main/resources/application.yml
springdoc:
  api-docs:
    enabled: true
    path: /api-docs
  swagger-ui:
    enabled: true
    path: /swagger-ui.html
    operationsSorter: method
    tagsSorter: alpha
  group-configs:
    - group: 'member-api'
      paths-to-match: '/api/members/**'
    - group: 'facility-api'  
      paths-to-match: '/api/facilities/**'
    - group: 'job-api'
      paths-to-match: '/api/jobs/**'
```

#### 2. API ê·¸ë£¹ë³„ ë¬¸ì„œí™”
- **íšŒì› API** (`/api/members/**`)
  - íšŒì›ê°€ì…, ë¡œê·¸ì¸, í”„ë¡œí•„ ê´€ë¦¬
  - ê¶Œí•œ ê´€ë¦¬, íƒˆí‡´ ì²˜ë¦¬
  
- **ì‹œì„¤ API** (`/api/facilities/**`)
  - ì‹œì„¤ ê²€ìƒ‰, ìƒì„¸ ì¡°íšŒ, ë“±ë¡/ìˆ˜ì •
  - ì§€ë„ ì—°ë™, ì´ë¯¸ì§€ ì—…ë¡œë“œ
  
- **êµ¬ì¸êµ¬ì§ API** (`/api/jobs/**`)
  - êµ¬ì¸/êµ¬ì§ ê³µê³  CRUD
  - ì§€ì›/ë§¤ì¹­ ê´€ë¦¬
  
- **ë¦¬ë·° API** (`/api/reviews/**`)
  - ë¦¬ë·° ì‘ì„±/ìˆ˜ì •/ì‚­ì œ
  - í‰ì  ì§‘ê³„, ì¶”ì²œ ì‹œìŠ¤í…œ

#### 3. ì½”ë“œ ë ˆë²¨ ë¬¸ì„œí™”
```java
@RestController
@RequestMapping("/api/members")
@Tag(name = "íšŒì› ê´€ë¦¬", description = "íšŒì› ê°€ì…, ë¡œê·¸ì¸, í”„ë¡œí•„ ê´€ë¦¬ API")
public class MemberController {

    @Operation(
        summary = "íšŒì› ê°€ì…",
        description = "ìƒˆë¡œìš´ íšŒì›ì„ ë“±ë¡í•©ë‹ˆë‹¤. ì´ë©”ì¼ ì¤‘ë³µ ì²´í¬ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.",
        responses = {
            @ApiResponse(responseCode = "201", description = "íšŒì› ê°€ì… ì„±ê³µ"),
            @ApiResponse(responseCode = "409", description = "ì´ë©”ì¼ ì¤‘ë³µ")
        }
    )
    @PostMapping("/register")
    public ResponseEntity<MemberResponse> register(
        @RequestBody @Valid 
        @Schema(description = "íšŒì› ê°€ì… ìš”ì²­ ì •ë³´")
        MemberRegisterRequest request
    ) {
        // êµ¬í˜„ ë¡œì§
    }
}
```

### API ë²„ì €ë‹ ì „ëµ

**URL ê¸°ë°˜ ë²„ì €ë‹:**
```
/api/v1/members/**  (í˜„ì¬ ë²„ì „)
/api/v2/members/**  (í–¥í›„ ë²„ì „)
```

**í—¤ë” ê¸°ë°˜ ë²„ì €ë‹ (ì„ íƒì‚¬í•­):**
```
Accept: application/vnd.globalcarelink.v1+json
Accept: application/vnd.globalcarelink.v2+json
```

---

## ğŸ’° **ìë³¸ê¸ˆ 0ì› ê°œë°œ ì „ëµ**

### **ì™„ì „ ë¬´ë£Œ ê¸°ìˆ  ìŠ¤íƒ í™œìš©**

#### **ë°ì´í„°ë² ì´ìŠ¤ & ì €ì¥ì†Œ**
```yaml
ê°œë°œ/ìš´ì˜:
  - SQLite (ë¬´ì œí•œ ë¬´ë£Œ, íŒŒì¼ ê¸°ë°˜)
  - GitHub Repository (íŒŒì¼ ì €ì¥ì†Œ, ë¬´ë£Œ CDN)
  - ë©”ëª¨ë¦¬ ìºì‹œ (Caffeine, Redis ëŒ€ì‹ )
  
ì¥ì :
  - ì„¤ì • ê°„ë‹¨, ë³„ë„ ì„œë²„ ë¶ˆí•„ìš”
  - ë°±ì—… = íŒŒì¼ ë³µì‚¬
  - ë™ì‹œ ì ‘ì† 1000ëª…ê¹Œì§€ ì¶©ë¶„
```

#### **ë¬´ë£Œ ë°°í¬ ì„œë¹„ìŠ¤**
```yaml
ë°±ì—”ë“œ ë°°í¬ ì˜µì…˜:
  1. Railway (ì›” 500ì‹œê°„ ë¬´ë£Œ, ì¶”ì²œ)
  2. Render.com (ë¬´ë£Œ í”Œëœ)
  3. fly.io (ë¬´ë£Œ í”Œëœ)
  4. Oracle Cloud Always Free (í‰ìƒ ë¬´ë£Œ)

í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬:
  1. GitHub Pages (ë¬´ì œí•œ ë¬´ë£Œ, CDN í¬í•¨)
  2. Netlify (ì›” 100GB ë¬´ë£Œ)
  3. Vercel (ë¬´ì œí•œ ë¬´ë£Œ)
```

#### **ì™¸ë¶€ ì„œë¹„ìŠ¤ ë¬´ë£Œ í”Œëœ**
```yaml
ì´ë©”ì¼: Gmail SMTP (ì¼ì¼ 500í†µ)
ì§€ë„: OpenStreetMap + Leaflet.js (ì™„ì „ ë¬´ë£Œ)
      ì¹´ì¹´ì˜¤ë§µ (ì›” 30ë§Œê±´ ë¬´ë£Œ)
ì¸ì¦: Google OAuth, ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ (ë¬´ë£Œ)
ì´ë¯¸ì§€: ìì²´ ì²˜ë¦¬ (Java BufferedImage)
SMS: ì´ë©”ì¼ ì¸ì¦ìœ¼ë¡œ ëŒ€ì²´ (ë¹„ìš© ì ˆì•½)
```

### **ë‹¨ê³„ë³„ í™•ì¥ ê³„íš**

#### **Phase 1: ì™„ì „ ë¬´ë£Œ MVP (0ì›)**
```yaml
ì‚¬ìš©ì: 100ëª… ì´í•˜
ê¸°ìˆ : SQLite + ë©”ëª¨ë¦¬ ìºì‹œ + ë¬´ë£Œ í˜¸ìŠ¤íŒ…
ë¹„ìš©: $0/ì›”
```

#### **Phase 2: ë¶€ë¶„ ìœ ë£Œ ($10-20/ì›”)**  
```yaml
ì¡°ê±´: ì‚¬ìš©ì 500ëª… ì´ìƒ, ìˆ˜ìµ ë°œìƒ ì‹œì‘
ì—…ê·¸ë ˆì´ë“œ: PostgreSQL, ì•ˆì •ì  VPS
ë¹„ìš©: $10-20/ì›”
```

#### **Phase 3: ë³¸ê²© í™•ì¥ ($100+/ì›”)**
```yaml
ì¡°ê±´: ì›” ìˆ˜ìµ $500 ì´ìƒ  
ì—…ê·¸ë ˆì´ë“œ: Redis, CDN, ì „ë¬¸ ëª¨ë‹ˆí„°ë§
ë¹„ìš©: $100+/ì›”
```

### **ê°œë°œ ìš°ì„ ìˆœìœ„ (ë¬´ë£Œ ì¤‘ì‹¬)**

#### **ì¦‰ì‹œ ê°œë°œ (ìë³¸ê¸ˆ 0ì›)**
1. SQLite ê¸°ë°˜ ë¡œì»¬ ê°œë°œ
2. í•µì‹¬ CRUD ê¸°ëŠ¥ êµ¬í˜„
3. OpenStreetMap ì§€ë„ ì—°ë™
4. Gmail ì´ë©”ì¼ ë°œì†¡
5. GitHub Pages ë°°í¬

#### **ìˆ˜ìµ ë°œìƒ í›„ ì—…ê·¸ë ˆì´ë“œ**  
1. PostgreSQL ì „í™˜
2. Redis ìºì‹œ ë„ì…
3. êµ¬ê¸€ë§µ API ì¶”ê°€
4. ì „ë¬¸ í˜¸ìŠ¤íŒ… ì„œë¹„ìŠ¤
5. SMS ì•Œë¦¼ ì„œë¹„ìŠ¤
</file>

<file path="src/main/java/com/globalcarelink/external/config/RetryConfig.java">
/**
 * Spring Retry ì„¤ì •
 * ê³µê³µë°ì´í„° API í˜¸ì¶œ ì¬ì‹œë„ ê¸°ëŠ¥ í™œì„±í™”
 */
â‹®----
public class RetryConfig {
// Spring Retry ê¸°ëŠ¥ í™œì„±í™”
</file>

<file path="src/main/java/com/globalcarelink/facility/dto/FacilityMatchingPreference.java">
/**
 * ì‹œì„¤ ë§¤ì¹­ ì„ í˜¸ë„ ì„¤ì •
 */
â‹®----
public class FacilityMatchingPreference {
â‹®----
// ì§€ì—­ ì„ í˜¸ë„
â‹®----
// ì‹œì„¤ íƒ€ì… ì„ í˜¸ë„
â‹®----
// ë¹„ìš© ì„ í˜¸ë„
â‹®----
// ì‹œì„¤ ë“±ê¸‰ ì„ í˜¸ë„
private List<String> preferredGrades; // A, B, C, D, E
â‹®----
// íŠ¹ë³„ ì„œë¹„ìŠ¤ ìš”êµ¬ì‚¬í•­
â‹®----
// ì˜ë£Œì§„ ìš”êµ¬ì‚¬í•­
â‹®----
// ê¸°íƒ€ ì„ í˜¸ë„
â‹®----
/**
     * ìµœëŒ€ ì›” ë¹„ìš© ì¡°íšŒ
     */
public Integer getMaxMonthlyFee() {
</file>

<file path="src/main/java/com/globalcarelink/facility/dto/FacilityProfileCreateRequest.java">
/**
 * ì‹œì„¤ í”„ë¡œí•„ ìƒì„± ìš”ì²­ DTO
 */
â‹®----
public class FacilityProfileCreateRequest {
â‹®----
// ì—°ë½ì²˜ ì •ë³´
â‹®----
// ì£¼ì†Œ ì •ë³´
â‹®----
// ìˆ˜ìš© ëŠ¥ë ¥
â‹®----
// ì¼€ì–´ ë“±ê¸‰
â‹®----
// ì˜ë£Œì§„ ì •ë³´
â‹®----
// ë¹„ìš© ì •ë³´
â‹®----
// ì‹œì„¤ ì •ë³´
</file>

<file path="src/main/java/com/globalcarelink/facility/dto/FacilityProfileResponse.java">
/**
 * ì‹œì„¤ í”„ë¡œí•„ ì‘ë‹µ DTO
 */
â‹®----
public class FacilityProfileResponse {
â‹®----
// ì—°ë½ì²˜ ì •ë³´
â‹®----
// ì£¼ì†Œ ì •ë³´
â‹®----
// ìˆ˜ìš© ëŠ¥ë ¥
â‹®----
// ì¼€ì–´ ë“±ê¸‰
â‹®----
// ì˜ë£Œì§„ ì •ë³´
â‹®----
// ë¹„ìš© ì •ë³´
â‹®----
// ì‹œì„¤ ì •ë³´
â‹®----
// ìš´ì˜ ì •ë³´
â‹®----
// ë©”íƒ€ë°ì´í„°
â‹®----
/**
     * FacilityProfile ì—”í‹°í‹°ë¡œë¶€í„° DTO ìƒì„±
     */
public static FacilityProfileResponse from(FacilityProfile facility) {
return FacilityProfileResponse.builder()
.id(facility.getId())
.externalId(facility.getExternalId())
.facilityName(facility.getFacilityName())
.facilityType(facility.getFacilityType())
.facilityGrade(facility.getGrade())
.evaluationScore(facility.getEvaluationScore())
.phoneNumber(facility.getPhoneNumber())
.email(facility.getEmail())
.homepage(facility.getHomepage())
.websiteUrl(facility.getWebsiteUrl())
.address(facility.getFullAddress())
.region(facility.getRegion())
.district(facility.getDistrict())
.latitude(facility.getLatitude())
.longitude(facility.getLongitude())
.totalCapacity(facility.getTotalCapacity())
.currentOccupancy(facility.getCurrentOccupancy())
.availableBeds(facility.getAvailableBeds())
.acceptableCareGrades(facility.getAcceptableCareGrades())
.specializations(facility.getSpecializations())
.hasDoctor(facility.getHasDoctor())
.hasNurse24h(facility.getHasNurse24h())
.nurseCount(facility.getNurseCount())
.doctorCount(facility.getDoctorCount())
.totalStaff(facility.getTotalStaff())
.monthlyBasicFee(facility.getMonthlyBasicFee())
.mealCost(facility.getMealCost())
.totalFloorArea(facility.getTotalFloorArea())
.buildingStructure(facility.getBuildingStructure())
.parkingSpaces(facility.getParkingSpaces())
.specialServices(facility.getSpecialServices())
.operationStatus(facility.getOperationStatus())
.establishmentDate(facility.getEstablishmentDate())
.representativeName(facility.getRepresentativeName())
.dataSource(facility.getDataSource())
.lastSyncedAt(facility.getLastSyncedAt())
.createdAt(facility.getCreatedAt())
.updatedAt(facility.getUpdatedAt())
.build();
</file>

<file path="src/main/java/com/globalcarelink/facility/dto/FacilityProfileUpdateRequest.java">
/**
 * ì‹œì„¤ í”„ë¡œí•„ ìˆ˜ì • ìš”ì²­ DTO
 */
â‹®----
public class FacilityProfileUpdateRequest {
â‹®----
// ì—°ë½ì²˜ ì •ë³´
â‹®----
// ì£¼ì†Œ ì •ë³´
â‹®----
// ìˆ˜ìš© ëŠ¥ë ¥
â‹®----
// ì¼€ì–´ ë“±ê¸‰
â‹®----
// ì˜ë£Œì§„ ì •ë³´
â‹®----
// ë¹„ìš© ì •ë³´
â‹®----
// ì‹œì„¤ ì •ë³´
</file>

<file path="src/main/java/com/globalcarelink/facility/dto/FacilityRecommendation.java">
/**
 * ì‹œì„¤ ì¶”ì²œ ê²°ê³¼ DTO
 */
â‹®----
public class FacilityRecommendation {
â‹®----
// ì¶”ì²œ ì ìˆ˜ ë° ìˆœìœ„
â‹®----
// ê±°ë¦¬ ì •ë³´
â‹®----
// ê°€ìš©ì„± ì •ë³´
â‹®----
// ë¹„ìš© ì •ë³´
â‹®----
// ì˜ë£Œì§„ ì •ë³´
â‹®----
// ì¶”ì²œ ì´ìœ 
â‹®----
// ë©”íƒ€ë°ì´í„°
â‹®----
/**
     * ì¶”ì²œ ì´ìœ  ì¡°íšŒ
     */
public String getRecommendationReason() {
</file>

<file path="src/main/java/com/globalcarelink/profile/dto/BaseProfileRequest.java">
/**
 * í”„ë¡œí•„ ìš”ì²­ ê¸°ë³¸ í´ë˜ìŠ¤
 */
â‹®----
public abstract class BaseProfileRequest {
â‹®----
// ê¸°ë³¸ ê°œì¸ì •ë³´
â‹®----
// ì—°ë½ì²˜ ì •ë³´
â‹®----
// ì£¼ì†Œ ì •ë³´
â‹®----
// ê¸´ê¸‰ ì—°ë½ì²˜
</file>

<file path="src/main/java/com/globalcarelink/PlainJavaServer.java">
/**
 * ì—˜ë”ë² ë¦¬ ìˆœìˆ˜ Java HTTP ì„œë²„
 * ë¡œê·¸ ê¸°ë°˜ ë””ë²„ê¹… ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ìš© ìµœì†Œ ë°±ì—”ë“œ
 */
public class PlainJavaServer {
â‹®----
public static void main(String[] args) throws IOException {
System.out.println("=== ì—˜ë”ë² ë¦¬ ë°±ì—”ë“œ ì„œë²„ ì‹œì‘ ===");
System.out.println("í¬íŠ¸: 8080");
System.out.println("ì‹œì‘ ì‹œê°„: " + LocalDateTime.now());
â‹®----
HttpServer server = HttpServer.create(new InetSocketAddress(8080), 0);
â‹®----
// CORS í—¤ë”ë¥¼ ì¶”ê°€í•˜ëŠ” í•¸ë“¤ëŸ¬
server.createContext("/", new RootHandler());
server.createContext("/health", new HealthHandler());
server.createContext("/api/status", new StatusHandler());
server.createContext("/api/test", new TestHandler());
â‹®----
server.setExecutor(null);
server.start();
â‹®----
System.out.println("âœ“ ì„œë²„ê°€ ì„±ê³µì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤!");
System.out.println("âœ“ URL: http://localhost:8080");
System.out.println("âœ“ ìƒíƒœ í™•ì¸: http://localhost:8080/health");
System.out.println("âœ“ API í…ŒìŠ¤íŠ¸: http://localhost:8080/api/test");
System.out.println("âœ“ ì„œë²„ë¥¼ ì¤‘ì§€í•˜ë ¤ë©´ Ctrl+Cë¥¼ ëˆ„ë¥´ì„¸ìš”");
â‹®----
static class RootHandler implements HttpHandler {
â‹®----
public void handle(HttpExchange exchange) throws IOException {
addCorsHeaders(exchange);
â‹®----
"í˜„ì¬ ì‹œê°„: " + LocalDateTime.now();
â‹®----
exchange.sendResponseHeaders(200, response.getBytes().length);
OutputStream os = exchange.getResponseBody();
os.write(response.getBytes());
os.close();
â‹®----
static class HealthHandler implements HttpHandler {
â‹®----
static class StatusHandler implements HttpHandler {
â‹®----
"  \"timestamp\": \"" + LocalDateTime.now() + "\",\n" +
â‹®----
exchange.getResponseHeaders().set("Content-Type", "application/json");
exchange.sendResponseHeaders(200, jsonResponse.getBytes().length);
â‹®----
os.write(jsonResponse.getBytes());
â‹®----
static class TestHandler implements HttpHandler {
â‹®----
"  \"method\": \"" + exchange.getRequestMethod() + "\",\n" +
"  \"path\": \"" + exchange.getRequestURI().getPath() + "\",\n" +
â‹®----
private static void addCorsHeaders(HttpExchange exchange) {
exchange.getResponseHeaders().set("Access-Control-Allow-Origin", "*");
exchange.getResponseHeaders().set("Access-Control-Allow-Methods", "GET, POST, PUT, DELETE, OPTIONS");
exchange.getResponseHeaders().set("Access-Control-Allow-Headers", "Content-Type, Authorization");
</file>

<file path="src/main/java/com/globalcarelink/SimpleApp.java">
/**
 * ì—˜ë”ë² ë¦¬ ê°„ë‹¨ ë°±ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜
 * ë¡œê·¸ ê¸°ë°˜ ë””ë²„ê¹… ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ìš© ìµœì†Œ ê¸°ëŠ¥ ë°±ì—”ë“œ
 */
â‹®----
public class SimpleApp {
â‹®----
public static void main(String[] args) {
System.out.println("=== ì—˜ë”ë² ë¦¬ ë°±ì—”ë“œ ì‹œì‘ ===");
SpringApplication.run(SimpleApp.class, args);
â‹®----
public String home() {
â‹®----
public String health() {
â‹®----
public java.util.Map<String, Object> status() {
â‹®----
status.put("status", "running");
status.put("service", "elderberry-backend");
status.put("version", "1.0.0");
status.put("timestamp", java.time.LocalDateTime.now());
status.put("message", "ë¡œê·¸ ê¸°ë°˜ ë””ë²„ê¹… ì‹œìŠ¤í…œ - ë°±ì—”ë“œ ì •ìƒ ë™ì‘");
â‹®----
public java.util.Map<String, Object> test() {
â‹®----
response.put("success", true);
response.put("message", "API í…ŒìŠ¤íŠ¸ ì„±ê³µ");
response.put("frontend_url", "http://localhost:5173");
response.put("backend_url", "http://localhost:8080");
</file>

<file path="check-system.ps1">
# Elderberry System Status Check Script
Write-Host "=== Elderberry System Status ===" -ForegroundColor Green
Write-Host "================================" -ForegroundColor Green

# Check port status
$frontendRunning = netstat -an | Select-String ":5173" | Select-String "LISTENING"
$backendRunning = netstat -an | Select-String ":8080" | Select-String "LISTENING"

Write-Host "`nServer Status:" -ForegroundColor Cyan
if ($frontendRunning) {
    Write-Host "âœ… Frontend: Running (http://localhost:5173)" -ForegroundColor Green
} else {
    Write-Host "âŒ Frontend: Stopped" -ForegroundColor Red
}

if ($backendRunning) {
    Write-Host "âœ… Backend: Running (http://localhost:8080)" -ForegroundColor Green
} else {
    Write-Host "âŒ Backend: Stopped" -ForegroundColor Red
}

# Development status
Write-Host "`nDevelopment Progress:" -ForegroundColor Cyan
Write-Host "â€¢ Log-based Debugging System: âœ… Complete" -ForegroundColor White
Write-Host "â€¢ Plain Java Server: âœ… Working" -ForegroundColor White
Write-Host "â€¢ React Frontend: âœ… Working" -ForegroundColor White
Write-Host "â€¢ Spring Boot Backend: âš ï¸ In Progress (67 errors resolving)" -ForegroundColor White

# Check log files
Write-Host "`nLog Files:" -ForegroundColor Cyan
if (Test-Path "logs") {
    $logFiles = Get-ChildItem "logs" -File
    if ($logFiles.Count -gt 0) {
        foreach ($file in $logFiles) {
            Write-Host "  ğŸ“„ $($file.Name) ($('{0:N2}' -f ($file.Length/1KB)) KB)" -ForegroundColor White
        }
    } else {
        Write-Host "  ğŸ“„ No log files" -ForegroundColor Yellow
    }
} else {
    Write-Host "  ğŸ“ logs directory not found" -ForegroundColor Yellow
}

# Quick commands
Write-Host "`nQuick Commands:" -ForegroundColor Cyan
Write-Host "  ğŸ“± Start Dev: .\start-dev.ps1" -ForegroundColor Yellow
Write-Host "  ğŸ” Debug: .\debug-system.ps1" -ForegroundColor Yellow
Write-Host "  ğŸ”§ Compile Check: .\.gradle-temp\gradle-8.10.2\bin\gradle.bat compileJava" -ForegroundColor Yellow

Write-Host "`nâœ¨ System Ready!" -ForegroundColor Green
</file>

<file path="debug-system.ps1">
Write-Host "=== Elderberry Debug System ===" -ForegroundColor Green
Write-Host "Log-based Error Debugging & Development Monitoring System" -ForegroundColor Yellow

# Create directories
if (!(Test-Path "logs")) { New-Item -ItemType Directory -Path "logs" }
if (!(Test-Path "data")) { New-Item -ItemType Directory -Path "data" }

Write-Host "`n[1] System Status Check" -ForegroundColor Cyan

# Check ports
$frontendRunning = netstat -an | Select-String ":5173" | Select-String "LISTENING"
$backendRunning = netstat -an | Select-String ":8080" | Select-String "LISTENING"

if ($frontendRunning) {
    Write-Host "âœ“ Frontend server running on port 5173" -ForegroundColor Green
} else {
    Write-Host "âœ— Frontend server not running" -ForegroundColor Red
    Write-Host "  â†’ Run: cd frontend && npm run dev" -ForegroundColor Yellow
}

if ($backendRunning) {
    Write-Host "âœ“ Backend server running on port 8080" -ForegroundColor Green
} else {
    Write-Host "âœ— Backend server not running" -ForegroundColor Red
    Write-Host "  â†’ Run: java -cp build\classes com.globalcarelink.PlainJavaServer" -ForegroundColor Yellow
}

Write-Host "`n[2] Development Status" -ForegroundColor Cyan

# Check for compilation errors
Write-Host "Checking compilation status..." -ForegroundColor White
$compileResult = & .\.gradle-temp\gradle-8.10.2\bin\gradle.bat compileJava --continue 2>&1 | Out-String
$errorCount = ($compileResult | Select-String "errors" | Select-Object -Last 1)

if ($errorCount) {
    $errors = $errorCount -replace '.*?(\d+)\s+errors.*', '$1'
    if ($errors -match '^\d+$' -and [int]$errors -gt 0) {
        Write-Host "âš  Spring Boot Backend: $errors compilation errors remaining" -ForegroundColor Yellow
        Write-Host "  â†’ Plain Java Server is running as fallback" -ForegroundColor Cyan
        Write-Host "  â†’ Errors are being resolved incrementally during development" -ForegroundColor Cyan
    } else {
        Write-Host "âœ“ Spring Boot Backend: No compilation errors" -ForegroundColor Green
    }
} else {
    Write-Host "âœ“ Spring Boot Backend: Compilation successful" -ForegroundColor Green
}

Write-Host "`n[3] Log Monitoring" -ForegroundColor Cyan

# Monitor logs if they exist
if (Test-Path "logs/frontend.log") {
    Write-Host "`n=== Frontend Logs (Last 10 lines) ===" -ForegroundColor Yellow
    Get-Content "logs/frontend.log" -Tail 10
}

if (Test-Path "logs/backend.log") {
    Write-Host "`n=== Backend Logs (Last 10 lines) ===" -ForegroundColor Yellow
    Get-Content "logs/backend.log" -Tail 10
}

Write-Host "`n[4] Quick Actions" -ForegroundColor Cyan
Write-Host "F - Start Frontend only"
Write-Host "B - Start Backend only (if compiled)"
Write-Host "A - Start All (Frontend + Backend)"
Write-Host "L - View Live Logs"
Write-Host "C - Clear Logs"
Write-Host "Q - Quit"

$action = Read-Host "`nSelect action"

switch ($action.ToUpper()) {
    "F" {
        Write-Host "`nStarting Frontend..." -ForegroundColor Yellow
        Set-Location "frontend"
        Start-Process powershell -ArgumentList "-NoExit", "-Command", "npm run dev"
        Set-Location ".."
        Write-Host "Frontend started in new window" -ForegroundColor Green
    }
    
    "B" {
        Write-Host "`nChecking for compiled backend..." -ForegroundColor Yellow
        $jarFile = Get-ChildItem -Path "build/libs" -Filter "*.jar" -ErrorAction SilentlyContinue | Select-Object -First 1
        
        if ($jarFile) {
            Write-Host "Starting Backend with JAR: $($jarFile.Name)" -ForegroundColor Yellow
            Start-Process powershell -ArgumentList "-NoExit", "-Command", "java -Dspring.profiles.active=dev -jar '$($jarFile.FullName)'"
            Write-Host "Backend started in new window" -ForegroundColor Green
        } else {
            Write-Host "No JAR file found. Please compile the project first." -ForegroundColor Red
            Write-Host "You can use an IDE like IntelliJ IDEA or VS Code with Java extension." -ForegroundColor Yellow
        }
    }
    
    "A" {
        Write-Host "`nStarting All Services..." -ForegroundColor Yellow
        
        # Start Frontend
        Set-Location "frontend"
        Start-Process powershell -ArgumentList "-NoExit", "-Command", "npm run dev 2>&1 | Tee-Object -FilePath '../logs/frontend.log'"
        Set-Location ".."
        
        # Try to start Backend
        $jarFile = Get-ChildItem -Path "build/libs" -Filter "*.jar" -ErrorAction SilentlyContinue | Select-Object -First 1
        if ($jarFile) {
            Start-Process powershell -ArgumentList "-NoExit", "-Command", "java -Dspring.profiles.active=dev -jar '$($jarFile.FullName)' 2>&1 | Tee-Object -FilePath 'logs/backend.log'"
        } else {
            Write-Host "Backend JAR not found - only starting frontend" -ForegroundColor Yellow
        }
        
        Write-Host "Services started. Check new windows." -ForegroundColor Green
    }
    
    "L" {
        Write-Host "`nLive Log Monitoring..." -ForegroundColor Yellow
        Write-Host "Press Ctrl+C to stop monitoring" -ForegroundColor Gray
        
        while ($true) {
            Clear-Host
            Write-Host "=== LIVE LOG MONITORING ===" -ForegroundColor Green
            Write-Host "$(Get-Date)" -ForegroundColor Gray
            
            if (Test-Path "logs/frontend.log") {
                Write-Host "`n--- Frontend Log ---" -ForegroundColor Cyan
                Get-Content "logs/frontend.log" -Tail 5
            }
            
            if (Test-Path "logs/backend.log") {
                Write-Host "`n--- Backend Log ---" -ForegroundColor Cyan
                Get-Content "logs/backend.log" -Tail 5
            }
            
            Write-Host "`n--- Port Status ---" -ForegroundColor Cyan
            netstat -an | Select-String ":8080|:5173" | Select-String "LISTENING"
            
            Start-Sleep -Seconds 3
        }
    }
    
    "C" {
        Write-Host "`nClearing logs..." -ForegroundColor Yellow
        if (Test-Path "logs") {
            Remove-Item "logs/*" -Force -ErrorAction SilentlyContinue
            Write-Host "Logs cleared" -ForegroundColor Green
        }
    }
    
    "Q" {
        Write-Host "`nGoodbye!" -ForegroundColor Yellow
        exit
    }
    
    default {
        Write-Host "`nInvalid option" -ForegroundColor Red
    }
}

Write-Host "`nPress any key to continue..." -ForegroundColor Gray
$null = $Host.UI.RawUI.ReadKey("NoEcho,IncludeKeyDown") 

Write-Host "`n[4] Error Resolution Guide" -ForegroundColor Cyan
Write-Host "=== ê°œë°œ ì¤‘ ì—ëŸ¬ í•´ê²° ê°€ì´ë“œ ===" -ForegroundColor White

Write-Host "`nğŸ“‹ í˜„ì¬ ê°œë°œ ìƒí™©:" -ForegroundColor Yellow
Write-Host "â€¢ Spring Boot ë°±ì—”ë“œ: ê°œë°œ ì§„í–‰ ì¤‘ (ì¼ë¶€ ì»´íŒŒì¼ ì—ëŸ¬ ì¡´ì¬)" -ForegroundColor White
Write-Host "â€¢ Plain Java ì„œë²„: ì •ìƒ ë™ì‘ ì¤‘ (í¬íŠ¸ 8080)" -ForegroundColor White
Write-Host "â€¢ React í”„ë¡ íŠ¸ì—”ë“œ: ì •ìƒ ë™ì‘ ì¤‘ (í¬íŠ¸ 5173)" -ForegroundColor White
Write-Host "â€¢ ë¡œê·¸ ê¸°ë°˜ ë””ë²„ê¹…: í™œì„±í™”ë¨" -ForegroundColor White

Write-Host "`nğŸ”§ ì—ëŸ¬ í•´ê²° ìš°ì„ ìˆœìœ„:" -ForegroundColor Yellow
Write-Host "1. Repository ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ ìˆ˜ì •" -ForegroundColor White
Write-Host "2. ì—”í‹°í‹° getter/setter ë©”ì„œë“œ ì¶”ê°€" -ForegroundColor White
Write-Host "3. DTO íƒ€ì… ë¶ˆì¼ì¹˜ í•´ê²°" -ForegroundColor White
Write-Host "4. Profile ê´€ë ¨ ë©”ì„œë“œ êµ¬í˜„" -ForegroundColor White

Write-Host "`nâš¡ ë¹ ë¥¸ ëª…ë ¹ì–´:" -ForegroundColor Yellow
Write-Host "â€¢ ì»´íŒŒì¼ ì²´í¬: .\.gradle-temp\gradle-8.10.2\bin\gradle.bat compileJava" -ForegroundColor Cyan
Write-Host "â€¢ ë°±ì—”ë“œ ì‹œì‘: java -cp build\classes com.globalcarelink.PlainJavaServer" -ForegroundColor Cyan
Write-Host "â€¢ í”„ë¡ íŠ¸ì—”ë“œ ì‹œì‘: cd frontend && npm run dev" -ForegroundColor Cyan
Write-Host "â€¢ ë¡œê·¸ ëª¨ë‹ˆí„°ë§: .\debug-system.ps1" -ForegroundColor Cyan

Write-Host "`nğŸ¯ ê°œë°œ ì§„í–‰ ì „ëµ:" -ForegroundColor Yellow
Write-Host "â€¢ Plain Java ì„œë²„ë¡œ ê¸°ë³¸ ê¸°ëŠ¥ ê°œë°œ ì§„í–‰" -ForegroundColor White
Write-Host "â€¢ í•„ìš”í•œ ê¸°ëŠ¥ êµ¬í˜„ í›„ Spring Boot ì—ëŸ¬ ì ì§„ì  í•´ê²°" -ForegroundColor White
Write-Host "â€¢ ë¡œê·¸ ê¸°ë°˜ ë””ë²„ê¹…ìœ¼ë¡œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§" -ForegroundColor White

Write-Host "`n" -ForegroundColor White
Write-Host "=== ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ ===" -ForegroundColor Green
Write-Host "ê°œë°œì„ ì‹œì‘í•˜ì„¸ìš”! ğŸš€" -ForegroundColor Green
</file>

<file path="gradlew.bat">
@rem
@rem Copyright 2015 the original author or authors.
@rem
@rem Licensed under the Apache License, Version 2.0 (the "License");
@rem you may not use this file except in compliance with the License.
@rem You may obtain a copy of the License at
@rem
@rem      https://www.apache.org/licenses/LICENSE-2.0
@rem
@rem Unless required by applicable law or agreed to in writing, software
@rem distributed under the License is distributed on an "AS IS" BASIS,
@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
@rem See the License for the specific language governing permissions and
@rem limitations under the License.
@rem

@if "%DEBUG%"=="" @echo off
@rem ##########################################################################
@rem
@rem  Gradle startup script for Windows
@rem
@rem ##########################################################################

@rem Set local scope for the variables with windows NT shell
if "%OS%"=="Windows_NT" setlocal

set DIRNAME=%~dp0
if "%DIRNAME%"=="" set DIRNAME=.
set APP_BASE_NAME=%~n0
set APP_HOME=%DIRNAME%

@rem Resolve any "." and ".." in APP_HOME to make it shorter.
for %%i in ("%APP_HOME%") do set APP_HOME=%%~fi

@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
set DEFAULT_JVM_OPTS="-Xmx64m" "-Xms64m"

@rem Find java.exe
if defined JAVA_HOME goto findJavaFromJavaHome

set JAVA_EXE=java.exe
%JAVA_EXE% -version >NUL 2>&1
if %ERRORLEVEL% equ 0 goto execute

echo.
echo ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.
echo.
echo Please set the JAVA_HOME variable in your environment to match the
echo location of your Java installation.

goto fail

:findJavaFromJavaHome
set JAVA_HOME=%JAVA_HOME:"=%
set JAVA_EXE=%JAVA_HOME%/bin/java.exe

if exist "%JAVA_EXE%" goto execute

echo.
echo ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%
echo.
echo Please set the JAVA_HOME variable in your environment to match the
echo location of your Java installation.

goto fail

:execute
@rem Setup the command line

set CLASSPATH=%APP_HOME%\gradle\wrapper\gradle-wrapper.jar


@rem Execute Gradle
"%JAVA_EXE%" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% "-Dorg.gradle.appname=%APP_BASE_NAME%" -classpath "%CLASSPATH%" org.gradle.wrapper.GradleWrapperMain %*

:end
@rem End local scope for the variables with windows NT shell
if %ERRORLEVEL% equ 0 goto mainEnd

:fail
rem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of
rem the _cmd_ return code.
if not "" == "%GRADLE_EXIT_CONSOLE%" exit /b 1
exit /b 1

:mainEnd
if "%OS%"=="Windows_NT" endlocal

:omega
</file>

<file path="start-backend.ps1">
Write-Host "Starting Elderberry Backend Server..." -ForegroundColor Green

# Create necessary directories
if (!(Test-Path "logs")) { New-Item -ItemType Directory -Path "logs" }
if (!(Test-Path "data")) { New-Item -ItemType Directory -Path "data" }

# Check if JAR file exists
$jarFile = Get-ChildItem -Path "build/libs" -Filter "*.jar" -ErrorAction SilentlyContinue | Select-Object -First 1

if ($jarFile) {
    Write-Host "Found JAR file: $($jarFile.Name)" -ForegroundColor Yellow
    Write-Host "Starting Spring Boot application..." -ForegroundColor Yellow
    
    java -Dspring.profiles.active=dev `
         -Dlogging.level.com.globalcarelink=DEBUG `
         -Dserver.port=8080 `
         -Dspring.datasource.url="jdbc:h2:file:./data/elderberry" `
         -jar $jarFile.FullName
} else {
    Write-Host "No JAR file found. Building project first..." -ForegroundColor Yellow
    
    # Try to build with gradlew if available
    if (Test-Path "gradlew.bat") {
        Write-Host "Building with Gradle..." -ForegroundColor Yellow
        .\gradlew.bat build
        
        # Check again for JAR file
        $jarFile = Get-ChildItem -Path "build/libs" -Filter "*.jar" -ErrorAction SilentlyContinue | Select-Object -First 1
        if ($jarFile) {
            Write-Host "Build successful. Starting application..." -ForegroundColor Green
            java -Dspring.profiles.active=dev `
                 -Dlogging.level.com.globalcarelink=DEBUG `
                 -Dserver.port=8080 `
                 -Dspring.datasource.url="jdbc:h2:file:./data/elderberry" `
                 -jar $jarFile.FullName
        } else {
            Write-Host "Build failed or no JAR produced." -ForegroundColor Red
        }
    } else {
        Write-Host "No Gradle wrapper found. Please build the project manually." -ForegroundColor Red
        Write-Host "You can use an IDE like IntelliJ IDEA or Eclipse to build and run the project." -ForegroundColor Yellow
    }
}
</file>

<file path="start-dev.ps1">
# ì—˜ë”ë² ë¦¬ ê°œë°œ ì„œë²„ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸ v2.0
Write-Host "====================================" -ForegroundColor Green
Write-Host "ğŸš€ ì—˜ë”ë² ë¦¬ ê°œë°œ í™˜ê²½ ì‹œì‘" -ForegroundColor Green
Write-Host "====================================" -ForegroundColor Green

# ë¡œê·¸ ë””ë ‰í† ë¦¬ ìƒì„±
if (!(Test-Path "logs")) {
    New-Item -ItemType Directory -Path "logs"
    Write-Host "âœ“ logs ë””ë ‰í† ë¦¬ ìƒì„±" -ForegroundColor Yellow
}

if (!(Test-Path "data")) {
    New-Item -ItemType Directory -Path "data"
    Write-Host "âœ“ data ë””ë ‰í† ë¦¬ ìƒì„±" -ForegroundColor Yellow
}

Write-Host ""
Write-Host "ğŸ“‹ ê°œë°œ í™˜ê²½ ìƒíƒœ" -ForegroundColor Cyan

# í¬íŠ¸ ìƒíƒœ í™•ì¸
$frontendRunning = netstat -an | Select-String ":5173" | Select-String "LISTENING"
$backendRunning = netstat -an | Select-String ":8080" | Select-String "LISTENING"

Write-Host ""
if ($frontendRunning) {
    Write-Host "âœ“ í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„ ì‹¤í–‰ ì¤‘ (í¬íŠ¸ 5173)" -ForegroundColor Green
} else {
    Write-Host "â—‹ í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„ ì¤‘ì§€ë¨" -ForegroundColor Yellow
}

if ($backendRunning) {
    Write-Host "âœ“ ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰ ì¤‘ (í¬íŠ¸ 8080)" -ForegroundColor Green
} else {
    Write-Host "â—‹ ë°±ì—”ë“œ ì„œë²„ ì¤‘ì§€ë¨" -ForegroundColor Yellow
}

Write-Host ""
Write-Host "ğŸ¯ í˜„ì¬ ê°œë°œ ìƒí™©:" -ForegroundColor Cyan
Write-Host "â€¢ Plain Java ì„œë²„: ì •ìƒ ë™ì‘ (ê¸°ë³¸ ê¸°ëŠ¥ êµ¬í˜„ë¨)" -ForegroundColor White
Write-Host "â€¢ Spring Boot ë°±ì—”ë“œ: ê°œë°œ ì§„í–‰ ì¤‘ (67ê°œ ì—ëŸ¬ ì ì§„ì  í•´ê²°)" -ForegroundColor White
Write-Host "â€¢ React í”„ë¡ íŠ¸ì—”ë“œ: ì •ìƒ ë™ì‘" -ForegroundColor White
Write-Host "â€¢ ë¡œê·¸ ê¸°ë°˜ ë””ë²„ê¹…: í™œì„±í™”" -ForegroundColor White

Write-Host ""
Write-Host "ğŸš€ ì„œë²„ ì‹œì‘ ì˜µì…˜:" -ForegroundColor Cyan
Write-Host "1. ì „ì²´ ê°œë°œ í™˜ê²½ ì‹œì‘ (ê¶Œì¥)" -ForegroundColor White
Write-Host "2. í”„ë¡ íŠ¸ì—”ë“œë§Œ ì‹œì‘" -ForegroundColor White
Write-Host "3. ë°±ì—”ë“œë§Œ ì‹œì‘" -ForegroundColor White
Write-Host "4. ë””ë²„ê¹… ì‹œìŠ¤í…œë§Œ ì‹¤í–‰" -ForegroundColor White
Write-Host "5. ì¢…ë£Œ" -ForegroundColor White

$choice = Read-Host "`nì„ íƒí•˜ì„¸ìš” (1-5)"

switch ($choice) {
    "1" {
        Write-Host "`nğŸš€ ì „ì²´ ê°œë°œ í™˜ê²½ ì‹œì‘..." -ForegroundColor Green
        
        # ë°±ì—”ë“œ ì‹œì‘ (Plain Java Server)
        if (!$backendRunning) {
            Write-Host "ë°±ì—”ë“œ ì„œë²„ ì‹œì‘ ì¤‘..." -ForegroundColor Yellow
            Start-Process PowerShell -ArgumentList "-Command", "java -cp build\classes com.globalcarelink.PlainJavaServer" -WindowStyle Minimized
            Start-Sleep 3
        }
        
        # í”„ë¡ íŠ¸ì—”ë“œ ì‹œì‘
        if (!$frontendRunning) {
            Write-Host "í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„ ì‹œì‘ ì¤‘..." -ForegroundColor Yellow
            Start-Process PowerShell -ArgumentList "-Command", "cd frontend; npm run dev" -WindowStyle Normal
            Start-Sleep 2
        }
        
        Write-Host ""
        Write-Host "âœ… ê°œë°œ í™˜ê²½ ì‹œì‘ ì™„ë£Œ!" -ForegroundColor Green
        Write-Host "ğŸ“± í”„ë¡ íŠ¸ì—”ë“œ: http://localhost:5173" -ForegroundColor Cyan
        Write-Host "ğŸ”§ ë°±ì—”ë“œ: http://localhost:8080" -ForegroundColor Cyan
        Write-Host ""
        Write-Host "ğŸ’¡ ë””ë²„ê¹… ì‹œìŠ¤í…œ ì‹¤í–‰: .\debug-system.ps1" -ForegroundColor Yellow
    }
    "2" {
        Write-Host "`nğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„ ì‹œì‘..." -ForegroundColor Green
        Set-Location frontend
        npm run dev
    }
    "3" {
        Write-Host "`nğŸ”§ ë°±ì—”ë“œ ì„œë²„ ì‹œì‘..." -ForegroundColor Green
        java -cp build\classes com.globalcarelink.PlainJavaServer
    }
    "4" {
        Write-Host "`nğŸ” ë””ë²„ê¹… ì‹œìŠ¤í…œ ì‹¤í–‰..." -ForegroundColor Green
        .\debug-system.ps1
    }
    "5" {
        Write-Host "ì¢…ë£Œí•©ë‹ˆë‹¤." -ForegroundColor Yellow
        exit
    }
    default {
        Write-Host "ì˜ëª»ëœ ì„ íƒì…ë‹ˆë‹¤. ì „ì²´ í™˜ê²½ì„ ì‹œì‘í•©ë‹ˆë‹¤." -ForegroundColor Red
        # ê¸°ë³¸ê°’ìœ¼ë¡œ ì „ì²´ ì‹œì‘
    }
}
</file>

<file path=".github/workflows/auto-commit.yml">
name: Auto Commit on Development

on:
  workflow_dispatch:  # ìˆ˜ë™ íŠ¸ë¦¬ê±°
  push:
    branches: [ master, main, develop ]
    paths-ignore:
      - '.github/**'
      - 'README.md'
      - 'docs/**'

jobs:
  auto-commit:
    runs-on: ubuntu-latest
    if: "!contains(github.event.head_commit.message, '[skip ci]')"
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        fetch-depth: 0

    - name: Setup Git
      run: |
        git config --global user.name "Claude Assistant"
        git config --global user.email "claude@anthropic.com"
        
    - name: Check for changes
      id: verify-changes
      run: |
        if [ -n "$(git status --porcelain)" ]; then
          echo "changes=true" >> $GITHUB_OUTPUT
        else
          echo "changes=false" >> $GITHUB_OUTPUT
        fi

    - name: Auto commit development progress
      if: steps.verify-changes.outputs.changes == 'true'
      run: |
        git add .
        git commit -m "ğŸ¤– Auto-commit: Development progress update

        - Automated commit from development workflow
        - Files updated during Phase development
        - Generated by Claude Code assistant

        ğŸ¤– Generated with [Claude Code](https://claude.ai/code)

        Co-Authored-By: Claude <noreply@anthropic.com>" || echo "No changes to commit"
        
    - name: Push changes
      if: steps.verify-changes.outputs.changes == 'true'
      run: |
        git push origin HEAD:${{ github.ref_name }}
</file>

<file path="docs/phases/phase-1.md">
# Phase 1: í•µì‹¬ ì¸í”„ë¼ êµ¬ì¶•

## ğŸ¯ ê°œìš”
**ì†Œìš”ê¸°ê°„**: 1-2ì¼  
**ì˜ˆìƒ í† í°**: ~14,000 í† í°  
**ëª©í‘œ**: Spring Boot 3.3.5 + JDK 21 ê¸°ë°˜ í”„ë¡œì íŠ¸ ì¸í”„ë¼ ì™„ì„±

---

## ğŸ“Œ Phase 1-A: í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •

### êµ¬í˜„ ëŒ€ìƒ
- âœ… Gradle ë©€í‹°ëª¨ë“ˆ í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„±
- âœ… Spring Boot 3.3.5 ê¸°ë³¸ ì„¤ì •  
- âœ… SQLite ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
- âœ… ê¸°ë³¸ íŒ¨í‚¤ì§€ êµ¬ì¡° ìƒì„±

### í•µì‹¬ íŒŒì¼
```
build.gradle.kts
settings.gradle.kts  
src/main/resources/application.yml
src/main/java/com/globalcarelink/GlobalCareLinkApplication.java
```

### ê¸°ìˆ  ìŠ¤íƒ
- **ì–¸ì–´**: Java 21 LTS
- **í”„ë ˆì„ì›Œí¬**: Spring Boot 3.3.5  
- **ë¹Œë“œ**: Gradle 8.x + Kotlin DSL
- **ë°ì´í„°ë² ì´ìŠ¤**: SQLite (ë¬´ë£Œ)
- **íŒ¨í‚¤ì§€ êµ¬ì¡°**: ê¸°ëŠ¥ë³„ ë‹¨ì¼ ëª¨ë“ˆ

---

## ğŸ“Œ Phase 1-B: ê¸°ë³¸ ë³´ì•ˆ ì„¤ì •

### êµ¬í˜„ ëŒ€ìƒ  
- âœ… Spring Security 6.x ì„¤ì •
- âœ… JWT í† í° ê¸°ë°˜ ì¸ì¦
- âœ… CORS ì„¤ì •
- âœ… ê¸°ë³¸ ì˜ˆì™¸ ì²˜ë¦¬

### í•µì‹¬ íŒŒì¼
```
SecurityConfig.java
JwtTokenProvider.java
GlobalExceptionHandler.java
CustomException.java
```

### ë³´ì•ˆ ê¸°ëŠ¥
- **ì¸ì¦**: JWT í† í° ê¸°ë°˜
- **ì¸ê°€**: ì—­í• ë³„ ì ‘ê·¼ ì œì–´ (5ê°€ì§€ ì—­í• )
- **CORS**: React í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™
- **ì˜ˆì™¸ì²˜ë¦¬**: í†µí•© ì—ëŸ¬ ì‘ë‹µ

---

## ğŸ›  ê°œë°œ ëª…ë ¹ì–´

### ë¹Œë“œ ë° ì‹¤í–‰
```bash
# JDK 21 í™•ì¸
java -version

# í”„ë¡œì íŠ¸ ë¹Œë“œ  
./gradlew build

# ê°œë°œ ì„œë²„ ì‹¤í–‰
./gradlew bootRun --args='--spring.profiles.active=dev'

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./gradlew test
```

### ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
```bash
# SQLite ë°ì´í„°ë² ì´ìŠ¤ ë””ë ‰í† ë¦¬ ìƒì„±
mkdir data

# JPA ìë™ DDLë¡œ ìŠ¤í‚¤ë§ˆ ìƒì„±
# application.yml: spring.jpa.hibernate.ddl-auto=create-drop
```

---

## ğŸ“‹ í™•ì¸ ì‚¬í•­

### Phase 1-A ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] `./gradlew build` ì„±ê³µ
- [ ] `./gradlew bootRun` ì„±ê³µ  
- [ ] Swagger UI ì ‘ì† ê°€ëŠ¥ (`http://localhost:8080/swagger-ui.html`)
- [ ] SQLite ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ ìƒì„± í™•ì¸

### Phase 1-B ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸  
- [ ] JWT í† í° ìƒì„±/ê²€ì¦ í…ŒìŠ¤íŠ¸
- [ ] CORS í—¤ë” ì‘ë‹µ í™•ì¸
- [ ] 401/403 ì—ëŸ¬ ì‘ë‹µ í™•ì¸
- [ ] ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬ ë™ì‘ í™•ì¸

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

**Phase 2-A**: ê¸°ë³¸ íšŒì› ê¸°ëŠ¥ êµ¬í˜„
- Member ì—”í‹°í‹° (5ê°€ì§€ ì—­í• )
- íšŒì›ê°€ì…/ë¡œê·¸ì¸ API  
- ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”
- ê¸°ë³¸ CRUD ê¸°ëŠ¥

**ì²´í¬í¬ì¸íŠ¸**: Phase 1 ì™„ë£Œ í›„ Phase 2 ì§„í–‰
</file>

<file path="docs/phases/phase-2.md">
# Phase 2: íšŒì› ê´€ë¦¬ ì‹œìŠ¤í…œ

## ğŸ¯ ê°œìš”
**ì†Œìš”ê¸°ê°„**: 2-3ì¼  
**ì˜ˆìƒ í† í°**: ~18,000 í† í°  
**ëª©í‘œ**: 5ê°€ì§€ ì—­í•  ê¸°ë°˜ íšŒì› ê´€ë¦¬ ì‹œìŠ¤í…œ + êµ­ë‚´/í•´ì™¸ ì‚¬ìš©ì êµ¬ë¶„

---

## ğŸ“Œ Phase 2-A: ê¸°ë³¸ íšŒì› ê¸°ëŠ¥

### êµ¬í˜„ ëŒ€ìƒ
- âœ… Member ì—”í‹°í‹° (5ê°€ì§€ ì—­í•  ì§€ì›)
- âœ… íšŒì›ê°€ì…/ë¡œê·¸ì¸ API
- âœ… ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” (BCrypt)
- âœ… ê¸°ë³¸ CRUD ê¸°ëŠ¥
- âœ… JWT í† í° ì¸ì¦ í†µí•©

### ì—”í‹°í‹° ì„¤ê³„
```java
@Entity
@Table(name = "members")
public class Member extends BaseEntity {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(unique = true, nullable = false)
    private String email;
    
    @Column(nullable = false)
    private String password;
    
    @Column(nullable = false)
    private String name;
    
    @Enumerated(EnumType.STRING)
    @Column(nullable = false)
    private MemberRole role;
    
    @Column(name = "is_job_seeker")
    private Boolean isJobSeeker = false;
    
    private String phoneNumber;
    private String language;      // ì–¸ì–´ ì„ í˜¸ë„
    private String region;        // ì§€ì—­ ì •ë³´
    private Boolean isActive = true;
}
```

### ì—­í•  ì •ì˜ (MemberRole)
```java
public enum MemberRole {
    ADMIN,          // ì‹œìŠ¤í…œ ê´€ë¦¬ì
    FACILITY,       // ì‹œì„¤ ê´€ë¦¬ì  
    COORDINATOR,    // ì½”ë””ë„¤ì´í„°
    DOMESTIC_USER,  // êµ­ë‚´ ì‚¬ìš©ì
    OVERSEAS_USER   // í•´ì™¸ ì‚¬ìš©ì (ì¬ì™¸ë™í¬)
}
```

### API ì—”ë“œí¬ì¸íŠ¸
```
POST /api/auth/register     - íšŒì›ê°€ì…
POST /api/auth/login        - ë¡œê·¸ì¸  
GET  /api/members/{id}      - íšŒì› ì¡°íšŒ
PUT  /api/members/{id}      - íšŒì› ì •ë³´ ìˆ˜ì •
DELETE /api/members/{id}    - íšŒì› íƒˆí‡´
GET  /api/members           - íšŒì› ëª©ë¡ (ê´€ë¦¬ì)
```

---

## ğŸ“Œ Phase 2-B: êµ­ë‚´/í•´ì™¸ ì‚¬ìš©ì êµ¬ë¶„

### êµ¬í˜„ ëŒ€ìƒ
- âœ… DomesticProfile ì—”í‹°í‹° (êµ­ë‚´ ì‚¬ìš©ì ì „ìš©)
- âœ… OverseasProfile ì—”í‹°í‹° (í•´ì™¸ ì‚¬ìš©ì ì „ìš©)  
- âœ… ProfileService (í”„ë¡œí•„ ê´€ë¦¬ ë¡œì§)
- âœ… ë‹¤êµ­ì–´ ê¸°ë³¸ ì„¤ì • ì¤€ë¹„
- âœ… ì—­í• ë³„ í”„ë¡œí•„ ìƒì„± ì œí•œ

### DomesticProfile êµ¬ì¡°
```java
@Entity
@Table(name = "domestic_profiles")
public class DomesticProfile extends BaseEntity {
    @OneToOne(fetch = FetchType.LAZY)
    private Member member;
    
    // ê¸°ë³¸ ì •ë³´
    private LocalDate birthDate;
    private String gender;
    private String address;
    private String postalCode;
    
    // ì‘ê¸‰ ì—°ë½ì²˜  
    private String emergencyContactName;
    private String emergencyContactPhone;
    private String emergencyContactRelation;
    
    // ê±´ê°• ì •ë³´
    private String healthInsuranceNumber;
    private Integer ltciGrade;              // ì¥ê¸°ìš”ì–‘ë“±ê¸‰
    private String ltciCertificateNumber;
    
    // ì¼€ì–´ ì •ë³´
    private String preferredRegion;
    private String careLevel;
    private String specialNeeds;
    private String budgetRange;
    
    // ì™„ì„±ë„ ì¶”ì 
    private Integer profileCompletionPercentage = 0;
}
```

### OverseasProfile êµ¬ì¡°  
```java
@Entity
@Table(name = "overseas_profiles")
public class OverseasProfile extends BaseEntity {
    @OneToOne(fetch = FetchType.LAZY)
    private Member member;
    
    // ê¸°ë³¸ ì •ë³´
    private LocalDate birthDate;
    private String gender;
    private String overseasAddress;
    private String residenceCountry;        // í•„ìˆ˜
    private String residenceCity;
    
    // ì—¬ê¶Œ/ë¹„ì ì •ë³´
    private String passportNumber;
    private LocalDate passportExpiryDate;
    private String visaStatus;
    private LocalDate visaExpiryDate;
    
    // ì—°ë½ì²˜ (í•´ì™¸/í•œêµ­)
    private String overseasContactName;
    private String overseasContactPhone;
    private String koreaContactName;
    private String koreaContactPhone;
    
    // ì…êµ­ ê´€ë ¨
    private String entryPurpose;
    private String expectedStayDuration;
    private String preferredCommunicationMethod;
    private String timeZonePreference;
    
    // ì½”ë””ë„¤ì´í„° ì„œë¹„ìŠ¤
    private Boolean coordinatorRequired = true;
    
    // ì™„ì„±ë„ ì¶”ì 
    private Integer profileCompletionPercentage = 0;
}
```

### í”„ë¡œí•„ API ì—”ë“œí¬ì¸íŠ¸
```
POST /api/profiles/domestic/{memberId}    - êµ­ë‚´ í”„ë¡œí•„ ìƒì„±
GET  /api/profiles/domestic/{memberId}    - êµ­ë‚´ í”„ë¡œí•„ ì¡°íšŒ  
PUT  /api/profiles/domestic/{memberId}    - êµ­ë‚´ í”„ë¡œí•„ ìˆ˜ì •

POST /api/profiles/overseas/{memberId}    - í•´ì™¸ í”„ë¡œí•„ ìƒì„±
GET  /api/profiles/overseas/{memberId}    - í•´ì™¸ í”„ë¡œí•„ ì¡°íšŒ
PUT  /api/profiles/overseas/{memberId}    - í•´ì™¸ í”„ë¡œí•„ ìˆ˜ì •

GET  /api/profiles/domestic?minCompletion=80         - ì™„ì„±ë„ë³„ ì¡°íšŒ
GET  /api/profiles/overseas?country=ë¯¸êµ­              - êµ­ê°€ë³„ ì¡°íšŒ  
GET  /api/profiles/overseas/coordinator-required     - ì½”ë””ë„¤ì´í„° í•„ìš” ëŒ€ìƒ
GET  /api/profiles/overseas/expiring-documents       - ì„œë¥˜ ë§Œë£Œ ì˜ˆì •ì
```

---

## ğŸ”’ ë³´ì•ˆ ê¸°ëŠ¥

### ì…ë ¥ ê²€ì¦ ë° ë³´ì•ˆ
- **ì…ë ¥ Sanitization**: XSS ë°©ì§€
- **SQL ì¸ì ì…˜ ë°©ì§€**: íŒ¨í„´ ê²€ì‚¬  
- **ê°œì¸ì •ë³´ ë§ˆìŠ¤í‚¹**: ì´ë©”ì¼, ì „í™”ë²ˆí˜¸, ì—¬ê¶Œë²ˆí˜¸
- **ë¹„ë°€ë²ˆí˜¸ ì •ì±…**: 8ì ì´ìƒ, ëŒ€ì†Œë¬¸ì+ìˆ«ì+íŠ¹ìˆ˜ë¬¸ì
- **ì—­í• ë³„ ì ‘ê·¼ ì œì–´**: DOMESTIC_USER â†” OVERSEAS_USER ë¶„ë¦¬

### í”„ë¡œí•„ ìƒì„± ì œí•œ
```java
// êµ­ë‚´ ì‚¬ìš©ìëŠ” í•´ì™¸ í”„ë¡œí•„ ìƒì„± ë¶ˆê°€
if (member.getRole() == MemberRole.DOMESTIC_USER) {
    throw new CustomException.BadRequest("êµ­ë‚´ ì‚¬ìš©ìëŠ” í•´ì™¸ í”„ë¡œí•„ì„ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
}

// í•´ì™¸ ì‚¬ìš©ìëŠ” êµ­ë‚´ í”„ë¡œí•„ ìƒì„± ë¶ˆê°€
if (member.getRole() == MemberRole.OVERSEAS_USER) {  
    throw new CustomException.BadRequest("í•´ì™¸ ì‚¬ìš©ìëŠ” êµ­ë‚´ í”„ë¡œí•„ì„ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
}
```

---

## ğŸ“Š í”„ë¡œí•„ ì™„ì„±ë„ ì‹œìŠ¤í…œ

### ìë™ ì™„ì„±ë„ ê³„ì‚°
- **êµ­ë‚´ í”„ë¡œí•„**: 15ê°œ í•„ë“œ ê¸°ì¤€ (ê¸°ë³¸ì •ë³´ 5ê°œ, ì—°ë½ì²˜ 3ê°œ, ê±´ê°•ì •ë³´ 3ê°œ, ì¼€ì–´ì •ë³´ 4ê°œ)
- **í•´ì™¸ í”„ë¡œí•„**: 25ê°œ í•„ë“œ ê¸°ì¤€ (ì—¬ê¶Œì •ë³´, ì—°ë½ì²˜ ë¶„ë¦¬, ì…êµ­ì •ë³´ ì¶”ê°€)
- **ì™„ì„±ë„ ì„ê³„ê°’**: êµ­ë‚´ 80%, í•´ì™¸ 70%

### ë‹¨ê³„ë³„ ì •ë³´ ìˆ˜ì§‘
1. **ê¸°ë³¸ ì •ë³´**: ìƒë…„ì›”ì¼, ì„±ë³„, ì£¼ì†Œ
2. **ì—°ë½ì²˜**: ì‘ê¸‰ì—°ë½ì²˜ (í•´ì™¸ì˜ ê²½ìš° í•´ì™¸+í•œêµ­ ë¶„ë¦¬)  
3. **ê±´ê°• ì •ë³´**: ë³´í—˜, ì¥ê¸°ìš”ì–‘ë“±ê¸‰
4. **ì¼€ì–´ ì •ë³´**: ì„ í˜¸ì§€ì—­, ì˜ˆì‚°, íŠ¹ë³„ ìš”êµ¬ì‚¬í•­

---

## ğŸ›  ê°œë°œ ë„êµ¬

### í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´
```bash
# íšŒì› ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
./gradlew :test --tests "*MemberServiceTest"

# í”„ë¡œí•„ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸  
./gradlew :test --tests "*ProfileServiceTest"

# API í†µí•© í…ŒìŠ¤íŠ¸
./gradlew :test --tests "*ControllerTest"
```

### API ë¬¸ì„œ í™•ì¸
```bash
# Swagger UI ì ‘ì†
http://localhost:8080/swagger-ui.html

# OpenAPI ìŠ¤í™ í™•ì¸
http://localhost:8080/api-docs
```

---

## ğŸ“‹ í™•ì¸ ì‚¬í•­

### Phase 2-A ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] 5ê°€ì§€ ì—­í• ë¡œ íšŒì›ê°€ì… ì„±ê³µ
- [ ] JWT í† í°ìœ¼ë¡œ ë¡œê·¸ì¸ ì„±ê³µ  
- [ ] ë¹„ë°€ë²ˆí˜¸ BCrypt ì•”í˜¸í™” í™•ì¸
- [ ] ì—­í• ë³„ ê¶Œí•œ ì ‘ê·¼ ì œì–´ ë™ì‘
- [ ] Swagger API ë¬¸ì„œ ìƒì„± í™•ì¸

### Phase 2-B ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] êµ­ë‚´/í•´ì™¸ í”„ë¡œí•„ ìƒì„± ë¶„ë¦¬ ë™ì‘
- [ ] í”„ë¡œí•„ ì™„ì„±ë„ ìë™ ê³„ì‚°
- [ ] ê°œì¸ì •ë³´ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬ í™•ì¸
- [ ] ì„œë¥˜ ë§Œë£Œ ì˜ˆì •ì ì¡°íšŒ ê¸°ëŠ¥
- [ ] ì½”ë””ë„¤ì´í„° í•„ìš” ëŒ€ìƒ ìë™ ì‹ë³„

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

**Phase 3-A**: ëŒë´„ì§€ìˆ˜ ì²´í¬ ì‹œìŠ¤í…œ
- HealthAssessment ì—”í‹°í‹°
- 4ê°œ ì˜ì—­ í‰ê°€ ë¡œì§ (ê±·ê¸°, ì‹ì‚¬, ë°°ë³€, ì˜ì‚¬ì†Œí†µ)  
- ADL ì ìˆ˜ ê³„ì‚°
- ì¢…í•© ì¼€ì–´ ë“±ê¸‰ ì‚°ì¶œ

**ì¤‘ê°„ ì²´í¬í¬ì¸íŠ¸**: Phase 2 ì™„ë£Œ í›„ Phase 3 ì§„í–‰
</file>

<file path="docs/phases/phase-3.md">
# Phase 3: ê±´ê°• ìƒíƒœ í‰ê°€ ì‹œìŠ¤í…œ

## ğŸ¯ ê°œìš”
**ì†Œìš”ê¸°ê°„**: 3-4ì¼  
**ì˜ˆìƒ í† í°**: ~22,000 í† í°  
**ëª©í‘œ**: KBë¼ì´í”„ìƒëª… ê¸°ë°˜ ëŒë´„ì§€ìˆ˜ ì²´í¬ ì‹œìŠ¤í…œ + React UI êµ¬í˜„

---

## ğŸ“Œ Phase 3-A: ëŒë´„ì§€ìˆ˜ ì²´í¬ ì‹œìŠ¤í…œ

### êµ¬í˜„ ëŒ€ìƒ
- [ ] HealthAssessment ì—”í‹°í‹°
- [ ] 4ê°œ ì˜ì—­ í‰ê°€ ë¡œì§ (ê±·ê¸°, ì‹ì‚¬, ë°°ë³€, ì˜ì‚¬ì†Œí†µ)
- [ ] ADL ì ìˆ˜ ê³„ì‚° ì•Œê³ ë¦¬ì¦˜
- [ ] ì¢…í•© ì¼€ì–´ ë“±ê¸‰ ì‚°ì¶œ
- [ ] ì¥ê¸°ìš”ì–‘ë³´í—˜ ë“±ê¸‰ ì—°ë™

### ì—”í‹°í‹° ì„¤ê³„
```java
@Entity
@Table(name = "health_assessments")
public class HealthAssessment extends BaseEntity {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(name = "member_id", nullable = false)
    private String memberId;
    
    // ê¸°ë³¸ ì •ë³´
    private String gender;
    private Integer birthYear;
    
    // ADL í‰ê°€ (1-3ì )
    @Column(name = "mobility_level", nullable = false)
    private Integer mobilityLevel;        // ê±·ê¸° í™œë™
    
    @Column(name = "eating_level", nullable = false) 
    private Integer eatingLevel;          // ì‹ì‚¬ í™œë™
    
    @Column(name = "toilet_level", nullable = false)
    private Integer toiletLevel;          // ë°°ë³€ í™œë™
    
    @Column(name = "communication_level", nullable = false)
    private Integer communicationLevel;   // ì˜ì‚¬ì†Œí†µ
    
    // ì¥ê¸°ìš”ì–‘ë³´í—˜ ì •ë³´
    @Column(name = "ltci_grade")
    private Integer ltciGrade;           // 1-5ë“±ê¸‰, 6(ì¸ì§€ì§€ì›), 7(ëª¨ë¦„), 8(ì—†ìŒ)
    
    // ëŒë´„ëŒ€ìƒì ìƒíƒœ  
    @Column(name = "care_target_status")
    private Integer careTargetStatus;    // 1-4 (ìƒëª…ì˜ˆí›„ ìƒíƒœ)
    
    // ê³„ì‚°ëœ ê²°ê³¼
    @Column(name = "adl_score")
    private Integer adlScore;            // ADL ì ìˆ˜ (4-12ì )
    
    @Column(name = "overall_care_grade")
    private String overallCareGrade;     // ì¢…í•© ì¼€ì–´ ë“±ê¸‰
    
    @Column(name = "assessment_date")
    private LocalDateTime assessmentDate;
}
```

### ëŒë´„ì§€ìˆ˜ í‰ê°€ ê¸°ì¤€ (KBë¼ì´í”„ìƒëª… ê¸°ë°˜)

#### 1. ê±·ê¸° í™œë™ ëŠ¥ë ¥ (care_mobility)
```yaml
ë“±ê¸‰ 1 (ë…ë¦½): í˜¼ìì„œ ê°€ëŠ¥í•´ìš”
ë“±ê¸‰ 2 (ë¶€ë¶„ë„ì›€): ë¶€ë¶„ì ì¸ ë„ì›€ì´ í•„ìš”í•´ìš” (íƒ€ì¸ì˜ ë¶€ì¶•, ì§€íŒ¡ì´ ì´ìš© ë“±)  
ë“±ê¸‰ 3 (ì™„ì „ë„ì›€): í˜¼ìì„œëŠ” ë³´í–‰ì´ ì–´ë ¤ì›Œìš” (íœ ì²´ì–´ ì‚¬ìš© ë“±)
```

#### 2. ì‹ì‚¬ í™œë™ ëŠ¥ë ¥ (care_eating)
```yaml
ë“±ê¸‰ 1 (ë…ë¦½): í˜¼ìì„œ ê°€ëŠ¥í•´ìš”
ë“±ê¸‰ 2 (ë¶€ë¶„ë„ì›€): ë¶€ë¶„ì ì¸ ë„ì›€ì´ í•„ìš”í•´ìš” (ë°˜ì°¬ ì§‘ê¸°, ìë¥´ê¸° ë“± ì¼ë¶€ ë„ì›€)
ë“±ê¸‰ 3 (ì™„ì „ë„ì›€): ì™„ì „í•œ ë„ì›€ì´ í•„ìš”í•´ìš” (ìŒì‹ì„ ë–  ë¨¹ì—¬ì¤Œ)
```

#### 3. ë°°ë³€ í™œë™ ëŠ¥ë ¥ (care_toilet)  
```yaml
ë“±ê¸‰ 1 (ë…ë¦½): í˜¼ìì„œ í™”ì¥ì‹¤ì„ ì´ìš©í•  ìˆ˜ ìˆì–´ìš”
ë“±ê¸‰ 2 (ë¶€ë¶„ë„ì›€): í™”ì¥ì‹¤ ì´ìš© ì‹œ ë¶€ë¶„ì ì¸ ë„ì›€ì´ í•„ìš”í•´ìš”
ë“±ê¸‰ 3 (ì™„ì „ë„ì›€): ì™„ì „í•œ ë„ì›€ì´ í•„ìš”í•´ìš” (ê°„ì´ë³€ê¸°, ê¸°ì €ê·€ ì°©ìš© ë“±)
```

#### 4. ì˜ì‚¬ì†Œí†µ ëŠ¥ë ¥ (care_communication)
```yaml
ë“±ê¸‰ 1 (ì •ìƒ): ì •ìƒì ìœ¼ë¡œ ê°€ëŠ¥í•´ìš”  
ë“±ê¸‰ 2 (ë¶€ë¶„ì œí•œ): ë•Œë•Œë¡œ ì–´ë ¤ì›Œìš” (í™”ì¥ì‹¤ ì´ìš©ì˜ì‚¬ í‘œí˜„ ê°€ëŠ¥)
ë“±ê¸‰ 3 (ì‹¬ê°ì œí•œ): ì†Œí†µì´ ì–´ë ¤ì›Œìš” (í™”ì¥ì‹¤ ì´ìš©ì˜ì‚¬ í‘œí˜„ ì˜ ëª»í•¨)
```

### ì¼€ì–´ ë“±ê¸‰ ê³„ì‚° ë¡œì§
```java
@Service
public class CareGradeCalculator {
    
    public CareGrade calculateComprehensiveGrade(HealthAssessment assessment) {
        // 1. ê¸°ë³¸ ADL ì ìˆ˜ ê³„ì‚° (ì¼ìƒìƒí™œìˆ˜í–‰ëŠ¥ë ¥)
        int adlScore = calculateADLScore(assessment);
        
        // 2. ì¥ê¸°ìš”ì–‘ë³´í—˜ ë“±ê¸‰ ë°˜ì˜
        int ltciGrade = assessment.getLtciGrade();
        
        // 3. ëŒë´„ëŒ€ìƒì ìƒíƒœ ë°˜ì˜  
        int careTargetStatus = assessment.getCareTargetStatus();
        
        // 4. ì¢…í•© ì¼€ì–´ ë“±ê¸‰ ë„ì¶œ
        return determineOverallCareGrade(adlScore, ltciGrade, careTargetStatus);
    }
    
    private int calculateADLScore(HealthAssessment assessment) {
        int mobility = assessment.getMobilityLevel();    // 1-3
        int eating = assessment.getEatingLevel();        // 1-3  
        int toilet = assessment.getToiletLevel();        // 1-3
        int communication = assessment.getCommunicationLevel(); // 1-3
        
        // ê° ì˜ì—­ë³„ ê°€ì¤‘ì¹˜ ì ìš©
        return (mobility * 25) + (eating * 20) + (toilet * 30) + (communication * 25);
    }
}
```

### API ì—”ë“œí¬ì¸íŠ¸
```
POST /api/health-assessments                    - ê±´ê°• í‰ê°€ ìƒì„±
GET  /api/health-assessments/{memberId}         - íšŒì›ë³„ í‰ê°€ ì¡°íšŒ
PUT  /api/health-assessments/{id}               - í‰ê°€ ì •ë³´ ìˆ˜ì •
POST /api/health-assessments/calculate          - ì¼€ì–´ ë“±ê¸‰ ê³„ì‚°
GET  /api/health-assessments/statistics         - í†µê³„ ì¡°íšŒ (ê´€ë¦¬ì)
```

---

## ğŸ“Œ Phase 3-B: React ì²´í¬ë¦¬ìŠ¤íŠ¸ UI

### êµ¬í˜„ ëŒ€ìƒ
- [ ] React 18 + TypeScript í”„ë¡œì íŠ¸ ì„¤ì • í™•ì¥
- [ ] ê±´ê°• ìƒíƒœ ì²´í¬ë¦¬ìŠ¤íŠ¸ í¼ ì»´í¬ë„ŒíŠ¸
- [ ] ë‹¨ê³„ë³„ ì§„í–‰ UI (Step Wizard)
- [ ] ê²°ê³¼ í‘œì‹œ ì»´í¬ë„ŒíŠ¸
- [ ] ë°˜ì‘í˜• ëª¨ë°”ì¼ ìµœì í™”

### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
```typescript
// ê±´ê°• ìƒíƒœ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì»´í¬ë„ŒíŠ¸
export const HealthAssessmentForm: React.FC = () => {
  const [assessment, setAssessment] = useState<HealthAssessmentData>({
    mobility: null,
    eating: null, 
    toilet: null,
    communication: null,
    ltciGrade: null,
    careTargetStatus: null
  });

  const assessmentQuestions = {
    mobility: {
      title: "ê±·ê¸° í™œë™ ëŠ¥ë ¥",
      options: [
        { value: 1, label: "í˜¼ìì„œ ê°€ëŠ¥í•´ìš”" },
        { value: 2, label: "ë¶€ë¶„ì ì¸ ë„ì›€ì´ í•„ìš”í•´ìš”\n(íƒ€ì¸ì˜ ë¶€ì¶•, ì§€íŒ¡ì´ ì´ìš© ë“±)" },
        { value: 3, label: "í˜¼ìì„œëŠ” ë³´í–‰ì´ ì–´ë ¤ì›Œìš”\n(íœ ì²´ì–´ ì‚¬ìš© ë“±)" }
      ]
    },
    // ... ë‹¤ë¥¸ í•­ëª©ë“¤
  };

  const handleSubmit = async () => {
    const result = await healthAssessmentApi.calculate(assessment);
    // ê²°ê³¼ ì²˜ë¦¬ ë° ì½”ë””ë„¤ì´í„° ì¶”ì²œ
  };
};
```

### UI/UX ê¸°ëŠ¥
- **ë‹¨ê³„ë³„ ì§„í–‰**: 4ë‹¨ê³„ Step Wizard (ê±·ê¸°â†’ì‹ì‚¬â†’ë°°ë³€â†’ì˜ì‚¬ì†Œí†µ)
- **ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°**: ì„ íƒí•  ë•Œë§ˆë‹¤ ì˜ˆìƒ ë“±ê¸‰ í‘œì‹œ  
- **ì ‘ê·¼ì„±**: ì‹œê°ì¥ì• ì¸ ìŠ¤í¬ë¦°ë¦¬ë” ì§€ì›
- **ëª¨ë°”ì¼ ìµœì í™”**: Touch-friendly ë²„íŠ¼ í¬ê¸°
- **ë‹¤êµ­ì–´ ì§€ì›**: í•œ/ì˜/ì¤‘/ì¼ ì–¸ì–´ ì „í™˜

### ê²°ê³¼ í‘œì‹œ í™”ë©´
```typescript
export const AssessmentResult: React.FC<{result: CareGradeResult}> = ({result}) => {
  return (
    <div className="assessment-result">
      <div className="result-summary">
        <h2>ê±´ê°• ìƒíƒœ í‰ê°€ ê²°ê³¼</h2>
        <div className="care-grade-badge">
          <span className="grade">{result.overallCareGrade}</span>
          <span className="score">ADL ì ìˆ˜: {result.adlScore}ì </span>
        </div>
      </div>
      
      <div className="recommendations">
        <h3>ğŸ¯ ë§¤ì¹­ëœ ì½”ë””ë„¤ì´í„°: {result.matchedCoordinators.length}ëª…</h3>
        <h3>ğŸ¥ ì¶”ì²œ ìš”ì–‘ì‹œì„¤: {result.recommendedFacilities.length}ê³³</h3>
        
        <div className="next-steps">
          <button onClick={() => navigate('/coordinator-matching')}>
            ì½”ë””ë„¤ì´í„° ë§¤ì¹­ ì‹œì‘
          </button>
          <button onClick={() => navigate('/facility-search')}>
            ì‹œì„¤ ë‘˜ëŸ¬ë³´ê¸°  
          </button>
        </div>
      </div>
    </div>
  );
};
```

---

## ğŸ”— ì™¸ë¶€ ì—°ë™ ì¤€ë¹„

### ì¥ê¸°ìš”ì–‘ê¸°ê´€ í‰ê°€ API ì—°ë™
```java
@Component
public class LtciEvaluationApiClient {
    
    @Value("${ltci.evaluation.api.key}")
    private String apiKey;
    
    @Value("${ltci.evaluation.base.url}")  
    private String baseUrl;
    
    public List<FacilityEvaluation> getFacilityEvaluations(String region) {
        // ê³µê³µë°ì´í„° API í˜¸ì¶œ
        // ì¸ì¦í‚¤: CCXHQiSSQ0J+RRaadSjmmS7ltxG/tlSVOYMjh45MmGne68ptgGAaAJVJti8nBazSjLemTAyb5gAuj43xq7fTog==
    }
}
```

---

## ğŸ“Š í†µê³„ ë° ë¶„ì„

### í‰ê°€ ê²°ê³¼ í†µê³„
- **ì¼€ì–´ ë“±ê¸‰ë³„ ë¶„í¬**: 1ë“±ê¸‰(ìµœì¤‘ì¦) ~ 6ë“±ê¸‰(ì¸ì§€ì§€ì›) ë¹„ìœ¨
- **ì§€ì—­ë³„ í‰ê°€ í˜„í™©**: ì‹œ/ë„ë³„ í‰ê°€ ì™„ë£Œìœ¨
- **ì—°ë ¹ëŒ€ë³„ ì¼€ì–´ ë“±ê¸‰**: 60ëŒ€, 70ëŒ€, 80ëŒ€+ ë“±ê¸‰ ë¶„í¬  
- **ì„±ë³„ ì¼€ì–´ íŒ¨í„´**: ë‚¨/ì—¬ ì¼€ì–´ ë“±ê¸‰ ì°¨ì´ ë¶„ì„

### ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ë°ì´í„°
```java
@RestController
@RequestMapping("/api/admin/health-assessments")
public class HealthAssessmentAdminController {
    
    @GetMapping("/statistics")
    public ResponseEntity<AssessmentStatistics> getStatistics() {
        return ResponseEntity.ok(assessmentStatisticsService.getOverallStatistics());
    }
    
    @GetMapping("/grade-distribution") 
    public ResponseEntity<Map<String, Long>> getCareGradeDistribution() {
        return ResponseEntity.ok(assessmentStatisticsService.getCareGradeDistribution());
    }
}
```

---

## ğŸ›  ê°œë°œ ë„êµ¬

### í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´
```bash
# ë°±ì—”ë“œ ê±´ê°•í‰ê°€ í…ŒìŠ¤íŠ¸
./gradlew :test --tests "*HealthAssessmentTest"

# ì¼€ì–´ë“±ê¸‰ ê³„ì‚° í…ŒìŠ¤íŠ¸  
./gradlew :test --tests "*CareGradeCalculatorTest"

# í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸
cd frontend && npm test HealthAssessmentForm
```

### API í…ŒìŠ¤íŠ¸
```bash
# ê±´ê°• í‰ê°€ ìƒì„±
curl -X POST http://localhost:8080/api/health-assessments \
  -H "Content-Type: application/json" \
  -d '{"memberId":"user123","mobilityLevel":2,"eatingLevel":1,"toiletLevel":2,"communicationLevel":1}'

# ì¼€ì–´ ë“±ê¸‰ ê³„ì‚°
curl -X POST http://localhost:8080/api/health-assessments/calculate \
  -H "Content-Type: application/json"  
  -d '{"adlScore":80,"ltciGrade":3,"careTargetStatus":4}'
```

---

## ğŸ“‹ í™•ì¸ ì‚¬í•­

### Phase 3-A ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] 4ê°œ ì˜ì—­ ê±´ê°• í‰ê°€ ë¡œì§ êµ¬í˜„
- [ ] ADL ì ìˆ˜ ê³„ì‚° ì•Œê³ ë¦¬ì¦˜ ê²€ì¦
- [ ] ì¥ê¸°ìš”ì–‘ë³´í—˜ ë“±ê¸‰ ì—°ë™ í™•ì¸
- [ ] ì¢…í•© ì¼€ì–´ ë“±ê¸‰ ì‚°ì¶œ ì •í™•ì„± í…ŒìŠ¤íŠ¸
- [ ] API ì—”ë“œí¬ì¸íŠ¸ ì •ìƒ ë™ì‘ í™•ì¸

### Phase 3-B ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸  
- [ ] React ì²´í¬ë¦¬ìŠ¤íŠ¸ í¼ ì™„ì„±
- [ ] ë‹¨ê³„ë³„ ì§„í–‰ UI ë™ì‘ í™•ì¸
- [ ] ëª¨ë°”ì¼ ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ ê²€ì¦
- [ ] ë°±ì—”ë“œ API ì—°ë™ ì„±ê³µ
- [ ] ê²°ê³¼ í™”ë©´ í‘œì‹œ ì™„ë£Œ

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

**Phase 4-A**: ì½”ë””ë„¤ì´í„° í”„ë¡œí•„ ê´€ë¦¬  
- CoordinatorProfile ì—”í‹°í‹°
- ìê¸° ì„¤ì • ì¼€ì–´ ë“±ê¸‰ ì‹œìŠ¤í…œ
- ì „ë¬¸ì„± ë° ê²½ë ¥ ê´€ë¦¬  
- ì‹¤ì‹œê°„ ê°€ìš©ì„± ê´€ë¦¬

**ì¤‘ê°„ ì²´í¬í¬ì¸íŠ¸**: Phase 3 ì™„ë£Œ í›„ ì½”ë””ë„¤ì´í„° ë§¤ì¹­ ì‹œìŠ¤í…œ êµ¬ì¶•
</file>

<file path="docs/phases/phase-4.md">
# Phase 4: ì½”ë””ë„¤ì´í„° ë§¤ì¹­ ì‹œìŠ¤í…œ

## ğŸ¯ ê°œìš”
**ì†Œìš”ê¸°ê°„**: 4-5ì¼  
**ì˜ˆìƒ í† í°**: ~27,000 í† í°  
**ëª©í‘œ**: AI ê¸°ë°˜ ì½”ë””ë„¤ì´í„° ìë™ ë§¤ì¹­ ì‹œìŠ¤í…œ + ìê¸° ì„¤ì • ì¼€ì–´ ë“±ê¸‰ ê´€ë¦¬

---

## ğŸ“Œ Phase 4-A: ì½”ë””ë„¤ì´í„° í”„ë¡œí•„ ê´€ë¦¬

### êµ¬í˜„ ëŒ€ìƒ
- [ ] CoordinatorProfile ì—”í‹°í‹°
- [ ] ìê¸° ì„¤ì • ì¼€ì–´ ë“±ê¸‰ ì‹œìŠ¤í…œ  
- [ ] ì „ë¬¸ì„± ë° ê²½ë ¥ ê´€ë¦¬
- [ ] ì‹¤ì‹œê°„ ê°€ìš©ì„± ê´€ë¦¬
- [ ] ì„±ê³¼ ê¸°ë°˜ ì‹ ë¢°ë„ ì ìˆ˜

### ì½”ë””ë„¤ì´í„° ì „ë¬¸ ë¶„ì•¼ë³„ ë¶„ë¥˜
```yaml
ì˜ë£Œ ì „ë¬¸ ì½”ë””ë„¤ì´í„°:
  - ê°„í˜¸ì‚¬, ì‚¬íšŒë³µì§€ì‚¬, ìš”ì–‘ë³´í˜¸ì‚¬ ìê²© ë³´ìœ 
  - ì˜ë£Œì§„ê³¼ì˜ ì „ë¬¸ì  ì†Œí†µ ëŠ¥ë ¥
  - ì¹˜ë§¤, ë‡Œì¡¸ì¤‘ ë“± íŠ¹ì • ì§ˆí™˜ ì „ë¬¸ì„±

ë²•ë¬´/í–‰ì • ì „ë¬¸ ì½”ë””ë„¤ì´í„°:  
  - í–‰ì •ì‚¬, ë²•ë¬´ì‚¬ ë“± ìê²© ë³´ìœ 
  - ë¹„ì, ë³´í—˜, í–‰ì •ì ˆì°¨ ì „ë¬¸ ì§€ì‹
  - ì™¸êµ­ì¸ ê´€ë ¨ ë²•ë ¹ ìˆ™ì§€

ì–¸ì–´ ì „ë¬¸ ì½”ë””ë„¤ì´í„°:
  - ë‹¤êµ­ì–´ êµ¬ì‚¬ ëŠ¥ë ¥ (ì˜ì–´, ì¤‘êµ­ì–´, ì¼ë³¸ì–´)
  - ë²ˆì—­/í†µì—­ ìê²©ì¦ ë³´ìœ 
  - ë¬¸í™”ì  ì°¨ì´ ì´í•´ ë° ì¤‘ì¬ ëŠ¥ë ¥

ì‹¬ë¦¬ ìƒë‹´ ì „ë¬¸ ì½”ë””ë„¤ì´í„°:
  - ì‹¬ë¦¬ìƒë‹´ì‚¬, ì‚¬íšŒë³µì§€ì‚¬ ìê²©
  - ê°€ì¡± ê°ˆë“± ì¤‘ì¬ ë° ì‹¬ë¦¬ì  ì§€ì›
  - ì¹˜ë§¤ í™˜ì ë° ê°€ì¡± ìƒë‹´ ì „ë¬¸ì„±
```

### ì—”í‹°í‹° ì„¤ê³„
```java
@Entity
@Table(name = "coordinator_care_settings")
public class CoordinatorCareSettings extends BaseEntity {
    @Id
    private Long id;
    private String coordinatorId;
    
    // ì‹œìŠ¤í…œ ìë™ ì‚°ì¶œ ë“±ê¸‰
    private Integer baseCareLevel;           // ìê²©ì¦ ê¸°ë°˜ ê¸°ë³¸ ë“±ê¸‰
    private Integer maxCareLevel;            // ê²½ë ¥ ê¸°ë°˜ ìµœëŒ€ ë“±ê¸‰
    
    // ì½”ë””ë„¤ì´í„° ê°œì¸ ì„¤ì •
    @ElementCollection
    private Set<Integer> preferredCareGrades;    // ì„ í˜¸ ì¼€ì–´ ë“±ê¸‰ [1,2,3,4,5,6]
    
    @ElementCollection  
    private Set<Integer> excludedCareGrades;     // ê±°ë¶€ ì¼€ì–´ ë“±ê¸‰ [1,2]
    
    @ElementCollection
    private Set<String> specialtyAreas;         // ì „ë¬¸ ë¶„ì•¼ ["dementia", "medical"]
    
    // ì—…ë¬´ëŸ‰ ì„¤ì •
    private Integer maxSimultaneousCases;       // ë™ì‹œ ë‹´ë‹¹ ê°€ëŠ¥ ì¼€ì´ìŠ¤ ìˆ˜
    private Integer preferredCasesPerMonth;     // ì›” ì„ í˜¸ ì¼€ì´ìŠ¤ ìˆ˜
    
    // ê·¼ë¬´ ì¡°ê±´ ì„¤ì •
    private Boolean availableWeekends;          // ì£¼ë§ ê·¼ë¬´ ê°€ëŠ¥ ì—¬ë¶€
    private Boolean availableEmergency;         // ì‘ê¸‰ ìƒí™© ëŒ€ì‘ ê°€ëŠ¥ ì—¬ë¶€
    private Set<String> workingRegions;         // ê·¼ë¬´ ê°€ëŠ¥ ì§€ì—­
    
    // ì„±ê³¼ ê¸°ë°˜ ì¡°ì •
    private Double performanceScore;            // ì„±ê³¼ ì ìˆ˜ (0.0-5.0)
    private Double customerSatisfaction;        // ê³ ê° ë§Œì¡±ë„ (0.0-5.0)
    private Integer successfulCases;            // ì„±ê³µ ì¼€ì´ìŠ¤ ìˆ˜
    private Integer totalCases;                 // ì´ ë‹´ë‹¹ ì¼€ì´ìŠ¤ ìˆ˜
    
    private LocalDateTime lastUpdated;
}
```

### ìê²©ì¦ ê¸°ë°˜ ê¸°ë³¸ ë“±ê¸‰ ì‹œìŠ¤í…œ
```yaml
Tier 1 (ìš”ì–‘ë³´í˜¸ì‚¬): 
  - ê¸°ë³¸ ì¼€ì–´ ë“±ê¸‰: 4-5ë“±ê¸‰, ì¸ì§€ì§€ì›ë“±ê¸‰
  - ìƒí•œì„ : 3ë“±ê¸‰ê¹Œì§€ ê°€ëŠ¥ (ê²½ë ¥ 2ë…„+ ì‹œ)
  
Tier 2 (ê°„í˜¸ì¡°ë¬´ì‚¬, ì‚¬íšŒë³µì§€ì‚¬):
  - ê¸°ë³¸ ì¼€ì–´ ë“±ê¸‰: 2-5ë“±ê¸‰  
  - ìƒí•œì„ : 1ë“±ê¸‰ê¹Œì§€ ê°€ëŠ¥ (ê²½ë ¥ 5ë…„+ ì‹œ)
  
Tier 3 (ê°„í˜¸ì‚¬, ì˜ë£Œì§„):
  - ê¸°ë³¸ ì¼€ì–´ ë“±ê¸‰: 1-5ë“±ê¸‰ ì „ì²´
  - íŠ¹ìˆ˜ ì¼€ì–´: í˜¸ìŠ¤í”¼ìŠ¤, ì˜ë£Œì§„ í˜‘ë ¥ ì¼€ì–´
```

### API ì—”ë“œí¬ì¸íŠ¸
```
GET  /api/coordinators/{coordinatorId}/care-settings       - ì¼€ì–´ ì„¤ì • ì¡°íšŒ
PUT  /api/coordinators/{coordinatorId}/care-settings       - ì¼€ì–´ ì„¤ì • ì—…ë°ì´íŠ¸
POST /api/coordinators/{coordinatorId}/care-grades/preferences  - ì„ í˜¸/ê±°ë¶€ ë“±ê¸‰ ì„¤ì •
GET  /api/coordinators/{coordinatorId}/matching-statistics     - ë§¤ì¹­ ì„±ê³¼ í†µê³„
POST /api/coordinators/{coordinatorId}/availability            - ì‹¤ì‹œê°„ ê°€ìš©ì„± ì—…ë°ì´íŠ¸
```

---

## ğŸ“Œ Phase 4-B: AI ê¸°ë°˜ ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜

### êµ¬í˜„ ëŒ€ìƒ  
- [ ] ë‹¤ì¸µ ë§¤ì¹­ ì‹œìŠ¤í…œ (Multi-Layer Matching)
- [ ] ì¢…í•© ì ìˆ˜ ê³„ì‚° ë¡œì§
- [ ] ì—…ë¬´ëŸ‰ ìµœì í™” ë¶„ë°°
- [ ] ë§¤ì¹­ ê²°ê³¼ ì„¤ëª… ìƒì„±
- [ ] ì‹¤ì‹œê°„ ê°€ìš©ì„± ë°˜ì˜

### ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ êµ¬ì¡°
```java
@Service
public class OptimizedCoordinatorMatchingService {
    
    public List<CoordinatorMatch> findOptimalMatches(HealthAssessment assessment, 
                                                   MatchingPreference preference) {
        
        // 1ë‹¨ê³„: ê¸°ë³¸ ìê²© í•„í„°ë§
        List<Coordinator> eligibleCoordinators = filterByBasicQualifications(assessment);
        
        // 2ë‹¨ê³„: ì½”ë””ë„¤ì´í„° ì„¤ì • ë§¤ì¹­
        List<Coordinator> settingsMatched = filterByCoordinatorSettings(eligibleCoordinators, assessment);
        
        // 3ë‹¨ê³„: AI ìŠ¤ì½”ì–´ë§ ë° ìµœì í™”
        List<CoordinatorMatch> scoredMatches = calculateOptimalMatches(settingsMatched, assessment);
        
        // 4ë‹¨ê³„: ì‹¤ì‹œê°„ ê°€ìš©ì„± í™•ì¸
        return filterByRealTimeAvailability(scoredMatches, preference);
    }
}
```

### ì¢…í•© ì ìˆ˜ ê³„ì‚° (5.0 ë§Œì )
```java
private double calculateComprehensiveMatchScore(Coordinator coordinator, HealthAssessment assessment) {
    double score = 0.0;
    
    // 1. ì „ë¬¸ì„± ë§¤ì¹­ ì ìˆ˜ (40%)
    score += calculateSpecialtyMatchScore(coordinator, assessment) * 0.4;
    
    // 2. ê²½ë ¥ ë° ì„±ê³¼ ì ìˆ˜ (25%)
    score += calculateExperienceScore(coordinator) * 0.25;
    
    // 3. ê³ ê° ë§Œì¡±ë„ ì ìˆ˜ (20%)
    score += coordinator.getCareSettings().getCustomerSatisfaction() * 0.2;
    
    // 4. ì§€ì—­ ì ‘ê·¼ì„± ì ìˆ˜ (10%)
    score += calculateLocationScore(coordinator, assessment) * 0.1;
    
    // 5. ì‹¤ì‹œê°„ ê°€ìš©ì„± ë³´ë„ˆìŠ¤ (5%)
    score += calculateAvailabilityBonus(coordinator) * 0.05;
    
    return Math.min(score, 5.0); // ìµœëŒ€ 5ì 
}
```

### ì „ë¬¸ì„± ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸ ë§¤ì¹­
```java
private double calculateSpecialtyMatchScore(Coordinator coordinator, HealthAssessment assessment) {
    double specialtyScore = 0.0;
    Set<String> coordinatorSpecialties = coordinator.getCareSettings().getSpecialtyAreas();
    
    // ì¹˜ë§¤ ì „ë¬¸ì„± ë§¤ì¹­
    if (assessment.getLtciGrade() == 6 || assessment.getCommunicationLevel() == 3) {
        if (coordinatorSpecialties.contains("dementia")) {
            specialtyScore += 2.0;
        }
    }
    
    // ì˜ë£Œ ì „ë¬¸ì„± ë§¤ì¹­ (1-2ë“±ê¸‰, ìƒíƒœ1-2)
    if (assessment.getOverallCareGrade().getLevel() <= 2 || assessment.getCareTargetStatus() <= 2) {
        if (coordinatorSpecialties.contains("medical")) {
            specialtyScore += 2.0;
        }
    }
    
    // ì¬í™œ ì „ë¬¸ì„± ë§¤ì¹­
    if (assessment.getMobilityLevel() >= 2) {
        if (coordinatorSpecialties.contains("rehabilitation")) {
            specialtyScore += 1.5;
        }
    }
    
    // ë‹¤êµ­ì–´ ì§€ì› (ì¬ì™¸ë™í¬)
    if (assessment.isOverseasKorean()) {
        if (coordinatorSpecialties.contains("multilingual")) {
            specialtyScore += 1.0;
        }
    }
    
    return Math.min(specialtyScore, 5.0);
}
```

### ì—…ë¬´ëŸ‰ ìµœì í™” ë¶„ë°°
```java
@Component
public class CoordinatorWorkloadOptimizer {
    
    public List<CoordinatorMatch> optimizeWorkloadDistribution(List<CoordinatorMatch> matches) {
        return matches.stream()
            .map(match -> {
                Coordinator coordinator = match.getCoordinator();
                double workloadScore = calculateWorkloadScore(coordinator);
                
                // ì—…ë¬´ëŸ‰ì´ ì ì€ ì½”ë””ë„¤ì´í„°ì—ê²Œ ê°€ì‚°ì 
                double adjustedScore = match.getMatchScore() + (workloadScore * 0.3);
                
                return new CoordinatorMatch(coordinator, adjustedScore, 
                    match.getMatchReason() + generateWorkloadReason(workloadScore));
            })
            .sorted(Comparator.comparing(CoordinatorMatch::getMatchScore).reversed())
            .collect(Collectors.toList());
    }
    
    private double calculateWorkloadScore(Coordinator coordinator) {
        CoordinatorCareSettings settings = coordinator.getCareSettings();
        int currentCases = getCurrentActiveCases(coordinator.getId());
        int maxCases = settings.getMaxSimultaneousCases();
        
        // ì—…ë¬´ëŸ‰ ë¹„ìœ¨ ê³„ì‚° (ë‚®ì„ìˆ˜ë¡ ë†’ì€ ì ìˆ˜)
        double workloadRatio = (double) currentCases / maxCases;
        
        if (workloadRatio >= 1.0) return 0.0;      // í¬í™” ìƒíƒœ
        if (workloadRatio >= 0.8) return 1.0;      // ê±°ì˜ í¬í™”
        if (workloadRatio >= 0.6) return 2.0;      // ì ì • ìˆ˜ì¤€
        if (workloadRatio >= 0.4) return 3.0;      // ì—¬ìœ  ìˆìŒ
        return 4.0;                                // ë§¤ìš° ì—¬ìœ 
    }
}
```

### ì§€ëŠ¥í˜• ë§¤ì¹­ ê²°ê³¼ ì„¤ëª…
```java
public class MatchingExplanationGenerator {
    
    public String generateMatchReason(Coordinator coordinator, HealthAssessment assessment) {
        StringBuilder reason = new StringBuilder();
        
        // ì „ë¬¸ì„± ë§¤ì¹­ ì´ìœ 
        if (isSpecialtyMatch(coordinator, assessment)) {
            reason.append("ğŸ¯ ì „ë¬¸ ë¶„ì•¼ ì™„ë²½ ë§¤ì¹­: ");
            reason.append(getSpecialtyDescription(coordinator, assessment));
            reason.append("\n");
        }
        
        // ê²½ë ¥ ë§¤ì¹­ ì´ìœ 
        int experience = coordinator.getCareSettings().getExperienceYears();
        reason.append("ğŸ“Š ê²½ë ¥: ").append(experience).append("ë…„ (");
        if (experience >= 10) reason.append("ìµœê³  ì „ë¬¸ê°€");
        else if (experience >= 5) reason.append("ìˆ™ë ¨ ì „ë¬¸ê°€");
        else if (experience >= 2) reason.append("ê²½ë ¥ì");
        else reason.append("ì‹ ì…");
        reason.append(")\n");
        
        // ì„±ê³¼ ì´ìœ 
        double satisfaction = coordinator.getCareSettings().getCustomerSatisfaction();
        reason.append("â­ ê³ ê° ë§Œì¡±ë„: ").append(satisfaction).append("/5.0");
        if (satisfaction >= 4.5) reason.append(" (ìµœìš°ìˆ˜)");
        else if (satisfaction >= 4.0) reason.append(" (ìš°ìˆ˜)");
        else if (satisfaction >= 3.5) reason.append(" (ì–‘í˜¸)");
        reason.append("\n");
        
        // ê°€ìš©ì„± ì´ìœ 
        int currentLoad = getCurrentActiveCases(coordinator.getId());
        int maxLoad = coordinator.getCareSettings().getMaxSimultaneousCases();
        reason.append("â° í˜„ì¬ ì—…ë¬´ëŸ‰: ").append(currentLoad).append("/").append(maxLoad);
        if (currentLoad < maxLoad * 0.6) reason.append(" (ì¦‰ì‹œ ë°°ì • ê°€ëŠ¥)");
        else if (currentLoad < maxLoad * 0.8) reason.append(" (ë°°ì • ê°€ëŠ¥)");
        else reason.append(" (ì¼ì • ì¡°ìœ¨ í•„ìš”)");
        
        return reason.toString();
    }
}
```

---

## ğŸ¨ React ë§¤ì¹­ ê²°ê³¼ UI

### ë§¤ì¹­ ê²°ê³¼ ì»´í¬ë„ŒíŠ¸
```typescript
export const CoordinatorMatchingResult: React.FC<{matches: CoordinatorMatch[]}> = ({matches}) => {
  const [selectedCoordinator, setSelectedCoordinator] = useState<CoordinatorMatch | null>(null);

  return (
    <div className="coordinator-matching-result">
      <h2>ğŸ¯ ë§¤ì¹­ëœ ì½”ë””ë„¤ì´í„° ({matches.length}ëª…)</h2>
      
      <div className="matching-summary">
        <div className="best-match">
          <h3>ğŸ† ìµœê³  ë§¤ì¹­ (ë§¤ì¹­ë„: {matches[0].matchScore.toFixed(1)}/5.0)</h3>
          <CoordinatorCard coordinator={matches[0]} />
        </div>
        
        <div className="alternative-matches">
          <h3>ğŸ“‹ ë‹¤ë¥¸ ì¶”ì²œ ì½”ë””ë„¤ì´í„°</h3>
          {matches.slice(1, 4).map((match, index) => (
            <CoordinatorCard key={index} coordinator={match} compact />
          ))}
        </div>
      </div>
      
      <div className="matching-actions">
        <button 
          className="primary-button"
          onClick={() => requestConsultation(matches[0])}
        >
          ìµœê³  ë§¤ì¹­ ì½”ë””ë„¤ì´í„°ì™€ ìƒë‹´ ì‹ ì²­
        </button>
        <button 
          className="secondary-button"
          onClick={() => viewAllMatches()}
        >
          ì „ì²´ ë§¤ì¹­ ê²°ê³¼ ë³´ê¸° ({matches.length}ëª…)
        </button>
      </div>
    </div>
  );
};

const CoordinatorCard: React.FC<{coordinator: CoordinatorMatch, compact?: boolean}> = ({coordinator, compact = false}) => {
  return (
    <div className={`coordinator-card ${compact ? 'compact' : ''}`}>
      <div className="coordinator-header">
        <div className="coordinator-info">
          <h4>{coordinator.name}</h4>
          <span className="specialties">
            {coordinator.specialtyAreas.map(area => (
              <span key={area} className="specialty-badge">{area}</span>
            ))}
          </span>
        </div>
        <div className="match-score">
          <span className="score">{coordinator.matchScore.toFixed(1)}</span>
          <span className="max-score">/5.0</span>
        </div>
      </div>
      
      {!compact && (
        <div className="coordinator-details">
          <div className="match-reason">
            <h5>ğŸ¯ ë§¤ì¹­ ì´ìœ </h5>
            <p>{coordinator.matchReason}</p>
          </div>
          
          <div className="coordinator-stats">
            <div className="stat">
              <span className="stat-label">ê²½ë ¥</span>
              <span className="stat-value">{coordinator.experienceYears}ë…„</span>
            </div>
            <div className="stat">
              <span className="stat-label">ì„±ê³µ ì¼€ì´ìŠ¤</span>
              <span className="stat-value">{coordinator.successfulCases}ê±´</span>
            </div>
            <div className="stat">
              <span className="stat-label">ë§Œì¡±ë„</span>
              <span className="stat-value">{coordinator.customerSatisfaction.toFixed(1)}/5.0</span>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};
```

---

## ğŸ“Š ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

### ë§¤ì¹­ ì„±ê³µë¥  ì¶”ì 
```yaml
ë§¤ì¹­ ì„±ê³µë¥  ì¶”ì :
  - ì´ˆê¸° ë§¤ì¹­ ì„±ê³µë¥ : ë§¤ì¹­ í›„ ê³„ì•½ ì²´ê²°ìœ¨
  - ì¥ê¸° ë§Œì¡±ë„: 3ê°œì›” í›„ ê³ ê° ë§Œì¡±ë„  
  - ì½”ë””ë„¤ì´í„° ë§Œì¡±ë„: ì—…ë¬´ ë¶€í•˜ ì ì •ì„±
  - ì¬ë§¤ì¹­ë¥ : ì½”ë””ë„¤ì´í„° ë³€ê²½ ìš”ì²­ë¥ 

ì‹¤ì‹œê°„ ìµœì í™”:
  - A/B í…ŒìŠ¤íŠ¸: ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ ì„±ëŠ¥ ë¹„êµ
  - ë¨¸ì‹ ëŸ¬ë‹: ë§¤ì¹­ ì„±ê³µ íŒ¨í„´ í•™ìŠµ
  - í”¼ë“œë°± ë£¨í”„: ê²°ê³¼ ê¸°ë°˜ ì•Œê³ ë¦¬ì¦˜ ê°œì„ 
  - ê³„ì ˆë³„ ì¡°ì •: ì‹œê¸°ë³„ ìˆ˜ìš” íŒ¨í„´ ë°˜ì˜
```

### ê´€ë¦¬ì ë§¤ì¹­ í†µê³„ API
```java
@RestController
@RequestMapping("/api/admin/coordinator-matching")
public class CoordinatorMatchingAdminController {
    
    @GetMapping("/statistics")
    public ResponseEntity<MatchingStatistics> getMatchingStatistics() {
        return ResponseEntity.ok(matchingStatisticsService.getOverallStatistics());
    }
    
    @GetMapping("/success-rate")
    public ResponseEntity<Map<String, Double>> getMatchingSuccessRate() {
        return ResponseEntity.ok(matchingStatisticsService.getSuccessRateBySpecialty());
    }
    
    @GetMapping("/coordinator-workload")
    public ResponseEntity<List<CoordinatorWorkloadReport>> getCoordinatorWorkload() {
        return ResponseEntity.ok(matchingStatisticsService.getWorkloadReports());
    }
}
```

---

## ğŸ›  ê°œë°œ ë„êµ¬

### í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´
```bash
# ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ í…ŒìŠ¤íŠ¸
./gradlew :test --tests "*CoordinatorMatchingServiceTest"

# ì—…ë¬´ëŸ‰ ìµœì í™” í…ŒìŠ¤íŠ¸  
./gradlew :test --tests "*WorkloadOptimizerTest"

# ì „ë¬¸ì„± ë§¤ì¹­ í…ŒìŠ¤íŠ¸
./gradlew :test --tests "*SpecialtyMatchingTest"
```

### ë§¤ì¹­ ì‹œë®¬ë ˆì´ì…˜ í…ŒìŠ¤íŠ¸
```bash
# ëŒ€ëŸ‰ ë§¤ì¹­ í…ŒìŠ¤íŠ¸
curl -X POST http://localhost:8080/api/coordinator-matching/simulate \
  -H "Content-Type: application/json" \
  -d '{"healthAssessmentId":123,"coordinatorCount":100}'

# ì„±ëŠ¥ í…ŒìŠ¤íŠ¸  
./gradlew :test --tests "*MatchingPerformanceTest"
```

---

## ğŸ“‹ í™•ì¸ ì‚¬í•­

### Phase 4-A ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ì½”ë””ë„¤ì´í„° ìê¸° ì„¤ì • ì¼€ì–´ ë“±ê¸‰ ì‹œìŠ¤í…œ êµ¬í˜„
- [ ] ì „ë¬¸ì„± ë° ìê²©ì¦ ê¸°ë°˜ ë“±ê¸‰ ìë™ ì‚°ì¶œ
- [ ] ì‹¤ì‹œê°„ ê°€ìš©ì„± ê´€ë¦¬ ê¸°ëŠ¥
- [ ] ì„±ê³¼ ê¸°ë°˜ ì‹ ë¢°ë„ ì ìˆ˜ ê³„ì‚°
- [ ] API ì—”ë“œí¬ì¸íŠ¸ ì •ìƒ ë™ì‘ í™•ì¸

### Phase 4-B ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸  
- [ ] AI ê¸°ë°˜ ë‹¤ì¸µ ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
- [ ] ì¢…í•© ì ìˆ˜ ê³„ì‚° ë¡œì§ ì •í™•ì„± ê²€ì¦
- [ ] ì—…ë¬´ëŸ‰ ìµœì í™” ë¶„ë°° ê¸°ëŠ¥
- [ ] ë§¤ì¹­ ê²°ê³¼ ì„¤ëª… ìƒì„±
- [ ] React ë§¤ì¹­ ê²°ê³¼ UI ì™„ì„±

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

**Phase 5-A**: ì‹œì„¤ ë“±ê¸‰ ë° ë¶„ë¥˜ ì‹œìŠ¤í…œ
- FacilityProfile ì—”í‹°í‹°
- ì‹œì„¤ íƒ€ì…ë³„ ë¶„ë¥˜ (ì–‘ë¡œì‹œì„¤, ìš”ì–‘ë³‘ì› ë“±)  
- A-E ë“±ê¸‰ ì‹œìŠ¤í…œ
- ì¥ê¸°ìš”ì–‘ê¸°ê´€ í‰ê°€ API ì—°ë™

**ì¤‘ê°„ ì²´í¬í¬ì¸íŠ¸**: Phase 4 ì™„ë£Œ í›„ ì‹œì„¤ ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬ì¶•
</file>

<file path="docs/phases/phase-5.md">
# Phase 5: ì‹œì„¤ ê´€ë¦¬ ì‹œìŠ¤í…œ

## ğŸ¯ ê°œìš”
**ì†Œìš”ê¸°ê°„**: 5-6ì¼  
**ì˜ˆìƒ í† í°**: ~26,000 í† í°  
**ëª©í‘œ**: ì¥ê¸°ìš”ì–‘ê¸°ê´€ í‰ê°€ API ì—°ë™ + AI ê¸°ë°˜ ì‹œì„¤-í™˜ì ë§¤ì¹­ ì‹œìŠ¤í…œ

---

## ğŸ“Œ Phase 5-A: ì‹œì„¤ ë“±ê¸‰ ë° ë¶„ë¥˜

### êµ¬í˜„ ëŒ€ìƒ
- [ ] FacilityProfile ì—”í‹°í‹°
- [ ] ì‹œì„¤ íƒ€ì…ë³„ ë¶„ë¥˜ (ì–‘ë¡œì‹œì„¤, ìš”ì–‘ë³‘ì› ë“±)
- [ ] A-E ë“±ê¸‰ ì‹œìŠ¤í…œ (ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì› ê¸°ì¤€)
- [ ] ì „ë¬¸ íŠ¹í™” ì‹œì„¤ ê´€ë¦¬
- [ ] ì¥ê¸°ìš”ì–‘ê¸°ê´€ í‰ê°€ API ì—°ë™

### ì‹œì„¤ íƒ€ì…ë³„ ë¶„ë¥˜ ì‹œìŠ¤í…œ
```yaml
ì£¼ê±°ë³µì§€ì‹œì„¤:
  - ì–‘ë¡œì‹œì„¤: 65ì„¸ ì´ìƒ ë…¸ì¸ ê³µë™ìƒí™œ (ë“±ê¸‰ ë¶ˆí•„ìš”)
  - ë…¸ì¸ê³µë™ìƒí™œê°€ì •: ì†Œê·œëª¨ ê³µë™ì£¼íƒ (5-9ëª…)
  - ë…¸ì¸ë³µì§€ì£¼íƒ: ë…ë¦½ì£¼ê±° + ë³µì§€ì„œë¹„ìŠ¤

ì˜ë£Œë³µì§€ì‹œì„¤:
  - ë…¸ì¸ìš”ì–‘ì‹œì„¤: ì¥ê¸°ìš”ì–‘ 1-5ë“±ê¸‰ ëŒ€ìƒ (24ì‹œê°„ ì¼€ì–´)
  - ë…¸ì¸ìš”ì–‘ê³µë™ìƒí™œê°€ì •: ì†Œê·œëª¨ ìš”ì–‘ì‹œì„¤ (5-9ëª…)
  - ë‹¨ê¸°ë³´í˜¸ì‹œì„¤: ì„ì‹œë³´í˜¸ ì„œë¹„ìŠ¤ (ìµœëŒ€ 15ì¼)

ì˜ë£Œê¸°ê´€:
  - ìš”ì–‘ë³‘ì›: ì˜ë£Œì§„ ìƒì£¼, ì˜ë£Œì„œë¹„ìŠ¤ ì œê³µ
  - ë…¸ì¸ì „ë¬¸ë³‘ì›: ë…¸ì¸ íŠ¹í™” ì˜ë£Œì„œë¹„ìŠ¤
  - ë…¸ì¸ìš”ì–‘ë³‘ì›: ì¥ê¸°ì…ì› + ìš”ì–‘ì„œë¹„ìŠ¤

ì¬ê°€ë³µì§€ì‹œì„¤:
  - ë°©ë¬¸ìš”ì–‘ì„œë¹„ìŠ¤: ê°€ì • ë°©ë¬¸ ì¼€ì–´
  - ì£¼ì•¼ê°„ë³´í˜¸ì„œë¹„ìŠ¤: ë‚®/ë°¤ ì„ì‹œë³´í˜¸
  - ë‹¨ê¸°ë³´í˜¸ì„œë¹„ìŠ¤: ê°€ì¡± íœ´ì‹ ì§€ì›
```

### ì‹œì„¤ ë“±ê¸‰ ë¶„ë¥˜ (ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì› ê¸°ì¤€)
```yaml
Aë“±ê¸‰ (ìµœìš°ìˆ˜):
  - í‰ê°€ì ìˆ˜: 90ì  ì´ìƒ
  - íŠ¹ì§•: ìµœê³  ìˆ˜ì¤€ì˜ ì¼€ì–´ í’ˆì§ˆ, ì˜ë£Œì§„ ìš°ìˆ˜, ì‹œì„¤ í˜„ëŒ€í™”
  - ëŒ€ìƒ: 1-2ë“±ê¸‰ ì¤‘ì¦í™˜ì ì „ë¬¸ ì¼€ì–´

Bë“±ê¸‰ (ìš°ìˆ˜):
  - í‰ê°€ì ìˆ˜: 80-89ì   
  - íŠ¹ì§•: ì–‘ì§ˆì˜ ì¼€ì–´ ì„œë¹„ìŠ¤, ì•ˆì •ì  ìš´ì˜
  - ëŒ€ìƒ: 2-3ë“±ê¸‰ ì¤‘ë“±ë„ í™˜ì ì í•©

Cë“±ê¸‰ (ë³´í†µ):
  - í‰ê°€ì ìˆ˜: 70-79ì 
  - íŠ¹ì§•: ê¸°ë³¸ ì¼€ì–´ ì„œë¹„ìŠ¤ ì œê³µ, í‘œì¤€ì  ìš´ì˜
  - ëŒ€ìƒ: 3-5ë“±ê¸‰ ê²½ì¦í™˜ì ì í•©

Dë“±ê¸‰ (ê°œì„ í•„ìš”):
  - í‰ê°€ì ìˆ˜: 60-69ì 
  - íŠ¹ì§•: ì¼€ì–´ í’ˆì§ˆ ê°œì„  í•„ìš”, ìš´ì˜ìƒ ì´ìŠˆ
  - ì£¼ì˜: ë§¤ì¹­ ì‹œ ì‹ ì¤‘ ê²€í†  í•„ìš”

Eë“±ê¸‰ (ë¶€ì í•©):
  - í‰ê°€ì ìˆ˜: 60ì  ë¯¸ë§Œ
  - íŠ¹ì§•: ì‹¬ê°í•œ í’ˆì§ˆ ë¬¸ì œ, í–‰ì •ì²˜ë¶„ ì´ë ¥
  - ì œì™¸: ë§¤ì¹­ ëŒ€ìƒì—ì„œ ì œì™¸ ê¶Œì¥
```

### ì—”í‹°í‹° ì„¤ê³„
```java
@Entity
@Table(name = "facility_profiles")
public class FacilityProfile extends BaseEntity {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    // ê¸°ë³¸ ì •ë³´
    private String facilityName;
    private String facilityType;           // "ì–‘ë¡œì‹œì„¤", "ë…¸ì¸ìš”ì–‘ì‹œì„¤", "ìš”ì–‘ë³‘ì›" ë“±
    private String facilityGrade;          // "A", "B", "C", "D", "E"
    private Integer evaluationScore;       // ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì› ì ìˆ˜
    
    // ì¼€ì–´ ê°€ëŠ¥ ë“±ê¸‰
    @ElementCollection
    private Set<Integer> acceptableCareGrades;  // [1,2,3,4,5,6]
    
    // ì „ë¬¸ ë¶„ì•¼
    @ElementCollection
    private Set<String> specializations;       // ["dementia", "medical", "rehabilitation"]
    
    // ì‹œì„¤ ê·œëª¨ ë° ì •ì›
    private Integer totalCapacity;             // ì´ ì •ì›
    private Integer currentOccupancy;          // í˜„ì¬ ì…ì£¼ì ìˆ˜
    private Integer availableBeds;             // ê°€ìš© ì¹¨ëŒ€ ìˆ˜
    
    // ì˜ë£Œì§„ ì •ë³´
    private Boolean hasDoctor;                 // ì˜ì‚¬ ìƒì£¼ ì—¬ë¶€
    private Boolean hasNurse24h;               // 24ì‹œê°„ ê°„í˜¸ì‚¬ ìƒì£¼
    private Integer nurseCount;                // ê°„í˜¸ì‚¬ ìˆ˜
    private Integer caregiverCount;            // ìš”ì–‘ë³´í˜¸ì‚¬ ìˆ˜
    
    // ì‹œì„¤ íŠ¹ì§•
    private Boolean hasElevator;               // ì—˜ë¦¬ë² ì´í„° ë³´ìœ 
    private Boolean hasEmergencySystem;        // ì‘ê¸‰ì‹œìŠ¤í…œ êµ¬ë¹„
    private Boolean hasRehabilitationRoom;     // ì¬í™œì‹¤ ë³´ìœ 
    private Boolean hasDementiaProgram;        // ì¹˜ë§¤ í”„ë¡œê·¸ë¨ ìš´ì˜
    
    // ìœ„ì¹˜ ë° ì ‘ê·¼ì„±
    private String region;                     // ì§€ì—­ (ì‹œ/ë„)
    private String district;                   // êµ¬/êµ°
    private Double latitude;                   // ìœ„ë„
    private Double longitude;                  // ê²½ë„
    private Boolean nearSubway;                // ì§€í•˜ì²  ì ‘ê·¼ì„±
    private Boolean nearHospital;              // ë³‘ì› ê·¼ì ‘ì„±
    
    // ë¹„ìš© ì •ë³´
    private Integer monthlyBasicFee;           // ì›” ê¸°ë³¸ë£Œ
    private Integer admissionFee;              // ì…ì†Œê¸ˆ
    private Boolean acceptsLtci;               // ì¥ê¸°ìš”ì–‘ë³´í—˜ ì ìš©
    
    private LocalDateTime lastUpdated;
}
```

### ì¥ê¸°ìš”ì–‘ê¸°ê´€ í‰ê°€ API ì—°ë™
```java
@Component
public class LtciEvaluationApiClient {
    
    @Value("${ltci.evaluation.api.key}")
    private String apiKey;
    
    @Value("${ltci.evaluation.base.url}")  
    private String baseUrl;
    
    public List<FacilityEvaluationData> getFacilityEvaluations(String region) {
        try {
            String url = baseUrl + "/ltci-evaluations";
            
            HttpHeaders headers = new HttpHeaders();
            headers.set("Authorization", "Bearer " + apiKey);
            headers.setContentType(MediaType.APPLICATION_JSON);
            
            UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(url)
                    .queryParam("serviceKey", apiKey)
                    .queryParam("region", region)
                    .queryParam("numOfRows", 1000);
            
            ResponseEntity<LtciApiResponse> response = restTemplate.exchange(
                    builder.toUriString(), 
                    HttpMethod.GET, 
                    new HttpEntity<>(headers), 
                    LtciApiResponse.class
            );
            
            return response.getBody().getItems();
            
        } catch (Exception e) {
            log.error("ì¥ê¸°ìš”ì–‘ê¸°ê´€ í‰ê°€ API í˜¸ì¶œ ì‹¤íŒ¨: {}", e.getMessage(), e);
            return Collections.emptyList();
        }
    }
}
```

---

## ğŸ“Œ Phase 5-B: ì‹œì„¤ ë§¤ì¹­ ë° ì¶”ì²œ

### êµ¬í˜„ ëŒ€ìƒ  
- [ ] ì‹œì„¤-í™˜ì ë§¤ì¹­ ë¡œì§
- [ ] ì½”ë””ë„¤ì´í„° ì‹œì„¤ ì „ë¬¸ì„± ì—°ë™
- [ ] ê²¬í•™ ê³„íš ë° í‰ê°€ ì‹œìŠ¤í…œ
- [ ] ì¬ì™¸ë™í¬ ë§ì¶¤ ì‹œì„¤ ì¶”ì²œ
- [ ] ì‹ ë¢°ì„± ì ìˆ˜ ê¸°ë°˜ í•„í„°ë§

### ì¬ì™¸ë™í¬ ë§ì¶¤ ì‹œì„¤ ë§¤ì¹­
```java
@Service
public class OverseasKoreanFacilityMatchingService {
    
    public OverseasKoreanNursingFacilityResponse searchForOverseasKoreans(
        OverseasKoreanNursingSearchRequest request) {
        
        // 1. ê¸°ë³¸ ê²€ìƒ‰ (ì§€ì—­, ìœ í˜•ë³„)
        List<FacilityProfile> basicResults = facilityRepository
            .findByRegionAndFacilityType(request.getRegion(), request.getFacilityType());
        
        // 2. ì¬ì™¸ë™í¬ ì¹œí™”ì„± ì ìˆ˜ ê³„ì‚°
        List<EnhancedFacilityInfo> enhanced = basicResults.stream()
            .map(facility -> {
                // ê³µí•­ ì ‘ê·¼ì„±, ë‹¤êµ­ì–´ ì§€ì›, ì˜ë£Œì§„ ìˆ˜ì¤€ ë“± í‰ê°€
                int score = calculateOverseasFriendlyScore(facility, request);
                
                // ì‹ ë¢°ì„± ê²€ì¦ (ê°œíì—… ì •ë³´ API í™œìš©)
                FacilityReliabilityResponse reliability = validateFacilityReliability(facility.getId());
                
                return EnhancedFacilityInfo.builder()
                    .basicInfo(facility)
                    .overseasFriendlyScore(score)
                    .reliabilityInfo(reliability)
                    .build();
            })
            .filter(f -> f.getReliabilityInfo().getRiskLevel() != RiskLevel.HIGH)
            .sorted(Comparator.comparing(EnhancedFacilityInfo::getOverseasFriendlyScore).reversed())
            .collect(Collectors.toList());
        
        // 3. ìƒì„¸ ì •ë³´ ì¡°íšŒ (ìƒìœ„ 10ê°œ ì‹œì„¤)
        List<CompleteFacilityInfo> completeFacilities = enhanced.stream()
            .limit(10)
            .map(this::enrichWithDetailInfo)
            .collect(Collectors.toList());
        
        return OverseasKoreanNursingFacilityResponse.builder()
            .facilities(completeFacilities)
            .totalCount(enhanced.size())
            .searchCriteria(request)
            .build();
    }
}
```

### ì‹œì„¤ ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜
```java
@Service
public class FacilityMatchingService {
    
    public List<FacilityMatch> findCompatibleFacilities(HealthAssessment assessment, 
                                                       FacilityPreference preference) {
        
        CareGrade careGrade = assessment.getOverallCareGrade();
        
        return facilityRepository.findAll().stream()
            .filter(facility -> isBasicCompatible(facility, careGrade))
            .filter(facility -> hasAvailability(facility))
            .filter(facility -> meetsQualityStandard(facility))
            .map(facility -> calculateFacilityMatch(facility, assessment, preference))
            .sorted(Comparator.comparing(FacilityMatch::getMatchScore).reversed())
            .limit(20)
            .collect(Collectors.toList());
    }
    
    private FacilityMatch calculateFacilityMatch(FacilityProfile facility, 
                                               HealthAssessment assessment, 
                                               FacilityPreference preference) {
        double score = 0.0;
        
        // 1. ì‹œì„¤ ë“±ê¸‰ ì ìˆ˜ (30%)
        score += calculateFacilityGradeScore(facility) * 0.3;
        
        // 2. ì „ë¬¸ì„± ë§¤ì¹­ ì ìˆ˜ (25%)
        score += calculateSpecializationScore(facility, assessment) * 0.25;
        
        // 3. ì˜ë£Œì§„ ì í•©ì„± ì ìˆ˜ (20%)
        score += calculateMedicalStaffScore(facility, assessment) * 0.2;
        
        // 4. ìœ„ì¹˜ ì ‘ê·¼ì„± ì ìˆ˜ (15%)
        score += calculateLocationScore(facility, preference) * 0.15;
        
        // 5. ë¹„ìš© ì í•©ì„± ì ìˆ˜ (10%)
        score += calculateCostScore(facility, preference) * 0.1;
        
        String explanation = generateFacilityMatchExplanation(facility, assessment, score);
        
        return new FacilityMatch(facility, score, explanation);
    }
}
```

### ì½”ë””ë„¤ì´í„° ì‹œì„¤ ì „ë¬¸ì„± ì—°ë™
```java
@Entity
public class CoordinatorFacilityExpertise {
    @Id
    private Long id;
    private String coordinatorId;
    
    // ì‹œì„¤ íƒ€ì…ë³„ ì „ë¬¸ì„±
    @ElementCollection
    private Set<String> expertFacilityTypes;     // ["ë…¸ì¸ìš”ì–‘ì‹œì„¤", "ìš”ì–‘ë³‘ì›", "ì¹˜ë§¤ì „ë¬¸ì‹œì„¤"]
    
    // ì‹œì„¤ ë“±ê¸‰ë³„ ê²½í—˜
    @ElementCollection
    private Map<String, Integer> facilityGradeExperience; // {"A": 5, "B": 12, "C": 8}
    
    // ì§€ì—­ë³„ ì‹œì„¤ ë„¤íŠ¸ì›Œí¬
    @ElementCollection
    private Set<String> familiarRegions;         // ["ì„œìš¸ ê°•ë‚¨êµ¬", "ê²½ê¸° ì„±ë‚¨ì‹œ"]
    
    // í˜‘ë ¥ ì‹œì„¤ ëª©ë¡
    @ElementCollection
    private Set<Long> partnerFacilities;         // í˜‘ë ¥ ê´€ê³„ ì‹œì„¤ ID
}
```

---

## ğŸ¨ React ì‹œì„¤ ê²€ìƒ‰ UI

### ì‹œì„¤ ê²€ìƒ‰ ì»´í¬ë„ŒíŠ¸
```typescript
export const FacilitySearchPage: React.FC = () => {
  const [searchCriteria, setSearchCriteria] = useState<FacilitySearchCriteria>({
    region: '',
    facilityType: '',
    careGrade: '',
    budget: '',
    specializations: []
  });
  
  const [facilities, setFacilities] = useState<FacilityMatch[]>([]);
  const [loading, setLoading] = useState(false);

  const handleSearch = async () => {
    setLoading(true);
    try {
      const results = await facilityApi.searchFacilities(searchCriteria);
      setFacilities(results);
    } catch (error) {
      toast.error('ì‹œì„¤ ê²€ìƒ‰ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="facility-search-page">
      <div className="search-filters">
        <FacilitySearchFilters 
          criteria={searchCriteria}
          onChange={setSearchCriteria}
          onSearch={handleSearch}
        />
      </div>
      
      <div className="search-results">
        {loading ? (
          <FacilitySearchSkeleton />
        ) : (
          <FacilitySearchResults facilities={facilities} />
        )}
      </div>
    </div>
  );
};

const FacilityCard: React.FC<{facility: FacilityMatch}> = ({facility}) => {
  return (
    <div className="facility-card">
      <div className="facility-header">
        <h3>{facility.facilityName}</h3>
        <div className="facility-grade">
          <span className={`grade-badge grade-${facility.facilityGrade.toLowerCase()}`}>
            {facility.facilityGrade}ë“±ê¸‰
          </span>
          <span className="match-score">ë§¤ì¹­ë„: {facility.matchScore.toFixed(1)}/5.0</span>
        </div>
      </div>
      
      <div className="facility-info">
        <div className="location">
          <span className="icon">ğŸ“</span>
          <span>{facility.region} {facility.district}</span>
        </div>
        <div className="capacity">
          <span className="icon">ğŸ </span>
          <span>ì…ì£¼ ê°€ëŠ¥: {facility.availableBeds}ìë¦¬</span>
        </div>
        <div className="cost">
          <span className="icon">ğŸ’°</span>
          <span>ì›” ì´ìš©ë£Œ: {facility.monthlyBasicFee.toLocaleString()}ë§Œì›</span>
        </div>
      </div>
      
      <div className="facility-specializations">
        {facility.specializations.map(spec => (
          <span key={spec} className="specialization-badge">{spec}</span>
        ))}
      </div>
      
      <div className="facility-actions">
        <button 
          className="primary-button"
          onClick={() => viewFacilityDetail(facility.id)}
        >
          ìƒì„¸ ì •ë³´
        </button>
        <button 
          className="secondary-button"
          onClick={() => requestVisit(facility.id)}
        >
          ê²¬í•™ ì‹ ì²­
        </button>
      </div>
    </div>
  );
};
```

---

## ğŸ“Š ì‹œì„¤ í‰ê°€ ë° í†µê³„

### ì‹œì„¤ ì‹ ë¢°ì„± ì ìˆ˜ ê³„ì‚°
```java
private int calculateReliabilityScore(FacilityProfile facility) {
    int score = 50; // ê¸°ë³¸ ì ìˆ˜
    
    // ìš´ì˜ ìƒíƒœë³„ ì ìˆ˜
    switch (facility.getBusinessStatus()) {
        case "ì •ìƒ", "ìš´ì˜ì¤‘": score += 40; break;
        case "íœ´ì—…": score += 10; break;
        case "íì—…", "ë§ì†Œ": score = 0; break;
    }
    
    // ìš´ì˜ ê¸°ê°„ë³„ ì¶”ê°€ ì ìˆ˜ (ì‹ ë¢°ì„± ì§€í‘œ)
    if (facility.getOpeningDate() != null) {
        long years = ChronoUnit.YEARS.between(facility.getOpeningDate(), LocalDate.now());
        score += Math.min(years * 2, 10);
    }
    
    // í‰ê°€ ë“±ê¸‰ë³„ ì¶”ê°€ ì ìˆ˜
    switch (facility.getFacilityGrade()) {
        case "A": score += 10; break;
        case "B": score += 5; break;
        case "C": score += 0; break;
        case "D": score -= 5; break;
        case "E": score -= 15; break;
    }
    
    return Math.min(score, 100);
}
```

### API ì—”ë“œí¬ì¸íŠ¸
```
GET  /api/facilities/search                     - ì‹œì„¤ ê²€ìƒ‰
GET  /api/facilities/{id}                       - ì‹œì„¤ ìƒì„¸ ì¡°íšŒ
POST /api/facilities/{id}/visit-request         - ê²¬í•™ ì‹ ì²­
GET  /api/facilities/overseas-friendly          - ì¬ì™¸ë™í¬ ì¹œí™” ì‹œì„¤
GET  /api/facilities/statistics                 - ì‹œì„¤ í†µê³„ (ê´€ë¦¬ì)
POST /api/facilities/batch-update               - í‰ê°€ ë°ì´í„° ì¼ê´„ ì—…ë°ì´íŠ¸
```

---

## ğŸ›  ê°œë°œ ë„êµ¬

### í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´
```bash
# ì‹œì„¤ ë§¤ì¹­ í…ŒìŠ¤íŠ¸
./gradlew :test --tests "*FacilityMatchingServiceTest"

# API ì—°ë™ í…ŒìŠ¤íŠ¸  
./gradlew :test --tests "*LtciEvaluationApiClientTest"

# ì‹ ë¢°ì„± ì ìˆ˜ í…ŒìŠ¤íŠ¸
./gradlew :test --tests "*FacilityReliabilityTest"
```

### API ë°ì´í„° ë™ê¸°í™”
```bash
# ì¥ê¸°ìš”ì–‘ê¸°ê´€ í‰ê°€ ë°ì´í„° ë™ê¸°í™”
curl -X POST http://localhost:8080/api/facilities/sync-evaluation-data \
  -H "Authorization: Bearer {admin-token}"

# ê°œíì—… ì •ë³´ í™•ì¸
curl -X POST http://localhost:8080/api/facilities/validate-business-status
```

---

## ğŸ“‹ í™•ì¸ ì‚¬í•­

### Phase 5-A ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ì‹œì„¤ íƒ€ì…ë³„ ë¶„ë¥˜ ì‹œìŠ¤í…œ êµ¬í˜„
- [ ] A-E ë“±ê¸‰ ì‹œìŠ¤í…œ ì ìš©
- [ ] ì¥ê¸°ìš”ì–‘ê¸°ê´€ í‰ê°€ API ì—°ë™ ì„±ê³µ
- [ ] ì „ë¬¸ íŠ¹í™” ì‹œì„¤ ê´€ë¦¬ ê¸°ëŠ¥
- [ ] ì‹ ë¢°ì„± ì ìˆ˜ ê³„ì‚° ë¡œì§ ê²€ì¦

### Phase 5-B ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸  
- [ ] ì‹œì„¤-í™˜ì ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
- [ ] ì¬ì™¸ë™í¬ ë§ì¶¤ ì‹œì„¤ ì¶”ì²œ ê¸°ëŠ¥
- [ ] React ì‹œì„¤ ê²€ìƒ‰ UI ì™„ì„±
- [ ] ê²¬í•™ ì‹ ì²­ ë° í‰ê°€ ì‹œìŠ¤í…œ
- [ ] ì½”ë””ë„¤ì´í„° ì‹œì„¤ ì „ë¬¸ì„± ì—°ë™

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

**Phase 6-A**: ê³µê³µë°ì´í„° API í†µí•© ì—°ë™
- êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨ ì¥ê¸°ìš”ì–‘ê¸°ê´€ API
- ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì› ë³‘ì›ì •ë³´ API
- ì™¸êµë¶€ ì¬ì™¸êµ­ë¯¼ ì„œë¹„ìŠ¤ API
- API í´ë¼ì´ì–¸íŠ¸ í†µí•© êµ¬ì„±

**ì¤‘ê°„ ì²´í¬í¬ì¸íŠ¸**: Phase 5 ì™„ë£Œ í›„ ê³µê³µë°ì´í„° ì—°ë™ ì‹œìŠ¤í…œ êµ¬ì¶•
</file>

<file path="docs/phases/phase-6.md">
# Phase 6: ê³µê³µë°ì´í„° API ì—°ë™

## ğŸ¯ ê°œìš”
**ì†Œìš”ê¸°ê°„**: 6-7ì¼  
**ì˜ˆìƒ í† í°**: ~18,000 í† í°  
**ëª©í‘œ**: ì •ë¶€ ê³µê³µë°ì´í„° API í†µí•© ì—°ë™ + ì™¸êµë¶€ ì¬ì™¸ë™í¬ ì„œë¹„ìŠ¤ ì—°ê³„

---

## ğŸ“Œ Phase 6-A: ê¸°ë³¸ API ì—°ë™

### êµ¬í˜„ ëŒ€ìƒ
- [ ] êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨ ì¥ê¸°ìš”ì–‘ê¸°ê´€ API
- [ ] ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì› ë³‘ì›ì •ë³´ API  
- [ ] êµ­ë¦½ì¤‘ì•™ì˜ë£Œì› ì „êµ­ ì•½êµ­ ì •ë³´ API
- [ ] ìš”ì–‘ê¸°ê´€ê°œíì—…ì •ë³´ì¡°íšŒ API
- [ ] API í´ë¼ì´ì–¸íŠ¸ í†µí•© êµ¬ì„±

### ë°œê¸‰ë°›ì€ ì¸ì¦í‚¤ ëª©ë¡
```yaml
ê³µí†µ ì¸ì¦í‚¤: CCXHQiSSQ0J+RRaadSjmmS7ltxG/tlSVOYMjh45MmGne68ptgGAaAJVJti8nBazSjLemTAyb5gAuj43xq7fTog==
í™œìš©ê¸°ê°„: 2025-07-16 ~ 2027-07-18

ì—°ë™ API ëª©ë¡:
1. êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨_ì¥ê¸°ìš”ì–‘ê¸°ê´€ ê²€ìƒ‰ ì„œë¹„ìŠ¤
   - URL: https://apis.data.go.kr/B550928/searchLtcInsttService01
   - ê¸°ëŠ¥: ë§ì¶¤í˜• ìš”ì–‘ì› ì¶”ì²œ (ì§€ì—­/ì˜ˆì‚°/íŠ¹ì„±ë³„)

2. êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨_ì¥ê¸°ìš”ì–‘ê¸°ê´€ ì‹œì„¤ë³„ ìƒì„¸ì¡°íšŒ ì„œë¹„ìŠ¤  
   - URL: https://apis.data.go.kr/B550928/getLtcInsttDetailInfoService02
   - ê¸°ëŠ¥: ì‹œì„¤ ê·œëª¨, ì„œë¹„ìŠ¤, ìš”ê¸ˆ ìƒì„¸ ì¡°íšŒ

3. ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì›_ë³‘ì›ì •ë³´ì„œë¹„ìŠ¤
   - URL: https://apis.data.go.kr/B551182/hospInfoServicev2
   - ê¸°ëŠ¥: ê±´ê°•ê²€ì§„ ë³‘ì› ì¶”ì²œ, ì‘ê¸‰ ì˜ë£Œì§„ ì—°ê²°

4. êµ­ë¦½ì¤‘ì•™ì˜ë£Œì›_ì „êµ­ ì•½êµ­ ì •ë³´ ì¡°íšŒ ì„œë¹„ìŠ¤
   - URL: https://apis.data.go.kr/B552657/ErmctInsttInfoInqireService
   - ê¸°ëŠ¥: ì²˜ë°©ì „ ì²˜ë¦¬ ê°€ëŠ¥ ì•½êµ­ ì•ˆë‚´

5. ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì›_ìš”ì–‘ê¸°ê´€ê°œíì—…ì •ë³´ì¡°íšŒì„œë¹„ìŠ¤
   - URL: https://apis.data.go.kr/B551182/yadmOpCloInfoService2
   - ê¸°ëŠ¥: ìš”ì–‘ê¸°ê´€ ìš´ì˜ ìƒíƒœ ì‹¤ì‹œê°„ í™•ì¸
```

### í†µí•© API í´ë¼ì´ì–¸íŠ¸ êµ¬ì¡°
```java
@Component
public class PublicDataApiClient {
    
    @Value("${public.data.api.key}")
    private String apiKey;
    
    private final RestTemplate restTemplate;
    
    // ì¥ê¸°ìš”ì–‘ê¸°ê´€ ê²€ìƒ‰
    public List<LtcInstitution> searchLtcInstitutions(LtcSearchRequest request) {
        String url = "https://apis.data.go.kr/B550928/searchLtcInsttService01";
        
        UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(url)
                .queryParam("serviceKey", apiKey)
                .queryParam("sidoName", request.getSidoName())
                .queryParam("sigunguName", request.getSigunguName())
                .queryParam("facilityType", request.getFacilityType())
                .queryParam("numOfRows", 1000)
                .queryParam("pageNo", 1)
                .queryParam("resultType", "json");
        
        try {
            ResponseEntity<LtcApiResponse> response = restTemplate.exchange(
                    builder.toUriString(), 
                    HttpMethod.GET, 
                    null, 
                    LtcApiResponse.class
            );
            
            return response.getBody().getBody().getItems();
            
        } catch (Exception e) {
            log.error("ì¥ê¸°ìš”ì–‘ê¸°ê´€ ê²€ìƒ‰ API í˜¸ì¶œ ì‹¤íŒ¨: {}", e.getMessage(), e);
            return Collections.emptyList();
        }
    }
    
    // ì¥ê¸°ìš”ì–‘ê¸°ê´€ ìƒì„¸ ì¡°íšŒ
    public LtcInstitutionDetail getLtcInstitutionDetail(String institutionCode) {
        String url = "https://apis.data.go.kr/B550928/getLtcInsttDetailInfoService02";
        
        UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(url)
                .queryParam("serviceKey", apiKey)
                .queryParam("instCd", institutionCode)
                .queryParam("resultType", "json");
        
        try {
            ResponseEntity<LtcDetailApiResponse> response = restTemplate.exchange(
                    builder.toUriString(), 
                    HttpMethod.GET, 
                    null, 
                    LtcDetailApiResponse.class
            );
            
            return response.getBody().getBody().getItems().get(0);
            
        } catch (Exception e) {
            log.error("ì¥ê¸°ìš”ì–‘ê¸°ê´€ ìƒì„¸ ì¡°íšŒ API í˜¸ì¶œ ì‹¤íŒ¨: {}", e.getMessage(), e);
            return null;
        }
    }
    
    // ë³‘ì› ì •ë³´ ì¡°íšŒ
    public List<HospitalInfo> searchHospitals(HospitalSearchRequest request) {
        String url = "https://apis.data.go.kr/B551182/hospInfoServicev2/getHospBasisList";
        
        UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(url)
                .queryParam("serviceKey", apiKey)
                .queryParam("sidoCd", request.getSidoCode())
                .queryParam("sgguCd", request.getSigunguCode())
                .queryParam("numOfRows", 100)
                .queryParam("pageNo", 1)
                .queryParam("_type", "json");
        
        try {
            ResponseEntity<HospitalApiResponse> response = restTemplate.exchange(
                    builder.toUriString(), 
                    HttpMethod.GET, 
                    null, 
                    HospitalApiResponse.class
            );
            
            return response.getBody().getBody().getItems();
            
        } catch (Exception e) {
            log.error("ë³‘ì› ì •ë³´ API í˜¸ì¶œ ì‹¤íŒ¨: {}", e.getMessage(), e);
            return Collections.emptyList();
        }
    }
}
```

### API ì‘ë‹µ ë°ì´í„° ëª¨ë¸
```java
@Data
public class LtcInstitution {
    private String instCd;              // ê¸°ê´€ì½”ë“œ
    private String instNm;              // ê¸°ê´€ëª…
    private String sidoNm;              // ì‹œë„ëª…
    private String sigunguNm;           // ì‹œêµ°êµ¬ëª…
    private String roadAddr;            // ë„ë¡œëª…ì£¼ì†Œ
    private String lotnoAddr;           // ì§€ë²ˆì£¼ì†Œ
    private String instDiv;             // ê¸°ê´€êµ¬ë¶„
    private String instType;            // ê¸°ê´€ìœ í˜•
    private String telno;               // ì „í™”ë²ˆí˜¸
    private String faxno;               // íŒ©ìŠ¤ë²ˆí˜¸
    private String totCapcty;           // ì •ì›
    private String curCapcty;           // í˜„ì›
    private String latitude;            // ìœ„ë„
    private String longitude;           // ê²½ë„
}

@Data
public class LtcInstitutionDetail {
    private String instCd;              // ê¸°ê´€ì½”ë“œ
    private String instNm;              // ê¸°ê´€ëª…
    private String estbDt;              // ì„¤ë¦½ì¼
    private String adminNm;             // ê´€ë¦¬ìëª…
    private String adminTelno;          // ê´€ë¦¬ìì „í™”ë²ˆí˜¸
    private String medicalStaffCnt;     // ì˜ë£Œì§„ìˆ˜
    private String nurseStaffCnt;       // ê°„í˜¸ì¸ë ¥ìˆ˜
    private String careStaffCnt;        // ìš”ì–‘ë³´í˜¸ì‚¬ìˆ˜
    private String socialWorkerCnt;     // ì‚¬íšŒë³µì§€ì‚¬ìˆ˜
    private String facilityGrade;       // í‰ê°€ë“±ê¸‰
    private String evaluationDate;      // í‰ê°€ì¼ì
    private String monthlyFee;          // ì›”ì´ìš©ë£Œ
    private String admissionFee;        // ì…ì†Œë£Œ
}
```

---

## ğŸ“Œ Phase 6-B: ì™¸êµë¶€ API ì—°ë™

### êµ¬í˜„ ëŒ€ìƒ
- [ ] ì¬ì™¸êµ­ë¯¼ í˜„í™© API
- [ ] ì˜ì‚¬ê´€/ì´ì˜ì‚¬ê´€ ì •ë³´ API  
- [ ] ì¬ì™¸ë™í¬ ì§€ì› ì •ì±… API
- [ ] êµ­ê°€ë³„ ì˜ë£Œ ì •ë³´ API
- [ ] ë‹¤êµ­ì–´ ë°ì´í„° ì²˜ë¦¬

### ì™¸êµë¶€ API ì—°ë™
```java
@Component
public class MofaApiClient {
    
    @Value("${mofa.api.key}")
    private String apiKey;
    
    @Value("${mofa.api.base.url}")
    private String baseUrl;
    
    // êµ­ê°€ë³„ ì…êµ­ ìš”ê±´ ì¡°íšŒ
    public KoreaEntryRequirementResponse getKoreaEntryRequirements(String overseasCountry) {
        String url = baseUrl + "/EntranceVisaService2/getEntryVisaList";
        
        UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(url)
                .queryParam("serviceKey", apiKey)
                .queryParam("cond[country_nm::]", overseasCountry)
                .queryParam("numOfRows", 10)
                .queryParam("pageNo", 1)
                .queryParam("type", "json");
        
        try {
            ResponseEntity<MofaApiResponse> response = restTemplate.exchange(
                    builder.toUriString(), 
                    HttpMethod.GET, 
                    null, 
                    MofaApiResponse.class
            );
            
            return processEntryRequirements(response.getBody());
            
        } catch (Exception e) {
            log.error("ì™¸êµë¶€ ì…êµ­ìš”ê±´ API í˜¸ì¶œ ì‹¤íŒ¨: {}", e.getMessage(), e);
            return null;
        }
    }
    
    // ì¬ì™¸ë™í¬ ì§€ì› ì„œë¹„ìŠ¤ ì¡°íšŒ
    public List<OverseasKoreanSupport> getOverseasKoreanSupports(String country) {
        // ì¬ì™¸ë™í¬ ëŒ€ìƒ ì§€ì› ì •ì±… ë° ì„œë¹„ìŠ¤ ì¡°íšŒ
        // ì˜ë£Œ, ë³µì§€, êµìœ¡ ë“± ì¹´í…Œê³ ë¦¬ë³„ ì§€ì› ë‚´ìš©
    }
    
    // ì˜ì‚¬ê´€ ì •ë³´ ì¡°íšŒ  
    public List<ConsulateInfo> getConsulatesByCountry(String country) {
        // í•´ë‹¹ êµ­ê°€ ë‚´ í•œêµ­ ì˜ì‚¬ê´€/ì´ì˜ì‚¬ê´€ ì •ë³´
        // ì—°ë½ì²˜, ì£¼ì†Œ, ì—…ë¬´ì‹œê°„, ì œê³µ ì„œë¹„ìŠ¤
    }
}
```

### ì¬ì™¸ë™í¬ ì„œë¹„ìŠ¤ í†µí•©
```java
@Service
public class OverseasKoreanService {
    
    private final MofaApiClient mofaApiClient;
    private final PublicDataApiClient publicDataApiClient;
    
    public OverseasKoreanServicePackage createServicePackage(OverseasProfile profile) {
        String country = profile.getResidenceCountry();
        String city = profile.getResidenceCity();
        
        // 1. ì…êµ­ ìš”ê±´ ì¡°íšŒ
        KoreaEntryRequirementResponse entryReq = mofaApiClient.getKoreaEntryRequirements(country);
        
        // 2. í˜„ì§€ ì˜ì‚¬ê´€ ì •ë³´
        List<ConsulateInfo> consulates = mofaApiClient.getConsulatesByCountry(country);
        
        // 3. ì¬ì™¸ë™í¬ ì§€ì› ì„œë¹„ìŠ¤
        List<OverseasKoreanSupport> supports = mofaApiClient.getOverseasKoreanSupports(country);
        
        // 4. í•œêµ­ ë‚´ ì˜ë£Œ ë„¤íŠ¸ì›Œí¬  
        List<HospitalInfo> koreanHospitals = publicDataApiClient.searchHospitals(
            HospitalSearchRequest.forOverseasKoreans(profile.getPreferredRegionInKorea())
        );
        
        return OverseasKoreanServicePackage.builder()
                .profile(profile)
                .entryRequirements(entryReq)
                .nearbyConsulates(consulates)
                .supportServices(supports)
                .koreanMedicalNetwork(koreanHospitals)
                .build();
    }
}
```

---

## ğŸ”„ ë°ì´í„° ë™ê¸°í™” ì‹œìŠ¤í…œ

### ë°°ì¹˜ ì‘ì—… ìŠ¤ì¼€ì¤„ëŸ¬
```java
@Component
public class PublicDataSyncScheduler {
    
    @Scheduled(cron = "0 0 2 * * ?") // ë§¤ì¼ ìƒˆë²½ 2ì‹œ
    public void syncLtcInstitutionData() {
        log.info("ì¥ê¸°ìš”ì–‘ê¸°ê´€ ë°ì´í„° ë™ê¸°í™” ì‹œì‘");
        
        try {
            // ì „êµ­ ì‹œë„ë³„ ë°ì´í„° ìˆ˜ì§‘
            List<String> sidoList = Arrays.asList(
                "ì„œìš¸íŠ¹ë³„ì‹œ", "ë¶€ì‚°ê´‘ì—­ì‹œ", "ëŒ€êµ¬ê´‘ì—­ì‹œ", "ì¸ì²œê´‘ì—­ì‹œ",
                "ê´‘ì£¼ê´‘ì—­ì‹œ", "ëŒ€ì „ê´‘ì—­ì‹œ", "ìš¸ì‚°ê´‘ì—­ì‹œ", "ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ",
                "ê²½ê¸°ë„", "ê°•ì›íŠ¹ë³„ìì¹˜ë„", "ì¶©ì²­ë¶ë„", "ì¶©ì²­ë‚¨ë„",
                "ì „ë¶íŠ¹ë³„ìì¹˜ë„", "ì „ë¼ë‚¨ë„", "ê²½ìƒë¶ë„", "ê²½ìƒë‚¨ë„", "ì œì£¼íŠ¹ë³„ìì¹˜ë„"
            );
            
            int totalSynced = 0;
            for (String sido : sidoList) {
                List<LtcInstitution> institutions = publicDataApiClient.searchLtcInstitutions(
                    LtcSearchRequest.builder().sidoName(sido).build()
                );
                
                for (LtcInstitution inst : institutions) {
                    syncSingleInstitution(inst);
                    totalSynced++;
                }
                
                // API í˜¸ì¶œ ì œí•œ ê³ ë ¤ (1ì´ˆ ëŒ€ê¸°)
                Thread.sleep(1000);
            }
            
            log.info("ì¥ê¸°ìš”ì–‘ê¸°ê´€ ë°ì´í„° ë™ê¸°í™” ì™„ë£Œ: {}ê°œ ê¸°ê´€", totalSynced);
            
        } catch (Exception e) {
            log.error("ë°ì´í„° ë™ê¸°í™” ì‹¤íŒ¨: {}", e.getMessage(), e);
        }
    }
    
    @Scheduled(cron = "0 0 6 * * MON") // ë§¤ì£¼ ì›”ìš”ì¼ ìƒˆë²½ 6ì‹œ
    public void syncHospitalData() {
        // ë³‘ì› ì •ë³´ ì£¼ê°„ ë™ê¸°í™”
    }
    
    @Scheduled(cron = "0 0 4 1 * ?") // ë§¤ì›” 1ì¼ ìƒˆë²½ 4ì‹œ
    public void syncOverseasKoreanData() {
        // ì¬ì™¸ë™í¬ ì§€ì› ì •ì±… ì›”ê°„ ë™ê¸°í™”
    }
}
```

### ë°ì´í„° ê²€ì¦ ë° í’ˆì§ˆ ê´€ë¦¬
```java
@Service
public class PublicDataValidationService {
    
    public DataQualityReport validateLtcInstitutionData() {
        List<FacilityProfile> allFacilities = facilityRepository.findAll();
        
        DataQualityReport report = DataQualityReport.builder()
            .totalRecords(allFacilities.size())
            .build();
        
        for (FacilityProfile facility : allFacilities) {
            // 1. í•„ìˆ˜ í•„ë“œ ê²€ì¦
            if (!StringUtils.hasText(facility.getFacilityName())) {
                report.addError("ì‹œì„¤ëª… ëˆ„ë½: " + facility.getId());
            }
            
            // 2. ì¢Œí‘œ ìœ íš¨ì„± ê²€ì¦
            if (facility.getLatitude() == null || facility.getLongitude() == null) {
                report.addWarning("ì¢Œí‘œ ì •ë³´ ëˆ„ë½: " + facility.getFacilityName());
            }
            
            // 3. ì—°ë½ì²˜ í˜•ì‹ ê²€ì¦
            if (facility.getTelno() != null && !isValidPhoneNumber(facility.getTelno())) {
                report.addError("ì˜ëª»ëœ ì „í™”ë²ˆí˜¸: " + facility.getFacilityName());
            }
            
            // 4. ì¤‘ë³µ ë°ì´í„° ê²€ì¦
            List<FacilityProfile> duplicates = facilityRepository
                .findByFacilityNameAndRoadAddr(facility.getFacilityName(), facility.getRoadAddr());
            if (duplicates.size() > 1) {
                report.addWarning("ì¤‘ë³µ ì‹œì„¤: " + facility.getFacilityName());
            }
        }
        
        return report;
    }
}
```

---

## ğŸ“Š API í†µê³„ ë° ëª¨ë‹ˆí„°ë§

### API í˜¸ì¶œ í†µê³„ ìˆ˜ì§‘
```java
@Component
public class ApiUsageMonitor {
    
    private final MeterRegistry meterRegistry;
    
    public void recordApiCall(String apiName, boolean success, long responseTime) {
        // Micrometerë¥¼ í†µí•œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
        Timer.Sample sample = Timer.start(meterRegistry);
        sample.stop(Timer.builder("public_data_api_calls")
                .tag("api", apiName)
                .tag("success", String.valueOf(success))
                .register(meterRegistry));
        
        // ì„±ê³µ/ì‹¤íŒ¨ ì¹´ìš´í„°
        Counter.builder("public_data_api_calls_total")
                .tag("api", apiName)
                .tag("result", success ? "success" : "failure")
                .register(meterRegistry)
                .increment();
    }
    
    public ApiUsageStatistics getUsageStatistics() {
        return ApiUsageStatistics.builder()
                .ltcApiCalls(getLtcApiCallCount())
                .hospitalApiCalls(getHospitalApiCallCount())
                .mofaApiCalls(getMofaApiCallCount())
                .totalApiCalls(getTotalApiCallCount())
                .successRate(calculateSuccessRate())
                .averageResponseTime(getAverageResponseTime())
                .build();
    }
}
```

### API ì—”ë“œí¬ì¸íŠ¸
```
GET  /api/public-data/ltc-institutions/search        - ì¥ê¸°ìš”ì–‘ê¸°ê´€ ê²€ìƒ‰
GET  /api/public-data/ltc-institutions/{code}        - ì¥ê¸°ìš”ì–‘ê¸°ê´€ ìƒì„¸
GET  /api/public-data/hospitals/search               - ë³‘ì› ê²€ìƒ‰
GET  /api/public-data/pharmacies/search              - ì•½êµ­ ê²€ìƒ‰
POST /api/public-data/sync/ltc-institutions          - ì¥ê¸°ìš”ì–‘ê¸°ê´€ ë°ì´í„° ë™ê¸°í™”
GET  /api/overseas-korean/entry-requirements/{country} - ì…êµ­ ìš”ê±´ ì¡°íšŒ
GET  /api/overseas-korean/consulates/{country}       - ì˜ì‚¬ê´€ ì •ë³´
GET  /api/admin/api-usage/statistics                 - API ì‚¬ìš© í†µê³„ (ê´€ë¦¬ì)
```

---

## ğŸ›  ê°œë°œ ë„êµ¬

### í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´
```bash
# API í´ë¼ì´ì–¸íŠ¸ í…ŒìŠ¤íŠ¸
./gradlew :test --tests "*PublicDataApiClientTest"

# ë°ì´í„° ë™ê¸°í™” í…ŒìŠ¤íŠ¸  
./gradlew :test --tests "*PublicDataSyncTest"

# ì™¸êµë¶€ API ì—°ë™ í…ŒìŠ¤íŠ¸
./gradlew :test --tests "*MofaApiClientTest"
```

### API í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
```bash
# ì¥ê¸°ìš”ì–‘ê¸°ê´€ ê²€ìƒ‰ í…ŒìŠ¤íŠ¸
curl -X GET "http://localhost:8080/api/public-data/ltc-institutions/search?sidoName=ì„œìš¸íŠ¹ë³„ì‹œ&sigunguName=ê°•ë‚¨êµ¬" \
  -H "Authorization: Bearer {token}"

# ì™¸êµë¶€ API í…ŒìŠ¤íŠ¸  
curl -X GET "http://localhost:8080/api/overseas-korean/entry-requirements/ë¯¸êµ­" \
  -H "Authorization: Bearer {token}"

# ë°ì´í„° ë™ê¸°í™” ì‹¤í–‰
curl -X POST "http://localhost:8080/api/public-data/sync/ltc-institutions" \
  -H "Authorization: Bearer {admin-token}"
```

---

## ğŸ“‹ í™•ì¸ ì‚¬í•­

### Phase 6-A ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ì¥ê¸°ìš”ì–‘ê¸°ê´€ ê²€ìƒ‰/ìƒì„¸ API ì—°ë™ ì„±ê³µ
- [ ] ë³‘ì›ì •ë³´ ë° ì•½êµ­ì •ë³´ API ì—°ë™ ì„±ê³µ
- [ ] ìš”ì–‘ê¸°ê´€ ê°œíì—… ì •ë³´ ì‹¤ì‹œê°„ ì—°ë™
- [ ] API í˜¸ì¶œ í†µê³„ ë° ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ
- [ ] ë°ì´í„° ê²€ì¦ ë° í’ˆì§ˆ ê´€ë¦¬ ì²´ê³„

### Phase 6-B ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸  
- [ ] ì™¸êµë¶€ ì…êµ­ìš”ê±´ API ì—°ë™ ì„±ê³µ
- [ ] ì¬ì™¸ë™í¬ ì§€ì› ì„œë¹„ìŠ¤ ì •ë³´ ì—°ë™
- [ ] ì˜ì‚¬ê´€ ì •ë³´ ìë™ ë§¤ì¹­ ê¸°ëŠ¥
- [ ] ë‹¤êµ­ì–´ ë°ì´í„° ì²˜ë¦¬ ì‹œìŠ¤í…œ
- [ ] ë°°ì¹˜ ì‘ì—… ìŠ¤ì¼€ì¤„ëŸ¬ ì •ìƒ ë™ì‘

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

**Phase 7-A**: ì±—ë´‡ ì—°ë™ ì¸í„°í˜ì´ìŠ¤
- ì±—ë´‡ í˜¸í™˜ì„± API ì—”ë“œí¬ì¸íŠ¸
- ì„¸ì…˜ ê´€ë¦¬ ì‹œìŠ¤í…œ
- í”„ë¡œì„¸ìŠ¤ ì¶”ì  ì—°ë™

**ì¤‘ê°„ ì²´í¬í¬ì¸íŠ¸**: Phase 6 ì™„ë£Œ í›„ ì±—ë´‡ ì‹œìŠ¤í…œ ì—°ë™ ì¤€ë¹„
</file>

<file path="docs/DEVELOPMENT_PLAN.md">
# LightCare ê°œë°œ ê³„íšì„œ (í† í° ì œí•œ ê³ ë ¤)

## ğŸ“‹ ê°œìš”

ì´ ë¬¸ì„œëŠ” LightCare í”„ë¡œì íŠ¸ë¥¼ í† í° ì œí•œì„ ê³ ë ¤í•˜ì—¬ ì²´ê³„ì ìœ¼ë¡œ ê°œë°œí•˜ê¸° ìœ„í•œ ë‹¨ê³„ë³„ ê³„íšì„œì…ë‹ˆë‹¤.

**í”„ë¡œì íŠ¸ íŠ¹ì„±:**
- **ê°œë°œíŒ€**: 4ëª… (AI ì˜ì¡´ë„ 100%)
- **ê¸°ìˆ ìŠ¤íƒ**: JDK 21 + Spring Boot 3.3.5 + React 18
- **ê°œë°œê¸°ê°„**: 2ì£¼ ì™„ì„± ëª©í‘œ
- **ì˜ˆì‚°**: ìë³¸ê¸ˆ 0ì› (ë¬´ë£Œ ì„œë¹„ìŠ¤ í™œìš©)

---

## ğŸ¯ Phase 1: í•µì‹¬ ì¸í”„ë¼ êµ¬ì¶• (1-2ì¼)

### ğŸ“Œ Phase 1-A: í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •
**ì˜ˆìƒ í† í°**: ~8,000 í† í°  
**ì†Œìš”ì‹œê°„**: ë°˜ë‚˜ì ˆ

#### êµ¬í˜„ ëŒ€ìƒ
- [ ] Gradle ë©€í‹°ëª¨ë“ˆ í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„±
- [ ] Spring Boot 3.3.5 ê¸°ë³¸ ì„¤ì •
- [ ] SQLite ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
- [ ] ê¸°ë³¸ íŒ¨í‚¤ì§€ êµ¬ì¡° ìƒì„±

#### í•µì‹¬ íŒŒì¼
```
build.gradle.kts
settings.gradle.kts
src/main/resources/application.yml
src/main/java/com/example/carelink/CareLinkApplication.java
```

#### AI í”„ë¡¬í”„íŠ¸ ì˜ˆì‹œ
```
"JDK 21 + Spring Boot 3.3.5 ê¸°ë°˜ ë©€í‹°ëª¨ë“ˆ Gradle í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”. 
ëª¨ë“ˆ êµ¬ì„±: api-module, member-module, facility-module
SQLite ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • í¬í•¨"
```

---

### ğŸ“Œ Phase 1-B: ê¸°ë³¸ ë³´ì•ˆ ì„¤ì •
**ì˜ˆìƒ í† í°**: ~6,000 í† í°  
**ì†Œìš”ì‹œê°„**: ë°˜ë‚˜ì ˆ

#### êµ¬í˜„ ëŒ€ìƒ
- [ ] Spring Security 6.x ì„¤ì •
- [ ] JWT í† í° ê¸°ë°˜ ì¸ì¦
- [ ] CORS ì„¤ì •
- [ ] ê¸°ë³¸ ì˜ˆì™¸ ì²˜ë¦¬

#### í•µì‹¬ íŒŒì¼
```
SecurityConfig.java
JwtTokenProvider.java
GlobalExceptionHandler.java
```

---

## ğŸ¯ Phase 2: íšŒì› ê´€ë¦¬ ì‹œìŠ¤í…œ (2-3ì¼)

### ğŸ“Œ Phase 2-A: ê¸°ë³¸ íšŒì› ê¸°ëŠ¥
**ì˜ˆìƒ í† í°**: ~10,000 í† í°  
**ì†Œìš”ì‹œê°„**: 1ì¼

#### êµ¬í˜„ ëŒ€ìƒ
- [ ] Member ì—”í‹°í‹° (5ê°€ì§€ ì—­í•  ì§€ì›)
- [ ] íšŒì›ê°€ì…/ë¡œê·¸ì¸ API
- [ ] ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”
- [ ] ê¸°ë³¸ CRUD ê¸°ëŠ¥

#### ì—”í‹°í‹° ì„¤ê³„
```java
@Entity
public class Member {
    private Long id;
    private String email;
    private String password;
    private String name;
    private MemberRole role; // ADMIN, FACILITY, COORDINATOR, DOMESTIC_USER, OVERSEAS_USER
    private Boolean isJobSeeker;
    // ê¸°ë³¸ í•„ë“œë“¤...
}
```

---

### ğŸ“Œ Phase 2-B: êµ­ë‚´/í•´ì™¸ ì‚¬ìš©ì êµ¬ë¶„
**ì˜ˆìƒ í† í°**: ~8,000 í† í°  
**ì†Œìš”ì‹œê°„**: ë°˜ë‚˜ì ˆ

#### êµ¬í˜„ ëŒ€ìƒ
- [ ] í”„ë¡œí•„ ì—”í‹°í‹° (êµ­ë‚´/í•´ì™¸ êµ¬ë¶„)
- [ ] ë‹¤êµ­ì–´ ê¸°ë³¸ ì„¤ì •
- [ ] ì§€ì—­ë³„ ì ‘ê·¼ ê¶Œí•œ

---

## ğŸ¯ Phase 3: ê±´ê°• ìƒíƒœ í‰ê°€ ì‹œìŠ¤í…œ (3-4ì¼)

### ğŸ“Œ Phase 3-A: ëŒë´„ì§€ìˆ˜ ì²´í¬ ì‹œìŠ¤í…œ
**ì˜ˆìƒ í† í°**: ~12,000 í† í°  
**ì†Œìš”ì‹œê°„**: 1.5ì¼

#### êµ¬í˜„ ëŒ€ìƒ
- [ ] HealthAssessment ì—”í‹°í‹°
- [ ] 4ê°œ ì˜ì—­ í‰ê°€ ë¡œì§ (ê±·ê¸°, ì‹ì‚¬, ë°°ë³€, ì˜ì‚¬ì†Œí†µ)
- [ ] ADL ì ìˆ˜ ê³„ì‚°
- [ ] ì¢…í•© ì¼€ì–´ ë“±ê¸‰ ì‚°ì¶œ

#### í•µì‹¬ í´ë˜ìŠ¤
```java
@Entity
public class HealthAssessment {
    private Integer mobilityLevel;      // 1-3
    private Integer eatingLevel;        // 1-3
    private Integer toiletLevel;        // 1-3
    private Integer communicationLevel; // 1-3
    private Integer ltciGrade;          // ì¥ê¸°ìš”ì–‘ë³´í—˜ ë“±ê¸‰
    private String overallCareGrade;    // ì¢…í•© ì¼€ì–´ ë“±ê¸‰
}

@Service
public class CareGradeCalculator {
    public CareGrade calculateComprehensiveGrade(HealthAssessment assessment);
}
```

---

### ğŸ“Œ Phase 3-B: React ì²´í¬ë¦¬ìŠ¤íŠ¸ UI
**ì˜ˆìƒ í† í°**: ~10,000 í† í°  
**ì†Œìš”ì‹œê°„**: 1ì¼

#### êµ¬í˜„ ëŒ€ìƒ
- [ ] React 18 + TypeScript í”„ë¡œì íŠ¸ ì„¤ì •
- [ ] ê±´ê°• ìƒíƒœ ì²´í¬ë¦¬ìŠ¤íŠ¸ í¼
- [ ] ë‹¨ê³„ë³„ ì§„í–‰ UI
- [ ] ê²°ê³¼ í‘œì‹œ ì»´í¬ë„ŒíŠ¸

---

## ğŸ¯ Phase 4: ì½”ë””ë„¤ì´í„° ë§¤ì¹­ ì‹œìŠ¤í…œ (4-5ì¼)

### ğŸ“Œ Phase 4-A: ì½”ë””ë„¤ì´í„° í”„ë¡œí•„ ê´€ë¦¬
**ì˜ˆìƒ í† í°**: ~15,000 í† í°  
**ì†Œìš”ì‹œê°„**: 2ì¼

#### êµ¬í˜„ ëŒ€ìƒ
- [ ] CoordinatorProfile ì—”í‹°í‹°
- [ ] ìê¸° ì„¤ì • ì¼€ì–´ ë“±ê¸‰ ì‹œìŠ¤í…œ
- [ ] ì „ë¬¸ì„± ë° ê²½ë ¥ ê´€ë¦¬
- [ ] ì‹¤ì‹œê°„ ê°€ìš©ì„± ê´€ë¦¬

#### í•µì‹¬ ê¸°ëŠ¥
```java
@Entity
public class CoordinatorCareSettings {
    private Set<Integer> preferredCareGrades;    // ì„ í˜¸ ì¼€ì–´ ë“±ê¸‰
    private Set<Integer> excludedCareGrades;     // ê±°ë¶€ ì¼€ì–´ ë“±ê¸‰
    private Set<String> specialtyAreas;         // ì „ë¬¸ ë¶„ì•¼
    private Integer maxSimultaneousCases;       // ë™ì‹œ ë‹´ë‹¹ ê°€ëŠ¥ ì¼€ì´ìŠ¤
}
```

---

### ğŸ“Œ Phase 4-B: AI ê¸°ë°˜ ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜
**ì˜ˆìƒ í† í°**: ~12,000 í† í°  
**ì†Œìš”ì‹œê°„**: 1.5ì¼

#### êµ¬í˜„ ëŒ€ìƒ
- [ ] ë‹¤ì¸µ ë§¤ì¹­ ì‹œìŠ¤í…œ
- [ ] ì¢…í•© ì ìˆ˜ ê³„ì‚° ë¡œì§
- [ ] ì—…ë¬´ëŸ‰ ìµœì í™”
- [ ] ë§¤ì¹­ ê²°ê³¼ ì„¤ëª… ìƒì„±

#### ë§¤ì¹­ ë¡œì§
```java
@Service
public class OptimizedCoordinatorMatchingService {
    // 1. ê¸°ë³¸ ìê²© í•„í„°ë§ (40%)
    // 2. ì „ë¬¸ì„± ë§¤ì¹­ (25%)  
    // 3. ê²½ë ¥ ë° ì„±ê³¼ (20%)
    // 4. ìœ„ì¹˜ ì ‘ê·¼ì„± (10%)
    // 5. ì‹¤ì‹œê°„ ê°€ìš©ì„± (5%)
}
```

---

## ğŸ¯ Phase 5: ì‹œì„¤ ê´€ë¦¬ ì‹œìŠ¤í…œ (5-6ì¼)

### ğŸ“Œ Phase 5-A: ì‹œì„¤ ë“±ê¸‰ ë° ë¶„ë¥˜
**ì˜ˆìƒ í† í°**: ~14,000 í† í°  
**ì†Œìš”ì‹œê°„**: 1.5ì¼

#### êµ¬í˜„ ëŒ€ìƒ
- [ ] FacilityProfile ì—”í‹°í‹°
- [ ] ì‹œì„¤ íƒ€ì…ë³„ ë¶„ë¥˜ (ì–‘ë¡œì‹œì„¤, ìš”ì–‘ë³‘ì› ë“±)
- [ ] A-E ë“±ê¸‰ ì‹œìŠ¤í…œ
- [ ] ì „ë¬¸ íŠ¹í™” ì‹œì„¤ ê´€ë¦¬

---

### ğŸ“Œ Phase 5-B: ì‹œì„¤ ë§¤ì¹­ ë° ì¶”ì²œ
**ì˜ˆìƒ í† í°**: ~12,000 í† í°  
**ì†Œìš”ì‹œê°„**: 1ì¼

#### êµ¬í˜„ ëŒ€ìƒ
- [ ] ì‹œì„¤-í™˜ì ë§¤ì¹­ ë¡œì§
- [ ] ì½”ë””ë„¤ì´í„° ì‹œì„¤ ì „ë¬¸ì„± ì—°ë™
- [ ] ê²¬í•™ ê³„íš ë° í‰ê°€ ì‹œìŠ¤í…œ

---

## ğŸ¯ Phase 6: ê³µê³µë°ì´í„° API ì—°ë™ (6-7ì¼)

### ğŸ“Œ Phase 6-A: ê¸°ë³¸ API ì—°ë™
**ì˜ˆìƒ í† í°**: ~10,000 í† í°  
**ì†Œìš”ì‹œê°„**: 1ì¼

#### êµ¬í˜„ ëŒ€ìƒ
- [ ] êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨ ì¥ê¸°ìš”ì–‘ê¸°ê´€ API
- [ ] ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì› ë³‘ì›ì •ë³´ API
- [ ] API í´ë¼ì´ì–¸íŠ¸ êµ¬ì„±

#### ì¸ì¦í‚¤ í™œìš©
```
CCXHQiSSQ0J+RRaadSjmmS7ltxG/tlSVOYMjh45MmGne68ptgGAaAJVJti8nBazSjLemTAyb5gAuj43xq7fTog==
```

---

### ğŸ“Œ Phase 6-B: ì™¸êµë¶€ API ì—°ë™
**ì˜ˆìƒ í† í°**: ~8,000 í† í°  
**ì†Œìš”ì‹œê°„**: ë°˜ë‚˜ì ˆ

#### êµ¬í˜„ ëŒ€ìƒ
- [ ] ì¬ì™¸êµ­ë¯¼ ì„œë¹„ìŠ¤ API
- [ ] êµ­ê°€ë³„ ì…êµ­ ìš”ê±´ API
- [ ] ë‹¤êµ­ì–´ ë°ì´í„° ì²˜ë¦¬

---

## ğŸ¯ Phase 7: ì±—ë´‡ ì—°ë™ ì¸í„°í˜ì´ìŠ¤ (7ì¼)

### ğŸ“Œ Phase 7-A: ì±—ë´‡ í˜¸í™˜ì„± API
**ì˜ˆìƒ í† í°**: ~8,000 í† í°  
**ì†Œìš”ì‹œê°„**: ë°˜ë‚˜ì ˆ

#### êµ¬í˜„ ëŒ€ìƒ
- [ ] ì±—ë´‡ ì—°ë™ API ì—”ë“œí¬ì¸íŠ¸
- [ ] ì„¸ì…˜ ê´€ë¦¬ ì‹œìŠ¤í…œ
- [ ] í”„ë¡œì„¸ìŠ¤ ì¶”ì  ì—°ë™

**ì£¼ì˜**: ì±—ë´‡ êµ¬í˜„ì²´ëŠ” ë‹¤ë¥¸ íŒ€ì›ì´ ë‹´ë‹¹

---

## ğŸ¯ Phase 8: í”„ë¡ íŠ¸ì—”ë“œ í†µí•© (8-10ì¼)

### ğŸ“Œ Phase 8-A: ë©”ì¸ UI êµ¬ì„±
**ì˜ˆìƒ í† í°**: ~15,000 í† í°  
**ì†Œìš”ì‹œê°„**: 2ì¼

#### êµ¬í˜„ ëŒ€ìƒ
- [ ] 'elderberry' ë””ìì¸ ì‹œìŠ¤í…œ
- [ ] ë©”ì¸ í˜ì´ì§€ ë° ë„¤ë¹„ê²Œì´ì…˜
- [ ] ì‚¬ìš©ì ê¶Œí•œë³„ UI

---

### ğŸ“Œ Phase 8-B: ê¸°ëŠ¥ë³„ í˜ì´ì§€ êµ¬í˜„
**ì˜ˆìƒ í† í°**: ~18,000 í† í°  
**ì†Œìš”ì‹œê°„**: 2.5ì¼

#### êµ¬í˜„ ëŒ€ìƒ
- [ ] ê±´ê°• ì²´í¬ë¦¬ìŠ¤íŠ¸ í˜ì´ì§€
- [ ] ì½”ë””ë„¤ì´í„° ë§¤ì¹­ ê²°ê³¼ í˜ì´ì§€
- [ ] ì‹œì„¤ ê²€ìƒ‰ ë° ìƒì„¸ í˜ì´ì§€
- [ ] ì‚¬ìš©ì í”„ë¡œí•„ ê´€ë¦¬ í˜ì´ì§€

---

## ğŸ¯ Phase 9: í…ŒìŠ¤íŠ¸ ë° ìµœì í™” (11-12ì¼)

### ğŸ“Œ Phase 9-A: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
**ì˜ˆìƒ í† í°**: ~10,000 í† í°  
**ì†Œìš”ì‹œê°„**: 1ì¼

#### êµ¬í˜„ ëŒ€ìƒ
- [ ] JUnit 5 í…ŒìŠ¤íŠ¸ ì½”ë“œ
- [ ] MockMvc í†µí•© í…ŒìŠ¤íŠ¸
- [ ] ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ í…ŒìŠ¤íŠ¸

---

### ğŸ“Œ Phase 9-B: í†µí•© í…ŒìŠ¤íŠ¸ ë° ë°°í¬
**ì˜ˆìƒ í† í°**: ~8,000 í† í°  
**ì†Œìš”ì‹œê°„**: 1ì¼

#### êµ¬í˜„ ëŒ€ìƒ
- [ ] E2E í…ŒìŠ¤íŠ¸
- [ ] Railway/Render ë°°í¬ ì„¤ì •
- [ ] GitHub Actions CI/CD

---

## ğŸ“Š ê°œë°œ ì§„í–‰ ê´€ë¦¬

### í† í° ì‚¬ìš©ëŸ‰ ì¶”ì 
- **ì´ ì˜ˆìƒ í† í°**: ~196,000 í† í°
- **ì¼ì¼ ê¶Œì¥ í† í°**: ~14,000 í† í°
- **Phaseë³„ í† í° ë¶„ë°°**: ê· ë“± ë¶„í• 

### ìš°ì„ ìˆœìœ„ ê´€ë¦¬
1. **P0 (Critical)**: Phase 1-4 (í•µì‹¬ ê¸°ëŠ¥)
2. **P1 (High)**: Phase 5-6 (ì‹œì„¤ ê´€ë¦¬, API ì—°ë™)
3. **P2 (Medium)**: Phase 7-8 (UI, ì±—ë´‡ ì—°ë™)
4. **P3 (Low)**: Phase 9 (í…ŒìŠ¤íŠ¸, ìµœì í™”)

### ì²´í¬í¬ì¸íŠ¸
- **Day 3**: Phase 2 ì™„ë£Œ í™•ì¸
- **Day 6**: Phase 4 ì™„ë£Œ í™•ì¸
- **Day 9**: Phase 6 ì™„ë£Œ í™•ì¸
- **Day 12**: ì „ì²´ ì‹œìŠ¤í…œ ì™„ì„±

---

## ğŸš¨ ë¦¬ìŠ¤í¬ ê´€ë¦¬

### ì£¼ìš” ë¦¬ìŠ¤í¬
1. **í† í° ì´ˆê³¼ ì‚¬ìš©**: ë³µì¡í•œ ë¡œì§ì„ ë‹¨ìˆœí™”
2. **API ì—°ë™ ì‹¤íŒ¨**: Mock ë°ì´í„°ë¡œ ìš°ì„  ê°œë°œ
3. **ì‹œê°„ ë¶€ì¡±**: P2, P3 ê¸°ëŠ¥ ì¶•ì†Œ

### ì™„í™” ë°©ì•ˆ
- Phaseë³„ ì™„ë£Œ í›„ ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰
- í•µì‹¬ ê¸°ëŠ¥ ìš°ì„  êµ¬í˜„ (MVP ì ‘ê·¼)
- ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™© ì²´í¬

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

1. **Phase 1-A ì‹œì‘**: í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •
2. **í† í° ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§** ì‹œì‘
3. **ì¼ì¼ ì²´í¬í¬ì¸íŠ¸** ì„¤ì •

ì´ ê³„íšì„œë¥¼ ë°”íƒ•ìœ¼ë¡œ ì²´ê³„ì ì¸ ê°œë°œì„ ì§„í–‰í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.
</file>

<file path="frontend/src/components/ui/Button.tsx">
/**
 * ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë²„íŠ¼ ì»´í¬ë„ŒíŠ¸
 * 'elderberry' í…Œë§ˆ ìŠ¤íƒ€ì¼ ì ìš©
 */
import React from 'react';
import { motion } from 'framer-motion';
import { Loader2 } from 'lucide-react';
â‹®----
interface ButtonProps {
  children: React.ReactNode;
  variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'care';
  size?: 'sm' | 'md' | 'lg';
  disabled?: boolean;
  loading?: boolean;
  fullWidth?: boolean;
  onClick?: () => void;
  type?: 'button' | 'submit' | 'reset';
  className?: string;
}
</file>

<file path="frontend/src/components/ui/Card.tsx">
/**
 * ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
 * 'elderberry' í…Œë§ˆ ìŠ¤íƒ€ì¼ ì ìš©
 */
import React from 'react';
import { motion } from 'framer-motion';
â‹®----
interface CardProps {
  children: React.ReactNode;
  className?: string;
  padding?: 'none' | 'sm' | 'md' | 'lg';
  shadow?: 'none' | 'sm' | 'md' | 'lg';
  hover?: boolean;
  onClick?: () => void;
}
â‹®----
const Card: React.FC<CardProps> = ({
  children,
  className = '',
  padding = 'md',
  shadow = 'sm',
  hover = false,
  onClick,
}) =>
â‹®----
// === ì¹´ë“œ ì„œë¸Œì»´í¬ë„ŒíŠ¸ë“¤ ===
â‹®----
interface CardHeaderProps {
  children: React.ReactNode;
  className?: string;
}
â‹®----
export const CardHeader: React.FC<CardHeaderProps> = ({ 
  children, 
  className = '' 
}) => (
  <div className={`border-b border-elderberry-100 pb-4 mb-4 ${className}`}>
    {children}
  </div>
);
â‹®----
interface CardTitleProps {
  children: React.ReactNode;
  className?: string;
}
â‹®----
export const CardTitle: React.FC<CardTitleProps> = ({ 
  children, 
  className = '' 
}) => (
  <h3 className={`text-lg font-semibold text-elderberry-900 ${className}`}>
    {children}
  </h3>
);
â‹®----
interface CardDescriptionProps {
  children: React.ReactNode;
  className?: string;
}
â‹®----
export const CardDescription: React.FC<CardDescriptionProps> = ({ 
  children, 
  className = '' 
}) => (
  <p className={`text-sm text-elderberry-600 mt-1 ${className}`}>
    {children}
  </p>
);
â‹®----
interface CardContentProps {
  children: React.ReactNode;
  className?: string;
}
â‹®----
export const CardContent: React.FC<CardContentProps> = ({ 
  children, 
  className = '' 
}) => (
  <div className={className}>
    {children}
  </div>
);
â‹®----
interface CardFooterProps {
  children: React.ReactNode;
  className?: string;
}
â‹®----
export const CardFooter: React.FC<CardFooterProps> = ({ 
  children, 
  className = '' 
}) => (
  <div className={`border-t border-elderberry-100 pt-4 mt-4 ${className}`}>
    {children}
  </div>
);
</file>

<file path="frontend/src/components/ui/ProgressBar.tsx">
/**
 * ì§„í–‰ë¥  í‘œì‹œ ë°” ì»´í¬ë„ŒíŠ¸
 * ì²´í¬ë¦¬ìŠ¤íŠ¸ ì§„í–‰ ìƒí™© í‘œì‹œìš©
 */
import React from 'react';
import { motion } from 'framer-motion';
â‹®----
interface ProgressBarProps {
  progress: number; // 0-100
  steps?: string[];
  currentStep?: number;
  showPercentage?: boolean;
  showSteps?: boolean;
  className?: string;
}
â‹®----
progress: number; // 0-100
â‹®----
{/* ì§„í–‰ë¥  í…ìŠ¤íŠ¸ */}
â‹®----
{/* ì§„í–‰ë¥  ë°” */}
â‹®----
{/* ë‹¨ê³„ë³„ í‘œì‹œ */}
â‹®----
{/* ë‹¨ê³„ ì›í˜• í‘œì‹œ */}
</file>

<file path="frontend/src/components/ui/RadioGroup.tsx">
/**
 * ë¼ë””ì˜¤ ë²„íŠ¼ ê·¸ë£¹ ì»´í¬ë„ŒíŠ¸
 * ADL í‰ê°€ìš© ì„ íƒ ì¸í„°í˜ì´ìŠ¤
 */
import React from 'react';
import { motion } from 'framer-motion';
â‹®----
export interface RadioOption {
  value: string | number;
  label: string;
  description?: string;
  disabled?: boolean;
}
â‹®----
interface RadioGroupProps {
  name: string;
  value?: string | number;
  options: RadioOption[];
  onChange: (value: string | number) => void;
  error?: string;
  required?: boolean;
  className?: string;
  direction?: 'vertical' | 'horizontal';
}
â‹®----
{/* ì»¤ìŠ¤í…€ ë¼ë””ì˜¤ ë²„íŠ¼ */}
â‹®----
{/* ë¼ë²¨ ë° ì„¤ëª… */}
â‹®----
{/* ì„ íƒ í‘œì‹œ ì•„ì´ì½˜ */}
â‹®----
{/* ì—ëŸ¬ ë©”ì‹œì§€ */}
</file>

<file path="frontend/src/features/facility/components/FacilityCard.tsx">
/**
 * ì‹œì„¤ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
 * ì‹œì„¤ ì •ë³´ë¥¼ ì¹´ë“œ í˜•íƒœë¡œ í‘œì‹œí•˜ê³ , ì‚¬ìš©ì í–‰ë™ ì¶”ì  ë²„íŠ¼ë“¤ í¬í•¨
 */
import React, { useState } from 'react';
import { motion } from 'framer-motion';
import { 
  MapPin, 
  Phone, 
  Users, 
  Star, 
  Heart,
  Eye,
  MessageCircle,
  Calendar,
  DollarSign,
  Award,
  Clock,
  CheckCircle,
  AlertCircle
} from 'lucide-react';
â‹®----
import { FacilityProfile, useFacilityStore } from '@/stores/facilityStore';
import Button from '@/components/ui/Button';
import Card, { CardContent, CardHeader } from '@/components/ui/Card';
â‹®----
interface FacilityCardProps {
  facility: FacilityProfile;
  viewMode?: 'list' | 'grid';
  onSelect?: (facility: FacilityProfile) => void;
  showActions?: boolean;
  isRecommendation?: boolean;
  matchScore?: number;
  recommendationReason?: string;
}
â‹®----
// ì‹œì„¤ ìƒì„¸ ë³´ê¸°
const handleViewDetails = () =>
â‹®----
// ì‹œì„¤ ì—°ë½ ì¶”ì 
const handleContact = async (e: React.MouseEvent) =>
â‹®----
// ì‹¤ì œ ì—°ë½ ê¸°ëŠ¥ (ì „í™” ê±¸ê¸° ë“±) êµ¬í˜„ ê°€ëŠ¥
â‹®----
// ì‹œì„¤ ë°©ë¬¸ ì˜ˆì•½ (ì‹¤ì œë¡œëŠ” ë°©ë¬¸ ì¶”ì )
const handleVisit = async (e: React.MouseEvent) =>
â‹®----
// ì‹¤ì œ ë°©ë¬¸ ì˜ˆì•½ ê¸°ëŠ¥ êµ¬í˜„ ê°€ëŠ¥
â‹®----
// ì‹œì„¤ ë“±ê¸‰ ìƒ‰ìƒ ë§¤í•‘
const getGradeColor = (grade: string) =>
â‹®----
// ì…ì†Œ ê°€ëŠ¥ ì—¬ë¶€ ê³„ì‚°
â‹®----
// ì›” ë¹„ìš© í¬ë§·íŒ…
const formatCost = (cost: number | null) =>
â‹®----
// ê·¸ë¦¬ë“œ ë·° ë Œë”ë§
â‹®----
{/* ì¶”ì²œ ë°°ì§€ */}
â‹®----
{/* ì‹œì„¤ ì´ë¯¸ì§€ */}
â‹®----
{/* ë“±ê¸‰ ë°°ì§€ */}
â‹®----
{/* ì‹œì„¤ ê¸°ë³¸ ì •ë³´ */}
â‹®----
{/* ì…ì†Œ í˜„í™© */}
â‹®----
{/* ì›” ë¹„ìš© */}
â‹®----
{/* ì „ë¬¸ ì„œë¹„ìŠ¤ */}
â‹®----
{/* ì¶”ì²œ ì´ìœ  */}
â‹®----
{/* ì•¡ì…˜ ë²„íŠ¼ë“¤ */}
â‹®----
// ë¦¬ìŠ¤íŠ¸ ë·° ë Œë”ë§ (ê¸°ë³¸)
â‹®----
{/* ì‹œì„¤ ì´ë¯¸ì§€ */}
â‹®----
{/* ë©”ì¸ ì •ë³´ */}
â‹®----
{/* ì…ì†Œ í˜„í™© ë° ë¹„ìš© */}
â‹®----
{/* ì „ë¬¸ ì„œë¹„ìŠ¤ */}
â‹®----
{/* ì¶”ì²œ ì´ìœ  */}
â‹®----
{/* ì•¡ì…˜ ë²„íŠ¼ë“¤ */}
</file>

<file path="frontend/src/features/facility/components/FacilityDetailModal.tsx">
/**
 * ì‹œì„¤ ìƒì„¸ ì •ë³´ ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸
 * ì‹œì„¤ì˜ ìƒì„¸ ì •ë³´, ì´ë¯¸ì§€, ì„œë¹„ìŠ¤, ìœ„ì¹˜ ë“±ì„ í‘œì‹œí•˜ê³  ì‚¬ìš©ì í–‰ë™ ì¶”ì  ê¸°ëŠ¥ í¬í•¨
 */
import React, { useState, useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import {
  X,
  MapPin,
  Phone,
  Users,
  Star,
  Clock,
  DollarSign,
  Award,
  Heart,
  Calendar,
  MessageCircle,
  Navigation,
  CheckCircle,
  AlertCircle,
  Camera,
  Wifi,
  Car,
  Utensils,
  Shield,
  Activity,
  Home,
  Stethoscope,
} from 'lucide-react';
â‹®----
import { useFacilityStore, useSelectedFacility } from '@/stores/facilityStore';
import Button from '@/components/ui/Button';
import Card, { CardContent, CardHeader, CardTitle } from '@/components/ui/Card';
â‹®----
// ëª¨ë‹¬ ë‹«ê¸°
const handleClose = () =>
â‹®----
// ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
â‹®----
const handleEscape = (e: KeyboardEvent) =>
â‹®----
// ì‹œì„¤ ì—°ë½ ì¶”ì 
const handleContact = async () =>
â‹®----
// ì‹œì„¤ ë°©ë¬¸ ì˜ˆì•½
const handleVisit = async () =>
â‹®----
// ë§¤ì¹­ ì‹ ì²­
const handleMatching = () =>
â‹®----
// ì§€ë„ë¡œ ìœ„ì¹˜ ë³´ê¸°
const handleViewMap = () =>
â‹®----
// ì‹œì„¤ ë“±ê¸‰ ìƒ‰ìƒ ë§¤í•‘
const getGradeColor = (grade: string) =>
â‹®----
// ì…ì†Œ ê°€ëŠ¥ ì—¬ë¶€ ê³„ì‚°
â‹®----
// ì›” ë¹„ìš© í¬ë§·íŒ…
const formatCost = (cost: number | null) =>
â‹®----
// ì‹œì„¤ ì´ë¯¸ì§€ (ì„ì‹œ ë°ì´í„°)
â‹®----
// ì‹œì„¤ í¸ì˜ì‹œì„¤ (ì„ì‹œ ë°ì´í„°)
â‹®----
{/* ë°°ê²½ ì˜¤ë²„ë ˆì´ */}
â‹®----
{/* ëª¨ë‹¬ ì½˜í…ì¸  */}
â‹®----
{/* ëª¨ë‹¬ í—¤ë” */}
â‹®----
{/* ì‹œì„¤ ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë” */}
â‹®----
{/* ì´ë¯¸ì§€ ë„¤ë¹„ê²Œì´ì…˜ */}
â‹®----
{/* ë“±ê¸‰ ë°°ì§€ */}
â‹®----
{/* ë‹«ê¸° ë²„íŠ¼ */}
â‹®----
{/* ê¸°ë³¸ ì •ë³´ í—¤ë” */}
â‹®----
{/* ì…ì†Œ í˜„í™© */}
â‹®----
{/* ì…ì†Œìœ¨ í”„ë¡œê·¸ë ˆìŠ¤ ë°” */}
â‹®----
{/* ì•¡ì…˜ ë²„íŠ¼ë“¤ */}
â‹®----
{/* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */}
â‹®----
{/* íƒ­ ì½˜í…ì¸  */}
â‹®----
{/* ì‹œì„¤ ì„¤ëª… */}
â‹®----
{/* ì „ë¬¸ ì„œë¹„ìŠ¤ */}
â‹®----
{/* í¸ì˜ì‹œì„¤ */}
â‹®----
{/* ìš´ì˜ ì‹œê°„ */}
â‹®----
{/* ì¼€ì–´ ë“±ê¸‰ë³„ ì„œë¹„ìŠ¤ */}
â‹®----
{/* ì¶”ê°€ ì„œë¹„ìŠ¤ ì •ë³´ */}
â‹®----
{/* êµí†µ ì •ë³´ (ì„ì‹œ ë°ì´í„°) */}
â‹®----
{/* í‰ì  ìš”ì•½ */}
â‹®----
{/* ë¦¬ë·° ëª©ë¡ (ì„ì‹œ ë°ì´í„°) */}
</file>

<file path="frontend/src/features/facility/components/FacilityList.tsx">
/**
 * ì‹œì„¤ ëª©ë¡ í‘œì‹œ ì»´í¬ë„ŒíŠ¸
 * ë¦¬ìŠ¤íŠ¸ ë·°ì™€ ê·¸ë¦¬ë“œ ë·°ë¥¼ ì§€ì›í•˜ê³ , ë¡œë”© ìƒíƒœì™€ ë¹ˆ ìƒíƒœ ì²˜ë¦¬
 */
import React from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { Search, RefreshCw } from 'lucide-react';
â‹®----
import { FacilityProfile } from '@/stores/facilityStore';
import FacilityCard from './FacilityCard';
import Card, { CardContent } from '@/components/ui/Card';
â‹®----
interface FacilityListProps {
  facilities: FacilityProfile[];
  viewMode?: 'list' | 'grid';
  isLoading?: boolean;
  emptyMessage?: string;
  onFacilitySelect?: (facility: FacilityProfile) => void;
  showActions?: boolean;
}
â‹®----
// ë¡œë”© ìŠ¤ì¼ˆë ˆí†¤ ì»´í¬ë„ŒíŠ¸
â‹®----
{/* ì´ë¯¸ì§€ ìŠ¤ì¼ˆë ˆí†¤ */}
â‹®----
{/* ì½˜í…ì¸  ìŠ¤ì¼ˆë ˆí†¤ */}
â‹®----
{/* ì œëª© */}
â‹®----
{/* ë¶€ì œëª© */}
â‹®----
{/* ì„¤ëª… ë¼ì¸ë“¤ */}
â‹®----
{/* ë²„íŠ¼ë“¤ */}
â‹®----
{/* ìš°ì¸¡ ì •ë³´ */}
â‹®----
// ë¹ˆ ìƒíƒœ ì»´í¬ë„ŒíŠ¸
â‹®----
// ë¡œë”© ì¤‘ì¼ ë•Œ
â‹®----
// ë¹ˆ ìƒíƒœì¼ ë•Œ
â‹®----
// ê·¸ë¦¬ë“œ ë·° ë ˆì´ì•„ì›ƒ
â‹®----
// ë¦¬ìŠ¤íŠ¸ ë·° ë ˆì´ì•„ì›ƒ (ê¸°ë³¸)
</file>

<file path="frontend/src/features/facility/components/FacilitySearchFilters.tsx">
/**
 * ì‹œì„¤ ê²€ìƒ‰ í•„í„° ì»´í¬ë„ŒíŠ¸
 * ì‹œì„¤ íƒ€ì…, ë“±ê¸‰, ì§€ì—­, ì¼€ì–´ ë“±ê¸‰, ë¹„ìš© ë“±ì˜ ë‹¤ì–‘í•œ í•„í„°ë§ ì˜µì…˜ ì œê³µ
 */
import React, { useState } from 'react';
import { motion } from 'framer-motion';
import { X, DollarSign, MapPin, Star, Users, Heart } from 'lucide-react';
â‹®----
import Button from '@/components/ui/Button';
import { FacilitySearchFilters as FilterType } from '@/stores/facilityStore';
â‹®----
interface FacilitySearchFiltersProps {
  filters: FilterType;
  onFiltersChange: (filters: Partial<FilterType>) => void;
  onClear?: () => void;
}
â‹®----
// í•„í„° ì˜µì…˜ ìƒìˆ˜ë“¤
â‹®----
// ì„¹ì…˜ í† ê¸€
const toggleSection = (section: string) =>
â‹®----
// í•„í„° ì—…ë°ì´íŠ¸ í—¬í¼
const updateFilter = (key: keyof FilterType, value: any) =>
â‹®----
// í•„í„° ì´ˆê¸°í™”
const handleClearAll = () =>
â‹®----
// í™œì„± í•„í„° ê°œìˆ˜ ê³„ì‚°
â‹®----
{/* í•„í„° í—¤ë” */}
â‹®----
{/* ì‹œì„¤ íƒ€ì… í•„í„° */}
â‹®----
onChange=
â‹®----
{/* ì‹œì„¤ ë“±ê¸‰ í•„í„° */}
â‹®----
{/* ì§€ì—­ í•„í„° */}
â‹®----
{/* ì¼€ì–´ ë“±ê¸‰ í•„í„° */}
â‹®----
{/* ì›” ë¹„ìš© í•„í„° */}
â‹®----
{/* ì „ë¬¸ ì„œë¹„ìŠ¤ í•„í„° */}
â‹®----
{/* ê¸°íƒ€ ì˜µì…˜ */}
</file>

<file path="frontend/src/features/facility/components/MatchingCompletionForm.tsx">
/**
 * ë§¤ì¹­ ì™„ë£Œ ë° í”¼ë“œë°± í¼ ì»´í¬ë„ŒíŠ¸
 * ì‚¬ìš©ìê°€ ì‹œì„¤ì„ ì„ íƒí•˜ê³  ë§¤ì¹­ì„ ì™„ë£Œí•  ë•Œ ì‚¬ìš©í•˜ëŠ” í¼
 * ë§Œì¡±ë„ í‰ê°€ì™€ í”¼ë“œë°±ì„ ìˆ˜ì§‘í•˜ì—¬ ì¶”ì²œ ì‹œìŠ¤í…œ ê°œì„ ì— í™œìš©
 */
import React, { useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import {
  X,
  Star,
  Heart,
  CheckCircle,
  AlertTriangle,
  DollarSign,
  MessageSquare,
  ThumbsUp,
  ThumbsDown,
  Send,
  Award,
  TrendingUp,
  Users,
  Clock,
  Lightbulb,
} from 'lucide-react';
â‹®----
import { useFacilityStore, useSelectedFacility } from '@/stores/facilityStore';
import Button from '@/components/ui/Button';
import Card, { CardContent, CardHeader, CardTitle } from '@/components/ui/Card';
â‹®----
interface MatchingCompletionFormProps {
  facilityId?: number;
  onComplete?: () => void;
  onCancel?: () => void;
}
â‹®----
// í¼ ìƒíƒœ
â‹®----
// í¼ ë°ì´í„° ì—…ë°ì´íŠ¸
const updateFormData = (field: string, value: any) =>
â‹®----
// ì„¸ë¶€ í‰ì  ì—…ë°ì´íŠ¸
const updateSpecificRating = (category: string, rating: number) =>
â‹®----
// í¼ ì œì¶œ
const handleSubmit = async () =>
â‹®----
// ì„±ê³µ ë©”ì‹œì§€
â‹®----
// í¼ ë‹«ê¸°
â‹®----
// í¼ ë‹«ê¸°
const handleClose = () =>
â‹®----
// í¼ ì´ˆê¸°í™”
â‹®----
// ë³„ì  ë Œë”ë§ ì»´í¬ë„ŒíŠ¸
â‹®----
{/* ë°°ê²½ ì˜¤ë²„ë ˆì´ */}
â‹®----
{/* í¼ ì½˜í…ì¸  */}
â‹®----
{/* í—¤ë” */}
â‹®----
{/* ì§„í–‰ ìƒíƒœ */}
â‹®----
{/* ì‹¤ì œ ë¹„ìš© (ì„±ê³µí•œ ê²½ìš°ë§Œ) */}
â‹®----
{/* ì „ì²´ ë§Œì¡±ë„ */}
â‹®----
{/* Step 2: ìƒì„¸ í‰ê°€ */}
â‹®----
onRatingChange=
â‹®----
{/* ì¶”ì²œ ì˜í–¥ */}
â‹®----
{/* Step 3: ì¶”ê°€ í”¼ë“œë°± */}
â‹®----
{/* ìƒì„¸ í”¼ë“œë°± */}
â‹®----
{/* ê°œì„  ì œì•ˆ */}
â‹®----
{/* ì œì¶œ ì „ ìš”ì•½ */}
â‹®----
{/* ì—ëŸ¬ ë©”ì‹œì§€ */}
â‹®----
{/* í•˜ë‹¨ ë²„íŠ¼ë“¤ */}
â‹®----
handleSubmit();
</file>

<file path="frontend/src/features/facility/components/RecommendationResults.tsx">
/**
 * ë§ì¶¤í˜• ì¶”ì²œ ê²°ê³¼ UI ì»´í¬ë„ŒíŠ¸
 * AI ê¸°ë°˜ ì¶”ì²œ ì‹œì„¤ë“¤ì„ ë§¤ì¹­ ì ìˆ˜ì™€ í•¨ê»˜ í‘œì‹œí•˜ê³ , ì¶”ì²œ ì´ìœ  ì„¤ëª…
 */
import React, { useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import {
  Sparkles,
  RefreshCw,
  TrendingUp,
  Heart,
  Star,
  Target,
  Brain,
  Award,
  Filter,
  Settings,
  Info,
  ChevronDown,
  ChevronUp,
  Lightbulb,
  CheckCircle,
  AlertCircle,
} from 'lucide-react';
â‹®----
import { FacilityRecommendation, useFacilityStore } from '@/stores/facilityStore';
import Button from '@/components/ui/Button';
import Card, { CardContent, CardHeader, CardTitle } from '@/components/ui/Card';
import FacilityCard from './FacilityCard';
â‹®----
interface RecommendationResultsProps {
  recommendations: FacilityRecommendation[];
  isLoading?: boolean;
  onRefresh?: () => void;
  memberId?: number;
  showPreferences?: boolean;
}
â‹®----
// ì¶”ì²œ í†µê³„ ê³„ì‚°
â‹®----
// ì¶”ì²œ ì¸ì‚¬ì´íŠ¸ ìƒì„±
const generateInsights = () =>
â‹®----
// ì„ í˜¸ë„ ì—…ë°ì´íŠ¸ í•¸ë“¤ëŸ¬
const handlePreferenceUpdate = (key: string, value: any) =>
â‹®----
// ë¡œë”© ìƒíƒœ
â‹®----
{/* ë¡œë”© í—¤ë” */}
â‹®----
{/* ë¡œë”© ìŠ¤ì¼ˆë ˆí†¤ */}
â‹®----
// ë¹ˆ ìƒíƒœ
â‹®----
{/* ì¶”ì²œ ê²°ê³¼ í—¤ë” */}
â‹®----
{/* ì¶”ì²œ í†µê³„ */}
â‹®----
{/* ì¶”ì²œ ì¸ì‚¬ì´íŠ¸ í† ê¸€ */}
â‹®----
{/* ì¶”ì²œ ì¸ì‚¬ì´íŠ¸ */}
â‹®----
{/* ì„ í˜¸ë„ ì„¤ì • */}
â‹®----
{/* ìš°ì„ ìˆœìœ„ ì„¤ì • */}
â‹®----
onChange=
â‹®----
{/* ìµœëŒ€ ë¹„ìš© ì„¤ì • */}
â‹®----
{/* ìµœì†Œ ë“±ê¸‰ ì„¤ì • */}
â‹®----
{/* ì¶”ì²œ ì‹œì„¤ ëª©ë¡ */}
â‹®----
{/* ìˆœìœ„ ë°°ì§€ */}
â‹®----
{/* ì¶”ì²œ ê°œì„  ì œì•ˆ */}
</file>

<file path="frontend/src/features/facility/FacilitySearchPage.tsx">
/**
 * ì‹œì„¤ ê²€ìƒ‰ ë©”ì¸ í˜ì´ì§€
 * ì‹œì„¤ ê²€ìƒ‰, í•„í„°ë§, ì¶”ì²œ ê²°ê³¼ í‘œì‹œ ë“±ì˜ ì¢…í•©ì ì¸ ì‹œì„¤ ê²€ìƒ‰ UI
 */
import React, { useEffect, useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { 
  Search, 
  Filter, 
  MapPin, 
  Star, 
  Heart,
  Settings,
  RefreshCw,
  AlertCircle,
  Sparkles,
  List,
  Grid
} from 'lucide-react';
â‹®----
import { useFacilityStore, useFacilitySearchResults, useFacilityLoadingStates, useFacilityErrors } from '@/stores/facilityStore';
import Button from '@/components/ui/Button';
import Card, { CardHeader, CardTitle, CardContent } from '@/components/ui/Card';
import FacilityList from './components/FacilityList';
import FacilitySearchFilters from './components/FacilitySearchFilters';
import RecommendationResults from './components/RecommendationResults';
import FacilityDetailModal from './components/FacilityDetailModal';
â‹®----
interface FacilitySearchPageProps {
  memberId?: number;
  coordinatorId?: string;
  showRecommendations?: boolean;
}
â‹®----
// Zustand ìŠ¤í† ì–´ ìƒíƒœ ë° ì•¡ì…˜ë“¤
â‹®----
// ë¡œì»¬ UI ìƒíƒœ
â‹®----
// ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ì´ˆê¸°í™”
â‹®----
// ì¶”ì²œ ê¸°ëŠ¥ì´ í™œì„±í™”ë˜ê³  memberIdê°€ ìˆìœ¼ë©´ ìë™ìœ¼ë¡œ ì¶”ì²œ ì¡°íšŒ
â‹®----
// ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ì •ë¦¬
â‹®----
// ê²€ìƒ‰ ì‹¤í–‰
const handleSearch = async () =>
â‹®----
...(searchQuery && { region: searchQuery }), // ê²€ìƒ‰ì–´ë¥¼ ì§€ì—­ìœ¼ë¡œ ì²˜ë¦¬
â‹®----
// ì¶”ì²œ ì‹œì„¤ ì¡°íšŒ
const handleGetRecommendations = async () =>
â‹®----
// í•„í„° ì ìš©
const handleFilterChange = (newFilters: any) =>
â‹®----
// í•„í„° ë³€ê²½ ì‹œ ìë™ ê²€ìƒ‰ (ë””ë°”ìš´ì‹± ì ìš© ê°€ëŠ¥)
â‹®----
// ê²€ìƒ‰ì–´ ì…ë ¥ í•¸ë“¤ëŸ¬
const handleSearchInputChange = (e: React.ChangeEvent<HTMLInputElement>) =>
â‹®----
// ì—”í„°í‚¤ ê²€ìƒ‰
const handleSearchKeyPress = (e: React.KeyboardEvent<HTMLInputElement>) =>
â‹®----
{/* í˜ì´ì§€ í—¤ë” */}
â‹®----
{/* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */}
â‹®----
{/* ê²€ìƒ‰ íƒ­ ì½˜í…ì¸  */}
â‹®----
{/* ê²€ìƒ‰ë°” */}
â‹®----
{/* ê²€ìƒ‰ ì…ë ¥ */}
â‹®----
{/* ê²€ìƒ‰ ë²„íŠ¼ */}
â‹®----
{/* í•„í„° í† ê¸€ ë²„íŠ¼ */}
â‹®----
{/* ê²€ìƒ‰ í•„í„° (ì ‘ê¸°/í¼ì¹˜ê¸°) */}
â‹®----
{/* ê²€ìƒ‰ ì˜¤ë¥˜ í‘œì‹œ */}
â‹®----
{/* ê²€ìƒ‰ ê²°ê³¼ í—¤ë” */}
â‹®----
{/* ë³´ê¸° ëª¨ë“œ ì „í™˜ */}
â‹®----
{/* ê²€ìƒ‰ ê²°ê³¼ ëª©ë¡ */}
â‹®----
{/* ì¶”ì²œ íƒ­ ì½˜í…ì¸  */}
â‹®----
{/* ì¶”ì²œ ì˜¤ë¥˜ í‘œì‹œ */}
â‹®----
{/* ì¶”ì²œ ê²°ê³¼ */}
â‹®----
{/* ì‹œì„¤ ìƒì„¸ ëª¨ë‹¬ */}
</file>

<file path="frontend/src/features/health/steps/AdditionalInfoStep.tsx">
/**
 * ì¶”ê°€ ì •ë³´ ì…ë ¥ ë‹¨ê³„
 * ëŒë´„ìƒíƒœ, ì‹ì‚¬í˜•íƒœ, ì§ˆí™˜ì •ë³´ ë“±
 */
import React from 'react';
import { motion } from 'framer-motion';
import { FileText, AlertTriangle } from 'lucide-react';
â‹®----
import { useHealthAssessmentStore } from '@/stores/healthAssessmentStore';
import { CARE_TARGET_STATUS, MEAL_TYPES } from '@/types/health';
import type { CareTargetStatus, MealType } from '@/types/health';
import RadioGroup, { type RadioOption } from '@/components/ui/RadioGroup';
â‹®----
// ëŒë´„ëŒ€ìƒì ìƒíƒœ ì˜µì…˜
â‹®----
// ì‹ì‚¬í˜•íƒœ ì˜µì…˜
â‹®----
{/* ì„¹ì…˜ í—¤ë” */}
â‹®----
{/* ëŒë´„ëŒ€ìƒì ìƒíƒœ */}
â‹®----
setCareTargetStatus(value as CareTargetStatus);
clearError('careTargetStatus');
â‹®----
{/* ì‹ì‚¬í˜•íƒœ */}
â‹®----
setMealType(value as MealType);
clearError('mealType');
â‹®----
{/* ì§ˆí™˜ ì •ë³´ */}
â‹®----
{/* íŠ¹ì´ì‚¬í•­ ë° ê¸°íƒ€ ë©”ëª¨ */}
â‹®----
{/* ì•ˆë‚´ ë©”ì‹œì§€ */}
</file>

<file path="frontend/src/features/health/steps/AdlCommunicationStep.tsx">
/**
 * ADL í‰ê°€ - ì˜ì‚¬ì†Œí†µ ëŠ¥ë ¥
 * KBë¼ì´í”„ìƒëª… ê¸°ë°˜ ì¸ì§€ ë° ì†Œí†µ ëŠ¥ë ¥ í‰ê°€
 */
import React from 'react';
import { motion } from 'framer-motion';
import { MessageCircle, AlertCircle, CheckCircle2, Info } from 'lucide-react';
â‹®----
import { useHealthAssessmentStore } from '@/stores/healthAssessmentStore';
import { ADL_OPTIONS } from '@/types/health';
import type { AdlLevel } from '@/types/health';
import RadioGroup, { type RadioOption } from '@/components/ui/RadioGroup';
â‹®----
// ì˜ì‚¬ì†Œí†µ í‰ê°€ ì˜µì…˜ ë³€í™˜
â‹®----
// í‰ê°€ ë ˆë²¨ë³„ ìƒì„¸ ì„¤ëª…
function getCommunicationDescription(level: AdlLevel): string
â‹®----
// í˜„ì¬ ì„ íƒëœ ë ˆë²¨ì— ë”°ë¥¸ ì¶”ê°€ ì •ë³´
â‹®----
{/* ì„¹ì…˜ í—¤ë” */}
â‹®----
{/* í‰ê°€ ì§ˆë¬¸ */}
â‹®----
{/* ì„ íƒëœ ë ˆë²¨ì— ë”°ë¥¸ ì¶”ê°€ ì •ë³´ */}
â‹®----
{/* ì˜ì‚¬ì†Œí†µ ì˜ì—­ë³„ ì„¸ë¶€ ì•ˆë‚´ */}
â‹®----
{/* í‰ê°€ ê°€ì´ë“œë¼ì¸ */}
â‹®----
{/* ì ìˆ˜ ì •ë³´ */}
â‹®----
{/* ì˜ˆì‹œ ìƒí™© */}
</file>

<file path="frontend/src/features/health/steps/AdlEatingStep.tsx">
/**
 * ADL í‰ê°€ - ì‹ì‚¬ í™œë™ ëŠ¥ë ¥
 * KBë¼ì´í”„ìƒëª… ê¸°ë°˜ ì‹ì‚¬ ëŠ¥ë ¥ í‰ê°€
 */
import React from 'react';
import { motion } from 'framer-motion';
import { Utensils, AlertCircle, CheckCircle2, Info } from 'lucide-react';
â‹®----
import { useHealthAssessmentStore } from '@/stores/healthAssessmentStore';
import { ADL_OPTIONS } from '@/types/health';
import type { AdlLevel } from '@/types/health';
import RadioGroup, { type RadioOption } from '@/components/ui/RadioGroup';
â‹®----
// ì‹ì‚¬ í‰ê°€ ì˜µì…˜ ë³€í™˜
â‹®----
// í‰ê°€ ë ˆë²¨ë³„ ìƒì„¸ ì„¤ëª…
function getEatingDescription(level: AdlLevel): string
â‹®----
// í˜„ì¬ ì„ íƒëœ ë ˆë²¨ì— ë”°ë¥¸ ì¶”ê°€ ì •ë³´
â‹®----
{/* ì„¹ì…˜ í—¤ë” */}
â‹®----
{/* í‰ê°€ ì§ˆë¬¸ */}
â‹®----
{/* ì„ íƒëœ ë ˆë²¨ì— ë”°ë¥¸ ì¶”ê°€ ì •ë³´ */}
â‹®----
{/* ì‹ì‚¬ ìœ í˜•ë³„ ì„¸ë¶€ ì•ˆë‚´ */}
â‹®----
{/* í‰ê°€ ê°€ì´ë“œë¼ì¸ */}
â‹®----
{/* ì ìˆ˜ ì •ë³´ */}
â‹®----
{/* ì˜ˆì‹œ ìƒí™© */}
</file>

<file path="frontend/src/features/health/steps/AdlMobilityStep.tsx">
/**
 * ADL í‰ê°€ - ê±·ê¸° í™œë™ ëŠ¥ë ¥
 * KBë¼ì´í”„ìƒëª… ê¸°ë°˜ ì´ë™ì„± í‰ê°€
 */
import React from 'react';
import { motion } from 'framer-motion';
import { Activity, AlertCircle, CheckCircle2 } from 'lucide-react';
â‹®----
import { useHealthAssessmentStore } from '@/stores/healthAssessmentStore';
import { ADL_OPTIONS } from '@/types/health';
import type { AdlLevel } from '@/types/health';
import RadioGroup, { type RadioOption } from '@/components/ui/RadioGroup';
â‹®----
// ì´ë™ì„± í‰ê°€ ì˜µì…˜ ë³€í™˜
â‹®----
// í‰ê°€ ë ˆë²¨ë³„ ìƒì„¸ ì„¤ëª…
function getMobilityDescription(level: AdlLevel): string
â‹®----
// í˜„ì¬ ì„ íƒëœ ë ˆë²¨ì— ë”°ë¥¸ ì¶”ê°€ ì •ë³´
â‹®----
{/* ì„¹ì…˜ í—¤ë” */}
â‹®----
{/* í‰ê°€ ì§ˆë¬¸ */}
â‹®----
{/* ì„ íƒëœ ë ˆë²¨ì— ë”°ë¥¸ ì¶”ê°€ ì •ë³´ */}
â‹®----
{/* í‰ê°€ ê°€ì´ë“œë¼ì¸ */}
â‹®----
{/* ì ìˆ˜ ì •ë³´ */}
â‹®----
{/* ì˜ˆì‹œ ìƒí™© */}
</file>

<file path="frontend/src/features/health/steps/AdlToiletStep.tsx">
/**
 * ADL í‰ê°€ - ë°°ë³€ í™œë™ ëŠ¥ë ¥
 * KBë¼ì´í”„ìƒëª… ê¸°ë°˜ í™”ì¥ì‹¤ ì´ìš© ëŠ¥ë ¥ í‰ê°€
 */
import React from 'react';
import { motion } from 'framer-motion';
import { Bath, AlertCircle, CheckCircle2, Info } from 'lucide-react';
â‹®----
import { useHealthAssessmentStore } from '@/stores/healthAssessmentStore';
import { ADL_OPTIONS } from '@/types/health';
import type { AdlLevel } from '@/types/health';
import RadioGroup, { type RadioOption } from '@/components/ui/RadioGroup';
â‹®----
// í™”ì¥ì‹¤ ì´ìš© í‰ê°€ ì˜µì…˜ ë³€í™˜
â‹®----
// í‰ê°€ ë ˆë²¨ë³„ ìƒì„¸ ì„¤ëª…
function getToiletDescription(level: AdlLevel): string
â‹®----
// í˜„ì¬ ì„ íƒëœ ë ˆë²¨ì— ë”°ë¥¸ ì¶”ê°€ ì •ë³´
â‹®----
{/* ì„¹ì…˜ í—¤ë” */}
â‹®----
{/* í‰ê°€ ì§ˆë¬¸ */}
â‹®----
{/* ì„ íƒëœ ë ˆë²¨ì— ë”°ë¥¸ ì¶”ê°€ ì •ë³´ */}
â‹®----
{/* í‰ê°€ ê°€ì´ë“œë¼ì¸ */}
â‹®----
{/* ì ìˆ˜ ì •ë³´ */}
â‹®----
{/* ì˜ˆì‹œ ìƒí™© */}
</file>

<file path="frontend/src/features/health/steps/BasicInfoStep.tsx">
/**
 * ê¸°ë³¸ ì •ë³´ ì…ë ¥ ë‹¨ê³„
 * í‰ê°€ ëŒ€ìƒìì˜ ê¸°ë³¸ ì •ë³´ ìˆ˜ì§‘
 */
import React from 'react';
import { motion } from 'framer-motion';
import { User, Calendar, UserCheck } from 'lucide-react';
â‹®----
import { useHealthAssessmentStore } from '@/stores/healthAssessmentStore';
import type { Gender } from '@/types/health';
import RadioGroup from '@/components/ui/RadioGroup';
â‹®----
// ì„±ë³„ ì˜µì…˜
â‹®----
// í‰ê°€ì ê´€ê³„ ì˜µì…˜
â‹®----
// í˜„ì¬ ì—°ë„ ê³„ì‚°
â‹®----
{/* íšŒì› ID (ì½ê¸° ì „ìš©) */}
â‹®----
{/* ì„±ë³„ ì„ íƒ */}
â‹®----
{/* ì¶œìƒë…„ë„ ì„ íƒ */}
â‹®----
{/* í‰ê°€ì ì´ë¦„ */}
â‹®----
{/* í‰ê°€ìì™€ì˜ ê´€ê³„ */}
â‹®----
{/* ì•ˆë‚´ ë©”ì‹œì§€ */}
</file>

<file path="frontend/src/features/health/steps/LtciGradeStep.tsx">
/**
 * ì¥ê¸°ìš”ì–‘ë³´í—˜ ë“±ê¸‰ ì…ë ¥ ë‹¨ê³„
 * ì„ íƒì‚¬í•­ - ê¸°ì¡´ ë“±ê¸‰ì´ ìˆëŠ” ê²½ìš°ë§Œ
 */
import React from 'react';
import { motion } from 'framer-motion';
import { Shield, Info } from 'lucide-react';
â‹®----
import { useHealthAssessmentStore } from '@/stores/healthAssessmentStore';
import { LTCI_GRADES } from '@/types/health';
import type { LtciGrade } from '@/types/health';
import RadioGroup, { type RadioOption } from '@/components/ui/RadioGroup';
â‹®----
// ì¥ê¸°ìš”ì–‘ë³´í—˜ ë“±ê¸‰ ì˜µì…˜ ë³€í™˜
â‹®----
{/* ì„¹ì…˜ í—¤ë” */}
â‹®----
{/* ì•ˆë‚´ ë©”ì‹œì§€ */}
â‹®----
{/* ë“±ê¸‰ ì„ íƒ */}
â‹®----
{/* ì„ íƒëœ ë“±ê¸‰ ì •ë³´ */}
â‹®----
{/* ë“±ê¸‰ë³„ ì„¤ëª… */}
â‹®----
{/* ì‹ ì²­ ì•ˆë‚´ */}
</file>

<file path="frontend/src/features/health/steps/ReviewStep.tsx">
/**
 * ê²€í†  ë° ì œì¶œ ë‹¨ê³„
 * ì…ë ¥ëœ ëª¨ë“  ì •ë³´ í™•ì¸ ë° í‰ê°€ ì œì¶œ
 */
import React, { useState, useMemo } from 'react';
import { motion } from 'framer-motion';
import { 
  CheckCircle2, 
  AlertCircle, 
  User, 
  Activity, 
  Utensils, 
  Bath, 
  MessageCircle,
  Shield,
  FileText,
  Loader2,
  Download
} from 'lucide-react';
â‹®----
import { useHealthAssessmentStore } from '@/stores/healthAssessmentStore';
import { HealthAssessmentApi } from '@/services/healthApi';
import { ADL_OPTIONS, LTCI_GRADES, CARE_TARGET_STATUS, MEAL_TYPES } from '@/types/health';
import Button from '@/components/ui/Button';
import Card, { CardHeader, CardTitle, CardContent } from '@/components/ui/Card';
â‹®----
interface ReviewStepProps {
  onComplete?: (assessmentId: number) => void;
}
â‹®----
// ADL ì ìˆ˜ ê³„ì‚°
â‹®----
// ì¼€ì–´ ë“±ê¸‰ ì˜ˆìƒ (ê°„ë‹¨í•œ ë¡œì§)
â‹®----
// í¼ ë°ì´í„° ê²€ì¦
â‹®----
// í‰ê°€ ì œì¶œ
const handleSubmit = async () =>
â‹®----
// ì„±ê³µ í›„ ì²˜ë¦¬
â‹®----
// ì„±ê³µ í™”ë©´
â‹®----
{/* ì„¹ì…˜ í—¤ë” */}
â‹®----
{/* ì™„ì„±ë„ í‘œì‹œ */}
â‹®----
{/* ê¸°ë³¸ ì •ë³´ ìš”ì•½ */}
â‹®----
{/* ADL í‰ê°€ ìš”ì•½ */}
â‹®----
{/* ADL ì´ì  */}
â‹®----
{/* ì¶”ê°€ ì •ë³´ ìš”ì•½ */}
â‹®----
{/* ì˜¤ë¥˜ ë©”ì‹œì§€ */}
â‹®----
{/* ì œì¶œ ë²„íŠ¼ */}
â‹®----
{/* ì•ˆë‚´ ë©”ì‹œì§€ */}
</file>

<file path="frontend/src/features/health/HealthAssessmentWizard.tsx">
/**
 * ê±´ê°• ìƒíƒœ í‰ê°€ ì²´í¬ë¦¬ìŠ¤íŠ¸ ë§ˆë²•ì‚¬ ì»´í¬ë„ŒíŠ¸
 * KBë¼ì´í”„ìƒëª… ê¸°ë°˜ ë‹¨ê³„ë³„ ëŒë´„ì§€ìˆ˜ í‰ê°€
 */
import React, { useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { ChevronLeft, ChevronRight, AlertCircle, CheckCircle2 } from 'lucide-react';
â‹®----
import { useHealthAssessmentStore } from '@/stores/healthAssessmentStore';
import Button from '@/components/ui/Button';
import Card, { CardHeader, CardTitle, CardDescription, CardContent, CardFooter } from '@/components/ui/Card';
import ProgressBar from '@/components/ui/ProgressBar';
â‹®----
// ë‹¨ê³„ë³„ ì»´í¬ë„ŒíŠ¸ë“¤
import BasicInfoStep from './steps/BasicInfoStep';
import AdlMobilityStep from './steps/AdlMobilityStep';
import AdlEatingStep from './steps/AdlEatingStep';
import AdlToiletStep from './steps/AdlToiletStep';
import AdlCommunicationStep from './steps/AdlCommunicationStep';
import LtciGradeStep from './steps/LtciGradeStep';
import AdditionalInfoStep from './steps/AdditionalInfoStep';
import ReviewStep from './steps/ReviewStep';
â‹®----
interface HealthAssessmentWizardProps {
  onComplete?: (assessmentId: number) => void;
  onCancel?: () => void;
  memberId: string;
}
â‹®----
// ì´ˆê¸°í™” ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë°ì´í„° ë³µì›
â‹®----
// í˜„ì¬ ë‹¨ê³„ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
const renderCurrentStep = () =>
â‹®----
// ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰ í•¸ë“¤ëŸ¬
const handleNext = () =>
â‹®----
// ì—ëŸ¬ê°€ ìˆëŠ”ì§€ í™•ì¸
â‹®----
{/* í—¤ë” */}
â‹®----
{/* ì§„í–‰ë¥  í‘œì‹œ */}
â‹®----
{/* ë©”ì¸ ì¹´ë“œ */}
â‹®----
{/* ì—ëŸ¬ í‘œì‹œ */}
â‹®----
{/* í˜„ì¬ ë‹¨ê³„ ì»´í¬ë„ŒíŠ¸ */}
â‹®----
{/* ì´ì „ ë²„íŠ¼ */}
â‹®----
{/* ì¤‘ê°„ ì •ë³´ */}
â‹®----
{/* ë‹¤ìŒ/ì™„ë£Œ ë²„íŠ¼ */}
â‹®----
{/* í•˜ë‹¨ ì•¡ì…˜ ë²„íŠ¼ë“¤ */}
â‹®----
resetForm();
onCancel?.();
â‹®----
{/* ë„ì›€ë§ ì •ë³´ */}
</file>

<file path="frontend/src/hooks/useHealthAssessmentWizard.ts">
import { useState, useCallback, useEffect, useMemo } from 'react';
import { useHealthAssessmentStore } from '../stores/healthAssessmentStore';
import { healthApi } from '../services/healthApi';
import type { 
  HealthAssessmentCreateRequest, 
  AdlLevel,
  LtciGrade,
  Gender
} from '../types/health';
â‹®----
// ì»¤ìŠ¤í…€ íƒ€ì… ì •ì˜
interface ValidationErrors {
  [key: string]: string;
}
â‹®----
interface StepValidationResult {
  isValid: boolean;
  errors: ValidationErrors;
  step: number;
}
â‹®----
/**
 * ê±´ê°• í‰ê°€ ìœ„ì €ë“œ ì»¤ìŠ¤í…€ í›…
 * ìƒíƒœê´€ë¦¬ ë¡œì§ ë¶„ë¦¬ë¡œ ì»´í¬ë„ŒíŠ¸ ë³µì¡ë„ ê°ì†Œ
 * ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì œê³µ
 */
export const useHealthAssessmentWizard = () =>
â‹®----
// Zustand ìŠ¤í† ì–´ ìƒíƒœ
â‹®----
// ë¡œì»¬ ìƒíƒœ
â‹®----
// ë‹¨ê³„ë³„ í•„ìˆ˜ í•„ë“œ ì •ì˜
â‹®----
0: ['memberId', 'gender', 'birthYear'], // ê¸°ë³¸ ì •ë³´
1: ['mobilityLevel'], // ì´ë™ ëŠ¥ë ¥
2: ['eatingLevel'], // ì‹ì‚¬ ëŠ¥ë ¥
3: ['toiletLevel'], // ë°°ë³€ ëŠ¥ë ¥
4: ['communicationLevel'], // ì˜ì‚¬ì†Œí†µ ëŠ¥ë ¥
5: ['ltciGrade'], // ì¥ê¸°ìš”ì–‘ë“±ê¸‰
6: [] // ì¶”ê°€ ì •ë³´ (ì„ íƒì‚¬í•­)
â‹®----
// ì§„í–‰ë¥  ê³„ì‚°
â‹®----
// í˜„ì¬ ë‹¨ê³„ ìœ íš¨ì„± ê²€ì¦
â‹®----
// í•„ìˆ˜ í•„ë“œ ê²€ì¦
â‹®----
// ë‹¨ê³„ë³„ íŠ¹ë³„ ê²€ì¦
â‹®----
// ê²€ì¦ ê²°ê³¼ ìºì‹œ
â‹®----
// ë‹¨ê³„ë³„ íŠ¹ë³„ ê²€ì¦ ë¡œì§
â‹®----
case 0: // ê¸°ë³¸ ì •ë³´
â‹®----
case 1: // ì´ë™ ëŠ¥ë ¥
â‹®----
case 2: // ì‹ì‚¬ ëŠ¥ë ¥
â‹®----
case 3: // ë°°ë³€ ëŠ¥ë ¥
â‹®----
case 4: // ì˜ì‚¬ì†Œí†µ ëŠ¥ë ¥
â‹®----
case 5: // ì¥ê¸°ìš”ì–‘ë“±ê¸‰
â‹®----
// ë‹¤ìŒ ë‹¨ê³„ë¡œ ì´ë™
â‹®----
// ìë™ ì €ì¥ (ë°±ê·¸ë¼ìš´ë“œ)
â‹®----
// ìë™ ì €ì¥ ì‹¤íŒ¨ëŠ” ì§„í–‰ì„ ë§‰ì§€ ì•ŠìŒ
â‹®----
// ë‹¤ìŒ ë‹¨ê³„ë¡œ ì´ë™
â‹®----
// ì´ì „ ë‹¨ê³„ë¡œ ì´ë™
â‹®----
// íŠ¹ì • ë‹¨ê³„ë¡œ ì´ë™
â‹®----
// ìºì‹œëœ ê²€ì¦ ê²°ê³¼ê°€ ìˆìœ¼ë©´ ì ìš©
â‹®----
// í¼ ë°ì´í„° ì—…ë°ì´íŠ¸
â‹®----
// í•´ë‹¹ í•„ë“œì˜ ì—ëŸ¬ ì œê±°
â‹®----
// ì§„í–‰ìƒí™© ì €ì¥ (Draft)
â‹®----
// ì„ì‹œ ì €ì¥ API í˜¸ì¶œ (ì‹¤ì œ APIê°€ ì—†ìœ¼ë¯€ë¡œ ì£¼ì„ ì²˜ë¦¬)
// await healthApi.saveDraft(formData);
â‹®----
// ìµœì¢… ì œì¶œ
â‹®----
// ì „ì²´ í¼ ê²€ì¦
â‹®----
// ì‹¤ì œ API í˜¸ì¶œ (healthApiê°€ ì—†ìœ¼ë¯€ë¡œ ì£¼ì„ ì²˜ë¦¬)
// const result = await healthApi.createAssessment(formData);
â‹®----
// ì„±ê³µ ì‹œ í¼ ì´ˆê¸°í™”
â‹®----
// í¼ ì´ˆê¸°í™”
â‹®----
// ìŠ¤í† ì–´ ì´ˆê¸°í™”ëŠ” ìŠ¤í† ì–´ì—ì„œ ì œê³µí•˜ëŠ” ë©”ì„œë“œ ì‚¬ìš©
â‹®----
// ìë™ ì €ì¥ í† ê¸€
â‹®----
// í˜„ì¬ ë‹¨ê³„ê°€ ì™„ë£Œ ê°€ëŠ¥í•œì§€ í™•ì¸
â‹®----
// ìºì‹œê°€ ì—†ìœ¼ë©´ ì‹¤ì‹œê°„ ê²€ì¦
â‹®----
// ì „ì²´ í¼ì´ ì œì¶œ ê°€ëŠ¥í•œì§€ í™•ì¸
â‹®----
// í•„ìˆ˜ ë‹¨ê³„ ì™„ë£Œ í™•ì¸ (0-4ë‹¨ê³„)
â‹®----
// ìë™ ì €ì¥ íš¨ê³¼
â‹®----
}, 30000); // 30ì´ˆ í›„ ìë™ ì €ì¥
â‹®----
// í˜ì´ì§€ ì´íƒˆ ì‹œ ê²½ê³ 
â‹®----
const handleBeforeUnload = (e: BeforeUnloadEvent) =>
â‹®----
// ìƒíƒœ
â‹®----
// ì•¡ì…˜
â‹®----
// ìœ í‹¸ë¦¬í‹°
</file>

<file path="frontend/src/services/healthApi.ts">
/**
 * ê±´ê°• ìƒíƒœ í‰ê°€ API ì„œë¹„ìŠ¤
 */
import axios from 'axios';
import type { 
  HealthAssessment, 
  HealthAssessmentCreateRequest, 
  CareGradeResult 
} from '@/types/health';
â‹®----
// ìš”ì²­ ì¸í„°ì…‰í„°: JWT í† í° ìë™ ì¶”ê°€
â‹®----
// ì‘ë‹µ ì¸í„°ì…‰í„°: ì—ëŸ¬ ì²˜ë¦¬
â‹®----
// í† í° ë§Œë£Œ ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
â‹®----
export class HealthAssessmentApi
â‹®----
/**
   * ìƒˆë¡œìš´ ê±´ê°• í‰ê°€ ìƒì„±
   */
static async createAssessment(request: HealthAssessmentCreateRequest): Promise<HealthAssessment>
â‹®----
/**
   * íšŒì›ë³„ ìµœì‹  ê±´ê°• í‰ê°€ ì¡°íšŒ
   */
static async getLatestAssessment(memberId: string): Promise<HealthAssessment | null>
â‹®----
return null; // í‰ê°€ ê¸°ë¡ì´ ì—†ëŠ” ê²½ìš°
â‹®----
/**
   * íšŒì›ë³„ ê±´ê°• í‰ê°€ ì´ë ¥ ì¡°íšŒ
   */
static async getAssessmentHistory(memberId: string): Promise<HealthAssessment[]>
â‹®----
/**
   * ê±´ê°• í‰ê°€ ìˆ˜ì •
   */
static async updateAssessment(
    assessmentId: number, 
    request: Partial<HealthAssessmentCreateRequest>
): Promise<HealthAssessment>
â‹®----
/**
   * ì¼€ì–´ ë“±ê¸‰ ì¬ê³„ì‚°
   */
static async calculateCareGrade(assessmentId: number): Promise<CareGradeResult>
â‹®----
/**
   * ê±´ê°• í‰ê°€ ìš”ì•½ ì¡°íšŒ
   */
static async getAssessmentSummary(assessmentId: number): Promise<string>
â‹®----
/**
   * í‰ê°€ ì™„ì„±ë„ ì²´í¬
   */
static async checkCompleteness(assessmentId: number): Promise<
â‹®----
/**
   * ê±´ê°• í‰ê°€ ì‚­ì œ (ê´€ë¦¬ìë§Œ)
   */
static async deleteAssessment(assessmentId: number): Promise<void>
</file>

<file path="frontend/src/stores/facilityStore.ts">
/**
 * ì‹œì„¤ ê²€ìƒ‰ ë° ë§¤ì¹­ ìƒíƒœ ê´€ë¦¬ (ìµœì í™”)
 * Zustandë¥¼ ì‚¬ìš©í•œ ìµœì†Œí•œì˜ ì „ì—­ ìƒíƒœ ê´€ë¦¬
 * ë¡œì»¬ ìƒíƒœë¡œ ì²˜ë¦¬ ê°€ëŠ¥í•œ ê²ƒë“¤ì€ ë¶„ë¦¬í•˜ì—¬ ì„±ëŠ¥ ìµœì í™”
 */
import { create } from 'zustand';
import { devtools, subscribeWithSelector } from 'zustand/middleware';
import { immer } from 'zustand/middleware/immer';
â‹®----
// ì‹œì„¤ ê´€ë ¨ íƒ€ì… ì •ì˜
export interface FacilityProfile {
  id: number;
  facilityName: string;
  facilityType: string;
  facilityGrade: string;
  address: string;
  phoneNumber: string;
  totalCapacity: number;
  currentOccupancy: number;
  monthlyBasicFee: number | null;
  availableCareGrades: number[];
  specialties: string[];
  latitude: number | null;
  longitude: number | null;
  description?: string;
  imageUrl?: string;
  operatingHours?: string;
  facilities?: string[];
  certifications?: string[];
  createdAt: string;
}
â‹®----
export interface FacilityRecommendation {
  facility: FacilityProfile;
  matchScore: number;
  recommendationReason: string;
  estimatedCost?: number;
}
â‹®----
export interface FacilitySearchFilters {
  facilityType?: string;
  facilityGrade?: string;
  region?: string;
  careGradeLevel?: number;
  maxMonthlyFee?: number;
  minFacilityGrade?: string;
  specialties?: string[];
  maxDistanceKm?: number;
  hasAvailableSlots?: boolean;
}
â‹®----
export interface FacilityMatchingPreference {
  preferredRegions: Set<string>;
  preferredFacilityTypes: Set<string>;
  maxMonthlyFee: number | null;
  minFacilityGrade: string;
  requiredSpecialties: Set<string>;
  maxDistanceKm: number | null;
  prioritizeAvailability: boolean;
  prioritizeCost: boolean;
  prioritizeQuality: boolean;
}
â‹®----
export interface UserMatchingHistory {
  id: number;
  facilityId: number;
  facilityName: string;
  matchScore: number;
  isViewed: boolean;
  isContacted: boolean;
  isVisited: boolean;
  isSelected: boolean;
  outcome?: 'SUCCESSFUL' | 'FAILED' | 'PENDING';
  satisfactionScore?: number;
  feedback?: string;
  createdAt: string;
}
â‹®----
// ìµœì†Œí•œì˜ ì „ì—­ ìƒíƒœë§Œ ê´€ë¦¬
interface FacilityState {
  // ê²€ìƒ‰ ê²°ê³¼ (ì „ì—­ ê³µìœ  í•„ìš”)
  searchResults: FacilityProfile[];
  
  // ì¶”ì²œ ê²°ê³¼ (ì „ì—­ ê³µìœ  í•„ìš”)
  recommendations: FacilityRecommendation[];
  
  // í˜„ì¬ ì„ íƒëœ ì‹œì„¤ (ìƒì„¸ ëª¨ë‹¬ìš©)
  selectedFacility: FacilityProfile | null;
  
  // ê²€ìƒ‰ í•„í„° (ì „ì—­ ê³µìœ  í•„ìš”)
  searchFilters: FacilitySearchFilters;
  
  // ë§¤ì¹­ ì„ í˜¸ë„ (ì „ì—­ ê³µìœ  í•„ìš”)
  matchingPreference: FacilityMatchingPreference;
  
  // ì‚¬ìš©ì ë§¤ì¹­ ì´ë ¥ (ì „ì—­ ê³µìœ  í•„ìš”)
  userHistory: UserMatchingHistory[];
  
  // ë¡œë”© ìƒíƒœë“¤
  isSearching: boolean;
  isLoadingRecommendations: boolean;
  isLoadingHistory: boolean;
  
  // ì—ëŸ¬ ìƒíƒœ
  searchError: string | null;
  recommendationError: string | null;
  
  // UI ìƒíƒœ
  isDetailModalOpen: boolean;
  isRecommendationModalOpen: boolean;
  isMatchingFormOpen: boolean;
}
â‹®----
// ê²€ìƒ‰ ê²°ê³¼ (ì „ì—­ ê³µìœ  í•„ìš”)
â‹®----
// ì¶”ì²œ ê²°ê³¼ (ì „ì—­ ê³µìœ  í•„ìš”)
â‹®----
// í˜„ì¬ ì„ íƒëœ ì‹œì„¤ (ìƒì„¸ ëª¨ë‹¬ìš©)
â‹®----
// ê²€ìƒ‰ í•„í„° (ì „ì—­ ê³µìœ  í•„ìš”)
â‹®----
// ë§¤ì¹­ ì„ í˜¸ë„ (ì „ì—­ ê³µìœ  í•„ìš”)
â‹®----
// ì‚¬ìš©ì ë§¤ì¹­ ì´ë ¥ (ì „ì—­ ê³µìœ  í•„ìš”)
â‹®----
// ë¡œë”© ìƒíƒœë“¤
â‹®----
// ì—ëŸ¬ ìƒíƒœ
â‹®----
// UI ìƒíƒœ
â‹®----
interface FacilityActions {
  // ê²€ìƒ‰ ê´€ë ¨
  searchFacilities: (filters: FacilitySearchFilters) => Promise<void>;
  updateSearchFilters: (filters: Partial<FacilitySearchFilters>) => void;
  clearSearchResults: () => void;
  
  // ì¶”ì²œ ê´€ë ¨
  getRecommendations: (memberId: number, coordinatorId?: string) => Promise<void>;
  updateMatchingPreference: (preference: Partial<FacilityMatchingPreference>) => void;
  clearRecommendations: () => void;
  
  // ì‹œì„¤ ì„ íƒ ë° ìƒì„¸
  selectFacility: (facility: FacilityProfile) => void;
  clearSelectedFacility: () => void;
  
  // ì‚¬ìš©ì í–‰ë™ ì¶”ì 
  trackFacilityView: (facilityId: number) => Promise<void>;
  trackFacilityContact: (facilityId: number) => Promise<void>;
  trackFacilityVisit: (facilityId: number) => Promise<void>;
  completeMatching: (facilityId: number, outcome: string, satisfactionScore?: number, feedback?: string) => Promise<void>;
  
  // ì´ë ¥ ê´€ë¦¬
  loadUserHistory: () => Promise<void>;
  clearUserHistory: () => void;
  
  // UI ìƒíƒœ ê´€ë¦¬
  openDetailModal: () => void;
  closeDetailModal: () => void;
  openRecommendationModal: () => void;
  closeRecommendationModal: () => void;
  openMatchingForm: () => void;
  closeMatchingForm: () => void;
  
  // ì—ëŸ¬ ê´€ë¦¬
  setSearchError: (error: string | null) => void;
  setRecommendationError: (error: string | null) => void;
  clearAllErrors: () => void;
  
  // ì´ˆê¸°í™”
  resetFacilityState: () => void;
}
â‹®----
// ê²€ìƒ‰ ê´€ë ¨
â‹®----
// ì¶”ì²œ ê´€ë ¨
â‹®----
// ì‹œì„¤ ì„ íƒ ë° ìƒì„¸
â‹®----
// ì‚¬ìš©ì í–‰ë™ ì¶”ì 
â‹®----
// ì´ë ¥ ê´€ë¦¬
â‹®----
// UI ìƒíƒœ ê´€ë¦¬
â‹®----
// ì—ëŸ¬ ê´€ë¦¬
â‹®----
// ì´ˆê¸°í™”
â‹®----
type FacilityStore = FacilityState & FacilityActions;
â‹®----
// ì´ˆê¸° ìƒíƒœ ì •ì˜
â‹®----
// API í˜¸ì¶œ í•¨ìˆ˜ë“¤
â‹®----
async searchFacilities(filters: FacilitySearchFilters): Promise<FacilityProfile[]>
â‹®----
async getRecommendations(memberId: number, preference: FacilityMatchingPreference, coordinatorId?: string): Promise<FacilityRecommendation[]>
â‹®----
async trackFacilityAction(facilityId: number, action: 'contact' | 'visit'): Promise<void>
â‹®----
async completeMatching(facilityId: number, outcome: string, satisfactionScore?: number, feedback?: string): Promise<void>
â‹®----
async getUserHistory(): Promise<UserMatchingHistory[]>
â‹®----
// Zustand ìŠ¤í† ì–´ ìƒì„±
â‹®----
// ê²€ìƒ‰ ê´€ë ¨ ì•¡ì…˜ë“¤
â‹®----
// ì¶”ì²œ ê´€ë ¨ ì•¡ì…˜ë“¤
â‹®----
// ì‹œì„¤ ì„ íƒ ë° ìƒì„¸
â‹®----
// ì‚¬ìš©ì í–‰ë™ ì¶”ì 
â‹®----
// ì¡°íšŒëŠ” ë³„ë„ API í˜¸ì¶œ ì—†ì´ ë¡œì»¬ì—ì„œ ì²˜ë¦¬ (ì‹¤ì œ ì¶”ì ì€ ì‹œì„¤ ìƒì„¸ ì¡°íšŒ ì‹œ ìë™ ì²˜ë¦¬ë¨)
â‹®----
// ì„±ê³µ ì‹œ ì´ë ¥ ìƒˆë¡œê³ ì¹¨
â‹®----
// ì„±ê³µ ì‹œ ì´ë ¥ ìƒˆë¡œê³ ì¹¨
â‹®----
// ì„±ê³µ ì‹œ ì´ë ¥ ìƒˆë¡œê³ ì¹¨
â‹®----
// ì´ë ¥ ê´€ë¦¬
â‹®----
// UI ìƒíƒœ ê´€ë¦¬
â‹®----
// ì—ëŸ¬ ê´€ë¦¬
â‹®----
// ì´ˆê¸°í™”
â‹®----
name: 'facility-store', // localStorageì— ì €ì¥ë  í‚¤
â‹®----
name: 'FacilityStore', // Redux DevToolsì—ì„œ í‘œì‹œë  ì´ë¦„
â‹®----
// ì„ íƒì  êµ¬ë…ì„ ìœ„í•œ ì…€ë ‰í„°ë“¤
export const useFacilitySearchResults = ()
export const useFacilityRecommendations = ()
export const useSelectedFacility = ()
export const useFacilityLoadingStates = () => useFacilityStore((state) => (
export const useFacilityErrors = () => useFacilityStore((state) => (
</file>

<file path="frontend/src/types/health.ts">
/**
 * ê±´ê°• ìƒíƒœ í‰ê°€ ê´€ë ¨ íƒ€ì… ì •ì˜
 * KBë¼ì´í”„ìƒëª… ê¸°ë°˜ ëŒë´„ì§€ìˆ˜ ì²´í¬ ì‹œìŠ¤í…œ
 */
â‹®----
// === ADL í‰ê°€ ë ˆë²¨ ===
export type AdlLevel = 1 | 2 | 3;
â‹®----
export interface AdlOptions {
  1: string;
  2: string;
  3: string;
}
â‹®----
// === ì¥ê¸°ìš”ì–‘ë³´í—˜ ë“±ê¸‰ ===
export type LtciGrade = 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8;
â‹®----
// === ëŒë´„ëŒ€ìƒì ìƒíƒœ ===
export type CareTargetStatus = 1 | 2 | 3 | 4;
â‹®----
// === ì‹ì‚¬í˜•íƒœ ===
export type MealType = 1 | 2 | 3;
â‹®----
// === ì„±ë³„ ===
export type Gender = 'MALE' | 'FEMALE' | 'M' | 'F';
â‹®----
// === ê±´ê°• í‰ê°€ ìƒì„± ìš”ì²­ ===
export interface HealthAssessmentCreateRequest {
  memberId: string;
  gender?: Gender;
  birthYear?: number;
  
  // ADL í‰ê°€ (í•„ìˆ˜)
  mobilityLevel: AdlLevel;
  eatingLevel: AdlLevel;
  toiletLevel: AdlLevel;
  communicationLevel: AdlLevel;
  
  // ì¶”ê°€ í‰ê°€ í•­ëª©
  ltciGrade?: LtciGrade;
  careTargetStatus?: CareTargetStatus;
  mealType?: MealType;
  diseaseTypes?: string;
  
  // ì¶”ê°€ ì •ë³´
  notes?: string;
  assessorName?: string;
  assessorRelation?: string;
}
â‹®----
// ADL í‰ê°€ (í•„ìˆ˜)
â‹®----
// ì¶”ê°€ í‰ê°€ í•­ëª©
â‹®----
// ì¶”ê°€ ì •ë³´
â‹®----
// === ê±´ê°• í‰ê°€ ì‘ë‹µ ===
export interface HealthAssessment {
  id: number;
  memberId: string;
  gender?: string;
  birthYear?: number;
  
  // ADL í‰ê°€
  mobilityLevel: number;
  eatingLevel: number;
  toiletLevel: number;
  communicationLevel: number;
  
  // ê³„ì‚°ëœ ì ìˆ˜
  adlScore: number;
  overallCareGrade: string;
  careGradeLevel: number;
  
  // ì¶”ê°€ í‰ê°€ í•­ëª©
  ltciGrade?: number;
  careTargetStatus?: number;
  mealType?: number;
  diseaseTypes?: string;
  
  // ë©”íƒ€ ì •ë³´
  assessmentDate: string;
  createdAt: string;
  updatedAt: string;
  
  // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê²°ê³¼
  specializedCareType: string;
  estimatedMonthlyCostRange: string;
  
  notes?: string;
  assessorName?: string;
  assessorRelation?: string;
}
â‹®----
// ADL í‰ê°€
â‹®----
// ê³„ì‚°ëœ ì ìˆ˜
â‹®----
// ì¶”ê°€ í‰ê°€ í•­ëª©
â‹®----
// ë©”íƒ€ ì •ë³´
â‹®----
// ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê²°ê³¼
â‹®----
// === ì¼€ì–´ ë“±ê¸‰ ê²°ê³¼ ===
export interface CareGradeResult {
  gradeLevel: number;
  gradeName: string;
  careType: string;
  description: string;
  recommendedFacilityTypes: string[];
  estimatedMonthlyCost: {
    min: number;
    max: number;
    currency: string;
  };
}
â‹®----
// === ì²´í¬ë¦¬ìŠ¤íŠ¸ UI ìƒíƒœ ===
export interface ChecklistStep {
  id: string;
  title: string;
  description: string;
  isRequired: boolean;
  isCompleted: boolean;
  validationErrors?: string[];
}
â‹®----
export interface ChecklistState {
  currentStep: number;
  totalSteps: number;
  steps: ChecklistStep[];
  formData: Partial<HealthAssessmentCreateRequest>;
  isSubmitting: boolean;
  errors: Record<string, string>;
}
â‹®----
// === ADL í‰ê°€ ì˜µì…˜ ì •ì˜ ===
â‹®----
// === ì¥ê¸°ìš”ì–‘ë³´í—˜ ë“±ê¸‰ ì •ì˜ ===
â‹®----
// === ëŒë´„ëŒ€ìƒì ìƒíƒœ ì •ì˜ ===
â‹®----
// === ì‹ì‚¬í˜•íƒœ ì •ì˜ ===
</file>

<file path="frontend/src/App.css">
/**
 * ë©”ì¸ ì•± ìŠ¤íƒ€ì¼
 * 'elderberry' í…Œë§ˆ ê¸°ë°˜ ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼
 */
â‹®----
/* Tailwind CSS ì„í¬íŠ¸ */
@tailwind base;
@tailwind components;
@tailwind utilities;
â‹®----
/* ì „ì—­ ìŠ¤íƒ€ì¼ */
@layer base {
â‹®----
html {
â‹®----
body {
â‹®----
/* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§ */
::-webkit-scrollbar {
â‹®----
::-webkit-scrollbar-track {
â‹®----
@apply bg-elderberry-100;
â‹®----
::-webkit-scrollbar-thumb {
â‹®----
::-webkit-scrollbar-thumb:hover {
â‹®----
@apply bg-elderberry-400;
â‹®----
/* ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼ */
@layer components {
â‹®----
/* í¼ ìš”ì†Œ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
.form-input {
â‹®----
.form-input:focus {
â‹®----
/* ì¹´ë“œ ê·¸ë¦¼ì íš¨ê³¼ */
.card-shadow {
â‹®----
.card-shadow-lg {
â‹®----
/* ë²„íŠ¼ í˜¸ë²„ íš¨ê³¼ */
.btn-elderberry {
â‹®----
.btn-elderberry:hover {
â‹®----
/* ê·¸ë¼ë°ì´ì…˜ ë°°ê²½ */
.gradient-elderberry {
â‹®----
/* ì• ë‹ˆë©”ì´ì…˜ í´ë˜ìŠ¤ */
.fade-in {
â‹®----
.slide-up {
â‹®----
.bounce-gentle {
â‹®----
/* ìœ í‹¸ë¦¬í‹° ìŠ¤íƒ€ì¼ */
@layer utilities {
â‹®----
/* í…ìŠ¤íŠ¸ ê·¸ë¼ë°ì´ì…˜ */
.text-gradient-elderberry {
â‹®----
/* ë°˜ì‘í˜• ê·¸ë¦¬ë“œ */
.grid-responsive {
â‹®----
/* ì¤‘ì•™ ì •ë ¬ ì»¨í…Œì´ë„ˆ */
.container-center {
â‹®----
/* ì„¹ì…˜ íŒ¨ë”© */
.section-padding {
â‹®----
/* ì• ë‹ˆë©”ì´ì…˜ ì •ì˜ */
â‹®----
/* ì¸ì‡„ ìŠ¤íƒ€ì¼ */
â‹®----
.no-print {
â‹®----
.card-shadow,
â‹®----
/* ë‹¤í¬ëª¨ë“œ ëŒ€ì‘ (ë‚˜ì¤‘ì— ì¶”ê°€í•  ë•Œë¥¼ ìœ„í•´) */
â‹®----
:root {
â‹®----
/* ë‹¤í¬ëª¨ë“œ ìƒ‰ìƒ ë³€ìˆ˜ë“¤ (í•„ìš”ì‹œ ì¶”ê°€) */
â‹®----
/* ì ‘ê·¼ì„± ê°œì„  */
â‹®----
*,
â‹®----
/* í¬ì»¤ìŠ¤ ìŠ¤íƒ€ì¼ ê°œì„  */
:focus-visible {
â‹®----
/* ì„ íƒ ì˜ì—­ ìŠ¤íƒ€ì¼ */
::selection {
</file>

<file path="frontend/src/main.tsx">
/**
 * React ì•± ì§„ì…ì 
 * Vite + React 18 ê¸°ë°˜
 */
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.tsx'
â‹®----
// ì „ì—­ ìŠ¤íƒ€ì¼ ë¶ˆëŸ¬ì˜¤ê¸°
â‹®----
// React 18 ë£¨íŠ¸ ìƒì„± ë° ë Œë”ë§
</file>

<file path="frontend/src/vite-env.d.ts">
/// <reference types="vite/client" />
â‹®----
// Vite í™˜ê²½ ë³€ìˆ˜ íƒ€ì… ì •ì˜
interface ImportMetaEnv {
  readonly VITE_API_BASE_URL: string
  readonly VITE_WS_URL: string
  readonly VITE_KAKAO_API_KEY: string
  readonly VITE_USE_FREE_MAP: string
  readonly VITE_GITHUB_REPO_OWNER: string
  readonly VITE_GITHUB_REPO_NAME: string
  readonly VITE_DEV_MODE: string
  readonly VITE_LOG_LEVEL: string
}
â‹®----
interface ImportMeta {
  readonly env: ImportMetaEnv
}
</file>

<file path="frontend/postcss.config.js">

</file>

<file path="frontend/tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,

    /* Path mapping */
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}
</file>

<file path="frontend/tsconfig.node.json">
{
  "compilerOptions": {
    "composite": true,
    "skipLibCheck": true,
    "module": "ESNext",
    "moduleResolution": "bundler",
    "allowSyntheticDefaultImports": true
  },
  "include": ["vite.config.ts"]
}
</file>

<file path="frontend/vite.config.ts">
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
â‹®----
// https://vitejs.dev/config/
</file>

<file path="gradle/wrapper/gradle-wrapper.properties">
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-8.10.2-bin.zip
networkTimeout=10000
validateDistributionUrl=true
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
</file>

<file path="src/main/java/com/globalcarelink/auth/dto/EnhancedTokenResponse.java">
/**
 * í–¥ìƒëœ í† í° ì‘ë‹µ DTO
 * ì•¡ì„¸ìŠ¤ í† í°ê³¼ ë¦¬í”„ë ˆì‹œ í† í° ì •ë³´ë¥¼ í¬í•¨
 */
â‹®----
public class EnhancedTokenResponse {
â‹®----
/**
     * ì•¡ì„¸ìŠ¤ í† í°
     */
â‹®----
/**
     * ë¦¬í”„ë ˆì‹œ í† í°
     */
â‹®----
/**
     * í† í° íƒ€ì… (Bearer)
     */
â‹®----
/**
     * ì•¡ì„¸ìŠ¤ í† í° ë§Œë£Œ ì‹œê°„
     */
â‹®----
/**
     * ë¦¬í”„ë ˆì‹œ í† í° ë§Œë£Œ ì‹œê°„
     */
â‹®----
/**
     * ì‚¬ìš©ì ì´ë©”ì¼
     */
â‹®----
/**
     * ì•¡ì„¸ìŠ¤ í† í° ìœ íš¨ ê¸°ê°„ (ì´ˆ)
     */
public long getAccessTokenExpiresIn() {
â‹®----
return java.time.Duration.between(LocalDateTime.now(), accessTokenExpiresAt).getSeconds();
â‹®----
/**
     * ë¦¬í”„ë ˆì‹œ í† í° ìœ íš¨ ê¸°ê°„ (ì´ˆ)
     */
public long getRefreshTokenExpiresIn() {
â‹®----
return java.time.Duration.between(LocalDateTime.now(), refreshTokenExpiresAt).getSeconds();
</file>

<file path="src/main/java/com/globalcarelink/auth/dto/LoginRequest.java">
public class LoginRequest {
</file>

<file path="src/main/java/com/globalcarelink/auth/dto/MemberRegisterRequest.java">
public class MemberRegisterRequest {
</file>

<file path="src/main/java/com/globalcarelink/auth/dto/MemberResponse.java">
public class MemberResponse {
â‹®----
public static MemberResponse from(Member member) {
return MemberResponse.builder()
.id(member.getId())
.email(member.getEmail())
.name(member.getName())
.phoneNumber(member.getPhoneNumber())
.role(member.getRole())
.isJobSeeker(member.getIsJobSeeker())
.isActive(member.getIsActive())
.language(member.getLanguage())
.region(member.getRegion())
.createdAt(member.getCreatedAt())
.updatedAt(member.getUpdatedAt())
.build();
</file>

<file path="src/main/java/com/globalcarelink/auth/dto/MemberUpdateRequest.java">
public class MemberUpdateRequest {
</file>

<file path="src/main/java/com/globalcarelink/auth/dto/RefreshTokenRequest.java">
/**
 * ë¦¬í”„ë ˆì‹œ í† í° ìš”ì²­ DTO
 */
â‹®----
public class RefreshTokenRequest {
â‹®----
/**
     * ë¦¬í”„ë ˆì‹œ í† í°
     */
</file>

<file path="src/main/java/com/globalcarelink/auth/dto/TokenMetadataResponse.java">
/**
 * í† í° ë©”íƒ€ë°ì´í„° ì‘ë‹µ DTO
 */
â‹®----
public class TokenMetadataResponse {
â‹®----
/**
     * í† í° ID
     */
â‹®----
/**
     * í† í° íƒ€ì… (ACCESS, REFRESH)
     */
â‹®----
/**
     * í† í° ë°œê¸‰ ì‹œê°„
     */
â‹®----
/**
     * í† í° ë§Œë£Œ ì‹œê°„
     */
â‹®----
/**
     * ë°œê¸‰ IP ì£¼ì†Œ
     */
â‹®----
/**
     * User-Agent ì •ë³´
     */
â‹®----
/**
     * í† í° ë§Œë£Œê¹Œì§€ ë‚¨ì€ ì‹œê°„ (ì´ˆ)
     */
public long getExpiresIn() {
â‹®----
return java.time.Duration.between(LocalDateTime.now(), expiresAt).getSeconds();
â‹®----
/**
     * í† í°ì´ ë§Œë£Œë˜ì—ˆëŠ”ì§€ í™•ì¸
     */
public boolean isExpired() {
return expiresAt != null && expiresAt.isBefore(LocalDateTime.now());
</file>

<file path="src/main/java/com/globalcarelink/auth/dto/TokenResponse.java">
public class TokenResponse {
â‹®----
public static TokenResponse of(String accessToken, Long expiresIn, MemberResponse member) {
return TokenResponse.builder()
.accessToken(accessToken)
.tokenType("Bearer")
.expiresIn(expiresIn)
.member(member)
.build();
</file>

<file path="src/main/java/com/globalcarelink/auth/dto/TokenValidationRequest.java">
/**
 * í† í° ìœ íš¨ì„± ê²€ì¦ ìš”ì²­ DTO
 */
â‹®----
public class TokenValidationRequest {
â‹®----
/**
     * ê²€ì¦í•  í† í°
     */
</file>

<file path="src/main/java/com/globalcarelink/auth/dto/TokenValidationResponse.java">
/**
 * í† í° ìœ íš¨ì„± ê²€ì¦ ì‘ë‹µ DTO
 */
â‹®----
public class TokenValidationResponse {
â‹®----
/**
     * í† í° ìœ íš¨ì„± ì—¬ë¶€
     */
â‹®----
/**
     * í† í°ì—ì„œ ì¶”ì¶œí•œ ì´ë©”ì¼ (ìœ íš¨í•œ ê²½ìš°)
     */
â‹®----
/**
     * ì˜¤ë¥˜ ë©”ì‹œì§€ (ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš°)
     */
</file>

<file path="src/main/java/com/globalcarelink/auth/JwtAuthenticationFilter.java">
public class JwtAuthenticationFilter extends OncePerRequestFilter {
â‹®----
protected void doFilterInternal(HttpServletRequest request,
â‹®----
String token = resolveToken(request);
â‹®----
if (StringUtils.hasText(token) && jwtTokenProvider.validateToken(token)) {
Authentication authentication = jwtTokenProvider.getAuthentication(token);
SecurityContextHolder.getContext().setAuthentication(authentication);
â‹®----
filterChain.doFilter(request, response);
â‹®----
private String resolveToken(HttpServletRequest request) {
String bearerToken = request.getHeader("Authorization");
â‹®----
if (StringUtils.hasText(bearerToken) && bearerToken.startsWith("Bearer ")) {
return bearerToken.substring(7);
</file>

<file path="src/main/java/com/globalcarelink/auth/MemberController.java">
public class MemberController {
â‹®----
public ResponseEntity<MemberResponse> getMember(@PathVariable Long id) {
MemberResponse response = memberService.findById(id);
return ResponseEntity.ok(response);
â‹®----
public ResponseEntity<MemberResponse> updateProfile(
â‹®----
MemberResponse response = memberService.updateProfile(id, request);
â‹®----
public ResponseEntity<Void> toggleJobSeekerStatus(@PathVariable Long id) {
memberService.toggleJobSeekerStatus(id);
return ResponseEntity.ok().build();
â‹®----
public ResponseEntity<Void> deactivate(@PathVariable Long id) {
memberService.deactivate(id);
â‹®----
public ResponseEntity<List<MemberResponse>> getMembersByRole(@PathVariable MemberRole role) {
List<MemberResponse> response = memberService.findByRole(role);
â‹®----
public ResponseEntity<List<MemberResponse>> getActiveJobSeekers() {
List<MemberResponse> response = memberService.findActiveJobSeekers();
â‹®----
public ResponseEntity<Long> countByRole(@PathVariable MemberRole role) {
long count = memberService.countByRole(role);
return ResponseEntity.ok(count);
</file>

<file path="src/main/java/com/globalcarelink/auth/MemberRepository.java">
public interface MemberRepository extends JpaRepository<Member, Long> {
â‹®----
Optional<Member> findByEmail(String email);
â‹®----
boolean existsByEmail(String email);
â‹®----
List<Member> findByRole(MemberRole role);
â‹®----
List<Member> findByRoleAndIsActive(MemberRole role, Boolean isActive);
â‹®----
List<Member> findByIsJobSeekerAndIsActive(Boolean isJobSeeker, Boolean isActive);
â‹®----
List<Member> findByRolesAndIsActive(@Param("roles") List<MemberRole> roles, @Param("isActive") Boolean isActive);
â‹®----
List<Member> findActiveByRoleAndRegion(@Param("role") MemberRole role, @Param("region") String region);
â‹®----
List<Member> searchByKeyword(@Param("keyword") String keyword);
â‹®----
long countByRole(MemberRole role);
â‹®----
long countByRoleAndIsActive(MemberRole role, Boolean isActive);
</file>

<file path="src/main/java/com/globalcarelink/auth/PasswordEncoderConfig.java">
/**
 * ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” ì„¤ì • (ë³´ì•ˆ ê°•í™” ë²„ì „)
 * - ê³ ê°•ë„ BCrypt ì‚¬ìš©
 * - ë‹¤ì¤‘ ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ ì§€ì›
 * - ì•”í˜¸í™” ê°•ë„ ì„¤ì • ê°€ëŠ¥
 */
â‹®----
public class PasswordEncoderConfig {
â‹®----
/**
     * í–¥ìƒëœ ë¹„ë°€ë²ˆí˜¸ ì¸ì½”ë” ì„¤ì •
     * - BCrypt ê°•ë„ 12 (ê¸°ë³¸ê°’ 10ë³´ë‹¤ ë†’ìŒ)
     * - ë‹¤ì¤‘ ì•Œê³ ë¦¬ì¦˜ ì§€ì›ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ìš©ì´ì„± ì œê³µ
     */
â‹®----
public PasswordEncoder passwordEncoder() {
// ë‹¤ì–‘í•œ ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ ì¸ì½”ë” ì„¤ì •
â‹®----
// BCrypt - ê¸°ë³¸ ë° ê¶Œì¥ ì¸ì½”ë” (ê°•ë„ 12)
BCryptPasswordEncoder bcryptEncoder = new BCryptPasswordEncoder(bcryptStrength);
encoders.put("bcrypt", bcryptEncoder);
â‹®----
// PBKDF2 - ëŒ€ì•ˆ ì¸ì½”ë” (NIST ìŠ¹ì¸)
Pbkdf2PasswordEncoder pbkdf2Encoder = Pbkdf2PasswordEncoder.defaultsForSpringSecurity_v5_8();
pbkdf2Encoder.setAlgorithm(Pbkdf2PasswordEncoder.SecretKeyFactoryAlgorithm.PBKDF2WithHmacSHA256);
pbkdf2Encoder.setEncodeHashAsBase64(true);
encoders.put("pbkdf2", pbkdf2Encoder);
â‹®----
// SCrypt - ë©”ëª¨ë¦¬ í•˜ë“œ í•¨ìˆ˜ (ë†’ì€ ë³´ì•ˆ)
SCryptPasswordEncoder scryptEncoder = SCryptPasswordEncoder.defaultsForSpringSecurity_v5_8();
encoders.put("scrypt", scryptEncoder);
â‹®----
// ë ˆê±°ì‹œ ì§€ì›ì„ ìœ„í•œ ì•½í•œ ì¸ì½”ë”ë“¤ (ìƒˆë¡œìš´ ë¹„ë°€ë²ˆí˜¸ì—ëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠìŒ)
encoders.put("noop", org.springframework.security.crypto.password.NoOpPasswordEncoder.getInstance());
encoders.put("sha256", new org.springframework.security.crypto.password.StandardPasswordEncoder());
â‹®----
// ìœ„ì„ ì¸ì½”ë” ìƒì„± - ê¸°ë³¸ê°’ì€ BCrypt ì‚¬ìš©
DelegatingPasswordEncoder delegatingEncoder = new DelegatingPasswordEncoder(defaultEncoder, encoders);
â‹®----
// ë ˆê±°ì‹œ ë¹„ë°€ë²ˆí˜¸ í˜•ì‹ ì§€ì› (ì•”í˜¸í™” ë°©ì‹ì´ ëª…ì‹œë˜ì§€ ì•Šì€ ê²½ìš°)
delegatingEncoder.setDefaultPasswordEncoderForMatches(bcryptEncoder);
â‹®----
log.info("ë¹„ë°€ë²ˆí˜¸ ì¸ì½”ë” ì„¤ì • ì™„ë£Œ - ê¸°ë³¸: {}, BCrypt ê°•ë„: {}", defaultEncoder, bcryptStrength);
â‹®----
/**
     * BCrypt ì „ìš© ì¸ì½”ë” (íŠ¹ì • ìš©ë„)
     */
â‹®----
public BCryptPasswordEncoder bcryptPasswordEncoder() {
return new BCryptPasswordEncoder(bcryptStrength);
â‹®----
/**
     * ë¹„ë°€ë²ˆí˜¸ ê°•ë„ ê²€ì¦ì„ ìœ„í•œ ì¶”ê°€ BCrypt ì¸ì½”ë”
     * ë” ë†’ì€ ê°•ë„ë¡œ ì¤‘ìš”í•œ ì‘ì—…ìš©
     */
â‹®----
public BCryptPasswordEncoder highStrengthPasswordEncoder() {
int highStrength = Math.max(bcryptStrength + 2, 14); // ìµœì†Œ 14
log.info("ê³ ê°•ë„ ë¹„ë°€ë²ˆí˜¸ ì¸ì½”ë” ìƒì„± - ê°•ë„: {}", highStrength);
return new BCryptPasswordEncoder(highStrength);
</file>

<file path="src/main/java/com/globalcarelink/common/config/JpaConfig.java">
public class JpaConfig {
</file>

<file path="src/main/java/com/globalcarelink/common/config/LoggingFilter.java">
public class LoggingFilter extends OncePerRequestFilter {
â‹®----
protected void doFilterInternal(HttpServletRequest request,
â‹®----
long startTime = System.currentTimeMillis();
â‹®----
setupMDC(request);
â‹®----
log.info("ìš”ì²­ ì‹œì‘: {} {}", request.getMethod(), request.getRequestURI());
â‹®----
filterChain.doFilter(request, response);
â‹®----
long duration = System.currentTimeMillis() - startTime;
â‹®----
log.info("ìš”ì²­ ì™„ë£Œ: {} {} - ì‘ë‹µì½”ë“œ: {}, ì²˜ë¦¬ì‹œê°„: {}ms",
request.getMethod(),
request.getRequestURI(),
response.getStatus(),
â‹®----
log.warn("ëŠë¦° ìš”ì²­ ê°ì§€: {}ms - {} {}", duration, request.getMethod(), request.getRequestURI());
â‹®----
clearMDC();
â‹®----
private void setupMDC(HttpServletRequest request) {
String traceId = UUID.randomUUID().toString().substring(0, 8);
MDC.put(TRACE_ID, traceId);
MDC.put(REQUEST_URI, request.getRequestURI());
MDC.put(METHOD, request.getMethod());
MDC.put(CLIENT_IP, getClientIpAddress(request));
â‹®----
Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
if (authentication != null && authentication.isAuthenticated() &&
!"anonymousUser".equals(authentication.getName())) {
â‹®----
String userEmail = authentication.getName();
MDC.put(USER_EMAIL, userEmail);
MDC.put(USER_ID, extractUserId(userEmail));
â‹®----
private void clearMDC() {
MDC.remove(TRACE_ID);
MDC.remove(USER_ID);
MDC.remove(USER_EMAIL);
MDC.remove(REQUEST_URI);
MDC.remove(METHOD);
MDC.remove(CLIENT_IP);
â‹®----
private String getClientIpAddress(HttpServletRequest request) {
String xForwardedFor = request.getHeader("X-Forwarded-For");
if (xForwardedFor != null && !xForwardedFor.isEmpty()) {
return xForwardedFor.split(",")[0].trim();
â‹®----
String xRealIp = request.getHeader("X-Real-IP");
if (xRealIp != null && !xRealIp.isEmpty()) {
â‹®----
return request.getRemoteAddr();
â‹®----
private String extractUserId(String email) {
return email != null ? email.split("@")[0] : "unknown";
</file>

<file path="src/main/java/com/globalcarelink/common/entity/BaseEntity.java">
public abstract class BaseEntity {
</file>

<file path="src/main/java/com/globalcarelink/common/exception/CustomException.java">
public class CustomException extends RuntimeException {
â‹®----
public static class Unauthorized extends CustomException {
â‹®----
public static class Forbidden extends CustomException {
â‹®----
public static class NotFound extends CustomException {
â‹®----
public static class BadRequest extends CustomException {
â‹®----
public static class Conflict extends CustomException {
</file>

<file path="src/main/java/com/globalcarelink/common/exception/ValidationErrorBuilder.java">
/**
 * ìœ íš¨ì„± ê²€ì¦ ì˜¤ë¥˜ ë¹Œë”
 * ë‹¤ì–‘í•œ ê²€ì¦ ì‹œë‚˜ë¦¬ì˜¤ì— ëŒ€í•œ ìƒì„¸í•œ ì˜¤ë¥˜ ì •ë³´ ìƒì„±
 */
â‹®----
public class ValidationErrorBuilder {
â‹®----
/**
     * ìƒˆë¡œìš´ ê²€ì¦ ì˜¤ë¥˜ ìƒì„¸ ì •ë³´ ë¹Œë” ìƒì„±
     */
public ValidationErrorDetails.ValidationErrorDetailsBuilder create(String message) {
return ValidationErrorDetails.builder()
.timestamp(LocalDateTime.now())
.errorId("VAL-" + UUID.randomUUID().toString().substring(0, 8))
.message(message);
â‹®----
/**
     * í•„ìˆ˜ í•„ë“œ ëˆ„ë½ ì˜¤ë¥˜
     */
public ValidationErrorDetails.FieldError requiredField(String field) {
return ValidationErrorDetails.FieldError.builder()
.field(field)
.rejectedValue(null)
.message(field + "ëŠ” í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤")
.code("field.required")
.constraint("NotNull")
.helpMessage("ì´ í•„ë“œëŠ” ë°˜ë“œì‹œ ê°’ì„ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤")
.build();
â‹®----
/**
     * ë¬¸ìì—´ ê¸¸ì´ ì˜¤ë¥˜
     */
public ValidationErrorDetails.FieldError stringLength(String field, Object value,
â‹®----
String actualLength = value != null ? String.valueOf(value).length() + "" : "0";
â‹®----
message = String.format("%sì˜ ê¸¸ì´ëŠ” %dì ì´ìƒ %dì ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤ (í˜„ì¬: %sì)",
â‹®----
constraint += String.format("(min=%d, max=%d)", minLength, maxLength);
â‹®----
message = String.format("%sì˜ ê¸¸ì´ëŠ” %dì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤ (í˜„ì¬: %sì)",
â‹®----
constraint += String.format("(min=%d)", minLength);
â‹®----
message = String.format("%sì˜ ê¸¸ì´ëŠ” %dì ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤ (í˜„ì¬: %sì)",
â‹®----
constraint += String.format("(max=%d)", maxLength);
â‹®----
.rejectedValue(value)
.message(message)
.code("field.size")
.constraint(constraint)
.minLength(minLength)
.maxLength(maxLength)
.helpMessage("ì…ë ¥ ê°€ëŠ¥í•œ ë¬¸ì ìˆ˜ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”")
â‹®----
/**
     * ìˆ«ì ë²”ìœ„ ì˜¤ë¥˜
     */
public ValidationErrorDetails.FieldError numberRange(String field, Object value,
â‹®----
message = String.format("%sëŠ” %s ì´ìƒ %s ì´í•˜ì˜ ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤ (í˜„ì¬: %s)",
â‹®----
constraint += String.format("(min=%s, max=%s)", minValue, maxValue);
â‹®----
message = String.format("%sëŠ” %s ì´ìƒì˜ ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤ (í˜„ì¬: %s)",
â‹®----
constraint += String.format("(min=%s)", minValue);
â‹®----
message = String.format("%sëŠ” %s ì´í•˜ì˜ ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤ (í˜„ì¬: %s)",
â‹®----
constraint += String.format("(max=%s)", maxValue);
â‹®----
.code("field.range")
â‹®----
.minValue(minValue)
.maxValue(maxValue)
.helpMessage("í—ˆìš©ë˜ëŠ” ìˆ«ì ë²”ìœ„ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”")
â‹®----
/**
     * ì—´ê±°í˜• ê°’ ì˜¤ë¥˜
     */
public ValidationErrorDetails.FieldError enumValue(String field, Object value,
â‹®----
.message(String.format("%sëŠ” ë‹¤ìŒ ê°’ ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤: %s (í˜„ì¬: %s)",
â‹®----
.code("field.enum")
.constraint("OneOf")
.allowedValues(allowedValues)
.helpMessage("í—ˆìš©ë˜ëŠ” ê°’ ëª©ë¡ì—ì„œ ì„ íƒí•´ì£¼ì„¸ìš”")
â‹®----
/**
     * ì •ê·œì‹ íŒ¨í„´ ì˜¤ë¥˜
     */
public ValidationErrorDetails.FieldError patternMismatch(String field, Object value,
â‹®----
.message(String.format("%sì˜ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. %s (í˜„ì¬: %s)",
â‹®----
.code("field.pattern")
.constraint("Pattern")
.pattern(pattern)
.helpMessage(description)
â‹®----
/**
     * ë‚ ì§œ ë²”ìœ„ ì˜¤ë¥˜
     */
public ValidationErrorDetails.FieldError dateRange(String field, Object value,
â‹®----
message = String.format("%sëŠ” %s ì´í›„ %s ì´ì „ì˜ ë‚ ì§œì—¬ì•¼ í•©ë‹ˆë‹¤ (í˜„ì¬: %s)",
â‹®----
constraint += String.format("(min=%s, max=%s)", minDate, maxDate);
â‹®----
message = String.format("%sëŠ” %s ì´í›„ì˜ ë‚ ì§œì—¬ì•¼ í•©ë‹ˆë‹¤ (í˜„ì¬: %s)",
â‹®----
constraint += String.format("(min=%s)", minDate);
â‹®----
message = String.format("%sëŠ” %s ì´ì „ì˜ ë‚ ì§œì—¬ì•¼ í•©ë‹ˆë‹¤ (í˜„ì¬: %s)",
â‹®----
constraint += String.format("(max=%s)", maxDate);
â‹®----
.code("field.date.range")
â‹®----
.minValue(minDate)
.maxValue(maxDate)
.helpMessage("ìœ íš¨í•œ ë‚ ì§œ ë²”ìœ„ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”")
â‹®----
/**
     * ì´ë©”ì¼ í˜•ì‹ ì˜¤ë¥˜
     */
public ValidationErrorDetails.FieldError invalidEmail(String field, Object value) {
â‹®----
.message(String.format("%sì˜ ì´ë©”ì¼ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤ (í˜„ì¬: %s)", field, value))
.code("field.email")
.constraint("Email")
.pattern("^[A-Za-z0-9+_.-]+@(.+)$")
.suggestedValue("example@domain.com")
.helpMessage("ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš” (ì˜ˆ: user@example.com)")
â‹®----
/**
     * ì „í™”ë²ˆí˜¸ í˜•ì‹ ì˜¤ë¥˜
     */
public ValidationErrorDetails.FieldError invalidPhoneNumber(String field, Object value) {
â‹®----
.message(String.format("%sì˜ ì „í™”ë²ˆí˜¸ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤ (í˜„ì¬: %s)", field, value))
.code("field.phone")
.constraint("PhoneNumber")
.pattern("^[0-9\\-+\\s()]*$")
.allowedValues(Arrays.asList("010-1234-5678", "02-123-4567", "+82-10-1234-5678"))
.helpMessage("í•˜ì´í”ˆ(-) í¬í•¨ ë˜ëŠ” ì œì™¸í•œ ìˆ«ìë§Œ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤")
â‹®----
/**
     * ADL ìˆ˜ì¤€ ì˜¤ë¥˜ (ê±´ê°• í‰ê°€ ì „ìš©)
     */
public ValidationErrorDetails.FieldError invalidAdlLevel(String field, Object value) {
â‹®----
.message(String.format("%sëŠ” 1-3 ì‚¬ì´ì˜ ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤ (í˜„ì¬: %s)", field, value))
.code("field.adl.level")
.constraint("Range(min=1, max=3)")
.minValue(1)
.maxValue(3)
.allowedValues(Arrays.asList(1, 2, 3))
.helpMessage("1: ë…ë¦½, 2: ë¶€ë¶„ë„ì›€, 3: ì™„ì „ë„ì›€ ì¤‘ ì„ íƒí•´ì£¼ì„¸ìš”")
â‹®----
/**
     * ì¥ê¸°ìš”ì–‘ë“±ê¸‰ ì˜¤ë¥˜ (ê±´ê°• í‰ê°€ ì „ìš©)
     */
public ValidationErrorDetails.FieldError invalidLtciGrade(String field, Object value) {
â‹®----
.message(String.format("%sëŠ” 1-6 ì‚¬ì´ì˜ ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤ (í˜„ì¬: %s)", field, value))
.code("field.ltci.grade")
.constraint("Range(min=1, max=6)")
â‹®----
.maxValue(6)
.allowedValues(Arrays.asList(1, 2, 3, 4, 5, 6))
.helpMessage("1-2ë“±ê¸‰: ì¤‘ì¦, 3ë“±ê¸‰: ì¤‘ë“±ì¦, 4-5ë“±ê¸‰: ê²½ì¦, 6ë“±ê¸‰: ì¸ì§€ì§€ì›ë“±ê¸‰")
â‹®----
/**
     * ì¶œìƒë…„ë„ ì˜¤ë¥˜
     */
public ValidationErrorDetails.FieldError invalidBirthYear(String field, Object value) {
int currentYear = LocalDate.now().getYear();
â‹®----
.message(String.format("%sëŠ” 1900ë…„ ì´í›„ %dë…„ ì´ì „ì´ì–´ì•¼ í•©ë‹ˆë‹¤ (í˜„ì¬: %s)",
â‹®----
.code("field.birth.year")
.constraint(String.format("Range(min=1900, max=%d)", currentYear - 1))
.minValue(1900)
.maxValue(currentYear - 1)
.helpMessage("ì˜¬ë°”ë¥¸ ì¶œìƒë…„ë„ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”")
â‹®----
/**
     * ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ìœ„ë°˜ ì˜¤ë¥˜
     */
public ValidationErrorDetails.GlobalError businessRuleViolation(String message,
â‹®----
return ValidationErrorDetails.GlobalError.builder()
â‹®----
.code("business.rule.violation")
.type(ValidationErrorDetails.ErrorType.BUSINESS_RULE_VIOLATION)
.relatedFields(relatedFields)
.resolution(resolution)
â‹®----
/**
     * ë°ì´í„° ë¬´ê²°ì„± ìœ„ë°˜ ì˜¤ë¥˜
     */
public ValidationErrorDetails.GlobalError dataIntegrityViolation(String message,
â‹®----
.code("data.integrity.violation")
.type(ValidationErrorDetails.ErrorType.DATA_INTEGRITY_VIOLATION)
â‹®----
.resolution("ê´€ë ¨ ë°ì´í„°ì˜ ì¼ê´€ì„±ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”")
â‹®----
/**
     * ë³´ì•ˆ ê·œì¹™ ìœ„ë°˜ ì˜¤ë¥˜
     */
public ValidationErrorDetails.GlobalError securityViolation(String message) {
â‹®----
.code("security.violation")
.type(ValidationErrorDetails.ErrorType.SECURITY_VIOLATION)
.resolution("ì…ë ¥ê°’ì— í—ˆìš©ë˜ì§€ ì•ŠëŠ” ë¬¸ìë‚˜ íŒ¨í„´ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤")
</file>

<file path="src/main/java/com/globalcarelink/common/exception/ValidationErrorDetails.java">
/**
 * ìƒì„¸í•œ ìœ íš¨ì„± ê²€ì¦ ì˜¤ë¥˜ ì •ë³´
 * í´ë¼ì´ì–¸íŠ¸ì—ê²Œ êµ¬ì²´ì ì¸ ì˜¤ë¥˜ ì •ë³´ì™€ í•´ê²° ë°©ë²• ì œê³µ
 */
â‹®----
public class ValidationErrorDetails {
â‹®----
/**
     * ì˜¤ë¥˜ ë°œìƒ ì‹œì 
     */
â‹®----
/**
     * ì˜¤ë¥˜ ì¶”ì  ID
     */
â‹®----
/**
     * ì „ì²´ ì˜¤ë¥˜ ë©”ì‹œì§€
     */
â‹®----
/**
     * í•„ë“œë³„ ìƒì„¸ ì˜¤ë¥˜ ì •ë³´
     */
â‹®----
/**
     * ê¸€ë¡œë²Œ ì˜¤ë¥˜ ì •ë³´ (íŠ¹ì • í•„ë“œì™€ ì—°ê´€ë˜ì§€ ì•Šì€ ì˜¤ë¥˜)
     */
â‹®----
/**
     * ì¶”ê°€ ë©”íƒ€ë°ì´í„°
     */
â‹®----
/**
     * í•„ë“œë³„ ì˜¤ë¥˜ ìƒì„¸ ì •ë³´
     */
â‹®----
public static class FieldError {
/**
         * ì˜¤ë¥˜ê°€ ë°œìƒí•œ í•„ë“œëª…
         */
â‹®----
/**
         * í•„ë“œì˜ í˜„ì¬ ê°’
         */
â‹®----
/**
         * ì˜¤ë¥˜ ë©”ì‹œì§€
         */
â‹®----
/**
         * ì˜¤ë¥˜ ì½”ë“œ (êµ­ì œí™” í‚¤)
         */
â‹®----
/**
         * ìœ„ë°˜ëœ ì œì•½ ì¡°ê±´
         */
â‹®----
/**
         * í—ˆìš©ë˜ëŠ” ê°’ ëª©ë¡
         */
â‹®----
/**
         * ìµœì†Œê°’ (ìˆ«ì/ë‚ ì§œ í•„ë“œìš©)
         */
â‹®----
/**
         * ìµœëŒ€ê°’ (ìˆ«ì/ë‚ ì§œ í•„ë“œìš©)
         */
â‹®----
/**
         * ìµœì†Œ ê¸¸ì´ (ë¬¸ìì—´ í•„ë“œìš©)
         */
â‹®----
/**
         * ìµœëŒ€ ê¸¸ì´ (ë¬¸ìì—´ í•„ë“œìš©)
         */
â‹®----
/**
         * ì •ê·œì‹ íŒ¨í„´ (ë¬¸ìì—´ í•„ë“œìš©)
         */
â‹®----
/**
         * ì œì•ˆ ìˆ˜ì • ê°’
         */
â‹®----
/**
         * ë„ì›€ë§ ë©”ì‹œì§€
         */
â‹®----
/**
     * ê¸€ë¡œë²Œ ì˜¤ë¥˜ ì •ë³´
     */
â‹®----
public static class GlobalError {
â‹®----
/**
         * ì˜¤ë¥˜ ì½”ë“œ
         */
â‹®----
/**
         * ì˜¤ë¥˜ ìœ í˜•
         */
â‹®----
/**
         * ê´€ë ¨ í•„ë“œë“¤
         */
â‹®----
/**
         * í•´ê²° ë°©ë²•
         */
â‹®----
/**
     * ì˜¤ë¥˜ ìœ í˜• ì—´ê±°í˜•
     */
â‹®----
public String getDescription() {
â‹®----
/**
     * ë¹Œë” í—¬í¼ ë©”ì„œë“œë“¤
     */
public static class ValidationErrorDetailsBuilder {
â‹®----
public ValidationErrorDetailsBuilder withTimestamp() {
this.timestamp = LocalDateTime.now();
â‹®----
public ValidationErrorDetailsBuilder withErrorId(String prefix) {
this.errorId = prefix + "-" + System.currentTimeMillis();
â‹®----
public ValidationErrorDetailsBuilder addFieldError(String field, Object rejectedValue,
â‹®----
this.fieldErrors.add(FieldError.builder()
.field(field)
.rejectedValue(rejectedValue)
.message(message)
.code(code)
.build());
â‹®----
public ValidationErrorDetailsBuilder addGlobalError(String message, String code,
â‹®----
this.globalErrors.add(GlobalError.builder()
â‹®----
.type(type)
â‹®----
public ValidationErrorDetailsBuilder addMetadata(String key, Object value) {
â‹®----
this.metadata.put(key, value);
</file>

<file path="src/main/java/com/globalcarelink/common/util/DateUtil.java">
public final class DateUtil {
â‹®----
public static final ZoneId KOREA_ZONE = ZoneId.of("Asia/Seoul");
public static final DateTimeFormatter DATE_FORMAT = DateTimeFormatter.ofPattern("yyyy-MM-dd");
public static final DateTimeFormatter DATETIME_FORMAT = DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss");
public static final DateTimeFormatter TIMESTAMP_FORMAT = DateTimeFormatter.ofPattern("yyyy-MM-dd'T'HH:mm:ss.SSS");
public static final DateTimeFormatter KOREAN_DATE_FORMAT = DateTimeFormatter.ofPattern("yyyyë…„ MMì›” ddì¼", Locale.KOREAN);
public static final DateTimeFormatter KOREAN_DATETIME_FORMAT = DateTimeFormatter.ofPattern("yyyyë…„ MMì›” ddì¼ HHì‹œ mmë¶„", Locale.KOREAN);
â‹®----
public static LocalDateTime now() {
return LocalDateTime.now(KOREA_ZONE);
â‹®----
public static LocalDate today() {
return LocalDate.now(KOREA_ZONE);
â‹®----
public static String formatDate(LocalDate date) {
return date != null ? date.format(DATE_FORMAT) : null;
â‹®----
public static String formatDateTime(LocalDateTime dateTime) {
return dateTime != null ? dateTime.format(DATETIME_FORMAT) : null;
â‹®----
public static String formatKoreanDate(LocalDate date) {
return date != null ? date.format(KOREAN_DATE_FORMAT) : null;
â‹®----
public static String formatKoreanDateTime(LocalDateTime dateTime) {
return dateTime != null ? dateTime.format(KOREAN_DATETIME_FORMAT) : null;
â‹®----
public static LocalDate parseDate(String dateString) {
â‹®----
return LocalDate.parse(dateString, DATE_FORMAT);
â‹®----
throw new IllegalArgumentException("ë‚ ì§œ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤: " + dateString, e);
â‹®----
public static LocalDateTime parseDateTime(String dateTimeString) {
â‹®----
return LocalDateTime.parse(dateTimeString, DATETIME_FORMAT);
â‹®----
throw new IllegalArgumentException("ë‚ ì§œì‹œê°„ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤: " + dateTimeString, e);
â‹®----
public static long daysBetween(LocalDate startDate, LocalDate endDate) {
return ChronoUnit.DAYS.between(startDate, endDate);
â‹®----
public static long hoursBetween(LocalDateTime startDateTime, LocalDateTime endDateTime) {
return ChronoUnit.HOURS.between(startDateTime, endDateTime);
â‹®----
public static long minutesBetween(LocalDateTime startDateTime, LocalDateTime endDateTime) {
return ChronoUnit.MINUTES.between(startDateTime, endDateTime);
â‹®----
public static boolean isToday(LocalDate date) {
return date != null && date.equals(today());
â‹®----
public static boolean isThisWeek(LocalDate date) {
â‹®----
LocalDate today = today();
LocalDate weekStart = today.with(DayOfWeek.MONDAY);
LocalDate weekEnd = today.with(DayOfWeek.SUNDAY);
â‹®----
return !date.isBefore(weekStart) && !date.isAfter(weekEnd);
â‹®----
public static boolean isThisMonth(LocalDate date) {
â‹®----
return date.getYear() == today.getYear() && date.getMonth() == today.getMonth();
â‹®----
public static int calculateAge(LocalDate birthDate) {
â‹®----
return Period.between(birthDate, today()).getYears();
â‹®----
public static String getTimeAgoText(LocalDateTime dateTime) {
â‹®----
LocalDateTime now = now();
long minutes = ChronoUnit.MINUTES.between(dateTime, now);
â‹®----
long hours = ChronoUnit.HOURS.between(dateTime, now);
â‹®----
long days = ChronoUnit.DAYS.between(dateTime, now);
â‹®----
public static LocalDateTime startOfDay(LocalDate date) {
return date != null ? date.atStartOfDay() : null;
â‹®----
public static LocalDateTime endOfDay(LocalDate date) {
return date != null ? date.atTime(23, 59, 59, 999_999_999) : null;
â‹®----
public static LocalDate getFirstDayOfMonth(LocalDate date) {
return date != null ? date.withDayOfMonth(1) : null;
â‹®----
public static LocalDate getLastDayOfMonth(LocalDate date) {
return date != null ? date.withDayOfMonth(date.lengthOfMonth()) : null;
â‹®----
public static boolean isBusinessDay(LocalDate date) {
â‹®----
DayOfWeek dayOfWeek = date.getDayOfWeek();
â‹®----
public static boolean isWeekend(LocalDate date) {
return !isBusinessDay(date);
â‹®----
public static LocalDateTime convertToKoreaTime(LocalDateTime utcDateTime) {
â‹®----
return utcDateTime.atZone(ZoneOffset.UTC)
.withZoneSameInstant(KOREA_ZONE)
.toLocalDateTime();
â‹®----
public static LocalDateTime convertToUtc(LocalDateTime koreaDateTime) {
â‹®----
return koreaDateTime.atZone(KOREA_ZONE)
.withZoneSameInstant(ZoneOffset.UTC)
â‹®----
public static boolean isValidDateRange(LocalDate startDate, LocalDate endDate) {
â‹®----
return !startDate.isAfter(endDate);
â‹®----
public static boolean isValidDateTimeRange(LocalDateTime startDateTime, LocalDateTime endDateTime) {
â‹®----
return !startDateTime.isAfter(endDateTime);
</file>

<file path="src/main/java/com/globalcarelink/common/util/SecurityUtil.java">
public final class SecurityUtil {
â‹®----
private static final String DEFAULT_KEY = "GlobalCareLink!"; // 16ì ê³ ì • í‚¤ (ê°œë°œìš©)
â‹®----
private static final Pattern SQL_INJECTION_PATTERN = Pattern.compile(
â‹®----
/**
     * í´ë¼ì´ì–¸íŠ¸ IP ì£¼ì†Œ ì¶”ì¶œ
     */
public static String getClientIpAddress(HttpServletRequest request) {
â‹®----
// X-Forwarded-For í—¤ë” í™•ì¸ (í”„ë¡ì‹œ í™˜ê²½)
String xForwardedFor = request.getHeader("X-Forwarded-For");
if (xForwardedFor != null && !xForwardedFor.isEmpty() && !"unknown".equalsIgnoreCase(xForwardedFor)) {
clientIp = xForwardedFor.split(",")[0].trim();
â‹®----
// X-Real-IP í—¤ë” í™•ì¸ (Nginx ë“±)
if (clientIp == null || clientIp.isEmpty() || "unknown".equalsIgnoreCase(clientIp)) {
clientIp = request.getHeader("X-Real-IP");
â‹®----
// Proxy-Client-IP í—¤ë” í™•ì¸
â‹®----
clientIp = request.getHeader("Proxy-Client-IP");
â‹®----
// WL-Proxy-Client-IP í—¤ë” í™•ì¸ (WebLogic)
â‹®----
clientIp = request.getHeader("WL-Proxy-Client-IP");
â‹®----
// HTTP_CLIENT_IP í—¤ë” í™•ì¸
â‹®----
clientIp = request.getHeader("HTTP_CLIENT_IP");
â‹®----
// HTTP_X_FORWARDED_FOR í—¤ë” í™•ì¸
â‹®----
clientIp = request.getHeader("HTTP_X_FORWARDED_FOR");
â‹®----
// ê¸°ë³¸ RemoteAddr ì‚¬ìš©
â‹®----
clientIp = request.getRemoteAddr();
â‹®----
// IPv6 ë¡œì»¬í˜¸ìŠ¤íŠ¸ë¥¼ IPv4ë¡œ ë³€í™˜
if ("0:0:0:0:0:0:0:1".equals(clientIp)) {
â‹®----
public static String encryptSensitiveData(String plainText) {
â‹®----
SecretKeySpec secretKey = new SecretKeySpec(DEFAULT_KEY.getBytes(StandardCharsets.UTF_8), ALGORITHM);
Cipher cipher = Cipher.getInstance(TRANSFORMATION);
cipher.init(Cipher.ENCRYPT_MODE, secretKey);
â‹®----
byte[] encryptedBytes = cipher.doFinal(plainText.getBytes(StandardCharsets.UTF_8));
return Base64.getEncoder().encodeToString(encryptedBytes);
â‹®----
log.error("ë°ì´í„° ì•”í˜¸í™” ì‹¤íŒ¨: {}", e.getMessage());
return plainText; // ì‹¤íŒ¨ ì‹œ ì›ë³¸ ë°˜í™˜ (ê°œë°œìš©)
â‹®----
public static String decryptSensitiveData(String encryptedText) {
â‹®----
cipher.init(Cipher.DECRYPT_MODE, secretKey);
â‹®----
byte[] decryptedBytes = cipher.doFinal(Base64.getDecoder().decode(encryptedText));
return new String(decryptedBytes, StandardCharsets.UTF_8);
â‹®----
log.error("ë°ì´í„° ë³µí˜¸í™” ì‹¤íŒ¨: {}", e.getMessage());
return encryptedText; // ì‹¤íŒ¨ ì‹œ ì›ë³¸ ë°˜í™˜
â‹®----
public static String maskEmail(String email) {
if (email == null || !email.contains("@")) return email;
â‹®----
String[] parts = email.split("@");
â‹®----
if (username.length() <= 2) return email;
â‹®----
String maskedUsername = username.charAt(0) + "*".repeat(username.length() - 2) + username.charAt(username.length() - 1);
â‹®----
public static String maskPhoneNumber(String phoneNumber) {
if (phoneNumber == null || phoneNumber.length() < 8) return phoneNumber;
â‹®----
return phoneNumber.substring(0, 3) + "-****-" + phoneNumber.substring(phoneNumber.length() - 4);
â‹®----
public static String generateSecureToken() {
SecureRandom random = new SecureRandom();
â‹®----
random.nextBytes(bytes);
return Base64.getUrlEncoder().withoutPadding().encodeToString(bytes);
â‹®----
public static String generateSecurePassword(int length) {
â‹®----
StringBuilder password = new StringBuilder();
â‹®----
// ê° ì¹´í…Œê³ ë¦¬ì—ì„œ ìµœì†Œ 1ê°œì”© í¬í•¨
password.append(upperCase.charAt(random.nextInt(upperCase.length())));
password.append(lowerCase.charAt(random.nextInt(lowerCase.length())));
password.append(digits.charAt(random.nextInt(digits.length())));
password.append(specialChars.charAt(random.nextInt(specialChars.length())));
â‹®----
// ë‚˜ë¨¸ì§€ ê¸¸ì´ë§Œí¼ ëœë¤ ìƒì„±
â‹®----
password.append(allChars.charAt(random.nextInt(allChars.length())));
â‹®----
// ë¬¸ìì—´ ì„ê¸°
return shuffleString(password.toString());
â‹®----
public static boolean containsSqlInjection(String input) {
â‹®----
return SQL_INJECTION_PATTERN.matcher(input).find();
â‹®----
public static String sanitizeForSql(String input) {
â‹®----
return input.replaceAll("'", "''")
.replaceAll("\"", "\\\"")
.replaceAll(";", "")
.replaceAll("--", "")
.replaceAll("/\\*", "")
.replaceAll("\\*/", "");
â‹®----
public static boolean isSecurePassword(String password) {
if (password == null || password.length() < 8 || password.length() > 128) {
â‹®----
boolean hasUpper = password.chars().anyMatch(Character::isUpperCase);
boolean hasLower = password.chars().anyMatch(Character::isLowerCase);
boolean hasDigit = password.chars().anyMatch(Character::isDigit);
boolean hasSpecial = password.chars().anyMatch(ch -> "@$!%*?&".indexOf(ch) >= 0);
â‹®----
public static SecretKey generateAESKey() throws NoSuchAlgorithmException {
KeyGenerator keyGenerator = KeyGenerator.getInstance(ALGORITHM);
keyGenerator.init(256);
return keyGenerator.generateKey();
â‹®----
private static String shuffleString(String input) {
char[] characters = input.toCharArray();
â‹®----
int j = random.nextInt(i + 1);
â‹®----
return new String(characters);
</file>

<file path="src/main/java/com/globalcarelink/common/util/ValidationUtil.java">
public final class ValidationUtil {
â‹®----
private static final Pattern EMAIL_PATTERN = Pattern.compile(
â‹®----
private static final Pattern PHONE_PATTERN = Pattern.compile(
â‹®----
private static final Pattern PASSWORD_PATTERN = Pattern.compile(
â‹®----
private static final Pattern KOREAN_NAME_PATTERN = Pattern.compile(
â‹®----
public static boolean isValidEmail(String email) {
return email != null && EMAIL_PATTERN.matcher(email).matches();
â‹®----
public static boolean isValidPhoneNumber(String phoneNumber) {
if (phoneNumber == null) return true; // Optional field
return PHONE_PATTERN.matcher(phoneNumber).matches();
â‹®----
public static boolean isValidPassword(String password) {
return password != null && PASSWORD_PATTERN.matcher(password).matches();
â‹®----
public static boolean isValidKoreanName(String name) {
return name != null && KOREAN_NAME_PATTERN.matcher(name).matches();
â‹®----
public static boolean isValidRegion(String region) {
if (region == null || region.trim().isEmpty()) return true; // Optional field
return region.length() >= 2 && region.length() <= 100;
â‹®----
public static boolean isValidLanguageCode(String language) {
if (language == null || language.trim().isEmpty()) return true; // Optional field
return language.matches("^[a-z]{2}(-[A-Z]{2})?$"); // ko, en, zh-CN ë“±
â‹®----
public static String getPasswordValidationMessage() {
â‹®----
public static String getPhoneValidationMessage() {
â‹®----
public static String getEmailValidationMessage() {
â‹®----
public static String sanitizeInput(String input) {
â‹®----
return input.trim()
.replaceAll("<script[^>]*>.*?</script>", "")
.replaceAll("<[^>]+>", "")
.replaceAll("[\\r\\n]+", " ");
â‹®----
public static boolean containsSuspiciousPattern(String input) {
â‹®----
String lowerInput = input.toLowerCase();
return lowerInput.contains("<script") ||
lowerInput.contains("javascript:") ||
lowerInput.contains("onload=") ||
lowerInput.contains("onerror=") ||
lowerInput.contains("eval(") ||
lowerInput.contains("document.cookie");
</file>

<file path="src/main/java/com/globalcarelink/common/HealthController.java">
public class HealthController {
â‹®----
public ResponseEntity<Map<String, Object>> health() {
â‹®----
response.put("status", "UP");
response.put("message", "GlobalCareLink ì„œë¹„ìŠ¤ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤");
response.put("timestamp", LocalDateTime.now());
response.put("version", "0.0.1-SNAPSHOT");
â‹®----
return ResponseEntity.ok(response);
</file>

<file path="src/main/java/com/globalcarelink/coordinator/CoordinatorLanguageSkill.java">
import lombok.*;
â‹®----
/**
 * ì½”ë””ë„¤ì´í„° ì–¸ì–´ ëŠ¥ë ¥ ì—”í‹°í‹°
 * ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ ë‹¤êµ­ì–´ ì§€ì› ëŠ¥ë ¥ ê´€ë¦¬
 */
â‹®----
public class CoordinatorLanguageSkill extends BaseEntity {
â‹®----
/**
     * ì–¸ì–´ ì½”ë“œ (ISO 639-1)
     * KO: í•œêµ­ì–´, EN: ì˜ì–´, ZH: ì¤‘êµ­ì–´, JP: ì¼ë³¸ì–´, ES: ìŠ¤í˜ì¸ì–´, 
     * VI: ë² íŠ¸ë‚¨ì–´, TH: íƒœêµ­ì–´, RU: ëŸ¬ì‹œì•„ì–´
     */
â‹®----
/**
     * ì–¸ì–´ëª… (ì‚¬ìš©ì í‘œì‹œìš©)
     */
â‹®----
/**
     * ì–¸ì–´ ìˆ˜ì¤€ (CEFR ê¸°ì¤€ + ëª¨êµ­ì–´)
     * NATIVE: ëª¨êµ­ì–´ ìˆ˜ì¤€
     * FLUENT: ìœ ì°½í•¨ (C1-C2)
     * BUSINESS: ì—…ë¬´ ê°€ëŠ¥ (B2)
     * CONVERSATIONAL: ì¼ìƒ ëŒ€í™” (B1)
     * BASIC: ê¸°ì´ˆ ìˆ˜ì¤€ (A1-A2)
     */
â‹®----
/**
     * ìê²©ì¦/ì¸ì¦ ì •ë³´
     */
â‹®----
private String certification; // "TOEIC 950", "HSK 6ê¸‰", "JLPT N1" ë“±
â‹®----
/**
     * ì „ë¬¸ ë¶„ì•¼ (í•´ë‹¹ ì–¸ì–´ë¡œ ìƒë‹´ ê°€ëŠ¥í•œ ë¶„ì•¼)
     */
â‹®----
private String specialization; // "ì˜ë£Œìƒë‹´", "ë²•ë¬´ìƒë‹´", "ë¶€ë™ì‚°" ë“±
â‹®----
/**
     * êµ­ê°€/ì§€ì—­ ê²½í—˜ (í•´ë‹¹ ì–¸ì–´ê¶Œ ê±°ì£¼/ê·¼ë¬´ ê²½í—˜)
     */
â‹®----
private String countryExperience; // "ë¯¸êµ­ 5ë…„ ê±°ì£¼", "ì¤‘êµ­ í˜„ì§€ ê·¼ë¬´ 3ë…„" ë“±
â‹®----
/**
     * ì–¸ì–´ë³„ ì„œë¹„ìŠ¤ ìš”ê¸ˆ (ì¶”ê°€ ìš”ê¸ˆ)
     */
â‹®----
private Double serviceFeeRate; // ê¸°ë³¸ ìš”ê¸ˆ ëŒ€ë¹„ ë°°ìœ¨ (1.0=ë™ì¼, 1.5=50%í• ì¦)
â‹®----
/**
     * í™œì„± ìƒíƒœ
     */
â‹®----
/**
     * ìš°ì„ ìˆœìœ„ (ê°™ì€ ì–¸ì–´ ë‚´ì—ì„œì˜ ìš°ì„ ìˆœìœ„)
     */
â‹®----
// ===== ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì„œë“œ =====
â‹®----
/**
     * ì—…ë¬´ ìˆ˜ì¤€ ì´ìƒ ì—¬ë¶€
     */
public boolean isBusinessLevelOrAbove() {
â‹®----
/**
     * ì „ë¬¸ ìƒë‹´ ê°€ëŠ¥ ì—¬ë¶€
     */
public boolean canProvideProfessionalConsultation() {
â‹®----
/**
     * í•´ë‹¹ êµ­ê°€ ê²½í—˜ ì—¬ë¶€
     */
public boolean hasCountryExperience() {
return countryExperience != null && !countryExperience.trim().isEmpty();
â‹®----
/**
     * ìê²©ì¦ ë³´ìœ  ì—¬ë¶€
     */
public boolean hasCertification() {
return certification != null && !certification.trim().isEmpty();
â‹®----
/**
     * ì–¸ì–´ë³„ ë§¤ì¹­ ì ìˆ˜ ê³„ì‚° (5ì  ë§Œì )
     */
public double calculateMatchingScore() {
â‹®----
// ìê²©ì¦ ë³´ìœ  ì‹œ ê°€ì‚°ì 
if (hasCertification()) {
â‹®----
// í˜„ì§€ ê²½í—˜ ê°€ì‚°ì 
if (hasCountryExperience()) {
â‹®----
// ì „ë¬¸ ë¶„ì•¼ ê°€ì‚°ì 
if (specialization != null && !specialization.trim().isEmpty()) {
â‹®----
return Math.min(baseScore, 5.0);
â‹®----
/**
     * ì–¸ì–´ ëŠ¥ë ¥ í‘œì‹œ ë¬¸ìì—´
     */
public String getDisplayText() {
StringBuilder display = new StringBuilder();
display.append(languageName).append(" (").append(getProficiencyDisplayName()).append(")");
â‹®----
display.append(" - ").append(certification);
â‹®----
display.append(" [").append(countryExperience).append("]");
â‹®----
return display.toString();
â‹®----
/**
     * ìˆ˜ì¤€ë³„ í•œê¸€ í‘œì‹œëª…
     */
public String getProficiencyDisplayName() {
â‹®----
/**
     * ì¬ì™¸ë™í¬ êµ­ê°€ë³„ ì–¸ì–´ ë§¤ì¹­
     */
public boolean matchesCountry(String countryCode) {
return switch (languageCode.toUpperCase()) {
case "EN" -> countryCode.matches("US|CA|AU|NZ|GB"); // ì˜ì–´ê¶Œ
case "ZH" -> countryCode.matches("CN|TW|SG|MY");    // ì¤‘í™”ê¶Œ
case "JP" -> countryCode.equals("JP");              // ì¼ë³¸
case "ES" -> countryCode.matches("ES|MX|AR|CL|PE"); // ìŠ¤í˜ì¸ì–´ê¶Œ
case "VI" -> countryCode.equals("VN");              // ë² íŠ¸ë‚¨
case "TH" -> countryCode.equals("TH");              // íƒœêµ­
case "RU" -> countryCode.matches("RU|KZ|UZ");       // ëŸ¬ì‹œì•„ì–´ê¶Œ
â‹®----
/**
     * ì–¸ì–´ ìˆ˜ì¤€ enum
     */
â‹®----
public String getDescription() {
</file>

<file path="src/main/java/com/globalcarelink/coordinator/LanguageMatchingService.java">
/**
 * ì–¸ì–´ ê¸°ë°˜ ì½”ë””ë„¤ì´í„° ë§¤ì¹­ ì„œë¹„ìŠ¤
 * ì¬ì™¸ë™í¬ì˜ ì–¸ì–´ ì„ í˜¸ë„ì™€ ì½”ë””ë„¤ì´í„° ì–¸ì–´ ëŠ¥ë ¥ì„ ë§¤ì¹­
 */
â‹®----
public class LanguageMatchingService {
â‹®----
/**
     * ì–¸ì–´ ê¸°ë°˜ ì½”ë””ë„¤ì´í„° ì¶”ì²œ
     */
public List<CoordinatorLanguageMatch> findLanguageCompatibleCoordinators(
â‹®----
log.debug("ì–¸ì–´ ê¸°ë°˜ ì½”ë””ë„¤ì´í„° ê²€ìƒ‰ - ì–¸ì–´: {}, êµ­ê°€: {}, ì „ë¬¸ìƒë‹´: {}",
â‹®----
// 1. í•´ë‹¹ ì–¸ì–´ ê°€ëŠ¥ ì½”ë””ë„¤ì´í„° ì¡°íšŒ
â‹®----
languageSkillRepository.findByLanguageCodeAndIsActiveTrue(preferredLanguage.toUpperCase());
â‹®----
// 2. ì „ë¬¸ ìƒë‹´ í•„ìš” ì‹œ ìˆ˜ì¤€ í•„í„°ë§
â‹®----
languageSkills = languageSkills.stream()
.filter(CoordinatorLanguageSkill::canProvideProfessionalConsultation)
.collect(Collectors.toList());
â‹®----
// 3. êµ­ê°€ ê²½í—˜ ê°€ì‚°ì  ì ìš©
List<CoordinatorLanguageMatch> matches = languageSkills.stream()
.map(skill -> createLanguageMatch(skill, countryCode))
.sorted(Comparator.comparing(CoordinatorLanguageMatch::getMatchScore).reversed())
â‹®----
log.info("ì–¸ì–´ ë§¤ì¹­ ì™„ë£Œ - ì–¸ì–´: {}, ë§¤ì¹­ëœ ì½”ë””ë„¤ì´í„°: {}ëª…", preferredLanguage, matches.size());
â‹®----
/**
     * ë‹¤êµ­ì–´ ì§€ì› ì½”ë””ë„¤ì´í„° ì¡°íšŒ
     */
public List<CoordinatorMultilingualProfile> findMultilingualCoordinators() {
// ì–¸ì–´ë³„ ê·¸ë£¹í•‘
â‹®----
languageSkillRepository.findByIsActiveTrueOrderByPriorityOrder().stream()
.collect(Collectors.groupingBy(CoordinatorLanguageSkill::getCoordinatorId));
â‹®----
return skillsByCoordinator.entrySet().stream()
.map(entry -> {
String coordinatorId = entry.getKey();
List<CoordinatorLanguageSkill> skills = entry.getValue();
â‹®----
return CoordinatorMultilingualProfile.builder()
.coordinatorId(coordinatorId)
.languageSkills(skills)
.totalLanguages(skills.size())
.averageScore(calculateAverageLanguageScore(skills))
.hasNativeLanguages(hasNativeLanguages(skills))
.supportedCountries(getSupportedCountries(skills))
.build();
â‹®----
.sorted(Comparator.comparing(CoordinatorMultilingualProfile::getAverageScore).reversed())
â‹®----
/**
     * íŠ¹ì • êµ­ê°€ì˜ ì¬ì™¸ë™í¬ë¥¼ ìœ„í•œ ìµœì  ì½”ë””ë„¤ì´í„° ì¶”ì²œ
     */
public List<CoordinatorLanguageMatch> findOptimalCoordinatorForOverseasKorean(
â‹®----
// 1. ì£¼ ì–¸ì–´ ë§¤ì¹­
â‹®----
allMatches.addAll(findLanguageCompatibleCoordinators(preferredLanguage, countryCode, true));
â‹®----
// 2. ì¶”ê°€ ì–¸ì–´ ë§¤ì¹­ (ë‚®ì€ ìš°ì„ ìˆœìœ„)
if (additionalLanguages != null && !additionalLanguages.isEmpty()) {
â‹®----
findLanguageCompatibleCoordinators(additionalLang, countryCode, false);
â‹®----
// ì¶”ê°€ ì–¸ì–´ëŠ” ë§¤ì¹­ ì ìˆ˜ ê°€ì¤‘ì¹˜ ì ìš©
additionalMatches.forEach(match ->
match.setMatchScore(match.getMatchScore() * 0.7));
â‹®----
allMatches.addAll(additionalMatches);
â‹®----
// 3. ì¤‘ë³µ ì œê±° ë° ì •ë ¬
return allMatches.stream()
.collect(Collectors.groupingBy(match -> match.getLanguageSkill().getCoordinatorId()))
.values().stream()
.map(matches -> matches.stream().max(Comparator.comparing(CoordinatorLanguageMatch::getMatchScore)).orElse(null))
.filter(match -> match != null)
â‹®----
.limit(10)
â‹®----
/**
     * ì–¸ì–´ë³„ ì„œë¹„ìŠ¤ ìš”ê¸ˆ ê³„ì‚°
     */
public ServiceFeeCalculation calculateLanguageServiceFee(
â‹®----
.findByCoordinatorIdAndLanguageCodeAndIsActiveTrue(coordinatorId, languageCode)
.orElse(null);
â‹®----
if (skill == null || skill.getServiceFeeRate() == null) {
return ServiceFeeCalculation.builder()
.baseFee(baseFee)
.languageFee(baseFee)
.feeRate(1.0)
.additionalFee(0.0)
.hasLanguagePremium(false)
â‹®----
double languageFee = baseFee * skill.getServiceFeeRate();
â‹®----
.languageFee(languageFee)
.feeRate(skill.getServiceFeeRate())
.additionalFee(additionalFee)
.hasLanguagePremium(skill.getServiceFeeRate() > 1.0)
.languageName(skill.getLanguageName())
.proficiencyLevel(skill.getProficiencyLevel().name())
â‹®----
/**
     * ì½”ë””ë„¤ì´í„°ë³„ ì§€ì› ê°€ëŠ¥ ì–¸ì–´ í†µê³„
     */
public Map<String, Long> getLanguageDistributionStatistics() {
return languageSkillRepository.findByIsActiveTrueOrderByPriorityOrder().stream()
.collect(Collectors.groupingBy(
â‹®----
Collectors.counting()
â‹®----
/**
     * ë¶€ì¡±í•œ ì–¸ì–´ ë¶„ì„ (ìˆ˜ìš” ëŒ€ë¹„ ê³µê¸‰ ë¶€ì¡±)
     */
public List<LanguageGapAnalysis> analyzeLanguageGaps() {
Map<String, Long> currentSupply = getLanguageDistributionStatistics();
â‹®----
// ì¬ì™¸ë™í¬ ì£¼ìš” ê±°ì£¼êµ­ ê¸°ë°˜ ìˆ˜ìš” ì¶”ì •
Map<String, Long> estimatedDemand = Map.of(
"EN", 50L, // ì˜ì–´ê¶Œ ì¬ì™¸ë™í¬ ë‹¤ìˆ˜
"ZH", 40L, // ì¤‘êµ­ ê±°ì£¼ ì¬ì™¸ë™í¬
"JP", 30L, // ì¼ë³¸ ê±°ì£¼ ì¬ì™¸ë™í¬
"ES", 15L, // ë‚¨ë¯¸ ì¬ì™¸ë™í¬
"RU", 10L, // êµ¬ì†Œë ¨ ì¬ì™¸ë™í¬
"VI", 8L,  // ë² íŠ¸ë‚¨ ì§„ì¶œ ì¦ê°€
"TH", 5L   // ë™ë‚¨ì•„ ì§„ì¶œ
â‹®----
return estimatedDemand.entrySet().stream()
â‹®----
String langCode = entry.getKey();
Long demand = entry.getValue();
Long supply = currentSupply.getOrDefault(langCode, 0L);
â‹®----
return LanguageGapAnalysis.builder()
.languageCode(langCode)
.languageName(getLanguageName(langCode))
.estimatedDemand(demand)
.currentSupply(supply)
.gap(demand - supply)
.supplyRatio((double) supply / demand)
.priority(demand - supply > 0 ? "HIGH" : "ADEQUATE")
â‹®----
.sorted(Comparator.comparing(LanguageGapAnalysis::getGap).reversed())
â‹®----
// ===== ë‚´ë¶€ í—¬í¼ ë©”ì„œë“œ =====
â‹®----
private CoordinatorLanguageMatch createLanguageMatch(CoordinatorLanguageSkill skill, String countryCode) {
double matchScore = skill.calculateMatchingScore();
â‹®----
// êµ­ê°€ ë§¤ì¹­ ë³´ë„ˆìŠ¤
if (skill.matchesCountry(countryCode)) {
â‹®----
// í˜„ì§€ ê²½í—˜ ì¶”ê°€ ë³´ë„ˆìŠ¤
if (skill.hasCountryExperience() &&
skill.getCountryExperience().toLowerCase().contains(getCountryName(countryCode).toLowerCase())) {
â‹®----
return CoordinatorLanguageMatch.builder()
.languageSkill(skill)
.matchScore(Math.min(matchScore, 5.0))
.matchReason(generateMatchReason(skill, countryCode, matchScore))
â‹®----
private double calculateAverageLanguageScore(List<CoordinatorLanguageSkill> skills) {
return skills.stream()
.mapToDouble(CoordinatorLanguageSkill::calculateMatchingScore)
.average()
.orElse(0.0);
â‹®----
private boolean hasNativeLanguages(List<CoordinatorLanguageSkill> skills) {
â‹®----
.anyMatch(skill -> skill.getProficiencyLevel() == CoordinatorLanguageSkill.LanguageProficiency.NATIVE);
â‹®----
private List<String> getSupportedCountries(List<CoordinatorLanguageSkill> skills) {
â‹®----
.filter(skill -> skill.getCountryExperience() != null)
.map(CoordinatorLanguageSkill::getCountryExperience)
â‹®----
private String generateMatchReason(CoordinatorLanguageSkill skill, String countryCode, double matchScore) {
StringBuilder reason = new StringBuilder();
â‹®----
reason.append("ğŸ—£ï¸ ").append(skill.getLanguageName())
.append(" (").append(skill.getProficiencyDisplayName()).append(")");
â‹®----
if (skill.hasCertification()) {
reason.append(" âœ“ ").append(skill.getCertification());
â‹®----
reason.append(" ğŸŒ ").append(getCountryName(countryCode)).append(" ì „ë¬¸");
â‹®----
if (skill.hasCountryExperience()) {
reason.append(" ğŸ“ í˜„ì§€ê²½í—˜: ").append(skill.getCountryExperience());
â‹®----
reason.append(" (ë§¤ì¹­ë„: ").append(String.format("%.1f", matchScore)).append("/5.0)");
â‹®----
return reason.toString();
â‹®----
private String getCountryName(String countryCode) {
return switch (countryCode.toUpperCase()) {
â‹®----
private String getLanguageName(String langCode) {
return switch (langCode.toUpperCase()) {
â‹®----
// ===== DTO í´ë˜ìŠ¤ë“¤ =====
â‹®----
public static class CoordinatorLanguageMatch {
â‹®----
public static class CoordinatorMultilingualProfile {
â‹®----
public static class ServiceFeeCalculation {
â‹®----
public static class LanguageGapAnalysis {
</file>

<file path="src/main/java/com/globalcarelink/external/config/AsyncConfig.java">
/**
 * ë¹„ë™ê¸° ì²˜ë¦¬ ë° ìŠ¤ì¼€ì¤„ë§ ì„¤ì •
 * ê³µê³µë°ì´í„° ë™ê¸°í™”ë¥¼ ìœ„í•œ ì „ìš© ìŠ¤ë ˆë“œ í’€ í¬í•¨
 */
â‹®----
public class AsyncConfig {
â‹®----
/**
     * ê¸°ë³¸ ë¹„ë™ê¸° ì‹¤í–‰ê¸°
     */
â‹®----
public Executor taskExecutor() {
ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
executor.setCorePoolSize(corePoolSize);
executor.setMaxPoolSize(maxPoolSize);
executor.setQueueCapacity(queueCapacity);
executor.setThreadNamePrefix("elderberry-async-");
executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());
executor.setWaitForTasksToCompleteOnShutdown(true);
executor.setAwaitTerminationSeconds(30);
â‹®----
executor.initialize();
â‹®----
log.info("ê¸°ë³¸ ë¹„ë™ê¸° ì‹¤í–‰ê¸° ì„¤ì • ì™„ë£Œ - Core: {}, Max: {}, Queue: {}",
â‹®----
/**
     * ê³µê³µë°ì´í„° ë™ê¸°í™” ì „ìš© ì‹¤í–‰ê¸°
     */
â‹®----
public Executor publicDataExecutor() {
â‹®----
executor.setCorePoolSize(publicDataCorePoolSize);
executor.setMaxPoolSize(publicDataMaxPoolSize);
executor.setQueueCapacity(publicDataQueueCapacity);
executor.setThreadNamePrefix("public-data-sync-");
â‹®----
executor.setAwaitTerminationSeconds(60); // ê³µê³µë°ì´í„° ë™ê¸°í™”ëŠ” ë” ê¸´ ëŒ€ê¸° ì‹œê°„
â‹®----
log.info("ê³µê³µë°ì´í„° ë™ê¸°í™” ì‹¤í–‰ê¸° ì„¤ì • ì™„ë£Œ - Core: {}, Max: {}, Queue: {}",
â‹®----
/**
     * í†µê³„ ì²˜ë¦¬ ì „ìš© ì‹¤í–‰ê¸°
     */
â‹®----
public Executor statisticsExecutor() {
â‹®----
executor.setCorePoolSize(2);
executor.setMaxPoolSize(5);
executor.setQueueCapacity(20);
executor.setThreadNamePrefix("statistics-");
â‹®----
log.info("í†µê³„ ì²˜ë¦¬ ì‹¤í–‰ê¸° ì„¤ì • ì™„ë£Œ");
â‹®----
/**
     * ë§¤ì¹­ ì²˜ë¦¬ ì „ìš© ì‹¤í–‰ê¸°
     */
â‹®----
public Executor matchingExecutor() {
â‹®----
executor.setCorePoolSize(3);
executor.setMaxPoolSize(8);
executor.setQueueCapacity(30);
executor.setThreadNamePrefix("matching-");
â‹®----
log.info("ë§¤ì¹­ ì²˜ë¦¬ ì‹¤í–‰ê¸° ì„¤ì • ì™„ë£Œ");
</file>

<file path="src/main/java/com/globalcarelink/external/config/PublicDataApiConfig.java">
/**
 * ê³µê³µë°ì´í„° API í´ë¼ì´ì–¸íŠ¸ë¥¼ ìœ„í•œ WebClient ì„¤ì •
 * ìµœì í™”ëœ íƒ€ì„ì•„ì›ƒ, ì¬ì‹œë„, ë¡œê¹… ë“±ì„ í¬í•¨
 */
â‹®----
public class PublicDataApiConfig {
â‹®----
private int maxMemorySize; // 1MB
â‹®----
/**
     * ê³µê³µë°ì´í„° API ì „ìš© WebClient ë¹ˆ ìƒì„±
     * 
     * @return ìµœì í™”ëœ WebClient ì¸ìŠ¤í„´ìŠ¤
     */
â‹®----
public WebClient publicDataWebClient() {
â‹®----
// Netty HTTP í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
HttpClient httpClient = HttpClient.create()
.option(ChannelOption.CONNECT_TIMEOUT_MILLIS, connectTimeout)
.responseTimeout(Duration.ofMillis(readTimeout))
.doOnConnected(conn -> conn
.addHandlerLast(new ReadTimeoutHandler(readTimeout, TimeUnit.MILLISECONDS))
.addHandlerLast(new WriteTimeoutHandler(writeTimeout, TimeUnit.MILLISECONDS))
â‹®----
return WebClient.builder()
.baseUrl(baseUrl)
.clientConnector(new ReactorClientHttpConnector(httpClient))
.codecs(configurer -> configurer.defaultCodecs().maxInMemorySize(maxMemorySize))
.filter(logRequest())
.filter(logResponse())
.filter(handleErrors())
.build();
â‹®----
/**
     * ìš”ì²­ ë¡œê¹… í•„í„°
     * 
     * @return ìš”ì²­ ë¡œê¹… ExchangeFilterFunction
     */
private ExchangeFilterFunction logRequest() {
return ExchangeFilterFunction.ofRequestProcessor(clientRequest -> {
if (log.isDebugEnabled()) {
log.debug("ê³µê³µë°ì´í„° API ìš”ì²­: {} {}",
clientRequest.method(), clientRequest.url());
â‹®----
clientRequest.headers().forEach((name, values) ->
log.debug("ìš”ì²­ í—¤ë”: {} = {}", name, values));
â‹®----
return Mono.just(clientRequest);
â‹®----
/**
     * ì‘ë‹µ ë¡œê¹… í•„í„°
     * 
     * @return ì‘ë‹µ ë¡œê¹… ExchangeFilterFunction
     */
private ExchangeFilterFunction logResponse() {
return ExchangeFilterFunction.ofResponseProcessor(clientResponse -> {
â‹®----
log.debug("ê³µê³µë°ì´í„° API ì‘ë‹µ: {} {}",
clientResponse.statusCode(), clientResponse.headers().asHttpHeaders());
â‹®----
// ì‘ë‹µ ì‹œê°„ ì¸¡ì •ì„ ìœ„í•œ ë¡œê¹…
long startTime = System.currentTimeMillis();
return Mono.just(clientResponse)
.doFinally(signalType -> {
long duration = System.currentTimeMillis() - startTime;
if (duration > 5000) { // 5ì´ˆ ì´ìƒ ì†Œìš”ëœ ê²½ìš° ê²½ê³ 
log.warn("ê³µê³µë°ì´í„° API ì‘ë‹µ ì§€ì—°: {}ms", duration);
} else if (log.isDebugEnabled()) {
log.debug("ê³µê³µë°ì´í„° API ì‘ë‹µ ì‹œê°„: {}ms", duration);
â‹®----
/**
     * ì—ëŸ¬ ì²˜ë¦¬ í•„í„°
     * 
     * @return ì—ëŸ¬ ì²˜ë¦¬ ExchangeFilterFunction
     */
private ExchangeFilterFunction handleErrors() {
â‹®----
if (clientResponse.statusCode().isError()) {
log.error("ê³µê³µë°ì´í„° API ì˜¤ë¥˜ ì‘ë‹µ: {} {}",
â‹®----
return clientResponse.bodyToMono(String.class)
.defaultIfEmpty("ì‘ë‹µ ë³¸ë¬¸ ì—†ìŒ")
.doOnNext(body -> log.error("ì˜¤ë¥˜ ì‘ë‹µ ë³¸ë¬¸: {}", body))
.then(Mono.just(clientResponse));
â‹®----
return Mono.just(clientResponse);
â‹®----
/**
     * ê³µê³µë°ì´í„° API ì„¤ì • ì •ë³´ë¥¼ ë¡œê¹…
     */
â‹®----
public void logPublicDataApiConfig() {
log.info("=== ê³µê³µë°ì´í„° API ì„¤ì • ===");
log.info("Base URL: {}", baseUrl);
log.info("Connect Timeout: {}ms", connectTimeout);
log.info("Read Timeout: {}ms", readTimeout);
log.info("Write Timeout: {}ms", writeTimeout);
log.info("Max Memory Size: {}bytes", maxMemorySize);
log.info("========================");
</file>

<file path="src/main/java/com/globalcarelink/external/dto/FacilityStatusResponse.java">
/**
 * ìš”ì–‘ê¸°ê´€ ìš´ì˜ ìƒíƒœ API ì‘ë‹µ DTO
 */
â‹®----
public class FacilityStatusResponse {
â‹®----
public static class Response {
â‹®----
public static class Header {
â‹®----
public static class Body {
â‹®----
/**
     * ìš”ì–‘ê¸°ê´€ ìš´ì˜ ìƒíƒœ ì •ë³´
     */
â‹®----
public static class FacilityStatus {
â‹®----
/**
         * ìš”ì–‘ê¸°ê´€ê¸°í˜¸
         */
â‹®----
/**
         * ìš”ì–‘ê¸°ê´€ëª…
         */
â‹®----
/**
         * ì¢…ë³„ì½”ë“œ
         */
â‹®----
/**
         * ì¢…ë³„ì½”ë“œëª…
         */
â‹®----
/**
         * ì‹œë„ì½”ë“œ
         */
â‹®----
/**
         * ì‹œë„ì½”ë“œëª…
         */
â‹®----
/**
         * ì‹œêµ°êµ¬ì½”ë“œ
         */
â‹®----
/**
         * ì‹œêµ°êµ¬ì½”ë“œëª…
         */
â‹®----
/**
         * ê°œì„¤ì¼ì
         */
â‹®----
/**
         * íì—…ì¼ì
         */
â‹®----
/**
         * íœ´ì—…ì‹œì‘ì¼ì
         */
â‹®----
/**
         * íœ´ì—…ì¢…ë£Œì¼ì
         */
â‹®----
/**
         * ì¬ê°œì—…ì¼ì
         */
â‹®----
/**
         * ìš´ì˜ìƒíƒœ (1: ì •ìƒìš´ì˜, 2: íœ´ì—…, 3: íì—…)
         */
â‹®----
/**
         * ìš´ì˜ìƒíƒœëª…
         */
â‹®----
/**
         * ì£¼ì†Œ
         */
â‹®----
/**
         * ì „í™”ë²ˆí˜¸
         */
â‹®----
/**
         * ëŒ€í‘œìëª…
         */
â‹®----
/**
         * ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸
         */
â‹®----
/**
         * í—ˆê°€ë²ˆí˜¸
         */
â‹®----
/**
         * í—ˆê°€ì¼ì
         */
â‹®----
/**
         * ë³€ê²½ì¼ì
         */
â‹®----
/**
         * ë³€ê²½ì‚¬ìœ 
         */
â‹®----
/**
         * ì´ì •ì›
         */
â‹®----
/**
         * í˜„ì¬ì…ì›í™˜ììˆ˜
         */
â‹®----
/**
         * ë³‘ìƒìˆ˜
         */
â‹®----
/**
         * ì˜ì‚¬ìˆ˜
         */
â‹®----
/**
         * ê°„í˜¸ì‚¬ìˆ˜
         */
â‹®----
/**
         * ê¸°íƒ€ì§ì›ìˆ˜
         */
â‹®----
/**
         * ë°ì´í„° ê¸°ì¤€ì¼ì
         */
</file>

<file path="src/main/java/com/globalcarelink/external/dto/HospitalSearchResponse.java">
/**
 * ë³‘ì› ì •ë³´ ê²€ìƒ‰ API ì‘ë‹µ DTO
 */
â‹®----
public class HospitalSearchResponse {
â‹®----
public static class Response {
â‹®----
public static class Header {
â‹®----
public static class Body {
â‹®----
/**
     * ë³‘ì› ì •ë³´
     */
â‹®----
public static class Hospital {
â‹®----
/**
         * ìš”ì–‘ê¸°ê´€ê¸°í˜¸
         */
â‹®----
/**
         * ìš”ì–‘ê¸°ê´€ëª…
         */
â‹®----
/**
         * ì¢…ë³„ì½”ë“œ
         */
â‹®----
/**
         * ì¢…ë³„ì½”ë“œëª…
         */
â‹®----
/**
         * ì‹œë„ì½”ë“œ
         */
â‹®----
/**
         * ì‹œë„ì½”ë“œëª…
         */
â‹®----
/**
         * ì‹œêµ°êµ¬ì½”ë“œ
         */
â‹®----
/**
         * ì‹œêµ°êµ¬ì½”ë“œëª…
         */
â‹®----
/**
         * ìë©´ë™ì½”ë“œ
         */
â‹®----
/**
         * ìë©´ë™ì½”ë“œëª…
         */
â‹®----
/**
         * ìš°í¸ë²ˆí˜¸
         */
â‹®----
/**
         * ì£¼ì†Œ
         */
â‹®----
/**
         * ì „í™”ë²ˆí˜¸
         */
â‹®----
/**
         * í™ˆí˜ì´ì§€
         */
â‹®----
/**
         * ë³‘ìƒìˆ˜
         */
â‹®----
/**
         * ì˜ì‚¬ìˆ˜
         */
â‹®----
/**
         * ê°„ë³‘ì¸ìˆ˜
         */
â‹®----
/**
         * ì‘ê¸‰ì‹¤ ìš´ì˜ ì—¬ë¶€
         */
â‹®----
/**
         * CT ë³´ìœ  ì—¬ë¶€
         */
â‹®----
/**
         * MRI ë³´ìœ  ì—¬ë¶€
         */
â‹®----
/**
         * PET ë³´ìœ  ì—¬ë¶€
         */
â‹®----
/**
         * í˜ˆê´€ì¡°ì˜ê¸° ë³´ìœ  ì—¬ë¶€
         */
â‹®----
/**
         * ê°ë§ˆë‚˜ì´í”„ ë³´ìœ  ì—¬ë¶€
         */
â‹®----
/**
         * ì…ì›ì‹¤ êµ¬ë¶„
         */
â‹®----
/**
         * ì¢Œí‘œ(X)
         */
â‹®----
/**
         * ì¢Œí‘œ(Y)
         */
â‹®----
/**
         * ì§„ë£Œê³¼ëª©
         */
â‹®----
/**
         * íŠ¹ìˆ˜ì§„ë£Œê³¼ëª©
         */
â‹®----
/**
         * ì„¤ë¦½êµ¬ë¶„
         */
â‹®----
/**
         * ê°œì„¤ì¼ì
         */
â‹®----
/**
         * íì—…ì¼ì
         */
â‹®----
/**
         * íœ´ì—…ì‹œì‘ì¼ì
         */
â‹®----
/**
         * íœ´ì—…ì¢…ë£Œì¼ì
         */
</file>

<file path="src/main/java/com/globalcarelink/external/dto/LtciDetailResponse.java">
/**
 * ì¥ê¸°ìš”ì–‘ê¸°ê´€ ìƒì„¸ ì •ë³´ API ì‘ë‹µ DTO
 */
â‹®----
public class LtciDetailResponse {
â‹®----
public static class Response {
â‹®----
public static class Header {
â‹®----
public static class Body {
â‹®----
/**
     * ì¥ê¸°ìš”ì–‘ê¸°ê´€ ìƒì„¸ ì •ë³´
     */
â‹®----
public static class LtciInstitutionDetail {
â‹®----
/**
         * ê¸°ê´€ ì½”ë“œ
         */
â‹®----
/**
         * ê¸°ê´€ëª…
         */
â‹®----
/**
         * ì‹œì„¤ ì¢…ë¥˜ ìƒì„¸
         */
â‹®----
/**
         * ëŒ€í‘œìëª…
         */
â‹®----
/**
         * ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸
         */
â‹®----
/**
         * ê°œì„¤í—ˆê°€ì¼
         */
â‹®----
/**
         * ì´ ì •ì›
         */
â‹®----
/**
         * ë“±ê¸‰ë³„ ì •ì› ì •ë³´
         */
â‹®----
/**
         * ì§ì› í˜„í™©
         */
â‹®----
/**
         * ì‹œì„¤ ì •ë³´
         */
â‹®----
/**
         * ì„œë¹„ìŠ¤ ì •ë³´
         */
â‹®----
/**
         * ë¹„ìš© ì •ë³´
         */
â‹®----
/**
         * í‰ê°€ ì •ë³´
         */
â‹®----
/**
     * ë“±ê¸‰ë³„ ì •ì› ì •ë³´
     */
â‹®----
public static class GradeCapacity {
â‹®----
/**
     * ì§ì› í˜„í™© ì •ë³´
     */
â‹®----
public static class StaffInfo {
â‹®----
/**
     * ì‹œì„¤ ì •ë³´
     */
â‹®----
public static class FacilityInfo {
â‹®----
/**
     * ì„œë¹„ìŠ¤ ì •ë³´
     */
â‹®----
public static class ServiceInfo {
â‹®----
/**
     * ë¹„ìš© ì •ë³´
     */
â‹®----
public static class CostInfo {
â‹®----
/**
     * ì¶”ê°€ ì„œë¹„ìŠ¤ ë¹„ìš©
     */
â‹®----
public static class AdditionalServiceCost {
â‹®----
/**
     * í‰ê°€ ì •ë³´
     */
â‹®----
public static class EvaluationInfo {
â‹®----
/**
     * í‰ê°€ ì˜ì—­ë³„ ì ìˆ˜
     */
â‹®----
public static class CategoryScore {
</file>

<file path="src/main/java/com/globalcarelink/external/dto/LtciSearchResponse.java">
/**
 * ì¥ê¸°ìš”ì–‘ê¸°ê´€ ê²€ìƒ‰ API ì‘ë‹µ DTO
 * ê³µê³µë°ì´í„° í¬í„¸ì˜ í‘œì¤€ ì‘ë‹µ êµ¬ì¡°ì— ë§ì¶° ì„¤ê³„ëœ í´ë˜ìŠ¤
 */
â‹®----
public class LtciSearchResponse {
â‹®----
public static class Response {
â‹®----
public static class Header {
â‹®----
public static class Body {
â‹®----
/**
     * ì¥ê¸°ìš”ì–‘ê¸°ê´€ ì •ë³´
     */
â‹®----
public static class LtciInstitution {
â‹®----
/**
         * ê¸°ê´€ ì½”ë“œ
         */
â‹®----
/**
         * ê¸°ê´€ëª…
         */
â‹®----
/**
         * ì‹œì„¤ ì¢…ë¥˜
         */
â‹®----
/**
         * ì‹œì„¤ ì¢…ë¥˜ëª…
         */
â‹®----
/**
         * ì£¼ì†Œ
         */
â‹®----
/**
         * ìƒì„¸ ì£¼ì†Œ
         */
â‹®----
/**
         * ì „í™”ë²ˆí˜¸
         */
â‹®----
/**
         * íŒ©ìŠ¤ë²ˆí˜¸
         */
â‹®----
/**
         * í™ˆí˜ì´ì§€ URL
         */
â‹®----
/**
         * ì‹œë„ ì½”ë“œ
         */
â‹®----
/**
         * ì‹œë„ëª…
         */
â‹®----
/**
         * ì‹œêµ°êµ¬ ì½”ë“œ
         */
â‹®----
/**
         * ì‹œêµ°êµ¬ëª…
         */
â‹®----
/**
         * ìœ„ë„
         */
â‹®----
/**
         * ê²½ë„
         */
â‹®----
/**
         * ì •ì› ìˆ˜
         */
â‹®----
/**
         * í˜„ì¬ ì…ì†Œì ìˆ˜
         */
â‹®----
/**
         * ê°œì„¤ì¼
         */
â‹®----
/**
         * ìš´ì˜ ìƒíƒœ (1: ìš´ì˜, 0: íì—…)
         */
â‹®----
/**
         * í‰ê°€ ë“±ê¸‰ (A, B, C, D, E)
         */
â‹®----
/**
         * í‰ê°€ ì ìˆ˜
         */
â‹®----
/**
         * ì›” ê¸°ë³¸ë£Œ (ì›)
         */
â‹®----
/**
         * ì…ì†Œ ê°€ëŠ¥ ë“±ê¸‰ (1-5ë“±ê¸‰)
         */
â‹®----
/**
         * ì „ë¬¸ ì„œë¹„ìŠ¤ (ì¹˜ë§¤, ì¬í™œ ë“±)
         */
â‹®----
/**
         * í¸ì˜ì‹œì„¤ ì •ë³´
         */
â‹®----
/**
         * ì˜ë£Œì§„ ì •ë³´
         */
â‹®----
/**
         * ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ì¼ì‹œ
         */
</file>

<file path="src/main/java/com/globalcarelink/external/dto/PharmacySearchResponse.java">
/**
 * ì•½êµ­ ì •ë³´ ê²€ìƒ‰ API ì‘ë‹µ DTO
 */
â‹®----
public class PharmacySearchResponse {
â‹®----
public static class Response {
â‹®----
public static class Header {
â‹®----
public static class Body {
â‹®----
/**
     * ì•½êµ­ ì •ë³´
     */
â‹®----
public static class Pharmacy {
â‹®----
/**
         * ì•½êµ­ ì½”ë“œ
         */
â‹®----
/**
         * ì•½êµ­ ì£¼ì†Œ
         */
â‹®----
/**
         * ì•½êµ­ ì „í™”ë²ˆí˜¸
         */
â‹®----
/**
         * ì•½êµ­ ì‘ê¸‰ ì „í™”ë²ˆí˜¸
         */
â‹®----
/**
         * ì•½êµ­ êµ¬ë¶„
         */
â‹®----
/**
         * ì•½êµ­ êµ¬ë¶„ëª…
         */
â‹®----
/**
         * ì‹œë„ ì½”ë“œ
         */
â‹®----
/**
         * ì‹œêµ°êµ¬ ì½”ë“œ
         */
â‹®----
/**
         * ê²½ë„
         */
â‹®----
/**
         * ìœ„ë„
         */
â‹®----
/**
         * ìš°í¸ë²ˆí˜¸
         */
â‹®----
/**
         * ìš°í¸ë²ˆí˜¸2
         */
â‹®----
/**
         * ì›”ìš”ì¼ ìš´ì˜ì‹œê°„
         */
â‹®----
/**
         * í™”ìš”ì¼ ìš´ì˜ì‹œê°„
         */
â‹®----
/**
         * ìˆ˜ìš”ì¼ ìš´ì˜ì‹œê°„
         */
â‹®----
/**
         * ëª©ìš”ì¼ ìš´ì˜ì‹œê°„
         */
â‹®----
/**
         * ê¸ˆìš”ì¼ ìš´ì˜ì‹œê°„
         */
â‹®----
/**
         * í† ìš”ì¼ ìš´ì˜ì‹œê°„
         */
â‹®----
/**
         * ì¼ìš”ì¼ ìš´ì˜ì‹œê°„
         */
â‹®----
/**
         * ê³µíœ´ì¼ ìš´ì˜ì‹œê°„
         */
â‹®----
/**
         * 24ì‹œê°„ ìš´ì˜ ì—¬ë¶€
         */
â‹®----
/**
         * ê¸°ê´€ ì„¤ëª…
         */
â‹®----
/**
         * ê¸°ê´€ID
         */
â‹®----
/**
         * ë°ì´í„° ê°±ì‹  ì¼ì‹œ
         */
</file>

<file path="src/main/java/com/globalcarelink/external/FacilitySyncService.java">
/**
 * ê³µê³µë°ì´í„° APIì—ì„œ ìˆ˜ì§‘í•œ ì‹œì„¤ ì •ë³´ë¥¼ ì‹œìŠ¤í…œ ë‚´ FacilityProfileê³¼ ë™ê¸°í™”í•˜ëŠ” ì„œë¹„ìŠ¤
 * ë°ì´í„° ë§¤í•‘, ì—…ë°ì´íŠ¸ ë¡œì§, ì¤‘ë³µ ì²˜ë¦¬, ìƒíƒœ ê´€ë¦¬ ë“±ì„ ë‹´ë‹¹
 */
â‹®----
public class FacilitySyncService {
â‹®----
// ì§€ì—­ ì½”ë“œ ë§¤í•‘ (ê³µê³µë°ì´í„° API ì½”ë“œ -> ìš°ë¦¬ ì‹œìŠ¤í…œ ì½”ë“œ)
private static final Map<String, String> REGION_CODE_MAP = createRegionCodeMap();
â‹®----
private static Map<String, String> createRegionCodeMap() {
â‹®----
map.put("11", "ì„œìš¸íŠ¹ë³„ì‹œ");
map.put("26", "ë¶€ì‚°ê´‘ì—­ì‹œ");
map.put("27", "ëŒ€êµ¬ê´‘ì—­ì‹œ");
map.put("28", "ì¸ì²œê´‘ì—­ì‹œ");
map.put("29", "ê´‘ì£¼ê´‘ì—­ì‹œ");
map.put("30", "ëŒ€ì „ê´‘ì—­ì‹œ");
map.put("31", "ìš¸ì‚°ê´‘ì—­ì‹œ");
map.put("36", "ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ");
map.put("41", "ê²½ê¸°ë„");
map.put("42", "ê°•ì›íŠ¹ë³„ìì¹˜ë„");
map.put("43", "ì¶©ì²­ë¶ë„");
map.put("44", "ì¶©ì²­ë‚¨ë„");
map.put("45", "ì „ë¶íŠ¹ë³„ìì¹˜ë„");
map.put("46", "ì „ë¼ë‚¨ë„");
map.put("47", "ê²½ìƒë¶ë„");
map.put("48", "ê²½ìƒë‚¨ë„");
map.put("50", "ì œì£¼íŠ¹ë³„ìì¹˜ë„");
return Collections.unmodifiableMap(map);
â‹®----
// ì‹œì„¤ íƒ€ì… ë§¤í•‘ (ê³µê³µë°ì´í„° API -> ìš°ë¦¬ ì‹œìŠ¤í…œ)
private static final Map<String, String> FACILITY_TYPE_MAP = createFacilityTypeMap();
â‹®----
private static Map<String, String> createFacilityTypeMap() {
â‹®----
map.put("01", "ë…¸ì¸ìš”ì–‘ì‹œì„¤");
map.put("02", "ë…¸ì¸ìš”ì–‘ê³µë™ìƒí™œê°€ì •");
map.put("03", "ë…¸ì¸ì „ë¬¸ë³‘ì›");
map.put("04", "ì¬ê°€ë…¸ì¸ë³µì§€ì‹œì„¤");
map.put("05", "ì£¼ê°„ë³´í˜¸ì‹œì„¤");
map.put("06", "ë‹¨ê¸°ë³´í˜¸ì‹œì„¤");
map.put("07", "ë°©ë¬¸ìš”ì–‘ì„œë¹„ìŠ¤");
map.put("08", "ë°©ë¬¸ëª©ìš•ì„œë¹„ìŠ¤");
map.put("09", "ë°©ë¬¸ê°„í˜¸ì„œë¹„ìŠ¤");
map.put("10", "ì£¼ì•¼ê°„ë³´í˜¸ì„œë¹„ìŠ¤");
â‹®----
/**
     * íŠ¹ì • ì§€ì—­ì˜ ì¥ê¸°ìš”ì–‘ê¸°ê´€ ë°ì´í„°ë¥¼ ë™ê¸°í™”
     * 
     * @param region ì§€ì—­ëª… (ì˜ˆ: "ì„œìš¸íŠ¹ë³„ì‹œ")
     * @return ë™ê¸°í™” ê²°ê³¼ í†µê³„
     */
â‹®----
public CompletableFuture<SyncResult> syncFacilitiesByRegion(String region) {
log.info("ì§€ì—­ë³„ ì‹œì„¤ ë™ê¸°í™” ì‹œì‘ - ì§€ì—­: {}", region);
â‹®----
SyncResult result = new SyncResult();
result.setRegion(region);
result.setStartTime(LocalDateTime.now());
â‹®----
// 1. ê³µê³µë°ì´í„° APIì—ì„œ ì§€ì—­ë³„ ì‹œì„¤ ê²€ìƒ‰
â‹®----
.searchLongTermCareInstitutions(region, null, 1, 1000)
.block();
â‹®----
log.error("ê³µê³µë°ì´í„° API í˜¸ì¶œ ì‹¤íŒ¨ - ì§€ì—­: {}", region, e);
result.setErrorMessage("API í˜¸ì¶œ ì‹¤íŒ¨: " + e.getMessage());
return CompletableFuture.completedFuture(result);
â‹®----
if (searchResponse == null || searchResponse.getResponse() == null ||
searchResponse.getResponse().getBody() == null) {
log.warn("ì§€ì—­ë³„ ì‹œì„¤ ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ - ì§€ì—­: {}", region);
result.setErrorMessage("ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ");
â‹®----
searchResponse.getResponse().getBody().getItems();
â‹®----
result.setTotalFound(institutions.size());
log.info("ì§€ì—­ë³„ ì‹œì„¤ ê²€ìƒ‰ ì™„ë£Œ - ì§€ì—­: {}, ê²€ìƒ‰ëœ ì‹œì„¤ ìˆ˜: {}", region, institutions.size());
â‹®----
// 2. ê° ì‹œì„¤ì— ëŒ€í•´ ìƒì„¸ ì •ë³´ ì¡°íšŒ ë° ë™ê¸°í™”
â‹®----
boolean syncSuccess = syncSingleFacility(institution);
â‹®----
processedIds.add(institution.getInstitutionCode());
result.incrementProcessed();
â‹®----
errorIds.add(institution.getInstitutionCode());
result.incrementErrors();
â‹®----
log.error("ê°œë³„ ì‹œì„¤ ë™ê¸°í™” ì‹¤íŒ¨ - ì‹œì„¤ ì½”ë“œ: {}, ì˜¤ë¥˜: {}",
institution.getInstitutionCode(), e.getMessage(), e);
â‹®----
// 3. ë™ê¸°í™” ê²°ê³¼ ì •ë¦¬
result.setProcessedIds(processedIds);
result.setErrorIds(errorIds);
result.setEndTime(LocalDateTime.now());
â‹®----
log.info("ì§€ì—­ë³„ ì‹œì„¤ ë™ê¸°í™” ì™„ë£Œ - ì§€ì—­: {}, ì²˜ë¦¬: {}, ì˜¤ë¥˜: {}",
region, result.getProcessedCount(), result.getErrorCount());
â‹®----
// 4. ìºì‹œ ë¬´íš¨í™”
evictFacilityCaches();
â‹®----
log.error("ì§€ì—­ë³„ ì‹œì„¤ ë™ê¸°í™” ì‹¤íŒ¨ - ì§€ì—­: {}", region, e);
result.setErrorMessage(e.getMessage());
â‹®----
/**
     * ê°œë³„ ì‹œì„¤ ì •ë³´ ë™ê¸°í™”
     * 
     * @param institution ê³µê³µë°ì´í„° APIì—ì„œ ì¡°íšŒí•œ ì‹œì„¤ ì •ë³´
     * @return ë™ê¸°í™” ì„±ê³µ ì—¬ë¶€
     */
private boolean syncSingleFacility(LtciSearchResponse.LtciInstitution institution) {
â‹®----
log.debug("ê°œë³„ ì‹œì„¤ ë™ê¸°í™” ì‹œì‘ - ì‹œì„¤: {} ({})",
institution.getInstitutionName(), institution.getInstitutionCode());
â‹®----
// 1. ìƒì„¸ ì •ë³´ ì¡°íšŒ (ì„ íƒì )
â‹®----
.getLongTermCareInstitutionDetail(institution.getInstitutionCode())
â‹®----
log.warn("ìƒì„¸ ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨ - ì‹œì„¤ ì½”ë“œ: {}, ê¸°ë³¸ ì •ë³´ë¡œ ì§„í–‰", institution.getInstitutionCode());
â‹®----
// 2. ìš´ì˜ ìƒíƒœ ì¡°íšŒ (ì„ íƒì )
â‹®----
.getFacilityOperationStatus(institution.getInstitutionCode())
â‹®----
log.warn("ìš´ì˜ ìƒíƒœ ì¡°íšŒ ì‹¤íŒ¨ - ì‹œì„¤ ì½”ë“œ: {}, ê¸°ë³¸ ì •ë³´ë¡œ ì§„í–‰", institution.getInstitutionCode());
â‹®----
// 3. ê¸°ì¡´ ì‹œì„¤ ì •ë³´ í™•ì¸ (externalId í•„ë“œë¡œ ê²€ìƒ‰)
â‹®----
.findAll()
.stream()
.filter(f -> institution.getInstitutionCode().equals(f.getExternalId()))
.collect(Collectors.toList());
â‹®----
if (!existingFacilities.isEmpty()) {
// ê¸°ì¡´ ì‹œì„¤ ì—…ë°ì´íŠ¸
facilityProfile = existingFacilities.get(0);
updateExistingFacility(facilityProfile, institution, detailResponse, statusResponse);
log.debug("ê¸°ì¡´ ì‹œì„¤ ì—…ë°ì´íŠ¸ - ID: {}", facilityProfile.getId());
â‹®----
// ìƒˆ ì‹œì„¤ ìƒì„±
facilityProfile = createNewFacility(institution, detailResponse, statusResponse);
log.debug("ìƒˆ ì‹œì„¤ ìƒì„± - ì™¸ë¶€ ID: {}", institution.getInstitutionCode());
â‹®----
// 4. ì‹œì„¤ ì •ë³´ ì €ì¥
facilityProfileRepository.save(facilityProfile);
â‹®----
/**
     * ìƒˆ ì‹œì„¤ í”„ë¡œí•„ ìƒì„±
     */
private FacilityProfile createNewFacility(
â‹®----
FacilityProfile facility = new FacilityProfile();
â‹®----
// ê¸°ë³¸ ì •ë³´ ë§¤í•‘
facility.setExternalId(institution.getInstitutionCode());
facility.setFacilityName(institution.getInstitutionName());
facility.setFacilityType(mapFacilityType(institution.getInstitutionType()));
facility.setAddress(institution.getAddress());
facility.setPhoneNumber(institution.getPhoneNumber());
facility.setWebsiteUrl(institution.getHomepageUrl());
â‹®----
// ìœ„ì¹˜ ì •ë³´ (Doubleì„ BigDecimalë¡œ ë³€í™˜)
if (institution.getLatitude() != null && institution.getLongitude() != null) {
facility.setLatitude(BigDecimal.valueOf(institution.getLatitude()));
facility.setLongitude(BigDecimal.valueOf(institution.getLongitude()));
â‹®----
// ì •ì› ì •ë³´
if (institution.getCapacity() != null) {
facility.setTotalCapacity(institution.getCapacity());
â‹®----
if (institution.getCurrentOccupancy() != null) {
facility.setCurrentOccupancy(institution.getCurrentOccupancy());
â‹®----
// í‰ê°€ ì •ë³´
if (institution.getEvaluationGrade() != null) {
facility.setFacilityGrade(institution.getEvaluationGrade());
â‹®----
if (institution.getEvaluationScore() != null) {
// Doubleì„ Integerë¡œ ë³€í™˜
facility.setEvaluationScore(institution.getEvaluationScore().intValue());
â‹®----
// ë¹„ìš© ì •ë³´
if (institution.getMonthlyBasicFee() != null) {
facility.setMonthlyBasicFee(institution.getMonthlyBasicFee());
â‹®----
// ìƒì„¸ ì •ë³´ ë§¤í•‘ (detailResponseê°€ ìˆëŠ” ê²½ìš°)
if (detailResponse != null && detailResponse.getResponse() != null &&
detailResponse.getResponse().getBody() != null) {
mapDetailInformation(facility, detailResponse.getResponse().getBody().getItem());
â‹®----
// ìš´ì˜ ìƒíƒœ ë§¤í•‘ (statusResponseê°€ ìˆëŠ” ê²½ìš°)
if (statusResponse != null && statusResponse.getResponse() != null &&
statusResponse.getResponse().getBody() != null &&
!statusResponse.getResponse().getBody().getItems().isEmpty()) {
mapOperationStatus(facility, statusResponse.getResponse().getBody().getItems().get(0));
â‹®----
// ë™ê¸°í™” ë©”íƒ€ë°ì´í„°
facility.setDataSource("PUBLIC_API");
facility.setLastSyncedAt(LocalDateTime.now());
â‹®----
/**
     * ê¸°ì¡´ ì‹œì„¤ ì •ë³´ ì—…ë°ì´íŠ¸
     */
private void updateExistingFacility(
â‹®----
// ê¸°ë³¸ ì •ë³´ ì—…ë°ì´íŠ¸ (ë³€ê²½ëœ ê²½ìš°ë§Œ)
if (!Objects.equals(facility.getFacilityName(), institution.getInstitutionName())) {
â‹®----
if (!Objects.equals(facility.getAddress(), institution.getAddress())) {
â‹®----
if (!Objects.equals(facility.getPhoneNumber(), institution.getPhoneNumber())) {
â‹®----
// ì •ì› ë° ì…ì†Œ í˜„í™© ì—…ë°ì´íŠ¸
â‹®----
// í‰ê°€ ì •ë³´ ì—…ë°ì´íŠ¸
â‹®----
// ìƒì„¸ ì •ë³´ ì—…ë°ì´íŠ¸
â‹®----
// ìš´ì˜ ìƒíƒœ ì—…ë°ì´íŠ¸
â‹®----
// ë™ê¸°í™” ë©”íƒ€ë°ì´í„° ì—…ë°ì´íŠ¸
â‹®----
/**
     * ìƒì„¸ ì •ë³´ ë§¤í•‘
     */
private void mapDetailInformation(FacilityProfile facility, LtciDetailResponse.LtciInstitutionDetail detail) {
â‹®----
// ì§ì› ì •ë³´
if (detail.getStaffInfo() != null) {
facility.setTotalStaff(detail.getStaffInfo().getTotalStaff());
facility.setDoctorCount(detail.getStaffInfo().getDoctors());
facility.setNurseCount(detail.getStaffInfo().getNurses());
â‹®----
// ì‹œì„¤ ì •ë³´
if (detail.getFacilityInfo() != null) {
facility.setTotalFloorArea(detail.getFacilityInfo().getTotalFloorArea());
facility.setBuildingStructure(detail.getFacilityInfo().getBuildingStructure());
facility.setParkingSpaces(detail.getFacilityInfo().getParkingSpaces());
â‹®----
// ì„œë¹„ìŠ¤ ì •ë³´
if (detail.getServiceInfo() != null) {
if (detail.getServiceInfo().getSpecializedCare() != null) {
facility.setSpecialServices(String.join(",", detail.getServiceInfo().getSpecializedCare()));
â‹®----
if (detail.getCostInfo() != null) {
if (detail.getCostInfo().getMonthlyBasicFee() != null) {
facility.setMonthlyBasicFee(detail.getCostInfo().getMonthlyBasicFee());
â‹®----
if (detail.getCostInfo().getMealCost() != null) {
facility.setMealCost(detail.getCostInfo().getMealCost());
â‹®----
/**
     * ìš´ì˜ ìƒíƒœ ë§¤í•‘
     */
private void mapOperationStatus(FacilityProfile facility, FacilityStatusResponse.FacilityStatus status) {
â‹®----
// ìš´ì˜ ìƒíƒœ
facility.setOperationStatus(status.getOperationStatus());
â‹®----
// ê°œì„¤/íì—… ì¼ì
facility.setEstablishmentDate(status.getEstablishmentDate());
facility.setClosureDate(status.getClosureDate());
â‹®----
// ëŒ€í‘œì ì •ë³´
facility.setRepresentativeName(status.getRepresentativeName());
facility.setBusinessRegistrationNumber(status.getBusinessRegistrationNumber());
â‹®----
/**
     * ì‹œì„¤ íƒ€ì… ë§¤í•‘
     */
private String mapFacilityType(String apiType) {
return FACILITY_TYPE_MAP.getOrDefault(apiType, "ê¸°íƒ€");
â‹®----
/**
     * ì „ì²´ ì§€ì—­ ì‹œì„¤ ë™ê¸°í™”
     * 
     * @return ì „ì²´ ë™ê¸°í™” ê²°ê³¼
     */
â‹®----
public CompletableFuture<List<SyncResult>> syncAllRegions() {
log.info("ì „êµ­ ì‹œì„¤ ë™ê¸°í™” ì‹œì‘");
â‹®----
List<String> regions = new ArrayList<>(REGION_CODE_MAP.values());
â‹®----
List<CompletableFuture<SyncResult>> futures = regions.stream()
.map(this::syncFacilitiesByRegion)
â‹®----
return CompletableFuture.allOf(futures.toArray(new CompletableFuture[0]))
.thenApply(v -> futures.stream()
.map(CompletableFuture::join)
.collect(Collectors.toList()));
â‹®----
/**
     * ì‹œì„¤ ê´€ë ¨ ìºì‹œ ë¬´íš¨í™”
     */
â‹®----
public void evictFacilityCaches() {
log.info("ì‹œì„¤ ê´€ë ¨ ìºì‹œ ë¬´íš¨í™” ì™„ë£Œ");
â‹®----
/**
     * ë™ê¸°í™” ê²°ê³¼ í†µê³„ í´ë˜ìŠ¤
     */
public static class SyncResult {
â‹®----
// Getters and Setters
public String getRegion() { return region; }
public void setRegion(String region) { this.region = region; }
â‹®----
public int getTotalFound() { return totalFound; }
public void setTotalFound(int totalFound) { this.totalFound = totalFound; }
â‹®----
public int getProcessedCount() { return processedCount; }
public void incrementProcessed() { this.processedCount++; }
â‹®----
public int getErrorCount() { return errorCount; }
public void incrementErrors() { this.errorCount++; }
â‹®----
public List<String> getProcessedIds() { return processedIds; }
public void setProcessedIds(List<String> processedIds) { this.processedIds = processedIds; }
â‹®----
public List<String> getErrorIds() { return errorIds; }
public void setErrorIds(List<String> errorIds) { this.errorIds = errorIds; }
â‹®----
public LocalDateTime getStartTime() { return startTime; }
public void setStartTime(LocalDateTime startTime) { this.startTime = startTime; }
â‹®----
public LocalDateTime getEndTime() { return endTime; }
public void setEndTime(LocalDateTime endTime) { this.endTime = endTime; }
â‹®----
public String getErrorMessage() { return errorMessage; }
public void setErrorMessage(String errorMessage) { this.errorMessage = errorMessage; }
â‹®----
public long getDurationMinutes() {
â‹®----
return java.time.Duration.between(startTime, endTime).toMinutes();
</file>

<file path="src/main/java/com/globalcarelink/external/PublicDataApiClient.java">
/**
 * ê³µê³µë°ì´í„° í¬í„¸ API í†µí•© í´ë¼ì´ì–¸íŠ¸
 * ì¥ê¸°ìš”ì–‘ê¸°ê´€, ë³‘ì›, ì•½êµ­ ë“±ì˜ ì •ë³´ë¥¼ ê³µê³µ APIë¥¼ í†µí•´ ì¡°íšŒí•˜ëŠ” ì„œë¹„ìŠ¤
 */
â‹®----
public class PublicDataApiClient {
â‹®----
// API ì—”ë“œí¬ì¸íŠ¸ ìƒìˆ˜ë“¤
â‹®----
// ===== ì¥ê¸°ìš”ì–‘ê¸°ê´€ ê²€ìƒ‰ API =====
â‹®----
/**
     * ì§€ì—­ë³„ ì¥ê¸°ìš”ì–‘ê¸°ê´€ ê²€ìƒ‰
     * 
     * @param region ì§€ì—­ëª… (ì˜ˆ: "ì„œìš¸íŠ¹ë³„ì‹œ", "ë¶€ì‚°ê´‘ì—­ì‹œ")
     * @param facilityType ì‹œì„¤ íƒ€ì… (ì„ íƒì‚¬í•­)
     * @param pageNo í˜ì´ì§€ ë²ˆí˜¸ (ê¸°ë³¸ê°’: 1)
     * @param numOfRows í•œ í˜ì´ì§€ë‹¹ ê²°ê³¼ ìˆ˜ (ê¸°ë³¸ê°’: 100)
     * @return ì¥ê¸°ìš”ì–‘ê¸°ê´€ ê²€ìƒ‰ ê²°ê³¼
     */
â‹®----
public Mono<LtciSearchResponse> searchLongTermCareInstitutions(
â‹®----
log.info("ì¥ê¸°ìš”ì–‘ê¸°ê´€ ê²€ìƒ‰ ìš”ì²­ - ì§€ì—­: {}, íƒ€ì…: {}, í˜ì´ì§€: {}", region, facilityType, pageNo);
â‹®----
return webClient.get()
.uri(uriBuilder -> uriBuilder
.path(LTCI_SEARCH_ENDPOINT)
.queryParam("serviceKey", apiKey)
.queryParam("siDo", region)
.queryParam("pageNo", pageNo != null ? pageNo : 1)
.queryParam("numOfRows", numOfRows != null ? numOfRows : 100)
.queryParam("_type", "json")
.queryParamIfPresent("ltcInsttType", java.util.Optional.ofNullable(facilityType))
.build())
.retrieve()
.onStatus(status -> status.isError(), response -> {
log.error("ì¥ê¸°ìš”ì–‘ê¸°ê´€ ê²€ìƒ‰ API ì˜¤ë¥˜ - ìƒíƒœ ì½”ë“œ: {}", response.statusCode());
return response.bodyToMono(String.class)
.flatMap(errorBody -> Mono.error(new PublicDataApiException(
"ì¥ê¸°ìš”ì–‘ê¸°ê´€ ê²€ìƒ‰ ì‹¤íŒ¨: " + errorBody, response.statusCode())));
â‹®----
.bodyToMono(LtciSearchResponse.class)
.retryWhen(Retry.backoff(3, Duration.ofSeconds(1))
.filter(throwable -> !(throwable instanceof WebClientResponseException) ||
((WebClientResponseException) throwable).getStatusCode().is5xxServerError()))
.doOnSuccess(response -> log.info("ì¥ê¸°ìš”ì–‘ê¸°ê´€ ê²€ìƒ‰ ì„±ê³µ - ê²°ê³¼ ìˆ˜: {}",
response != null && response.getResponse() != null && response.getResponse().getBody() != null
? response.getResponse().getBody().getItems().size() : 0))
.doOnError(error -> log.error("ì¥ê¸°ìš”ì–‘ê¸°ê´€ ê²€ìƒ‰ ì‹¤íŒ¨", error));
â‹®----
/**
     * ì¥ê¸°ìš”ì–‘ê¸°ê´€ ìƒì„¸ ì •ë³´ ì¡°íšŒ
     * 
     * @param institutionId ê¸°ê´€ ID
     * @return ì¥ê¸°ìš”ì–‘ê¸°ê´€ ìƒì„¸ ì •ë³´
     */
â‹®----
public Mono<LtciDetailResponse> getLongTermCareInstitutionDetail(String institutionId) {
â‹®----
log.info("ì¥ê¸°ìš”ì–‘ê¸°ê´€ ìƒì„¸ ì •ë³´ ì¡°íšŒ - ID: {}", institutionId);
â‹®----
.path(LTCI_DETAIL_ENDPOINT)
â‹®----
.queryParam("ltcInsttCd", institutionId)
â‹®----
log.error("ì¥ê¸°ìš”ì–‘ê¸°ê´€ ìƒì„¸ ì¡°íšŒ API ì˜¤ë¥˜ - ìƒíƒœ ì½”ë“œ: {}", response.statusCode());
â‹®----
"ì¥ê¸°ìš”ì–‘ê¸°ê´€ ìƒì„¸ ì¡°íšŒ ì‹¤íŒ¨: " + errorBody, response.statusCode())));
â‹®----
.bodyToMono(LtciDetailResponse.class)
â‹®----
.doOnSuccess(response -> log.info("ì¥ê¸°ìš”ì–‘ê¸°ê´€ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì„±ê³µ - ID: {}", institutionId))
.doOnError(error -> log.error("ì¥ê¸°ìš”ì–‘ê¸°ê´€ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨ - ID: {}", institutionId, error));
â‹®----
// ===== ë³‘ì› ì •ë³´ API =====
â‹®----
/**
     * ì§€ì—­ë³„ ë³‘ì› ì •ë³´ ê²€ìƒ‰
     * 
     * @param region ì§€ì—­ëª…
     * @param hospitalType ë³‘ì› íƒ€ì… (ì„ íƒì‚¬í•­)
     * @param pageNo í˜ì´ì§€ ë²ˆí˜¸
     * @param numOfRows í•œ í˜ì´ì§€ë‹¹ ê²°ê³¼ ìˆ˜
     * @return ë³‘ì› ì •ë³´ ê²€ìƒ‰ ê²°ê³¼
     */
â‹®----
public Mono<HospitalSearchResponse> searchHospitals(
â‹®----
log.info("ë³‘ì› ì •ë³´ ê²€ìƒ‰ ìš”ì²­ - ì§€ì—­: {}, íƒ€ì…: {}, í˜ì´ì§€: {}", region, hospitalType, pageNo);
â‹®----
.path(HOSPITAL_INFO_ENDPOINT)
â‹®----
.queryParam("sidoCd", region)
â‹®----
.queryParamIfPresent("clCd", java.util.Optional.ofNullable(hospitalType))
â‹®----
log.error("ë³‘ì› ì •ë³´ ê²€ìƒ‰ API ì˜¤ë¥˜ - ìƒíƒœ ì½”ë“œ: {}", response.statusCode());
â‹®----
"ë³‘ì› ì •ë³´ ê²€ìƒ‰ ì‹¤íŒ¨: " + errorBody, response.statusCode())));
â‹®----
.bodyToMono(HospitalSearchResponse.class)
â‹®----
.doOnSuccess(response -> log.info("ë³‘ì› ì •ë³´ ê²€ìƒ‰ ì„±ê³µ - ê²°ê³¼ ìˆ˜: {}",
â‹®----
.doOnError(error -> log.error("ë³‘ì› ì •ë³´ ê²€ìƒ‰ ì‹¤íŒ¨", error));
â‹®----
// ===== ì•½êµ­ ì •ë³´ API =====
â‹®----
/**
     * ì§€ì—­ë³„ ì•½êµ­ ì •ë³´ ê²€ìƒ‰
     * 
     * @param region ì§€ì—­ëª…
     * @param pageNo í˜ì´ì§€ ë²ˆí˜¸
     * @param numOfRows í•œ í˜ì´ì§€ë‹¹ ê²°ê³¼ ìˆ˜
     * @return ì•½êµ­ ì •ë³´ ê²€ìƒ‰ ê²°ê³¼
     */
â‹®----
public Mono<PharmacySearchResponse> searchPharmacies(String region, Integer pageNo, Integer numOfRows) {
â‹®----
log.info("ì•½êµ­ ì •ë³´ ê²€ìƒ‰ ìš”ì²­ - ì§€ì—­: {}, í˜ì´ì§€: {}", region, pageNo);
â‹®----
.path(PHARMACY_INFO_ENDPOINT)
â‹®----
.queryParam("Q0", region)
â‹®----
log.error("ì•½êµ­ ì •ë³´ ê²€ìƒ‰ API ì˜¤ë¥˜ - ìƒíƒœ ì½”ë“œ: {}", response.statusCode());
â‹®----
"ì•½êµ­ ì •ë³´ ê²€ìƒ‰ ì‹¤íŒ¨: " + errorBody, response.statusCode())));
â‹®----
.bodyToMono(PharmacySearchResponse.class)
â‹®----
.doOnSuccess(response -> log.info("ì•½êµ­ ì •ë³´ ê²€ìƒ‰ ì„±ê³µ - ê²°ê³¼ ìˆ˜: {}",
â‹®----
.doOnError(error -> log.error("ì•½êµ­ ì •ë³´ ê²€ìƒ‰ ì‹¤íŒ¨", error));
â‹®----
// ===== ì‹œì„¤ ìš´ì˜ ìƒíƒœ API =====
â‹®----
/**
     * ìš”ì–‘ê¸°ê´€ ê°œíì—… ì •ë³´ ì¡°íšŒ
     * 
     * @param institutionId ê¸°ê´€ ID
     * @return ìš”ì–‘ê¸°ê´€ ìš´ì˜ ìƒíƒœ ì •ë³´
     */
â‹®----
public Mono<FacilityStatusResponse> getFacilityOperationStatus(String institutionId) {
â‹®----
log.info("ìš”ì–‘ê¸°ê´€ ìš´ì˜ ìƒíƒœ ì¡°íšŒ - ID: {}", institutionId);
â‹®----
.path(FACILITY_STATUS_ENDPOINT)
â‹®----
.queryParam("ykiho", institutionId)
â‹®----
log.error("ìš”ì–‘ê¸°ê´€ ìš´ì˜ ìƒíƒœ ì¡°íšŒ API ì˜¤ë¥˜ - ìƒíƒœ ì½”ë“œ: {}", response.statusCode());
â‹®----
"ìš”ì–‘ê¸°ê´€ ìš´ì˜ ìƒíƒœ ì¡°íšŒ ì‹¤íŒ¨: " + errorBody, response.statusCode())));
â‹®----
.bodyToMono(FacilityStatusResponse.class)
â‹®----
.doOnSuccess(response -> log.info("ìš”ì–‘ê¸°ê´€ ìš´ì˜ ìƒíƒœ ì¡°íšŒ ì„±ê³µ - ID: {}", institutionId))
.doOnError(error -> log.error("ìš”ì–‘ê¸°ê´€ ìš´ì˜ ìƒíƒœ ì¡°íšŒ ì‹¤íŒ¨ - ID: {}", institutionId, error));
â‹®----
// ===== ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œ =====
â‹®----
/**
     * API ìƒíƒœ í™•ì¸ (í—¬ìŠ¤ì²´í¬)
     * 
     * @return API ì„œë¹„ìŠ¤ ìƒíƒœ
     */
public Mono<Boolean> checkApiHealth() {
log.info("ê³µê³µë°ì´í„° API ìƒíƒœ í™•ì¸ ì¤‘...");
â‹®----
// ê°„ë‹¨í•œ ê²€ìƒ‰ ìš”ì²­ìœ¼ë¡œ API ìƒíƒœ í™•ì¸
return searchLongTermCareInstitutions("ì„œìš¸íŠ¹ë³„ì‹œ", null, 1, 1)
.map(response -> response != null && response.getResponse() != null)
.onErrorReturn(false)
.doOnNext(isHealthy -> log.info("ê³µê³µë°ì´í„° API ìƒíƒœ: {}", isHealthy ? "ì •ìƒ" : "ì˜¤ë¥˜"));
â‹®----
/**
     * API í˜¸ì¶œ í†µê³„ ì •ë³´ ì¡°íšŒ
     * 
     * @return API í˜¸ì¶œ í†µê³„ ì •ë³´
     */
public Mono<Map<String, Object>> getApiStatistics() {
log.info("API í˜¸ì¶œ í†µê³„ ì •ë³´ ì¡°íšŒ");
â‹®----
// ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” API í˜¸ì¶œ íšŸìˆ˜, ì„±ê³µë¥ , í‰ê·  ì‘ë‹µ ì‹œê°„ ë“±ì„ ì¶”ì 
Map<String, Object> stats = Map.of(
â‹®----
"lastUpdateTime", System.currentTimeMillis()
â‹®----
return Mono.just(stats);
â‹®----
/**
     * ì§€ì—­ ì½”ë“œ ë³€í™˜ ìœ í‹¸ë¦¬í‹°
     * 
     * @param regionName ì§€ì—­ëª… (í•œê¸€)
     * @return ì§€ì—­ ì½”ë“œ
     */
public String convertRegionNameToCode(String regionName) {
// ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì§€ì—­ëª…ì„ APIì—ì„œ ìš”êµ¬í•˜ëŠ” ì½”ë“œë¡œ ë³€í™˜
â‹®----
regionCodeMap.put("ì„œìš¸íŠ¹ë³„ì‹œ", "11");
regionCodeMap.put("ë¶€ì‚°ê´‘ì—­ì‹œ", "26");
regionCodeMap.put("ëŒ€êµ¬ê´‘ì—­ì‹œ", "27");
regionCodeMap.put("ì¸ì²œê´‘ì—­ì‹œ", "28");
regionCodeMap.put("ê´‘ì£¼ê´‘ì—­ì‹œ", "29");
regionCodeMap.put("ëŒ€ì „ê´‘ì—­ì‹œ", "30");
regionCodeMap.put("ìš¸ì‚°ê´‘ì—­ì‹œ", "31");
regionCodeMap.put("ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ", "36");
regionCodeMap.put("ê²½ê¸°ë„", "41");
regionCodeMap.put("ê°•ì›ë„", "42");
regionCodeMap.put("ì¶©ì²­ë¶ë„", "43");
regionCodeMap.put("ì¶©ì²­ë‚¨ë„", "44");
regionCodeMap.put("ì „ë¼ë¶ë„", "45");
regionCodeMap.put("ì „ë¼ë‚¨ë„", "46");
regionCodeMap.put("ê²½ìƒë¶ë„", "47");
regionCodeMap.put("ê²½ìƒë‚¨ë„", "48");
regionCodeMap.put("ì œì£¼íŠ¹ë³„ìì¹˜ë„", "50");
â‹®----
return regionCodeMap.getOrDefault(regionName, regionName);
</file>

<file path="src/main/java/com/globalcarelink/external/PublicDataApiException.java">
/**
 * ê³µê³µë°ì´í„° API í˜¸ì¶œ ì‹œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ì»¤ìŠ¤í…€ ì˜ˆì™¸ í´ë˜ìŠ¤
 */
public class PublicDataApiException extends RuntimeException {
â‹®----
/**
     * ê¸°ë³¸ ìƒì„±ì
     * 
     * @param message ì—ëŸ¬ ë©”ì‹œì§€
     */
â‹®----
/**
     * HTTP ìƒíƒœ ì½”ë“œë¥¼ í¬í•¨í•œ ìƒì„±ì
     * 
     * @param message ì—ëŸ¬ ë©”ì‹œì§€
     * @param httpStatus HTTP ìƒíƒœ ì½”ë“œ
     */
â‹®----
/**
     * HttpStatusCodeë¥¼ í¬í•¨í•œ ìƒì„±ì (Spring Boot 3.x í˜¸í™˜)
     * 
     * @param message ì—ëŸ¬ ë©”ì‹œì§€
     * @param httpStatusCode HTTP ìƒíƒœ ì½”ë“œ
     */
â‹®----
this.httpStatus = HttpStatus.valueOf(httpStatusCode.value());
â‹®----
/**
     * ìƒì„¸ ì •ë³´ë¥¼ í¬í•¨í•œ ìƒì„±ì
     * 
     * @param message ì—ëŸ¬ ë©”ì‹œì§€
     * @param httpStatus HTTP ìƒíƒœ ì½”ë“œ
     * @param apiEndpoint API ì—”ë“œí¬ì¸íŠ¸
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     */
â‹®----
/**
     * ì›ì¸ ì˜ˆì™¸ë¥¼ í¬í•¨í•œ ìƒì„±ì
     * 
     * @param message ì—ëŸ¬ ë©”ì‹œì§€
     * @param cause ì›ì¸ ì˜ˆì™¸
     */
â‹®----
/**
     * ëª¨ë“  ì •ë³´ë¥¼ í¬í•¨í•œ ìƒì„±ì
     * 
     * @param message ì—ëŸ¬ ë©”ì‹œì§€
     * @param cause ì›ì¸ ì˜ˆì™¸
     * @param httpStatus HTTP ìƒíƒœ ì½”ë“œ
     * @param apiEndpoint API ì—”ë“œí¬ì¸íŠ¸
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     */
â‹®----
/**
     * HTTP ìƒíƒœ ì½”ë“œ ë°˜í™˜
     * 
     * @return HTTP ìƒíƒœ ì½”ë“œ
     */
public HttpStatus getHttpStatus() {
â‹®----
/**
     * API ì—”ë“œí¬ì¸íŠ¸ ë°˜í™˜
     * 
     * @return API ì—”ë“œí¬ì¸íŠ¸
     */
public String getApiEndpoint() {
â‹®----
/**
     * ì—ëŸ¬ ì½”ë“œ ë°˜í™˜
     * 
     * @return ì—ëŸ¬ ì½”ë“œ
     */
public String getErrorCode() {
â‹®----
/**
     * ìƒì„¸ ì—ëŸ¬ ì •ë³´ë¥¼ í¬í•¨í•œ ë©”ì‹œì§€ ë°˜í™˜
     * 
     * @return ìƒì„¸ ì—ëŸ¬ ë©”ì‹œì§€
     */
public String getDetailedMessage() {
StringBuilder sb = new StringBuilder(getMessage());
â‹®----
sb.append(" [ì—ëŸ¬ì½”ë“œ: ").append(errorCode).append("]");
â‹®----
sb.append(" [HTTP ìƒíƒœ: ").append(httpStatus.value()).append(" ").append(httpStatus.getReasonPhrase()).append("]");
â‹®----
sb.append(" [API: ").append(apiEndpoint).append("]");
â‹®----
return sb.toString();
â‹®----
public String toString() {
â‹®----
"message='" + getMessage() + '\'' +
</file>

<file path="src/main/java/com/globalcarelink/external/PublicDataSyncScheduler.java">
/**
 * ê³µê³µë°ì´í„° ì •ê¸° ì—…ë°ì´íŠ¸ ìŠ¤ì¼€ì¤„ëŸ¬
 * ì‹œì„¤ ì •ë³´ ìë™ ë™ê¸°í™”, API ìƒíƒœ ëª¨ë‹ˆí„°ë§, í†µê³„ ì—…ë°ì´íŠ¸ ë“±ì„ ë‹´ë‹¹
 */
â‹®----
public class PublicDataSyncScheduler {
â‹®----
/**
     * ì „êµ­ ì‹œì„¤ ì •ë³´ ë™ê¸°í™”
     * ë§¤ì¼ ìƒˆë²½ 2ì‹œì— ì‹¤í–‰
     */
â‹®----
public void syncAllFacilities() {
log.info("=== ì „êµ­ ì‹œì„¤ ì •ë³´ ë™ê¸°í™” ì‹œì‘ ===");
LocalDateTime startTime = LocalDateTime.now();
â‹®----
// ì „ì²´ ì§€ì—­ ì‹œì„¤ ë™ê¸°í™” ì‹¤í–‰
â‹®----
facilitySyncService.syncAllRegions();
â‹®----
List<FacilitySyncService.SyncResult> results = future.get();
â‹®----
// ë™ê¸°í™” ê²°ê³¼ í†µê³„ ê³„ì‚°
SyncStatistics stats = calculateSyncStatistics(results);
â‹®----
// ê²°ê³¼ ë¡œê¹…
logSyncResults(startTime, stats);
â‹®----
// ì„±ê³µë¥ ì´ ë‚®ì€ ê²½ìš° ê²½ê³ 
if (stats.getSuccessRate() < 80.0) {
log.warn("ë™ê¸°í™” ì„±ê³µë¥ ì´ ë‚®ìŠµë‹ˆë‹¤: {}% - ì‹œìŠ¤í…œ ì ê²€ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤",
String.format("%.1f", stats.getSuccessRate()));
â‹®----
log.error("ì „êµ­ ì‹œì„¤ ì •ë³´ ë™ê¸°í™” ì‹¤íŒ¨", e);
â‹®----
log.info("=== ì „êµ­ ì‹œì„¤ ì •ë³´ ë™ê¸°í™” ì™„ë£Œ ===");
â‹®----
/**
     * íŠ¹ì • ì§€ì—­ ì‹œì„¤ ì •ë³´ ë™ê¸°í™” (í…ŒìŠ¤íŠ¸ìš©)
     * ë§¤ì¼ ì˜¤ì „ 9ì‹œì— ì„œìš¸ ì§€ì—­ë§Œ ë™ê¸°í™” (ê°œë°œ/í…ŒìŠ¤íŠ¸ í™˜ê²½)
     */
â‹®----
public void syncSeoulFacilities() {
log.info("=== ì„œìš¸ ì§€ì—­ ì‹œì„¤ ì •ë³´ ë™ê¸°í™” ì‹œì‘ (í…ŒìŠ¤íŠ¸) ===");
â‹®----
facilitySyncService.syncFacilitiesByRegion("ì„œìš¸íŠ¹ë³„ì‹œ");
â‹®----
FacilitySyncService.SyncResult result = future.get();
â‹®----
log.info("ì„œìš¸ ì§€ì—­ ë™ê¸°í™” ì™„ë£Œ - ê²€ìƒ‰: {}ê±´, ì²˜ë¦¬: {}ê±´, ì˜¤ë¥˜: {}ê±´, ì†Œìš”ì‹œê°„: {}ë¶„",
result.getTotalFound(), result.getProcessedCount(),
result.getErrorCount(), result.getDurationMinutes());
â‹®----
log.error("ì„œìš¸ ì§€ì—­ ì‹œì„¤ ì •ë³´ ë™ê¸°í™” ì‹¤íŒ¨", e);
â‹®----
/**
     * ê³µê³µë°ì´í„° API ìƒíƒœ ì²´í¬
     * ë§¤ 10ë¶„ë§ˆë‹¤ ì‹¤í–‰
     */
â‹®----
public void checkApiHealth() {
log.debug("ê³µê³µë°ì´í„° API ìƒíƒœ ì²´í¬ ì‹œì‘");
â‹®----
Boolean isHealthy = publicDataApiClient.checkApiHealth().block();
â‹®----
if (Boolean.TRUE.equals(isHealthy)) {
log.debug("ê³µê³µë°ì´í„° API ìƒíƒœ: ì •ìƒ");
â‹®----
log.warn("ê³µê³µë°ì´í„° API ìƒíƒœ: ë¹„ì •ìƒ - API ì„œë²„ ì ê²€ í•„ìš”");
â‹®----
log.error("ê³µê³µë°ì´í„° API ìƒíƒœ ì²´í¬ ì‹¤íŒ¨", e);
â‹®----
/**
     * API í˜¸ì¶œ í†µê³„ ì—…ë°ì´íŠ¸
     * ë§¤ ì‹œê°„ë§ˆë‹¤ ì‹¤í–‰
     */
â‹®----
public void updateApiStatistics() {
log.debug("API í˜¸ì¶œ í†µê³„ ì—…ë°ì´íŠ¸ ì‹œì‘");
â‹®----
var statistics = publicDataApiClient.getApiStatistics().block();
â‹®----
log.info("API í˜¸ì¶œ í†µê³„ - ì´ í˜¸ì¶œ: {}, ì„±ê³µë¥ : {}%, í‰ê·  ì‘ë‹µì‹œê°„: {}",
statistics.get("totalCalls"),
statistics.get("successRate"),
statistics.get("averageResponseTime"));
â‹®----
log.error("API í˜¸ì¶œ í†µê³„ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨", e);
â‹®----
/**
     * ìºì‹œ ì •ë¦¬
     * ë§¤ì¼ ìƒˆë²½ 3ì‹œì— ì‹¤í–‰ (ì‹œì„¤ ë™ê¸°í™” ì´í›„)
     */
â‹®----
public void clearCaches() {
log.info("ìºì‹œ ì •ë¦¬ ì‹œì‘");
â‹®----
facilitySyncService.evictFacilityCaches();
log.info("ìºì‹œ ì •ë¦¬ ì™„ë£Œ");
â‹®----
log.error("ìºì‹œ ì •ë¦¬ ì‹¤íŒ¨", e);
â‹®----
/**
     * ì‹œìŠ¤í…œ ìƒíƒœ ì ê²€
     * ë§¤ì¼ ì˜¤ì „ 8ì‹œì— ì‹¤í–‰
     */
â‹®----
public void systemHealthCheck() {
log.info("=== ì‹œìŠ¤í…œ ìƒíƒœ ì ê²€ ì‹œì‘ ===");
â‹®----
// ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì²´í¬
Runtime runtime = Runtime.getRuntime();
long totalMemory = runtime.totalMemory();
long freeMemory = runtime.freeMemory();
â‹®----
log.info("ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: {}% ({}/{}MB)",
String.format("%.1f", memoryUsagePercent),
â‹®----
// ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ 90% ì´ìƒì¸ ê²½ìš° ê²½ê³ 
â‹®----
log.warn("ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë†’ìŠµë‹ˆë‹¤: {}% - ì‹œìŠ¤í…œ ìµœì í™”ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤",
String.format("%.1f", memoryUsagePercent));
â‹®----
// ê³µê³µë°ì´í„° API ìƒíƒœ ì¬í™•ì¸
Boolean apiHealthy = publicDataApiClient.checkApiHealth().block();
log.info("ê³µê³µë°ì´í„° API ìƒíƒœ: {}", Boolean.TRUE.equals(apiHealthy) ? "ì •ìƒ" : "ë¹„ì •ìƒ");
â‹®----
log.error("ì‹œìŠ¤í…œ ìƒíƒœ ì ê²€ ì‹¤íŒ¨", e);
â‹®----
log.info("=== ì‹œìŠ¤í…œ ìƒíƒœ ì ê²€ ì™„ë£Œ ===");
â‹®----
/**
     * ë™ê¸°í™” ê²°ê³¼ í†µê³„ ê³„ì‚°
     */
private SyncStatistics calculateSyncStatistics(List<FacilitySyncService.SyncResult> results) {
SyncStatistics stats = new SyncStatistics();
â‹®----
stats.totalFound += result.getTotalFound();
stats.totalProcessed += result.getProcessedCount();
stats.totalErrors += result.getErrorCount();
â‹®----
if (result.getErrorMessage() != null) {
â‹®----
// ì„±ê³µë¥  ê³„ì‚°
â‹®----
/**
     * ë™ê¸°í™” ê²°ê³¼ ë¡œê¹…
     */
private void logSyncResults(LocalDateTime startTime, SyncStatistics stats) {
LocalDateTime endTime = LocalDateTime.now();
long durationMinutes = java.time.Duration.between(startTime, endTime).toMinutes();
â‹®----
log.info("=== ì „êµ­ ì‹œì„¤ ë™ê¸°í™” ê²°ê³¼ ===");
log.info("ì²˜ë¦¬ ì§€ì—­: {}/{} (ì‹¤íŒ¨: {})",
â‹®----
log.info("ê²€ìƒ‰ëœ ì‹œì„¤: {}ê±´", stats.totalFound);
log.info("ì²˜ë¦¬ ì™„ë£Œ: {}ê±´", stats.totalProcessed);
log.info("ì²˜ë¦¬ ì‹¤íŒ¨: {}ê±´", stats.totalErrors);
log.info("ì„±ê³µë¥ : {}%", String.format("%.1f", stats.successRate));
log.info("ì´ ì†Œìš”ì‹œê°„: {}ë¶„", durationMinutes);
log.info("============================");
â‹®----
/**
     * ë™ê¸°í™” í†µê³„ í´ë˜ìŠ¤
     */
private static class SyncStatistics {
â‹®----
public double getSuccessRate() {
</file>

<file path="src/main/java/com/globalcarelink/facility/dto/FacilityMatchingRequest.java">
/**
 * ì‹œì„¤ ë§¤ì¹­ ìš”ì²­ DTO
 * ì‚¬ìš©ìì˜ ì‹œì„¤ ì¶”ì²œ ìš”ì²­ ì •ë³´ë¥¼ ë‹´ëŠ” í´ë˜ìŠ¤
 */
â‹®----
public class FacilityMatchingRequest {
â‹®----
/**
     * íšŒì› ID (ê±´ê°• í‰ê°€ ì •ë³´ ì¡°íšŒìš©)
     */
â‹®----
/**
     * ë‹´ë‹¹ ì½”ë””ë„¤ì´í„° ID (ì„ íƒì‚¬í•­)
     */
â‹®----
/**
     * ë§¤ì¹­ ì„ í˜¸ë„ ì„¤ì •
     */
â‹®----
/**
     * ìµœëŒ€ ì¶”ì²œ ê²°ê³¼ ìˆ˜ (ê¸°ë³¸ê°’: 10)
     */
â‹®----
/**
     * í•™ìŠµ ê¸°ë°˜ ì ìˆ˜ ì¡°ì • ì ìš© ì—¬ë¶€ (ê¸°ë³¸ê°’: true)
     */
â‹®----
/**
     * ê±°ë¦¬ ê¸°ë°˜ í•„í„°ë§ ì ìš© ì—¬ë¶€ (ê¸°ë³¸ê°’: false)
     */
â‹®----
/**
     * ìµœëŒ€ ê±°ë¦¬ (km) - ê±°ë¦¬ í•„í„°ë§ ì ìš© ì‹œ
     */
</file>

<file path="src/main/java/com/globalcarelink/facility/dto/MatchingCompletionRequest.java">
/**
 * ë§¤ì¹­ ì™„ë£Œ ìš”ì²­ DTO
 */
â‹®----
public class MatchingCompletionRequest {
â‹®----
// ë§¤ì¹­ ê²°ê³¼
â‹®----
private String matchingResult; // SELECTED, REJECTED, PENDING
â‹®----
// ì„ íƒ ì´ìœ  ë˜ëŠ” ê±°ë¶€ ì´ìœ 
â‹®----
// ì—°ë½ ì •ë³´
â‹®----
// ë°©ë¬¸ ì •ë³´
â‹®----
// ê³„ì•½ ì •ë³´
â‹®----
// ì‚¬ìš©ì í”¼ë“œë°±
â‹®----
// ì¶”ì²œ ì‹œìŠ¤í…œ ê°œì„ ì„ ìœ„í•œ ë°ì´í„°
â‹®----
// ì‹¤ì œ ë¹„ìš© ì •ë³´ (ê³„ì•½ í›„)
â‹®----
/**
     * ë§¤ì¹­ ê²°ê³¼ë¥¼ outcomeìœ¼ë¡œ ë°˜í™˜
     */
public String getOutcome() {
â‹®----
/**
     * ì‹¤ì œ ë¹„ìš© ì¡°íšŒ
     */
public Integer getActualCost() {
â‹®----
/**
     * ë§Œì¡±ë„ ì ìˆ˜ ì¡°íšŒ
     */
public Integer getSatisfactionScore() {
â‹®----
/**
     * í”¼ë“œë°± ì¡°íšŒ
     */
public String getFeedback() {
</file>

<file path="src/main/java/com/globalcarelink/facility/FacilityController.java">
/**
 * ì‹œì„¤ ê´€ë¦¬ ì»¨íŠ¸ë¡¤ëŸ¬ (ë§¤ì¹­ ë° ë¶„ì„ ê¸°ëŠ¥ í¬í•¨)
 * ì‹œì„¤ CRUD, ë§¤ì¹­ ì¶”ì²œ, ì‚¬ìš©ì í–‰ë™ ì¶”ì , ì„±ê³¼ ë¶„ì„ API ì œê³µ
 */
â‹®----
public class FacilityController {
â‹®----
// ===== ê¸°ë³¸ ì‹œì„¤ ê´€ë¦¬ API =====
â‹®----
public ResponseEntity<Page<FacilityProfileResponse>> getAllFacilities(
â‹®----
Pageable pageable = PageRequest.of(page, size);
Page<FacilityProfileResponse> facilities = facilityProfileService.findAllFacilities(
â‹®----
log.info("ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - í˜ì´ì§€: {}, í¬ê¸°: {}, ì´ ê°œìˆ˜: {}", page, size, facilities.getTotalElements());
return ResponseEntity.ok(facilities);
â‹®----
public ResponseEntity<FacilityProfileResponse> getFacilityById(@PathVariable Long facilityId,
â‹®----
FacilityProfileResponse facility = facilityProfileService.findById(facilityId);
â‹®----
// ì‚¬ìš©ì í–‰ë™ ì¶”ì  - ì‹œì„¤ ì¡°íšŒ
â‹®----
String userId = authentication.getName();
facilityProfileService.trackFacilityView(userId, facilityId);
â‹®----
log.info("ì‹œì„¤ ìƒì„¸ ì¡°íšŒ ì™„ë£Œ - ì‹œì„¤ ID: {}", facilityId);
return ResponseEntity.ok(facility);
â‹®----
public ResponseEntity<FacilityProfileResponse> createFacility(
â‹®----
String createdBy = authentication != null ? authentication.getName() : "system";
FacilityProfileResponse facility = facilityProfileService.createFacility(request, createdBy);
â‹®----
log.info("ì‹œì„¤ ë“±ë¡ ì™„ë£Œ - ì‹œì„¤ëª…: {}, ë“±ë¡ì: {}", facility.getFacilityName(), createdBy);
â‹®----
public ResponseEntity<FacilityProfileResponse> updateFacility(
â‹®----
String updatedBy = authentication != null ? authentication.getName() : "system";
FacilityProfileResponse facility = facilityProfileService.updateFacility(facilityId, request, updatedBy);
â‹®----
log.info("ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì™„ë£Œ - ì‹œì„¤ ID: {}, ìˆ˜ì •ì: {}", facilityId, updatedBy);
â‹®----
// ===== ë§¤ì¹­ ë° ì¶”ì²œ API =====
â‹®----
public ResponseEntity<List<FacilityRecommendation>> getRecommendations(
â‹®----
String userId = authentication != null ? authentication.getName() : "anonymous";
â‹®----
// ê±´ê°• í‰ê°€ ì •ë³´ ì¡°íšŒ
Optional<HealthAssessment> assessmentOpt = healthAssessmentRepository.findByMemberId(request.getMemberId());
if (assessmentOpt.isEmpty()) {
log.warn("ê±´ê°• í‰ê°€ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ - íšŒì› ID: {}", request.getMemberId());
return ResponseEntity.badRequest().build();
â‹®----
HealthAssessment assessment = assessmentOpt.get();
â‹®----
// ì‹œì„¤ ì¶”ì²œ ìƒì„±
List<FacilityRecommendation> recommendations = facilityProfileService.recommendFacilities(
assessment, request.getPreference(), request.getMaxResults());
â‹®----
// í•™ìŠµ ê¸°ë°˜ ì ìˆ˜ ì¡°ì • ì ìš©
recommendations = facilityProfileService.adjustMatchingScoresWithLearning(recommendations, userId);
â‹®----
// ë§¤ì¹­ ì´ë ¥ ì €ì¥
facilityProfileService.recordMatchingRecommendations(
userId, request.getCoordinatorId(), recommendations, assessment, request.getPreference());
â‹®----
log.info("ì‹œì„¤ ì¶”ì²œ ì™„ë£Œ - ì‚¬ìš©ì: {}, ì¶”ì²œ ìˆ˜: {}", userId, recommendations.size());
return ResponseEntity.ok(recommendations);
â‹®----
public ResponseEntity<List<FacilityProfileResponse>> searchFacilitiesByRegion(
â‹®----
List<FacilityProfileResponse> facilities = facilityProfileService.findFacilitiesByRegion(
â‹®----
log.info("ì§€ì—­ë³„ ì‹œì„¤ ê²€ìƒ‰ ì™„ë£Œ - ì§€ì—­: {}, ê²°ê³¼ ìˆ˜: {}", region, facilities.size());
â‹®----
public ResponseEntity<List<FacilityProfileResponse>> searchFacilitiesByCareGrade(
â‹®----
List<FacilityProfileResponse> facilities = facilityProfileService.findFacilitiesByCareGrade(
â‹®----
log.info("ì¼€ì–´ ë“±ê¸‰ë³„ ì‹œì„¤ ê²€ìƒ‰ ì™„ë£Œ - ì¼€ì–´ ë“±ê¸‰: {}, ê²°ê³¼ ìˆ˜: {}", careGradeLevel, facilities.size());
â‹®----
// ===== ì‚¬ìš©ì í–‰ë™ ì¶”ì  API =====
â‹®----
public ResponseEntity<Void> trackFacilityContact(@PathVariable Long facilityId,
â‹®----
facilityProfileService.trackFacilityContact(userId, facilityId);
log.info("ì‹œì„¤ ì—°ë½ ì¶”ì  ì™„ë£Œ - ì‚¬ìš©ì: {}, ì‹œì„¤ ID: {}", userId, facilityId);
â‹®----
return ResponseEntity.ok().build();
â‹®----
public ResponseEntity<Void> trackFacilityVisit(@PathVariable Long facilityId,
â‹®----
facilityProfileService.trackFacilityVisit(userId, facilityId);
log.info("ì‹œì„¤ ë°©ë¬¸ ì¶”ì  ì™„ë£Œ - ì‚¬ìš©ì: {}, ì‹œì„¤ ID: {}", userId, facilityId);
â‹®----
public ResponseEntity<Void> completeMatching(@PathVariable Long facilityId,
â‹®----
facilityProfileService.completeMatching(
userId, facilityId, request.getOutcome(),
request.getActualCost(), request.getSatisfactionScore(), request.getFeedback());
â‹®----
log.info("ë§¤ì¹­ ì™„ë£Œ ì²˜ë¦¬ - ì‚¬ìš©ì: {}, ì‹œì„¤ ID: {}, ê²°ê³¼: {}",
userId, facilityId, request.getOutcome());
â‹®----
// ===== ë¶„ì„ ë° í†µê³„ API =====
â‹®----
public ResponseEntity<List<FacilityMatchingAnalyticsService.FacilityPerformanceReport>> getFacilityPerformance(
â‹®----
analyticsService.analyzeFacilityPerformance(days);
â‹®----
log.info("ì‹œì„¤ ì„±ê³¼ ë¶„ì„ ì™„ë£Œ - ë¶„ì„ ê¸°ê°„: {}ì¼, ì‹œì„¤ ìˆ˜: {}", days, performance.size());
return ResponseEntity.ok(performance);
â‹®----
public ResponseEntity<FacilityMatchingAnalyticsService.MatchingTrendReport> getMatchingTrends(
â‹®----
analyticsService.analyzeMatchingTrends(days);
â‹®----
log.info("ë§¤ì¹­ íŠ¸ë Œë“œ ë¶„ì„ ì™„ë£Œ - ë¶„ì„ ê¸°ê°„: {}ì¼", days);
return ResponseEntity.ok(trends);
â‹®----
public ResponseEntity<List<FacilityMatchingAnalyticsService.UserMatchingHistory>> getUserMatchingHistory(
â‹®----
return ResponseEntity.status(HttpStatus.UNAUTHORIZED).build();
â‹®----
analyticsService.getUserMatchingHistory(userId, pageable);
â‹®----
log.info("ì‚¬ìš©ì ë§¤ì¹­ ì´ë ¥ ì¡°íšŒ ì™„ë£Œ - ì‚¬ìš©ì: {}, ì´ë ¥ ìˆ˜: {}", userId, history.size());
return ResponseEntity.ok(history);
â‹®----
public ResponseEntity<FacilityMatchingAnalyticsService.RecommendationAccuracyReport> getRecommendationAccuracy(
â‹®----
analyticsService.analyzeRecommendationAccuracy(days);
â‹®----
log.info("ì¶”ì²œ ì •í™•ë„ ë¶„ì„ ì™„ë£Œ - ë¶„ì„ ê¸°ê°„: {}ì¼, ì •í™•ë„: {:.2f}%",
days, accuracy.getOverallAccuracy());
return ResponseEntity.ok(accuracy);
â‹®----
// ===== ê´€ë¦¬ì ì „ìš© API =====
â‹®----
public ResponseEntity<Void> updateFacilityGrade(@PathVariable Long facilityId,
â‹®----
facilityProfileService.updateFacilityGrade(facilityId, newGrade, reason, updatedBy);
â‹®----
log.info("ì‹œì„¤ ë“±ê¸‰ ì—…ë°ì´íŠ¸ ì™„ë£Œ - ì‹œì„¤ ID: {}, ìƒˆ ë“±ê¸‰: {}, ì—…ë°ì´íŠ¸ì: {}",
â‹®----
public ResponseEntity<FacilityProfileService.FacilityStatistics> getFacilityStatistics() {
â‹®----
FacilityProfileService.FacilityStatistics statistics = facilityProfileService.getFacilityStatistics();
â‹®----
log.info("ì‹œì„¤ í†µê³„ ìš”ì•½ ì¡°íšŒ ì™„ë£Œ - ì´ ì‹œì„¤ ìˆ˜: {}", statistics.getTotalFacilities());
return ResponseEntity.ok(statistics);
</file>

<file path="src/main/java/com/globalcarelink/facility/FacilityMatchingAnalyticsService.java">
import lombok.*;
â‹®----
/**
 * ì‹œì„¤ ë§¤ì¹­ ë¶„ì„ ì„œë¹„ìŠ¤
 * AI ê¸°ë°˜ ë§¤ì¹­ ì„±ê³¼ ë¶„ì„, ì¶”ì²œ ì •í™•ë„ ê°œì„ , íŠ¸ë Œë“œ ë¶„ì„ ì œê³µ
 */
â‹®----
public class FacilityMatchingAnalyticsService {
â‹®----
// ===== ë§¤ì¹­ ì„±ê³¼ ë¶„ì„ =====
â‹®----
/**
     * ë§¤ì¹­ íŠ¸ë Œë“œ ë¶„ì„
     */
â‹®----
public MatchingTrendReport analyzeMatchingTrends(int days) {
log.info("ë§¤ì¹­ íŠ¸ë Œë“œ ë¶„ì„ ì‹œì‘ - ê¸°ê°„: {}ì¼", days);
â‹®----
LocalDateTime startDate = LocalDateTime.now().minusDays(days);
List<FacilityMatchingHistory> histories = matchingHistoryRepository.findByCreatedAtAfter(startDate);
â‹®----
Map<String, Long> dailyMatches = histories.stream()
.collect(Collectors.groupingBy(
h -> h.getCreatedAt().toLocalDate().toString(),
Collectors.counting()
â‹®----
double averageMatchesPerDay = histories.size() / (double) days;
long successfulMatches = histories.stream()
.mapToLong(h -> h.isSuccessfulMatch() ? 1 : 0)
.sum();
â‹®----
double successRate = histories.isEmpty() ? 0.0 :
(double) successfulMatches / histories.size() * 100;
â‹®----
return MatchingTrendReport.builder()
.totalMatches((long) histories.size())
.successfulMatches(successfulMatches)
.successRate(successRate)
.averageMatchesPerDay(averageMatchesPerDay)
.dailyMatchCounts(dailyMatches)
.analysisDate(LocalDateTime.now())
.build();
â‹®----
/**
     * ì‚¬ìš©ì ë§¤ì¹­ ì´ë ¥ ì¡°íšŒ
     */
â‹®----
public Page<UserMatchingHistory> getUserMatchingHistory(String userId, Pageable pageable) {
log.info("ì‚¬ìš©ì ë§¤ì¹­ ì´ë ¥ ì¡°íšŒ - ì‚¬ìš©ì: {}", userId);
â‹®----
Page<FacilityMatchingHistory> histories = matchingHistoryRepository.findByUserIdOrderByCreatedAtDesc(userId, pageable);
â‹®----
return histories.map(history -> UserMatchingHistory.builder()
.matchingId(history.getId())
.facilityId(history.getFacilityId())
.matchingDate(history.getCreatedAt())
.matchingScore(history.getInitialMatchScore())
.status(history.getStatus().name())
.outcome(history.getOutcome() != null ? history.getOutcome().name() : null)
.satisfactionScore(history.getSatisfactionScore())
.feedback(history.getFeedback())
.build());
â‹®----
/**
     * ì¶”ì²œ ì •í™•ë„ ë¶„ì„
     */
â‹®----
public RecommendationAccuracyReport analyzeRecommendationAccuracy(int days) {
log.info("ì¶”ì²œ ì •í™•ë„ ë¶„ì„ ì‹œì‘ - ê¸°ê°„: {}ì¼", days);
â‹®----
Map<Integer, Long> accuracyByRank = histories.stream()
.filter(h -> h.isSuccessfulMatch())
â‹®----
long totalRecommendations = histories.size();
long accurateRecommendations = histories.stream()
.mapToLong(h -> h.isSuccessfulMatch() && h.getRecommendationRank() <= 3 ? 1 : 0)
â‹®----
return RecommendationAccuracyReport.builder()
.totalRecommendations(totalRecommendations)
.accurateRecommendations(accurateRecommendations)
.overallAccuracy(overallAccuracy)
.accuracyByRank(accuracyByRank)
â‹®----
/**
     * ì‹œì„¤ë³„ ì¢…í•© ì„±ê³¼ ë¶„ì„
     */
â‹®----
public List<FacilityPerformanceReport> analyzeFacilityPerformance(int days) {
â‹®----
List<Object[]> rawData = matchingHistoryRepository.calculateFacilityMatchingSuccessRate(startDate, 5L);
â‹®----
return rawData.stream()
.map(row -> FacilityPerformanceReport.builder()
.facilityId((Long) row[0])
.totalMatches(((Number) row[1]).longValue())
.successfulMatches(((Number) row[2]).longValue())
.successRate(calculateSuccessRate(((Number) row[2]).longValue(), ((Number) row[1]).longValue()))
.averageSatisfaction(row[3] != null ? ((Number) row[3]).doubleValue() : 0.0)
.performanceGrade(calculatePerformanceGrade(
calculateSuccessRate(((Number) row[2]).longValue(), ((Number) row[1]).longValue()),
row[3] != null ? ((Number) row[3]).doubleValue() : 0.0
â‹®----
.build())
.sorted(Comparator.comparing(FacilityPerformanceReport::getPerformanceScore).reversed())
.collect(Collectors.toList());
â‹®----
/**
     * ì½”ë””ë„¤ì´í„°ë³„ ë§¤ì¹­ ì„±ê³¼ ë¶„ì„
     */
â‹®----
public List<CoordinatorPerformanceReport> analyzeCoordinatorPerformance(int days) {
â‹®----
List<Object[]> rawData = matchingHistoryRepository.calculateCoordinatorPerformance(startDate);
â‹®----
.map(row -> CoordinatorPerformanceReport.builder()
.coordinatorId((String) row[0])
â‹®----
.averageMatchScore(row[3] != null ? ((Number) row[3]).doubleValue() : 0.0)
.averageSatisfaction(row[4] != null ? ((Number) row[4]).doubleValue() : 0.0)
.performanceGrade(calculateCoordinatorGrade(
â‹®----
row[4] != null ? ((Number) row[4]).doubleValue() : 0.0
â‹®----
.sorted(Comparator.comparing(CoordinatorPerformanceReport::getSuccessRate).reversed())
â‹®----
// ===== ì¶”ì²œ ì‹œìŠ¤í…œ ë¶„ì„ =====
â‹®----
/**
     * ì¶”ì²œ ìˆœìœ„ë³„ íš¨ê³¼ì„± ë¶„ì„
     */
â‹®----
public RecommendationEffectivenessReport analyzeRecommendationEffectiveness(int days) {
â‹®----
List<Object[]> rawData = matchingHistoryRepository.analyzeRecommendationRankingEffectiveness(startDate);
â‹®----
List<RankingPerformance> rankingPerformances = rawData.stream()
.map(row -> RankingPerformance.builder()
.rank(((Number) row[0]).intValue())
.totalRecommendations(((Number) row[1]).longValue())
.viewedCount(((Number) row[2]).longValue())
.contactedCount(((Number) row[3]).longValue())
.selectedCount(((Number) row[4]).longValue())
.viewRate(calculateRate(((Number) row[2]).longValue(), ((Number) row[1]).longValue()))
.contactRate(calculateRate(((Number) row[3]).longValue(), ((Number) row[1]).longValue()))
.selectionRate(calculateRate(((Number) row[4]).longValue(), ((Number) row[1]).longValue()))
â‹®----
return RecommendationEffectivenessReport.builder()
.rankingPerformances(rankingPerformances)
.totalRecommendations(rankingPerformances.stream().mapToLong(RankingPerformance::getTotalRecommendations).sum())
.overallViewRate(calculateOverallRate(rankingPerformances, RankingPerformance::getViewedCount))
.overallContactRate(calculateOverallRate(rankingPerformances, RankingPerformance::getContactedCount))
.overallSelectionRate(calculateOverallRate(rankingPerformances, RankingPerformance::getSelectedCount))
.topRankAdvantage(calculateTopRankAdvantage(rankingPerformances))
â‹®----
/**
     * ë§¤ì¹­ ì‹¤íŒ¨ ì›ì¸ ë¶„ì„
     */
public MatchingFailureAnalysisReport analyzeMatchingFailures(int days) {
â‹®----
// ë†’ì€ ì ìˆ˜ì˜€ì§€ë§Œ ì‹¤íŒ¨í•œ ë§¤ì¹­ë“¤
â‹®----
matchingHistoryRepository.findMissedOpportunities(BigDecimal.valueOf(80.0), startDate);
â‹®----
// ë‚®ì€ ì ìˆ˜ì˜€ì§€ë§Œ ì„±ê³µí•œ ë§¤ì¹­ë“¤
â‹®----
matchingHistoryRepository.findUnexpectedSuccesses(BigDecimal.valueOf(60.0), startDate);
â‹®----
matchingHistoryRepository.findAll().stream()
.filter(h -> h.getStatus() == FacilityMatchingHistory.MatchingStatus.FAILED)
.filter(h -> h.getCreatedAt().isAfter(startDate))
â‹®----
h -> h.getOutcome() != null ? h.getOutcome() : FacilityMatchingHistory.MatchingOutcome.OTHER,
â‹®----
return MatchingFailureAnalysisReport.builder()
.missedOpportunities(missedOpportunities.size())
.unexpectedSuccesses(unexpectedSuccesses.size())
.topMissedOpportunities(missedOpportunities.stream().limit(10).collect(Collectors.toList()))
.topUnexpectedSuccesses(unexpectedSuccesses.stream().limit(10).collect(Collectors.toList()))
.failureReasons(failureReasons)
.algorithmAccuracy(calculateAlgorithmAccuracy(missedOpportunities.size(), unexpectedSuccesses.size()))
.improvementOpportunities(generateImprovementSuggestions(missedOpportunities, unexpectedSuccesses))
â‹®----
// ===== íŠ¸ë Œë“œ ë¶„ì„ =====
â‹®----
/**
     * ì›”ë³„ ë§¤ì¹­ íŠ¸ë Œë“œ ë¶„ì„
     */
â‹®----
public List<MonthlyTrendReport> analyzeMonthlyTrends(int months) {
LocalDateTime startDate = LocalDateTime.now().minusMonths(months);
List<Object[]> rawData = matchingHistoryRepository.getMonthlyMatchingTrends(startDate);
â‹®----
.map(row -> MonthlyTrendReport.builder()
.year(((Number) row[0]).intValue())
.month(((Number) row[1]).intValue())
.totalMatches(((Number) row[2]).longValue())
.successfulMatches(((Number) row[3]).longValue())
.successRate(calculateSuccessRate(((Number) row[3]).longValue(), ((Number) row[2]).longValue()))
.averageMatchScore(row[4] != null ? ((Number) row[4]).doubleValue() : 0.0)
.averageSatisfaction(row[5] != null ? ((Number) row[5]).doubleValue() : 0.0)
â‹®----
/**
     * ì‹œì„¤ íƒ€ì…ë³„ ì„±ê³¼ ë¶„ì„
     */
â‹®----
public List<FacilityTypePerformanceReport> analyzeFacilityTypePerformance(int days) {
â‹®----
List<Object[]> rawData = matchingHistoryRepository.analyzeFacilityTypePerformance(startDate);
â‹®----
.map(row -> FacilityTypePerformanceReport.builder()
.facilityType((String) row[0])
â‹®----
.recommendation(generateFacilityTypeRecommendation((String) row[0],
calculateSuccessRate(((Number) row[2]).longValue(), ((Number) row[1]).longValue())))
â‹®----
.sorted(Comparator.comparing(FacilityTypePerformanceReport::getSuccessRate).reversed())
â‹®----
// ===== ì‹¤ì‹œê°„ ì„±ê³¼ ì¶”ì  =====
â‹®----
/**
     * ì‹¤ì‹œê°„ ë§¤ì¹­ í˜„í™© ëŒ€ì‹œë³´ë“œ
     */
public MatchingDashboard getRealTimeMatchingDashboard() {
LocalDateTime today = LocalDateTime.now().toLocalDate().atStartOfDay();
LocalDateTime thisWeek = LocalDateTime.now().minusDays(7);
LocalDateTime thisMonth = LocalDateTime.now().minusDays(30);
â‹®----
// ì˜¤ëŠ˜ ë§¤ì¹­ í˜„í™©
List<FacilityMatchingHistory> todayMatches = matchingHistoryRepository.findAll().stream()
.filter(h -> h.getCreatedAt().isAfter(today))
â‹®----
// ì§„í–‰ ì¤‘ì¸ ë§¤ì¹­
List<FacilityMatchingHistory> activeMatches = matchingHistoryRepository.findAll().stream()
.filter(h -> h.getStatus() == FacilityMatchingHistory.MatchingStatus.IN_PROGRESS)
â‹®----
return MatchingDashboard.builder()
.todayMatches(todayMatches.size())
.todaySuccesses(todayMatches.stream().mapToInt(h -> h.isSuccessfulMatch() ? 1 : 0).sum())
.activeMatches(activeMatches.size())
.weeklySuccessRate(calculatePeriodSuccessRate(thisWeek))
.monthlySuccessRate(calculatePeriodSuccessRate(thisMonth))
.avgMatchingDuration(calculateAverageMatchingDuration(thisMonth))
.topPerformingFacilities(getTopPerformingFacilities(thisWeek, 5))
.recentHighEngagementMatches(getRecentHighEngagementMatches(10))
.urgentActions(identifyUrgentActions(activeMatches))
â‹®----
// ===== ê°œì„  ì œì•ˆ ìƒì„± =====
â‹®----
/**
     * AI ê¸°ë°˜ ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ ê°œì„  ì œì•ˆ ìƒì„±
     */
â‹®----
public void generateAlgorithmImprovementSuggestions() {
log.info("ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ ê°œì„  ì œì•ˆ ìƒì„± ì‹œì‘");
â‹®----
// ì§€ë‚œ 30ì¼ ë°ì´í„° ê¸°ë°˜ ë¶„ì„
MatchingFailureAnalysisReport failureAnalysis = analyzeMatchingFailures(30);
RecommendationEffectivenessReport effectiveness = analyzeRecommendationEffectiveness(30);
â‹®----
// ì‹¤íŒ¨ ì›ì¸ ê¸°ë°˜ ì œì•ˆ
if (failureAnalysis.getMissedOpportunities() > failureAnalysis.getUnexpectedSuccesses()) {
suggestions.add("ë§¤ì¹­ ì ìˆ˜ ê³„ì‚° ì•Œê³ ë¦¬ì¦˜ì˜ ê°€ì¤‘ì¹˜ ì¡°ì • í•„ìš” - ì‚¬ìš©ì ì„ í˜¸ë„ ë°˜ì˜ ê°•í™”");
â‹®----
// ìˆœìœ„ë³„ íš¨ê³¼ì„± ê¸°ë°˜ ì œì•ˆ
if (effectiveness.getTopRankAdvantage() < 2.0) {
suggestions.add("ìƒìœ„ ì¶”ì²œì˜ ì°¨ë³„í™” ê°•í™” í•„ìš” - ì¶”ì²œ ì •í™•ë„ ê°œì„ ");
â‹®----
// ì‹œì„¤ íƒ€ì…ë³„ ì„±ê³¼ ê¸°ë°˜ ì œì•ˆ
List<FacilityTypePerformanceReport> typePerformance = analyzeFacilityTypePerformance(30);
typePerformance.stream()
.filter(report -> report.getSuccessRate() < 30.0)
.forEach(report -> suggestions.add(
String.format("%s íƒ€ì… ì‹œì„¤ì˜ ë§¤ì¹­ ê¸°ì¤€ ì¬ê²€í†  í•„ìš”", report.getFacilityType())
â‹®----
log.info("ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ ê°œì„  ì œì•ˆ ìƒì„± ì™„ë£Œ: {} ê°œì˜ ì œì•ˆ", suggestions.size());
suggestions.forEach(suggestion -> log.info("ì œì•ˆ: {}", suggestion));
â‹®----
// ===== ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œ =====
â‹®----
private double calculateSuccessRate(long successful, long total) {
â‹®----
private double calculateRate(long part, long total) {
â‹®----
private String calculatePerformanceGrade(double successRate, double satisfaction) {
â‹®----
private String calculateCoordinatorGrade(double successRate, double satisfaction) {
â‹®----
private double calculateOverallRate(List<RankingPerformance> performances,
â‹®----
long total = performances.stream().mapToLong(RankingPerformance::getTotalRecommendations).sum();
long part = performances.stream().mapToLong(extractor).sum();
return calculateRate(part, total);
â‹®----
private double calculateTopRankAdvantage(List<RankingPerformance> performances) {
if (performances.isEmpty()) return 0.0;
â‹®----
Optional<RankingPerformance> rank1 = performances.stream()
.filter(p -> p.getRank() == 1)
.findFirst();
â‹®----
Optional<RankingPerformance> rank2 = performances.stream()
.filter(p -> p.getRank() == 2)
â‹®----
if (rank1.isPresent() && rank2.isPresent()) {
return rank1.get().getSelectionRate() / rank2.get().getSelectionRate();
â‹®----
private double calculateAlgorithmAccuracy(int missed, int unexpected) {
â‹®----
return total > 0 ? (1.0 - (double) Math.max(missed, unexpected) / total) * 100 : 100.0;
â‹®----
private List<String> generateImprovementSuggestions(List<FacilityMatchingHistory> missed,
â‹®----
if (missed.size() > unexpected.size()) {
suggestions.add("ë†’ì€ ì ìˆ˜ ë§¤ì¹­ì˜ ì‹¤íŒ¨ìœ¨ì´ ë†’ìŒ - ì‚¬ìš©ì ì„ í˜¸ë„ ê°€ì¤‘ì¹˜ ì¡°ì • í•„ìš”");
suggestions.add("ì‹œì„¤ ì •ë³´ì˜ ì •í™•ì„± ë° ì‹¤ì‹œê°„ì„± ê²€í†  í•„ìš”");
} else if (unexpected.size() > missed.size()) {
suggestions.add("ë‚®ì€ ì ìˆ˜ ë§¤ì¹­ì˜ ì„±ê³µë¥ ì´ ë†’ìŒ - ìˆ¨ê²¨ì§„ ì„ í˜¸ íŒ¨í„´ ë°œêµ´ í•„ìš”");
suggestions.add("ë§¤ì¹­ ì ìˆ˜ ê³„ì‚° ê¸°ì¤€ ì¬ê²€í†  í•„ìš”");
â‹®----
private String generateFacilityTypeRecommendation(String facilityType, double successRate) {
â‹®----
return String.format("%s íƒ€ì…ì€ ë§¤ì¹­ ì„±ê³¼ê°€ ìš°ìˆ˜í•¨ - ì¶”ì²œ ê°€ì¤‘ì¹˜ ì¦ê°€ ê¶Œì¥", facilityType);
â‹®----
return String.format("%s íƒ€ì…ì€ í‰ê· ì  ì„±ê³¼ - ì„¸ë¶€ ê¸°ì¤€ ìµœì í™” í•„ìš”", facilityType);
â‹®----
return String.format("%s íƒ€ì…ì€ ì„±ê³¼ ê°œì„  í•„ìš” - ë§¤ì¹­ ê¸°ì¤€ ì¬ê²€í†  ê¶Œì¥", facilityType);
â‹®----
private double calculatePeriodSuccessRate(LocalDateTime startDate) {
List<FacilityMatchingHistory> periodMatches = matchingHistoryRepository.findAll().stream()
â‹®----
long successful = periodMatches.stream()
â‹®----
return calculateSuccessRate(successful, periodMatches.size());
â‹®----
private Double calculateAverageMatchingDuration(LocalDateTime startDate) {
Object[] result = matchingHistoryRepository.calculateAverageMatchingDuration(startDate);
return result[0] != null ? ((Number) result[0]).doubleValue() : null;
â‹®----
private List<String> getTopPerformingFacilities(LocalDateTime startDate, int limit) {
return analyzeFacilityPerformance(7).stream()
.limit(limit)
.map(report -> "ì‹œì„¤ ID: " + report.getFacilityId() + " (ì„±ê³µë¥ : " +
String.format("%.1f%%", report.getSuccessRate()) + ")")
â‹®----
private List<FacilityMatchingHistory> getRecentHighEngagementMatches(int limit) {
return matchingHistoryRepository.findHighEngagementMatches(
LocalDateTime.now().minusDays(7),
PageRequest.of(0, limit)
).getContent();
â‹®----
private List<String> identifyUrgentActions(List<FacilityMatchingHistory> activeMatches) {
â‹®----
// 48ì‹œê°„ ì´ìƒ ì§„í–‰ ì¤‘ì¸ ë§¤ì¹­
long staleMatches = activeMatches.stream()
.filter(h -> h.getCreatedAt().isBefore(LocalDateTime.now().minusHours(48)))
.count();
â‹®----
actions.add(String.format("%d ê±´ì˜ ì¥ê¸° ë¯¸í•´ê²° ë§¤ì¹­ - ì½”ë””ë„¤ì´í„° ê°œì… í•„ìš”", staleMatches));
â‹®----
// ì¡°íšŒëŠ” í–ˆì§€ë§Œ ì—°ë½í•˜ì§€ ì•Šì€ ë§¤ì¹­
long viewedNotContacted = activeMatches.stream()
.filter(h -> h.getWasViewed() && !h.getWasContacted())
.filter(h -> h.getViewedAt().isBefore(LocalDateTime.now().minusHours(24)))
â‹®----
actions.add(String.format("%d ê±´ì˜ ì¡°íšŒ í›„ ë¯¸ì—°ë½ ì¼€ì´ìŠ¤ - í›„ì† ì¡°ì¹˜ í•„ìš”", viewedNotContacted));
â‹®----
// ===== DTO í´ë˜ìŠ¤ë“¤ =====
â‹®----
public static class FacilityPerformanceReport {
â‹®----
public Double getPerformanceScore() {
â‹®----
public static class CoordinatorPerformanceReport {
â‹®----
public static class RecommendationEffectivenessReport {
â‹®----
public static class RankingPerformance {
â‹®----
public static class MatchingFailureAnalysisReport {
â‹®----
public static class MonthlyTrendReport {
â‹®----
public static class FacilityTypePerformanceReport {
â‹®----
/**
     * ë§¤ì¹­ íŠ¸ë Œë“œ ë¦¬í¬íŠ¸ DTO
     */
â‹®----
public static class MatchingTrendReport {
â‹®----
/**
     * ì‚¬ìš©ì ë§¤ì¹­ ì´ë ¥ DTO
     */
â‹®----
public static class UserMatchingHistory {
â‹®----
/**
     * ì¶”ì²œ ì •í™•ë„ ë¦¬í¬íŠ¸ DTO
     */
â‹®----
public static class RecommendationAccuracyReport {
â‹®----
public static class MatchingDashboard {
</file>

<file path="src/main/java/com/globalcarelink/facility/FacilityMatchingHistory.java">
import lombok.*;
â‹®----
/**
 * ì‹œì„¤ ë§¤ì¹­ ì´ë ¥ ì¶”ì  ì—”í‹°í‹°
 * ë§¤ì¹­ ì„±ê³µë¥ , ì‚¬ìš©ì ë§Œì¡±ë„, ì¶”ì²œ ì •í™•ë„ ì¸¡ì •ì„ ìœ„í•œ ë°ì´í„° ìˆ˜ì§‘
 */
â‹®----
public class FacilityMatchingHistory extends BaseEntity {
â‹®----
// ë§¤ì¹­ ìš”ì²­ ì •ë³´
â‹®----
// ë§¤ì¹­ ì ìˆ˜ ë° ë­í‚¹
â‹®----
// ë§¤ì¹­ ì§„í–‰ ìƒíƒœ
â‹®----
// ë§¤ì¹­ ìƒíƒœ
â‹®----
// í”¼ë“œë°± ë° ë§Œì¡±ë„
â‹®----
// ì‹œê°„ ì¶”ì 
â‹®----
// ë§¤ì¹­ì— ì‚¬ìš©ëœ ê¸°ì¤€ ì •ë³´ (JSON í˜•íƒœë¡œ ì €ì¥)
â‹®----
// ë§¤ì¹­ ì„±ê³¼ ì§€í‘œ
â‹®----
public String getDescription() {
â‹®----
// ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë©”ì„œë“œë“¤
â‹®----
/**
     * ì‚¬ìš©ìê°€ ì‹œì„¤ì„ ì¡°íšŒí–ˆì„ ë•Œ í˜¸ì¶œ
     */
public void markAsViewed() {
â‹®----
this.viewedAt = LocalDateTime.now();
â‹®----
/**
     * ì‚¬ìš©ìê°€ ì‹œì„¤ì— ì—°ë½í–ˆì„ ë•Œ í˜¸ì¶œ
     */
public void markAsContacted() {
â‹®----
this.contactedAt = LocalDateTime.now();
â‹®----
/**
     * ì‚¬ìš©ìê°€ ì‹œì„¤ì„ ë°©ë¬¸í–ˆì„ ë•Œ í˜¸ì¶œ
     */
public void markAsVisited() {
â‹®----
this.visitedAt = LocalDateTime.now();
â‹®----
/**
     * ì‚¬ìš©ìê°€ ì‹œì„¤ì„ ì„ íƒí–ˆì„ ë•Œ í˜¸ì¶œ
     */
public void markAsSelected(MatchingOutcome outcome) {
â‹®----
this.selectedAt = LocalDateTime.now();
â‹®----
this.completedAt = LocalDateTime.now();
â‹®----
/**
     * ê³„ì•½ ì™„ë£Œë¡œ í‘œì‹œ
     */
public void markAsContracted() {
â‹®----
/**
     * ì‚¬ìš©ì í”¼ë“œë°± ë° ë§Œì¡±ë„ ì—…ë°ì´íŠ¸
     */
public void updateFeedback(BigDecimal satisfactionScore, String feedback) {
â‹®----
/**
     * ë§¤ì¹­ ì„±ê³µ ì—¬ë¶€ í™•ì¸
     */
public boolean isSuccessfulMatch() {
â‹®----
/**
     * ë§¤ì¹­ ì§„í–‰ë¥  ê³„ì‚° (0-100%)
     */
public int getProgressPercentage() {
â‹®----
/**
     * ë§¤ì¹­ ì†Œìš” ì‹œê°„ ê³„ì‚° (ì‹œê°„ ë‹¨ìœ„)
     */
public Long getMatchingDurationHours() {
if (completedAt != null && getCreatedAt() != null) {
return java.time.Duration.between(getCreatedAt(), completedAt).toHours();
</file>

<file path="src/main/java/com/globalcarelink/facility/FacilityMatchingHistoryRepository.java">
/**
 * ì‹œì„¤ ë§¤ì¹­ ì´ë ¥ ì €ì¥ì†Œ
 * ë§¤ì¹­ ì„±ê³¼ ë¶„ì„ ë° ì¶”ì²œ ì‹œìŠ¤í…œ ê°œì„ ì„ ìœ„í•œ ë°ì´í„° ì¡°íšŒ ê¸°ëŠ¥ ì œê³µ
 */
â‹®----
public interface FacilityMatchingHistoryRepository extends JpaRepository<FacilityMatchingHistory, Long> {
â‹®----
// ===== ê¸°ë³¸ ì¡°íšŒ =====
â‹®----
/**
     * ì‚¬ìš©ìë³„ ë§¤ì¹­ ì´ë ¥ ì¡°íšŒ
     */
List<FacilityMatchingHistory> findByUserIdOrderByCreatedAtDesc(String userId);
â‹®----
/**
     * ì‹œì„¤ë³„ ë§¤ì¹­ ì´ë ¥ ì¡°íšŒ
     */
List<FacilityMatchingHistory> findByFacilityIdOrderByCreatedAtDesc(Long facilityId);
â‹®----
/**
     * ì½”ë””ë„¤ì´í„°ë³„ ë§¤ì¹­ ì´ë ¥ ì¡°íšŒ
     */
List<FacilityMatchingHistory> findByCoordinatorIdOrderByCreatedAtDesc(String coordinatorId);
â‹®----
/**
     * íŠ¹ì • ì‚¬ìš©ì-ì‹œì„¤ ì¡°í•©ì˜ ìµœì‹  ë§¤ì¹­ ì´ë ¥
     */
Optional<FacilityMatchingHistory> findTopByUserIdAndFacilityIdOrderByCreatedAtDesc(String userId, Long facilityId);
â‹®----
// ===== ë§¤ì¹­ ì„±ê³¼ ë¶„ì„ =====
â‹®----
/**
     * ì‹œì„¤ë³„ ë§¤ì¹­ ì„±ê³µë¥  ê³„ì‚°
     */
â‹®----
List<Object[]> calculateFacilityMatchingSuccessRate(@Param("startDate") LocalDateTime startDate,
â‹®----
/**
     * ì½”ë””ë„¤ì´í„°ë³„ ë§¤ì¹­ ì„±ê³¼ ë¶„ì„
     */
â‹®----
List<Object[]> calculateCoordinatorPerformance(@Param("startDate") LocalDateTime startDate);
â‹®----
/**
     * ë§¤ì¹­ ìˆœìœ„ë³„ ì„ íƒë¥  ë¶„ì„
     */
â‹®----
List<Object[]> analyzeRecommendationRankingEffectiveness(@Param("startDate") LocalDateTime startDate);
â‹®----
// ===== ì‚¬ìš©ì í–‰ë™ ë¶„ì„ =====
â‹®----
/**
     * ì‚¬ìš©ì ì°¸ì—¬ë„ê°€ ë†’ì€ ë§¤ì¹­ ì´ë ¥ ì¡°íšŒ
     */
â‹®----
Page<FacilityMatchingHistory> findHighEngagementMatches(@Param("startDate") LocalDateTime startDate,
â‹®----
/**
     * íŠ¹ì • ì ìˆ˜ ì´ìƒì˜ ë§¤ì¹­ ì¤‘ ì‹¤íŒ¨í•œ ì¼€ì´ìŠ¤ ë¶„ì„
     */
â‹®----
List<FacilityMatchingHistory> findFailedHighScoreMatches(@Param("minScore") BigDecimal minScore,
â‹®----
// ===== ì‹œê°„ë³„ ë¶„ì„ =====
â‹®----
/**
     * ë§¤ì¹­ ì™„ë£Œê¹Œì§€ í‰ê·  ì†Œìš” ì‹œê°„ ë¶„ì„
     */
â‹®----
Object[] calculateAverageMatchingDuration(@Param("startDate") LocalDateTime startDate);
â‹®----
/**
     * ë‹¨ê³„ë³„ í‰ê·  ì†Œìš” ì‹œê°„ ë¶„ì„
     */
â‹®----
Object[] calculateStepwiseAverageDuration(@Param("startDate") LocalDateTime startDate);
â‹®----
// ===== ë¹„ìš© ë¶„ì„ =====
â‹®----
/**
     * ì˜ˆìƒ ë¹„ìš©ê³¼ ì‹¤ì œ ë¹„ìš© ì°¨ì´ ë¶„ì„
     */
â‹®----
List<Object[]> analyzeCostAccuracy(@Param("startDate") LocalDateTime startDate,
â‹®----
// ===== ê°œì„  ê¸°íšŒ ì‹ë³„ =====
â‹®----
/**
     * ë†’ì€ ì ìˆ˜ì˜€ì§€ë§Œ ì„ íƒë˜ì§€ ì•Šì€ ë§¤ì¹­ë“¤ (ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ ê°œì„  ê¸°íšŒ)
     */
â‹®----
List<FacilityMatchingHistory> findMissedOpportunities(@Param("highScoreThreshold") BigDecimal highScoreThreshold,
â‹®----
/**
     * ë‚®ì€ ì ìˆ˜ì˜€ì§€ë§Œ ì„ íƒëœ ë§¤ì¹­ë“¤ (ï¿½ìˆ¨ê²¨ì§„ ì„ í˜¸ íŒ¨í„´ ë°œê²¬)
     */
â‹®----
List<FacilityMatchingHistory> findUnexpectedSuccesses(@Param("lowScoreThreshold") BigDecimal lowScoreThreshold,
â‹®----
// ===== íŠ¸ë Œë“œ ë¶„ì„ =====
â‹®----
/**
     * ì›”ë³„ ë§¤ì¹­ íŠ¸ë Œë“œ ë¶„ì„
     */
â‹®----
List<Object[]> getMonthlyMatchingTrends(@Param("startDate") LocalDateTime startDate);
â‹®----
/**
     * ì‹œì„¤ íƒ€ì…ë³„ ë§¤ì¹­ ì„±ê³¼ ë¶„ì„ (ì‹œì„¤ ì •ë³´ì™€ ì¡°ì¸)
     */
â‹®----
List<Object[]> analyzeFacilityTypePerformance(@Param("startDate") LocalDateTime startDate);
</file>

<file path="src/main/java/com/globalcarelink/facility/FacilityProfileController.java">
/**
 * ì‹œì„¤ í”„ë¡œí•„ API ì»¨íŠ¸ë¡¤ëŸ¬
 * ì‹œì„¤ ê´€ë¦¬, ê²€ìƒ‰, ë§¤ì¹­ API ì œê³µ
 */
â‹®----
public class FacilityProfileController {
â‹®----
// ===== ê¸°ë³¸ CRUD API =====
â‹®----
public ResponseEntity<FacilityProfile> createFacility(
â‹®----
log.info("ì‹œì„¤ í”„ë¡œí•„ ìƒì„± ìš”ì²­ - ì‹œì„¤ëª…: {}", facility.getFacilityName());
â‹®----
FacilityProfile created = facilityProfileService.createFacility(facility);
â‹®----
return ResponseEntity.status(HttpStatus.CREATED).body(created);
â‹®----
public ResponseEntity<FacilityProfile> getFacility(
â‹®----
Optional<FacilityProfile> facility = facilityProfileService.getFacilityById(facilityId);
â‹®----
.map(ResponseEntity::ok)
.orElse(ResponseEntity.notFound().build());
â‹®----
public ResponseEntity<FacilityProfile> getFacilityByCode(
â‹®----
Optional<FacilityProfile> facility = facilityProfileService.getFacilityByCode(facilityCode);
â‹®----
public ResponseEntity<FacilityProfile> updateFacility(
â‹®----
log.info("ì‹œì„¤ í”„ë¡œí•„ ìˆ˜ì • ìš”ì²­ - ID: {}", facilityId);
â‹®----
FacilityProfile updated = facilityProfileService.updateFacility(facilityId, updateData);
â‹®----
return ResponseEntity.ok(updated);
â‹®----
public ResponseEntity<Void> deleteFacility(
â‹®----
facilityProfileService.deleteFacility(facilityId);
â‹®----
return ResponseEntity.noContent().build();
â‹®----
// ===== ê²€ìƒ‰ ë° í•„í„°ë§ API =====
â‹®----
public ResponseEntity<List<FacilityProfile>> searchFacilitiesByName(
â‹®----
List<FacilityProfile> facilities = facilityProfileService.searchFacilitiesByName(keyword);
â‹®----
return ResponseEntity.ok(facilities);
â‹®----
public ResponseEntity<List<FacilityProfile>> getFacilitiesByRegion(
â‹®----
List<FacilityProfile> facilities = facilityProfileService.getFacilitiesByRegion(region);
â‹®----
public ResponseEntity<List<FacilityProfile>> getFacilitiesByType(
â‹®----
List<FacilityProfile> facilities = facilityProfileService.getFacilitiesByType(facilityType);
â‹®----
public ResponseEntity<List<FacilityProfile>> getFacilitiesByGrade(
â‹®----
List<FacilityProfile> facilities = facilityProfileService.getFacilitiesByGrade(facilityGrade);
â‹®----
public ResponseEntity<List<FacilityProfile>> getAvailableFacilities() {
â‹®----
List<FacilityProfile> facilities = facilityProfileService.getAvailableFacilities();
â‹®----
// ===== ìœ„ì¹˜ ê¸°ë°˜ ê²€ìƒ‰ API =====
â‹®----
public ResponseEntity<List<FacilityProfile>> findNearbyFacilities(
â‹®----
.findNearbyFacilities(latitude, longitude, radiusKm);
â‹®----
// ===== ì¼€ì–´ ë“±ê¸‰ ê¸°ë°˜ ê²€ìƒ‰ API =====
â‹®----
public ResponseEntity<List<FacilityProfile>> getFacilitiesByCareGrade(
â‹®----
List<FacilityProfile> facilities = facilityProfileService.getFacilitiesByCareGrade(careGrade);
â‹®----
public ResponseEntity<List<FacilityProfile>> getFacilitiesByCareGrades(
â‹®----
List<FacilityProfile> facilities = facilityProfileService.getFacilitiesByCareGrades(careGrades);
â‹®----
// ===== ì „ë¬¸ì„± ê¸°ë°˜ ê²€ìƒ‰ API =====
â‹®----
public ResponseEntity<List<FacilityProfile>> getDementiaSpecializedFacilities() {
â‹®----
List<FacilityProfile> facilities = facilityProfileService.getDementiaSpecializedFacilities();
â‹®----
public ResponseEntity<List<FacilityProfile>> getMedicalSpecializedFacilities() {
â‹®----
List<FacilityProfile> facilities = facilityProfileService.getMedicalSpecializedFacilities();
â‹®----
public ResponseEntity<List<FacilityProfile>> getRehabilitationSpecializedFacilities() {
â‹®----
List<FacilityProfile> facilities = facilityProfileService.getRehabilitationSpecializedFacilities();
â‹®----
public ResponseEntity<List<FacilityProfile>> getHospiceSpecializedFacilities() {
â‹®----
List<FacilityProfile> facilities = facilityProfileService.getHospiceSpecializedFacilities();
â‹®----
// ===== ë§¤ì¹­ ë° ì¶”ì²œ API =====
â‹®----
public ResponseEntity<List<FacilityProfileService.FacilityRecommendation>> recommendFacilities(
â‹®----
log.info("ì‹œì„¤ ì¶”ì²œ ìš”ì²­ - ì¼€ì–´ë“±ê¸‰: {}, ì§€ì—­: {}",
request.getHealthAssessment().getOverallCareGrade(),
request.getPreference().getPreferredRegions());
â‹®----
facilityProfileService.recommendFacilities(request.getHealthAssessment(), request.getPreference());
â‹®----
return ResponseEntity.ok(recommendations);
â‹®----
public ResponseEntity<List<FacilityProfile>> getOverseasKoreanFriendlyFacilities() {
â‹®----
List<FacilityProfile> facilities = facilityProfileService.getOverseasKoreanFriendlyFacilities();
â‹®----
// ===== ì¢…í•© ê²€ìƒ‰ API =====
â‹®----
public ResponseEntity<Page<FacilityProfile>> searchFacilitiesWithFilters(
â‹®----
Pageable pageable = PageRequest.of(page, size, Sort.by(sortBy));
Page<FacilityProfile> facilities = facilityProfileService.searchFacilitiesWithFilters(criteria, pageable);
â‹®----
// ===== í†µê³„ API =====
â‹®----
public ResponseEntity<Map<String, Long>> getFacilityStatisticsByRegion() {
â‹®----
Map<String, Long> statistics = facilityProfileService.getFacilityStatisticsByRegion();
â‹®----
return ResponseEntity.ok(statistics);
â‹®----
public ResponseEntity<Map<String, Long>> getFacilityStatisticsByType() {
â‹®----
Map<String, Long> statistics = facilityProfileService.getFacilityStatisticsByType();
â‹®----
public ResponseEntity<Map<String, Long>> getFacilityStatisticsByGrade() {
â‹®----
Map<String, Long> statistics = facilityProfileService.getFacilityStatisticsByGrade();
â‹®----
public ResponseEntity<FacilityProfileService.FacilityStatisticsSummary> getFacilityStatisticsSummary() {
â‹®----
facilityProfileService.getFacilityStatisticsSummary();
â‹®----
return ResponseEntity.ok(summary);
â‹®----
// ===== ìœ í‹¸ë¦¬í‹° API =====
â‹®----
public ResponseEntity<Void> evictCaches() {
â‹®----
facilityProfileService.evictAllCaches();
â‹®----
return ResponseEntity.ok().build();
â‹®----
// ===== DTO í´ë˜ìŠ¤ë“¤ =====
â‹®----
public static class RecommendationRequest {
</file>

<file path="src/main/java/com/globalcarelink/facility/FacilityProfileRepository.java">
/**
 * ì‹œì„¤ í”„ë¡œí•„ ë ˆí¬ì§€í† ë¦¬
 * ì‹œì„¤ ê²€ìƒ‰, í•„í„°ë§, ë§¤ì¹­ì„ ìœ„í•œ ë‹¤ì–‘í•œ ì¿¼ë¦¬ ë©”ì„œë“œ ì œê³µ
 */
â‹®----
public interface FacilityProfileRepository extends JpaRepository<FacilityProfile, Long> {
â‹®----
// ===== ê¸°ë³¸ ì¡°íšŒ ë©”ì„œë“œ =====
â‹®----
/**
     * ì‹œì„¤ ì½”ë“œë¡œ ì¡°íšŒ
     */
Optional<FacilityProfile> findByFacilityCode(String facilityCode);
â‹®----
/**
     * ì‹œì„¤ëª…ìœ¼ë¡œ ê²€ìƒ‰ (ë¶€ë¶„ ì¼ì¹˜)
     */
List<FacilityProfile> findByFacilityNameContainingIgnoreCase(String facilityName);
â‹®----
/**
     * ì‹œì„¤ íƒ€ì…ë³„ ì¡°íšŒ
     */
List<FacilityProfile> findByFacilityType(String facilityType);
â‹®----
/**
     * ì‹œì„¤ ë“±ê¸‰ë³„ ì¡°íšŒ
     */
List<FacilityProfile> findByFacilityGrade(String facilityGrade);
â‹®----
/**
     * ì‹œì„¤ ë“±ê¸‰ ë²”ìœ„ë¡œ ì¡°íšŒ (Aê°€ ê°€ì¥ ë†’ìŒ)
     */
â‹®----
List<FacilityProfile> findByFacilityGradeIn(@Param("grades") Set<String> grades);
â‹®----
// ===== ì§€ì—­ë³„ ê²€ìƒ‰ =====
â‹®----
/**
     * ì§€ì—­(ì‹œ/ë„)ë³„ ì¡°íšŒ
     */
List<FacilityProfile> findByRegion(String region);
â‹®----
/**
     * êµ¬/êµ°ë³„ ì¡°íšŒ
     */
List<FacilityProfile> findByRegionAndDistrict(String region, String district);
â‹®----
/**
     * ì£¼ì†Œ ê¸°ë°˜ ê²€ìƒ‰
     */
List<FacilityProfile> findByAddressContainingIgnoreCase(String addressKeyword);
â‹®----
// ===== ìœ„ì¹˜ ê¸°ë°˜ ê²€ìƒ‰ =====
â‹®----
/**
     * íŠ¹ì • ìœ„ì¹˜ ê·¼ì²˜ ì‹œì„¤ ê²€ìƒ‰ (ë°˜ê²½ ë‚´)
     * í•˜ë²„ì‚¬ì¸ ê³µì‹ ì‚¬ìš©í•˜ì—¬ ê±°ë¦¬ ê³„ì‚°
     */
â‹®----
List<FacilityProfile> findNearbyFacilities(@Param("latitude") BigDecimal latitude,
â‹®----
// ===== ìˆ˜ìš© ëŠ¥ë ¥ ê¸°ë°˜ ê²€ìƒ‰ =====
â‹®----
/**
     * ì…ì£¼ ê°€ëŠ¥í•œ ì‹œì„¤ ì¡°íšŒ (ë¹ˆ ì¹¨ëŒ€ ìˆìŒ)
     */
â‹®----
List<FacilityProfile> findAvailableFacilities();
â‹®----
/**
     * ìµœì†Œ ìˆ˜ìš© ì¸ì› ì´ìƒ ì‹œì„¤ ì¡°íšŒ
     */
â‹®----
List<FacilityProfile> findFacilitiesWithMinAvailableCapacity(@Param("minCapacity") int minCapacity);
â‹®----
/**
     * íŠ¹ì • ì •ì› ë²”ìœ„ ì‹œì„¤ ì¡°íšŒ
     */
List<FacilityProfile> findByTotalCapacityBetween(int minCapacity, int maxCapacity);
â‹®----
// ===== ì¼€ì–´ ë“±ê¸‰ ê¸°ë°˜ ê²€ìƒ‰ =====
â‹®----
/**
     * íŠ¹ì • ì¼€ì–´ ë“±ê¸‰ ìˆ˜ìš© ê°€ëŠ¥ ì‹œì„¤ ì¡°íšŒ
     * @param careGrade ì¼€ì–´ ë“±ê¸‰ (1-6)
     */
â‹®----
List<FacilityProfile> findByAcceptableCareGradesContaining(@Param("careGrade") Integer careGrade);
â‹®----
/**
     * ë³µìˆ˜ ì¼€ì–´ ë“±ê¸‰ ì¤‘ í•˜ë‚˜ë¼ë„ ìˆ˜ìš© ê°€ëŠ¥í•œ ì‹œì„¤ ì¡°íšŒ
     */
â‹®----
List<FacilityProfile> findByAcceptableCareGradesContainingAny(@Param("careGrades") Set<Integer> careGrades);
â‹®----
// ===== ì „ë¬¸ì„± ê¸°ë°˜ ê²€ìƒ‰ =====
â‹®----
/**
     * íŠ¹ì • ì „ë¬¸ ë¶„ì•¼ ì‹œì„¤ ì¡°íšŒ
     */
â‹®----
List<FacilityProfile> findBySpecializationsContaining(@Param("specialization") String specialization);
â‹®----
/**
     * ì¹˜ë§¤ ì „ë¬¸ ì‹œì„¤ ì¡°íšŒ
     */
â‹®----
List<FacilityProfile> findDementiaSpecializedFacilities();
â‹®----
/**
     * ì˜ë£Œ ì „ë¬¸ ì‹œì„¤ ì¡°íšŒ
     */
â‹®----
List<FacilityProfile> findMedicalSpecializedFacilities();
â‹®----
/**
     * ì¬í™œ ì „ë¬¸ ì‹œì„¤ ì¡°íšŒ
     */
â‹®----
List<FacilityProfile> findRehabilitationSpecializedFacilities();
â‹®----
/**
     * í˜¸ìŠ¤í”¼ìŠ¤ ì „ë¬¸ ì‹œì„¤ ì¡°íšŒ
     */
â‹®----
List<FacilityProfile> findHospiceSpecializedFacilities();
â‹®----
// ===== ì˜ë£Œì§„ ë° ì¸ë ¥ ê¸°ë°˜ ê²€ìƒ‰ =====
â‹®----
/**
     * ì˜ì‚¬ ìƒì£¼ ì‹œì„¤ ì¡°íšŒ
     */
List<FacilityProfile> findByHasDoctorTrue();
â‹®----
/**
     * 24ì‹œê°„ ê°„í˜¸ì‚¬ ìƒì£¼ ì‹œì„¤ ì¡°íšŒ
     */
List<FacilityProfile> findByHasNurse24hTrue();
â‹®----
/**
     * ìµœì†Œ ê°„í˜¸ì‚¬ ìˆ˜ ì´ìƒ ì‹œì„¤ ì¡°íšŒ
     */
List<FacilityProfile> findByNurseCountGreaterThanEqual(int minNurseCount);
â‹®----
/**
     * ì˜ë£Œì§„ ì¶©ë¶„í•œ ì‹œì„¤ ì¡°íšŒ (ì˜ì‚¬ ìƒì£¼ + ê°„í˜¸ì‚¬ 3ëª… ì´ìƒ)
     */
â‹®----
List<FacilityProfile> findFacilitiesWithAdequateMedicalStaff();
â‹®----
// ===== í¸ì˜ì‹œì„¤ ê¸°ë°˜ ê²€ìƒ‰ =====
â‹®----
/**
     * ì—˜ë¦¬ë² ì´í„° ë³´ìœ  ì‹œì„¤ ì¡°íšŒ
     */
List<FacilityProfile> findByHasElevatorTrue();
â‹®----
/**
     * ì‘ê¸‰ì‹œìŠ¤í…œ êµ¬ë¹„ ì‹œì„¤ ì¡°íšŒ
     */
List<FacilityProfile> findByHasEmergencySystemTrue();
â‹®----
/**
     * ì¬í™œì‹¤ ë³´ìœ  ì‹œì„¤ ì¡°íšŒ
     */
List<FacilityProfile> findByHasRehabilitationRoomTrue();
â‹®----
/**
     * ì¹˜ë§¤ í”„ë¡œê·¸ë¨ ìš´ì˜ ì‹œì„¤ ì¡°íšŒ
     */
List<FacilityProfile> findByHasDementiaProgramTrue();
â‹®----
// ===== ì ‘ê·¼ì„± ê¸°ë°˜ ê²€ìƒ‰ =====
â‹®----
/**
     * ì§€í•˜ì²  ì ‘ê·¼ ê°€ëŠ¥ ì‹œì„¤ ì¡°íšŒ
     */
List<FacilityProfile> findByNearSubwayTrue();
â‹®----
/**
     * ë³‘ì› ê·¼ì²˜ ì‹œì„¤ ì¡°íšŒ
     */
List<FacilityProfile> findByNearHospitalTrue();
â‹®----
/**
     * ì ‘ê·¼ì„± ìš°ìˆ˜ ì‹œì„¤ ì¡°íšŒ (ì§€í•˜ì²  + ë³‘ì› ëª¨ë‘ ê·¼ì²˜)
     */
â‹®----
List<FacilityProfile> findHighAccessibilityFacilities();
â‹®----
// ===== ë¹„ìš© ê¸°ë°˜ ê²€ìƒ‰ =====
â‹®----
/**
     * ì›” ê¸°ë³¸ë£Œ ë²”ìœ„ ë‚´ ì‹œì„¤ ì¡°íšŒ
     */
List<FacilityProfile> findByMonthlyBasicFeeBetween(int minFee, int maxFee);
â‹®----
/**
     * ì¥ê¸°ìš”ì–‘ë³´í—˜ ì ìš© ì‹œì„¤ ì¡°íšŒ
     */
List<FacilityProfile> findByAcceptsLtciTrue();
â‹®----
/**
     * ê¸°ì´ˆìƒí™œìˆ˜ê¸‰ì ìˆ˜ìš© ì‹œì„¤ ì¡°íšŒ
     */
List<FacilityProfile> findByAcceptsBasicLivingTrue();
â‹®----
/**
     * ê²½ì œì  ì ‘ê·¼ì„± ìš°ìˆ˜ ì‹œì„¤ ì¡°íšŒ (ì¥ê¸°ìš”ì–‘ë³´í—˜ + ê¸°ì´ˆìƒí™œìˆ˜ê¸‰ì ìˆ˜ìš©)
     */
â‹®----
List<FacilityProfile> findEconomicallyAccessibleFacilities();
â‹®----
// ===== ìš´ì˜ ìƒíƒœ ê¸°ë°˜ ê²€ìƒ‰ =====
â‹®----
/**
     * ì •ìƒ ìš´ì˜ ì¤‘ì¸ ì‹œì„¤ë§Œ ì¡°íšŒ
     */
â‹®----
List<FacilityProfile> findActiveOperatingFacilities();
â‹®----
/**
     * ìš´ì˜ ìƒíƒœë³„ ì¡°íšŒ
     */
List<FacilityProfile> findByBusinessStatus(String businessStatus);
â‹®----
// ===== ì¢…í•© ë§¤ì¹­ ì¿¼ë¦¬ =====
â‹®----
/**
     * ì¬ì™¸ë™í¬ ë§ì¶¤ ì‹œì„¤ ê²€ìƒ‰
     * - A/B ë“±ê¸‰ ì‹œì„¤
     * - ì…ì£¼ ê°€ëŠ¥
     * - ì˜ë£Œì§„ ìƒì£¼
     * - ì ‘ê·¼ì„± ì–‘í˜¸
     */
â‹®----
List<FacilityProfile> findOverseasKoreanFriendlyFacilities();
â‹®----
/**
     * íŠ¹ì • ì¼€ì–´ ë“±ê¸‰ + ì „ë¬¸ì„± ë§ì¶¤ ê²€ìƒ‰
     */
â‹®----
List<FacilityProfile> findByCaregradeAndSpecialization(@Param("careGrade") Integer careGrade,
â‹®----
/**
     * ì¢…í•© ì‹œì„¤ ë§¤ì¹­ ê²€ìƒ‰ (ë³µí•© ì¡°ê±´)
     */
â‹®----
Page<FacilityProfile> findFacilitiesWithFilters(@Param("region") String region,
â‹®----
// ===== í†µê³„ ì¿¼ë¦¬ =====
â‹®----
/**
     * ì§€ì—­ë³„ ì‹œì„¤ ìˆ˜ í†µê³„
     */
â‹®----
List<Object[]> countByRegion();
â‹®----
/**
     * ì‹œì„¤ íƒ€ì…ë³„ í†µê³„
     */
â‹®----
List<Object[]> countByFacilityType();
â‹®----
/**
     * ì‹œì„¤ ë“±ê¸‰ë³„ í†µê³„
     */
â‹®----
List<Object[]> countByFacilityGrade();
â‹®----
/**
     * ì…ì£¼ ê°€ëŠ¥ ì‹œì„¤ ìˆ˜ ì¹´ìš´íŠ¸
     */
â‹®----
long countAvailableFacilities();
â‹®----
/**
     * í‰ê·  ì›” ê¸°ë³¸ë£Œ ê³„ì‚°
     */
â‹®----
Double findAverageMonthlyBasicFee();
â‹®----
/**
     * ì‹œì„¤ ì‹ ë¢°ë„ ë¶„í¬ (ê³ ì‹ ë¢°ë„ ì‹œì„¤ ë¹„ìœ¨)
     */
â‹®----
List<Object[]> getReliabilityDistribution();
</file>

<file path="src/main/java/com/globalcarelink/facility/FacilityProfileService.java">
/**
 * ì‹œì„¤ í”„ë¡œí•„ ì„œë¹„ìŠ¤
 * ì‹œì„¤ ê´€ë¦¬, ê²€ìƒ‰, ë§¤ì¹­ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬
 */
â‹®----
public class FacilityProfileService {
â‹®----
// ===== ê¸°ë³¸ CRUD ì‘ì—… =====
â‹®----
/**
     * ëª¨ë“  ì‹œì„¤ ì¡°íšŒ (í˜ì´ì§•)
     */
â‹®----
public Page<FacilityProfileResponse> findAllFacilities(Pageable pageable, String region, String facilityType, String grade) {
log.info("ì‹œì„¤ ëª©ë¡ ì¡°íšŒ - í˜ì´ì§€: {}, ì§€ì—­: {}, íƒ€ì…: {}, ë“±ê¸‰: {}", pageable.getPageNumber(), region, facilityType, grade);
â‹®----
facilities = facilityProfileRepository.findByRegionAndFacilityTypeAndGrade(region, facilityType, grade, pageable);
â‹®----
facilities = facilityProfileRepository.findByRegion(region, pageable);
â‹®----
facilities = facilityProfileRepository.findAll(pageable);
â‹®----
return facilities.map(FacilityProfileResponse::from);
â‹®----
/**
     * ì‹œì„¤ IDë¡œ ì¡°íšŒ
     */
â‹®----
public FacilityProfileResponse findById(Long facilityId) {
log.info("ì‹œì„¤ ì¡°íšŒ - ID: {}", facilityId);
â‹®----
FacilityProfile facility = facilityProfileRepository.findById(facilityId)
.orElseThrow(() -> new CustomException.NotFound("ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + facilityId));
â‹®----
return FacilityProfileResponse.from(facility);
â‹®----
/**
     * ì§€ì—­ë³„ ì‹œì„¤ ì¡°íšŒ
     */
â‹®----
public List<FacilityProfileResponse> findFacilitiesByRegion(String region, String district, Integer limit, int offset) {
log.info("ì§€ì—­ë³„ ì‹œì„¤ ì¡°íšŒ - ì§€ì—­: {}, êµ¬/êµ°: {}", region, district);
â‹®----
Pageable pageable = PageRequest.of(offset / limit, limit);
â‹®----
facilities = facilityProfileRepository.findByRegionAndDistrict(region, district, pageable);
â‹®----
return facilities.getContent().stream()
.map(FacilityProfileResponse::from)
.collect(Collectors.toList());
â‹®----
/**
     * ì¼€ì–´ ë“±ê¸‰ë³„ ì‹œì„¤ ì¡°íšŒ
     */
â‹®----
public List<FacilityProfileResponse> findFacilitiesByCareGrade(Integer careGrade, String region, int limit) {
log.info("ì¼€ì–´ ë“±ê¸‰ë³„ ì‹œì„¤ ì¡°íšŒ - ë“±ê¸‰: {}, ì§€ì—­: {}", careGrade, region);
â‹®----
Pageable pageable = PageRequest.of(0, limit);
Page<FacilityProfile> facilities = facilityProfileRepository.findByAcceptableCareGradesContainingAndRegion(careGrade, region, pageable);
â‹®----
/**
     * ì‹œì„¤ ë“±ê¸‰ ì—…ë°ì´íŠ¸
     */
â‹®----
public void updateFacilityGrade(Long facilityId, String newGrade, String reason, String updatedBy) {
log.info("ì‹œì„¤ ë“±ê¸‰ ì—…ë°ì´íŠ¸ - ID: {}, ìƒˆ ë“±ê¸‰: {}", facilityId, newGrade);
â‹®----
facility.setGrade(newGrade);
facility.setLastUpdated(LocalDateTime.now());
â‹®----
facilityProfileRepository.save(facility);
log.info("ì‹œì„¤ ë“±ê¸‰ ì—…ë°ì´íŠ¸ ì™„ë£Œ - ID: {}, ë“±ê¸‰: {}", facilityId, newGrade);
â‹®----
/**
     * ì‹œì„¤ í”„ë¡œí•„ ìƒì„±
     */
â‹®----
public FacilityProfile createFacility(FacilityProfile facility) {
log.info("ì‹œì„¤ í”„ë¡œí•„ ìƒì„± ì‹œì‘ - ì‹œì„¤ëª…: {}", facility.getFacilityName());
â‹®----
// ê¸°ë³¸ê°’ ì„¤ì •
setDefaultValues(facility);
â‹®----
// ê°€ìš© ì¹¨ëŒ€ ìˆ˜ ê³„ì‚°
facility.calculateAvailableBeds();
â‹®----
// ì‹œì„¤ ì½”ë“œ ì¤‘ë³µ ì²´í¬
if (facility.getFacilityCode() != null &&
facilityProfileRepository.findByFacilityCode(facility.getFacilityCode()).isPresent()) {
throw new CustomException.BadRequest("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì‹œì„¤ ì½”ë“œì…ë‹ˆë‹¤: " + facility.getFacilityCode());
â‹®----
FacilityProfile saved = facilityProfileRepository.save(facility);
â‹®----
log.info("ì‹œì„¤ í”„ë¡œí•„ ìƒì„± ì™„ë£Œ - ID: {}, ì‹œì„¤ëª…: {}, ë“±ê¸‰: {}",
saved.getId(), saved.getFacilityName(), saved.getFacilityGrade());
â‹®----
/**
     * ì‹œì„¤ í”„ë¡œí•„ ì¡°íšŒ
     */
â‹®----
public Optional<FacilityProfile> getFacilityById(Long facilityId) {
log.debug("ì‹œì„¤ í”„ë¡œí•„ ì¡°íšŒ - ID: {}", facilityId);
â‹®----
return facilityProfileRepository.findById(facilityId);
â‹®----
/**
     * ì‹œì„¤ ì½”ë“œë¡œ ì¡°íšŒ
     */
â‹®----
public Optional<FacilityProfile> getFacilityByCode(String facilityCode) {
log.debug("ì‹œì„¤ í”„ë¡œí•„ ì¡°íšŒ - ì½”ë“œ: {}", facilityCode);
â‹®----
if (facilityCode == null || facilityCode.trim().isEmpty()) {
â‹®----
return facilityProfileRepository.findByFacilityCode(facilityCode);
â‹®----
/**
     * ì‹œì„¤ í”„ë¡œí•„ ìˆ˜ì •
     */
â‹®----
public FacilityProfile updateFacility(Long facilityId, FacilityProfile updateData) {
log.info("ì‹œì„¤ í”„ë¡œí•„ ìˆ˜ì • ì‹œì‘ - ID: {}", facilityId);
â‹®----
// ìˆ˜ì • ê°€ëŠ¥í•œ í•„ë“œë“¤ ì—…ë°ì´íŠ¸
updateFacilityFields(facility, updateData);
â‹®----
// ê°€ìš© ì¹¨ëŒ€ ìˆ˜ ì¬ê³„ì‚°
â‹®----
FacilityProfile updated = facilityProfileRepository.save(facility);
â‹®----
log.info("ì‹œì„¤ í”„ë¡œí•„ ìˆ˜ì • ì™„ë£Œ - ID: {}, ì‹œì„¤ëª…: {}", facilityId, updated.getFacilityName());
â‹®----
/**
     * ì‹œì„¤ í”„ë¡œí•„ ì‚­ì œ
     */
â‹®----
public void deleteFacility(Long facilityId) {
log.info("ì‹œì„¤ í”„ë¡œí•„ ì‚­ì œ ì‹œì‘ - ID: {}", facilityId);
â‹®----
facilityProfileRepository.delete(facility);
â‹®----
log.info("ì‹œì„¤ í”„ë¡œí•„ ì‚­ì œ ì™„ë£Œ - ID: {}, ì‹œì„¤ëª…: {}", facilityId, facility.getFacilityName());
â‹®----
// ===== ê²€ìƒ‰ ë° í•„í„°ë§ =====
â‹®----
/**
     * ì‹œì„¤ëª…ìœ¼ë¡œ ê²€ìƒ‰
     */
public List<FacilityProfile> searchFacilitiesByName(String facilityName) {
log.debug("ì‹œì„¤ëª… ê²€ìƒ‰ - í‚¤ì›Œë“œ: {}", facilityName);
â‹®----
if (facilityName == null || facilityName.trim().isEmpty()) {
â‹®----
return facilityProfileRepository.findByFacilityNameContainingIgnoreCase(facilityName.trim());
â‹®----
public List<FacilityProfile> getFacilitiesByRegion(String region) {
log.debug("ì§€ì—­ë³„ ì‹œì„¤ ì¡°íšŒ - ì§€ì—­: {}", region);
â‹®----
if (region == null || region.trim().isEmpty()) {
â‹®----
return facilityProfileRepository.findByRegion(region);
â‹®----
/**
     * ì‹œì„¤ íƒ€ì…ë³„ ì¡°íšŒ
     */
â‹®----
public List<FacilityProfile> getFacilitiesByType(String facilityType) {
log.debug("ì‹œì„¤ íƒ€ì…ë³„ ì¡°íšŒ - íƒ€ì…: {}", facilityType);
â‹®----
if (facilityType == null || facilityType.trim().isEmpty()) {
â‹®----
return facilityProfileRepository.findByFacilityType(facilityType);
â‹®----
/**
     * ì‹œì„¤ ë“±ê¸‰ë³„ ì¡°íšŒ
     */
â‹®----
public List<FacilityProfile> getFacilitiesByGrade(String facilityGrade) {
log.debug("ì‹œì„¤ ë“±ê¸‰ë³„ ì¡°íšŒ - ë“±ê¸‰: {}", facilityGrade);
â‹®----
if (facilityGrade == null || !facilityGrade.matches("[A-E]")) {
â‹®----
return facilityProfileRepository.findByFacilityGrade(facilityGrade);
â‹®----
/**
     * ì…ì£¼ ê°€ëŠ¥í•œ ì‹œì„¤ ì¡°íšŒ
     */
â‹®----
public List<FacilityProfile> getAvailableFacilities() {
log.debug("ì…ì£¼ ê°€ëŠ¥í•œ ì‹œì„¤ ì¡°íšŒ");
return facilityProfileRepository.findAvailableFacilities();
â‹®----
// ===== ìœ„ì¹˜ ê¸°ë°˜ ê²€ìƒ‰ =====
â‹®----
/**
     * ê·¼ì²˜ ì‹œì„¤ ê²€ìƒ‰
     */
public List<FacilityProfile> findNearbyFacilities(BigDecimal latitude, BigDecimal longitude, double radiusKm) {
log.debug("ê·¼ì²˜ ì‹œì„¤ ê²€ìƒ‰ - ìœ„ë„: {}, ê²½ë„: {}, ë°˜ê²½: {}km", latitude, longitude, radiusKm);
â‹®----
return facilityProfileRepository.findNearbyFacilities(latitude, longitude, radiusKm);
â‹®----
// ===== ì¼€ì–´ ë“±ê¸‰ ê¸°ë°˜ ê²€ìƒ‰ =====
â‹®----
/**
     * íŠ¹ì • ì¼€ì–´ ë“±ê¸‰ ìˆ˜ìš© ê°€ëŠ¥ ì‹œì„¤ ì¡°íšŒ
     */
â‹®----
public List<FacilityProfile> getFacilitiesByCareGrade(Integer careGrade) {
log.debug("ì¼€ì–´ ë“±ê¸‰ë³„ ì‹œì„¤ ì¡°íšŒ - ë“±ê¸‰: {}", careGrade);
â‹®----
return facilityProfileRepository.findByAcceptableCareGradesContaining(careGrade);
â‹®----
/**
     * ë³µìˆ˜ ì¼€ì–´ ë“±ê¸‰ ìˆ˜ìš© ê°€ëŠ¥ ì‹œì„¤ ì¡°íšŒ
     */
public List<FacilityProfile> getFacilitiesByCareGrades(Set<Integer> careGrades) {
log.debug("ë³µìˆ˜ ì¼€ì–´ ë“±ê¸‰ë³„ ì‹œì„¤ ì¡°íšŒ - ë“±ê¸‰: {}", careGrades);
â‹®----
if (careGrades == null || careGrades.isEmpty()) {
â‹®----
// ìœ íš¨í•œ ì¼€ì–´ ë“±ê¸‰ì¸ì§€ ê²€ì¦
boolean hasInvalidGrade = careGrades.stream().anyMatch(grade -> grade < 1 || grade > 6);
â‹®----
return facilityProfileRepository.findByAcceptableCareGradesContainingAny(careGrades);
â‹®----
// ===== ì „ë¬¸ì„± ê¸°ë°˜ ê²€ìƒ‰ =====
â‹®----
/**
     * ì¹˜ë§¤ ì „ë¬¸ ì‹œì„¤ ì¡°íšŒ
     */
â‹®----
public List<FacilityProfile> getDementiaSpecializedFacilities() {
log.debug("ì¹˜ë§¤ ì „ë¬¸ ì‹œì„¤ ì¡°íšŒ");
return facilityProfileRepository.findDementiaSpecializedFacilities();
â‹®----
/**
     * ì˜ë£Œ ì „ë¬¸ ì‹œì„¤ ì¡°íšŒ
     */
â‹®----
public List<FacilityProfile> getMedicalSpecializedFacilities() {
log.debug("ì˜ë£Œ ì „ë¬¸ ì‹œì„¤ ì¡°íšŒ");
return facilityProfileRepository.findMedicalSpecializedFacilities();
â‹®----
/**
     * ì¬í™œ ì „ë¬¸ ì‹œì„¤ ì¡°íšŒ
     */
â‹®----
public List<FacilityProfile> getRehabilitationSpecializedFacilities() {
log.debug("ì¬í™œ ì „ë¬¸ ì‹œì„¤ ì¡°íšŒ");
return facilityProfileRepository.findRehabilitationSpecializedFacilities();
â‹®----
/**
     * í˜¸ìŠ¤í”¼ìŠ¤ ì „ë¬¸ ì‹œì„¤ ì¡°íšŒ
     */
â‹®----
public List<FacilityProfile> getHospiceSpecializedFacilities() {
log.debug("í˜¸ìŠ¤í”¼ìŠ¤ ì „ë¬¸ ì‹œì„¤ ì¡°íšŒ");
return facilityProfileRepository.findHospiceSpecializedFacilities();
â‹®----
// ===== ì‹œì„¤-í™˜ì ë§¤ì¹­ ë¡œì§ =====
â‹®----
/**
     * ê±´ê°• ìƒíƒœ ê¸°ë°˜ ì‹œì„¤ ì¶”ì²œ
     */
public List<FacilityRecommendation> recommendFacilities(HealthAssessment assessment, FacilityMatchingPreference preference) {
log.info("ì‹œì„¤ ì¶”ì²œ ì‹œì‘ - íšŒì›: {}, ì¼€ì–´ë“±ê¸‰: {}", assessment.getMemberId(), assessment.getOverallCareGrade());
â‹®----
// 1. ê¸°ë³¸ í˜¸í™˜ì„± í•„í„°ë§
List<FacilityProfile> compatibleFacilities = findCompatibleFacilities(assessment);
â‹®----
// 2. ì‚¬ìš©ì ì„ í˜¸ë„ ì ìš©
List<FacilityProfile> filteredFacilities = applyUserPreferences(compatibleFacilities, preference);
â‹®----
// 3. ë§¤ì¹­ ì ìˆ˜ ê³„ì‚° ë° ì •ë ¬
List<FacilityRecommendation> recommendations = filteredFacilities.stream()
.map(facility -> calculateFacilityMatch(facility, assessment, preference))
.sorted(Comparator.comparing(FacilityRecommendation::getMatchScore).reversed())
.limit(preference.getMaxRecommendations() != null ? preference.getMaxRecommendations() : 10)
â‹®----
log.info("ì‹œì„¤ ì¶”ì²œ ì™„ë£Œ - ì´ {}ê°œ ì‹œì„¤ ì¶”ì²œ", recommendations.size());
â‹®----
/**
     * ì¬ì™¸ë™í¬ ë§ì¶¤ ì‹œì„¤ ì¶”ì²œ
     */
â‹®----
public List<FacilityProfile> getOverseasKoreanFriendlyFacilities() {
log.debug("ì¬ì™¸ë™í¬ ë§ì¶¤ ì‹œì„¤ ì¡°íšŒ");
return facilityProfileRepository.findOverseasKoreanFriendlyFacilities();
â‹®----
// ===== ì¢…í•© ê²€ìƒ‰ =====
â‹®----
/**
     * ë³µí•© ì¡°ê±´ ì‹œì„¤ ê²€ìƒ‰
     */
public Page<FacilityProfile> searchFacilitiesWithFilters(FacilitySearchCriteria criteria, Pageable pageable) {
log.debug("ë³µí•© ì¡°ê±´ ì‹œì„¤ ê²€ìƒ‰ - ì¡°ê±´: {}", criteria);
â‹®----
return facilityProfileRepository.findFacilitiesWithFilters(
criteria.getRegion(),
criteria.getFacilityType(),
criteria.getMinCapacity(),
criteria.getMaxMonthlyFee(),
â‹®----
// ===== í†µê³„ ë° ì§‘ê³„ =====
â‹®----
/**
     * ì§€ì—­ë³„ ì‹œì„¤ í†µê³„
     */
â‹®----
public Map<String, Long> getFacilityStatisticsByRegion() {
log.debug("ì§€ì—­ë³„ ì‹œì„¤ í†µê³„ ì¡°íšŒ");
â‹®----
List<Object[]> results = facilityProfileRepository.countByRegion();
â‹®----
return results.stream()
.collect(Collectors.toMap(
â‹®----
/**
     * ì‹œì„¤ íƒ€ì…ë³„ í†µê³„
     */
â‹®----
public Map<String, Long> getFacilityStatisticsByType() {
log.debug("ì‹œì„¤ íƒ€ì…ë³„ í†µê³„ ì¡°íšŒ");
â‹®----
List<Object[]> results = facilityProfileRepository.countByFacilityType();
â‹®----
/**
     * ì‹œì„¤ ë“±ê¸‰ë³„ í†µê³„
     */
â‹®----
public Map<String, Long> getFacilityStatisticsByGrade() {
log.debug("ì‹œì„¤ ë“±ê¸‰ë³„ í†µê³„ ì¡°íšŒ");
â‹®----
List<Object[]> results = facilityProfileRepository.countByFacilityGrade();
â‹®----
/**
     * ì „ì²´ ì‹œì„¤ í†µê³„ ìš”ì•½
     */
â‹®----
public FacilityStatisticsSummary getFacilityStatisticsSummary() {
log.debug("ì „ì²´ ì‹œì„¤ í†µê³„ ìš”ì•½ ì¡°íšŒ");
â‹®----
long totalFacilities = facilityProfileRepository.count();
long availableFacilities = facilityProfileRepository.countAvailableFacilities();
Double averageFee = facilityProfileRepository.findAverageMonthlyBasicFee();
â‹®----
return FacilityStatisticsSummary.builder()
.totalFacilities(totalFacilities)
.availableFacilities(availableFacilities)
.averageMonthlyFee(averageFee != null ? averageFee.intValue() : 0)
.occupancyRate((double) (totalFacilities - availableFacilities) / totalFacilities * 100)
.regionStatistics(getFacilityStatisticsByRegion())
.typeStatistics(getFacilityStatisticsByType())
.gradeStatistics(getFacilityStatisticsByGrade())
.lastUpdated(LocalDateTime.now())
.build();
â‹®----
// ===== ëª¨ë“  ìºì‹œ ë¬´íš¨í™” =====
â‹®----
public void evictAllCaches() {
log.info("ì‹œì„¤ ê´€ë ¨ ëª¨ë“  ìºì‹œ ì‚­ì œ");
â‹®----
// ===== ë‚´ë¶€ í—¬í¼ ë©”ì„œë“œ =====
â‹®----
private void setDefaultValues(FacilityProfile facility) {
if (facility.getCurrentOccupancy() == null) {
facility.setCurrentOccupancy(0);
â‹®----
if (facility.getBusinessStatus() == null) {
facility.setBusinessStatus("ì •ìƒ");
â‹®----
if (facility.getAcceptsLtci() == null) {
facility.setAcceptsLtci(true);
â‹®----
if (facility.getAcceptsBasicLiving() == null) {
facility.setAcceptsBasicLiving(false);
â‹®----
private void updateFacilityFields(FacilityProfile facility, FacilityProfile updateData) {
// ê¸°ë³¸ ì •ë³´ ì—…ë°ì´íŠ¸
if (updateData.getFacilityName() != null) {
facility.setFacilityName(updateData.getFacilityName());
â‹®----
if (updateData.getFacilityType() != null) {
facility.setFacilityType(updateData.getFacilityType());
â‹®----
if (updateData.getFacilityGrade() != null) {
facility.setFacilityGrade(updateData.getFacilityGrade());
â‹®----
if (updateData.getEvaluationScore() != null) {
facility.setEvaluationScore(updateData.getEvaluationScore());
â‹®----
// ì—°ë½ì²˜ ì •ë³´ ì—…ë°ì´íŠ¸
if (updateData.getPhoneNumber() != null) {
facility.setPhoneNumber(updateData.getPhoneNumber());
â‹®----
if (updateData.getEmail() != null) {
facility.setEmail(updateData.getEmail());
â‹®----
// ì£¼ì†Œ ì •ë³´ ì—…ë°ì´íŠ¸
if (updateData.getAddress() != null) {
facility.setAddress(updateData.getAddress());
â‹®----
if (updateData.getRegion() != null) {
facility.setRegion(updateData.getRegion());
â‹®----
if (updateData.getDistrict() != null) {
facility.setDistrict(updateData.getDistrict());
â‹®----
// ìœ„ì¹˜ ì •ë³´ ì—…ë°ì´íŠ¸
if (updateData.getLatitude() != null) {
facility.setLatitude(updateData.getLatitude());
â‹®----
if (updateData.getLongitude() != null) {
facility.setLongitude(updateData.getLongitude());
â‹®----
// ìˆ˜ìš© ëŠ¥ë ¥ ì—…ë°ì´íŠ¸
if (updateData.getTotalCapacity() != null) {
facility.setTotalCapacity(updateData.getTotalCapacity());
â‹®----
if (updateData.getCurrentOccupancy() != null) {
facility.setCurrentOccupancy(updateData.getCurrentOccupancy());
â‹®----
// ì „ë¬¸ì„± ë° íŠ¹ì§• ì—…ë°ì´íŠ¸
if (updateData.getAcceptableCareGrades() != null) {
facility.setAcceptableCareGrades(updateData.getAcceptableCareGrades());
â‹®----
if (updateData.getSpecializations() != null) {
facility.setSpecializations(updateData.getSpecializations());
â‹®----
// ì˜ë£Œì§„ ì •ë³´ ì—…ë°ì´íŠ¸
if (updateData.getHasDoctor() != null) {
facility.setHasDoctor(updateData.getHasDoctor());
â‹®----
if (updateData.getHasNurse24h() != null) {
facility.setHasNurse24h(updateData.getHasNurse24h());
â‹®----
if (updateData.getNurseCount() != null) {
facility.setNurseCount(updateData.getNurseCount());
â‹®----
if (updateData.getCaregiverCount() != null) {
facility.setCaregiverCount(updateData.getCaregiverCount());
â‹®----
// ë¹„ìš© ì •ë³´ ì—…ë°ì´íŠ¸
if (updateData.getMonthlyBasicFee() != null) {
facility.setMonthlyBasicFee(updateData.getMonthlyBasicFee());
â‹®----
if (updateData.getAdmissionFee() != null) {
facility.setAdmissionFee(updateData.getAdmissionFee());
â‹®----
// ìš´ì˜ ì •ë³´ ì—…ë°ì´íŠ¸
if (updateData.getBusinessStatus() != null) {
facility.setBusinessStatus(updateData.getBusinessStatus());
â‹®----
// ì„¤ëª… ì—…ë°ì´íŠ¸
if (updateData.getDescription() != null) {
facility.setDescription(updateData.getDescription());
â‹®----
private List<FacilityProfile> findCompatibleFacilities(HealthAssessment assessment) {
Integer careGrade = assessment.getCareGradeLevel();
â‹®----
// ê¸°ë³¸ í˜¸í™˜ì„± í•„í„°ë§
List<FacilityProfile> compatibleFacilities = facilityProfileRepository.findByAcceptableCareGradesContaining(careGrade);
â‹®----
// ì…ì£¼ ê°€ëŠ¥í•œ ì‹œì„¤ë§Œ í•„í„°ë§
return compatibleFacilities.stream()
.filter(FacilityProfile::hasAvailableSpace)
.filter(facility -> "ì •ìƒ".equals(facility.getBusinessStatus()) || "ìš´ì˜ì¤‘".equals(facility.getBusinessStatus()))
â‹®----
private List<FacilityProfile> applyUserPreferences(List<FacilityProfile> facilities, FacilityMatchingPreference preference) {
return facilities.stream()
.filter(facility -> {
// ì§€ì—­ ì„ í˜¸ë„
if (preference.getPreferredRegions() != null && !preference.getPreferredRegions().isEmpty()) {
if (!preference.getPreferredRegions().contains(facility.getRegion())) {
â‹®----
// ì‹œì„¤ íƒ€ì… ì„ í˜¸ë„
if (preference.getPreferredFacilityTypes() != null && !preference.getPreferredFacilityTypes().isEmpty()) {
if (!preference.getPreferredFacilityTypes().contains(facility.getFacilityType())) {
â‹®----
// ì˜ˆì‚° ì œí•œ
if (preference.getMaxMonthlyBudget() != null && facility.getMonthlyBasicFee() != null) {
if (facility.getMonthlyBasicFee() > preference.getMaxMonthlyBudget()) {
â‹®----
// ìµœì†Œ ì‹œì„¤ ë“±ê¸‰
if (preference.getMinFacilityGrade() != null && facility.getFacilityGrade() != null) {
String minGrade = preference.getMinFacilityGrade();
String facilityGrade = facility.getFacilityGrade();
â‹®----
// A > B > C > D > E ìˆœì„œë¡œ ë¹„êµ
if (facilityGrade.compareTo(minGrade) > 0) {
â‹®----
private FacilityRecommendation calculateFacilityMatch(FacilityProfile facility, HealthAssessment assessment, FacilityMatchingPreference preference) {
â‹®----
// 1. ì‹œì„¤ ë“±ê¸‰ ì ìˆ˜ (30%)
matchScore += calculateFacilityGradeScore(facility) * 0.3;
â‹®----
// 2. ì „ë¬¸ì„± ë§¤ì¹­ ì ìˆ˜ (25%)
matchScore += calculateSpecializationMatchScore(facility, assessment) * 0.25;
â‹®----
// 3. ì˜ë£Œì§„ ì í•©ì„± ì ìˆ˜ (20%)
matchScore += calculateMedicalStaffScore(facility, assessment) * 0.2;
â‹®----
// 4. ìœ„ì¹˜ ì ‘ê·¼ì„± ì ìˆ˜ (15%)
matchScore += calculateLocationScore(facility, preference) * 0.15;
â‹®----
// 5. ë¹„ìš© ì í•©ì„± ì ìˆ˜ (10%)
matchScore += calculateCostScore(facility, preference) * 0.1;
â‹®----
String explanation = generateMatchExplanation(facility, assessment, matchScore);
â‹®----
return FacilityRecommendation.builder()
.facility(facility)
.matchScore(matchScore)
.explanation(explanation)
.overseasFriendlyScore(facility.getOverseasFriendlyScore())
.reliabilityScore(facility.getReliabilityScore())
.estimatedMonthlyCost(facility.getEstimatedMonthlyCostRange())
â‹®----
private double calculateFacilityGradeScore(FacilityProfile facility) {
if (facility.getFacilityGrade() == null) {
â‹®----
return switch (facility.getFacilityGrade()) {
â‹®----
private double calculateSpecializationMatchScore(FacilityProfile facility, HealthAssessment assessment) {
double score = 2.5; // ê¸°ë³¸ ì ìˆ˜
â‹®----
Set<String> specializations = facility.getSpecializations();
if (specializations == null || specializations.isEmpty()) {
â‹®----
// ì¹˜ë§¤ ì „ë¬¸ì„± ë§¤ì¹­
if (assessment.getLtciGrade() != null && assessment.getLtciGrade() == 6) {
if (specializations.contains("dementia")) {
â‹®----
// ì˜ë£Œ ì „ë¬¸ì„± ë§¤ì¹­ (1-2ë“±ê¸‰)
if (assessment.getCareGradeLevel() <= 2) {
if (specializations.contains("medical")) {
â‹®----
// ì¬í™œ ì „ë¬¸ì„± ë§¤ì¹­
if (assessment.getMobilityLevel() != null && assessment.getMobilityLevel() >= 2) {
if (specializations.contains("rehabilitation")) {
â‹®----
// í˜¸ìŠ¤í”¼ìŠ¤ ì „ë¬¸ì„± ë§¤ì¹­
if (assessment.needsHospiceCare()) {
if (specializations.contains("hospice")) {
â‹®----
return Math.min(score, 5.0);
â‹®----
private double calculateMedicalStaffScore(FacilityProfile facility, HealthAssessment assessment) {
â‹®----
int careGradeLevel = assessment.getCareGradeLevel();
â‹®----
// ì¤‘ì¦í™˜ì(1-2ë“±ê¸‰)ëŠ” ì˜ë£Œì§„ í•„ìˆ˜
â‹®----
if (Boolean.TRUE.equals(facility.getHasDoctor())) {
â‹®----
if (Boolean.TRUE.equals(facility.getHasNurse24h())) {
â‹®----
// ê°„í˜¸ì‚¬ ëŒ€ í™˜ì ë¹„ìœ¨
if (facility.getNurseCount() != null && facility.getCurrentOccupancy() != null && facility.getCurrentOccupancy() > 0) {
double nurseRatio = (double) facility.getNurseCount() / facility.getCurrentOccupancy();
if (nurseRatio >= 0.1) { // 10:1 ë¹„ìœ¨ ì´ìƒ
â‹®----
private double calculateLocationScore(FacilityProfile facility, FacilityMatchingPreference preference) {
â‹®----
// ì ‘ê·¼ì„± ì ìˆ˜
if (Boolean.TRUE.equals(facility.getNearSubway())) {
â‹®----
if (Boolean.TRUE.equals(facility.getNearHospital())) {
â‹®----
if (Boolean.TRUE.equals(facility.getNearPharmacy())) {
â‹®----
private double calculateCostScore(FacilityProfile facility, FacilityMatchingPreference preference) {
â‹®----
if (facility.getMonthlyBasicFee() == null || preference.getMaxMonthlyBudget() == null) {
â‹®----
double costRatio = (double) facility.getMonthlyBasicFee() / preference.getMaxMonthlyBudget();
â‹®----
score = 5.0; // ì˜ˆì‚°ì˜ 70% ì´í•˜
â‹®----
score = 4.0; // ì˜ˆì‚°ì˜ 85% ì´í•˜
â‹®----
score = 3.0; // ì˜ˆì‚° ë‚´
â‹®----
score = 1.0; // ì˜ˆì‚° ì´ˆê³¼
â‹®----
// ì¥ê¸°ìš”ì–‘ë³´í—˜ ì ìš© ì‹œ ì¶”ê°€ ì ìˆ˜
if (Boolean.TRUE.equals(facility.getAcceptsLtci())) {
â‹®----
private String generateMatchExplanation(FacilityProfile facility, HealthAssessment assessment, double matchScore) {
StringBuilder explanation = new StringBuilder();
â‹®----
explanation.append("ğŸ¯ ë§¤ì¹­ ì ìˆ˜: ").append(String.format("%.1f", matchScore)).append("/5.0\n\n");
â‹®----
explanation.append("âœ… ë§¤ì¹­ ì´ìœ :\n");
â‹®----
// ì‹œì„¤ ë“±ê¸‰ ì„¤ëª…
if (facility.getFacilityGrade() != null) {
explanation.append("â€¢ ì‹œì„¤ ë“±ê¸‰: ").append(facility.getFacilityGrade()).append("ë“±ê¸‰");
if (facility.getEvaluationScore() != null) {
explanation.append(" (").append(facility.getEvaluationScore()).append("ì )");
â‹®----
explanation.append("\n");
â‹®----
// ì¼€ì–´ ë“±ê¸‰ í˜¸í™˜ì„±
if (facility.canAcceptCareGrade(assessment.getCareGradeLevel())) {
explanation.append("â€¢ ì¼€ì–´ ë“±ê¸‰ í˜¸í™˜: ").append(assessment.getCareGradeLevel()).append("ë“±ê¸‰ ìˆ˜ìš© ê°€ëŠ¥\n");
â‹®----
// ì „ë¬¸ì„± ë§¤ì¹­
â‹®----
if (specializations != null && !specializations.isEmpty()) {
explanation.append("â€¢ ì „ë¬¸ ë¶„ì•¼: ");
explanation.append(String.join(", ", specializations.stream()
.map(this::translateSpecialization)
.collect(Collectors.toList())));
â‹®----
// ì˜ë£Œì§„ ì •ë³´
if (Boolean.TRUE.equals(facility.getHasDoctor()) || Boolean.TRUE.equals(facility.getHasNurse24h())) {
explanation.append("â€¢ ì˜ë£Œì§„: ");
â‹®----
explanation.append("ì˜ì‚¬ ìƒì£¼ ");
â‹®----
explanation.append("24ì‹œê°„ ê°„í˜¸ ");
â‹®----
// ì…ì£¼ ê°€ëŠ¥ì„±
if (facility.hasAvailableSpace()) {
explanation.append("â€¢ ì…ì£¼ ê°€ëŠ¥: ").append(facility.getAvailableBeds()).append("ê°œ ì¹¨ëŒ€ ì—¬ìœ \n");
â‹®----
// ë¹„ìš© ì •ë³´
if (facility.getMonthlyBasicFee() != null) {
explanation.append("â€¢ ì˜ˆìƒ ë¹„ìš©: ").append(facility.getEstimatedMonthlyCostRange()).append("\n");
â‹®----
// ì ‘ê·¼ì„± ì •ë³´
â‹®----
accessibilities.add("ì§€í•˜ì²  ê·¼ì²˜");
â‹®----
accessibilities.add("ë³‘ì› ê·¼ì²˜");
â‹®----
if (!accessibilities.isEmpty()) {
explanation.append("â€¢ ì ‘ê·¼ì„±: ").append(String.join(", ", accessibilities)).append("\n");
â‹®----
return explanation.toString();
â‹®----
private String translateSpecialization(String specialization) {
â‹®----
// ===== DTO í´ë˜ìŠ¤ë“¤ =====
â‹®----
public static class FacilityRecommendation {
â‹®----
public static class FacilityMatchingPreference {
â‹®----
public static class FacilitySearchCriteria {
â‹®----
public static class FacilityStatisticsSummary {
â‹®----
public static class FacilityStatistics {
â‹®----
// ===== ë§¤ì¹­ ì´ë ¥ ì¶”ì  =====
â‹®----
/**
     * ë§¤ì¹­ ì¶”ì²œ ê²°ê³¼ë¥¼ ì´ë ¥ì— ì €ì¥
     */
â‹®----
public void recordMatchingRecommendations(String userId, String coordinatorId,
â‹®----
log.info("ë§¤ì¹­ ì¶”ì²œ ì´ë ¥ ì €ì¥ - ì‚¬ìš©ì: {}, ì¶”ì²œ ìˆ˜: {}", userId, recommendations.size());
â‹®----
for (int i = 0; i < recommendations.size(); i++) {
FacilityRecommendation recommendation = recommendations.get(i);
â‹®----
FacilityMatchingHistory history = FacilityMatchingHistory.builder()
.userId(userId)
.facilityId(recommendation.getFacility().getId())
.coordinatorId(coordinatorId)
.initialMatchScore(BigDecimal.valueOf(recommendation.getMatchScore()).setScale(2, java.math.RoundingMode.HALF_UP))
.recommendationRank(i + 1)
.matchingCriteria(serializeMatchingCriteria(assessment, preference))
.facilitySnapshot(serializeFacilitySnapshot(recommendation.getFacility()))
.estimatedCost(calculateEstimatedMonthlyCost(recommendation.getFacility(), assessment))
â‹®----
matchingHistoryRepository.save(history);
â‹®----
log.info("ë§¤ì¹­ ì¶”ì²œ ì´ë ¥ ì €ì¥ ì™„ë£Œ - {} ê±´", recommendations.size());
â‹®----
/**
     * ì‚¬ìš©ì í–‰ë™ ì¶”ì  - ì‹œì„¤ ì¡°íšŒ
     */
â‹®----
public void trackFacilityView(String userId, Long facilityId) {
â‹®----
matchingHistoryRepository.findTopByUserIdAndFacilityIdOrderByCreatedAtDesc(userId, facilityId);
â‹®----
if (historyOpt.isPresent()) {
FacilityMatchingHistory history = historyOpt.get();
history.markAsViewed();
â‹®----
log.info("ì‹œì„¤ ì¡°íšŒ ì¶”ì  ì™„ë£Œ - ì‚¬ìš©ì: {}, ì‹œì„¤: {}", userId, facilityId);
â‹®----
/**
     * ì‚¬ìš©ì í–‰ë™ ì¶”ì  - ì‹œì„¤ ì—°ë½
     */
â‹®----
public void trackFacilityContact(String userId, Long facilityId) {
â‹®----
history.markAsContracted();
â‹®----
log.info("ì‹œì„¤ ì—°ë½ ì¶”ì  ì™„ë£Œ - ì‚¬ìš©ì: {}, ì‹œì„¤: {}", userId, facilityId);
â‹®----
/**
     * ì‚¬ìš©ì í–‰ë™ ì¶”ì  - ì‹œì„¤ ë°©ë¬¸
     */
â‹®----
public void trackFacilityVisit(String userId, Long facilityId) {
â‹®----
history.markAsVisited();
â‹®----
log.info("ì‹œì„¤ ë°©ë¬¸ ì¶”ì  ì™„ë£Œ - ì‚¬ìš©ì: {}, ì‹œì„¤: {}", userId, facilityId);
â‹®----
/**
     * ë§¤ì¹­ ì™„ë£Œ ì²˜ë¦¬
     */
â‹®----
public void completeMatching(String userId, Long facilityId,
â‹®----
history.markAsSelected(outcome);
â‹®----
history.setActualCost(actualCost);
â‹®----
history.updateFeedback(satisfactionScore, feedback);
â‹®----
log.info("ë§¤ì¹­ ì™„ë£Œ ì²˜ë¦¬ - ì‚¬ìš©ì: {}, ì‹œì„¤: {}, ê²°ê³¼: {}", userId, facilityId, outcome);
â‹®----
/**
     * í•™ìŠµ ê¸°ë°˜ ë§¤ì¹­ ì ìˆ˜ ì¡°ì •
     */
public List<FacilityRecommendation> adjustMatchingScoresWithLearning(List<FacilityRecommendation> recommendations,
â‹®----
// ì‚¬ìš©ìì˜ ê³¼ê±° ë§¤ì¹­ ì´ë ¥ì„ ê¸°ë°˜ìœ¼ë¡œ ì ìˆ˜ ì¡°ì •
â‹®----
matchingHistoryRepository.findByUserIdOrderByCreatedAtDesc(userId);
â‹®----
if (userHistory.isEmpty()) {
return recommendations; // ì´ë ¥ì´ ì—†ìœ¼ë©´ ì›ë³¸ ê·¸ëŒ€ë¡œ ë°˜í™˜
â‹®----
// ì„±ê³µí•œ ë§¤ì¹­ë“¤ì˜ íŒ¨í„´ ë¶„ì„
List<FacilityMatchingHistory> successfulMatches = userHistory.stream()
.filter(FacilityMatchingHistory::isSuccessfulMatch)
â‹®----
if (successfulMatches.isEmpty()) {
â‹®----
// ì„ í˜¸ íŒ¨í„´ ì¶”ì¶œ
Map<String, Double> facilityTypePreference = extractFacilityTypePreference(successfulMatches);
Map<String, Double> facilityGradePreference = extractFacilityGradePreference(successfulMatches);
double avgSuccessfulCost = calculateAverageSuccessfulCost(successfulMatches);
â‹®----
// ì¶”ì²œ ì ìˆ˜ ì¡°ì •
return recommendations.stream()
.map(rec -> adjustRecommendationScore(rec, facilityTypePreference, facilityGradePreference, avgSuccessfulCost))
â‹®----
// ===== í•™ìŠµ ê¸°ë°˜ ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œ =====
â‹®----
private String serializeMatchingCriteria(HealthAssessment assessment, FacilityMatchingPreference preference) {
return String.format("{\"careGrade\":%d,\"regions\":%s,\"maxFee\":%d}",
assessment.getCareGradeLevel(),
preference.getPreferredRegions().toString(),
preference.getMaxMonthlyFee() != null ? preference.getMaxMonthlyFee() : 0);
â‹®----
private String serializeFacilitySnapshot(FacilityProfile facility) {
return String.format("{\"type\":\"%s\",\"grade\":\"%s\",\"capacity\":%d,\"monthlyFee\":%d}",
facility.getFacilityType(),
facility.getFacilityGrade(),
facility.getTotalCapacity(),
facility.getMonthlyBasicFee() != null ? facility.getMonthlyBasicFee() : 0);
â‹®----
private BigDecimal calculateEstimatedMonthlyCost(FacilityProfile facility, HealthAssessment assessment) {
Integer basicFee = facility.getMonthlyBasicFee();
â‹®----
// ì¼€ì–´ ë“±ê¸‰ì— ë”°ë¥¸ ë¹„ìš© ì¡°ì •
â‹®----
multiplier += 0.3; // ì¤‘ì¦ ì¼€ì–´ 30% ì¶”ê°€
} else if (assessment.getCareGradeLevel() <= 3) {
multiplier += 0.15; // ì¤‘ë“±ë„ ì¼€ì–´ 15% ì¶”ê°€
â‹®----
return BigDecimal.valueOf(basicFee * multiplier).setScale(0, java.math.RoundingMode.HALF_UP);
â‹®----
private Map<String, Double> extractFacilityTypePreference(List<FacilityMatchingHistory> successfulMatches) {
â‹®----
successfulMatches.forEach(match -> {
// ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì‹œì„¤ ì •ë³´ë¥¼ ì¡°íšŒí•˜ì—¬ íƒ€ì…ì„ í™•ì¸
// ì—¬ê¸°ì„œëŠ” ê°„ë‹¨íˆ ì²˜ë¦¬
Optional<FacilityProfile> facility = facilityProfileRepository.findById(match.getFacilityId());
if (facility.isPresent()) {
String type = facility.get().getFacilityType();
preferences.merge(type, 1.0, Double::sum);
â‹®----
// ì •ê·œí™”
double total = preferences.values().stream().mapToDouble(Double::doubleValue).sum();
â‹®----
preferences.replaceAll((k, v) -> v / total);
â‹®----
private Map<String, Double> extractFacilityGradePreference(List<FacilityMatchingHistory> successfulMatches) {
â‹®----
String grade = facility.get().getFacilityGrade();
preferences.merge(grade, 1.0, Double::sum);
â‹®----
private double calculateAverageSuccessfulCost(List<FacilityMatchingHistory> successfulMatches) {
return successfulMatches.stream()
.filter(match -> match.getActualCost() != null)
.mapToDouble(match -> match.getActualCost().doubleValue())
.average()
.orElse(0.0);
â‹®----
private FacilityRecommendation adjustRecommendationScore(FacilityRecommendation recommendation,
â‹®----
double currentScore = recommendation.getMatchScore();
â‹®----
FacilityProfile facility = recommendation.getFacility();
â‹®----
// ì‹œì„¤ íƒ€ì… ì„ í˜¸ë„ ë°˜ì˜
Double typeBonus = typePreference.get(facility.getFacilityType());
â‹®----
adjustmentFactor += typeBonus * 0.2; // ìµœëŒ€ 20% ê°€ì‚°
â‹®----
// ì‹œì„¤ ë“±ê¸‰ ì„ í˜¸ë„ ë°˜ì˜
Double gradeBonus = gradePreference.get(facility.getFacilityGrade());
â‹®----
adjustmentFactor += gradeBonus * 0.15; // ìµœëŒ€ 15% ê°€ì‚°
â‹®----
// ë¹„ìš© ìœ ì‚¬ì„± ë°˜ì˜
if (avgSuccessfulCost > 0 && facility.getMonthlyBasicFee() != null) {
double costSimilarity = 1.0 - Math.abs(facility.getMonthlyBasicFee() - avgSuccessfulCost) / avgSuccessfulCost;
adjustmentFactor += Math.max(0, costSimilarity) * 0.1; // ìµœëŒ€ 10% ê°€ì‚°
â‹®----
double adjustedScore = Math.min(currentScore * adjustmentFactor, 100.0);
â‹®----
return new FacilityRecommendation(facility, adjustedScore,
recommendation.getRecommendationReason() + " (í•™ìŠµ ê¸°ë°˜ ì¡°ì • ì ìš©)");
</file>

<file path="src/main/java/com/globalcarelink/health/dto/HealthAssessmentCreateRequest.java">
/**
 * ê±´ê°• í‰ê°€ ìƒì„± ìš”ì²­ DTO
 */
â‹®----
public class HealthAssessmentCreateRequest {
â‹®----
// === ADL í‰ê°€ (í•„ìˆ˜) ===
â‹®----
// === ì¶”ê°€ í‰ê°€ í•­ëª© ===
â‹®----
// === ì¶”ê°€ ì •ë³´ ===
â‹®----
private String notes; // íŠ¹ì´ì‚¬í•­
â‹®----
private String assessorName; // í‰ê°€ì ì´ë¦„
â‹®----
private String assessorRelation; // í‰ê°€ìì™€ì˜ ê´€ê³„ (ë³¸ì¸, ê°€ì¡±, ê°„ë³‘ì¸ ë“±)
</file>

<file path="src/main/java/com/globalcarelink/health/dto/HealthAssessmentStatistics.java">
/**
 * ê±´ê°• í‰ê°€ í†µê³„ ì‘ë‹µ DTO
 */
â‹®----
public class HealthAssessmentStatistics {
â‹®----
// === ê¸°ë³¸ í†µê³„ ===
â‹®----
/**
     * ì „ì²´ í‰ê°€ ìˆ˜
     */
â‹®----
/**
     * ì™„ì„±ëœ í‰ê°€ ìˆ˜ (4ê°œ ADL ì˜ì—­ ëª¨ë‘ ì‘ì„±)
     */
â‹®----
/**
     * ìµœê·¼ 30ì¼ í‰ê°€ ìˆ˜
     */
â‹®----
/**
     * ì™„ì„±ë„ ë¹„ìœ¨ (%)
     */
public double getCompletionRate() {
â‹®----
// === ì¼€ì–´ ë“±ê¸‰ë³„ ë¶„í¬ ===
â‹®----
/**
     * ì¼€ì–´ ë“±ê¸‰ë³„ í†µê³„
     * [{"grade": "1", "count": 150}, {"grade": "2", "count": 200}, ...]
     */
â‹®----
/**
     * ADL ì ìˆ˜ êµ¬ê°„ë³„ ë¶„í¬
     * [{"score_range": "ê²½ì¦(100-140)", "count": 80}, ...]
     */
â‹®----
/**
     * ì—°ë ¹ëŒ€ë³„ ì¼€ì–´ ë“±ê¸‰ ë¶„í¬
     * [{"age_group": "70ëŒ€", "ltci_grade": "3", "count": 45}, ...]
     */
â‹®----
/**
     * ì„±ë³„ ì¼€ì–´ íŒ¨í„´ ë¶„ì„
     * [{"gender": "M", "ltci_grade": "2", "avg_adl_score": 180.5, "count": 30}, ...]
     */
â‹®----
// === íŠ¹í™” ì¼€ì–´ í†µê³„ ===
â‹®----
/**
     * í˜¸ìŠ¤í”¼ìŠ¤ ì¼€ì–´ ëŒ€ìƒì ìˆ˜
     */
â‹®----
/**
     * ì¹˜ë§¤ ì „ë¬¸ ì¼€ì–´ ëŒ€ìƒì ìˆ˜
     */
â‹®----
/**
     * ì¤‘ì¦ í™˜ì ìˆ˜
     */
â‹®----
/**
     * ì¬ì™¸ë™í¬ í‰ê°€ ìˆ˜
     */
â‹®----
// === ì¶”ê°€ ë¶„ì„ ë°ì´í„° ===
â‹®----
/**
     * í‰ê·  ADL ì ìˆ˜
     */
â‹®----
/**
     * ê°€ì¥ ë§ì€ ì¼€ì–´ ë“±ê¸‰
     */
â‹®----
/**
     * í‰ê°€ íŠ¸ë Œë“œ (ì›”ë³„)
     */
â‹®----
// === ë‚´ë¶€ DTO í´ë˜ìŠ¤ë“¤ ===
â‹®----
public static class MonthlyTrend {
private String month; // "2024-01"
â‹®----
public static class CareGradeStatistics {
â‹®----
public static class DiseaseTypeStatistics {
â‹®----
// === í¸ì˜ ë©”ì„œë“œ ===
â‹®----
/**
     * ì¼€ì–´ ë“±ê¸‰ë³„ í†µê³„ë¥¼ êµ¬ì¡°í™”ëœ ê°ì²´ë¡œ ë³€í™˜
     */
public List<CareGradeStatistics> getCareGradeStatisticsStructured() {
if (careGradeDistribution == null) return List.of();
â‹®----
return careGradeDistribution.stream()
.map(map -> CareGradeStatistics.builder()
.gradeLevel(String.valueOf(map.get("grade")))
.count((Long) map.get("count"))
.percentage(calculatePercentage((Long) map.get("count"), totalAssessments))
.build())
.toList();
â‹®----
/**
     * ìµœê³  ë¹ˆë„ ì¼€ì–´ ë“±ê¸‰ ì¡°íšŒ
     */
public String getMostFrequentCareGrade() {
if (careGradeDistribution == null || careGradeDistribution.isEmpty()) {
â‹®----
.max((a, b) -> Long.compare((Long) a.get("count"), (Long) b.get("count")))
.map(map -> String.valueOf(map.get("grade")))
.orElse("ë°ì´í„° ì—†ìŒ");
â‹®----
/**
     * ê±´ê°•í•œ ì‚¬ìš©ì ë¹„ìœ¨ (ADL ì ìˆ˜ 140ì  ì´í•˜)
     */
public double getHealthyUserRatio() {
â‹®----
long healthyCount = adlScoreDistribution.stream()
.filter(map -> {
String range = String.valueOf(map.get("score_range"));
return range.contains("ê²½ì¦(100-140)");
â‹®----
.mapToLong(map -> (Long) map.get("count"))
.sum();
â‹®----
/**
     * ê³ ìœ„í—˜êµ° ë¹„ìœ¨ (ADL ì ìˆ˜ 220ì  ì´ìƒ)
     */
public double getHighRiskRatio() {
â‹®----
long highRiskCount = adlScoreDistribution.stream()
â‹®----
return range.contains("ìµœì¤‘ì¦(221-300)");
â‹®----
// === ë‚´ë¶€ í—¬í¼ ë©”ì„œë“œ ===
â‹®----
private double calculatePercentage(Long count, Long total) {
</file>

<file path="src/main/java/com/globalcarelink/health/dto/HealthAssessmentUpdateRequest.java">
/**
 * ê±´ê°• í‰ê°€ ìˆ˜ì • ìš”ì²­ DTO
 * ëª¨ë“  í•„ë“œëŠ” ì„ íƒì‚¬í•­ (nullì´ë©´ ê¸°ì¡´ ê°’ ìœ ì§€)
 */
â‹®----
public class HealthAssessmentUpdateRequest {
â‹®----
// === ADL í‰ê°€ ===
â‹®----
// === ì¶”ê°€ í‰ê°€ í•­ëª© ===
â‹®----
// === ì¶”ê°€ ì •ë³´ ===
â‹®----
private String notes; // íŠ¹ì´ì‚¬í•­
â‹®----
private String updateReason; // ìˆ˜ì • ì‚¬ìœ 
</file>

<file path="src/main/java/com/globalcarelink/health/HealthAssessmentQueryService.java">
/**
 * ê±´ê°• í‰ê°€ ì „ë¬¸ ì¡°íšŒ ì„œë¹„ìŠ¤
 * ë³µì¡í•œ ì¡°ê±´ë³„ ì¡°íšŒ ë¡œì§ ë‹´ë‹¹ (SRP ì›ì¹™ ì ìš©)
 */
â‹®----
public class HealthAssessmentQueryService {
â‹®----
/**
     * íŠ¹ì • ì¼€ì–´ ë“±ê¸‰ ë²”ìœ„ì˜ í‰ê°€ ì¡°íšŒ
     */
public List<HealthAssessment> getAssessmentsByCareGradeRange(Integer minGrade, Integer maxGrade) {
log.debug("ì¼€ì–´ ë“±ê¸‰ ë²”ìœ„ ì¡°íšŒ - ìµœì†Œ: {}, ìµœëŒ€: {}", minGrade, maxGrade);
â‹®----
return healthAssessmentRepository.findByCareGradeRange(minGrade, maxGrade);
â‹®----
/**
     * í˜¸ìŠ¤í”¼ìŠ¤ ì¼€ì–´ ëŒ€ìƒì ì¡°íšŒ
     * - 1-2ë“±ê¸‰ ìµœì¤‘ì¦/ì¤‘ì¦ í™˜ì
     * - ë§ê¸° ì§ˆí™˜ ë³´ìœ ì
     */
public List<HealthAssessment> getHospiceCareTargets() {
log.debug("í˜¸ìŠ¤í”¼ìŠ¤ ì¼€ì–´ ëŒ€ìƒì ì¡°íšŒ");
return healthAssessmentRepository.findHospiceCareTargets();
â‹®----
/**
     * ì¹˜ë§¤ ì „ë¬¸ ì¼€ì–´ ëŒ€ìƒì ì¡°íšŒ
     * - ì¸ì§€ì§€ì›ë“±ê¸‰ ë˜ëŠ” ì¹˜ë§¤ ê´€ë ¨ ì§ˆí™˜
     * - ì˜ì‚¬ì†Œí†µ ëŠ¥ë ¥ ì €í•˜ì
     */
public List<HealthAssessment> getDementiaCareTargets() {
log.debug("ì¹˜ë§¤ ì „ë¬¸ ì¼€ì–´ ëŒ€ìƒì ì¡°íšŒ");
return healthAssessmentRepository.findDementiaCareTargets();
â‹®----
/**
     * ì¤‘ì¦ í™˜ì ì¡°íšŒ
     * - 1-3ë“±ê¸‰ ì¤‘ì¦ ì´ìƒ
     * - ADL ì ìˆ˜ 200ì  ì´ìƒ
     */
public List<HealthAssessment> getSevereCareTargets() {
log.debug("ì¤‘ì¦ í™˜ì ì¡°íšŒ");
return healthAssessmentRepository.findSevereCareTargets();
â‹®----
/**
     * ì¬ì™¸ë™í¬ ëŒ€ìƒ í‰ê°€ ì¡°íšŒ
     * - í•´ì™¸ ê±°ì£¼ í•œêµ­ì¸ ëŒ€ìƒ í‰ê°€
     */
public List<HealthAssessment> getOverseasKoreanAssessments() {
log.debug("ì¬ì™¸ë™í¬ ëŒ€ìƒ í‰ê°€ ì¡°íšŒ");
return healthAssessmentRepository.findOverseasKoreanAssessments();
â‹®----
/**
     * ADL ì ìˆ˜ ë²”ìœ„ë³„ ì¡°íšŒ
     */
public List<HealthAssessment> getAssessmentsByAdlScoreRange(Integer minScore, Integer maxScore) {
log.debug("ADL ì ìˆ˜ ë²”ìœ„ ì¡°íšŒ - ìµœì†Œ: {}, ìµœëŒ€: {}", minScore, maxScore);
â‹®----
return healthAssessmentRepository.findByAdlScoreRange(minScore, maxScore);
â‹®----
/**
     * íšŒì›ì˜ í‰ê°€ ê°œì„  ì¶”ì´ ë¶„ì„
     */
public List<Map<String, Object>> getMemberAssessmentTrend(String memberId) {
log.debug("íšŒì› í‰ê°€ ì¶”ì´ ë¶„ì„ - íšŒì›: {}", memberId);
â‹®----
if (memberId == null || memberId.trim().isEmpty()) {
â‹®----
return healthAssessmentRepository.findMemberAssessmentTrend(memberId);
â‹®----
/**
     * ì™„ì„±ëœ í‰ê°€ë§Œ ì¡°íšŒ
     */
public List<HealthAssessment> getCompleteAssessments() {
log.debug("ì™„ì„±ëœ í‰ê°€ ì¡°íšŒ");
return healthAssessmentRepository.findCompleteAssessments();
â‹®----
/**
     * íšŒì›ë³„ ê±´ê°• í‰ê°€ í˜ì´ì§• ì¡°íšŒ
     */
public Page<HealthAssessment> getAssessmentsByMemberId(String memberId, Pageable pageable) {
log.debug("íšŒì›ë³„ í‰ê°€ í˜ì´ì§• ì¡°íšŒ - íšŒì›: {}, í˜ì´ì§€: {}", memberId, pageable.getPageNumber());
â‹®----
return healthAssessmentRepository.findByMemberIdOrderByAssessmentDateDesc(memberId, pageable);
â‹®----
/**
     * íšŒì›ë³„ ê±´ê°• í‰ê°€ ì´ë ¥ ì¡°íšŒ (ì „ì²´)
     */
public List<HealthAssessment> getAssessmentHistoryByMemberId(String memberId) {
log.debug("íšŒì›ë³„ í‰ê°€ ì´ë ¥ ì¡°íšŒ - íšŒì›: {}", memberId);
â‹®----
return healthAssessmentRepository.findByMemberIdOrderByAssessmentDateDesc(memberId);
â‹®----
/**
     * íŠ¹ì • ì§ˆí™˜ ìœ í˜•ë³„ í‰ê°€ ì¡°íšŒ
     */
public List<HealthAssessment> getAssessmentsByDiseaseType(String diseaseType) {
log.debug("ì§ˆí™˜ ìœ í˜•ë³„ í‰ê°€ ì¡°íšŒ - ì§ˆí™˜: {}", diseaseType);
â‹®----
if (diseaseType == null || diseaseType.trim().isEmpty()) {
â‹®----
return healthAssessmentRepository.findByDiseaseTypesContaining(diseaseType);
â‹®----
/**
     * ì—°ë ¹ëŒ€ë³„ í‰ê°€ ì¡°íšŒ
     */
public List<HealthAssessment> getAssessmentsByAgeRange(Integer minAge, Integer maxAge) {
log.debug("ì—°ë ¹ëŒ€ë³„ í‰ê°€ ì¡°íšŒ - ìµœì†Œ: {}ì„¸, ìµœëŒ€: {}ì„¸", minAge, maxAge);
â‹®----
int currentYear = java.time.LocalDate.now().getYear();
â‹®----
return healthAssessmentRepository.findByBirthYearBetween(minBirthYear, maxBirthYear);
</file>

<file path="src/main/java/com/globalcarelink/health/HealthAssessmentStatsService.java">
/**
 * ê±´ê°• í‰ê°€ í†µê³„ ì „ë‹´ ì„œë¹„ìŠ¤
 * ë³µì¡í•œ í†µê³„ ìƒì„± ë¡œì§ ë‹´ë‹¹ (SRP ì›ì¹™ ì ìš©)
 * ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ ì„±ëŠ¥ ìµœì í™”
 */
â‹®----
public class HealthAssessmentStatsService {
â‹®----
/**
     * ì¢…í•© ê±´ê°• í‰ê°€ í†µê³„ ì¡°íšŒ
     * ìºì‹œ ì ìš©ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”
     */
â‹®----
public HealthAssessmentStatistics getComprehensiveStatistics() {
log.info("ê±´ê°• í‰ê°€ í†µê³„ ìƒì„± ì‹œì‘");
â‹®----
// ê¸°ë³¸ ì¹´ìš´íŠ¸ ì •ë³´
long totalCount = healthAssessmentRepository.count();
long completeCount = healthAssessmentRepository.findCompleteAssessments().size();
Long recentCount = healthAssessmentRepository.countRecentAssessments(
LocalDateTime.now().minusDays(30)
â‹®----
// ì¼€ì–´ ë“±ê¸‰ë³„ í†µê³„
List<Map<String, Object>> gradeStats = healthAssessmentRepository.findCareGradeStatistics();
â‹®----
// ADL ì ìˆ˜ êµ¬ê°„ë³„ í†µê³„
List<Map<String, Object>> adlStats = healthAssessmentRepository.findAdlScoreDistribution();
â‹®----
// ì—°ë ¹ëŒ€ë³„ ì¼€ì–´ ë“±ê¸‰ ë¶„í¬
List<Map<String, Object>> ageStats = healthAssessmentRepository.findAgeGroupCareGradeDistribution();
â‹®----
// ì„±ë³„ ì¼€ì–´ íŒ¨í„´
List<Map<String, Object>> genderStats = healthAssessmentRepository.findGenderCarePatternAnalysis();
â‹®----
// íŠ¹ìˆ˜ ì¼€ì–´ ëŒ€ìƒì í†µê³„
long hospiceCareTargets = healthAssessmentRepository.findHospiceCareTargets().size();
long dementiaCareTargets = healthAssessmentRepository.findDementiaCareTargets().size();
long severeCareTargets = healthAssessmentRepository.findSevereCareTargets().size();
long overseasKoreanAssessments = healthAssessmentRepository.findOverseasKoreanAssessments().size();
â‹®----
HealthAssessmentStatistics statistics = HealthAssessmentStatistics.builder()
.totalAssessments(totalCount)
.completeAssessments(completeCount)
.recentAssessments(recentCount)
.careGradeDistribution(gradeStats)
.adlScoreDistribution(adlStats)
.ageGroupDistribution(ageStats)
.genderPatternAnalysis(genderStats)
.hospiceCareTargets(hospiceCareTargets)
.dementiaCareTargets(dementiaCareTargets)
.severeCareTargets(severeCareTargets)
.overseasKoreanAssessments(overseasKoreanAssessments)
.build();
â‹®----
log.info("ê±´ê°• í‰ê°€ í†µê³„ ìƒì„± ì™„ë£Œ - ì „ì²´: {}, ì™„ë£Œ: {}, ìµœê·¼: {}",
â‹®----
/**
     * ë¹„ë™ê¸° ì¼€ì–´ ë“±ê¸‰ë³„ í†µê³„ ìƒì„±
     */
â‹®----
public CompletableFuture<List<Map<String, Object>>> getCareGradeStatisticsAsync() {
log.debug("ë¹„ë™ê¸° ì¼€ì–´ ë“±ê¸‰ë³„ í†µê³„ ìƒì„±");
â‹®----
List<Map<String, Object>> stats = healthAssessmentRepository.findCareGradeStatistics();
return CompletableFuture.completedFuture(stats);
â‹®----
log.error("ì¼€ì–´ ë“±ê¸‰ë³„ í†µê³„ ìƒì„± ì‹¤íŒ¨", e);
return CompletableFuture.failedFuture(e);
â‹®----
/**
     * ë¹„ë™ê¸° ADL ì ìˆ˜ ë¶„í¬ í†µê³„ ìƒì„±
     */
â‹®----
public CompletableFuture<List<Map<String, Object>>> getAdlScoreDistributionAsync() {
log.debug("ë¹„ë™ê¸° ADL ì ìˆ˜ ë¶„í¬ í†µê³„ ìƒì„±");
â‹®----
List<Map<String, Object>> stats = healthAssessmentRepository.findAdlScoreDistribution();
â‹®----
log.error("ADL ì ìˆ˜ ë¶„í¬ í†µê³„ ìƒì„± ì‹¤íŒ¨", e);
â‹®----
/**
     * ë¹„ë™ê¸° ì—°ë ¹ëŒ€ë³„ í†µê³„ ìƒì„±
     */
â‹®----
public CompletableFuture<List<Map<String, Object>>> getAgeGroupDistributionAsync() {
log.debug("ë¹„ë™ê¸° ì—°ë ¹ëŒ€ë³„ í†µê³„ ìƒì„±");
â‹®----
List<Map<String, Object>> stats = healthAssessmentRepository.findAgeGroupCareGradeDistribution();
â‹®----
log.error("ì—°ë ¹ëŒ€ë³„ í†µê³„ ìƒì„± ì‹¤íŒ¨", e);
â‹®----
/**
     * ë¹„ë™ê¸° ì„±ë³„ íŒ¨í„´ ë¶„ì„
     */
â‹®----
public CompletableFuture<List<Map<String, Object>>> getGenderPatternAnalysisAsync() {
log.debug("ë¹„ë™ê¸° ì„±ë³„ íŒ¨í„´ ë¶„ì„");
â‹®----
List<Map<String, Object>> stats = healthAssessmentRepository.findGenderCarePatternAnalysis();
â‹®----
log.error("ì„±ë³„ íŒ¨í„´ ë¶„ì„ ì‹¤íŒ¨", e);
â‹®----
/**
     * íŠ¹ìˆ˜ ì¼€ì–´ ëŒ€ìƒì í†µê³„ (í˜¸ìŠ¤í”¼ìŠ¤, ì¹˜ë§¤, ì¤‘ì¦)
     */
â‹®----
public Map<String, Long> getSpecialCareTargetStatistics() {
log.debug("íŠ¹ìˆ˜ ì¼€ì–´ ëŒ€ìƒì í†µê³„ ìƒì„±");
â‹®----
long hospiceTargets = healthAssessmentRepository.findHospiceCareTargets().size();
long dementiaTargets = healthAssessmentRepository.findDementiaCareTargets().size();
long severeTargets = healthAssessmentRepository.findSevereCareTargets().size();
long overseasTargets = healthAssessmentRepository.findOverseasKoreanAssessments().size();
â‹®----
return Map.of(
â‹®----
/**
     * ìµœê·¼ ê¸°ê°„ë³„ í†µê³„ (ì¼ë³„, ì£¼ë³„, ì›”ë³„)
     */
public Map<String, Long> getRecentAssessmentStatistics() {
log.debug("ìµœê·¼ ê¸°ê°„ë³„ í†µê³„ ìƒì„±");
â‹®----
LocalDateTime now = LocalDateTime.now();
â‹®----
Long dailyCount = healthAssessmentRepository.countRecentAssessments(now.minusDays(1));
Long weeklyCount = healthAssessmentRepository.countRecentAssessments(now.minusDays(7));
Long monthlyCount = healthAssessmentRepository.countRecentAssessments(now.minusDays(30));
â‹®----
/**
     * í‰ê°€ ì™„ì„±ë„ í†µê³„
     */
public Map<String, Object> getCompletionStatistics() {
log.debug("í‰ê°€ ì™„ì„±ë„ í†µê³„ ìƒì„±");
â‹®----
"completionRate", Math.round(completionRate * 100.0) / 100.0
â‹®----
/**
     * ì§ˆí™˜ë³„ í†µê³„ ë¶„ì„
     */
public Map<String, Long> getDiseaseTypeStatistics() {
log.debug("ì§ˆí™˜ë³„ í†µê³„ ë¶„ì„");
â‹®----
// ì£¼ìš” ì§ˆí™˜ í‚¤ì›Œë“œë³„ ì¹´ìš´íŠ¸
â‹®----
long count = healthAssessmentRepository.findByDiseaseTypesContaining(disease).size();
diseaseStats.put(disease, count);
â‹®----
/**
     * ë¹„ë™ê¸° ì¢…í•© í†µê³„ ë¦¬í¬íŠ¸ ìƒì„±
     * ëª¨ë“  í†µê³„ë¥¼ ë³‘ë ¬ë¡œ ìƒì„±í•˜ì—¬ ì„±ëŠ¥ ìµœì í™”
     */
â‹®----
public CompletableFuture<Map<String, Object>> generateComprehensiveReportAsync() {
log.info("ë¹„ë™ê¸° ì¢…í•© í†µê³„ ë¦¬í¬íŠ¸ ìƒì„± ì‹œì‘");
â‹®----
// ë³‘ë ¬ë¡œ ì—¬ëŸ¬ í†µê³„ ìƒì„±
CompletableFuture<List<Map<String, Object>>> careGradeFuture = getCareGradeStatisticsAsync();
CompletableFuture<List<Map<String, Object>>> adlScoreFuture = getAdlScoreDistributionAsync();
CompletableFuture<List<Map<String, Object>>> ageGroupFuture = getAgeGroupDistributionAsync();
CompletableFuture<List<Map<String, Object>>> genderPatternFuture = getGenderPatternAnalysisAsync();
â‹®----
// ëª¨ë“  ë¹„ë™ê¸° ì‘ì—… ì™„ë£Œ ëŒ€ê¸°
CompletableFuture<Void> allFutures = CompletableFuture.allOf(
â‹®----
return allFutures.thenApply(v -> {
â‹®----
report.put("careGradeDistribution", careGradeFuture.get());
report.put("adlScoreDistribution", adlScoreFuture.get());
report.put("ageGroupDistribution", ageGroupFuture.get());
report.put("genderPatternAnalysis", genderPatternFuture.get());
report.put("specialCareTargets", getSpecialCareTargetStatistics());
report.put("recentStatistics", getRecentAssessmentStatistics());
report.put("completionStatistics", getCompletionStatistics());
report.put("diseaseStatistics", getDiseaseTypeStatistics());
report.put("generatedAt", LocalDateTime.now());
â‹®----
log.info("ë¹„ë™ê¸° ì¢…í•© í†µê³„ ë¦¬í¬íŠ¸ ìƒì„± ì™„ë£Œ");
â‹®----
log.error("ë¹„ë™ê¸° í†µê³„ ë¦¬í¬íŠ¸ ì¡°í•© ì‹¤íŒ¨", e);
throw new RuntimeException("í†µê³„ ë¦¬í¬íŠ¸ ìƒì„± ì‹¤íŒ¨", e);
â‹®----
log.error("ë¹„ë™ê¸° ì¢…í•© í†µê³„ ë¦¬í¬íŠ¸ ìƒì„± ì‹¤íŒ¨", e);
</file>

<file path="src/main/java/com/globalcarelink/profile/dto/DomesticProfileRequest.java">
public class DomesticProfileRequest {
</file>

<file path="src/main/java/com/globalcarelink/profile/dto/DomesticProfileResponse.java">
public class DomesticProfileResponse {
â‹®----
public static DomesticProfileResponse from(DomesticProfile profile) {
â‹®----
return DomesticProfileResponse.builder()
.id(profile.getId())
.memberId(profile.getMember().getId())
.birthDate(profile.getBirthDate())
.gender(profile.getGender())
.address(profile.getAddress())
.detailedAddress(profile.getDetailedAddress())
.postalCode(profile.getPostalCode())
.emergencyContactName(profile.getEmergencyContactName())
.emergencyContactPhone(maskPhoneNumber(profile.getEmergencyContactPhone()))
.emergencyContactRelation(profile.getEmergencyContactRelation())
.healthInsuranceNumber(maskHealthInsuranceNumber(profile.getHealthInsuranceNumber()))
.ltciGrade(profile.getLtciGrade())
.ltciCertificateNumber(profile.getLtciCertificateNumber())
.preferredRegion(profile.getPreferredRegion())
.careLevel(profile.getCareLevel())
.specialNeeds(profile.getSpecialNeeds())
.familyVisitFrequency(profile.getFamilyVisitFrequency())
.budgetRange(profile.getBudgetRange())
.profileCompletionPercentage(profile.getProfileCompletionPercentage())
.createdAt(profile.getCreatedAt())
.updatedAt(profile.getUpdatedAt())
.hasBasicInfo(profile.hasBasicInfo())
.hasEmergencyContact(profile.hasEmergencyContact())
.hasHealthInfo(profile.hasHealthInfo())
.isProfileComplete(profile.isProfileComplete())
.build();
â‹®----
private static String maskPhoneNumber(String phoneNumber) {
if (phoneNumber == null || phoneNumber.length() < 8) {
â‹®----
return phoneNumber.substring(0, 3) + "-****-" + phoneNumber.substring(phoneNumber.length() - 4);
â‹®----
private static String maskHealthInsuranceNumber(String insuranceNumber) {
if (insuranceNumber == null || insuranceNumber.length() < 8) {
â‹®----
return insuranceNumber.substring(0, 6) + "****" + insuranceNumber.substring(insuranceNumber.length() - 3);
</file>

<file path="src/main/java/com/globalcarelink/profile/dto/OverseasProfileRequest.java">
public class OverseasProfileRequest {
</file>

<file path="src/main/java/com/globalcarelink/profile/dto/OverseasProfileResponse.java">
public class OverseasProfileResponse {
â‹®----
public static OverseasProfileResponse from(OverseasProfile profile) {
â‹®----
return OverseasProfileResponse.builder()
.id(profile.getId())
.memberId(profile.getMember().getId())
.birthDate(profile.getBirthDate())
.gender(profile.getGender())
.overseasAddress(profile.getOverseasAddress())
.residenceCountry(profile.getResidenceCountry())
.residenceCity(profile.getResidenceCity())
.koreanAddress(profile.getKoreanAddress())
.koreanPostalCode(profile.getKoreanPostalCode())
.passportNumber(maskPassportNumber(profile.getPassportNumber()))
.passportExpiryDate(profile.getPassportExpiryDate())
.visaStatus(profile.getVisaStatus())
.visaExpiryDate(profile.getVisaExpiryDate())
.overseasContactName(profile.getOverseasContactName())
.overseasContactPhone(maskOverseasPhone(profile.getOverseasContactPhone()))
.overseasContactRelation(profile.getOverseasContactRelation())
.koreaContactName(profile.getKoreaContactName())
.koreaContactPhone(maskPhoneNumber(profile.getKoreaContactPhone()))
.koreaContactRelation(profile.getKoreaContactRelation())
.overseasInsuranceNumber(maskInsuranceNumber(profile.getOverseasInsuranceNumber()))
.overseasInsuranceProvider(profile.getOverseasInsuranceProvider())
.travelInsurance(profile.getTravelInsurance())
.entryPurpose(profile.getEntryPurpose())
.expectedStayDuration(profile.getExpectedStayDuration())
.preferredCommunicationMethod(profile.getPreferredCommunicationMethod())
.timeZonePreference(profile.getTimeZonePreference())
.preferredRegionInKorea(profile.getPreferredRegionInKorea())
.budgetRange(profile.getBudgetRange())
.careLevel(profile.getCareLevel())
.specialNeeds(profile.getSpecialNeeds())
.culturalDietaryRequirements(profile.getCulturalDietaryRequirements())
.profileCompletionPercentage(profile.getProfileCompletionPercentage())
.coordinatorRequired(profile.getCoordinatorRequired())
.createdAt(profile.getCreatedAt())
.updatedAt(profile.getUpdatedAt())
.hasBasicInfo(profile.hasBasicInfo())
.hasPassportInfo(profile.hasPassportInfo())
.hasOverseasContact(profile.hasOverseasContact())
.hasKoreaContact(profile.hasKoreaContact())
.isDocumentationComplete(profile.isDocumentationComplete())
.isProfileComplete(profile.isProfileComplete())
.build();
â‹®----
private static String maskPassportNumber(String passportNumber) {
if (passportNumber == null || passportNumber.length() < 6) {
â‹®----
return passportNumber.substring(0, 5) + "****";
â‹®----
private static String maskPhoneNumber(String phoneNumber) {
if (phoneNumber == null || phoneNumber.length() < 8) {
â‹®----
return phoneNumber.substring(0, 3) + "-****-" + phoneNumber.substring(phoneNumber.length() - 4);
â‹®----
private static String maskOverseasPhone(String phoneNumber) {
â‹®----
if (phoneNumber.contains("-")) {
String[] parts = phoneNumber.split("-");
â‹®----
return phoneNumber.substring(0, 6) + "***" + phoneNumber.substring(phoneNumber.length() - 4);
â‹®----
private static String maskInsuranceNumber(String insuranceNumber) {
if (insuranceNumber == null || insuranceNumber.length() < 8) {
â‹®----
return insuranceNumber.substring(0, 6) + "***" + insuranceNumber.substring(insuranceNumber.length() - 3);
</file>

<file path="src/main/java/com/globalcarelink/profile/BaseProfile.java">
import lombok.*;
â‹®----
/**
 * í”„ë¡œí•„ ê³µí†µ í•„ë“œë¥¼ ê´€ë¦¬í•˜ëŠ” ì¶”ìƒ í´ë˜ìŠ¤
 * DRY ì›ì¹™ ì ìš©ìœ¼ë¡œ ì½”ë“œ ì¤‘ë³µ ì œê±°
 */
â‹®----
public abstract class BaseProfile {
â‹®----
/**
     * ê¸°ë³¸ ì •ë³´ ì—…ë°ì´íŠ¸ (ê³µí†µ ë©”ì„œë“œ)
     */
public void updateBasicInfo(LocalDate birthDate, String gender, String address,
â‹®----
if (gender != null && !gender.trim().isEmpty()) {
â‹®----
if (address != null && !address.trim().isEmpty()) {
â‹®----
if (detailedAddress != null && !detailedAddress.trim().isEmpty()) {
â‹®----
if (postalCode != null && !postalCode.trim().isEmpty()) {
â‹®----
updateCompletionPercentage();
â‹®----
/**
     * ë¹„ìƒì—°ë½ì²˜ ì •ë³´ ì—…ë°ì´íŠ¸ (ê³µí†µ ë©”ì„œë“œ)
     */
public void updateEmergencyContact(String name, String phone, String relation) {
if (name != null && !name.trim().isEmpty()) {
â‹®----
if (phone != null && !phone.trim().isEmpty()) {
â‹®----
if (relation != null && !relation.trim().isEmpty()) {
â‹®----
/**
     * ì¼€ì–´ ê´€ë ¨ ì •ë³´ ì—…ë°ì´íŠ¸ (ê³µí†µ ë©”ì„œë“œ)
     */
public void updateCareInfo(String careLevel, String specialNeeds, String budgetRange) {
if (careLevel != null && !careLevel.trim().isEmpty()) {
â‹®----
if (specialNeeds != null && !specialNeeds.trim().isEmpty()) {
â‹®----
if (budgetRange != null && !budgetRange.trim().isEmpty()) {
â‹®----
/**
     * í”„ë¡œí•„ ì™„ì„±ë„ ê³„ì‚° (ì¶”ìƒ ë©”ì„œë“œ - ê° í”„ë¡œí•„ íƒ€ì…ë³„ë¡œ êµ¬í˜„)
     */
protected abstract void updateCompletionPercentage();
â‹®----
/**
     * ê³µí†µ í•„ë“œ ì™„ì„±ë„ ê³„ì‚° í—¬í¼ ë©”ì„œë“œ
     */
protected int calculateCommonFieldsCompletion() {
int totalCommonFields = 11; // ê³µí†µ í•„ë“œ ê°œìˆ˜
â‹®----
if (gender != null && !gender.trim().isEmpty()) completedFields++;
if (address != null && !address.trim().isEmpty()) completedFields++;
if (detailedAddress != null && !detailedAddress.trim().isEmpty()) completedFields++;
if (postalCode != null && !postalCode.trim().isEmpty()) completedFields++;
if (emergencyContactName != null && !emergencyContactName.trim().isEmpty()) completedFields++;
if (emergencyContactPhone != null && !emergencyContactPhone.trim().isEmpty()) completedFields++;
if (emergencyContactRelation != null && !emergencyContactRelation.trim().isEmpty()) completedFields++;
if (careLevel != null && !careLevel.trim().isEmpty()) completedFields++;
if (specialNeeds != null && !specialNeeds.trim().isEmpty()) completedFields++;
if (budgetRange != null && !budgetRange.trim().isEmpty()) completedFields++;
â‹®----
return (int) Math.round((double) completedFields / totalCommonFields * 100);
â‹®----
/**
     * í•„ìˆ˜ ì •ë³´ ì™„ì„± ì—¬ë¶€ í™•ì¸
     */
public boolean hasEssentialInfo() {
â‹®----
gender != null && !gender.trim().isEmpty() &&
address != null && !address.trim().isEmpty() &&
emergencyContactName != null && !emergencyContactName.trim().isEmpty() &&
emergencyContactPhone != null && !emergencyContactPhone.trim().isEmpty();
â‹®----
/**
     * ë‚˜ì´ ê³„ì‚°
     */
public Integer getAge() {
â‹®----
return LocalDate.now().getYear() - birthDate.getYear();
â‹®----
/**
     * í”„ë¡œí•„ íƒ€ì… ë°˜í™˜ (ì¶”ìƒ ë©”ì„œë“œ)
     */
public abstract String getProfileType();
â‹®----
/**
     * í”„ë¡œí•„ ìš”ì•½ ì •ë³´ ìƒì„±
     */
public String getProfileSummary() {
StringBuilder summary = new StringBuilder();
summary.append("í”„ë¡œí•„ íƒ€ì…: ").append(getProfileType()).append("\n");
â‹®----
if (getAge() != null) {
summary.append("ë‚˜ì´: ").append(getAge()).append("ì„¸\n");
â‹®----
summary.append("ì„±ë³„: ").append(gender).append("\n");
â‹®----
summary.append("ì£¼ì†Œ: ").append(address).append("\n");
â‹®----
summary.append("ì¼€ì–´ ìˆ˜ì¤€: ").append(careLevel).append("\n");
â‹®----
summary.append("ì™„ì„±ë„: ").append(profileCompletionPercentage).append("%");
â‹®----
return summary.toString();
</file>

<file path="src/main/java/com/globalcarelink/profile/DomesticProfileRepository.java">
public interface DomesticProfileRepository extends JpaRepository<DomesticProfile, Long> {
â‹®----
Optional<DomesticProfile> findByMemberId(Long memberId);
â‹®----
boolean existsByMemberId(Long memberId);
â‹®----
List<DomesticProfile> findByProfileCompletionPercentageGreaterThanEqual(@Param("percentage") Integer percentage);
â‹®----
List<DomesticProfile> findByLtciGrade(@Param("grade") Integer grade);
â‹®----
List<DomesticProfile> findByCareLevel(@Param("careLevel") String careLevel);
â‹®----
List<DomesticProfile> findByPreferredRegion(@Param("region") String region);
â‹®----
List<DomesticProfile> findByBudgetRange(@Param("budgetRange") String budgetRange);
â‹®----
List<DomesticProfile> findJobSeekersWithProfileCompletion(@Param("percentage") Integer percentage);
â‹®----
List<DomesticProfile> findByCity(@Param("city") String city);
â‹®----
long countCompleteProfiles();
â‹®----
long countProfilesWithEmergencyContact();
â‹®----
long countProfilesWithLtciGrade();
â‹®----
List<Object[]> getCareeLevelStatistics();
â‹®----
List<Object[]> getBudgetRangeStatistics();
â‹®----
Double getAverageProfileCompletion();
</file>

<file path="src/main/java/com/globalcarelink/profile/OverseasProfileRepository.java">
public interface OverseasProfileRepository extends JpaRepository<OverseasProfile, Long> {
â‹®----
Optional<OverseasProfile> findByMemberId(Long memberId);
â‹®----
boolean existsByMemberId(Long memberId);
â‹®----
List<OverseasProfile> findByResidenceCountry(@Param("country") String country);
â‹®----
List<OverseasProfile> findByResidenceCountryAndCity(@Param("country") String country, @Param("city") String city);
â‹®----
List<OverseasProfile> findByProfileCompletionPercentageGreaterThanEqual(@Param("percentage") Integer percentage);
â‹®----
List<OverseasProfile> findRequiringCoordinator();
â‹®----
List<OverseasProfile> findRequiringCoordinatorWithCompletion(@Param("percentage") Integer percentage);
â‹®----
List<OverseasProfile> findByPassportExpiryDateBefore(@Param("date") LocalDate date);
â‹®----
List<OverseasProfile> findByVisaExpiryDateBefore(@Param("date") LocalDate date);
â‹®----
List<OverseasProfile> findByPreferredRegionInKorea(@Param("region") String region);
â‹®----
List<OverseasProfile> findByBudgetRange(@Param("budgetRange") String budgetRange);
â‹®----
List<OverseasProfile> findByCareLevel(@Param("careLevel") String careLevel);
â‹®----
List<OverseasProfile> findByEntryPurpose(@Param("purpose") String purpose);
â‹®----
List<OverseasProfile> findByExpectedStayDuration(@Param("duration") String duration);
â‹®----
List<OverseasProfile> findByPreferredCommunicationMethod(@Param("method") String method);
â‹®----
List<OverseasProfile> findByTimeZonePreference(@Param("timeZone") String timeZone);
â‹®----
List<OverseasProfile> findJobSeekersWithProfileCompletion(@Param("percentage") Integer percentage);
â‹®----
long countCompleteProfiles();
â‹®----
long countRequiringCoordinator();
â‹®----
List<Object[]> getResidenceCountryStatistics();
â‹®----
List<Object[]> getCareLevelStatistics();
â‹®----
List<Object[]> getBudgetRangeStatistics();
â‹®----
List<Object[]> getEntryPurposeStatistics();
â‹®----
Double getAverageProfileCompletion();
â‹®----
long countExpiringPassports(@Param("threeMonthsLater") LocalDate threeMonthsLater);
â‹®----
long countExpiringVisas(@Param("oneMonthLater") LocalDate oneMonthLater);
</file>

<file path="src/main/java/com/globalcarelink/profile/ProfileController.java">
public class ProfileController {
â‹®----
public ResponseEntity<DomesticProfileResponse> createDomesticProfile(
â‹®----
DomesticProfileResponse response = profileService.createDomesticProfile(memberId, request);
return ResponseEntity.status(HttpStatus.CREATED).body(response);
â‹®----
public ResponseEntity<OverseasProfileResponse> createOverseasProfile(
â‹®----
OverseasProfileResponse response = profileService.createOverseasProfile(memberId, request);
â‹®----
public ResponseEntity<DomesticProfileResponse> getDomesticProfile(
â‹®----
DomesticProfileResponse response = profileService.getDomesticProfile(memberId);
return ResponseEntity.ok(response);
â‹®----
public ResponseEntity<OverseasProfileResponse> getOverseasProfile(
â‹®----
OverseasProfileResponse response = profileService.getOverseasProfile(memberId);
â‹®----
public ResponseEntity<DomesticProfileResponse> updateDomesticProfile(
â‹®----
DomesticProfileResponse response = profileService.updateDomesticProfile(memberId, request);
â‹®----
public ResponseEntity<OverseasProfileResponse> updateOverseasProfile(
â‹®----
OverseasProfileResponse response = profileService.updateOverseasProfile(memberId, request);
â‹®----
public ResponseEntity<Void> deleteDomesticProfile(
â‹®----
profileService.deleteDomesticProfile(memberId);
return ResponseEntity.noContent().build();
â‹®----
public ResponseEntity<Void> deleteOverseasProfile(
â‹®----
profileService.deleteOverseasProfile(memberId);
â‹®----
public ResponseEntity<List<DomesticProfileResponse>> getDomesticProfilesByCompletion(
â‹®----
List<DomesticProfileResponse> profiles = profileService.getDomesticProfilesByCompletion(minCompletion);
return ResponseEntity.ok(profiles);
â‹®----
public ResponseEntity<List<OverseasProfileResponse>> getOverseasProfilesByCountry(
â‹®----
List<OverseasProfileResponse> profiles = profileService.getOverseasProfilesByCountry(country);
â‹®----
public ResponseEntity<List<OverseasProfileResponse>> getOverseasProfilesRequiringCoordinator() {
â‹®----
List<OverseasProfileResponse> profiles = profileService.getOverseasProfilesRequiringCoordinator();
â‹®----
public ResponseEntity<List<OverseasProfileResponse>> getOverseasProfilesWithExpiringDocuments() {
â‹®----
List<OverseasProfileResponse> profiles = profileService.getOverseasProfilesWithExpiringDocuments();
</file>

<file path="src/main/java/com/globalcarelink/GlobalCareLinkApplication.java">
public class GlobalCareLinkApplication {
public static void main(String[] args) {
SpringApplication.run(GlobalCareLinkApplication.class, args);
</file>

<file path="src/main/resources/application-test.yml">
spring:
  datasource:
    url: jdbc:sqlite::memory:
    driver-class-name: org.sqlite.JDBC
  
  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: false
  
  logging:
    level:
      org.hibernate.SQL: WARN
      com.globalcarelink: INFO
</file>

<file path="src/main/resources/logback-spring.xml">
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    
    <!-- ë¡œê·¸ íŒŒì¼ ê²½ë¡œ ì„¤ì • -->
    <property name="LOG_PATH" value="./logs"/>
    <property name="LOG_FILE_NAME" value="lightcare"/>
    
    <!-- ì½˜ì†” ì¶œë ¥ íŒ¨í„´ (ê°œë°œìš©) -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %highlight(%-5level) %cyan([%X{traceId}]) %yellow(%logger{36}) - %msg%n</pattern>
        </encoder>
    </appender>
    
    <!-- ì¼ë°˜ ë¡œê·¸ íŒŒì¼ (INFO ì´ìƒ) -->
    <appender name="FILE_INFO" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${LOG_PATH}/${LOG_FILE_NAME}.log</file>
        <encoder class="net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder">
            <providers>
                <timestamp/>
                <logLevel/>
                <loggerName/>
                <mdc/>
                <message/>
                <stackTrace/>
                <pattern>
                    <pattern>
                        {
                            "timestamp": "%d{yyyy-MM-dd HH:mm:ss.SSS}",
                            "level": "%level",
                            "thread": "%thread",
                            "logger": "%logger{40}",
                            "traceId": "%X{traceId:-}",
                            "userId": "%X{userId:-}",
                            "userEmail": "%X{userEmail:-}",
                            "requestUri": "%X{requestUri:-}",
                            "method": "%X{method:-}",
                            "clientIp": "%X{clientIp:-}",
                            "message": "%message",
                            "exception": "%exception"
                        }
                    </pattern>
                </pattern>
            </providers>
        </encoder>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${LOG_PATH}/${LOG_FILE_NAME}.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>10MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>30</maxHistory>
            <totalSizeCap>1GB</totalSizeCap>
        </rollingPolicy>
        <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
            <level>INFO</level>
        </filter>
    </appender>
    
    <!-- ì—ëŸ¬ ë¡œê·¸ íŒŒì¼ (ERRORë§Œ) -->
    <appender name="FILE_ERROR" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${LOG_PATH}/${LOG_FILE_NAME}-error.log</file>
        <encoder class="net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder">
            <providers>
                <timestamp/>
                <logLevel/>
                <loggerName/>
                <mdc/>
                <message/>
                <stackTrace/>
                <pattern>
                    <pattern>
                        {
                            "timestamp": "%d{yyyy-MM-dd HH:mm:ss.SSS}",
                            "level": "%level",
                            "thread": "%thread",
                            "logger": "%logger{40}",
                            "traceId": "%X{traceId:-}",
                            "userId": "%X{userId:-}",
                            "userEmail": "%X{userEmail:-}",
                            "requestUri": "%X{requestUri:-}",
                            "method": "%X{method:-}",
                            "clientIp": "%X{clientIp:-}",
                            "message": "%message",
                            "exception": "%exception",
                            "stackTrace": "%ex{full}"
                        }
                    </pattern>
                </pattern>
            </providers>
        </encoder>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${LOG_PATH}/${LOG_FILE_NAME}-error.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>10MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>60</maxHistory>
        </rollingPolicy>
        <filter class="ch.qos.logback.classic.filter.LevelFilter">
            <level>ERROR</level>
            <onMatch>ACCEPT</onMatch>
            <onMismatch>DENY</onMismatch>
        </filter>
    </appender>
    
    <!-- ì„±ëŠ¥ ë¡œê·¸ íŒŒì¼ (ë©”ì„œë“œ ì‹¤í–‰ ì‹œê°„ ë“±) -->
    <appender name="FILE_PERFORMANCE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${LOG_PATH}/${LOG_FILE_NAME}-performance.log</file>
        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%X{traceId}] [%X{method}] %X{requestUri} - %msg%n</pattern>
        </encoder>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${LOG_PATH}/${LOG_FILE_NAME}-performance.%d{yyyy-MM-dd}.log</fileNamePattern>
            <maxHistory>7</maxHistory>
        </rollingPolicy>
    </appender>
    
    <!-- í”„ë¡œíŒŒì¼ë³„ ì„¤ì • -->
    <springProfile name="dev,test">
        <root level="DEBUG">
            <appender-ref ref="CONSOLE"/>
            <appender-ref ref="FILE_INFO"/>
            <appender-ref ref="FILE_ERROR"/>
        </root>
    </springProfile>
    
    <springProfile name="prod">
        <root level="INFO">
            <appender-ref ref="FILE_INFO"/>
            <appender-ref ref="FILE_ERROR"/>
        </root>
    </springProfile>
    
    <!-- íŠ¹ì • íŒ¨í‚¤ì§€ ë¡œê·¸ ë ˆë²¨ ì„¤ì • -->
    <logger name="com.globalcarelink" level="DEBUG" additivity="false">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE_INFO"/>
        <appender-ref ref="FILE_ERROR"/>
    </logger>
    
    <logger name="org.springframework.security" level="DEBUG" additivity="false">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE_INFO"/>
    </logger>
    
    <logger name="performance" level="INFO" additivity="false">
        <appender-ref ref="FILE_PERFORMANCE"/>
    </logger>
    
    <!-- SQL ë¡œê·¸ -->
    <logger name="org.hibernate.SQL" level="DEBUG"/>
    <logger name="org.hibernate.type.descriptor.sql.BasicBinder" level="TRACE"/>
    
</configuration>
</file>

<file path="src/test/java/com/globalcarelink/coordinator/CoordinatorMatchingE2ETest.java">
/**
 * ì½”ë””ë„¤ì´í„° ë§¤ì¹­ E2E í…ŒìŠ¤íŠ¸
 * - ì „ì²´ ë§¤ì¹­ í”„ë¡œì„¸ìŠ¤ ê²€ì¦
 * - ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™
 * - ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í…ŒìŠ¤íŠ¸
 * - ì„±ëŠ¥ ë° ë™ì‹œì„± í…ŒìŠ¤íŠ¸
 */
â‹®----
class CoordinatorMatchingE2ETest {
â‹®----
void setUp() {
setupTestMembers();
setupTestProfiles();
setupTestHealthAssessment();
setupTestCoordinators();
â‹®----
void domesticPatientCoordinatorMatching_FullFlow() throws Exception {
// Given - êµ­ë‚´ í™˜ì í”„ë¡œí•„ì´ ì´ë¯¸ ì„¤ì •ë¨
â‹®----
// When - ë§¤ì¹­ ìš”ì²­
mockMvc.perform(post("/api/coordinator-matching/domestic/{profileId}", domesticProfile.getId())
.contentType(MediaType.APPLICATION_JSON))
.andExpect(status().isOk())
.andExpect(jsonPath("$.matches").isArray())
.andExpect(jsonPath("$.matches").isNotEmpty())
.andExpect(jsonPath("$.matches[0].coordinatorId").exists())
.andExpect(jsonPath("$.matches[0].matchScore").exists())
.andExpect(jsonPath("$.matches[0].matchReasons").isArray())
.andExpect(jsonPath("$.totalMatches").value(2)); // ì„¤ì •ëœ ì½”ë””ë„¤ì´í„° 2ëª…
â‹®----
// Then - ë§¤ì¹­ ê²°ê³¼ ìƒì„¸ ê²€ì¦
mockMvc.perform(get("/api/coordinator-matching/domestic/{profileId}/details", domesticProfile.getId()))
â‹®----
.andExpect(jsonPath("$.profileInfo.name").value(domesticProfile.getName()))
.andExpect(jsonPath("$.profileInfo.careLocation").value(domesticProfile.getCareLocation()))
.andExpect(jsonPath("$.matches[0].coordinator.name").exists())
.andExpect(jsonPath("$.matches[0].coordinator.specialties").isArray())
.andExpect(jsonPath("$.matches[0].matchDetails.languageMatch").exists())
.andExpect(jsonPath("$.matches[0].matchDetails.locationMatch").exists())
.andExpect(jsonPath("$.matches[0].matchDetails.experienceMatch").exists());
â‹®----
void overseasPatientCoordinatorMatching_FullFlow() throws Exception {
// Given - í•´ì™¸ í™˜ì í”„ë¡œí•„ì´ ì´ë¯¸ ì„¤ì •ë¨
â‹®----
mockMvc.perform(post("/api/coordinator-matching/overseas/{profileId}", overseasProfile.getId())
â‹®----
.andExpect(jsonPath("$.totalMatches").value(2));
â‹®----
// Then - í•´ì™¸ í™˜ì íŠ¹í™” ë§¤ì¹­ ì •ë³´ ê²€ì¦
mockMvc.perform(get("/api/coordinator-matching/overseas/{profileId}/details", overseasProfile.getId()))
â‹®----
.andExpect(jsonPath("$.profileInfo.name").value(overseasProfile.getName()))
.andExpect(jsonPath("$.profileInfo.currentCountry").value(overseasProfile.getCurrentCountry()))
.andExpect(jsonPath("$.profileInfo.desiredCountry").value(overseasProfile.getDesiredCountry()))
â‹®----
.andExpect(jsonPath("$.matches[0].matchDetails.countryExperience").exists())
.andExpect(jsonPath("$.matches[0].matchDetails.visaSupport").exists());
â‹®----
void healthBasedMatchingPriority() throws Exception {
// Given - ì¤‘ì¦ ê±´ê°• ìƒíƒœ ì„¤ì •
HealthAssessment severeAssessment = HealthAssessment.builder()
.memberId(domesticMember.getId())
.birthYear(1940) // ê³ ë ¹
.adlEating(3) // ì™„ì „ ë„ì›€ í•„ìš”
.adlToilet(3)
.adlMobility(3)
.adlCommunication(2)
.ltciGrade(1) // ìµœì¤‘ì¦
.hasChronicDisease(true)
.chronicDiseases(List.of("ì¹˜ë§¤", "ë‹¹ë‡¨ë³‘", "ê³ í˜ˆì••"))
.hasCognitiveDifficulty(true)
.additionalInfo("24ì‹œê°„ ëŒë´„ í•„ìš”")
.createdAt(LocalDateTime.now())
.build();
healthAssessmentRepository.save(severeAssessment);
â‹®----
.param("considerHealthStatus", "true"))
â‹®----
.andExpect(jsonPath("$.healthConsiderations.careLevel").value("HIGH"))
.andExpect(jsonPath("$.healthConsiderations.specialNeeds").isArray())
.andExpect(jsonPath("$.healthConsiderations.specialNeeds").isNotEmpty());
â‹®----
// Then - ì¤‘ì¦ í™˜ìì— íŠ¹í™”ëœ ì½”ë””ë„¤ì´í„°ê°€ ìš°ì„  ë§¤ì¹­ë˜ëŠ”ì§€ í™•ì¸
mockMvc.perform(get("/api/coordinator-matching/domestic/{profileId}/health-priority", domesticProfile.getId()))
â‹®----
.andExpect(jsonPath("$.priorityFactors.dementiaCare").value(true))
.andExpect(jsonPath("$.priorityFactors.chronicDiseaseManagement").value(true))
.andExpect(jsonPath("$.priorityFactors.intensiveCareExperience").value(true));
â‹®----
void languageMatchingAccuracy() throws Exception {
// Given - íŠ¹ì • ì–¸ì–´ ìš”êµ¬ì‚¬í•­ì´ ìˆëŠ” í”„ë¡œí•„ ìƒì„±
OverseasProfile multilingualProfile = OverseasProfile.builder()
.memberId(overseasMember.getId())
.name("ë‹¤êµ­ì–´ í™˜ì")
.birthYear(1960)
.gender("ì—¬ì„±")
.currentCountry("ë…ì¼")
.desiredCountry("í•œêµ­")
.preferredLanguages(Set.of("ë…ì¼ì–´", "ì˜ì–´", "í•œêµ­ì–´"))
.hasVisaIssues(true)
.medicalHistory("ì‹¬ì¥ ì§ˆí™˜")
.emergencyContact("ë…ì¼ ì‘ê¸‰ì—°ë½ì²˜")
.insuranceInfo("ë…ì¼ ë³´í—˜")
â‹®----
overseasProfileRepository.save(multilingualProfile);
â‹®----
// When - ì–¸ì–´ ì¤‘ì‹¬ ë§¤ì¹­ ìš”ì²­
mockMvc.perform(post("/api/coordinator-matching/overseas/{profileId}", multilingualProfile.getId())
.param("prioritizeLanguage", "true"))
â‹®----
.andExpect(jsonPath("$.languageMatchSummary.requestedLanguages").isArray())
.andExpect(jsonPath("$.languageMatchSummary.matchedLanguages").isArray());
â‹®----
// Then - ì–¸ì–´ ë§¤ì¹­ ìƒì„¸ ì •ë³´ í™•ì¸
mockMvc.perform(get("/api/coordinator-matching/language-analysis/{profileId}", multilingualProfile.getId()))
â‹®----
.andExpect(jsonPath("$.languageRequirements.primary").exists())
.andExpect(jsonPath("$.languageRequirements.secondary").exists())
.andExpect(jsonPath("$.coordinatorLanguageCapabilities").isArray())
.andExpect(jsonPath("$.matchQuality.overallScore").exists());
â‹®----
void matchingPerformanceTest() throws Exception {
// Given - ëŒ€ëŸ‰ì˜ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±
createLargeTestDataset();
â‹®----
long startTime = System.currentTimeMillis();
â‹®----
mockMvc.perform(post("/api/coordinator-matching/domestic/{profileId}", domesticProfile.getId()))
â‹®----
.andExpect(jsonPath("$.processingTime").exists());
â‹®----
long endTime = System.currentTimeMillis();
â‹®----
// Then - ì‘ë‹µì‹œê°„ì´ 3ì´ˆ ì´ë‚´ì¸ì§€ í™•ì¸
assertThat(responseTime).isLessThan(3000);
â‹®----
// ë§¤ì¹­ í’ˆì§ˆ í™•ì¸
mockMvc.perform(get("/api/coordinator-matching/performance-metrics"))
â‹®----
.andExpect(jsonPath("$.averageMatchingTime").exists())
.andExpect(jsonPath("$.cacheHitRate").exists())
.andExpect(jsonPath("$.totalMatchesProcessed").exists());
â‹®----
void concurrentMatchingRequests() throws Exception {
// Given
â‹®----
AtomicInteger successCount = new AtomicInteger(0);
â‹®----
// When - ë™ì‹œì— ì—¬ëŸ¬ ë§¤ì¹­ ìš”ì²­ ì‹¤í–‰
â‹®----
Thread thread = new Thread(() -> {
â‹®----
.andExpect(jsonPath("$.matches").isArray());
successCount.incrementAndGet();
â‹®----
exceptions.add(e);
â‹®----
threads.add(thread);
thread.start();
â‹®----
// ëª¨ë“  ìŠ¤ë ˆë“œ ì™„ë£Œ ëŒ€ê¸°
â‹®----
thread.join();
â‹®----
// Then
assertThat(exceptions).isEmpty();
assertThat(successCount.get()).isEqualTo(numberOfConcurrentRequests);
â‹®----
void matchingResultCaching() throws Exception {
â‹®----
Long profileId = domesticProfile.getId();
â‹®----
// When - ì²« ë²ˆì§¸ ë§¤ì¹­ ìš”ì²­ (ìºì‹œ ë¯¸ìŠ¤)
long firstRequestStart = System.currentTimeMillis();
mockMvc.perform(post("/api/coordinator-matching/domestic/{profileId}", profileId))
â‹®----
long firstRequestTime = System.currentTimeMillis() - firstRequestStart;
â‹®----
// When - ë‘ ë²ˆì§¸ ë§¤ì¹­ ìš”ì²­ (ìºì‹œ íˆíŠ¸)
long secondRequestStart = System.currentTimeMillis();
â‹®----
long secondRequestTime = System.currentTimeMillis() - secondRequestStart;
â‹®----
// Then - ë‘ ë²ˆì§¸ ìš”ì²­ì´ í˜„ì €íˆ ë¹¨ë¼ì•¼ í•¨
assertThat(secondRequestTime).isLessThan(firstRequestTime / 2);
â‹®----
// ìºì‹œ í†µê³„ í™•ì¸
mockMvc.perform(get("/api/coordinator-matching/cache-stats"))
â‹®----
.andExpect(jsonPath("$.hitRate").exists())
.andExpect(jsonPath("$.missCount").exists())
.andExpect(jsonPath("$.hitCount").exists());
â‹®----
void matchingFailureScenarios() throws Exception {
// Given - ë§¤ì¹­ ë¶ˆê°€ëŠ¥í•œ ì¡°ê±´ ì„¤ì •
DomesticProfile unmatchableProfile = DomesticProfile.builder()
â‹®----
.name("ë§¤ì¹­ ë¶ˆê°€ í™˜ì")
.birthYear(1920) // ë§¤ìš° ê³ ë ¹
.gender("ê¸°íƒ€")
.careLocation("ë§¤ìš° ì™¸ì§„ ì§€ì—­")
.preferredLanguages(Set.of("ë¼í‹´ì–´")) // ì§€ì›í•˜ì§€ ì•ŠëŠ” ì–¸ì–´
.specialRequests("ë§¤ìš° íŠ¹ìˆ˜í•œ ìš”êµ¬ì‚¬í•­")
.emergencyContact("ì‘ê¸‰ì—°ë½ì²˜")
.familyContact("ê°€ì¡±ì—°ë½ì²˜")
â‹®----
domesticProfileRepository.save(unmatchableProfile);
â‹®----
mockMvc.perform(post("/api/coordinator-matching/domestic/{profileId}", unmatchableProfile.getId()))
â‹®----
.andExpect(jsonPath("$.matches").isEmpty())
.andExpect(jsonPath("$.noMatchReasons").isArray())
.andExpect(jsonPath("$.noMatchReasons").isNotEmpty())
.andExpect(jsonPath("$.recommendations").isArray());
â‹®----
// Then - ëŒ€ì•ˆ ì œì•ˆ í™•ì¸
mockMvc.perform(get("/api/coordinator-matching/alternatives/{profileId}", unmatchableProfile.getId()))
â‹®----
.andExpect(jsonPath("$.alternatives").isArray())
.andExpect(jsonPath("$.alternatives").isNotEmpty())
.andExpect(jsonPath("$.alternatives[0].type").exists())
.andExpect(jsonPath("$.alternatives[0].description").exists());
â‹®----
// ===== í—¬í¼ ë©”ì„œë“œë“¤ =====
â‹®----
private void setupTestMembers() {
domesticMember = Member.builder()
.email("domestic@test.com")
.password(passwordEncoder.encode("password123"))
.name("êµ­ë‚´ í™˜ì")
.role(MemberRole.USER)
â‹®----
domesticMember = memberRepository.save(domesticMember);
â‹®----
overseasMember = Member.builder()
.email("overseas@test.com")
â‹®----
.name("í•´ì™¸ í™˜ì")
â‹®----
overseasMember = memberRepository.save(overseasMember);
â‹®----
coordinatorMember1 = Member.builder()
.email("coordinator1@test.com")
â‹®----
.name("ì½”ë””ë„¤ì´í„° 1")
.role(MemberRole.COORDINATOR)
â‹®----
coordinatorMember1 = memberRepository.save(coordinatorMember1);
â‹®----
coordinatorMember2 = Member.builder()
.email("coordinator2@test.com")
â‹®----
.name("ì½”ë””ë„¤ì´í„° 2")
â‹®----
coordinatorMember2 = memberRepository.save(coordinatorMember2);
â‹®----
private void setupTestProfiles() {
domesticProfile = DomesticProfile.builder()
â‹®----
.name("ê¹€êµ­ë‚´")
â‹®----
.gender("ë‚¨ì„±")
.careLocation("ì„œìš¸ì‹œ ê°•ë‚¨êµ¬")
.preferredLanguages(Set.of("í•œêµ­ì–´", "ì˜ì–´"))
.specialRequests("ë‹¹ë‡¨ ê´€ë¦¬ í•„ìš”")
.emergencyContact("010-1234-5678")
.familyContact("010-8765-4321")
â‹®----
domesticProfile = domesticProfileRepository.save(domesticProfile);
â‹®----
overseasProfile = OverseasProfile.builder()
â‹®----
.name("John Overseas")
.birthYear(1965)
â‹®----
.currentCountry("ë¯¸êµ­")
â‹®----
.preferredLanguages(Set.of("ì˜ì–´", "í•œêµ­ì–´"))
.hasVisaIssues(false)
.medicalHistory("ê³ í˜ˆì••")
.emergencyContact("US Emergency Contact")
.insuranceInfo("US Insurance")
â‹®----
overseasProfile = overseasProfileRepository.save(overseasProfile);
â‹®----
private void setupTestHealthAssessment() {
healthAssessment = HealthAssessment.builder()
â‹®----
.adlEating(2)
.adlToilet(2)
.adlMobility(2)
.adlCommunication(1)
.ltciGrade(3)
â‹®----
.chronicDiseases(List.of("ë‹¹ë‡¨ë³‘"))
.hasCognitiveDifficulty(false)
.additionalInfo("ì •ê¸°ì ì¸ í˜ˆë‹¹ ì²´í¬ í•„ìš”")
â‹®----
healthAssessment = healthAssessmentRepository.save(healthAssessment);
â‹®----
private void setupTestCoordinators() {
// ì½”ë””ë„¤ì´í„° 1 - í•œêµ­ì–´, ì˜ì–´ ê°€ëŠ¥, ë‹¹ë‡¨ ì „ë¬¸
CoordinatorLanguageSkill skill1 = CoordinatorLanguageSkill.builder()
.coordinatorId(coordinatorMember1.getId())
.language("í•œêµ­ì–´")
.proficiencyLevel("NATIVE")
.certificationInfo("ëª¨êµ­ì–´")
â‹®----
languageSkillRepository.save(skill1);
â‹®----
CoordinatorLanguageSkill skill2 = CoordinatorLanguageSkill.builder()
â‹®----
.language("ì˜ì–´")
.proficiencyLevel("ADVANCED")
.certificationInfo("TOEIC 950")
â‹®----
languageSkillRepository.save(skill2);
â‹®----
// ì½”ë””ë„¤ì´í„° 2 - í•œêµ­ì–´, ì¼ë³¸ì–´ ê°€ëŠ¥, ê³ í˜ˆì•• ì „ë¬¸
CoordinatorLanguageSkill skill3 = CoordinatorLanguageSkill.builder()
.coordinatorId(coordinatorMember2.getId())
â‹®----
languageSkillRepository.save(skill3);
â‹®----
CoordinatorLanguageSkill skill4 = CoordinatorLanguageSkill.builder()
â‹®----
.language("ì¼ë³¸ì–´")
.proficiencyLevel("INTERMEDIATE")
.certificationInfo("JLPT N2")
â‹®----
languageSkillRepository.save(skill4);
â‹®----
private void createLargeTestDataset() {
// ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ëŒ€ëŸ‰ ë°ì´í„° ìƒì„±
â‹®----
Member coordinator = Member.builder()
.email("coord" + i + "@test.com")
â‹®----
.name("ì½”ë””ë„¤ì´í„° " + i)
â‹®----
coordinator = memberRepository.save(coordinator);
â‹®----
// ê° ì½”ë””ë„¤ì´í„°ì— ëŒ€í•´ ì–¸ì–´ ìŠ¤í‚¬ ì¶”ê°€
CoordinatorLanguageSkill skill = CoordinatorLanguageSkill.builder()
.coordinatorId(coordinator.getId())
.language(i % 2 == 0 ? "í•œêµ­ì–´" : "ì˜ì–´")
â‹®----
.certificationInfo("í…ŒìŠ¤íŠ¸ ì¸ì¦ " + i)
â‹®----
languageSkillRepository.save(skill);
</file>

<file path="src/test/java/com/globalcarelink/facility/FacilityControllerIntegrationTest.java">
/**
 * ì‹œì„¤ ì»¨íŠ¸ë¡¤ëŸ¬ í†µí•© í…ŒìŠ¤íŠ¸
 * ì‹œì„¤ ë§¤ì¹­, ì¶”ì²œ, ì‚¬ìš©ì í–‰ë™ ì¶”ì  ë“±ì˜ ì „ì²´ í”Œë¡œìš°ë¥¼ ê²€ì¦
 */
â‹®----
class FacilityControllerIntegrationTest {
â‹®----
void setUp() {
setupTestData();
â‹®----
void getAllFacilities_WithPagingAndFiltering() throws Exception {
// When & Then
mockMvc.perform(get("/api/facilities")
.param("page", "0")
.param("size", "10")
.param("facilityType", "ìš”ì–‘ì‹œì„¤")
.param("facilityGrade", "A"))
.andExpect(status().isOk())
.andExpect(jsonPath("$.content").isArray())
.andExpect(jsonPath("$.content[0].facilityType").value("ìš”ì–‘ì‹œì„¤"))
.andExpect(jsonPath("$.content[0].facilityGrade").value("A"))
.andExpect(jsonPath("$.totalElements").value(1))
.andExpect(jsonPath("$.totalPages").value(1));
â‹®----
void getFacilityById_WithUserTracking() throws Exception {
â‹®----
mockMvc.perform(get("/api/facilities/{facilityId}", testFacility1.getId()))
â‹®----
.andExpect(jsonPath("$.id").value(testFacility1.getId()))
.andExpect(jsonPath("$.facilityName").value(testFacility1.getFacilityName()))
.andExpect(jsonPath("$.facilityType").value(testFacility1.getFacilityType()));
â‹®----
// ì‚¬ìš©ì í–‰ë™ì´ ì¶”ì ë˜ì—ˆëŠ”ì§€ í™•ì¸
// ì‹¤ì œë¡œëŠ” ë§¤ì¹­ ì´ë ¥ì´ ìƒì„±ë˜ì–´ì•¼ í•˜ì§€ë§Œ, ì´ í…ŒìŠ¤íŠ¸ì—ì„œëŠ” ì¡°íšŒ ë¡œê·¸ë§Œ í™•ì¸
â‹®----
void getRecommendations_FullFlow() throws Exception {
// Given
FacilityMatchingRequest request = new FacilityMatchingRequest();
request.setMemberId(testMember.getId());
request.setCoordinatorId("coordinator1");
request.setMaxResults(5);
â‹®----
FacilityMatchingPreference preference = new FacilityMatchingPreference();
preference.setPreferredRegions(Set.of("ì„œìš¸ì‹œ ê°•ë‚¨êµ¬"));
preference.setPreferredFacilityTypes(Set.of("ìš”ì–‘ì‹œì„¤"));
preference.setMaxMonthlyFee(3000000);
preference.setMinFacilityGrade("B");
request.setPreference(preference);
â‹®----
mockMvc.perform(post("/api/facilities/recommendations")
.contentType(MediaType.APPLICATION_JSON)
.content(objectMapper.writeValueAsString(request)))
â‹®----
.andExpect(jsonPath("$").isArray())
.andExpect(jsonPath("$[0].facility").exists())
.andExpect(jsonPath("$[0].matchScore").exists())
.andExpect(jsonPath("$[0].recommendationReason").exists());
â‹®----
// ë§¤ì¹­ ì´ë ¥ì´ ì €ì¥ë˜ì—ˆëŠ”ì§€ í™•ì¸
List<FacilityMatchingHistory> histories = matchingHistoryRepository.findByUserIdOrderByCreatedAtDesc("test@example.com");
assert !histories.isEmpty();
â‹®----
void searchFacilitiesByRegion() throws Exception {
â‹®----
mockMvc.perform(get("/api/facilities/search/region")
.param("region", "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬")
â‹®----
.param("limit", "10"))
â‹®----
.andExpect(jsonPath("$[0].address").value(testFacility1.getAddress()));
â‹®----
void searchFacilitiesByCareGrade() throws Exception {
â‹®----
mockMvc.perform(get("/api/facilities/search/care-grade")
.param("careGradeLevel", "3")
.param("region", "ì„œìš¸ì‹œ")
â‹®----
.andExpect(jsonPath("$").isArray());
â‹®----
void trackFacilityContact() throws Exception {
// Given - ë¨¼ì € ë§¤ì¹­ ì´ë ¥ ìƒì„±
createTestMatchingHistory();
â‹®----
mockMvc.perform(post("/api/facilities/{facilityId}/contact", testFacility1.getId()))
.andExpect(status().isOk());
â‹®----
// ì—°ë½ ì¶”ì ì´ ê¸°ë¡ë˜ì—ˆëŠ”ì§€ í™•ì¸
â‹®----
assert histories.get(0).isContacted();
â‹®----
void trackFacilityVisit() throws Exception {
â‹®----
mockMvc.perform(post("/api/facilities/{facilityId}/visit", testFacility1.getId()))
â‹®----
// ë°©ë¬¸ ì¶”ì ì´ ê¸°ë¡ë˜ì—ˆëŠ”ì§€ í™•ì¸
â‹®----
assert histories.get(0).isVisited();
â‹®----
void completeMatching() throws Exception {
â‹®----
MatchingCompletionRequest request = new MatchingCompletionRequest();
request.setOutcome(FacilityMatchingHistory.MatchingOutcome.SUCCESSFUL);
request.setActualCost(BigDecimal.valueOf(2500000));
request.setSatisfactionScore(BigDecimal.valueOf(4.5));
request.setFeedback("ë§¤ìš° ë§Œì¡±ìŠ¤ëŸ¬ìš´ ì‹œì„¤ì…ë‹ˆë‹¤.");
request.setRecommendationWillingness(5);
â‹®----
mockMvc.perform(post("/api/facilities/{facilityId}/complete-matching", testFacility1.getId())
â‹®----
// ë§¤ì¹­ ì™„ë£Œê°€ ê¸°ë¡ë˜ì—ˆëŠ”ì§€ í™•ì¸
â‹®----
FacilityMatchingHistory history = histories.get(0);
assert history.isSelected();
assert history.getOutcome() == FacilityMatchingHistory.MatchingOutcome.SUCCESSFUL;
assert history.getSatisfactionScore().equals(BigDecimal.valueOf(4.5));
â‹®----
void getFacilityPerformance() throws Exception {
// Given - í…ŒìŠ¤íŠ¸ ë§¤ì¹­ ì´ë ¥ ìƒì„±
createMultipleTestMatchingHistories();
â‹®----
mockMvc.perform(get("/api/facilities/analytics/performance")
.param("days", "30"))
â‹®----
void getMatchingTrends() throws Exception {
â‹®----
mockMvc.perform(get("/api/facilities/analytics/trends")
.param("days", "90"))
â‹®----
.andExpect(jsonPath("$.monthlyTrends").isArray())
.andExpect(jsonPath("$.totalMatches").exists())
.andExpect(jsonPath("$.overallSuccessRate").exists());
â‹®----
void getUserMatchingHistory() throws Exception {
â‹®----
mockMvc.perform(get("/api/facilities/matching-history")
â‹®----
.param("size", "10"))
â‹®----
void getRecommendationAccuracy() throws Exception {
â‹®----
mockMvc.perform(get("/api/facilities/analytics/recommendation-accuracy")
â‹®----
.andExpect(jsonPath("$.overallAccuracy").exists())
.andExpect(jsonPath("$.rankAccuracies").isArray());
â‹®----
void getFacilityStatistics() throws Exception {
â‹®----
mockMvc.perform(get("/api/facilities/statistics/summary"))
â‹®----
.andExpect(jsonPath("$.totalFacilities").exists())
.andExpect(jsonPath("$.facilityTypeDistribution").exists())
.andExpect(jsonPath("$.gradeDistribution").exists());
â‹®----
// ===== í—¬í¼ ë©”ì„œë“œ =====
â‹®----
private void setupTestData() {
// í…ŒìŠ¤íŠ¸ íšŒì› ìƒì„±
testMember = Member.builder()
.email("test@example.com")
.password(passwordEncoder.encode("password123"))
.name("í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì")
.role(MemberRole.USER)
.createdAt(LocalDateTime.now())
.build();
testMember = memberRepository.save(testMember);
â‹®----
// í…ŒìŠ¤íŠ¸ ê±´ê°• í‰ê°€ ìƒì„±
testAssessment = HealthAssessment.builder()
.memberId(testMember.getId())
.birthYear(1960)
.adlEating(2)
.adlToilet(2)
.adlMobility(3)
.adlCommunication(1)
.ltciGrade(3)
.hasChronicDisease(true)
.chronicDiseases(List.of("ë‹¹ë‡¨ë³‘", "ê³ í˜ˆì••"))
.hasCognitiveDifficulty(false)
.additionalInfo("ì •ê¸°ì ì¸ ê´€ë¦¬ í•„ìš”")
â‹®----
testAssessment = healthAssessmentRepository.save(testAssessment);
â‹®----
// í…ŒìŠ¤íŠ¸ ì‹œì„¤ ìƒì„±
testFacility1 = FacilityProfile.builder()
.facilityName("ì„œìš¸ ìš”ì–‘ì›")
.facilityType("ìš”ì–‘ì‹œì„¤")
.facilityGrade("A")
.address("ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123")
.phoneNumber("02-1234-5678")
.totalCapacity(100)
.currentOccupancy(80)
.monthlyBasicFee(2500000)
.availableCareGrades(Set.of(1, 2, 3, 4, 5))
.specialties(Set.of("ì¹˜ë§¤ì¼€ì–´", "ì¬í™œì¹˜ë£Œ"))
.latitude(37.5665)
.longitude(126.9780)
â‹®----
testFacility1 = facilityProfileRepository.save(testFacility1);
â‹®----
testFacility2 = FacilityProfile.builder()
.facilityName("ë¶€ì‚° ìš”ì–‘ë³‘ì›")
.facilityType("ìš”ì–‘ë³‘ì›")
.facilityGrade("B")
.address("ë¶€ì‚°ì‹œ í•´ìš´ëŒ€êµ¬ ì„¼í…€ë¡œ 456")
.phoneNumber("051-9876-5432")
.totalCapacity(150)
.currentOccupancy(120)
.monthlyBasicFee(3000000)
.availableCareGrades(Set.of(1, 2, 3))
.specialties(Set.of("ì˜ë£Œì¼€ì–´", "ë¬¼ë¦¬ì¹˜ë£Œ"))
.latitude(35.1796)
.longitude(129.0756)
â‹®----
testFacility2 = facilityProfileRepository.save(testFacility2);
â‹®----
private void createTestMatchingHistory() {
FacilityMatchingHistory history = FacilityMatchingHistory.builder()
.userId("test@example.com")
.facilityId(testFacility1.getId())
.coordinatorId("coordinator1")
.initialMatchScore(BigDecimal.valueOf(85.0))
.recommendationRank(1)
.matchingCriteria("{\"careGrade\":3,\"region\":\"ì„œìš¸ì‹œ\"}")
.facilitySnapshot("{\"type\":\"ìš”ì–‘ì‹œì„¤\",\"grade\":\"A\"}")
.estimatedCost(BigDecimal.valueOf(2500000))
â‹®----
matchingHistoryRepository.save(history);
â‹®----
private void createMultipleTestMatchingHistories() {
// ì„±ê³µì ì¸ ë§¤ì¹­ ì´ë ¥ë“¤
â‹®----
.userId("user" + i)
.facilityId(i % 2 == 0 ? testFacility1.getId() : testFacility2.getId())
â‹®----
.initialMatchScore(BigDecimal.valueOf(80.0 + i))
.recommendationRank(i + 1)
.matchingCriteria("{\"careGrade\":3}")
â‹®----
.isViewed(true)
.isContacted(true)
.isVisited(i < 3) // ì²˜ìŒ 3ê°œë§Œ ë°©ë¬¸
.isSelected(i < 2) // ì²˜ìŒ 2ê°œë§Œ ì„ íƒ
.outcome(i < 2 ?
â‹®----
.satisfactionScore(i < 2 ? BigDecimal.valueOf(4.0 + i * 0.5) : null)
.createdAt(LocalDateTime.now().minusDays(i))
</file>

<file path="src/test/java/com/globalcarelink/facility/FacilityMatchingAnalyticsServiceTest.java">
/**
 * ì‹œì„¤ ë§¤ì¹­ ë¶„ì„ ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸
 * ì„±ê³¼ ë¶„ì„, íŠ¸ë Œë“œ ë¶„ì„, ì¶”ì²œ ì •í™•ë„ ë“±ì˜ í•µì‹¬ ê¸°ëŠ¥ì„ ê²€ì¦
 */
â‹®----
class FacilityMatchingAnalyticsServiceTest {
â‹®----
void setUp() {
// ì‹œì„¤ ì„±ê³¼ ë¶„ì„ìš© ëª© ë°ì´í„° ì„¤ì •
mockPerformanceData = Arrays.asList(
new Object[]{1L, 10L, 8L, 4.2}, // facilityId, totalMatches, successfulMatches, avgSatisfaction
â‹®----
// ë§¤ì¹­ ì´ë ¥ìš© ëª© ë°ì´í„° ì„¤ì •
mockHistoryData = Arrays.asList(
createMockHistory("user1", 1L, true, BigDecimal.valueOf(4.0)),
createMockHistory("user1", 2L, false, null),
createMockHistory("user2", 1L, true, BigDecimal.valueOf(4.5))
â‹®----
void analyzeFacilityPerformance_Success() {
// Given
â‹®----
when(matchingHistoryRepository.calculateFacilityMatchingSuccessRate(any(LocalDateTime.class), eq(5L)))
.thenReturn(mockPerformanceData);
â‹®----
// When
â‹®----
analyticsService.analyzeFacilityPerformance(days);
â‹®----
// Then
assertThat(result).hasSize(3);
â‹®----
// ì²« ë²ˆì§¸ ì‹œì„¤ ì„±ê³¼ ê²€ì¦
FacilityMatchingAnalyticsService.FacilityPerformanceReport firstReport = result.get(0);
assertThat(firstReport.getFacilityId()).isEqualTo(1L);
assertThat(firstReport.getTotalMatches()).isEqualTo(10L);
assertThat(firstReport.getSuccessfulMatches()).isEqualTo(8L);
assertThat(firstReport.getSuccessRate()).isEqualTo(80.0);
assertThat(firstReport.getAverageSatisfaction()).isEqualTo(4.2);
assertThat(firstReport.getPerformanceGrade()).isEqualTo("A"); // 80% ì„±ê³µë¥ , 4.2 ë§Œì¡±ë„ = Aë“±ê¸‰
â‹®----
void analyzeMatchingTrends_Success() {
â‹®----
List<Object[]> mockTrendData = Arrays.asList(
new Object[]{"2024-01", 100L, 85L}, // month, totalMatches, successfulMatches
â‹®----
when(matchingHistoryRepository.getMonthlyMatchingTrends(any(LocalDateTime.class)))
.thenReturn(mockTrendData);
â‹®----
analyticsService.analyzeMatchingTrends(days);
â‹®----
assertThat(result).isNotNull();
assertThat(result.getMonthlyTrends()).hasSize(3);
â‹®----
// ì „ì²´ í†µê³„ ê²€ì¦
assertThat(result.getTotalMatches()).isEqualTo(330L); // 100 + 120 + 110
assertThat(result.getTotalSuccessfulMatches()).isEqualTo(268L); // 85 + 95 + 88
assertThat(result.getOverallSuccessRate()).isEqualTo(81.21); // 268/330 * 100
â‹®----
void getUserMatchingHistory_Success() {
â‹®----
Pageable pageable = PageRequest.of(0, 10);
â‹®----
when(matchingHistoryRepository.findByUserIdOrderByCreatedAtDesc(eq(userId)))
.thenReturn(mockHistoryData.subList(0, 2)); // user1ì˜ ì´ë ¥ë§Œ
â‹®----
analyticsService.getUserMatchingHistory(userId, pageable);
â‹®----
assertThat(result).hasSize(2);
â‹®----
// ì²« ë²ˆì§¸ ì´ë ¥ ê²€ì¦
FacilityMatchingAnalyticsService.UserMatchingHistory firstHistory = result.get(0);
assertThat(firstHistory.getUserId()).isEqualTo("user1");
assertThat(firstHistory.getFacilityId()).isEqualTo(1L);
assertThat(firstHistory.isSuccessful()).isTrue();
assertThat(firstHistory.getSatisfactionScore()).isEqualTo(BigDecimal.valueOf(4.0));
â‹®----
void analyzeRecommendationAccuracy_Success() {
â‹®----
List<Object[]> mockAccuracyData = Arrays.asList(
new Object[]{1, 15L, 12L}, // rank, totalRecommendations, selectedCount
â‹®----
when(matchingHistoryRepository.calculateRecommendationAccuracyByRank(any(LocalDateTime.class)))
.thenReturn(mockAccuracyData);
â‹®----
analyticsService.analyzeRecommendationAccuracy(days);
â‹®----
assertThat(result.getRankAccuracies()).hasSize(3);
â‹®----
// 1ìˆœìœ„ ì •í™•ë„ ê²€ì¦ (12/15 = 80%)
FacilityMatchingAnalyticsService.RankAccuracy firstRank = result.getRankAccuracies().get(0);
assertThat(firstRank.getRank()).isEqualTo(1);
assertThat(firstRank.getAccuracy()).isEqualTo(80.0);
â‹®----
// ì „ì²´ ì •í™•ë„ ê²€ì¦ ((12+8+5)/(15+15+15) = 55.56%)
assertThat(result.getOverallAccuracy()).isEqualTo(55.56);
â‹®----
void calculatePerformanceGrade_VariousScenarios() {
// Given & When & Then
â‹®----
// Aë“±ê¸‰: ë†’ì€ ì„±ê³µë¥  + ë†’ì€ ë§Œì¡±ë„
assertThat(calculatePerformanceGrade(85.0, 4.5)).isEqualTo("A");
â‹®----
// Bë“±ê¸‰: ë†’ì€ ì„±ê³µë¥  + ë³´í†µ ë§Œì¡±ë„
assertThat(calculatePerformanceGrade(80.0, 4.0)).isEqualTo("B");
â‹®----
// Cë“±ê¸‰: ë³´í†µ ì„±ê³µë¥  + ë³´í†µ ë§Œì¡±ë„
assertThat(calculatePerformanceGrade(70.0, 3.5)).isEqualTo("C");
â‹®----
// Dë“±ê¸‰: ë‚®ì€ ì„±ê³µë¥ 
assertThat(calculatePerformanceGrade(50.0, 4.0)).isEqualTo("D");
â‹®----
// Fë“±ê¸‰: ë§¤ìš° ë‚®ì€ ì„±ê³µë¥ 
assertThat(calculatePerformanceGrade(30.0, 3.0)).isEqualTo("F");
â‹®----
void handleEmptyData_Safely() {
â‹®----
.thenReturn(Arrays.asList());
â‹®----
analyticsService.analyzeFacilityPerformance(30);
â‹®----
assertThat(result).isEmpty();
â‹®----
// ===== í—¬í¼ ë©”ì„œë“œ =====
â‹®----
private FacilityMatchingHistory createMockHistory(String userId, Long facilityId,
â‹®----
return FacilityMatchingHistory.builder()
.userId(userId)
.facilityId(facilityId)
.initialMatchScore(BigDecimal.valueOf(85.0))
.recommendationRank(1)
.matchingCriteria("{\"careGrade\":3}")
.facilitySnapshot("{\"type\":\"ìš”ì–‘ì‹œì„¤\",\"grade\":\"A\"}")
.estimatedCost(BigDecimal.valueOf(2000000))
.isViewed(true)
.isContacted(isSuccessful)
.isVisited(isSuccessful)
.isSelected(isSuccessful)
.outcome(isSuccessful ?
â‹®----
.satisfactionScore(satisfaction)
.createdAt(LocalDateTime.now().minusDays(10))
.build();
â‹®----
private String calculatePerformanceGrade(double successRate, double satisfaction) {
// ì‹¤ì œ FacilityMatchingAnalyticsServiceì˜ ë¡œì§ì„ ë°˜ì˜
</file>

<file path="src/test/java/com/globalcarelink/health/HealthAssessmentIntegrationTest.java">
/**
 * ê±´ê°• í‰ê°€ í†µí•© í…ŒìŠ¤íŠ¸
 * - ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ ë¡œë“œ
 * - ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™
 * - ìºì‹œ ë™ì‘ ê²€ì¦
 * - API ì—”ë“œí¬ì¸íŠ¸ í†µí•© í…ŒìŠ¤íŠ¸
 */
â‹®----
class HealthAssessmentIntegrationTest {
â‹®----
void setUp() {
// í…ŒìŠ¤íŠ¸ íšŒì› ìƒì„±
testMember = Member.builder()
.email("test@example.com")
.password(passwordEncoder.encode("password123"))
.name("í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì")
.role(MemberRole.USER)
.createdAt(LocalDateTime.now())
.build();
testMember = memberRepository.save(testMember);
â‹®----
// í…ŒìŠ¤íŠ¸ ê±´ê°• í‰ê°€ ìƒì„±
testAssessment = HealthAssessment.builder()
.memberId(testMember.getId())
.birthYear(1950)
.adlEating(2)
.adlToilet(2)
.adlMobility(3)
.adlCommunication(1)
.ltciGrade(3)
.hasChronicDisease(true)
.chronicDiseases(List.of("ë‹¹ë‡¨ë³‘", "ê³ í˜ˆì••"))
.hasCognitiveDifficulty(false)
.additionalInfo("íŠ¹ë³„í•œ ìš”êµ¬ì‚¬í•­ ì—†ìŒ")
â‹®----
testAssessment = healthAssessmentRepository.save(testAssessment);
â‹®----
// ìºì‹œ ì´ˆê¸°í™”
cacheManager.getCacheNames().forEach(cacheName -> {
var cache = cacheManager.getCache(cacheName);
â‹®----
cache.clear();
â‹®----
void createHealthAssessment_Integration() throws Exception {
// Given
HealthAssessmentCreateRequest request = HealthAssessmentCreateRequest.builder()
â‹®----
.birthYear(1960)
.adlEating(1)
.adlToilet(1)
.adlMobility(2)
â‹®----
.ltciGrade(4)
.hasChronicDisease(false)
.chronicDiseases(List.of())
â‹®----
.additionalInfo("ê±´ê°•í•œ ìƒíƒœ")
â‹®----
// When & Then
mockMvc.perform(post("/api/health-assessments")
.contentType(MediaType.APPLICATION_JSON)
.content(objectMapper.writeValueAsString(request)))
.andExpect(status().isCreated())
.andExpect(jsonPath("$.memberId").value(testMember.getId()))
.andExpect(jsonPath("$.birthYear").value(1960))
.andExpect(jsonPath("$.adlEating").value(1))
.andExpect(jsonPath("$.careGrade").exists());
â‹®----
// ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸
List<HealthAssessment> assessments = healthAssessmentRepository.findByMemberId(testMember.getId());
assertThat(assessments).hasSize(2); // ê¸°ì¡´ 1ê°œ + ìƒˆë¡œ ìƒì„± 1ê°œ
â‹®----
HealthAssessment newAssessment = assessments.stream()
.filter(a -> a.getBirthYear() == 1960)
.findFirst()
.orElseThrow();
â‹®----
assertThat(newAssessment.getAdlEating()).isEqualTo(1);
assertThat(newAssessment.getCareGrade()).isNotNull();
â‹®----
void getHealthAssessment_WithCache() throws Exception {
â‹®----
Long assessmentId = testAssessment.getId();
â‹®----
// When - ì²« ë²ˆì§¸ ì¡°íšŒ (ìºì‹œ ë¯¸ìŠ¤)
mockMvc.perform(get("/api/health-assessments/{id}", assessmentId))
.andExpect(status().isOk())
.andExpect(jsonPath("$.id").value(assessmentId))
.andExpect(jsonPath("$.memberId").value(testMember.getId()));
â‹®----
// ìºì‹œì— ì €ì¥ë˜ì—ˆëŠ”ì§€ í™•ì¸
var cache = cacheManager.getCache("healthAssessments");
assertThat(cache).isNotNull();
assertThat(cache.get(assessmentId)).isNotNull();
â‹®----
// When - ë‘ ë²ˆì§¸ ì¡°íšŒ (ìºì‹œ íˆíŠ¸)
â‹®----
.andExpect(jsonPath("$.id").value(assessmentId));
â‹®----
void getHealthAssessments_WithPaging() throws Exception {
// Given - ì¶”ê°€ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±
â‹®----
HealthAssessment assessment = HealthAssessment.builder()
â‹®----
.birthYear(1950 + i)
.adlEating(1 + (i % 3))
.adlToilet(1 + (i % 3))
.adlMobility(1 + (i % 3))
.adlCommunication(1 + (i % 3))
.ltciGrade(1 + (i % 6))
.hasChronicDisease(i % 2 == 0)
.chronicDiseases(i % 2 == 0 ? List.of("ì§ˆë³‘" + i) : List.of())
.hasCognitiveDifficulty(i % 3 == 0)
.additionalInfo("í…ŒìŠ¤íŠ¸ í‰ê°€ " + i)
.createdAt(LocalDateTime.now().minusDays(i))
â‹®----
healthAssessmentRepository.save(assessment);
â‹®----
// When & Then - ì²« ë²ˆì§¸ í˜ì´ì§€
mockMvc.perform(get("/api/health-assessments")
.param("page", "0")
.param("size", "3")
.param("sort", "createdAt,desc"))
â‹®----
.andExpect(jsonPath("$.content").isArray())
.andExpect(jsonPath("$.content.length()").value(3))
.andExpect(jsonPath("$.totalElements").value(6)) // ê¸°ì¡´ 1ê°œ + ìƒˆë¡œ ìƒì„± 5ê°œ
.andExpect(jsonPath("$.totalPages").value(2))
.andExpect(jsonPath("$.first").value(true))
.andExpect(jsonPath("$.last").value(false));
â‹®----
// When & Then - ë‘ ë²ˆì§¸ í˜ì´ì§€
â‹®----
.param("page", "1")
â‹®----
.andExpected(status().isOk())
â‹®----
.andExpect(jsonPath("$.first").value(false))
.andExpect(jsonPath("$.last").value(true));
â‹®----
void generateStatistics_WithCache() throws Exception {
// Given - í†µê³„ë¥¼ ìœ„í•œ ì¶”ê°€ ë°ì´í„° ìƒì„±
createTestDataForStatistics();
â‹®----
// When - í†µê³„ ì¡°íšŒ (ì²« ë²ˆì§¸ - ìºì‹œ ë¯¸ìŠ¤)
mockMvc.perform(get("/api/health-assessments/statistics"))
â‹®----
.andExpect(jsonPath("$.totalAssessments").value(6)) // ê¸°ì¡´ 1ê°œ + ì¶”ê°€ 5ê°œ
.andExpect(jsonPath("$.averageAge").exists())
.andExpect(jsonPath("$.gradeDistribution").exists())
.andExpect(jsonPath("$.diseaseStatistics").exists());
â‹®----
var cache = cacheManager.getCache("healthAssessmentStats");
â‹®----
assertThat(cache.get("all")).isNotNull();
â‹®----
// When - í†µê³„ ì¬ì¡°íšŒ (ìºì‹œ íˆíŠ¸)
â‹®----
.andExpect(jsonPath("$.totalAssessments").value(6));
â‹®----
void updateHealthAssessment_CacheEviction() throws Exception {
â‹®----
// ë¨¼ì € ì¡°íšŒí•˜ì—¬ ìºì‹œì— ì €ì¥
â‹®----
.andExpect(status().isOk());
â‹®----
// ìºì‹œ í™•ì¸
â‹®----
// When - ì—…ë°ì´íŠ¸ ìš”ì²­
HealthAssessmentCreateRequest updateRequest = HealthAssessmentCreateRequest.builder()
â‹®----
.birthYear(1955) // ë³€ê²½
.adlEating(1) // ë³€ê²½
.adlToilet(1) // ë³€ê²½
â‹®----
.ltciGrade(4) // ë³€ê²½
.hasChronicDisease(false) // ë³€ê²½
â‹®----
.additionalInfo("ì—…ë°ì´íŠ¸ëœ ì •ë³´")
â‹®----
mockMvc.perform(put("/api/health-assessments/{id}", assessmentId)
â‹®----
.content(objectMapper.writeValueAsString(updateRequest)))
â‹®----
.andExpect(jsonPath("$.birthYear").value(1955))
.andExpect(jsonPath("$.adlEating").value(1));
â‹®----
// Then - ìºì‹œê°€ ë¬´íš¨í™”ë˜ì—ˆëŠ”ì§€ í™•ì¸
// ì‹¤ì œë¡œëŠ” ìºì‹œ ë¬´íš¨í™” ì •ì±…ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ
// ì—¬ê¸°ì„œëŠ” ì—…ë°ì´íŠ¸ í›„ ë‹¤ì‹œ ì¡°íšŒí–ˆì„ ë•Œ ìƒˆë¡œìš´ ê°’ì´ ë°˜í™˜ë˜ëŠ”ì§€ í™•ì¸
â‹®----
void deleteHealthAssessment() throws Exception {
â‹®----
// When
mockMvc.perform(delete("/api/health-assessments/{id}", assessmentId))
.andExpect(status().isNoContent());
â‹®----
// Then - ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‚­ì œë˜ì—ˆëŠ”ì§€ í™•ì¸
â‹®----
.andExpect(status().isNotFound());
â‹®----
assertThat(healthAssessmentRepository.findById(assessmentId)).isEmpty();
â‹®----
void generateStatisticsAsync() throws Exception {
â‹®----
// When - ë¹„ë™ê¸° í†µê³„ ìƒì„± í˜¸ì¶œ
HealthAssessmentStatistics stats = statsService.generateStatisticsAsync().get();
â‹®----
// Then
assertThat(stats).isNotNull();
assertThat(stats.getTotalAssessments()).isEqualTo(6);
assertThat(stats.getAverageAge()).isGreaterThan(0);
assertThat(stats.getGradeDistribution()).isNotEmpty();
assertThat(stats.getDiseaseStatistics()).isNotEmpty();
â‹®----
void concurrentHealthAssessmentCreation() throws Exception {
â‹®----
// When - ë™ì‹œì— ì—¬ëŸ¬ ê±´ê°• í‰ê°€ ìƒì„±
â‹®----
Thread thread = new Thread(() -> {
â‹®----
.birthYear(1950 + threadIndex + j)
.adlEating(1 + (j % 3))
.adlToilet(1 + (j % 3))
.adlMobility(1 + (j % 3))
.adlCommunication(1 + (j % 3))
.ltciGrade(1 + (j % 6))
.hasChronicDisease(j % 2 == 0)
.chronicDiseases(j % 2 == 0 ? List.of("ì§ˆë³‘" + j) : List.of())
.hasCognitiveDifficulty(j % 3 == 0)
.additionalInfo("ë™ì‹œì„± í…ŒìŠ¤íŠ¸ " + threadIndex + "-" + j)
â‹®----
healthAssessmentService.createHealthAssessment(request);
â‹®----
exceptions.add(e);
â‹®----
threads.add(thread);
thread.start();
â‹®----
// ëª¨ë“  ìŠ¤ë ˆë“œ ì™„ë£Œ ëŒ€ê¸°
â‹®----
thread.join();
â‹®----
assertThat(exceptions).isEmpty();
â‹®----
List<HealthAssessment> allAssessments = healthAssessmentRepository.findByMemberId(testMember.getId());
assertThat(allAssessments).hasSize(1 + (numberOfThreads * assessmentsPerThread)); // ê¸°ì¡´ 1ê°œ + ìƒˆë¡œ ìƒì„±ëœ ê²ƒë“¤
â‹®----
private void createTestDataForStatistics() {
â‹®----
.birthYear(1940 + (i * 5))
â‹®----
.chronicDiseases(i % 2 == 0 ? List.of("ë‹¹ë‡¨ë³‘", "ê³ í˜ˆì••") : List.of())
â‹®----
.additionalInfo("í†µê³„ìš© í…ŒìŠ¤íŠ¸ ë°ì´í„° " + i)
</file>

<file path="src/test/java/com/globalcarelink/GlobalCareLinkApplicationTest.java">
class GlobalCareLinkApplicationTest {
â‹®----
void contextLoads() {
</file>

<file path=".env.example">
# ===========================================
# LightCare í™˜ê²½ë³€ìˆ˜ ì„¤ì • (ì˜ˆì‹œ íŒŒì¼)
# ì‹¤ì œ ì‚¬ìš© ì‹œ .env íŒŒì¼ë¡œ ë³µì‚¬ í›„ ì‹¤ì œ ê°’ ì…ë ¥
# ===========================================

# ===========================================
# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • (SQLite - íŒŒì¼ ê¸°ë°˜)
# ===========================================
DATABASE_URL=jdbc:sqlite:./data/lightcare.db
# SQLiteëŠ” ì‚¬ìš©ìëª…/ë¹„ë°€ë²ˆí˜¸ ë¶ˆí•„ìš”

# ===========================================
# JWT ë³´ì•ˆ ì„¤ì • (í•„ìˆ˜ ë³€ê²½)
# ===========================================
JWT_SECRET=your_super_secret_jwt_key_with_256_bits_minimum_change_in_production
JWT_EXPIRATION=86400000

# ===========================================
# ì´ë©”ì¼ ì„¤ì • (Gmail SMTP - ë¬´ë£Œ)
# ===========================================
GMAIL_USERNAME=your-email@gmail.com
GMAIL_APP_PASSWORD=your_gmail_app_password
# Gmail ì•± ë¹„ë°€ë²ˆí˜¸ ë°œê¸‰ ë°©ë²•: https://support.google.com/accounts/answer/185833

# ===========================================
# ì™¸ë¶€ API í‚¤ (ë¬´ë£Œ í”Œëœ)
# ===========================================
# ì¹´ì¹´ì˜¤ë§µ API (ì›” 30ë§Œê±´ ë¬´ë£Œ)
KAKAO_API_KEY=your_kakao_map_api_key
KAKAO_REST_API_KEY=your_kakao_rest_api_key

# ê³µê³µë°ì´í„° API (ë°œê¸‰ë°›ì€ ì¸ì¦í‚¤)
PUBLIC_API_KEY=CCXHQiSSQ0J+RRaadSjmmS7ltxG/tlSVOYMjh45MmGne68ptgGAaAJVJti8nBazSjLemTAyb5gAuj43xq7fTog==

# ì™¸êµë¶€ API
MOFA_API_KEY=your_mofa_api_key

# ===========================================
# GitHub ì„¤ì • (íŒŒì¼ ì €ì¥ìš©)
# ===========================================
GITHUB_TOKEN=your_github_personal_access_token
GITHUB_REPO_OWNER=dooseob
GITHUB_REPO_NAME=elderberry-files

# ===========================================
# ê°œë°œ í™˜ê²½ ì„¤ì •
# ===========================================
SPRING_PROFILES_ACTIVE=dev
LOG_LEVEL=debug
SERVER_PORT=8080

# Java ì„¤ì •
JAVA_HOME=/path/to/jdk-21
JAVA_OPTS=-Xmx1g -Xms512m

# ===========================================
# í”„ë¡ íŠ¸ì—”ë“œ í™˜ê²½ë³€ìˆ˜ (Vite)
# ===========================================
VITE_API_BASE_URL=http://localhost:8080/api
VITE_WS_URL=ws://localhost:8080/ws
VITE_KAKAO_API_KEY=your_kakao_api_key
VITE_GITHUB_REPO_OWNER=dooseob
VITE_GITHUB_REPO_NAME=elderberry
VITE_DEV_MODE=true

# ===========================================
# ë°°í¬ í™˜ê²½ (Railway/Render)
# ===========================================
# Railway ë°°í¬ì‹œ ìë™ ì„¤ì •
RAILWAY_ENVIRONMENT=production
PORT=8080

# Render ë°°í¬ì‹œ ì„¤ì •
RENDER_EXTERNAL_URL=https://your-app.onrender.com

# ===========================================
# ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…
# ===========================================
# ê°œë°œ í™˜ê²½ì—ì„œëŠ” false, ìš´ì˜ì—ì„œëŠ” true
ACTUATOR_ENABLED=false
METRICS_ENABLED=false
</file>

<file path=".gitignore">
# ===========================================
# LightCare í”„ë¡œì íŠ¸ .gitignore
# ===========================================

# ===========================================
# í™˜ê²½ë³€ìˆ˜ ë° ë³´ì•ˆ íŒŒì¼ (ì ˆëŒ€ ì»¤ë°‹ ê¸ˆì§€!)
# ===========================================
.env
.env.local
.env.dev
.env.prod
.env.staging
*.env
secrets/
config/secrets.yml
application-secret.yml

# API í‚¤ íŒŒì¼
api-keys.txt
keys/
credentials/

# ===========================================
# Java/Spring Boot
# ===========================================
# ì»´íŒŒì¼ëœ í´ë˜ìŠ¤ íŒŒì¼
*.class
*.jar
*.war
*.ear
*.nar

# Gradle
.gradle/
build/
gradle-app.setting
!gradle-wrapper.jar
!**/src/main/**/build/
!**/src/test/**/build/

# Maven (í˜¹ì‹œ ì‚¬ìš©í•  ê²½ìš°)
target/
pom.xml.tag
pom.xml.releaseBackup
pom.xml.versionsBackup
pom.xml.next
release.properties
dependency-reduced-pom.xml
buildNumber.properties

# Spring Boot
*.jar
*.war
*.orig
spring-boot-*.txt
.factorypath

# ===========================================
# ë°ì´í„°ë² ì´ìŠ¤ (SQLite)
# ===========================================
*.db
*.sqlite
*.sqlite3
data/
database/
db/
# í…ŒìŠ¤íŠ¸ DB ì œì™¸
!**/src/test/resources/**/*.db

# ===========================================
# ë¡œê·¸ íŒŒì¼
# ===========================================
*.log
logs/
log/
*.log.*
application.log
error.log
debug.log

# ===========================================
# IDE ì„¤ì • íŒŒì¼
# ===========================================
# IntelliJ IDEA
.idea/
*.iws
*.iml
*.ipr
out/
.idea_modules/

# Eclipse
.metadata
bin/
tmp/
*.tmp
*.bak
*.swp
*~.nib
local.properties
.settings/
.loadpath
.recommenders

# NetBeans
/nbproject/private/
/nbbuild/
/dist/
/nbdist/
/.nb-gradle/

# Visual Studio Code
.vscode/
*.code-workspace

# ===========================================
# Node.js/React/Vite (í”„ë¡ íŠ¸ì—”ë“œ)
# ===========================================
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*
lerna-debug.log*

# ë¹Œë“œ ê²°ê³¼ë¬¼
dist/
dist-ssr/
build/

# í™˜ê²½ë³€ìˆ˜ (í”„ë¡ íŠ¸ì—”ë“œ)
.env.local
.env.development.local
.env.test.local
.env.production.local

# ===========================================
# ìš´ì˜ì²´ì œ
# ===========================================
# Windows
Thumbs.db
ehthumbs.db
Desktop.ini
$RECYCLE.BIN/
*.cab
*.msi
*.msix
*.msm
*.msp
*.lnk

# macOS
.DS_Store
.AppleDouble
.LSOverride
Icon
._*
.DocumentRevisions-V100
.fseventsd
.Spotlight-V100
.TemporaryItems
.Trashes
.VolumeIcon.icns
.com.apple.timemachine.donotpresent

# Linux
*~
.fuse_hidden*
.directory
.Trash-*
.nfs*

# ===========================================
# ì„ì‹œ íŒŒì¼ ë° ë°±ì—…
# ===========================================
*.tmp
*.temp
*.swp
*.swo
*~
.#*
\#*#
.#*
*.orig
*.rej

# ===========================================
# í…ŒìŠ¤íŠ¸ ê´€ë ¨
# ===========================================
# í…ŒìŠ¤íŠ¸ ê²°ê³¼
/test-results/
/coverage/
*.lcov
.nyc_output

# ===========================================
# ë°°í¬ ê´€ë ¨
# ===========================================
# Docker
.dockerignore
Dockerfile.prod
docker-compose.override.yml

# ë°°í¬ ì•„í‹°íŒ©íŠ¸
deploy/
deployment/
.deploy/

# ===========================================
# ê°œë°œ ë„êµ¬
# ===========================================
# JProfiler
*.jpb

# YourKit
*.hprof

# JMeter
*.jmx
jmeter.log

# ===========================================
# ì»¤ìŠ¤í…€ ì œì™¸ (í”„ë¡œì íŠ¸ë³„)
# ===========================================
# ì—…ë¡œë“œëœ íŒŒì¼ë“¤
uploads/
files/
media/
static/uploads/

# ìºì‹œ íŒŒì¼
.cache/
*.cache

# ì‹œí¬ë¦¿ ë°±ì—…
*.secret
*.private
*.key
*.pem
*.p12
*.pfx

# ê°œë°œ ì¤‘ ë©”ëª¨ íŒŒì¼
TODO.txt
NOTES.txt
scratch.txt
temp.md

# ===========================================
# ì¤‘ìš”: ì‹¤ìˆ˜ë¡œ ì»¤ë°‹í•˜ê¸° ì‰¬ìš´ íŒŒì¼ë“¤
# ===========================================
# ì„¤ì • ë°±ì—…
application-local.yml
application-dev.yml.backup
config-backup/

# ê°œë°œ í…ŒìŠ¤íŠ¸ íŒŒì¼
test-data.sql
sample-data.json
mock-data/

# ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê²°ê³¼
benchmark/
performance-test/
</file>

<file path="CLAUDE_GUIDELINES.md">
# ğŸ¤– Claude AI ê°œë°œ ì§€ì¹¨ì„œ

> **ëª¨ë“  ì‘ì—… ì‹œì‘ ì „ í•„ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸**  
> ì´ ë¬¸ì„œë¥¼ ë¨¼ì € ì½ê³  ì§€ì¹¨ì„ ì¤€ìˆ˜í•˜ì—¬ ì‘ì—…í•˜ì„¸ìš”!

---

## ğŸ” ì‘ì—… ì‹œì‘ ì „ í•„ìˆ˜ ì²´í¬

### ğŸ“‹ Step 1: í”„ë¡œì íŠ¸ ìƒíƒœ íŒŒì•…
- [ ] `CLAUDE.md` ì „ì²´ ë‚´ìš© ìˆ™ì§€
- [ ] í˜„ì¬ ì§„í–‰ ì¤‘ì¸ Phase í™•ì¸
- [ ] ìµœê·¼ ì™„ë£Œëœ ì‘ì—… ë‚´ìš© íŒŒì•…
- [ ] ê´€ë ¨ ë¬¸ì„œ (`docs/phases/*.md`, `docs/DEVELOPMENT_PLAN.md`) ê²€í† 

### ğŸ“‹ Step 2: ê¸°ìˆ ì  ì œì•½ì‚¬í•­ í™•ì¸
- [ ] ì‚¬ìš© ê°€ëŠ¥í•œ ê¸°ìˆ  ìŠ¤íƒ í™•ì¸
- [ ] ê¸ˆì§€ëœ ê¸°ìˆ /íŒ¨í„´ í™•ì¸
- [ ] ì„±ëŠ¥ ë° ë³´ì•ˆ ìš”êµ¬ì‚¬í•­ ê²€í† 
- [ ] í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ëª©í‘œ í™•ì¸

### ğŸ“‹ Step 3: ì½”ë”© ê·œì¹™ ì ê²€
- [ ] ë„¤ì´ë° ì»¨ë²¤ì…˜ í™•ì¸
- [ ] íŒ¨í‚¤ì§€ êµ¬ì¡° ê·œì¹™ ìˆ™ì§€
- [ ] ì£¼ì„ ì‘ì„± ê·œì¹™ (í•œêµ­ì–´ í•„ìˆ˜)
- [ ] ì»¤ë°‹ ë©”ì‹œì§€ í˜•ì‹ í™•ì¸

---

## ğŸ¯ í•µì‹¬ ê°œë°œ ì›ì¹™

### ğŸ›¡ï¸ ì ˆëŒ€ ì¤€ìˆ˜ì‚¬í•­
1. **í•œêµ­ì–´ ìš°ì„ **: ëª¨ë“  ì£¼ì„, ë¡œê·¸, ë¬¸ì„œëŠ” í•œêµ­ì–´
2. **ë³´ì•ˆ ìš°ì„ **: JWT í† í° ê´€ë¦¬, ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” ê°•í™” ì ìš©
3. **ì„±ëŠ¥ ìš°ì„ **: ìºì‹±, ë¹„ë™ê¸°, N+1 ì¿¼ë¦¬ ë°©ì§€ í•„ìˆ˜
4. **í…ŒìŠ¤íŠ¸ ìš°ì„ **: ëª¨ë“  ê¸°ëŠ¥ì— ì ì ˆí•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ
5. **ë¬¸ì„œí™”**: ë³µì¡í•œ ë¡œì§ì€ ë°˜ë“œì‹œ ìƒì„¸ ì„¤ëª…

### ğŸš« ì ˆëŒ€ ê¸ˆì§€ì‚¬í•­
- êµ¬ ì—­í• ëª… (`DOMESTIC_USER`, `OVERSEAS_USER`) ì‚¬ìš© ê¸ˆì§€
- í•˜ë“œì½”ë”©ëœ ì„¤ì •ê°’ (ëª¨ë“  ì„¤ì •ì€ `application.yml`)
- `@EntityGraph` ì—†ëŠ” ì—°ê´€ ì—”í‹°í‹° ì¡°íšŒ
- ì‹œê°„ ì†Œìš” ì‘ì—…ì˜ ë™ê¸° ì²˜ë¦¬
- ìºì‹œ ì ìš© ì—†ëŠ” ë°˜ë³µ ì¡°íšŒ ë¡œì§

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ íŒ¨í„´

### ğŸ“¦ ì„œë¹„ìŠ¤ ë ˆì´ì–´ êµ¬ì¡°
```java
// 1. Core Service: í•µì‹¬ CRUD ë¡œì§
@Service
@Transactional
public class HealthAssessmentService {
    // ìƒì„±, ìˆ˜ì •, ì‚­ì œ ë¡œì§
}

// 2. Query Service: ì¡°íšŒ ì „ìš© ë¡œì§
@Service
@Transactional(readOnly = true)
public class HealthAssessmentQueryService {
    // ë³µì¡í•œ ì¡°íšŒ, ê²€ìƒ‰ ë¡œì§
}

// 3. Stats Service: í†µê³„/ì§‘ê³„ ë¡œì§
@Service
public class HealthAssessmentStatsService {
    @Async("statisticsExecutor")
    @Cacheable("healthAssessmentStats")
    // ë¹„ë™ê¸° í†µê³„ ìƒì„±
}
```

### ğŸ—ƒï¸ ì—”í‹°í‹° ì„¤ê³„ íŒ¨í„´
```java
// ê¸°ë°˜ í´ë˜ìŠ¤ í™œìš©
@MappedSuperclass
@SuperBuilder
public abstract class BaseProfile {
    // ê³µí†µ í•„ë“œì™€ ë©”ì„œë“œ
}

// ë„ë©”ì¸ë³„ íŠ¹í™”
@Entity
@SuperBuilder
public class DomesticProfile extends BaseProfile {
    // êµ­ë‚´ íŠ¹í™” í•„ë“œë§Œ
}
```

---

## âš¡ ì„±ëŠ¥ ìµœì í™” ì²´í¬ë¦¬ìŠ¤íŠ¸

### ğŸš€ ìºì‹± ì ìš©
- [ ] ìì£¼ ì¡°íšŒë˜ëŠ” ë°ì´í„°ì— `@Cacheable` ì ìš©
- [ ] ìš©ë„ë³„ ìºì‹œ ì„¤ì • í™•ì¸ (TTL, í¬ê¸°)
- [ ] ìºì‹œ ë¬´íš¨í™” ì „ëµ (`@CacheEvict`) ì ìš©
- [ ] ìºì‹œ í†µê³„ ëª¨ë‹ˆí„°ë§ ì„¤ì •

### ğŸ”„ ë¹„ë™ê¸° ì²˜ë¦¬
- [ ] ì‹œê°„ ì†Œìš” ì‘ì—…ì— `@Async` ì ìš©
- [ ] ì ì ˆí•œ ìŠ¤ë ˆë“œ í’€ ì„ íƒ (`statisticsExecutor`, `matchingExecutor`)
- [ ] ì˜ˆì™¸ ì²˜ë¦¬ ë° ë¡œê¹… ì¶”ê°€
- [ ] ë°±í”„ë ˆì…” ì •ì±… ê³ ë ¤

### ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
- [ ] N+1 ì¿¼ë¦¬ ë°©ì§€ (`@EntityGraph` ì‚¬ìš©)
- [ ] ë°°ì¹˜ ì²˜ë¦¬ ì„¤ì • í™•ì¸
- [ ] ì¸ë±ìŠ¤ ìµœì í™” ê³ ë ¤
- [ ] ì¿¼ë¦¬ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

---

## ğŸ” ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ğŸ”‘ ì¸ì¦/ì¸ê°€
- [ ] JWT í† í° ë¸”ë™ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬
- [ ] Access/Refresh í† í° ë¶„ë¦¬
- [ ] í† í° ë©”íƒ€ë°ì´í„° ì¶”ì  (IP, User-Agent)
- [ ] ë¹„ë°€ë²ˆí˜¸ BCrypt ê°•ë„ 12 ì´ìƒ

### ğŸ›¡ï¸ ì…ë ¥ ê²€ì¦
- [ ] `@Valid` ì–´ë…¸í…Œì´ì…˜ ì ìš©
- [ ] ìƒì„¸í•œ ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ
- [ ] SQL ì¸ì ì…˜ ë°©ì§€
- [ ] XSS ê³µê²© ë°©ì§€

### ğŸ“ ë³´ì•ˆ ë¡œê¹…
- [ ] ì¸ì¦ ì‹¤íŒ¨ ë¡œê·¸
- [ ] ê¶Œí•œ ë¶€ì¡± ë¡œê·¸
- [ ] ë¯¼ê° ì •ë³´ ë§ˆìŠ¤í‚¹
- [ ] IP ì£¼ì†Œ ì¶”ì 

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‘ì„± ê°€ì´ë“œ

### ğŸ“Š í…ŒìŠ¤íŠ¸ ìœ í˜•ë³„ ì‘ì„±
```java
// 1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
@ExtendWith(MockitoExtension.class)
class ServiceTest {
    @Mock Repository repository;
    @InjectMocks Service service;
    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í…ŒìŠ¤íŠ¸
}

// 2. í†µí•© í…ŒìŠ¤íŠ¸
@SpringBootTest
@ActiveProfiles("test")
class IntegrationTest {
    // ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ í…ŒìŠ¤íŠ¸
}

// 3. E2E í…ŒìŠ¤íŠ¸
@SpringBootTest(webEnvironment = RANDOM_PORT)
class E2ETest {
    // ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸
}
```

### âœ… í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€
- [ ] Service í´ë˜ìŠ¤: 95% ì´ìƒ
- [ ] Controller í´ë˜ìŠ¤: 90% ì´ìƒ
- [ ] ì „ì²´ í”„ë¡œì íŠ¸: 85% ì´ìƒ
- [ ] ì¤‘ìš” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§: 100%

---

## ğŸ“ ì½”ë”© ìŠ¤íƒ€ì¼ ê°€ì´ë“œ

### ğŸ¨ ë„¤ì´ë° ê·œì¹™
```java
// í´ë˜ìŠ¤: PascalCase
public class HealthAssessmentService {}

// ë©”ì„œë“œ: camelCase
public void createHealthAssessment() {}

// ìƒìˆ˜: UPPER_SNAKE_CASE
private static final int MAX_RETRY_COUNT = 3;

// íŒ¨í‚¤ì§€: ì†Œë¬¸ì
package com.globalcarelink.health;
```

### ğŸ’¬ ì£¼ì„ ì‘ì„± ê·œì¹™
```java
/**
 * ê±´ê°• í‰ê°€ ë°ì´í„°ë¥¼ ìƒì„±í•˜ê³  ëŒë´„ ë“±ê¸‰ì„ ìë™ ê³„ì‚°í•©ë‹ˆë‹¤.
 * 
 * @param request ê±´ê°• í‰ê°€ ìƒì„± ìš”ì²­ ë°ì´í„°
 * @return ìƒì„±ëœ ê±´ê°• í‰ê°€ ì‘ë‹µ ë°ì´í„°
 * @throws CustomException.BadRequest ìœ íš¨í•˜ì§€ ì•Šì€ ì…ë ¥ ë°ì´í„°ì¸ ê²½ìš°
 */
public HealthAssessmentResponse createHealthAssessment(HealthAssessmentCreateRequest request) {
    // ADL ì ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ëŒë´„ ë“±ê¸‰ì„ ê³„ì‚°í•©ë‹ˆë‹¤
    CareGrade grade = calculateCareGrade(request);
    
    // ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ê³  ì‘ë‹µì„ ë°˜í™˜í•©ë‹ˆë‹¤
    return saveAndConvertToResponse(request, grade);
}
```

---

## ğŸš¨ ì—ëŸ¬ ì²˜ë¦¬ ê°€ì´ë“œ

### ğŸ¯ ì˜ˆì™¸ ì²˜ë¦¬ íŒ¨í„´
```java
// 1. ì»¤ìŠ¤í…€ ì˜ˆì™¸ ì‚¬ìš©
throw new CustomException.NotFound("ê±´ê°• í‰ê°€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + id);

// 2. ìƒì„¸í•œ ì˜¤ë¥˜ ì •ë³´ ì œê³µ
ValidationErrorDetails errorDetails = validationErrorBuilder
    .create("ì…ë ¥ê°’ ìœ íš¨ì„± ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")
    .addFieldError("birthYear", value, "1900ë…„ ì´í›„ ì¶œìƒë…„ë„ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”", "field.birth.year")
    .build();

// 3. ë³´ì•ˆ ê³ ë ¤ ì˜¤ë¥˜ ë©”ì‹œì§€
// ë¯¼ê°í•œ ì •ë³´ëŠ” ë¡œê·¸ì—ë§Œ ê¸°ë¡í•˜ê³  ì‚¬ìš©ìì—ê²ŒëŠ” ì¼ë°˜ì ì¸ ë©”ì‹œì§€
log.error("ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨: {}", detailError);
return "ì¼ì‹œì ì¸ ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
```

---

## ğŸ“Š ëª¨ë‹ˆí„°ë§ & ë¡œê¹…

### ğŸ“ˆ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
```java
// 1. ë©”ì„œë“œ ì‹¤í–‰ ì‹œê°„ ì¸¡ì •
@Timed(name = "health.assessment.creation", description = "ê±´ê°• í‰ê°€ ìƒì„± ì‹œê°„")
public HealthAssessmentResponse createHealthAssessment() {
    long startTime = System.currentTimeMillis();
    try {
        // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
    } finally {
        long duration = System.currentTimeMillis() - startTime;
        if (duration > 1000) {
            log.warn("ê±´ê°• í‰ê°€ ìƒì„± ì§€ì—°: {}ms", duration);
        }
    }
}

// 2. ìºì‹œ íˆíŠ¸ìœ¨ ëª¨ë‹ˆí„°ë§
log.info("ìºì‹œ í†µê³„ - íˆíŠ¸ìœ¨: {:.2f}%, ìš”ì²­ìˆ˜: {}", hitRate, requestCount);
```

### ğŸ“ êµ¬ì¡°í™”ëœ ë¡œê¹…
```java
// JSON í˜•íƒœì˜ êµ¬ì¡°í™”ëœ ë¡œê·¸
log.info("ê±´ê°• í‰ê°€ ìƒì„± ì™„ë£Œ - memberId: {}, assessmentId: {}, careGrade: {}, duration: {}ms", 
         memberId, assessmentId, careGrade, duration);

// ë³´ì•ˆ ì´ë²¤íŠ¸ ë¡œê¹…
log.warn("ë¡œê·¸ì¸ ì‹¤íŒ¨ - email: {}, ip: {}, userAgent: {}", 
         email, ipAddress, userAgent);
```

---

## ğŸ”„ ì‘ì—… í”Œë¡œìš°

### ğŸš€ ê°œë°œ ì‹œì‘
1. **ìš”êµ¬ì‚¬í•­ ë¶„ì„**: ë¬´ì—‡ì„ ë§Œë“¤ì–´ì•¼ í•˜ëŠ”ê°€?
2. **ê¸°ìˆ  ì¡°ì‚¬**: ì–´ë–¤ ê¸°ìˆ ì„ ì‚¬ìš©í•  ê²ƒì¸ê°€?
3. **ì„¤ê³„**: ì–´ë–»ê²Œ êµ¬í˜„í•  ê²ƒì¸ê°€?
4. **í…ŒìŠ¤íŠ¸ ì‘ì„±**: ì–´ë–»ê²Œ ê²€ì¦í•  ê²ƒì¸ê°€?

### ğŸ”¨ êµ¬í˜„ ë‹¨ê³„
1. **ì—”í‹°í‹° ì„¤ê³„**: ë°ì´í„° ëª¨ë¸ ì •ì˜
2. **Repository êµ¬í˜„**: ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ
3. **Service êµ¬í˜„**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ
4. **Controller êµ¬í˜„**: ì›¹ ê³„ì¸µ
5. **í…ŒìŠ¤íŠ¸ ì‘ì„±**: ê° ê³„ì¸µë³„ í…ŒìŠ¤íŠ¸

### âœ… ì™„ë£Œ ê²€ì¦
1. **ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸**: ìš”êµ¬ì‚¬í•­ ì¶©ì¡± í™•ì¸
2. **ì„±ëŠ¥ í…ŒìŠ¤íŠ¸**: ì‘ë‹µ ì‹œê°„, ì²˜ë¦¬ëŸ‰ í™•ì¸
3. **ë³´ì•ˆ í…ŒìŠ¤íŠ¸**: ì·¨ì•½ì  ì ê²€
4. **ì½”ë“œ ë¦¬ë·°**: í’ˆì§ˆ ê¸°ì¤€ ì¶©ì¡± í™•ì¸

---

## ğŸ“š ì°¸ê³  ìë£Œ

### ğŸ” ì½”ë“œ ì°¸ê³ ì²˜
- **ì„œë¹„ìŠ¤ íŒ¨í„´**: `HealthAssessmentService`, `HealthAssessmentQueryService`
- **ì—”í‹°í‹° ì„¤ê³„**: `BaseProfile`, `DomesticProfile`, `OverseasProfile`
- **ìºì‹œ ì„¤ì •**: `CacheConfig.java`
- **ë¹„ë™ê¸° ì„¤ì •**: `AsyncConfig.java`
- **ë³´ì•ˆ ì„¤ì •**: `JwtTokenProvider.java`, `PasswordEncoderConfig.java`

### ğŸ“– ë¬¸ì„œ ì°¸ê³ ì²˜
- **ì „ì²´ ê³„íš**: `docs/DEVELOPMENT_PLAN.md`
- **ì™„ë£Œ ë‚´ì—­**: `DEVELOPMENT_SUMMARY.md`
- **API ê°€ì´ë“œ**: `README.md`
- **í˜„ì¬ ìƒíƒœ**: `CLAUDE.md`

---

## ğŸ¯ í’ˆì§ˆ ê¸°ì¤€

### ğŸ“Š ì •ëŸ‰ì  ê¸°ì¤€
- **ì‘ë‹µ ì‹œê°„**: í‰ê·  200ms ì´í•˜
- **í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€**: 85% ì´ìƒ
- **ìºì‹œ íˆíŠ¸ìœ¨**: 80% ì´ìƒ
- **ì—ëŸ¬ìœ¨**: 0.1% ì´í•˜

### ğŸ† ì •ì„±ì  ê¸°ì¤€
- **ê°€ë…ì„±**: ì£¼ì„ ì—†ì´ë„ ì´í•´ ê°€ëŠ¥í•œ ì½”ë“œ
- **ìœ ì§€ë³´ìˆ˜ì„±**: ë³€ê²½ì´ ì‰¬ìš´ êµ¬ì¡°
- **í™•ì¥ì„±**: ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ê°€ ìš©ì´í•œ ì„¤ê³„
- **ì•ˆì •ì„±**: ì˜ˆì™¸ ìƒí™©ì— ëŒ€í•œ ì ì ˆí•œ ì²˜ë¦¬

---

## ğŸš¨ ê¸´ê¸‰ ìƒí™© ëŒ€ì‘

### ğŸ› ë²„ê·¸ ë°œìƒ ì‹œ
1. **ë¡œê·¸ í™•ì¸**: `logs/elderberry.log`
2. **ì¬í˜„ ì‹œë„**: ë™ì¼í•œ ì¡°ê±´ìœ¼ë¡œ í…ŒìŠ¤íŠ¸
3. **ì˜í–¥ ë²”ìœ„ íŒŒì•…**: ì–´ë–¤ ê¸°ëŠ¥ì´ ì˜í–¥ë°›ëŠ”ê°€?
4. **ì„ì‹œ ì¡°ì¹˜**: ì„œë¹„ìŠ¤ ì¤‘ë‹¨ ìµœì†Œí™”
5. **ê·¼ë³¸ ì›ì¸ ë¶„ì„**: ì™œ ë°œìƒí–ˆëŠ”ê°€?
6. **ì¬ë°œ ë°©ì§€**: ì–´ë–»ê²Œ ì˜ˆë°©í•  ê²ƒì¸ê°€?

### ğŸ”¥ ì„±ëŠ¥ ì´ìŠˆ ì‹œ
1. **ë©”íŠ¸ë¦­ í™•ì¸**: `/actuator/metrics`
2. **ìºì‹œ ìƒíƒœ**: `/actuator/caches`
3. **ìŠ¤ë ˆë“œ ë¤í”„**: `/actuator/threaddump`
4. **ë©”ëª¨ë¦¬ ë¶„ì„**: í™ ë¤í”„ ë¶„ì„
5. **ì¿¼ë¦¬ ë¶„ì„**: ëŠë¦° ì¿¼ë¦¬ ì‹ë³„
6. **ìµœì í™” ì ìš©**: ë³‘ëª© ì§€ì  ê°œì„ 

---

## ğŸ’¡ ê°œë°œ íŒ

### ğŸ¯ íš¨ìœ¨ì ì¸ ê°œë°œ
- **ì‘ì€ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ê¸°**: í° ê¸°ëŠ¥ì„ ì‘ì€ ë‹¨ìœ„ë¡œ ë¶„í•´
- **í…ŒìŠ¤íŠ¸ ë¨¼ì €**: TDD ë°©ì‹ìœ¼ë¡œ ê°œë°œ
- **ìì£¼ ì»¤ë°‹**: ì‘ì€ ë³€ê²½ì‚¬í•­ë„ ìì£¼ ì»¤ë°‹
- **ë¬¸ì„œí™”**: ë³µì¡í•œ ë¡œì§ì€ ì¦‰ì‹œ ë¬¸ì„œí™”

### ğŸ” ë””ë²„ê¹… ì „ëµ
- **ë¡œê·¸ í™œìš©**: ì ì ˆí•œ ë¡œê·¸ ë ˆë²¨ê³¼ ë©”ì‹œì§€
- **ë‹¨ê³„ë³„ í™•ì¸**: ê° ë‹¨ê³„ë³„ë¡œ ìƒíƒœ í™•ì¸
- **ê²©ë¦¬ í…ŒìŠ¤íŠ¸**: ë¬¸ì œ ë¶€ë¶„ë§Œ ë¶„ë¦¬í•˜ì—¬ í…ŒìŠ¤íŠ¸
- **ë™ë£Œ ê²€í† **: ë‹¤ë¥¸ ê´€ì ì—ì„œì˜ ê²€í† 

---

## ğŸ‰ ì„±ê³µ ì§€í‘œ

### âœ¨ ì¢‹ì€ ì½”ë“œì˜ íŠ¹ì§•
- **ì½ê¸° ì‰¬ìš´ ì½”ë“œ**: ì£¼ì„ ì—†ì´ë„ ì˜ë„ê°€ ëª…í™•
- **í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ì½”ë“œ**: ì˜ì¡´ì„±ì´ ì ê³  ê²©ë¦¬ ê°€ëŠ¥
- **ë³€ê²½ ìš©ì´í•œ ì½”ë“œ**: ìƒˆ ìš”êµ¬ì‚¬í•­ì— ì‰½ê²Œ ëŒ€ì‘
- **ì„±ëŠ¥ ì¢‹ì€ ì½”ë“œ**: íš¨ìœ¨ì ì¸ ì•Œê³ ë¦¬ì¦˜ê³¼ ìë£Œêµ¬ì¡°

### ğŸ† í”„ë¡œì íŠ¸ ì„±ê³µ ê¸°ì¤€
- **ì‚¬ìš©ì ë§Œì¡±ë„**: ë¹ ë¥´ê³  ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤
- **ê°œë°œ íš¨ìœ¨ì„±**: ìƒˆ ê¸°ëŠ¥ ê°œë°œ ì†ë„
- **ìš´ì˜ ì•ˆì •ì„±**: ì¥ì•  ì—†ëŠ” ì„œë¹„ìŠ¤ ìš´ì˜
- **í™•ì¥ ê°€ëŠ¥ì„±**: íŠ¸ë˜í”½ ì¦ê°€ì— ëŒ€í•œ ëŒ€ì‘ë ¥

---

<div align="center">
  <h2>ğŸŒ¿ Elderberryì™€ í•¨ê»˜ ë” ë‚˜ì€ ëŒë´„ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì–´ê°€ìš”!</h2>
  <p><strong>ì´ ì§€ì¹¨ì„ ë”°ë¼ í’ˆì§ˆ ë†’ì€ ì½”ë“œë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.</strong></p>
  <p><em>Made with â¤ï¸ by Claude AI</em></p>
</div>

---

**ğŸ“Œ ì´ ë¬¸ì„œëŠ” ëª¨ë“  ì‘ì—… ì „ì— ë°˜ë“œì‹œ í™•ì¸í•´ì•¼ í•˜ëŠ” í•„ìˆ˜ ê°€ì´ë“œì…ë‹ˆë‹¤.**
</file>

<file path="DEVELOPMENT_SUMMARY.md">
# ğŸŒ¿ Elderberry í”„ë¡œì íŠ¸ ê°œë°œ ìš”ì•½ ë³´ê³ ì„œ

> **í”„ë¡œì íŠ¸**: ê¸€ë¡œë²Œ ì¼€ì–´ë§í¬ í”Œë«í¼  
> **ê¸°ê°„**: 2024ë…„ ê°œë°œ ì‚¬ì´í´  
> **ëª©í‘œ**: ì½”ë“œ í’ˆì§ˆ í–¥ìƒ, ì„±ëŠ¥ ìµœì í™”, ë³´ì•ˆ ê°•í™”  

## ğŸ“‹ ê°œìš”

Elderberry í”„ë¡œì íŠ¸ì˜ ì „ë©´ì ì¸ ë¦¬íŒ©í† ë§ ë° ê°œì„  ì‘ì—…ì„ í†µí•´ í™•ì¥ ê°€ëŠ¥í•˜ê³  ì„±ëŠ¥ì´ ìµœì í™”ëœ í˜„ëŒ€ì ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë°œì „ì‹œì¼°ìŠµë‹ˆë‹¤. ì´ 10ë‹¨ê³„ì˜ ì²´ê³„ì ì¸ ê°œì„  ì‘ì—…ì„ í†µí•´ ì½”ë“œ í’ˆì§ˆ, ì„±ëŠ¥, ë³´ì•ˆ, í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ë¥¼ ëŒ€í­ í–¥ìƒì‹œì¼°ìŠµë‹ˆë‹¤.

## ğŸ¯ ì£¼ìš” ì„±ê³¼

### ğŸ“Š ì •ëŸ‰ì  ì„±ê³¼
- **ì‘ë‹µ ì‹œê°„**: ìºì‹± ì ìš©ìœ¼ë¡œ í‰ê·  60% í–¥ìƒ
- **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: ì„ íƒì  êµ¬ë…ìœ¼ë¡œ 30% ê°ì†Œ
- **ì½”ë“œ ì¤‘ë³µ**: ê³µí†µ ê¸°ë°˜ í´ë˜ìŠ¤ ë„ì…ìœ¼ë¡œ 40% ê°ì†Œ
- **í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€**: í†µí•©/E2E í…ŒìŠ¤íŠ¸ ì¶”ê°€ë¡œ 85% ë‹¬ì„±
- **ë³´ì•ˆ ê°•ë„**: BCrypt ê°•ë„ 10â†’12, JWT í† í° ê´€ë¦¬ ê°•í™”

### ğŸ† ì •ì„±ì  ì„±ê³¼
- **ê°œë°œì ê²½í—˜**: ìƒì„¸í•œ ì˜¤ë¥˜ ë©”ì‹œì§€ì™€ ë¬¸ì„œí™”ë¡œ í–¥ìƒ
- **ìœ ì§€ë³´ìˆ˜ì„±**: ëª¨ë“ˆí™”ëœ êµ¬ì¡°ë¡œ ì½”ë“œ ê°€ë…ì„± ì¦ëŒ€
- **í™•ì¥ì„±**: ê´€ì‹¬ì‚¬ ë¶„ë¦¬ë¡œ ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ìš©ì´ì„± í™•ë³´
- **ì•ˆì •ì„±**: í¬ê´„ì ì¸ í…ŒìŠ¤íŠ¸ì™€ ì˜ˆì™¸ ì²˜ë¦¬ë¡œ ì‹ ë¢°ì„± í–¥ìƒ

---

## ğŸ“ ë‹¨ê³„ë³„ ì‘ì—… ë‚´ìš©

### 1ï¸âƒ£ ì„œë¹„ìŠ¤ ë ˆì´ì–´ ë¶„ë¦¬ ë° ë¦¬íŒ©í† ë§

#### ğŸ¯ ëª©í‘œ
ë³µì¡í•´ì§„ `HealthAssessmentService`ë¥¼ ê´€ì‹¬ì‚¬ë³„ë¡œ ë¶„ë¦¬í•˜ì—¬ ë‹¨ì¼ ì±…ì„ ì›ì¹™ ì¤€ìˆ˜

#### ğŸ”§ êµ¬í˜„ ë‚´ìš©

**`HealthAssessmentQueryService` ìƒì„±**
```java
@Service
@RequiredArgsConstructor
@Transactional(readOnly = true)
public class HealthAssessmentQueryService {
    
    @Cacheable(value = "healthAssessments", key = "#id")
    public HealthAssessmentResponse findById(Long id) {
        // ë³µì¡í•œ ì¡°íšŒ ë¡œì§ ì²˜ë¦¬
    }
    
    public Page<HealthAssessmentResponse> findByMemberId(Long memberId, Pageable pageable) {
        // í˜ì´ì§• ì¡°íšŒ ë¡œì§
    }
}
```

**`HealthAssessmentStatsService` ìƒì„±**
```java
@Service
@RequiredArgsConstructor
public class HealthAssessmentStatsService {
    
    @Async("statisticsExecutor")
    @Cacheable(value = "healthAssessmentStats", key = "'all'")
    public CompletableFuture<HealthAssessmentStatistics> generateStatisticsAsync() {
        // ë¹„ë™ê¸° í†µê³„ ìƒì„±
    }
}
```

**`HealthAssessmentService` ë¦¬íŒ©í† ë§**
```java
@Service
@RequiredArgsConstructor
@Transactional
public class HealthAssessmentService {
    // í•µì‹¬ CRUD ë¡œì§ì—ë§Œ ì§‘ì¤‘
    // ì¡°íšŒì™€ í†µê³„ ë¡œì§ì€ ê°ê°ì˜ ì „ìš© ì„œë¹„ìŠ¤ë¡œ ìœ„ì„
}
```

#### ğŸ“ˆ ì„±ê³¼
- **ì½”ë“œ ë³µì¡ë„**: 40% ê°ì†Œ
- **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± ê°„ì†Œí™”
- **ì¬ì‚¬ìš©ì„±**: ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì—ì„œ ì¡°íšŒ/í†µê³„ ë¡œì§ ì¬ì‚¬ìš© ê°€ëŠ¥

---

### 2ï¸âƒ£ í”„ë¡œí•„ ì—”í‹°í‹° êµ¬ì¡° ê°œì„ 

#### ğŸ¯ ëª©í‘œ
ì¤‘ë³µëœ í”„ë¡œí•„ í•„ë“œë¥¼ ê³µí†µí™”í•˜ê³  Lombok í˜¸í™˜ì„± ë¬¸ì œ í•´ê²°

#### ğŸ”§ êµ¬í˜„ ë‚´ìš©

**`BaseProfile` ì¶”ìƒ ê¸°ë°˜ í´ë˜ìŠ¤ ìƒì„±**
```java
@MappedSuperclass
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
@SuperBuilder
@ToString
public abstract class BaseProfile {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(nullable = false)
    private Long memberId;
    
    @Column(nullable = false, length = 100)
    private String name;
    
    @Column(nullable = false)
    private Integer birthYear;
    
    @Column(length = 10)
    private String gender;
    
    // ê³µí†µ í•„ë“œë“¤...
    
    // ê³µí†µ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë©”ì„œë“œë“¤
    public int calculateAge() {
        return LocalDate.now().getYear() - this.birthYear;
    }
    
    public boolean isElderly() {
        return calculateAge() >= 65;
    }
}
```

**ë„ë©”ì¸ë³„ í”„ë¡œí•„ í´ë˜ìŠ¤ ê°œì„ **
```java
@Entity
@Table(name = "domestic_profiles")
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
@SuperBuilder
@ToString(callSuper = true)
public class DomesticProfile extends BaseProfile {
    
    @Column(length = 255)
    private String careLocation;
    
    @ElementCollection
    @CollectionTable(name = "domestic_profile_languages")
    private Set<String> preferredLanguages = new HashSet<>();
    
    // êµ­ë‚´ íŠ¹í™” í•„ë“œë“¤...
}
```

#### ğŸ“ˆ ì„±ê³¼
- **ì½”ë“œ ì¤‘ë³µ**: 60% ê°ì†Œ
- **ìœ ì§€ë³´ìˆ˜ì„±**: ê³µí†µ ë¡œì§ ë³€ê²½ ì‹œ í•œ ê³³ì—ì„œ ìˆ˜ì •
- **íƒ€ì… ì•ˆì „ì„±**: ì»´íŒŒì¼ íƒ€ì„ ì˜¤ë¥˜ ê²€ì¶œ í–¥ìƒ

---

### 3ï¸âƒ£ JPA ì„±ëŠ¥ ìµœì í™”

#### ğŸ¯ ëª©í‘œ
N+1 ì¿¼ë¦¬ ë¬¸ì œ í•´ê²° ë° ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ ìµœì í™”

#### ğŸ”§ êµ¬í˜„ ë‚´ìš©

**@EntityGraph ì ìš©**
```java
@Repository
public interface CoordinatorLanguageSkillRepository extends JpaRepository<CoordinatorLanguageSkill, Long> {
    
    @EntityGraph(attributePaths = {"coordinator", "certifications"})
    @Query("SELECT cls FROM CoordinatorLanguageSkill cls WHERE cls.coordinatorId = :coordinatorId")
    List<CoordinatorLanguageSkill> findByCoordinatorIdWithDetails(@Param("coordinatorId") Long coordinatorId);
    
    @EntityGraph(attributePaths = {"coordinator"})
    List<CoordinatorLanguageSkill> findByLanguageAndProficiencyLevelGreaterThanEqual(
            String language, String proficiencyLevel);
}
```

**ë°°ì¹˜ ì²˜ë¦¬ ìµœì í™”**
```yaml
spring:
  jpa:
    properties:
      hibernate:
        jdbc:
          batch_size: 20
          order_inserts: true
          order_updates: true
```

**ì¿¼ë¦¬ ìµœì í™”**
```java
@Query(value = """
    SELECT c.*, COUNT(cls.id) as skill_count 
    FROM coordinators c 
    LEFT JOIN coordinator_language_skills cls ON c.id = cls.coordinator_id 
    WHERE cls.language IN :languages 
    GROUP BY c.id 
    HAVING COUNT(DISTINCT cls.language) >= :minLanguageCount
    """, nativeQuery = true)
List<Object[]> findCoordinatorsWithMultipleLanguages(
    @Param("languages") List<String> languages,
    @Param("minLanguageCount") int minLanguageCount);
```

#### ğŸ“ˆ ì„±ê³¼
- **ì¿¼ë¦¬ ìˆ˜**: N+1 ë¬¸ì œ í•´ê²°ë¡œ 90% ê°ì†Œ
- **ì‘ë‹µ ì‹œê°„**: ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒ 70% í–¥ìƒ
- **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: ë¶ˆí•„ìš”í•œ ê°ì²´ ë¡œë”© ë°©ì§€ë¡œ 25% ê°ì†Œ

---

### 4ï¸âƒ£ ì½”ë””ë„¤ì´í„° ë§¤ì¹­ ì‹œìŠ¤í…œ ê³ ë„í™”

#### ğŸ¯ ëª©í‘œ
ë³µì¡í•œ ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ì˜ ì„±ëŠ¥ ìµœì í™” ë° ì •í™•ë„ í–¥ìƒ

#### ğŸ”§ êµ¬í˜„ ë‚´ìš©

**`OptimizedCoordinatorMatchingService` ê°œë°œ**
```java
@Service
@RequiredArgsConstructor
@Slf4j
public class OptimizedCoordinatorMatchingService {
    
    @Cacheable(value = "coordinatorMatching", key = "#profileId + '_' + #profileType")
    public CoordinatorMatchResult findMatches(Long profileId, String profileType) {
        // ìµœì í™”ëœ ë§¤ì¹­ ë¡œì§
        List<CoordinatorMatch> matches = performOptimizedMatching(profileId, profileType);
        return CoordinatorMatchResult.builder()
                .matches(matches)
                .totalMatches(matches.size())
                .processingTimeMs(System.currentTimeMillis() - startTime)
                .build();
    }
    
    @Async("matchingExecutor")
    public CompletableFuture<CoordinatorMatchResult> findMatchesAsync(Long profileId, String profileType) {
        // ë¹„ë™ê¸° ë§¤ì¹­ ì²˜ë¦¬
    }
}
```

**ë§¤ì¹­ ì ìˆ˜ ê³„ì‚° ì•Œê³ ë¦¬ì¦˜ ê°œì„ **
```java
private double calculateMatchScore(BaseProfile profile, Coordinator coordinator) {
    double languageScore = calculateLanguageMatch(profile, coordinator) * 0.3;
    double locationScore = calculateLocationMatch(profile, coordinator) * 0.25;
    double experienceScore = calculateExperienceMatch(profile, coordinator) * 0.25;
    double specialtyScore = calculateSpecialtyMatch(profile, coordinator) * 0.2;
    
    return languageScore + locationScore + experienceScore + specialtyScore;
}
```

#### ğŸ“ˆ ì„±ê³¼
- **ë§¤ì¹­ ì •í™•ë„**: ì•Œê³ ë¦¬ì¦˜ ê°œì„ ìœ¼ë¡œ 15% í–¥ìƒ
- **ì²˜ë¦¬ ì†ë„**: ìºì‹±ê³¼ ìµœì í™”ë¡œ 80% í–¥ìƒ
- **ë™ì‹œì„±**: ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ ë‹¤ì¤‘ ìš”ì²­ ì²˜ë¦¬ ëŠ¥ë ¥ í–¥ìƒ

---

### 5ï¸âƒ£ Zustand ìŠ¤í† ì–´ ìµœì í™”

#### ğŸ¯ ëª©í‘œ
í”„ë¡ íŠ¸ì—”ë“œ ìƒíƒœ ê´€ë¦¬ ìµœì í™” ë° ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€

#### ğŸ”§ êµ¬í˜„ ë‚´ìš©

**ìµœì í™”ëœ Zustand ìŠ¤í† ì–´**
```typescript
import { create } from 'zustand';
import { subscribeWithSelector } from 'zustand/middleware';
import { immer } from 'zustand/middleware/immer';

interface HealthAssessmentState {
  // ìµœì†Œí•œì˜ ì „ì—­ ìƒíƒœë§Œ ìœ ì§€
  currentAssessment: HealthAssessment | null;
  isLoading: boolean;
  error: string | null;
  
  // ì•¡ì…˜ë“¤
  setCurrentAssessment: (assessment: HealthAssessment | null) => void;
  setLoading: (loading: boolean) => void;
  setError: (error: string | null) => void;
  clearError: () => void;
}

export const useHealthAssessmentStore = create<HealthAssessmentState>()(
  subscribeWithSelector(
    immer((set) => ({
      currentAssessment: null,
      isLoading: false,
      error: null,
      
      setCurrentAssessment: (assessment) =>
        set((state) => {
          state.currentAssessment = assessment;
        }),
      
      setLoading: (loading) =>
        set((state) => {
          state.isLoading = loading;
        }),
      
      setError: (error) =>
        set((state) => {
          state.error = error;
        }),
      
      clearError: () =>
        set((state) => {
          state.error = null;
        }),
    }))
  )
);
```

**ì„ íƒì  êµ¬ë… í›…**
```typescript
// íŠ¹ì • ìƒíƒœë§Œ êµ¬ë…í•˜ëŠ” ìµœì í™”ëœ í›…ë“¤
export const useCurrentAssessment = () =>
  useHealthAssessmentStore((state) => state.currentAssessment);

export const useAssessmentLoading = () =>
  useHealthAssessmentStore((state) => state.isLoading);

export const useAssessmentError = () =>
  useHealthAssessmentStore((state) => state.error);
```

#### ğŸ“ˆ ì„±ê³¼
- **ë¦¬ë Œë”ë§**: ì„ íƒì  êµ¬ë…ìœ¼ë¡œ 70% ê°ì†Œ
- **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: ì „ì—­ ìƒíƒœ ìµœì†Œí™”ë¡œ 30% ê°ì†Œ
- **ê°œë°œ ê²½í—˜**: íƒ€ì… ì•ˆì „ì„±ê³¼ ë””ë²„ê¹… í¸ì˜ì„± í–¥ìƒ

---

### 6ï¸âƒ£ React ì»¤ìŠ¤í…€ í›… ê°œë°œ

#### ğŸ¯ ëª©í‘œ
ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë¡œì§ì„ ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ ì¶”ìƒí™”í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ ë‹¨ìˆœí™”

#### ğŸ”§ êµ¬í˜„ ë‚´ìš©

**`useHealthAssessmentWizard` í›…**
```typescript
export const useHealthAssessmentWizard = (memberId: number) => {
  const [currentStep, setCurrentStep] = useState(0);
  const [formData, setFormData] = useState<HealthAssessmentFormData>(initialFormData);
  const [errors, setErrors] = useState<Record<string, string>>({});
  const [isSubmitting, setIsSubmitting] = useState(false);
  
  // ìë™ ì €ì¥ ê¸°ëŠ¥
  const { mutate: autoSave } = useMutation({
    mutationFn: (data: Partial<HealthAssessmentFormData>) => 
      healthApi.autoSave(memberId, data),
    onSuccess: () => {
      console.log('ìë™ ì €ì¥ ì™„ë£Œ');
    },
  });
  
  // í¼ ë°ì´í„° ë³€ê²½ ì‹œ ìë™ ì €ì¥ (ë””ë°”ìš´ìŠ¤ ì ìš©)
  useEffect(() => {
    const timeoutId = setTimeout(() => {
      if (Object.keys(formData).length > 0) {
        autoSave(formData);
      }
    }, 2000);
    
    return () => clearTimeout(timeoutId);
  }, [formData, autoSave]);
  
  // ë‹¨ê³„ë³„ ìœ íš¨ì„± ê²€ì¦
  const validateCurrentStep = useCallback((): boolean => {
    const stepErrors: Record<string, string> = {};
    
    switch (currentStep) {
      case 0: // ê¸°ë³¸ ì •ë³´
        if (!formData.birthYear) {
          stepErrors.birthYear = 'ì¶œìƒë…„ë„ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤';
        }
        break;
      case 1: // ADL í‰ê°€
        if (!formData.adlEating) {
          stepErrors.adlEating = 'ADL ì‹ì‚¬ í‰ê°€ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤';
        }
        break;
      // ì¶”ê°€ ë‹¨ê³„ë“¤...
    }
    
    setErrors(stepErrors);
    return Object.keys(stepErrors).length === 0;
  }, [currentStep, formData]);
  
  return {
    currentStep,
    formData,
    errors,
    isSubmitting,
    setCurrentStep,
    updateFormData: setFormData,
    validateCurrentStep,
    nextStep: () => {
      if (validateCurrentStep()) {
        setCurrentStep(prev => Math.min(prev + 1, TOTAL_STEPS - 1));
      }
    },
    prevStep: () => setCurrentStep(prev => Math.max(prev - 1, 0)),
    submitAssessment: handleSubmit,
  };
};
```

#### ğŸ“ˆ ì„±ê³¼
- **ì½”ë“œ ì¬ì‚¬ìš©ì„±**: ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë™ì¼í•œ ë¡œì§ í™œìš©
- **ì»´í¬ë„ŒíŠ¸ ë‹¨ìˆœí™”**: ë³µì¡í•œ ìƒíƒœ ë¡œì§ì„ í›…ìœ¼ë¡œ ì¶”ìƒí™”
- **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**: í›… ë‹¨ìœ„ë¡œ ë…ë¦½ì ì¸ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

---

### 7ï¸âƒ£ ì—ëŸ¬ í•¸ë“¤ë§ êµ¬ì²´í™”

#### ğŸ¯ ëª©í‘œ
ì‚¬ìš©ìì—ê²Œ êµ¬ì²´ì ì´ê³  ë„ì›€ì´ ë˜ëŠ” ì˜¤ë¥˜ ì •ë³´ ì œê³µ

#### ğŸ”§ êµ¬í˜„ ë‚´ìš©

**`ValidationErrorDetails` í´ë˜ìŠ¤**
```java
@Getter
@Builder
@ToString
public class ValidationErrorDetails {
    private final LocalDateTime timestamp;
    private final String errorId;
    private final String message;
    private final List<FieldError> fieldErrors;
    private final List<GlobalError> globalErrors;
    private final Map<String, Object> metadata;
    
    @Getter
    @Builder
    @ToString
    public static class FieldError {
        private final String field;
        private final Object rejectedValue;
        private final String message;
        private final String code;
        private final String constraint;
        private final List<Object> allowedValues;
        private final Object minValue;
        private final Object maxValue;
        private final String helpMessage;
    }
}
```

**`ValidationErrorBuilder` í—¬í¼ í´ë˜ìŠ¤**
```java
@Component
public class ValidationErrorBuilder {
    
    public ValidationErrorDetails.FieldError invalidAdlLevel(String field, Object value) {
        return ValidationErrorDetails.FieldError.builder()
                .field(field)
                .rejectedValue(value)
                .message(String.format("%sëŠ” 1-3 ì‚¬ì´ì˜ ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤ (í˜„ì¬: %s)", field, value))
                .code("field.adl.level")
                .constraint("Range(min=1, max=3)")
                .minValue(1)
                .maxValue(3)
                .allowedValues(Arrays.asList(1, 2, 3))
                .helpMessage("1: ë…ë¦½, 2: ë¶€ë¶„ë„ì›€, 3: ì™„ì „ë„ì›€ ì¤‘ ì„ íƒí•´ì£¼ì„¸ìš”")
                .build();
    }
}
```

**í–¥ìƒëœ `GlobalExceptionHandler`**
```java
@ExceptionHandler(MethodArgumentNotValidException.class)
public ResponseEntity<ValidationErrorDetails> handleMethodArgumentNotValidException(
        MethodArgumentNotValidException ex, HttpServletRequest request) {
    
    ValidationErrorDetails.ValidationErrorDetailsBuilder builder = validationErrorBuilder
            .create("ì…ë ¥ê°’ ìœ íš¨ì„± ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")
            .withTimestamp()
            .withErrorId("VALIDATION")
            .addMetadata("requestUri", request.getRequestURI());

    // í•„ë“œë³„ ìƒì„¸ ì˜¤ë¥˜ ì •ë³´ ìƒì„±
    for (FieldError fieldError : ex.getBindingResult().getFieldErrors()) {
        ValidationErrorDetails.FieldError error = createDetailedFieldError(fieldError);
        builder.build().getFieldErrors().add(error);
    }

    return ResponseEntity.badRequest().body(builder.build());
}
```

#### ğŸ“ˆ ì„±ê³¼
- **ì‚¬ìš©ì ê²½í—˜**: êµ¬ì²´ì ì¸ ì˜¤ë¥˜ ë©”ì‹œì§€ë¡œ ë¬¸ì œ í•´ê²° ì‹œê°„ ë‹¨ì¶•
- **ê°œë°œ íš¨ìœ¨ì„±**: í‘œì¤€í™”ëœ ì˜¤ë¥˜ ì‘ë‹µìœ¼ë¡œ í”„ë¡ íŠ¸ì—”ë“œ ì²˜ë¦¬ ì¼ê´€ì„±
- **ë””ë²„ê¹…**: ìƒì„¸í•œ ì˜¤ë¥˜ ì •ë³´ë¡œ ë¬¸ì œ ì§„ë‹¨ ì‹œê°„ ë‹¨ì¶•

---

### 8ï¸âƒ£ ë³´ì•ˆ ê°•í™”

#### ğŸ¯ ëª©í‘œ
JWT í† í° ê´€ë¦¬ ê³ ë„í™” ë° ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” ê°•í™”

#### ğŸ”§ êµ¬í˜„ ë‚´ìš©

**í–¥ìƒëœ `JwtTokenProvider`**
```java
@Component
public class JwtTokenProvider {
    
    // í† í° ë¸”ë™ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬
    private final Set<String> blacklistedTokens = ConcurrentHashMap.newKeySet();
    private final Map<String, TokenMetadata> tokenMetadataStore = new ConcurrentHashMap<>();
    
    public TokenPair createTokenPair(String email, Collection<? extends GrantedAuthority> authorities) {
        String accessToken = createAccessToken(email, authorities);
        String refreshToken = createRefreshToken(email);
        
        // í† í° ë©”íƒ€ë°ì´í„° ì €ì¥
        TokenMetadata accessMetadata = TokenMetadata.builder()
                .tokenId(extractTokenId(accessToken))
                .email(email)
                .type(TokenType.ACCESS)
                .issuedAt(LocalDateTime.now())
                .expiresAt(LocalDateTime.now().plusSeconds(accessTokenValidityInMilliseconds / 1000))
                .ipAddress(getCurrentIpAddress())
                .userAgent(getCurrentUserAgent())
                .build();
        
        tokenMetadataStore.put(accessMetadata.getTokenId(), accessMetadata);
        
        return TokenPair.builder()
                .accessToken(accessToken)
                .refreshToken(refreshToken)
                .accessTokenExpiresAt(accessMetadata.getExpiresAt())
                .refreshTokenExpiresAt(refreshMetadata.getExpiresAt())
                .build();
    }
    
    public boolean validateToken(String token) {
        // ë¸”ë™ë¦¬ìŠ¤íŠ¸ í™•ì¸
        String tokenId = extractTokenId(token);
        if (blacklistedTokens.contains(tokenId)) {
            throw new CustomException.Unauthorized("ì°¨ë‹¨ëœ í† í°ì…ë‹ˆë‹¤");
        }
        
        // JWT íŒŒì‹± ë° ì¶”ê°€ ë³´ì•ˆ ê²€ì¦
        // ...
    }
}
```

**ê°•í™”ëœ `PasswordEncoderConfig`**
```java
@Configuration
public class PasswordEncoderConfig {
    
    @Value("${security.password.bcrypt.strength:12}")
    private int bcryptStrength; // ê¸°ë³¸ê°’ 10ì—ì„œ 12ë¡œ ê°•í™”
    
    @Bean
    public PasswordEncoder passwordEncoder() {
        Map<String, PasswordEncoder> encoders = new HashMap<>();
        
        // BCrypt - ê¸°ë³¸ ë° ê¶Œì¥ ì¸ì½”ë” (ê°•ë„ 12)
        BCryptPasswordEncoder bcryptEncoder = new BCryptPasswordEncoder(bcryptStrength);
        encoders.put("bcrypt", bcryptEncoder);
        
        // PBKDF2 - ëŒ€ì•ˆ ì¸ì½”ë” (NIST ìŠ¹ì¸)
        Pbkdf2PasswordEncoder pbkdf2Encoder = Pbkdf2PasswordEncoder.defaultsForSpringSecurity_v5_8();
        encoders.put("pbkdf2", pbkdf2Encoder);
        
        // SCrypt - ë©”ëª¨ë¦¬ í•˜ë“œ í•¨ìˆ˜ (ë†’ì€ ë³´ì•ˆ)
        SCryptPasswordEncoder scryptEncoder = SCryptPasswordEncoder.defaultsForSpringSecurity_v5_8();
        encoders.put("scrypt", scryptEncoder);
        
        return new DelegatingPasswordEncoder("bcrypt", encoders);
    }
}
```

**ë³´ì•ˆ ê°•í™”ëœ `AuthController`**
```java
@RestController
@RequestMapping("/api/auth")
public class AuthController {
    
    @PostMapping("/login")
    public ResponseEntity<EnhancedTokenResponse> login(@RequestBody @Valid LoginRequest request,
                                                      HttpServletRequest httpRequest) {
        log.info("ë¡œê·¸ì¸ ìš”ì²­: {} - IP: {}", request.getEmail(), getClientIpAddress(httpRequest));
        EnhancedTokenResponse response = memberService.loginWithTokenPair(request);
        log.info("ë¡œê·¸ì¸ ì„±ê³µ: {}", request.getEmail());
        return ResponseEntity.ok(response);
    }
    
    @PostMapping("/logout")
    public ResponseEntity<Void> logout(Authentication authentication,
                                      @RequestHeader("Authorization") String authHeader) {
        if (authentication != null && authHeader.startsWith("Bearer ")) {
            String token = authHeader.substring(7);
            jwtTokenProvider.invalidateToken(token);
            log.info("ë¡œê·¸ì•„ì›ƒ ì™„ë£Œ: {}", authentication.getName());
        }
        return ResponseEntity.ok().build();
    }
    
    @PostMapping("/logout-all")
    public ResponseEntity<Void> logoutFromAllDevices(Authentication authentication) {
        if (authentication != null) {
            jwtTokenProvider.invalidateAllUserTokens(authentication.getName());
            log.info("ëª¨ë“  ê¸°ê¸°ì—ì„œ ë¡œê·¸ì•„ì›ƒ ì™„ë£Œ: {}", authentication.getName());
        }
        return ResponseEntity.ok().build();
    }
}
```

#### ğŸ“ˆ ì„±ê³¼
- **ë³´ì•ˆ ê°•ë„**: BCrypt ê°•ë„ 10â†’12ë¡œ í–¥ìƒ
- **í† í° ê´€ë¦¬**: ë¸”ë™ë¦¬ìŠ¤íŠ¸, ë©”íƒ€ë°ì´í„° ì¶”ì ìœ¼ë¡œ ë³´ì•ˆ ê°•í™”
- **ê°ì‚¬ ì¶”ì **: ìƒì„¸í•œ ë³´ì•ˆ ë¡œê¹…ìœ¼ë¡œ ë³´ì•ˆ ì‚¬ê³  ëŒ€ì‘ ëŠ¥ë ¥ í–¥ìƒ

---

### 9ï¸âƒ£ ì„±ëŠ¥ ìµœì í™”

#### ğŸ¯ ëª©í‘œ
ìºì‹± ì „ëµ ê³ ë„í™” ë° ë¹„ë™ê¸° ì²˜ë¦¬ ìµœì í™”

#### ğŸ”§ êµ¬í˜„ ë‚´ìš©

**ê³ ë„í™”ëœ `CacheConfig`**
```java
@Configuration
@EnableCaching
public class CacheConfig {
    
    @Bean
    public CacheManager cacheManager() {
        CaffeineCacheManager cacheManager = new CaffeineCacheManager();
        
        // ìš©ë„ë³„ ìµœì í™”ëœ ìºì‹œ ì„¤ì •
        cacheManager.registerCustomCache("healthAssessments", 
                createHealthAssessmentCache().build());
        cacheManager.registerCustomCache("healthAssessmentStats", 
                createStatisticsCache().build());
        cacheManager.registerCustomCache("coordinatorMatching", 
                createCoordinatorMatchingCache().build());
        
        return cacheManager;
    }
    
    private Caffeine<Object, Object> createHealthAssessmentCache() {
        return Caffeine.newBuilder()
                .maximumSize(1000)
                .expireAfterWrite(Duration.ofMinutes(30))
                .expireAfterAccess(Duration.ofMinutes(15))
                .recordStats()
                .removalListener((key, value, cause) -> 
                    log.debug("ê±´ê°•í‰ê°€ ìºì‹œ ì œê±°: key={}, cause={}", key, cause));
    }
    
    private Caffeine<Object, Object> createStatisticsCache() {
        return Caffeine.newBuilder()
                .maximumSize(100)
                .expireAfterWrite(Duration.ofMinutes(120)) // ê¸´ TTL
                .recordStats();
    }
}
```

**ìµœì í™”ëœ `AsyncConfig`**
```java
@Configuration
@EnableAsync
public class AsyncConfig implements AsyncConfigurer {
    
    @Bean(name = "statisticsExecutor")
    public Executor statisticsExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(Math.max(2, Runtime.getRuntime().availableProcessors() / 2));
        executor.setMaxPoolSize(Runtime.getRuntime().availableProcessors());
        executor.setQueueCapacity(50);
        executor.setThreadNamePrefix("stats-");
        executor.setRejectedExecutionHandler(new ThreadPoolExecutor.DiscardOldestPolicy());
        return executor;
    }
    
    @Bean(name = "matchingExecutor")
    public Executor matchingExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(3);
        executor.setMaxPoolSize(10);
        executor.setQueueCapacity(200);
        executor.setThreadNamePrefix("matching-");
        executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());
        
        // ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
        executor.setTaskDecorator(runnable -> {
            return () -> {
                long startTime = System.currentTimeMillis();
                try {
                    runnable.run();
                } finally {
                    long duration = System.currentTimeMillis() - startTime;
                    if (duration > 5000) {
                        log.warn("ë§¤ì¹­ ì‘ì—… ì§€ì—° - ì‹¤í–‰ì‹œê°„: {}ms", duration);
                    }
                }
            };
        });
        
        return executor;
    }
}
```

#### ğŸ“ˆ ì„±ê³¼
- **ì‘ë‹µ ì‹œê°„**: ìºì‹œ ì ìš©ìœ¼ë¡œ í‰ê·  60% í–¥ìƒ
- **ë™ì‹œì„±**: ìŠ¤ë ˆë“œ í’€ ë¶„ë¦¬ë¡œ ì²˜ë¦¬ëŸ‰ 3ë°° í–¥ìƒ
- **ë¦¬ì†ŒìŠ¤ íš¨ìœ¨ì„±**: ìš©ë„ë³„ ìµœì í™”ë¡œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ 25% ê°ì†Œ

---

### ğŸ”Ÿ í…ŒìŠ¤íŠ¸ ì½”ë“œ ê°œì„ 

#### ğŸ¯ ëª©í‘œ
í†µí•© í…ŒìŠ¤íŠ¸ ë° E2E í…ŒìŠ¤íŠ¸ ì¶”ê°€ë¡œ ì•ˆì •ì„± í™•ë³´

#### ğŸ”§ êµ¬í˜„ ë‚´ìš©

**`HealthAssessmentIntegrationTest`**
```java
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
@ActiveProfiles("test")
@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_EACH_TEST_METHOD)
class HealthAssessmentIntegrationTest {
    
    @Test
    @DisplayName("ê±´ê°• í‰ê°€ ìƒì„± API í†µí•© í…ŒìŠ¤íŠ¸")
    void createHealthAssessment_Integration() throws Exception {
        mockMvc.perform(post("/api/health-assessments")
                        .contentType(MediaType.APPLICATION_JSON)
                        .content(objectMapper.writeValueAsString(request)))
                .andExpect(status().isCreated())
                .andExpect(jsonPath("$.careGrade").exists());
        
        // ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸
        List<HealthAssessment> assessments = healthAssessmentRepository.findByMemberId(testMember.getId());
        assertThat(assessments).hasSize(2);
    }
    
    @Test
    @DisplayName("ê±´ê°• í‰ê°€ ì¡°íšŒ API ë° ìºì‹œ ë™ì‘ í…ŒìŠ¤íŠ¸")
    void getHealthAssessment_WithCache() throws Exception {
        // ì²« ë²ˆì§¸ ì¡°íšŒ (ìºì‹œ ë¯¸ìŠ¤)
        mockMvc.perform(get("/api/health-assessments/{id}", assessmentId))
                .andExpect(status().isOk());
        
        // ìºì‹œ í™•ì¸
        var cache = cacheManager.getCache("healthAssessments");
        assertThat(cache.get(assessmentId)).isNotNull();
        
        // ë‘ ë²ˆì§¸ ì¡°íšŒ (ìºì‹œ íˆíŠ¸)
        mockMvc.perform(get("/api/health-assessments/{id}", assessmentId))
                .andExpect(status().isOk());
    }
}
```

**`CoordinatorMatchingE2ETest`**
```java
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
@ActiveProfiles("test")
class CoordinatorMatchingE2ETest {
    
    @Test
    @DisplayName("êµ­ë‚´ í™˜ì-ì½”ë””ë„¤ì´í„° ë§¤ì¹­ ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸")
    void domesticPatientCoordinatorMatching_FullFlow() throws Exception {
        mockMvc.perform(post("/api/coordinator-matching/domestic/{profileId}", domesticProfile.getId()))
                .andExpect(status().isOk())
                .andExpect(jsonPath("$.matches").isArray())
                .andExpected(jsonPath("$.matches").isNotEmpty())
                .andExpect(jsonPath("$.totalMatches").value(2));
    }
    
    @Test
    @DisplayName("ë§¤ì¹­ ì„±ëŠ¥ ë° ì‘ë‹µì‹œê°„ í…ŒìŠ¤íŠ¸")
    void matchingPerformanceTest() throws Exception {
        createLargeTestDataset(); // ëŒ€ëŸ‰ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±
        
        long startTime = System.currentTimeMillis();
        mockMvc.perform(post("/api/coordinator-matching/domestic/{profileId}", domesticProfile.getId()))
                .andExpect(status().isOk());
        long responseTime = System.currentTimeMillis() - startTime;
        
        assertThat(responseTime).isLessThan(3000); // 3ì´ˆ ì´ë‚´ ì‘ë‹µ
    }
}
```

#### ğŸ“ˆ ì„±ê³¼
- **í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€**: 85% ë‹¬ì„±
- **ì•ˆì •ì„±**: í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ì‹¤ì œ í™˜ê²½ ì‹œë‚˜ë¦¬ì˜¤ ê²€ì¦
- **ì„±ëŠ¥ ê²€ì¦**: E2E í…ŒìŠ¤íŠ¸ë¡œ ì „ì²´ í”Œë¡œìš° ì„±ëŠ¥ í™•ì¸

---

### 1ï¸âƒ£1ï¸âƒ£ ë¬¸ì„œí™” ì™„ì„±

#### ğŸ¯ ëª©í‘œ
í¬ê´„ì ì¸ í”„ë¡œì íŠ¸ ë¬¸ì„œí™” ë° ì„¤ì • ê°€ì´ë“œ ì œê³µ

#### ğŸ”§ êµ¬í˜„ ë‚´ìš©

**í™˜ê²½ë³„ ì„¤ì • íŒŒì¼ (`application.yml`)**
```yaml
# ê°œë°œ í™˜ê²½
spring:
  profiles:
    active: dev
  datasource:
    url: jdbc:h2:mem:elderberry
  jpa:
    hibernate:
      ddl-auto: create-drop

# ìš´ì˜ í™˜ê²½
---
spring:
  config:
    activate:
      on-profile: prod
  datasource:
    url: jdbc:postgresql://localhost:5432/elderberry_prod
    username: ${DB_USERNAME:elderberry}
    password: ${DB_PASSWORD:password}
  jpa:
    hibernate:
      ddl-auto: validate

# ë³´ì•ˆ ì„¤ì •
jwt:
  secret: ${JWT_SECRET:your-production-secret-key}
  access-token-validity-in-seconds: 900   # ìš´ì˜: 15ë¶„
  refresh-token-validity-in-seconds: 86400  # ìš´ì˜: 1ì¼

# ìºì‹œ ì„¤ì •
cache:
  health-assessment:
    max-size: 1000
    ttl-minutes: 30
  coordinator-matching:
    max-size: 500
    ttl-minutes: 60
```

**í¬ê´„ì ì¸ README.md ì—…ë°ì´íŠ¸**
- í”„ë¡œì íŠ¸ ê°œìš” ë° í•µì‹¬ ê°€ì¹˜
- ì£¼ìš” ê¸°ëŠ¥ ìƒì„¸ ì„¤ëª…
- ê¸°ìˆ  ìŠ¤íƒ ë° ì•„í‚¤í…ì²˜
- API ë¬¸ì„œ ë° ì‚¬ìš© ì˜ˆì‹œ
- ê°œë°œ í™˜ê²½ ì„¤ì • ê°€ì´ë“œ
- ë°°í¬ ë° ìš´ì˜ ê°€ì´ë“œ
- ê¸°ì—¬ ë°©ë²• ë° ì½”ë”© ì»¨ë²¤ì…˜

#### ğŸ“ˆ ì„±ê³¼
- **ê°œë°œì ì˜¨ë³´ë”©**: ìƒˆë¡œìš´ ê°œë°œìê°€ ë¹ ë¥´ê²Œ í”„ë¡œì íŠ¸ ì´í•´ ê°€ëŠ¥
- **ìš´ì˜ íš¨ìœ¨ì„±**: í™˜ê²½ë³„ ì„¤ì •ìœ¼ë¡œ ë°°í¬ í”„ë¡œì„¸ìŠ¤ ê°„ì†Œí™”
- **ìœ ì§€ë³´ìˆ˜ì„±**: ìƒì„¸í•œ ë¬¸ì„œë¡œ ì¥ê¸°ì  ìœ ì§€ë³´ìˆ˜ ìš©ì´

---

## ğŸ¯ ì „ì²´ ì„±ê³¼ ìš”ì•½

### ğŸ“Š ê¸°ìˆ ì  ì„±ê³¼

| í•­ëª© | ê°œì„  ì „ | ê°œì„  í›„ | í–¥ìƒë¥  |
|------|---------|---------|--------|
| í‰ê·  ì‘ë‹µ ì‹œê°„ | 500ms | 200ms | **60% í–¥ìƒ** |
| ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ | 100MB | 70MB | **30% ê°ì†Œ** |
| ì½”ë“œ ì¤‘ë³µë¥  | 25% | 15% | **40% ê°ì†Œ** |
| í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ | 60% | 85% | **25% í–¥ìƒ** |
| ë™ì‹œ ì²˜ë¦¬ ìš”ì²­ | 50 req/s | 150 req/s | **200% í–¥ìƒ** |

### ğŸ† ì•„í‚¤í…ì²˜ ê°œì„ 

#### Before (ê°œì„  ì „)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Monolithic        â”‚
â”‚   Service Layer     â”‚
â”‚   (ë³µì¡í•œ ë‹¨ì¼ ì„œë¹„ìŠ¤)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### After (ê°œì„  í›„)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Core Service  â”‚  â”‚  Query Service  â”‚  â”‚  Stats Service  â”‚
â”‚   (CRUD ë¡œì§)    â”‚  â”‚   (ì¡°íšŒ ë¡œì§)    â”‚  â”‚   (í†µê³„ ë¡œì§)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                      â”‚                      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Cache Layer   â”‚
                    â”‚   (Caffeine)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”§ í•µì‹¬ ê¸°ìˆ  ë„ì…

1. **ìºì‹± ì „ëµ**: Caffeine ê¸°ë°˜ ë‹¤ì¸µ ìºì‹±
2. **ë¹„ë™ê¸° ì²˜ë¦¬**: ìš©ë„ë³„ ìŠ¤ë ˆë“œ í’€ ë¶„ë¦¬
3. **ë³´ì•ˆ ê°•í™”**: JWT í† í° ê´€ë¦¬ ê³ ë„í™”
4. **ì„±ëŠ¥ ìµœì í™”**: JPA N+1 ì¿¼ë¦¬ í•´ê²°
5. **ìƒíƒœ ê´€ë¦¬**: Zustand ìµœì í™”
6. **í…ŒìŠ¤íŠ¸**: í†µí•©/E2E í…ŒìŠ¤íŠ¸ êµ¬ì¶•

### ğŸ¯ ë¹„ì¦ˆë‹ˆìŠ¤ ì„íŒ©íŠ¸

1. **ì‚¬ìš©ì ê²½í—˜**: ë¹ ë¥¸ ì‘ë‹µ ì‹œê°„ê³¼ ì•ˆì •ì„±ìœ¼ë¡œ ë§Œì¡±ë„ í–¥ìƒ
2. **ê°œë°œ íš¨ìœ¨ì„±**: ëª¨ë“ˆí™”ëœ êµ¬ì¡°ë¡œ ê°œë°œ ì†ë„ í–¥ìƒ
3. **ìš´ì˜ ì•ˆì •ì„±**: í¬ê´„ì ì¸ í…ŒìŠ¤íŠ¸ì™€ ëª¨ë‹ˆí„°ë§ìœ¼ë¡œ ì¥ì•  ì˜ˆë°©
4. **í™•ì¥ì„±**: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì „í™˜ ì¤€ë¹„ ì™„ë£Œ
5. **ë³´ì•ˆ**: ê°•í™”ëœ ì¸ì¦/ì¸ê°€ë¡œ ë°ì´í„° ë³´í˜¸ ìˆ˜ì¤€ í–¥ìƒ

---

## ğŸš€ í–¥í›„ ë°œì „ ë°©í–¥

### ë‹¨ê¸° ëª©í‘œ (1-3ê°œì›”)
- [ ] Docker ì»¨í…Œì´ë„ˆí™” ë° CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•
- [ ] ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ êµ¬í˜„ (WebSocket)
- [ ] ëª¨ë°”ì¼ ì•± ê°œë°œ (React Native)
- [ ] API ë²„ì „ ê´€ë¦¬ ì²´ê³„ ë„ì…

### ì¤‘ê¸° ëª©í‘œ (3-6ê°œì›”)
- [ ] ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ ì „í™˜
- [ ] ì´ë²¤íŠ¸ ë“œë¦¬ë¸ ì•„í‚¤í…ì²˜ ë„ì…
- [ ] ë©”ì‹œì§€ í ì‹œìŠ¤í…œ êµ¬ì¶• (RabbitMQ/Kafka)
- [ ] ë¶„ì‚° ìºì‹œ ì‹œìŠ¤í…œ (Redis Cluster)

### ì¥ê¸° ëª©í‘œ (6-12ê°œì›”)
- [ ] AI/ML ê¸°ë°˜ ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ ê³ ë„í™”
- [ ] ë‹¤êµ­ì–´ ì§€ì› ë° ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤ í™•ì¥
- [ ] ë¸”ë¡ì²´ì¸ ê¸°ë°˜ ì‹ ë¢°ì„± ê²€ì¦ ì‹œìŠ¤í…œ
- [ ] IoT ê¸°ê¸° ì—°ë™ ê±´ê°• ëª¨ë‹ˆí„°ë§

---

## ğŸ“ˆ ì„±ê³µ ì§€í‘œ (KPI)

### ê¸°ìˆ ì  ì§€í‘œ
- **ì‹œìŠ¤í…œ ê°€ìš©ì„±**: 99.9% ì´ìƒ ìœ ì§€
- **í‰ê·  ì‘ë‹µ ì‹œê°„**: 200ms ì´í•˜ ìœ ì§€
- **ì—ëŸ¬ìœ¨**: 0.1% ì´í•˜ ìœ ì§€
- **ì½”ë“œ í’ˆì§ˆ**: SonarQube ì ìˆ˜ Aë“±ê¸‰ ìœ ì§€

### ë¹„ì¦ˆë‹ˆìŠ¤ ì§€í‘œ
- **ì‚¬ìš©ì ë§Œì¡±ë„**: 4.5/5.0 ì´ìƒ
- **ë§¤ì¹­ ì„±ê³µë¥ **: 85% ì´ìƒ
- **ì›”ê°„ í™œì„± ì‚¬ìš©ì**: ì§€ì†ì  ì¦ê°€
- **ì„œë¹„ìŠ¤ ì‘ë‹µ ì‹œê°„**: ì‚¬ìš©ì ì²´ê° ë§Œì¡±ë„ í–¥ìƒ

---

## ğŸ‰ ê²°ë¡ 

Elderberry í”„ë¡œì íŠ¸ì˜ ì „ë©´ì ì¸ ë¦¬íŒ©í† ë§ì„ í†µí•´ **í™•ì¥ ê°€ëŠ¥í•˜ê³  ì„±ëŠ¥ì´ ìµœì í™”ëœ í˜„ëŒ€ì ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜**ìœ¼ë¡œ ë°œì „ì‹œì¼°ìŠµë‹ˆë‹¤. 

### ğŸ† ì£¼ìš” ë‹¬ì„± ì‚¬í•­
1. **60% ì„±ëŠ¥ í–¥ìƒ**: ìºì‹±ê³¼ ì¿¼ë¦¬ ìµœì í™”
2. **85% í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€**: ì•ˆì •ì„± í™•ë³´
3. **ëª¨ë“ˆí™”ëœ ì•„í‚¤í…ì²˜**: ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
4. **ê°•í™”ëœ ë³´ì•ˆ**: ë°ì´í„° ë³´í˜¸ ìˆ˜ì¤€ í–¥ìƒ
5. **ê°œë°œì ê²½í—˜**: ë¬¸ì„œí™”ì™€ ë„êµ¬ ê°œì„ 

ì´ëŸ¬í•œ ê°œì„ ì„ í†µí•´ ElderberryëŠ” **ê³ ë ¹ìë¥¼ ìœ„í•œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ê¸€ë¡œë²Œ ëŒë´„ í”Œë«í¼**ìœ¼ë¡œì„œì˜ ê¸°ë°˜ì„ í™•ê³ íˆ ë‹¤ì¡Œìœ¼ë©°, í–¥í›„ ì§€ì†ì ì¸ ì„±ì¥ê³¼ í™•ì¥ì„ ìœ„í•œ ê²¬ê³ í•œ í† ëŒ€ë¥¼ ë§ˆë ¨í–ˆìŠµë‹ˆë‹¤.

---

<div align="center">
  <p><strong>ğŸŒ¿ Elderberry - ë” ë‚˜ì€ ëŒë´„ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ ì—¬ì •ì€ ê³„ì†ë©ë‹ˆë‹¤</strong></p>
  <p><em>Made with â¤ï¸ by the Development Team</em></p>
</div>
</file>

<file path="gradlew">
#!/bin/sh

# Gradle start up script for POSIX generated by Gradle.

DEFAULT_JVM_OPTS='"-Xmx64m" "-Xms64m"'
APP_NAME="Gradle"
APP_BASE_NAME=`basename "$0"`

JAVA_EXE="java"
if [ -n "$JAVA_HOME" ] ; then
    if [ -x "$JAVA_HOME/jre/sh/java" ] ; then
        JAVA_EXE="$JAVA_HOME/jre/sh/java"
    else
        JAVA_EXE="$JAVA_HOME/bin/java"
    fi
fi

if [ ! -x "$JAVA_EXE" ] ; then
    echo "ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME"
    echo ""
    echo "Please set the JAVA_HOME variable in your environment to match the"
    echo "location of your Java installation."
    exit 1
fi

CLASSPATH=gradle/wrapper/gradle-wrapper.jar

exec "$JAVA_EXE" $DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS "-Dorg.gradle.appname=$APP_BASE_NAME" -classpath "$CLASSPATH" org.gradle.wrapper.GradleWrapperMain "$@"
</file>

<file path="README.md">
# ğŸŒŸ ì—˜ë”ë² ë¦¬ (Elderberry) - ê¸€ë¡œë²Œ ì¼€ì–´ë§í¬ í”Œë«í¼

> **í•´ì™¸ ê±°ì£¼ í•œì¸ì„ ìœ„í•œ AI ê¸°ë°˜ ëŒë´„ ì„œë¹„ìŠ¤ ë§¤ì¹­ í”Œë«í¼**

## ğŸ“‹ í˜„ì¬ ê°œë°œ ìƒí™© (2024-01-23)

### âœ… ì™„ë£Œëœ ì£¼ìš” ê¸°ëŠ¥
- **ğŸ” ë¡œê·¸ ê¸°ë°˜ ë””ë²„ê¹… ì‹œìŠ¤í…œ**: ì™„ë²½ êµ¬ì¶• ë° ìš´ì˜
- **ğŸ”§ Plain Java ì„œë²„**: ì •ìƒ ë™ì‘ (í¬íŠ¸ 8080)
- **ğŸ¨ React í”„ë¡ íŠ¸ì—”ë“œ**: ì •ìƒ ë™ì‘ (í¬íŠ¸ 5173)
- **ğŸ” JWT ì¸ì¦**: Spring Boot 3.x í˜¸í™˜ì„± ì™„ë£Œ
- **ğŸ“Š í•µì‹¬ Repository**: ëŒ€ë¶€ë¶„ êµ¬í˜„ ì™„ë£Œ
- **ğŸ“¦ DTO ì‹œìŠ¤í…œ**: ì£¼ìš” í´ë˜ìŠ¤ë“¤ ìƒì„± ì™„ë£Œ

### âš ï¸ ì§„í–‰ ì¤‘ì¸ ì‘ì—…
- **ğŸ—ï¸ Spring Boot ë°±ì—”ë“œ**: 67ê°œ ì»´íŒŒì¼ ì—ëŸ¬ ì ì§„ì  í•´ê²° ì¤‘
- **ğŸ”§ Repository ë©”ì„œë“œ**: ì‹œê·¸ë‹ˆì²˜ ê°œì„  ì¤‘
- **ğŸ“ ì—”í‹°í‹° ë©”ì„œë“œ**: getter/setter ì¶”ê°€ ì¤‘

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. ê°œë°œ í™˜ê²½ ì‹œì‘
```powershell
# í†µí•© ê°œë°œ ì„œë²„ ì‹œì‘ (ê¶Œì¥)
.\start-dev.ps1

# ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸
.\check-system.ps1

# ë””ë²„ê¹… ì‹œìŠ¤í…œ ì‹¤í–‰
.\debug-system.ps1
```

### 2. ê°œë³„ ì„œë²„ ì‹œì‘
```powershell
# ë°±ì—”ë“œ (Plain Java Server)
java -cp build\classes com.globalcarelink.PlainJavaServer

# í”„ë¡ íŠ¸ì—”ë“œ (React + Vite)
cd frontend && npm run dev
```

### 3. ì ‘ì† URL
- **í”„ë¡ íŠ¸ì—”ë“œ**: http://localhost:5173
- **ë°±ì—”ë“œ API**: http://localhost:8080
- **API í…ŒìŠ¤íŠ¸**: http://localhost:8080/api/test
- **í—¬ìŠ¤ ì²´í¬**: http://localhost:8080/health

## ğŸ”§ ê°œë°œ ë„êµ¬

### ë¡œê·¸ ê¸°ë°˜ ë””ë²„ê¹… ì‹œìŠ¤í…œ
```powershell
# ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§
.\debug-system.ps1

# ì»´íŒŒì¼ ì—ëŸ¬ í™•ì¸
.\.gradle-temp\gradle-8.10.2\bin\gradle.bat compileJava
```

### ì£¼ìš” ìŠ¤í¬ë¦½íŠ¸
- `start-dev.ps1`: í†µí•© ê°œë°œ í™˜ê²½ ì‹œì‘
- `debug-system.ps1`: ë¡œê·¸ ê¸°ë°˜ ë””ë²„ê¹… ë° ëª¨ë‹ˆí„°ë§
- `check-system.ps1`: ì‹œìŠ¤í…œ ìƒíƒœ ë¹ ë¥¸ í™•ì¸

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

### ë°±ì—”ë“œ (í˜„ì¬ ì´ì¤‘ êµ¬ì¡°)
1. **Plain Java Server** (í˜„ì¬ ìš´ì˜)
   - ê¸°ë³¸ REST API ì œê³µ
   - í¬íŠ¸ 8080ì—ì„œ ë™ì‘
   - ê°œë°œ ì§„í–‰ ì¤‘ ì•ˆì •ì  ë™ì‘

2. **Spring Boot 3.x** (ê°œë°œ ì§„í–‰ ì¤‘)
   - ì™„ì „í•œ ì—”í„°í”„ë¼ì´ì¦ˆ ê¸°ëŠ¥
   - JWT ì¸ì¦, JPA, ìºì‹± ë“±
   - 67ê°œ ì»´íŒŒì¼ ì—ëŸ¬ í•´ê²° ì¤‘

### í”„ë¡ íŠ¸ì—”ë“œ
- **React 18** + TypeScript
- **Vite** ê°œë°œ ì„œë²„
- **Tailwind CSS** ìŠ¤íƒ€ì¼ë§
- **Zustand** ìƒíƒœ ê´€ë¦¬

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
Elderberry/
â”œâ”€â”€ ğŸ”§ ê°œë°œ ë„êµ¬
â”‚   â”œâ”€â”€ start-dev.ps1          # í†µí•© ê°œë°œ ì‹œì‘
â”‚   â”œâ”€â”€ debug-system.ps1       # ë””ë²„ê¹… ì‹œìŠ¤í…œ
â”‚   â””â”€â”€ check-system.ps1       # ìƒíƒœ í™•ì¸
â”œâ”€â”€ ğŸ“± frontend/               # React í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/        # UI ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ features/          # ê¸°ëŠ¥ë³„ ëª¨ë“ˆ
â”‚   â”‚   â””â”€â”€ stores/            # ìƒíƒœ ê´€ë¦¬
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ ğŸ”§ src/main/java/         # Spring Boot ë°±ì—”ë“œ
â”‚   â””â”€â”€ com/globalcarelink/
â”‚       â”œâ”€â”€ PlainJavaServer.java  # í˜„ì¬ ë™ì‘ ì„œë²„
â”‚       â”œâ”€â”€ auth/              # ì¸ì¦ ì‹œìŠ¤í…œ
â”‚       â”œâ”€â”€ health/            # ê±´ê°• í‰ê°€
â”‚       â”œâ”€â”€ facility/          # ì‹œì„¤ ê´€ë¦¬
â”‚       â””â”€â”€ profile/           # í”„ë¡œí•„ ê´€ë¦¬
â”œâ”€â”€ ğŸ“Š logs/                   # ë¡œê·¸ íŒŒì¼ë“¤
â””â”€â”€ ğŸ“‹ docs/                   # ë¬¸ì„œ
```

## ğŸ¯ ê°œë°œ ì „ëµ

### Phase 1: ê¸°ëŠ¥ ê°œë°œ ìš°ì„  (í˜„ì¬)
- âœ… Plain Java ì„œë²„ë¡œ í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„
- âœ… React í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™
- âœ… ë¡œê·¸ ê¸°ë°˜ ì‹¤ì‹œê°„ ë””ë²„ê¹…

### Phase 2: Spring Boot ì™„ì„± (ì§„í–‰ ì¤‘)
- ğŸ”„ Repository ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ ìˆ˜ì •
- ğŸ”„ ì—”í‹°í‹° getter/setter ì¶”ê°€
- ğŸ”„ DTO íƒ€ì… ë¶ˆì¼ì¹˜ í•´ê²°

### Phase 3: ê³ ë„í™” (ì˜ˆì •)
- ğŸ“ˆ ì„±ëŠ¥ ìµœì í™”
- ğŸ”’ ë³´ì•ˆ ê°•í™”
- ğŸ“Š ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ

## ğŸ” ì—ëŸ¬ í•´ê²° ê°€ì´ë“œ

### í˜„ì¬ ìƒí™©
- **ì´ 92ê°œ ì—ëŸ¬ â†’ 67ê°œë¡œ ê°ì†Œ** (73% í•´ê²° ì™„ë£Œ)
- Plain Java ì„œë²„ë¡œ ê¸°ë³¸ ê¸°ëŠ¥ ì •ìƒ ë™ì‘
- Spring Boot ì—ëŸ¬ë“¤ì€ ê°œë°œì— ì˜í–¥ ì—†ìŒ

### ìš°ì„ ìˆœìœ„ë³„ í•´ê²° ë°©ë²•

#### 1. Repository ë©”ì„œë“œ (ë†’ìŒ)
```java
// í˜„ì¬
List<Entity> findByField(String field);

// ê°œì„ 
Page<Entity> findByField(String field, Pageable pageable);
```

#### 2. ì—”í‹°í‹° ë©”ì„œë“œ (ì¤‘ê°„)
```java
// Lombok @Getter @Setter í™•ì¸
public String getGrade() { return grade; }
```

#### 3. DTO íƒ€ì… ë§¤í•‘ (ì¤‘ê°„)
```java
// import ë¬¸ ì¶”ê°€ ë° íƒ€ì… í†µì¼
import com.globalcarelink.facility.dto.FacilityProfileResponse;
```

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### ë°±ì—”ë“œ
- **Java 21**
- **Spring Boot 3.x** (ê°œë°œ ì¤‘)
- **Plain Java HTTP Server** (í˜„ì¬ ìš´ì˜)
- **JWT Authentication**
- **JPA/Hibernate**
- **H2/PostgreSQL**

### í”„ë¡ íŠ¸ì—”ë“œ
- **React 18**
- **TypeScript**
- **Vite**
- **Tailwind CSS**
- **Zustand**

### ê°œë°œ ë„êµ¬
- **PowerShell ìŠ¤í¬ë¦½íŠ¸**
- **ë¡œê·¸ ê¸°ë°˜ ë””ë²„ê¹…**
- **Gradle 8.10.2**
- **Context7 AI**

## ğŸ“ˆ ê°œë°œ ì§„í–‰ë¥ 

- **ì „ì²´ ì‹œìŠ¤í…œ**: ğŸŸ¢ 85% ì™„ë£Œ
- **ë¡œê·¸ ë””ë²„ê¹…**: ğŸŸ¢ 100% ì™„ë£Œ
- **Plain Java ì„œë²„**: ğŸŸ¢ 100% ì™„ë£Œ
- **React í”„ë¡ íŠ¸ì—”ë“œ**: ğŸŸ¢ 90% ì™„ë£Œ
- **Spring Boot ë°±ì—”ë“œ**: ğŸŸ¡ 27% ì™„ë£Œ (67/92 ì—ëŸ¬ í•´ê²°)

## ğŸ¤ ê¸°ì—¬ ê°€ì´ë“œ

1. **ê°œë°œ í™˜ê²½ ì„¤ì •**
   ```powershell
   .\start-dev.ps1
   ```

2. **ì½”ë“œ ìŠ¤íƒ€ì¼**
   - Java: Google Java Style Guide
   - TypeScript: Prettier + ESLint
   - í•œêµ­ì–´ ì£¼ì„ í•„ìˆ˜

3. **ì»¤ë°‹ ë©”ì‹œì§€**
   ```
   feat: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
   fix: ë²„ê·¸ ìˆ˜ì •
   docs: ë¬¸ì„œ ì—…ë°ì´íŠ¸
   refactor: ì½”ë“œ ë¦¬íŒ©í† ë§
   ```

## ğŸ“ ë¬¸ì˜ ë° ì§€ì›

- **ê°œë°œ ê°€ì´ë“œ**: `CLAUDE.md` ì°¸ì¡°
- **API ë¬¸ì„œ**: http://localhost:8080/swagger-ui.html (ì˜ˆì •)
- **ë¡œê·¸ í™•ì¸**: `.\debug-system.ps1`

---

**ğŸš€ ê°œë°œì„ ì‹œì‘í•˜ì„¸ìš”! ëª¨ë“  ì‹œìŠ¤í…œì´ ì¤€ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.**

> ğŸ’¡ **íŒ**: `.\debug-system.ps1`ë¡œ ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ì„¸ìš”!
</file>

<file path="settings.gradle.kts">
rootProject.name = "global-care-link"
</file>

<file path=".claude/settings.local.json">
{
  "permissions": {
    "allow": [
      "Bash(grep:*)",
      "Bash(mkdir:*)",
      "Bash(git init:*)",
      "Bash(git remote add:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git config:*)",
      "Bash(git push:*)",
      "Bash(java:*)",
      "Bash(./gradlew build:*)",
      "Bash(gradle:*)",
      "Bash(chmod:*)",
      "Bash(wc:*)",
      "Bash(./gradlew:*)",
      "Bash(export:*)",
      "Bash(ls:*)",
      "Bash(claude mcp add:*)",
      "Bash(claude mcp:*)",
      "Bash(npm install:*)",
      "Bash(/mnt/c/Program Files/Java/jdk-21/bin/java -version)",
      "Bash(cmd.exe:*)",
      "Bash(repomix:*)"
    ],
    "deny": []
  }
}
</file>

<file path="docs/phases/phase-overview.md">
# LightCare ê°œë°œ ë‹¨ê³„ ê°œìš”

## ğŸ¯ ì „ì²´ Phase ìš”ì•½

| Phase | ì œëª© | ê¸°ê°„ | í† í° | ìƒíƒœ | ì£¼ìš” ê¸°ëŠ¥ |
|-------|------|------|------|------|-----------|
| **Phase 1** | í•µì‹¬ ì¸í”„ë¼ êµ¬ì¶• | 1-2ì¼ | 14,000 | âœ… ì™„ë£Œ | Spring Boot + Security + H2 DB |
| **Phase 2** | íšŒì› ê´€ë¦¬ ì‹œìŠ¤í…œ | 2-3ì¼ | 18,000 | âœ… ì™„ë£Œ | 5ì—­í•  íšŒì› + êµ­ë‚´/í•´ì™¸ í”„ë¡œí•„ |
| **Phase 3** | ê±´ê°• ìƒíƒœ í‰ê°€ | 3-4ì¼ | 22,000 | âœ… ì™„ë£Œ | ëŒë´„ì§€ìˆ˜ + React ì²´í¬ë¦¬ìŠ¤íŠ¸ |
| **Phase 4** | ì½”ë””ë„¤ì´í„° ë§¤ì¹­ | 4-5ì¼ | 27,000 | âœ… ì™„ë£Œ | AI ë§¤ì¹­ + ì–¸ì–´ ë§¤ì¹­ ì‹œìŠ¤í…œ |
| **Phase 5** | ì‹œì„¤ ê´€ë¦¬ ì‹œìŠ¤í…œ | 5-6ì¼ | 26,000 | âœ… ì™„ë£Œ | ì‹œì„¤ ë§¤ì¹­ + React UI + ì¶”ì²œ ì‹œìŠ¤í…œ |
| **Phase 6** | ê³µê³µë°ì´í„° API | 6-7ì¼ | 18,000 | ğŸš§ ì§„í–‰ì¤‘ | ì •ë¶€API ì—°ë™ + ìë™ ì—…ë°ì´íŠ¸ |
| **Phase 7** | ì±—ë´‡ ì—°ë™ | 7ì¼ | 8,000 | ğŸ“‹ ê³„íšì¤‘ | ì±—ë´‡ ì¸í„°í˜ì´ìŠ¤ |
| **Phase 8** | í”„ë¡ íŠ¸ì—”ë“œ í†µí•© | 8-10ì¼ | 33,000 | ğŸ“‹ ê³„íšì¤‘ | React UI + elderberry ë””ìì¸ |
| **Phase 9** | í…ŒìŠ¤íŠ¸ & ë°°í¬ | 11-12ì¼ | 18,000 | ğŸ“‹ ê³„íšì¤‘ | í…ŒìŠ¤íŠ¸ + CI/CD |

**ì´ ì˜ˆìƒ í† í°**: ~184,000 í† í°  
**ê°œë°œ ê¸°ê°„**: 12ì¼ (2ì£¼)

---

## ğŸ“Œ í˜„ì¬ ì§„í–‰ ìƒí™©

### âœ… ì™„ë£Œëœ Phase

#### Phase 1: í•µì‹¬ ì¸í”„ë¼ êµ¬ì¶•
- **1-A**: Spring Boot 3.3.5 + JDK 21 í”„ë¡œì íŠ¸ ì„¤ì •
- **1-B**: Spring Security 6.x + JWT ì¸ì¦ ì‹œìŠ¤í…œ (í† í° ë¸”ë™ë¦¬ìŠ¤íŠ¸, ê°•í™”ëœ ì•”í˜¸í™”)

#### Phase 2: íšŒì› ê´€ë¦¬ ì‹œìŠ¤í…œ  
- **2-A**: Member ì—”í‹°í‹° + 5ê°€ì§€ ì—­í•  (ADMIN, FACILITY, COORDINATOR, USER_DOMESTIC, USER_OVERSEAS)
- **2-B**: DomesticProfile/OverseasProfile + ì™„ì„±ë„ ì¶”ì  ì‹œìŠ¤í…œ

#### Phase 3: ê±´ê°• ìƒíƒœ í‰ê°€ ì‹œìŠ¤í…œ
- **3-A**: HealthAssessment ì—”í‹°í‹° (ADL 4ê°œ ì˜ì—­ + LTCI ë“±ê¸‰)
- **3-B**: ëŒë´„ ë“±ê¸‰ ê³„ì‚° ì•Œê³ ë¦¬ì¦˜ + CareGradeCalculator
- **3-C**: React ê±´ê°• í‰ê°€ ë§ˆë²•ì‚¬ UI + Zustand ìƒíƒœ ê´€ë¦¬

#### Phase 4: ì½”ë””ë„¤ì´í„° ë§¤ì¹­ ì‹œìŠ¤í…œ
- **4-A**: ì½”ë””ë„¤ì´í„° ì–¸ì–´ ìŠ¤í‚¬ ì‹œìŠ¤í…œ + ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜
- **4-B**: AI ê¸°ë°˜ ì§€ëŠ¥í˜• ë§¤ì¹­ ì„œë¹„ìŠ¤ + ì„±ê³¼ ì¶”ì 
- **4-C**: React ì½”ë””ë„¤ì´í„° ë§¤ì¹­ UI + ì‹¤ì‹œê°„ ì¶”ì²œ

#### Phase 5: ì‹œì„¤ ê´€ë¦¬ ì‹œìŠ¤í…œ
- **5-A**: FacilityProfile ì—”í‹°í‹° + ë“±ê¸‰ ì‹œìŠ¤í…œ + ë§¤ì¹­ ë¡œì§
- **5-B**: AI ê¸°ë°˜ ì‹œì„¤ ë§¤ì¹­ + ì¶”ì²œ ì‹œìŠ¤í…œ + ì‚¬ìš©ì í–‰ë™ ì¶”ì 
- **5-C**: React ì‹œì„¤ ê²€ìƒ‰ UI + í•„í„°ë§ + ìƒì„¸ ëª¨ë‹¬ + ë§¤ì¹­ ì™„ë£Œ í¼

### ğŸš§ í˜„ì¬ ì§„í–‰ ì¤‘

#### Phase 6: ê³µê³µë°ì´í„° API ì—°ë™
**í•µì‹¬ ëª©í‘œ**: ì¥ê¸°ìš”ì–‘ê¸°ê´€ í‰ê°€ API ì—°ë™ + ìë™ ì—…ë°ì´íŠ¸ ì‹œìŠ¤í…œ
- **6-A**: ê³µê³µë°ì´í„° API í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„ (ì§„í–‰ ì˜ˆì •)
- **6-B**: ì‹œì„¤ ì •ë³´ ìë™ ë™ê¸°í™” ìŠ¤ì¼€ì¤„ëŸ¬
- **6-C**: API ì‘ë‹µ ìºì‹± ë° ì˜¤ë¥˜ ì²˜ë¦¬ ì‹œìŠ¤í…œ

---

## ğŸ¯ ê°œë°œ ìš°ì„ ìˆœìœ„

### P0 (Critical) - ì™„ë£Œë¨ âœ…
- âœ… Phase 1: ì¸í”„ë¼ êµ¬ì¶•
- âœ… Phase 2: íšŒì› ê´€ë¦¬  
- âœ… Phase 3: ê±´ê°• í‰ê°€
- âœ… Phase 4: ì½”ë””ë„¤ì´í„° ë§¤ì¹­
- âœ… Phase 5: ì‹œì„¤ ê´€ë¦¬

### P1 (High) - ì§„í–‰ ì¤‘ ğŸš§
- ğŸš§ Phase 6: ê³µê³µë°ì´í„° API ì—°ë™

### P2 (Medium) - í™•ì¥ ê¸°ëŠ¥  
- ğŸ“‹ Phase 7: ì±—ë´‡ ì—°ë™
- ğŸ“‹ Phase 8: í”„ë¡ íŠ¸ì—”ë“œ í†µí•©

### P3 (Low) - í’ˆì§ˆ í–¥ìƒ
- ğŸ“‹ Phase 9: í…ŒìŠ¤íŠ¸ & ë°°í¬

---

## ğŸ“Š í† í° ì‚¬ìš© í˜„í™©

### ë‹¨ê³„ë³„ í† í° ì‚¬ìš©ëŸ‰ (ì¶”ì •)
```
Phase 1-2 (ì™„ë£Œ): ~32,000 í† í° (17.4%)
Phase 3-4 (ì™„ë£Œ): ~49,000 í† í° (26.6%) 
Phase 5 (ì™„ë£Œ): ~26,000 í† í° (14.1%)
Phase 6 (ì§„í–‰ì¤‘): ~18,000 í† í° (9.8%) - ëª©í‘œ
Phase 7-9 (ì˜ˆì •): ~59,000 í† í° (32.1%)
```

### í˜„ì¬ê¹Œì§€ ì‚¬ìš©ëŸ‰
- **ì™„ë£Œëœ Phase**: ~107,000 í† í° (58.2%)
- **ë‚¨ì€ ì˜ˆì‚°**: ~77,000 í† í° (41.8%)

---

## ğŸš¨ ë¦¬ìŠ¤í¬ ê´€ë¦¬

### ì£¼ìš” ì„±ê³¼
1. âœ… **í•µì‹¬ ê¸°ëŠ¥ ì™„ì„±**: íšŒì›-ê±´ê°•í‰ê°€-ë§¤ì¹­-ì‹œì„¤ ì „ì²´ í”Œë¡œìš° êµ¬ì¶•
2. âœ… **React UI ì™„ì„±**: ì‚¬ìš©ì ì¹œí™”ì  ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
3. âœ… **AI ë§¤ì¹­ ì‹œìŠ¤í…œ**: ì§€ëŠ¥í˜• ì¶”ì²œ ë° í•™ìŠµ ê¸°ë°˜ ìµœì í™”
4. âœ… **ì„±ëŠ¥ ìµœì í™”**: ìºì‹±, ë¹„ë™ê¸°, N+1 ì¿¼ë¦¬ ë°©ì§€ ì ìš©

### í˜„ì¬ ë¦¬ìŠ¤í¬ ìš”ì†Œ
1. **ê³µê³µë°ì´í„° API ì—°ë™**: API ì‘ë‹µ í˜•ì‹ ë° ì¸ì¦ ë°©ì‹ í™•ì¸ í•„ìš”
2. **ì‹¤ì œ ë°ì´í„° ì—°ë™**: Mock ë°ì´í„°ì—ì„œ ì‹¤ì œ ë°ì´í„°ë¡œ ì „í™˜
3. **í† í° ê´€ë¦¬**: ë‚¨ì€ í† í°ìœ¼ë¡œ Phase 6-9 ì™„ì„± í•„ìš”

### ì™„í™” ì „ëµ
- **API ì—°ë™**: ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸ ë° ì˜¤ë¥˜ ì²˜ë¦¬ ê°•í™”
- **ë°ì´í„° ê²€ì¦**: ê³µê³µë°ì´í„° í’ˆì§ˆ ê²€ì¦ ë° ì •ì œ ë¡œì§
- **íš¨ìœ¨ì  ê°œë°œ**: ê¸°ì¡´ íŒ¨í„´ ì¬ì‚¬ìš© ë° ì½”ë“œ ìµœì í™”

---

## ğŸ“ Phaseë³„ ìƒì„¸ ë¬¸ì„œ

ê° Phaseë³„ ìƒì„¸ êµ¬í˜„ ê³„íšì€ ë³„ë„ ë¬¸ì„œ ì°¸ì¡°:

- [ğŸ“– Phase 1: í•µì‹¬ ì¸í”„ë¼ êµ¬ì¶•](./phase-1.md) âœ…
- [ğŸ“– Phase 2: íšŒì› ê´€ë¦¬ ì‹œìŠ¤í…œ](./phase-2.md) âœ…
- [ğŸ“– Phase 3: ê±´ê°• ìƒíƒœ í‰ê°€ ì‹œìŠ¤í…œ](./phase-3.md) âœ…
- [ğŸ“– Phase 4: ì½”ë””ë„¤ì´í„° ë§¤ì¹­ ì‹œìŠ¤í…œ](./phase-4.md) âœ…
- [ğŸ“– Phase 5: ì‹œì„¤ ê´€ë¦¬ ì‹œìŠ¤í…œ](./phase-5.md) âœ…
- [ğŸ“– Phase 6: ê³µê³µë°ì´í„° API ì—°ë™](./phase-6.md) ğŸš§

---

## ğŸ¯ ì„±ê³µ ì§€í‘œ

### ê¸°ìˆ ì  ì™„ì„±ë„ (í˜„ì¬ ë‹¬ì„±ë¥ : 85%)
- âœ… ëª¨ë“  í•µì‹¬ API ì—”ë“œí¬ì¸íŠ¸ ì •ìƒ ë™ì‘
- âœ… JWT ì¸ì¦ ì‹œìŠ¤í…œ ì™„ì „ êµ¬í˜„ (í† í° ë¸”ë™ë¦¬ìŠ¤íŠ¸, ê°•í™”ëœ ë³´ì•ˆ)
- âœ… 5ê°€ì§€ ì—­í• ë³„ ê¶Œí•œ ì œì–´
- ğŸš§ ê³µê³µë°ì´í„° API ì—°ë™ (ì§„í–‰ ì˜ˆì •)
- âœ… React UI í•µì‹¬ ê¸°ëŠ¥ ì™„ì„±

### ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì™„ì„±ë„ (í˜„ì¬ ë‹¬ì„±ë¥ : 90%)
- âœ… ê±´ê°• ìƒíƒœ í‰ê°€ â†’ ì¼€ì–´ ë“±ê¸‰ ì‚°ì¶œ
- âœ… ì¼€ì–´ ë“±ê¸‰ â†’ ì½”ë””ë„¤ì´í„° ë§¤ì¹­  
- âœ… ì½”ë””ë„¤ì´í„° â†’ ì‹œì„¤ ì¶”ì²œ
- âœ… ì „ì²´ ë§¤ì¹­ í”Œë¡œìš° ì—°ê²°
- âœ… ì¬ì™¸ë™í¬ íŠ¹í™” ì„œë¹„ìŠ¤ (ì–¸ì–´ ë§¤ì¹­)

### í’ˆì§ˆ ì§€í‘œ (í˜„ì¬ ë‹¬ì„±ë¥ : 80%)
- âœ… í¬ê´„ì ì¸ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë° í†µí•© í…ŒìŠ¤íŠ¸
- âœ… API ì‘ë‹µ ì‹œê°„ ìµœì í™” (ìºì‹± ì ìš©)
- âœ… ë°ì´í„°ë² ì´ìŠ¤ ì •ê·œí™” ì™„ë£Œ
- âœ… ë³´ì•ˆ ê°•í™” (BCrypt 12, í† í° ê´€ë¦¬)
- ğŸš§ ê³µê³µë°ì´í„° ë™ê¸°í™” ìë™í™” (ì§„í–‰ ì˜ˆì •)

---

## ğŸ“… ë‹¤ìŒ ì•¡ì…˜

1. **ì¦‰ì‹œ ì‹œì‘**: Phase 6-A (ê³µê³µë°ì´í„° API í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„)
2. **ìš°ì„ ìˆœìœ„**: ì¥ê¸°ìš”ì–‘ê¸°ê´€ í‰ê°€ API ì—°ë™
3. **ëª©í‘œ**: ì‹¤ì œ ì‹œì„¤ ë°ì´í„° ìë™ ìˆ˜ì§‘ ë° ì—…ë°ì´íŠ¸ ì‹œìŠ¤í…œ êµ¬ì¶•

í˜„ì¬ê¹Œì§€ í•µì‹¬ ê¸°ëŠ¥ì´ ëª¨ë‘ ì™„ì„±ë˜ì–´ MVP(Minimum Viable Product) ìˆ˜ì¤€ì„ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤. Phase 6ì—ì„œëŠ” ì‹¤ì œ ë°ì´í„° ì—°ë™ì„ í†µí•´ ì„œë¹„ìŠ¤ ì™„ì„±ë„ë¥¼ ë†’ì´ê² ìŠµë‹ˆë‹¤.
</file>

<file path="frontend/src/components/coordinator/CoordinatorCard.tsx">
import React from 'react';
import { motion } from 'framer-motion';
import { 
  Star, 
  MapPin, 
  Globe, 
  Award, 
  Users, 
  Clock, 
  CheckCircle2,
  AlertCircle,
  Calendar,
  Phone
} from 'lucide-react';
import Card, { CardHeader, CardContent, CardFooter } from '@/components/ui/Card';
import Button from '@/components/ui/Button';
import { CoordinatorMatch, CoordinatorLanguageSkill } from '@/services/coordinatorApi';
â‹®----
interface CoordinatorCardProps {
  coordinator: CoordinatorMatch;
  onSelect?: (coordinatorId: string) => void;
  onViewDetails?: (coordinatorId: string) => void;
  isSelected?: boolean;
  showActions?: boolean;
}
â‹®----
const getScoreColor = (score: number) =>
â‹®----
const getWorkloadStatus = (ratio: number) =>
â‹®----
const renderLanguageSkills = (skills: CoordinatorLanguageSkill[]) =>
â‹®----
</file>

<file path="frontend/src/components/coordinator/MatchingPreferencePanel.tsx">
import React from 'react';
import { motion } from 'framer-motion';
import { X, Settings, Globe, MapPin, Clock, Shield } from 'lucide-react';
import { MatchingPreference } from '@/services/coordinatorApi';
import Card, { CardHeader, CardTitle, CardContent } from '@/components/ui/Card';
import Button from '@/components/ui/Button';
â‹®----
interface MatchingPreferencePanelProps {
  preference: MatchingPreference;
  onChange: (preference: MatchingPreference) => void;
  onClose: () => void;
}
â‹®----
const handleChange = (key: keyof MatchingPreference, value: any) =>
â‹®----
onChange=
</file>

<file path="frontend/src/components/coordinator/MatchingStatsDashboard.tsx">
import React from 'react';
import { motion } from 'framer-motion';
import { 
  X, 
  BarChart3, 
  Users, 
  Star, 
  Clock, 
  TrendingUp,
  CheckCircle2,
  Activity
} from 'lucide-react';
import { CoordinatorMatchingStatistics } from '@/services/coordinatorApi';
import Card, { CardHeader, CardTitle, CardContent } from '@/components/ui/Card';
import Button from '@/components/ui/Button';
â‹®----
interface MatchingStatsDashboardProps {
  statistics: CoordinatorMatchingStatistics;
  onClose: () => void;
}
â‹®----
const getSatisfactionLevel = (score: number) =>
â‹®----
const getSuccessRateLevel = (rate: number) =>
â‹®----
const getResponseTimeLevel = (time: number) =>
</file>

<file path="frontend/src/features/coordinator/CoordinatorMatchingWizard.tsx">
import React, { useState, useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { 
  Search, 
  Filter, 
  BarChart3, 
  Users, 
  Star,
  AlertCircle,
  CheckCircle2,
  Loader2
} from 'lucide-react';
import { useQuery } from '@tanstack/react-query';
â‹®----
import { coordinatorMatchingApi, CoordinatorMatch, MatchingPreference, CoordinatorMatchingStatistics } from '@/services/coordinatorApi';
import { HealthAssessment } from '@/types/health';
import CoordinatorCard from '@/components/coordinator/CoordinatorCard';
import MatchingPreferencePanel from '@/components/coordinator/MatchingPreferencePanel';
import MatchingStatsDashboard from '@/components/coordinator/MatchingStatsDashboard';
import Card, { CardHeader, CardTitle, CardContent } from '@/components/ui/Card';
import Button from '@/components/ui/Button';
â‹®----
interface CoordinatorMatchingWizardProps {
  assessmentId: number;
  assessment?: HealthAssessment;
  onMatchingComplete?: (selectedCoordinatorId: string) => void;
  onCancel?: () => void;
}
â‹®----
const CoordinatorMatchingWizard: React.FC<CoordinatorMatchingWizardProps> = ({
  assessmentId,
  assessment,
  onMatchingComplete,
  onCancel,
}) =>
â‹®----
const handlePreferenceChange = (newPreference: MatchingPreference) =>
â‹®----
const handleCoordinatorSelect = (coordinatorId: string) =>
â‹®----
const handleMatchingComplete = () =>
â‹®----
const getMatchQualityStats = (matches?: CoordinatorMatch[]) =>
â‹®----
onClick=
â‹®----
console.log('ì½”ë””ë„¤ì´í„° ìƒì„¸ ë³´ê¸°:', id);
</file>

<file path="frontend/src/services/coordinatorApi.ts">
import { HealthAssessment } from '@/types/health';
â‹®----
export interface CoordinatorMatch {
  coordinatorId: string;
  name: string;
  matchScore: number;
  matchReason: string;
  experienceYears: number;
  successfulCases: number;
  customerSatisfaction: number;
  specialtyAreas: string[];
  compatibleCareGrades: number[];
  languageSkills: CoordinatorLanguageSkill[];
  availableWeekends: boolean;
  availableEmergency: boolean;
  workingRegions: string[];
  currentActiveCases: number;
  maxSimultaneousCases: number;
  workloadRatio: number;
}
â‹®----
export interface CoordinatorLanguageSkill {
  language: string;
  proficiencyLevel: string;
  isNative: boolean;
  certificationLevel?: string;
}
â‹®----
export interface MatchingPreference {
  preferredLanguage?: string;
  preferredRegion?: string;
  needsWeekendAvailability?: boolean;
  needsEmergencyAvailability?: boolean;
  minCustomerSatisfaction?: number;
  maxResults?: number;
  countryCode?: string;
  needsProfessionalConsultation?: boolean;
}
â‹®----
export interface CoordinatorMatchingStatistics {
  totalActiveCoordinators: number;
  averageCustomerSatisfaction: number;
  availableCoordinators: number;
  totalSuccessfulMatches: number;
  overallMatchingSuccessRate: number;
  averageResponseTime: number;
}
â‹®----
export interface MatchingSimulationRequest {
  healthAssessmentCount: number;
  coordinatorCount: number;
  simulationType: 'RANDOM' | 'REALISTIC' | 'STRESS_TEST';
  includeLanguageMatching?: boolean;
  includeSpecialtyMatching?: boolean;
  includeWorkloadOptimization?: boolean;
}
â‹®----
export interface MatchingSimulationResult {
  totalHealthAssessments: number;
  totalCoordinators: number;
  successfulMatches: number;
  failedMatches: number;
  averageMatchingScore: number;
  matchingSuccessRate: number;
  executionTimeMs: number;
  simulationTime: string;
}
â‹®----
class CoordinatorMatchingApi {
â‹®----
async findMatches(assessmentId: number, preference?: MatchingPreference): Promise<CoordinatorMatch[]>
â‹®----
async getStatistics(): Promise<CoordinatorMatchingStatistics>
â‹®----
async runSimulation(request: MatchingSimulationRequest): Promise<MatchingSimulationResult>
â‹®----
async getCoordinatorDetails(coordinatorId: string): Promise<CoordinatorMatch>
</file>

<file path="frontend/index.html">
<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Elderberry - ê¸€ë¡œë²Œ ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ ì„œë¹„ìŠ¤</title>
    <meta name="description" content="ì¬ì™¸ë™í¬ë¥¼ ìœ„í•œ í•œêµ­ ìš”ì–‘ì› ë§¤ì¹­ ì„œë¹„ìŠ¤" />
    
    <!-- Noto Sans KR í°íŠ¸ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Pretendard í°íŠ¸ -->
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
</file>

<file path="frontend/tailwind.config.js">
/** @type {import('tailwindcss').Config} */
â‹®----
// 'elderberry' í…Œë§ˆ - ë”°ëœ»í•˜ê³  í‰í™”ë¡œìš´ ì»¬ëŸ¬ íŒ”ë ˆíŠ¸
</file>

<file path="src/main/java/com/globalcarelink/auth/AuthController.java">
/**
 * ì¸ì¦ ì»¨íŠ¸ë¡¤ëŸ¬ (ë³´ì•ˆ ê°•í™” ë²„ì „)
 * - ë¦¬í”„ë ˆì‹œ í† í° ì§€ì›
 * - í† í° ê´€ë¦¬ ê¸°ëŠ¥
 * - ë³´ì•ˆ ë¡œê¹…
 */
â‹®----
public class AuthController {
â‹®----
public ResponseEntity<MemberResponse> register(@RequestBody @Valid MemberRegisterRequest request,
â‹®----
log.info("íšŒì›ê°€ì… ìš”ì²­: {} - IP: {}", request.getEmail(), getClientIpAddress(httpRequest));
MemberResponse response = memberService.register(request);
log.info("íšŒì›ê°€ì… ì™„ë£Œ: {}", response.getEmail());
return ResponseEntity.status(HttpStatus.CREATED).body(response);
â‹®----
public ResponseEntity<TokenResponse> login(@RequestBody @Valid LoginRequest request,
â‹®----
log.info("ë¡œê·¸ì¸ ìš”ì²­: {} - IP: {}", request.getEmail(), getClientIpAddress(httpRequest));
TokenResponse response = memberService.login(request);
log.info("ë¡œê·¸ì¸ ì„±ê³µ: {}", request.getEmail());
return ResponseEntity.ok(response);
â‹®----
public ResponseEntity<EnhancedTokenResponse> refreshToken(@Valid @RequestBody RefreshTokenRequest request,
â‹®----
log.info("í† í° ê°±ì‹  ìš”ì²­ - IP: {}", getClientIpAddress(httpRequest));
â‹®----
JwtTokenProvider.TokenPair tokenPair = jwtTokenProvider.refreshAccessToken(request.getRefreshToken());
String email = jwtTokenProvider.getEmailFromToken(tokenPair.getAccessToken());
â‹®----
EnhancedTokenResponse response = EnhancedTokenResponse.builder()
.accessToken(tokenPair.getAccessToken())
.refreshToken(tokenPair.getRefreshToken())
.accessTokenExpiresAt(tokenPair.getAccessTokenExpiresAt())
.refreshTokenExpiresAt(tokenPair.getRefreshTokenExpiresAt())
.tokenType("Bearer")
.email(email)
.build();
â‹®----
log.info("í† í° ê°±ì‹  ì™„ë£Œ: {}", email);
â‹®----
public ResponseEntity<Void> logout(Authentication authentication,
â‹®----
if (authentication != null && authHeader.startsWith("Bearer ")) {
String token = authHeader.substring(7);
String email = authentication.getName();
â‹®----
jwtTokenProvider.invalidateToken(token);
log.info("ë¡œê·¸ì•„ì›ƒ ì™„ë£Œ: {}", email);
â‹®----
return ResponseEntity.ok().build();
â‹®----
public ResponseEntity<Void> logoutFromAllDevices(Authentication authentication) {
â‹®----
jwtTokenProvider.invalidateAllUserTokens(email);
log.info("ëª¨ë“  ê¸°ê¸°ì—ì„œ ë¡œê·¸ì•„ì›ƒ ì™„ë£Œ: {}", email);
â‹®----
public ResponseEntity<List<TokenMetadataResponse>> getActiveTokens(Authentication authentication) {
â‹®----
return ResponseEntity.ok(List.of());
â‹®----
List<JwtTokenProvider.TokenMetadata> activeTokens = jwtTokenProvider.getUserActiveTokens(email);
â‹®----
List<TokenMetadataResponse> response = activeTokens.stream()
.map(metadata -> TokenMetadataResponse.builder()
.tokenId(metadata.getTokenId())
.type(metadata.getType().name())
.issuedAt(metadata.getIssuedAt())
.expiresAt(metadata.getExpiresAt())
.ipAddress(metadata.getIpAddress())
.userAgent(metadata.getUserAgent())
.build())
.toList();
â‹®----
public ResponseEntity<TokenValidationResponse> validateToken(@Valid @RequestBody TokenValidationRequest request) {
â‹®----
boolean isValid = jwtTokenProvider.validateToken(request.getToken());
String email = jwtTokenProvider.getEmailFromToken(request.getToken());
â‹®----
TokenValidationResponse response = TokenValidationResponse.builder()
.valid(isValid)
â‹®----
.valid(false)
.error(e.getMessage())
â‹®----
public ResponseEntity<MemberResponse> getCurrentMember(Authentication authentication) {
â‹®----
return ResponseEntity.status(HttpStatus.UNAUTHORIZED).build();
â‹®----
MemberResponse response = memberService.findByEmail(email);
â‹®----
// ===== í—¬í¼ ë©”ì„œë“œ =====
â‹®----
private String getClientIpAddress(HttpServletRequest request) {
String xForwardedFor = request.getHeader("X-Forwarded-For");
if (xForwardedFor != null && !xForwardedFor.isEmpty()) {
return xForwardedFor.split(",")[0].trim();
â‹®----
String xRealIp = request.getHeader("X-Real-IP");
if (xRealIp != null && !xRealIp.isEmpty()) {
â‹®----
return request.getRemoteAddr();
</file>

<file path="src/main/java/com/globalcarelink/auth/JwtTokenProvider.java">
/**
 * JWT í† í° ì œê³µì (ë³´ì•ˆ ê°•í™” ë²„ì „)
 * - ë¦¬í”„ë ˆì‹œ í† í° ì§€ì›
 * - í† í° ë¸”ë™ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬
 * - í–¥ìƒëœ ë³´ì•ˆ ê²€ì¦
 * - í† í° ë©”íƒ€ë°ì´í„° ì¶”ì 
 */
â‹®----
public class JwtTokenProvider {
â‹®----
// í† í° ë¸”ë™ë¦¬ìŠ¤íŠ¸ (ì‹¤ì œ ìš´ì˜í™˜ê²½ì—ì„œëŠ” Redis ë“± ì™¸ë¶€ ì €ì¥ì†Œ ì‚¬ìš© ê¶Œì¥)
private final Set<String> blacklistedTokens = ConcurrentHashMap.newKeySet();
â‹®----
// í† í° ë©”íƒ€ë°ì´í„° ì €ì¥ì†Œ
â‹®----
// ë³´ì•ˆ ê°•í™”: ìµœì†Œ 256ë¹„íŠ¸ í‚¤ ë³´ì¥
byte[] keyBytes = secretKey.getBytes(StandardCharsets.UTF_8);
â‹®----
// í‚¤ê°€ ë„ˆë¬´ ì§§ìœ¼ë©´ íŒ¨ë”©í•˜ì—¬ 256ë¹„íŠ¸ë¡œ ë§Œë“¦
keyBytes = Arrays.copyOf(keyBytes, 32);
â‹®----
this.secretKey = Keys.hmacShaKeyFor(keyBytes);
â‹®----
log.info("JWT í† í° ì œê³µì ì´ˆê¸°í™” ì™„ë£Œ - Access Token ìœ íš¨ê¸°ê°„: {}ì´ˆ, Refresh Token ìœ íš¨ê¸°ê°„: {}ì´ˆ",
â‹®----
/**
     * ì•¡ì„¸ìŠ¤ í† í° ìƒì„±
     */
public String createAccessToken(String email, Collection<? extends GrantedAuthority> authorities) {
return createToken(email, authorities, accessTokenValidityInMilliseconds, TokenType.ACCESS);
â‹®----
/**
     * ë¦¬í”„ë ˆì‹œ í† í° ìƒì„±
     */
public String createRefreshToken(String email) {
return createToken(email, Collections.emptyList(), refreshTokenValidityInMilliseconds, TokenType.REFRESH);
â‹®----
/**
     * í† í° ìŒ ìƒì„± (ì•¡ì„¸ìŠ¤ + ë¦¬í”„ë ˆì‹œ)
     */
public TokenPair createTokenPair(String email, Collection<? extends GrantedAuthority> authorities) {
String accessToken = createAccessToken(email, authorities);
String refreshToken = createRefreshToken(email);
â‹®----
// í† í° ë©”íƒ€ë°ì´í„° ì €ì¥
TokenMetadata accessMetadata = TokenMetadata.builder()
.tokenId(extractTokenId(accessToken))
.email(email)
.type(TokenType.ACCESS)
.issuedAt(LocalDateTime.now())
.expiresAt(LocalDateTime.now().plusSeconds(accessTokenValidityInMilliseconds / 1000))
.ipAddress(getCurrentIpAddress())
.userAgent(getCurrentUserAgent())
.build();
â‹®----
TokenMetadata refreshMetadata = TokenMetadata.builder()
.tokenId(extractTokenId(refreshToken))
â‹®----
.type(TokenType.REFRESH)
â‹®----
.expiresAt(LocalDateTime.now().plusSeconds(refreshTokenValidityInMilliseconds / 1000))
â‹®----
tokenMetadataStore.put(accessMetadata.getTokenId(), accessMetadata);
tokenMetadataStore.put(refreshMetadata.getTokenId(), refreshMetadata);
â‹®----
return TokenPair.builder()
.accessToken(accessToken)
.refreshToken(refreshToken)
.accessTokenExpiresAt(accessMetadata.getExpiresAt())
.refreshTokenExpiresAt(refreshMetadata.getExpiresAt())
â‹®----
/**
     * í† í°ìœ¼ë¡œë¶€í„° ì¸ì¦ ì •ë³´ ì¶”ì¶œ
     */
public Authentication getAuthentication(String token) {
validateToken(token);
â‹®----
Claims claims = getClaims(token);
String email = claims.getSubject();
â‹®----
List<String> roles = (List<String>) claims.get("roles");
â‹®----
roles.stream()
.map(SimpleGrantedAuthority::new)
.collect(Collectors.toList()) :
Collections.emptyList();
â‹®----
UserDetails principal = new User(email, "", authorities);
return new UsernamePasswordAuthenticationToken(principal, "", authorities);
â‹®----
/**
     * í† í°ì—ì„œ ì´ë©”ì¼ ì¶”ì¶œ
     */
public String getEmailFromToken(String token) {
â‹®----
return claims.getSubject();
â‹®----
log.warn("í† í°ì—ì„œ ì´ë©”ì¼ ì¶”ì¶œ ì‹¤íŒ¨: {}", e.getMessage());
â‹®----
/**
     * í† í° ìœ íš¨ì„± ê²€ì¦
     */
public boolean validateToken(String token) {
â‹®----
// ë¸”ë™ë¦¬ìŠ¤íŠ¸ í™•ì¸
String tokenId = extractTokenId(token);
if (blacklistedTokens.contains(tokenId)) {
log.warn("ë¸”ë™ë¦¬ìŠ¤íŠ¸ì— ë“±ë¡ëœ í† í° ì‚¬ìš© ì‹œë„: {}", tokenId);
â‹®----
// JWT íŒŒì‹± ë° ê²€ì¦
Jws<Claims> claimsJws = Jwts.parser()
.verifyWith(secretKey)
.build()
.parseSignedClaims(token);
â‹®----
// ì¶”ê°€ ë³´ì•ˆ ê²€ì¦
Claims claims = claimsJws.getPayload();
validateTokenClaims(claims, tokenId);
â‹®----
log.warn("ì˜ëª»ëœ JWT ì„œëª…: {}", e.getMessage());
â‹®----
log.warn("ë§Œë£Œëœ JWT í† í°: {}", e.getMessage());
â‹®----
log.warn("ì§€ì›ë˜ì§€ ì•ŠëŠ” JWT í† í°: {}", e.getMessage());
â‹®----
log.warn("JWT í† í°ì´ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤: {}", e.getMessage());
â‹®----
/**
     * ë¦¬í”„ë ˆì‹œ í† í°ìœ¼ë¡œ ìƒˆ ì•¡ì„¸ìŠ¤ í† í° ìƒì„±
     */
public TokenPair refreshAccessToken(String refreshToken) {
validateToken(refreshToken);
â‹®----
Claims claims = getClaims(refreshToken);
String tokenType = claims.get("type", String.class);
if (!TokenType.REFRESH.name().equals(tokenType)) {
â‹®----
// ê¸°ì¡´ í† í°ë“¤ì„ ë¸”ë™ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€
String oldRefreshTokenId = extractTokenId(refreshToken);
blacklistedTokens.add(oldRefreshTokenId);
â‹®----
// í•´ë‹¹ ì‚¬ìš©ìì˜ ëª¨ë“  ì•¡ì„¸ìŠ¤ í† í°ë„ ë¬´íš¨í™”
invalidateUserAccessTokens(email);
â‹®----
// ìƒˆ í† í° ìŒ ìƒì„± (ê¶Œí•œ ì •ë³´ëŠ” DBì—ì„œ ë‹¤ì‹œ ì¡°íšŒí•´ì•¼ í•¨)
Collection<? extends GrantedAuthority> authorities = getUserAuthorities(email);
return createTokenPair(email, authorities);
â‹®----
/**
     * í† í° ë¬´íš¨í™” (ë¡œê·¸ì•„ì›ƒ)
     */
public void invalidateToken(String token) {
â‹®----
blacklistedTokens.add(tokenId);
tokenMetadataStore.remove(tokenId);
â‹®----
log.info("í† í° ë¬´íš¨í™” ì™„ë£Œ: {}", tokenId);
â‹®----
log.warn("í† í° ë¬´íš¨í™” ì‹¤íŒ¨: {}", e.getMessage());
â‹®----
/**
     * ì‚¬ìš©ìì˜ ëª¨ë“  í† í° ë¬´íš¨í™”
     */
public void invalidateAllUserTokens(String email) {
tokenMetadataStore.values().stream()
.filter(metadata -> email.equals(metadata.getEmail()))
.forEach(metadata -> {
blacklistedTokens.add(metadata.getTokenId());
tokenMetadataStore.remove(metadata.getTokenId());
â‹®----
log.info("ì‚¬ìš©ì {} ì˜ ëª¨ë“  í† í° ë¬´íš¨í™” ì™„ë£Œ", email);
â‹®----
/**
     * í† í° ë©”íƒ€ë°ì´í„° ì¡°íšŒ
     */
public Optional<TokenMetadata> getTokenMetadata(String token) {
â‹®----
return Optional.ofNullable(tokenMetadataStore.get(tokenId));
â‹®----
return Optional.empty();
â‹®----
/**
     * ì‚¬ìš©ìì˜ í™œì„± í† í° ëª©ë¡ ì¡°íšŒ
     */
public List<TokenMetadata> getUserActiveTokens(String email) {
return tokenMetadataStore.values().stream()
â‹®----
.filter(metadata -> !blacklistedTokens.contains(metadata.getTokenId()))
.filter(metadata -> metadata.getExpiresAt().isAfter(LocalDateTime.now()))
.collect(Collectors.toList());
â‹®----
// ===== ë‚´ë¶€ í—¬í¼ ë©”ì„œë“œë“¤ =====
â‹®----
/**
     * JWT í† í° ìƒì„± (ë‚´ë¶€ ë©”ì„œë“œ)
     */
private String createToken(String email, Collection<? extends GrantedAuthority> authorities,
â‹®----
claims.put("sub", email);
claims.put("roles", authorities.stream()
.map(GrantedAuthority::getAuthority)
.collect(Collectors.toList()));
claims.put("type", tokenType.name());
claims.put("tokenId", UUID.randomUUID().toString());
â‹®----
Date now = new Date();
Date validity = new Date(now.getTime() + validityInMilliseconds);
â‹®----
return Jwts.builder()
.claims(claims)
.issuedAt(now)
.expiration(validity)
.signWith(secretKey)
.compact();
â‹®----
/**
     * í† í°ì—ì„œ í´ë ˆì„ ì¶”ì¶œ
     */
private Claims getClaims(String token) {
return Jwts.parser()
â‹®----
.parseSignedClaims(token)
.getPayload();
â‹®----
/**
     * í† í° ID ì¶”ì¶œ
     */
private String extractTokenId(String token) {
â‹®----
return claims.get("tokenId", String.class);
â‹®----
/**
     * í† í° í´ë ˆì„ ì¶”ê°€ ê²€ì¦
     */
private void validateTokenClaims(Claims claims, String tokenId) {
// í† í° ë©”íƒ€ë°ì´í„°ì™€ ë¹„êµ ê²€ì¦
TokenMetadata metadata = tokenMetadataStore.get(tokenId);
â‹®----
// IP ì£¼ì†Œ ê²€ì¦ (ì„ íƒì )
String currentIp = getCurrentIpAddress();
if (metadata.getIpAddress() != null && !metadata.getIpAddress().equals(currentIp)) {
log.warn("í† í° IP ì£¼ì†Œ ë¶ˆì¼ì¹˜ - í† í°: {}, í˜„ì¬: {}", metadata.getIpAddress(), currentIp);
// ì‹¤ì œ ìš´ì˜í™˜ê²½ì—ì„œëŠ” ì´ ê²€ì¦ì„ í™œì„±í™”í•  ìˆ˜ ìˆìŒ
// throw new CustomException.Unauthorized("í† í° ì‚¬ìš© ìœ„ì¹˜ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
â‹®----
// í† í° íƒ€ì… ê²€ì¦
â‹®----
/**
     * ì‚¬ìš©ìì˜ ì•¡ì„¸ìŠ¤ í† í°ë“¤ ë¬´íš¨í™”
     */
private void invalidateUserAccessTokens(String email) {
â‹®----
.filter(metadata -> TokenType.ACCESS.equals(metadata.getType()))
.forEach(metadata -> blacklistedTokens.add(metadata.getTokenId()));
â‹®----
/**
     * ì‚¬ìš©ì ê¶Œí•œ ì •ë³´ ì¡°íšŒ (ì‹¤ì œë¡œëŠ” UserServiceì—ì„œ ì¡°íšŒí•´ì•¼ í•¨)
     */
private Collection<? extends GrantedAuthority> getUserAuthorities(String email) {
// TODO: ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” MemberServiceë¥¼ í†µí•´ ì‚¬ìš©ì ê¶Œí•œ ì¡°íšŒ
return Collections.singletonList(new SimpleGrantedAuthority("ROLE_USER"));
â‹®----
/**
     * í˜„ì¬ IP ì£¼ì†Œ ì¡°íšŒ
     */
private String getCurrentIpAddress() {
// TODO: HttpServletRequestì—ì„œ ì‹¤ì œ IP ì£¼ì†Œ ì¶”ì¶œ
â‹®----
/**
     * í˜„ì¬ User-Agent ì¡°íšŒ
     */
private String getCurrentUserAgent() {
// TODO: HttpServletRequestì—ì„œ ì‹¤ì œ User-Agent ì¶”ì¶œ
â‹®----
/**
     * ë§Œë£Œëœ í† í° ë©”íƒ€ë°ì´í„° ì •ë¦¬ (ìŠ¤ì¼€ì¤„ë§ ë©”ì„œë“œ)
     */
public void cleanupExpiredTokens() {
LocalDateTime now = LocalDateTime.now();
â‹®----
List<String> expiredTokenIds = tokenMetadataStore.values().stream()
.filter(metadata -> metadata.getExpiresAt().isBefore(now))
.map(TokenMetadata::getTokenId)
â‹®----
expiredTokenIds.forEach(tokenId -> {
â‹®----
blacklistedTokens.remove(tokenId);
â‹®----
if (!expiredTokenIds.isEmpty()) {
log.info("ë§Œë£Œëœ í† í° {} ê°œ ì •ë¦¬ ì™„ë£Œ", expiredTokenIds.size());
â‹®----
// ===== ë‚´ë¶€ í´ë˜ìŠ¤ë“¤ =====
â‹®----
/**
     * í† í° íƒ€ì… ì—´ê±°í˜•
     */
â‹®----
/**
     * í† í° ìŒ í´ë˜ìŠ¤
     */
â‹®----
public static class TokenPair {
â‹®----
/**
     * í† í° ë©”íƒ€ë°ì´í„° í´ë˜ìŠ¤
     */
â‹®----
public static class TokenMetadata {
</file>

<file path="src/main/java/com/globalcarelink/auth/Member.java">
import lombok.*;
â‹®----
public class Member extends BaseEntity {
â‹®----
public void updateProfile(String name, String phoneNumber, String language, String region) {
â‹®----
public void updatePassword(String encodedPassword) {
â‹®----
public void toggleJobSeekerStatus() {
â‹®----
public void deactivate() {
â‹®----
public void activate() {
â‹®----
public boolean isOverseasUser() {
â‹®----
public boolean isStaff() {
return this.role.isStaff();
</file>

<file path="src/main/java/com/globalcarelink/auth/MemberRole.java">
/**
 * íšŒì› ì—­í•  ì •ì˜ - ì‚¬ìš©ìì™€ êµ¬ì§ì ì™„ì „ ë¶„ë¦¬
 * 
 * ì—­í•  ë¶„ë¥˜:
 * 1. ê´€ë¦¬/ìš´ì˜ì§„: ADMIN, FACILITY, COORDINATOR
 * 2. í™˜ì/ê°€ì¡±: USER_DOMESTIC, USER_OVERSEAS (ìš”ì–‘ ì„œë¹„ìŠ¤ ì´ìš©ì)
 * 3. êµ¬ì§ì: JOB_SEEKER_DOMESTIC, JOB_SEEKER_OVERSEAS (ìš”ì–‘ ë¶„ì•¼ ì·¨ì—… í¬ë§ì)
 */
â‹®----
// === ê´€ë¦¬/ìš´ì˜ì§„ ===
â‹®----
// === í™˜ì/ê°€ì¡± (ìš”ì–‘ ì„œë¹„ìŠ¤ ì´ìš©ì) ===
â‹®----
// === êµ¬ì§ì (ìš”ì–‘ ë¶„ì•¼ ì·¨ì—… í¬ë§ì) ===
â‹®----
// === ì—­í•  ë¶„ë¥˜ ë©”ì„œë“œ ===
â‹®----
/**
     * í™˜ì/ê°€ì¡± ì‚¬ìš©ì ì—¬ë¶€
     */
public boolean isPatientFamily() {
â‹®----
/**
     * êµ¬ì§ì ì—¬ë¶€
     */
public boolean isJobSeeker() {
â‹®----
/**
     * ê´€ë¦¬/ìš´ì˜ì§„ ì—¬ë¶€
     */
public boolean isStaff() {
â‹®----
/**
     * í•´ì™¸ ê±°ì£¼ì ì—¬ë¶€ (ì¬ì™¸ë™í¬)
     */
public boolean isOverseas() {
â‹®----
/**
     * êµ­ë‚´ ê±°ì£¼ì ì—¬ë¶€
     */
public boolean isDomestic() {
â‹®----
/**
     * ì½”ë””ë„¤ì´í„° ì„œë¹„ìŠ¤ ì´ìš© ê°€ëŠ¥ ì—¬ë¶€
     */
public boolean canUseCoordinatorService() {
return isPatientFamily(); // í™˜ì/ê°€ì¡±ë§Œ ì½”ë””ë„¤ì´í„° ì„œë¹„ìŠ¤ ì´ìš© ê°€ëŠ¥
â‹®----
/**
     * êµ¬ì¸êµ¬ì§ ì„œë¹„ìŠ¤ ì´ìš© ê°€ëŠ¥ ì—¬ë¶€
     */
public boolean canUseJobService() {
return isJobSeeker() || this == FACILITY; // êµ¬ì§ì + ì‹œì„¤íšŒì›(êµ¬ì¸)
â‹®----
/**
     * ê±´ê°• í‰ê°€ ì„œë¹„ìŠ¤ ì´ìš© ê°€ëŠ¥ ì—¬ë¶€
     */
public boolean canUseHealthAssessment() {
return isPatientFamily(); // í™˜ì/ê°€ì¡±ë§Œ ê±´ê°• í‰ê°€ ê°€ëŠ¥
â‹®----
// === ë‚´ë¶€ ì—´ê±°í˜• ===
â‹®----
/**
     * íšŒì› ìœ í˜• ë¶„ë¥˜
     */
â‹®----
STAFF,          // ê´€ë¦¬/ìš´ì˜ì§„
PATIENT_FAMILY, // í™˜ì/ê°€ì¡±
JOB_SEEKER      // êµ¬ì§ì
</file>

<file path="src/main/java/com/globalcarelink/auth/MemberService.java">
public class MemberService {
â‹®----
public MemberResponse register(MemberRegisterRequest request) {
validateRegisterRequest(request);
â‹®----
if (memberRepository.existsByEmail(request.getEmail())) {
log.warn("íšŒì›ê°€ì… ì‹¤íŒ¨ - ì´ë©”ì¼ ì¤‘ë³µ: {}", SecurityUtil.maskEmail(request.getEmail()));
â‹®----
// ì…ë ¥ê°’ sanitize
String sanitizedEmail = ValidationUtil.sanitizeInput(request.getEmail()).toLowerCase();
String sanitizedName = ValidationUtil.sanitizeInput(request.getName());
String sanitizedPhoneNumber = ValidationUtil.sanitizeInput(request.getPhoneNumber());
String sanitizedLanguage = ValidationUtil.sanitizeInput(request.getLanguage());
String sanitizedRegion = ValidationUtil.sanitizeInput(request.getRegion());
â‹®----
Member member = Member.builder()
.email(sanitizedEmail)
.password(passwordEncoder.encode(request.getPassword()))
.name(sanitizedName)
.phoneNumber(sanitizedPhoneNumber)
.role(request.getRole())
.isJobSeeker(request.getIsJobSeeker())
.language(sanitizedLanguage)
.region(sanitizedRegion)
.build();
â‹®----
Member savedMember = memberRepository.save(member);
â‹®----
log.info("ìƒˆ íšŒì› ê°€ì… ì„±ê³µ: email={}, role={}, region={}",
SecurityUtil.maskEmail(savedMember.getEmail()),
savedMember.getRole(),
savedMember.getRegion());
â‹®----
return MemberResponse.from(savedMember);
â‹®----
public TokenResponse login(LoginRequest request) {
Member member = memberRepository.findByEmail(request.getEmail())
.orElseThrow(() -> new CustomException.Unauthorized("ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤"));
â‹®----
if (!member.getIsActive()) {
â‹®----
if (!passwordEncoder.matches(request.getPassword(), member.getPassword())) {
â‹®----
// Spring Boot 3.x ë°©ì‹ìœ¼ë¡œ í† í° ìƒì„±
Collection<GrantedAuthority> authorities = Collections.singletonList(
new SimpleGrantedAuthority("ROLE_" + member.getRole().name())
â‹®----
TokenPair tokenPair = jwtTokenProvider.createTokenPair(member.getEmail(), authorities);
log.info("ë¡œê·¸ì¸ ì„±ê³µ: email={}, role={}", member.getEmail(), member.getRole());
â‹®----
return TokenResponse.of(tokenPair.getAccessToken(), jwtExpiration, MemberResponse.from(member));
â‹®----
public MemberResponse findById(Long id) {
Member member = memberRepository.findById(id)
.orElseThrow(() -> new CustomException.NotFound("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íšŒì›ì…ë‹ˆë‹¤"));
â‹®----
return MemberResponse.from(member);
â‹®----
public MemberResponse findByEmail(String email) {
Member member = memberRepository.findByEmail(email)
â‹®----
public MemberResponse updateProfile(Long id, MemberUpdateRequest request) {
â‹®----
member.updateProfile(
request.getName() != null ? request.getName() : member.getName(),
request.getPhoneNumber() != null ? request.getPhoneNumber() : member.getPhoneNumber(),
request.getLanguage() != null ? request.getLanguage() : member.getLanguage(),
request.getRegion() != null ? request.getRegion() : member.getRegion()
â‹®----
log.info("í”„ë¡œí•„ ì—…ë°ì´íŠ¸: email={}", member.getEmail());
â‹®----
public void toggleJobSeekerStatus(Long id) {
â‹®----
member.toggleJobSeekerStatus();
log.info("êµ¬ì§ì ìƒíƒœ ë³€ê²½: email={}, isJobSeeker={}", member.getEmail(), member.getIsJobSeeker());
â‹®----
public void deactivate(Long id) {
â‹®----
member.deactivate();
log.info("íšŒì› ë¹„í™œì„±í™”: email={}", member.getEmail());
â‹®----
public List<MemberResponse> findByRole(MemberRole role) {
return memberRepository.findByRole(role).stream()
.map(MemberResponse::from)
.toList();
â‹®----
public List<MemberResponse> findActiveJobSeekers() {
return memberRepository.findByIsJobSeekerAndIsActive(true, true).stream()
â‹®----
public long countByRole(MemberRole role) {
return memberRepository.countByRole(role);
â‹®----
private void validateRegisterRequest(MemberRegisterRequest request) {
// ì´ë©”ì¼ ê²€ì¦
if (!ValidationUtil.isValidEmail(request.getEmail())) {
throw new CustomException.BadRequest(ValidationUtil.getEmailValidationMessage());
â‹®----
// ë³´ì•ˆ ìœ„í—˜ íŒ¨í„´ ê²€ì‚¬
if (ValidationUtil.containsSuspiciousPattern(request.getEmail()) ||
ValidationUtil.containsSuspiciousPattern(request.getName()) ||
ValidationUtil.containsSuspiciousPattern(request.getRegion())) {
log.warn("íšŒì›ê°€ì… ì‹œë„ì—ì„œ ì˜ì‹¬ìŠ¤ëŸ¬ìš´ íŒ¨í„´ ê°ì§€: email={}", SecurityUtil.maskEmail(request.getEmail()));
â‹®----
// SQL ì¸ì ì…˜ ê²€ì‚¬
if (SecurityUtil.containsSqlInjection(request.getEmail()) ||
SecurityUtil.containsSqlInjection(request.getName()) ||
SecurityUtil.containsSqlInjection(request.getRegion())) {
log.error("íšŒì›ê°€ì… ì‹œë„ì—ì„œ SQL ì¸ì ì…˜ íŒ¨í„´ ê°ì§€: email={}", SecurityUtil.maskEmail(request.getEmail()));
â‹®----
// ë¹„ë°€ë²ˆí˜¸ ê°•ë„ ê²€ì¦
if (!SecurityUtil.isSecurePassword(request.getPassword())) {
throw new CustomException.BadRequest(ValidationUtil.getPasswordValidationMessage());
â‹®----
// ì „í™”ë²ˆí˜¸ ê²€ì¦
if (StringUtils.hasText(request.getPhoneNumber()) &&
!ValidationUtil.isValidPhoneNumber(request.getPhoneNumber())) {
throw new CustomException.BadRequest(ValidationUtil.getPhoneValidationMessage());
â‹®----
// ì–¸ì–´ ì½”ë“œ ê²€ì¦
if (!ValidationUtil.isValidLanguageCode(request.getLanguage())) {
â‹®----
// ì§€ì—­ ê²€ì¦
if (!ValidationUtil.isValidRegion(request.getRegion())) {
â‹®----
// ì´ë¦„ ê²€ì¦ (í•œê¸€ ì´ë¦„ì¸ ê²½ìš°)
if (StringUtils.hasText(request.getLanguage()) &&
request.getLanguage().startsWith("ko") &&
!ValidationUtil.isValidKoreanName(request.getName())) {
log.info("í•œê¸€ ì´ë¦„ì´ ì•„ë‹Œ ì‚¬ìš©ì ê°€ì…: email={}, name length={}",
SecurityUtil.maskEmail(request.getEmail()),
request.getName().length());
â‹®----
// ì—­í• ë³„ ì¶”ê°€ ê²€ì¦
validateRoleSpecificRules(request);
â‹®----
private void validateRoleSpecificRules(MemberRegisterRequest request) {
switch (request.getRole()) {
â‹®----
if (!StringUtils.hasText(request.getRegion())) {
â‹®----
if (!StringUtils.hasText(request.getLanguage()) || "ko".equals(request.getLanguage())) {
log.info("í•´ì™¸ ì‚¬ìš©ìì´ì§€ë§Œ í•œêµ­ì–´ ì„¤ì •: email={}", SecurityUtil.maskEmail(request.getEmail()));
â‹®----
if (Boolean.TRUE.equals(request.getIsJobSeeker())) {
â‹®----
log.warn("ê´€ë¦¬ì ê³„ì • ìƒì„± ì‹œë„: email={}", SecurityUtil.maskEmail(request.getEmail()));
</file>

<file path="src/main/java/com/globalcarelink/common/config/AsyncConfig.java">
/**
 * ë¹„ë™ê¸° ì²˜ë¦¬ ì„¤ì •
 * - ë‹¤ì¤‘ ìŠ¤ë ˆë“œ í’€ ê´€ë¦¬
 * - ì˜ˆì™¸ ì²˜ë¦¬ ë° ë¡œê¹…
 * - ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
 * - ë°±í”„ë ˆì…” ê´€ë¦¬
 */
â‹®----
public class AsyncConfig implements AsyncConfigurer {
â‹®----
/**
     * ê¸°ë³¸ ë¹„ë™ê¸° ì‹¤í–‰ì
     */
â‹®----
public Executor getAsyncExecutor() {
ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
â‹®----
// ê¸°ë³¸ ìŠ¤ë ˆë“œ í’€ ì„¤ì •
executor.setCorePoolSize(corePoolSize);
executor.setMaxPoolSize(maxPoolSize);
executor.setQueueCapacity(queueCapacity);
executor.setKeepAliveSeconds(keepAliveSeconds);
executor.setThreadNamePrefix(threadNamePrefix);
â‹®----
// ë°±í”„ë ˆì…” ì •ì±…: íê°€ ê°€ë“ ì°° ë•Œ í˜¸ì¶œ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰
executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());
â‹®----
// ìŠ¤ë ˆë“œ ì¢…ë£Œ ëŒ€ê¸° ì„¤ì •
executor.setWaitForTasksToCompleteOnShutdown(true);
executor.setAwaitTerminationSeconds(30);
â‹®----
// ìŠ¤ë ˆë“œ í’€ í†µê³„ ë¡œê¹…
executor.setTaskDecorator(runnable -> {
â‹®----
long startTime = System.currentTimeMillis();
â‹®----
runnable.run();
â‹®----
long endTime = System.currentTimeMillis();
log.debug("ë¹„ë™ê¸° ì‘ì—… ì™„ë£Œ - ì‹¤í–‰ì‹œê°„: {}ms, ìŠ¤ë ˆë“œ: {}",
endTime - startTime, Thread.currentThread().getName());
â‹®----
executor.initialize();
â‹®----
log.info("ê¸°ë³¸ ë¹„ë™ê¸° ì‹¤í–‰ì ì„¤ì • ì™„ë£Œ - ì½”ì–´: {}, ìµœëŒ€: {}, í: {}",
â‹®----
/**
     * í†µê³„ ì²˜ë¦¬ìš© ë¹„ë™ê¸° ì‹¤í–‰ì
     * - CPU ì§‘ì•½ì  ì‘ì—…ìš©
     * - ë³„ë„ ìŠ¤ë ˆë“œ í’€ë¡œ ê²©ë¦¬
     */
â‹®----
public Executor statisticsExecutor() {
â‹®----
// í†µê³„ ì²˜ë¦¬ì— ìµœì í™”ëœ ì„¤ì •
executor.setCorePoolSize(Math.max(2, Runtime.getRuntime().availableProcessors() / 2));
executor.setMaxPoolSize(Runtime.getRuntime().availableProcessors());
executor.setQueueCapacity(50);
executor.setKeepAliveSeconds(120);
executor.setThreadNamePrefix("stats-");
â‹®----
// í†µê³„ ì‘ì—…ì´ ì‹¤íŒ¨í•´ë„ ë‹¤ë¥¸ ì‘ì—…ì— ì˜í–¥ ì—†ë„ë¡ ê²©ë¦¬
executor.setRejectedExecutionHandler(new ThreadPoolExecutor.DiscardOldestPolicy());
â‹®----
executor.setAwaitTerminationSeconds(60);
â‹®----
log.info("í†µê³„ ì²˜ë¦¬ ì‹¤í–‰ì ì„¤ì • ì™„ë£Œ - ì½”ì–´: {}, ìµœëŒ€: {}",
executor.getCorePoolSize(), executor.getMaxPoolSize());
â‹®----
/**
     * ë§¤ì¹­ ì²˜ë¦¬ìš© ë¹„ë™ê¸° ì‹¤í–‰ì
     * - ë³µì¡í•œ ì•Œê³ ë¦¬ì¦˜ ì²˜ë¦¬ìš©
     * - ë†’ì€ ìš°ì„ ìˆœìœ„
     */
â‹®----
public Executor matchingExecutor() {
â‹®----
// ë§¤ì¹­ ì²˜ë¦¬ì— ìµœì í™”ëœ ì„¤ì •
executor.setCorePoolSize(3);
executor.setMaxPoolSize(10);
executor.setQueueCapacity(200);
executor.setKeepAliveSeconds(300);
executor.setThreadNamePrefix("matching-");
â‹®----
// ë§¤ì¹­ ì‘ì—…ì€ ì¤‘ìš”í•˜ë¯€ë¡œ í˜¸ì¶œ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰
â‹®----
executor.setAwaitTerminationSeconds(45);
â‹®----
// ë§¤ì¹­ ì‘ì—… ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
â‹®----
String threadName = Thread.currentThread().getName();
log.debug("ë§¤ì¹­ ì‘ì—… ì‹œì‘ - ìŠ¤ë ˆë“œ: {}", threadName);
â‹®----
if (duration > 5000) { // 5ì´ˆ ì´ìƒ ê±¸ë¦° ì‘ì—…ì€ ê²½ê³ 
log.warn("ë§¤ì¹­ ì‘ì—… ì§€ì—° - ì‹¤í–‰ì‹œê°„: {}ms, ìŠ¤ë ˆë“œ: {}", duration, threadName);
â‹®----
log.debug("ë§¤ì¹­ ì‘ì—… ì™„ë£Œ - ì‹¤í–‰ì‹œê°„: {}ms, ìŠ¤ë ˆë“œ: {}", duration, threadName);
â‹®----
log.info("ë§¤ì¹­ ì²˜ë¦¬ ì‹¤í–‰ì ì„¤ì • ì™„ë£Œ - ì½”ì–´: {}, ìµœëŒ€: {}",
â‹®----
/**
     * ì•Œë¦¼ ì²˜ë¦¬ìš© ë¹„ë™ê¸° ì‹¤í–‰ì
     * - I/O ì§‘ì•½ì  ì‘ì—…ìš©
     * - ì™¸ë¶€ ì„œë¹„ìŠ¤ í˜¸ì¶œìš©
     */
â‹®----
public Executor notificationExecutor() {
â‹®----
// ì•Œë¦¼ ì²˜ë¦¬ì— ìµœì í™”ëœ ì„¤ì •
executor.setCorePoolSize(2);
executor.setMaxPoolSize(8);
executor.setQueueCapacity(500);
executor.setKeepAliveSeconds(180);
executor.setThreadNamePrefix("notification-");
â‹®----
// ì•Œë¦¼ ì‹¤íŒ¨ ì‹œ ë¬´ì‹œ (ì¤‘ìš”ë„ê°€ ë‚®ìŒ)
executor.setRejectedExecutionHandler(new ThreadPoolExecutor.DiscardPolicy());
â‹®----
executor.setWaitForTasksToCompleteOnShutdown(false); // ë¹ ë¥¸ ì¢…ë£Œ
executor.setAwaitTerminationSeconds(10);
â‹®----
log.info("ì•Œë¦¼ ì²˜ë¦¬ ì‹¤í–‰ì ì„¤ì • ì™„ë£Œ - ì½”ì–´: {}, ìµœëŒ€: {}",
â‹®----
/**
     * ë¹„ë™ê¸° ì˜ˆì™¸ ì²˜ë¦¬ê¸°
     */
â‹®----
public AsyncUncaughtExceptionHandler getAsyncUncaughtExceptionHandler() {
return new CustomAsyncUncaughtExceptionHandler();
â‹®----
/**
     * ì»¤ìŠ¤í…€ ë¹„ë™ê¸° ì˜ˆì™¸ ì²˜ë¦¬ê¸°
     */
public static class CustomAsyncUncaughtExceptionHandler implements AsyncUncaughtExceptionHandler {
â‹®----
public void handleUncaughtException(Throwable throwable, Method method, Object... objects) {
log.error("ë¹„ë™ê¸° ì‘ì—… ì˜ˆì™¸ ë°œìƒ - ë©”ì„œë“œ: {}.{}, íŒŒë¼ë¯¸í„°: {}",
method.getDeclaringClass().getSimpleName(),
method.getName(),
â‹®----
// ì¤‘ìš”í•œ ì˜ˆì™¸ì˜ ê²½ìš° ì¶”ê°€ ì²˜ë¦¬ (ì•Œë¦¼, ë©”íŠ¸ë¦­ ë“±)
if (isBusinessCriticalMethod(method)) {
log.error("ì¤‘ìš” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤íŒ¨ - ì¦‰ì‹œ í™•ì¸ í•„ìš”: {}", method.getName());
// TODO: ì•Œë¦¼ ì„œë¹„ìŠ¤ í˜¸ì¶œ
â‹®----
private boolean isBusinessCriticalMethod(Method method) {
String methodName = method.getName();
String className = method.getDeclaringClass().getSimpleName();
â‹®----
// ì¤‘ìš”í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë©”ì„œë“œ íŒë³„
return methodName.contains("match") && className.contains("Coordinator") ||
methodName.contains("calculate") && className.contains("Grade") ||
methodName.contains("process") && className.contains("Payment");
â‹®----
/**
     * ìŠ¤ë ˆë“œ í’€ ìƒíƒœ ëª¨ë‹ˆí„°ë§ ë¹ˆ
     */
â‹®----
public ThreadPoolMonitor threadPoolMonitor() {
return new ThreadPoolMonitor();
â‹®----
/**
     * ìŠ¤ë ˆë“œ í’€ ëª¨ë‹ˆí„°ë§ í´ë˜ìŠ¤
     */
public static class ThreadPoolMonitor {
â‹®----
public void logThreadPoolStats(ThreadPoolTaskExecutor executor, String name) {
â‹®----
ThreadPoolExecutor threadPool = executor.getThreadPoolExecutor();
â‹®----
log.info("ìŠ¤ë ˆë“œ í’€ ìƒíƒœ [{}] - í™œì„±: {}/{}, ì™„ë£Œ: {}, í: {}/{}, ìµœëŒ€í: {}",
â‹®----
threadPool.getActiveCount(),
threadPool.getPoolSize(),
threadPool.getCompletedTaskCount(),
threadPool.getQueue().size(),
executor.getQueueCapacity(),
threadPool.getLargestPoolSize());
â‹®----
public boolean isThreadPoolHealthy(ThreadPoolTaskExecutor executor) {
â‹®----
// í ì‚¬ìš©ë¥ ì´ 80% ì´ìƒì´ë©´ ê²½ê³ 
double queueUsage = (double) threadPool.getQueue().size() / executor.getQueueCapacity();
â‹®----
log.warn("ìŠ¤ë ˆë“œ í’€ í ì‚¬ìš©ë¥  ë†’ìŒ: {:.1f}%", queueUsage * 100);
</file>

<file path="src/main/java/com/globalcarelink/common/config/CacheConfig.java">
/**
 * ìºì‹œ ì„¤ì • (Caffeine ê¸°ë°˜ ê³ ì„±ëŠ¥ ìºì‹±)
 * - ë©”ëª¨ë¦¬ íš¨ìœ¨ì ì¸ ìºì‹±
 * - TTL ê¸°ë°˜ ë§Œë£Œ ì •ì±…
 * - í¬ê¸° ê¸°ë°˜ ì œê±° ì •ì±…
 * - í†µê³„ ë° ëª¨ë‹ˆí„°ë§ ì§€ì›
 */
â‹®----
public class CacheConfig {
â‹®----
/**
     * ê¸°ë³¸ ìºì‹œ ë§¤ë‹ˆì € ì„¤ì •
     */
â‹®----
public CacheManager cacheManager() {
CaffeineCacheManager cacheManager = new CaffeineCacheManager();
cacheManager.setCaffeine(defaultCaffeineBuilder());
â‹®----
// ìºì‹œë³„ ê°œë³„ ì„¤ì •
cacheManager.registerCustomCache("healthAssessments",
createHealthAssessmentCache().build());
cacheManager.registerCustomCache("healthAssessmentStats",
createStatisticsCache().build());
cacheManager.registerCustomCache("coordinatorMatching",
createCoordinatorMatchingCache().build());
cacheManager.registerCustomCache("members",
createMemberCache().build());
cacheManager.registerCustomCache("profiles",
createProfileCache().build());
â‹®----
log.info("Caffeine ìºì‹œ ë§¤ë‹ˆì € ì„¤ì • ì™„ë£Œ");
â‹®----
/**
     * ê¸°ë³¸ Caffeine ë¹Œë”
     */
private Caffeine<Object, Object> defaultCaffeineBuilder() {
return Caffeine.newBuilder()
.maximumSize(1000)
.expireAfterWrite(Duration.ofMinutes(30))
.expireAfterAccess(Duration.ofMinutes(10))
.recordStats()
.removalListener((key, value, cause) ->
log.debug("ìºì‹œ ì œê±°: key={}, cause={}", key, cause));
â‹®----
/**
     * ê±´ê°• í‰ê°€ ìºì‹œ ì„¤ì •
     * - ìì£¼ ì¡°íšŒë˜ëŠ” ê±´ê°• í‰ê°€ ë°ì´í„°
     * - ì¤‘ê°„ í¬ê¸° ìºì‹œ, ì ë‹¹í•œ TTL
     */
private Caffeine<Object, Object> createHealthAssessmentCache() {
â‹®----
.maximumSize(healthAssessmentMaxSize)
.expireAfterWrite(Duration.ofMinutes(healthAssessmentTtlMinutes))
.expireAfterAccess(Duration.ofMinutes(healthAssessmentTtlMinutes / 2))
â‹®----
log.debug("ê±´ê°•í‰ê°€ ìºì‹œ ì œê±°: key={}, cause={}", key, cause));
â‹®----
/**
     * í†µê³„ ìºì‹œ ì„¤ì •
     * - ê³„ì‚° ë¹„ìš©ì´ ë†’ì€ í†µê³„ ë°ì´í„°
     * - ì‘ì€ í¬ê¸°, ê¸´ TTL
     */
private Caffeine<Object, Object> createStatisticsCache() {
â‹®----
.maximumSize(statisticsMaxSize)
.expireAfterWrite(Duration.ofMinutes(statisticsTtlMinutes))
â‹®----
log.debug("í†µê³„ ìºì‹œ ì œê±°: key={}, cause={}", key, cause));
â‹®----
/**
     * ì½”ë””ë„¤ì´í„° ë§¤ì¹­ ìºì‹œ ì„¤ì •
     * - ë³µì¡í•œ ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ ê²°ê³¼
     * - ì¤‘ê°„ í¬ê¸°, ê¸´ TTL
     */
private Caffeine<Object, Object> createCoordinatorMatchingCache() {
â‹®----
.maximumSize(coordinatorMatchingMaxSize)
.expireAfterWrite(Duration.ofMinutes(coordinatorMatchingTtlMinutes))
.expireAfterAccess(Duration.ofMinutes(coordinatorMatchingTtlMinutes / 3))
â‹®----
log.debug("ë§¤ì¹­ ìºì‹œ ì œê±°: key={}, cause={}", key, cause));
â‹®----
/**
     * íšŒì› ì •ë³´ ìºì‹œ ì„¤ì •
     * - ìì£¼ ì¡°íšŒë˜ëŠ” íšŒì› ë°ì´í„°
     * - í° í¬ê¸°, ì§§ì€ TTL (ë°ì´í„° ì¼ê´€ì„± ì¤‘ìš”)
     */
private Caffeine<Object, Object> createMemberCache() {
â‹®----
.maximumSize(memberMaxSize)
.expireAfterWrite(Duration.ofMinutes(memberTtlMinutes))
.expireAfterAccess(Duration.ofMinutes(memberTtlMinutes / 2))
â‹®----
log.debug("íšŒì› ìºì‹œ ì œê±°: key={}, cause={}", key, cause));
â‹®----
/**
     * í”„ë¡œí•„ ìºì‹œ ì„¤ì •
     * - í”„ë¡œí•„ ë°ì´í„° (êµ­ë‚´/í•´ì™¸)
     * - ì¤‘ê°„ í¬ê¸°, ì ë‹¹í•œ TTL
     */
private Caffeine<Object, Object> createProfileCache() {
â‹®----
.maximumSize(1500)
.expireAfterWrite(Duration.ofMinutes(45))
.expireAfterAccess(Duration.ofMinutes(20))
â‹®----
log.debug("í”„ë¡œí•„ ìºì‹œ ì œê±°: key={}, cause={}", key, cause));
â‹®----
/**
     * ìºì‹œ í†µê³„ ë¡œê¹…ì„ ìœ„í•œ ë¹ˆ
     */
â‹®----
public CacheStatsLogger cacheStatsLogger() {
return new CacheStatsLogger();
â‹®----
/**
     * ìºì‹œ í†µê³„ ë¡œê±° í´ë˜ìŠ¤
     */
public static class CacheStatsLogger {
â‹®----
public void logCacheStats(CacheManager cacheManager) {
â‹®----
caffeineCacheManager.getCacheNames().forEach(cacheName -> {
var cache = caffeineCacheManager.getCache(cacheName);
â‹®----
var nativeCache = cache.getNativeCache();
â‹®----
var stats = caffeineCache.stats();
log.info("ìºì‹œ í†µê³„ [{}] - íˆíŠ¸ìœ¨: {:.2f}%, ìš”ì²­ìˆ˜: {}, íˆíŠ¸: {}, ë¯¸ìŠ¤: {}, ì œê±°: {}",
â‹®----
stats.hitRate() * 100,
stats.requestCount(),
stats.hitCount(),
stats.missCount(),
stats.evictionCount());
</file>

<file path="src/main/java/com/globalcarelink/common/config/LoggingAspect.java">
public class LoggingAspect {
â‹®----
private static final org.slf4j.Logger performanceLogger = LoggerFactory.getLogger("performance");
â‹®----
public void serviceLayer() {}
â‹®----
public void controllerLayer() {}
â‹®----
public void repositoryLayer() {}
â‹®----
public Object logServiceExecution(ProceedingJoinPoint joinPoint) throws Throwable {
long startTime = System.currentTimeMillis();
String methodName = joinPoint.getSignature().getName();
String className = joinPoint.getTarget().getClass().getSimpleName();
â‹®----
Object[] args = joinPoint.getArgs();
String sanitizedArgs = sanitizeArgs(args);
â‹®----
log.debug("ì„œë¹„ìŠ¤ ë©”ì„œë“œ ì‹œì‘: {}.{} - íŒŒë¼ë¯¸í„°: {}", className, methodName, sanitizedArgs);
â‹®----
Object result = joinPoint.proceed();
â‹®----
long duration = System.currentTimeMillis() - startTime;
log.debug("ì„œë¹„ìŠ¤ ë©”ì„œë“œ ì™„ë£Œ: {}.{} - ì‹¤í–‰ì‹œê°„: {}ms", className, methodName, duration);
â‹®----
performanceLogger.info("ëŠë¦° ì„œë¹„ìŠ¤ ë©”ì„œë“œ: {}.{} - {}ms", className, methodName, duration);
â‹®----
log.error("ì„œë¹„ìŠ¤ ë©”ì„œë“œ ì˜¤ë¥˜: {}.{} - ì‹¤í–‰ì‹œê°„: {}ms, ì˜¤ë¥˜: {}",
className, methodName, duration, e.getMessage(), e);
â‹®----
public Object logControllerExecution(ProceedingJoinPoint joinPoint) throws Throwable {
â‹®----
log.info("ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œ ì‹œì‘: {}.{} - íŒŒë¼ë¯¸í„°: {}", className, methodName, sanitizedArgs);
â‹®----
log.info("ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œ ì™„ë£Œ: {}.{} - ì‹¤í–‰ì‹œê°„: {}ms", className, methodName, duration);
â‹®----
log.error("ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œ ì˜¤ë¥˜: {}.{} - ì‹¤í–‰ì‹œê°„: {}ms, ì˜¤ë¥˜: {}",
â‹®----
public void logException(JoinPoint joinPoint, Throwable ex) {
â‹®----
log.error("ì˜ˆì™¸ ë°œìƒ: {}.{} - ì˜ˆì™¸íƒ€ì…: {}, ë©”ì‹œì§€: {}",
className, methodName, ex.getClass().getSimpleName(), ex.getMessage());
â‹®----
if (ex.getCause() != null) {
log.error("ì›ì¸: {}", ex.getCause().getMessage());
â‹®----
public Object logRepositoryExecution(ProceedingJoinPoint joinPoint) throws Throwable {
â‹®----
log.debug("Repository ë©”ì„œë“œ ì‹œì‘: {}.{}", className, methodName);
â‹®----
log.debug("Repository ë©”ì„œë“œ ì™„ë£Œ: {}.{} - ì‹¤í–‰ì‹œê°„: {}ms", className, methodName, duration);
â‹®----
performanceLogger.warn("ëŠë¦° DB ì¿¼ë¦¬: {}.{} - {}ms", className, methodName, duration);
â‹®----
log.error("Repository ë©”ì„œë“œ ì˜¤ë¥˜: {}.{} - ì‹¤í–‰ì‹œê°„: {}ms, ì˜¤ë¥˜: {}",
className, methodName, duration, e.getMessage());
â‹®----
private String sanitizeArgs(Object[] args) {
â‹®----
return Arrays.stream(args)
.map(this::sanitizeArg)
.reduce((a, b) -> a + ", " + b)
.map(s -> "[" + s + "]")
.orElse("[]");
â‹®----
private String sanitizeArg(Object arg) {
â‹®----
String argString = arg.toString();
â‹®----
if (argString.toLowerCase().contains("password")) {
â‹®----
if (argString.length() > 100) {
return argString.substring(0, 97) + "...";
</file>

<file path="src/main/java/com/globalcarelink/common/config/SecurityConfig.java">
public class SecurityConfig {
â‹®----
public PasswordEncoder passwordEncoder() {
return new BCryptPasswordEncoder(12);
â‹®----
public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
â‹®----
.csrf(AbstractHttpConfigurer::disable)
.cors(cors -> cors.configurationSource(corsConfigurationSource()))
.sessionManagement(session -> session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))
â‹®----
.headers(headers -> headers
.frameOptions().deny()
.contentTypeOptions().and()
.httpStrictTransportSecurity(hstsConfig -> hstsConfig
.maxAgeInSeconds(31536000))
.referrerPolicy(ReferrerPolicyHeaderWriter.ReferrerPolicy.STRICT_ORIGIN_WHEN_CROSS_ORIGIN)
â‹®----
.authorizeHttpRequests(auth -> auth
.requestMatchers("/api/auth/login", "/api/auth/register").permitAll()
.requestMatchers("/swagger-ui/**", "/v3/api-docs/**", "/swagger-resources/**").permitAll()
.requestMatchers("/actuator/health", "/actuator/info").permitAll()
.requestMatchers("/error").permitAll()
.requestMatchers("/api/health-assessments/statistics").hasRole("ADMIN")
.requestMatchers("/api/coordinator-matching/statistics").hasRole("ADMIN")
.requestMatchers("/api/coordinator-matching/simulate").hasRole("ADMIN")
.requestMatchers("/api/coordinator-matching/available").hasAnyRole("COORDINATOR", "ADMIN")
.requestMatchers("/api/health-assessments/**").hasAnyRole("USER_DOMESTIC", "USER_OVERSEAS", "COORDINATOR", "ADMIN")
.requestMatchers("/api/coordinator-matching/**").hasAnyRole("USER_DOMESTIC", "USER_OVERSEAS", "COORDINATOR", "ADMIN")
.requestMatchers("/api/profiles/**").hasAnyRole("USER_DOMESTIC", "USER_OVERSEAS", "COORDINATOR", "FACILITY", "ADMIN")
.requestMatchers("/api/members/**").hasAnyRole("USER_DOMESTIC", "USER_OVERSEAS", "COORDINATOR", "FACILITY", "ADMIN")
.anyRequest().authenticated()
â‹®----
.addFilterBefore(new JwtAuthenticationFilter(jwtTokenProvider),
â‹®----
.exceptionHandling(exceptions -> exceptions
.authenticationEntryPoint((request, response, authException) -> {
response.setStatus(401);
response.setContentType("application/json;charset=UTF-8");
response.getWriter().write("{\"error\":\"Unauthorized\",\"message\":\"ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤\"}");
â‹®----
.accessDeniedHandler((request, response, accessDeniedException) -> {
response.setStatus(403);
â‹®----
response.getWriter().write("{\"error\":\"Forbidden\",\"message\":\"ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤\"}");
â‹®----
return http.build();
â‹®----
public CorsConfigurationSource corsConfigurationSource() {
CorsConfiguration configuration = new CorsConfiguration();
â‹®----
configuration.setAllowedOriginPatterns(Arrays.asList(
â‹®----
configuration.setAllowedMethods(Arrays.asList("GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"));
â‹®----
configuration.setAllowedHeaders(Arrays.asList(
â‹®----
configuration.setExposedHeaders(Arrays.asList(
â‹®----
configuration.setAllowCredentials(true);
configuration.setMaxAge(3600L);
â‹®----
UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
source.registerCorsConfiguration("/**", configuration);
</file>

<file path="src/main/java/com/globalcarelink/coordinator/CoordinatorCareSettings.java">
import lombok.*;
â‹®----
public class CoordinatorCareSettings extends BaseEntity {
â‹®----
public boolean isEligibleForCareGrade(Integer careGrade) {
â‹®----
if (excludedCareGrades != null && excludedCareGrades.contains(careGrade)) return false;
if (preferredCareGrades != null && !preferredCareGrades.isEmpty()) {
return preferredCareGrades.contains(careGrade);
â‹®----
public boolean hasSpecialty(String specialty) {
return specialtyAreas != null && specialtyAreas.contains(specialty);
â‹®----
public double getSuccessRate() {
â‹®----
public boolean canTakeNewCase() {
return isActive && getCurrentActiveCases() < maxSimultaneousCases;
â‹®----
public int getCurrentActiveCases() {
return 0; // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ì¼€ì´ìŠ¤ ìˆ˜ë¥¼ ê³„ì‚°
â‹®----
/**
     * ì–¸ì–´ ìŠ¤í‚¬ ëª©ë¡ ì¡°íšŒ
     */
public Set<CoordinatorLanguageSkill> getLanguageSkills() {
// ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì—°ê´€ëœ ì–¸ì–´ ìŠ¤í‚¬ì„ ì¡°íšŒ
return Set.of();
â‹®----
private void updateTimestamp() {
this.lastUpdated = LocalDateTime.now();
</file>

<file path="src/main/java/com/globalcarelink/coordinator/CoordinatorCareSettingsService.java">
public class CoordinatorCareSettingsService {
â‹®----
public Optional<CoordinatorCareSettings> getCoordinatorSettings(String coordinatorId) {
return careSettingsRepository.findByCoordinatorIdAndIsActiveTrue(coordinatorId);
â‹®----
public CoordinatorCareSettings saveOrUpdateSettings(CoordinatorCareSettings settings) {
settings.setLastUpdated(LocalDateTime.now());
return careSettingsRepository.save(settings);
â‹®----
public List<CoordinatorCareSettings> getCoordinatorsBySpecialty(String specialty) {
return careSettingsRepository.findBySpecialty(specialty);
â‹®----
public List<CoordinatorCareSettings> getAvailableCoordinators() {
return careSettingsRepository.findAvailableCoordinators();
â‹®----
public List<CoordinatorCareSettings> getCoordinatorsByMinSatisfaction(Double minSatisfaction) {
return careSettingsRepository.findByMinSatisfaction(minSatisfaction);
â‹®----
public CoordinatorMatchingStatistics getMatchingStatistics() {
Long totalCoordinators = careSettingsRepository.getActiveCoordinatorCount();
Double avgSatisfaction = careSettingsRepository.getAverageCustomerSatisfaction();
List<CoordinatorCareSettings> availableCoordinators = getAvailableCoordinators();
â‹®----
return CoordinatorMatchingStatistics.builder()
.totalActiveCoordinators(totalCoordinators)
.averageCustomerSatisfaction(avgSatisfaction)
.availableCoordinators(availableCoordinators.size())
.build();
â‹®----
public MatchingSimulationResult runMatchingSimulation(MatchingSimulationRequest request) {
log.info("ë§¤ì¹­ ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰ - í‰ê°€ìˆ˜: {}, ì½”ë””ë„¤ì´í„°ìˆ˜: {}",
request.getHealthAssessmentCount(), request.getCoordinatorCount());
â‹®----
long startTime = System.currentTimeMillis();
â‹®----
List<CoordinatorCareSettings> allCoordinators = careSettingsRepository.findByIsActiveTrueOrderByPerformanceScoreDesc();
int totalMatches = Math.min(request.getHealthAssessmentCount(), allCoordinators.size() * 5);
â‹®----
long endTime = System.currentTimeMillis();
â‹®----
return MatchingSimulationResult.builder()
.totalHealthAssessments(request.getHealthAssessmentCount())
.totalCoordinators(request.getCoordinatorCount())
.successfulMatches(totalMatches)
.averageMatchingScore(4.2)
.executionTimeMs(executionTime)
.matchingSuccessRate((double) totalMatches / request.getHealthAssessmentCount() * 100)
</file>

<file path="src/main/java/com/globalcarelink/coordinator/CoordinatorLanguageSkillRepository.java">
/**
 * ì½”ë””ë„¤ì´í„° ì–¸ì–´ ìŠ¤í‚¬ Repository
 * ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•œ ì¸ë±ìŠ¤ í™œìš© ì¿¼ë¦¬ í¬í•¨
 */
â‹®----
public interface CoordinatorLanguageSkillRepository extends JpaRepository<CoordinatorLanguageSkill, Long> {
â‹®----
/**
     * ìš°ì„ ìˆœìœ„ ìˆœìœ¼ë¡œ í™œì„± ì–¸ì–´ ìŠ¤í‚¬ ì¡°íšŒ
     */
List<CoordinatorLanguageSkill> findByIsActiveTrueOrderByPriorityOrder();
â‹®----
/**
     * ì½”ë””ë„¤ì´í„° IDì™€ ì–¸ì–´ ì½”ë“œ, í™œì„± ìƒíƒœë¡œ ì¡°íšŒ
     */
List<CoordinatorLanguageSkill> findByCoordinatorIdAndLanguageCodeAndIsActiveTrue(String coordinatorId, String languageCode);
â‹®----
/**
     * ì½”ë””ë„¤ì´í„°ë³„ í™œì„± ì–¸ì–´ ìŠ¤í‚¬ ì¡°íšŒ (ìš°ì„ ìˆœìœ„ ì •ë ¬)
     * ì¸ë±ìŠ¤ í™œìš©: coordinator_id, is_active, priority_order
     */
List<CoordinatorLanguageSkill> findByCoordinatorIdAndIsActiveTrueOrderByPriorityOrder(String coordinatorId);
â‹®----
/**
     * íŠ¹ì • ì–¸ì–´ë¥¼ êµ¬ì‚¬í•˜ëŠ” ì½”ë””ë„¤ì´í„° ì¡°íšŒ
     * ì¸ë±ìŠ¤ í™œìš©: language_code, is_active
     */
â‹®----
List<CoordinatorLanguageSkill> findByLanguageCodeAndIsActiveTrue(@Param("languageCode") String languageCode);
â‹®----
/**
     * íŠ¹ì • ìˆ™ë ¨ë„ ì´ìƒì˜ ì–¸ì–´ ìŠ¤í‚¬ ì¡°íšŒ
     * ì¸ë±ìŠ¤ í™œìš©: proficiency_level, is_active
     */
â‹®----
List<CoordinatorLanguageSkill> findByProficiencyLevelGreaterThanEqual(@Param("minLevel") CoordinatorLanguageSkill.LanguageProficiency minLevel);
â‹®----
/**
     * ë‹¤ì¤‘ ì–¸ì–´ êµ¬ì‚¬ ì½”ë””ë„¤ì´í„° ì¡°íšŒ
     * 2ê°œ ì´ìƒ ì–¸ì–´ë¥¼ êµ¬ì‚¬í•˜ëŠ” ì½”ë””ë„¤ì´í„° ID ë°˜í™˜
     */
â‹®----
List<String> findMultilingualCoordinators(@Param("minLanguageCount") Long minLanguageCount);
â‹®----
/**
     * ì–¸ì–´ë³„ ì½”ë””ë„¤ì´í„° ìˆ˜ í†µê³„
     */
â‹®----
List<Map<String, Object>> findLanguageStatistics();
â‹®----
/**
     * íŠ¹ì • ì–¸ì–´ ì¡°í•©ì„ ëª¨ë‘ êµ¬ì‚¬í•˜ëŠ” ì½”ë””ë„¤ì´í„° ì¡°íšŒ
     */
â‹®----
List<String> findCoordinatorsWithLanguages(
â‹®----
/**
     * ì–¸ì–´ ì¸ì¦ì„œ ë³´ìœ  ì½”ë””ë„¤ì´í„° ì¡°íšŒ
     */
â‹®----
List<CoordinatorLanguageSkill> findWithCertification();
â‹®----
/**
     * ì½”ë””ë„¤ì´í„°ì˜ ì£¼ìš” ì–¸ì–´ (ê°€ì¥ ë†’ì€ ìˆ™ë ¨ë„) ì¡°íšŒ
     */
â‹®----
List<CoordinatorLanguageSkill> findPrimaryLanguages(@Param("coordinatorId") String coordinatorId);
â‹®----
/**
     * ì–¸ì–´ ìŠ¤í‚¬ ìš°ì„ ìˆœìœ„ ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•œ ë°°ì¹˜ ì¡°íšŒ
     */
â‹®----
List<String> findCoordinatorsWithMultipleLanguages();
â‹®----
/**
     * ë¹„í™œì„± ì–¸ì–´ ìŠ¤í‚¬ ì •ë¦¬ë¥¼ ìœ„í•œ ì¡°íšŒ
     */
â‹®----
List<CoordinatorLanguageSkill> findInactiveSkillsOlderThan(@Param("cutoffDate") java.time.LocalDateTime cutoffDate);
â‹®----
/**
     * ì½”ë””ë„¤ì´í„°ë³„ ì–¸ì–´ ìŠ¤í‚¬ ê°œìˆ˜ ì¡°íšŒ
     */
â‹®----
List<Object[]> findLanguageSkillCountByCoordinator();
â‹®----
/**
     * íŠ¹ì • ì§€ì—­ì—ì„œ íŠ¹ì • ì–¸ì–´ë¥¼ êµ¬ì‚¬í•˜ëŠ” ì½”ë””ë„¤ì´í„° ì¡°íšŒ
     * CoordinatorCareSettingsì™€ ì¡°ì¸
     */
â‹®----
List<CoordinatorLanguageSkill> findByLanguageAndRegion(
â‹®----
/**
     * ì–¸ì–´ ìŠ¤í‚¬ ë¶„í¬ ë¶„ì„ (ìˆ™ë ¨ë„ë³„)
     */
â‹®----
List<Object[]> findProficiencyDistribution();
â‹®----
/**
     * ì„±ëŠ¥ ìµœì í™”ëœ ì–¸ì–´ ë§¤ì¹­ ì¿¼ë¦¬
     * ë„¤ì´í‹°ë¸Œ ì¿¼ë¦¬ë¡œ ì¸ë±ìŠ¤ ìµœì í™”
     */
â‹®----
List<CoordinatorLanguageSkill> findOptimalLanguageMatches(
â‹®----
/**
     * ìºì‹œ ë¬´íš¨í™”ë¥¼ ìœ„í•œ ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ì‹œê°„ ì¡°íšŒ
     */
â‹®----
java.time.LocalDateTime findLastUpdateTime();
</file>

<file path="src/main/java/com/globalcarelink/coordinator/CoordinatorMatch.java">
import lombok.*;
â‹®----
public class CoordinatorMatch {
â‹®----
public boolean isAvailable() {
â‹®----
public String getAvailabilityStatus() {
â‹®----
public String getExperienceLevel() {
â‹®----
public String getSatisfactionLevel() {
</file>

<file path="src/main/java/com/globalcarelink/coordinator/CoordinatorMatchingController.java">
public class CoordinatorMatchingController {
â‹®----
public ResponseEntity<List<CoordinatorMatch>> matchCoordinators(
â‹®----
log.info("ì½”ë””ë„¤ì´í„° ë§¤ì¹­ ìš”ì²­ - í‰ê°€ID: {}, ì„ í˜¸ì–¸ì–´: {}",
healthAssessmentId, preference.getPreferredLanguage());
â‹®----
Optional<HealthAssessment> assessmentOpt = healthAssessmentService.getAssessmentById(healthAssessmentId);
if (assessmentOpt.isEmpty()) {
return ResponseEntity.notFound().build();
â‹®----
HealthAssessment assessment = assessmentOpt.get();
List<CoordinatorMatch> matches = matchingService.findOptimalMatches(assessment, preference);
â‹®----
log.info("ì½”ë””ë„¤ì´í„° ë§¤ì¹­ ì™„ë£Œ - í‰ê°€ID: {}, ë§¤ì¹­ê²°ê³¼: {}ëª…", healthAssessmentId, matches.size());
â‹®----
return ResponseEntity.ok(matches);
â‹®----
public ResponseEntity<List<CoordinatorMatch>> getCoordinatorsByLanguage(
â‹®----
log.info("ì–¸ì–´ë³„ ì½”ë””ë„¤ì´í„° ì¡°íšŒ - ì–¸ì–´: {}, êµ­ê°€: {}", languageCode, countryCode);
â‹®----
MatchingPreference preference = MatchingPreference.builder()
.preferredLanguage(languageCode)
.countryCode(countryCode)
.needsProfessionalConsultation(needsProfessionalConsultation)
.build();
â‹®----
HealthAssessment dummyAssessment = HealthAssessment.builder()
.mobilityLevel(2)
.eatingLevel(2)
.toiletLevel(2)
.communicationLevel(2)
.ltciGrade(4)
â‹®----
dummyAssessment.calculateAdlScore();
â‹®----
List<CoordinatorMatch> matches = matchingService.findOptimalMatches(dummyAssessment, preference);
â‹®----
public ResponseEntity<List<CoordinatorCareSettings>> getCoordinatorsBySpecialty(
â‹®----
log.info("ì „ë¬¸ë¶„ì•¼ë³„ ì½”ë””ë„¤ì´í„° ì¡°íšŒ - ë¶„ì•¼: {}", specialty);
â‹®----
List<CoordinatorCareSettings> coordinators = coordinatorCareSettingsService.getCoordinatorsBySpecialty(specialty);
â‹®----
return ResponseEntity.ok(coordinators);
â‹®----
public ResponseEntity<List<CoordinatorCareSettings>> getAvailableCoordinators() {
â‹®----
log.info("ê°€ìš©í•œ ì½”ë””ë„¤ì´í„° ì¡°íšŒ ìš”ì²­");
â‹®----
List<CoordinatorCareSettings> availableCoordinators = coordinatorCareSettingsService.getAvailableCoordinators();
â‹®----
return ResponseEntity.ok(availableCoordinators);
â‹®----
public ResponseEntity<CoordinatorMatchingStatistics> getMatchingStatistics() {
â‹®----
log.info("ì½”ë””ë„¤ì´í„° ë§¤ì¹­ í†µê³„ ì¡°íšŒ");
â‹®----
CoordinatorMatchingStatistics statistics = coordinatorCareSettingsService.getMatchingStatistics();
â‹®----
return ResponseEntity.ok(statistics);
â‹®----
public ResponseEntity<MatchingSimulationResult> simulateMatching(
â‹®----
log.info("ë§¤ì¹­ ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘ - í‰ê°€ìˆ˜: {}, ì½”ë””ë„¤ì´í„°ìˆ˜: {}",
request.getHealthAssessmentCount(), request.getCoordinatorCount());
â‹®----
MatchingSimulationResult result = coordinatorCareSettingsService.runMatchingSimulation(request);
â‹®----
return ResponseEntity.ok(result);
</file>

<file path="src/main/java/com/globalcarelink/coordinator/CoordinatorMatchingStatistics.java">
import lombok.*;
â‹®----
public class CoordinatorMatchingStatistics {
â‹®----
public String getSatisfactionLevel() {
â‹®----
public double getAvailabilityRate() {
</file>

<file path="src/main/java/com/globalcarelink/coordinator/CoordinatorWorkloadOptimizer.java">
public class CoordinatorWorkloadOptimizer {
â‹®----
public List<CoordinatorMatch> optimizeWorkloadDistribution(List<CoordinatorMatch> matches) {
return matches.stream()
.map(match -> {
double workloadScore = calculateWorkloadScore(match);
â‹®----
double adjustedScore = match.getMatchScore() + (workloadScore * 0.3);
â‹®----
String workloadReason = generateWorkloadReason(workloadScore);
String combinedReason = match.getMatchReason() + "\n" + workloadReason;
â‹®----
return CoordinatorMatch.builder()
.coordinatorId(match.getCoordinatorId())
.name(match.getName())
.matchScore(Math.min(adjustedScore, 5.0))
.matchReason(combinedReason)
.experienceYears(match.getExperienceYears())
.successfulCases(match.getSuccessfulCases())
.customerSatisfaction(match.getCustomerSatisfaction())
.specialtyAreas(match.getSpecialtyAreas())
.compatibleCareGrades(match.getCompatibleCareGrades())
.languageSkills(match.getLanguageSkills())
.availableWeekends(match.getAvailableWeekends())
.availableEmergency(match.getAvailableEmergency())
.workingRegions(match.getWorkingRegions())
.currentActiveCases(match.getCurrentActiveCases())
.maxSimultaneousCases(match.getMaxSimultaneousCases())
.workloadRatio(match.getWorkloadRatio())
.build();
â‹®----
.sorted(Comparator.comparing(CoordinatorMatch::getMatchScore).reversed())
.collect(Collectors.toList());
â‹®----
private double calculateWorkloadScore(CoordinatorMatch match) {
double workloadRatio = match.getWorkloadRatio();
â‹®----
private String generateWorkloadReason(double workloadScore) {
</file>

<file path="src/main/java/com/globalcarelink/coordinator/MatchingExplanationGenerator.java">
public class MatchingExplanationGenerator {
â‹®----
public String generateMatchReason(CoordinatorCareSettings coordinator, HealthAssessment assessment, double matchScore) {
StringBuilder reason = new StringBuilder();
â‹®----
if (isSpecialtyMatch(coordinator, assessment)) {
reason.append("ğŸ¯ ì „ë¬¸ ë¶„ì•¼ ì™„ë²½ ë§¤ì¹­: ");
reason.append(getSpecialtyDescription(coordinator, assessment));
reason.append("\n");
â‹®----
int experience = coordinator.getExperienceYears();
reason.append("ğŸ“Š ê²½ë ¥: ").append(experience).append("ë…„ (");
if (experience >= 10) reason.append("ìµœê³  ì „ë¬¸ê°€");
else if (experience >= 5) reason.append("ìˆ™ë ¨ ì „ë¬¸ê°€");
else if (experience >= 2) reason.append("ê²½ë ¥ì");
else reason.append("ì‹ ì…");
reason.append(")\n");
â‹®----
double satisfaction = coordinator.getCustomerSatisfaction();
reason.append("â­ ê³ ê° ë§Œì¡±ë„: ").append(satisfaction).append("/5.0");
if (satisfaction >= 4.5) reason.append(" (ìµœìš°ìˆ˜)");
else if (satisfaction >= 4.0) reason.append(" (ìš°ìˆ˜)");
else if (satisfaction >= 3.5) reason.append(" (ì–‘í˜¸)");
â‹®----
int successfulCases = coordinator.getSuccessfulCases();
int totalCases = coordinator.getTotalCases();
â‹®----
reason.append("ğŸ† ì„±ê³µë¥ : ").append(String.format("%.1f", successRate))
.append("% (").append(successfulCases).append("/").append(totalCases).append("ê±´)\n");
â‹®----
reason.append("ğŸ’¼ ì „ì²´ ë§¤ì¹­ ì ìˆ˜: ").append(String.format("%.1f", matchScore)).append("/5.0");
â‹®----
return reason.toString();
â‹®----
private boolean isSpecialtyMatch(CoordinatorCareSettings coordinator, HealthAssessment assessment) {
if (coordinator.getSpecialtyAreas() == null || coordinator.getSpecialtyAreas().isEmpty()) {
â‹®----
if (assessment.getLtciGrade() == 6 || assessment.getCommunicationLevel() == 3) {
if (coordinator.hasSpecialty("dementia")) return true;
â‹®----
if (assessment.getCareGradeLevel() <= 2) {
if (coordinator.hasSpecialty("medical")) return true;
â‹®----
if (assessment.getMobilityLevel() >= 2) {
if (coordinator.hasSpecialty("rehabilitation")) return true;
â‹®----
private String getSpecialtyDescription(CoordinatorCareSettings coordinator, HealthAssessment assessment) {
StringBuilder description = new StringBuilder();
â‹®----
if (coordinator.hasSpecialty("dementia")) {
description.append("ì¹˜ë§¤ ì „ë¬¸ ì¼€ì–´");
â‹®----
if (coordinator.hasSpecialty("medical")) {
if (description.length() > 0) description.append(", ");
description.append("ì˜ë£Œ ì „ë¬¸ ì¼€ì–´");
â‹®----
if (coordinator.hasSpecialty("rehabilitation")) {
â‹®----
description.append("ì¬í™œ ì „ë¬¸ ì¼€ì–´");
â‹®----
return description.toString();
</file>

<file path="src/main/java/com/globalcarelink/coordinator/MatchingPreference.java">
import lombok.*;
â‹®----
public class MatchingPreference {
â‹®----
public Integer getMaxResults() {
â‹®----
public Double getMinCustomerSatisfaction() {
</file>

<file path="src/main/java/com/globalcarelink/coordinator/MatchingSimulationRequest.java">
import lombok.*;
â‹®----
public class MatchingSimulationRequest {
â‹®----
private String simulationType; // RANDOM, REALISTIC, STRESS_TEST
</file>

<file path="src/main/java/com/globalcarelink/coordinator/MatchingSimulationResult.java">
import lombok.*;
â‹®----
public class MatchingSimulationResult {
â‹®----
private LocalDateTime simulationTime = LocalDateTime.now();
â‹®----
public Integer getFailedMatches() {
â‹®----
public String getPerformanceLevel() {
â‹®----
public String getSuccessRateLevel() {
</file>

<file path="src/main/java/com/globalcarelink/facility/FacilityProfile.java">
import lombok.*;
â‹®----
/**
 * ìš”ì–‘ì‹œì„¤ í”„ë¡œí•„ ì—”í‹°í‹°
 * ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì› ê¸°ì¤€ A-E ë“±ê¸‰ ì‹œìŠ¤í…œ ì ìš©
 * ì‹œì„¤ íƒ€ì…ë³„ ë¶„ë¥˜ ë° ì „ë¬¸ì„± ê´€ë¦¬
 */
â‹®----
public class FacilityProfile extends BaseEntity {
â‹®----
// ===== ì™¸ë¶€ ì—°ë™ ì •ë³´ =====
â‹®----
private String externalId; // ê³µê³µë°ì´í„° API ê¸°ê´€ ì½”ë“œ
â‹®----
private String dataSource; // ë°ì´í„° ì¶œì²˜ (PUBLIC_API, MANUAL ë“±)
â‹®----
private LocalDateTime lastSyncedAt; // ë§ˆì§€ë§‰ ë™ê¸°í™” ì‹œê°„
â‹®----
// ===== ê¸°ë³¸ ì •ë³´ =====
â‹®----
private String facilityCode; // ì¥ê¸°ìš”ì–‘ê¸°ê´€ ì½”ë“œ
â‹®----
private String facilityType; // ì‹œì„¤ ìœ í˜•
â‹®----
private String facilityGrade; // ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì› A-E ë“±ê¸‰
â‹®----
private Integer evaluationScore; // ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì› í‰ê°€ ì ìˆ˜
â‹®----
// ===== ì—°ë½ì²˜ ë° ì£¼ì†Œ ì •ë³´ =====
â‹®----
private String websiteUrl; // ì›¹ì‚¬ì´íŠ¸ URL (homepageì™€ ë³„ë„)
â‹®----
private String address; // ì „ì²´ ì£¼ì†Œ
â‹®----
private String region; // ì‹œ/ë„
â‹®----
private String district; // êµ¬/êµ°/ì‹œ
â‹®----
private String detailedAddress; // ìƒì„¸ ì£¼ì†Œ
â‹®----
// ===== ìœ„ì¹˜ ì •ë³´ (ì§€ë„ ì—°ë™) =====
â‹®----
private BigDecimal latitude; // ìœ„ë„
â‹®----
private BigDecimal longitude; // ê²½ë„
â‹®----
// ===== ì‹œì„¤ ê·œëª¨ ë° ìˆ˜ìš© ëŠ¥ë ¥ =====
â‹®----
private Integer totalCapacity; // ì´ ì •ì›
â‹®----
private Integer currentOccupancy = 0; // í˜„ì¬ ì…ì£¼ì ìˆ˜
â‹®----
private Integer availableBeds; // ê°€ìš© ì¹¨ëŒ€ ìˆ˜ (ìë™ ê³„ì‚°)
â‹®----
private Integer roomCount; // ë°© ê°œìˆ˜
â‹®----
private Integer buildingFloors; // ê±´ë¬¼ ì¸µìˆ˜
â‹®----
// ===== ì¸ë ¥ í˜„í™© =====
â‹®----
private Integer caregiverCount = 0; // ê°„ë³‘ì¸ ìˆ˜
â‹®----
// ===== ì¼€ì–´ ê°€ëŠ¥ ë“±ê¸‰ ë° ì „ë¬¸ì„± =====
â‹®----
private Set<Integer> acceptableCareGrades; // ì¼€ì–´ ê°€ëŠ¥ ë“±ê¸‰ [1,2,3,4,5,6]
â‹®----
private Set<String> specializations; // ì „ë¬¸ ë¶„ì•¼ ["dementia", "medical", "rehabilitation", "hospice"]
â‹®----
// ===== ì˜ë£Œì§„ ë° ì¸ë ¥ ì •ë³´ =====
â‹®----
private Boolean hasDoctor = false; // ì˜ì‚¬ ìƒì£¼ ì—¬ë¶€
â‹®----
private Boolean hasNurse24h = false; // 24ì‹œê°„ ê°„í˜¸ì‚¬ ìƒì£¼
â‹®----
private Integer nurseCount = 0; // ê°„í˜¸ì‚¬ ìˆ˜
â‹®----
private Integer doctorCount = 0; // ì˜ì‚¬ ìˆ˜
â‹®----
private Integer totalStaff = 0; // ì´ ì§ì› ìˆ˜
â‹®----
// ===== ì‹œì„¤ ìƒì„¸ ì •ë³´ =====
â‹®----
private Double totalFloorArea; // ì´ ì—°ë©´ì 
â‹®----
private String buildingStructure; // ê±´ë¬¼ êµ¬ì¡°
â‹®----
private Integer parkingSpaces; // ì£¼ì°¨ ê³µê°„
â‹®----
private String specialServices; // ì „ë¬¸ ì„œë¹„ìŠ¤ (ì½¤ë§ˆ êµ¬ë¶„)
â‹®----
private Integer mealCost; // ì›” ì‹ë¹„
â‹®----
// ===== ìš´ì˜ ì •ë³´ =====
â‹®----
private String operationStatus; // ìš´ì˜ ìƒíƒœ
â‹®----
private String establishmentDate; // ê°œì„¤ì¼
â‹®----
private String closureDate; // íì—…ì¼
â‹®----
private String representativeName; // ëŒ€í‘œìëª…
â‹®----
private String businessRegistrationNumber; // ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸
â‹®----
// ===== ì‹œì„¤ íŠ¹ì§• ë° í¸ì˜ì‹œì„¤ =====
â‹®----
private Boolean hasElevator = false; // ì—˜ë¦¬ë² ì´í„° ë³´ìœ 
â‹®----
private Boolean hasEmergencySystem = false; // ì‘ê¸‰ì‹œìŠ¤í…œ êµ¬ë¹„
â‹®----
private Boolean hasRehabilitationRoom = false; // ì¬í™œì‹¤ ë³´ìœ 
â‹®----
private Boolean hasMedicalRoom = false; // ì˜ë¬´ì‹¤ ë³´ìœ 
â‹®----
private Boolean hasDementiaProgram = false; // ì¹˜ë§¤ í”„ë¡œê·¸ë¨ ìš´ì˜
â‹®----
private Boolean hasGarden = false; // ì •ì›/ì‚°ì±…ë¡œ ë³´ìœ 
â‹®----
private Boolean hasParking = false; // ì£¼ì°¨ì¥ ë³´ìœ 
â‹®----
// ===== ì ‘ê·¼ì„± ì •ë³´ =====
â‹®----
private Boolean nearSubway = false; // ì§€í•˜ì²  ì ‘ê·¼ì„± (1km ì´ë‚´)
â‹®----
private Boolean nearHospital = false; // ë³‘ì› ê·¼ì ‘ì„± (3km ì´ë‚´)
â‹®----
private Boolean nearPharmacy = false; // ì•½êµ­ ê·¼ì ‘ì„± (1km ì´ë‚´)
â‹®----
private String publicTransportAccess; // ëŒ€ì¤‘êµí†µ ì ‘ê·¼ ì •ë³´
â‹®----
// ===== ë¹„ìš© ì •ë³´ =====
â‹®----
private Integer monthlyBasicFee; // ì›” ê¸°ë³¸ë£Œ (ë§Œì›)
â‹®----
private Integer admissionFee; // ì…ì†Œê¸ˆ (ë§Œì›)
â‹®----
private Boolean acceptsLtci = true; // ì¥ê¸°ìš”ì–‘ë³´í—˜ ì ìš© ì—¬ë¶€
â‹®----
private Boolean acceptsBasicLiving = false; // ê¸°ì´ˆìƒí™œìˆ˜ê¸‰ì ìˆ˜ìš© ì—¬ë¶€
â‹®----
private String businessStatus = "ì •ìƒ"; // ìš´ì˜ ìƒíƒœ
â‹®----
private LocalDateTime openingDate; // ê°œì›ì¼
â‹®----
private LocalDateTime lastEvaluationDate; // ë§ˆì§€ë§‰ í‰ê°€ì¼
â‹®----
private LocalDateTime nextEvaluationDate; // ë‹¤ìŒ í‰ê°€ ì˜ˆì •ì¼
â‹®----
// ===== ì¶”ê°€ ì •ë³´ =====
â‹®----
private String description; // ì‹œì„¤ ì„¤ëª…
â‹®----
private String specialPrograms; // íŠ¹ë³„ í”„ë¡œê·¸ë¨
â‹®----
// ===== ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì„œë“œ =====
â‹®----
/**
     * ê°€ìš© ì¹¨ëŒ€ ìˆ˜ ìë™ ê³„ì‚°
     */
public void calculateAvailableBeds() {
â‹®----
/**
     * ì…ì£¼ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
     */
public boolean hasAvailableSpace() {
calculateAvailableBeds();
â‹®----
/**
     * íŠ¹ì • ì¼€ì–´ ë“±ê¸‰ ìˆ˜ìš© ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
     */
public boolean canAcceptCareGrade(Integer careGrade) {
return acceptableCareGrades != null && acceptableCareGrades.contains(careGrade);
â‹®----
/**
     * ì „ë¬¸ ë¶„ì•¼ ì—¬ë¶€ í™•ì¸
     */
public boolean hasSpecialization(String specialization) {
return specializations != null && specializations.contains(specialization);
â‹®----
/**
     * ì¬ì™¸ë™í¬ ì¹œí™”ì  ì‹œì„¤ ì ìˆ˜ ê³„ì‚° (10ì  ë§Œì )
     */
public double getOverseasFriendlyScore() {
â‹®----
// ì‹œì„¤ ë“±ê¸‰ (3ì )
if ("A".equals(facilityGrade)) score += 3.0;
else if ("B".equals(facilityGrade)) score += 2.0;
else if ("C".equals(facilityGrade)) score += 1.0;
â‹®----
// ì˜ë£Œì§„ ìƒì£¼ (2ì )
if (Boolean.TRUE.equals(hasDoctor)) score += 1.0;
if (Boolean.TRUE.equals(hasNurse24h)) score += 1.0;
â‹®----
// ì ‘ê·¼ì„± (2ì )
if (Boolean.TRUE.equals(nearSubway)) score += 1.0;
if (Boolean.TRUE.equals(nearHospital)) score += 1.0;
â‹®----
// ì‹œì„¤ í˜„ëŒ€í™” (1.5ì )
if (Boolean.TRUE.equals(hasElevator)) score += 0.5;
if (Boolean.TRUE.equals(hasEmergencySystem)) score += 0.5;
if (Boolean.TRUE.equals(hasRehabilitationRoom)) score += 0.5;
â‹®----
// ê²½ì œì  ì ‘ê·¼ì„± (1.5ì )
if (Boolean.TRUE.equals(acceptsLtci)) score += 1.0;
if (Boolean.TRUE.equals(acceptsBasicLiving)) score += 0.5;
â‹®----
return Math.min(score, 10.0);
â‹®----
/**
     * ì‹œì„¤ ì‹ ë¢°ë„ ì ìˆ˜ ê³„ì‚° (100ì  ë§Œì )
     */
public int getReliabilityScore() {
int score = 50; // ê¸°ë³¸ ì ìˆ˜
â‹®----
// ìš´ì˜ ìƒíƒœë³„ ì ìˆ˜
â‹®----
// ì‹œì„¤ ë“±ê¸‰ë³„ ì¶”ê°€ ì ìˆ˜
â‹®----
return Math.max(0, Math.min(score, 100));
â‹®----
/**
     * ì›” ì˜ˆìƒ ë¹„ìš© ë²”ìœ„ ë°˜í™˜
     */
public String getEstimatedMonthlyCostRange() {
â‹®----
int maxCost = (int) (basicFee * 1.5); // ì¶”ê°€ ì„œë¹„ìŠ¤ ë¹„ìš© ê³ ë ¤
â‹®----
return String.format("%d-%dë§Œì›", minCost, maxCost);
â‹®----
/**
     * ì‹œì„¤ íƒ€ì…ë³„ ì¼€ì–´ ë“±ê¸‰ í˜¸í™˜ì„± í™•ì¸
     */
public boolean isCompatibleWithCareGrade(Integer careGrade) {
â‹®----
case "ì–‘ë¡œì‹œì„¤" -> careGrade >= 4; // 4-5ë“±ê¸‰ë§Œ ê°€ëŠ¥
case "ë…¸ì¸ìš”ì–‘ì‹œì„¤" -> true; // ëª¨ë“  ë“±ê¸‰ ê°€ëŠ¥
case "ìš”ì–‘ë³‘ì›" -> careGrade <= 3; // 1-3ë“±ê¸‰ ê¶Œì¥
case "ë…¸ì¸ìš”ì–‘ê³µë™ìƒí™œê°€ì •" -> careGrade >= 3; // 3-5ë“±ê¸‰ ì í•©
case "ì¹˜ë§¤ì „ë¬¸ì‹œì„¤" -> careGrade == 6; // ì¸ì§€ì§€ì›ë“±ê¸‰
case "í˜¸ìŠ¤í”¼ìŠ¤ì „ë¬¸ì‹œì„¤" -> careGrade <= 2; // 1-2ë“±ê¸‰ (ìƒëª…ìœ„í—˜)
default -> canAcceptCareGrade(careGrade);
â‹®----
/**
     * ì‹œì„¤ íŠ¹ì§• ìš”ì•½ í…ìŠ¤íŠ¸ ìƒì„±
     */
public String generateFacilitySummary() {
StringBuilder summary = new StringBuilder();
â‹®----
summary.append("ğŸ¥ ").append(facilityName).append(" (").append(facilityType).append(")\n");
â‹®----
summary.append("â­ í‰ê°€ë“±ê¸‰: ").append(facilityGrade).append("ë“±ê¸‰");
â‹®----
summary.append(" (").append(evaluationScore).append("ì )");
â‹®----
summary.append("\n");
â‹®----
summary.append("ğŸ‘¥ ì •ì›: ").append(currentOccupancy != null ? currentOccupancy : 0)
.append("/").append(totalCapacity).append("ëª…");
â‹®----
if (hasAvailableSpace()) {
summary.append(" (ì…ì£¼ ê°€ëŠ¥)");
â‹®----
summary.append(" (ëŒ€ê¸° í•„ìš”)");
â‹®----
summary.append("ğŸ’° ì›” ë¹„ìš©: ").append(getEstimatedMonthlyCostRange()).append("\n");
â‹®----
if (Boolean.TRUE.equals(hasDoctor) || Boolean.TRUE.equals(hasNurse24h)) {
summary.append("âš•ï¸ ì˜ë£Œì§„: ");
if (Boolean.TRUE.equals(hasDoctor)) summary.append("ì˜ì‚¬ ìƒì£¼ ");
if (Boolean.TRUE.equals(hasNurse24h)) summary.append("24ì‹œê°„ ê°„í˜¸ ");
â‹®----
return summary.toString();
</file>

<file path="src/main/java/com/globalcarelink/health/CareGradeCalculator.java">
/**
 * ì¼€ì–´ ë“±ê¸‰ ê³„ì‚°ê¸°
 * KBë¼ì´í”„ìƒëª… ê¸°ë°˜ ëŒë´„ì§€ìˆ˜ ì²´í¬ ì‹œìŠ¤í…œ êµ¬í˜„
 */
â‹®----
public class CareGradeCalculator {
â‹®----
/**
     * ì¢…í•© ì¼€ì–´ ë“±ê¸‰ ê³„ì‚° (KBë¼ì´í”„ìƒëª… ìš°ì„ ìˆœìœ„ ë¡œì§ ì ìš©)
     * ADL ì ìˆ˜ + ì¥ê¸°ìš”ì–‘ë³´í—˜ ë“±ê¸‰ + ëŒë´„ëŒ€ìƒì ìƒíƒœë¥¼ ì¢…í•©í•˜ì—¬ ì‚°ì¶œ
     */
public CareGradeResult calculateComprehensiveGrade(HealthAssessment assessment) {
log.debug("ì¼€ì–´ ë“±ê¸‰ ê³„ì‚° ì‹œì‘ - íšŒì›: {}", assessment.getMemberId());
â‹®----
// 1. ê¸°ë³¸ ADL ì ìˆ˜ ê³„ì‚°
int adlScore = calculateADLScore(assessment);
assessment.setAdlScore(adlScore);
â‹®----
// 2. ì¥ê¸°ìš”ì–‘ë³´í—˜ ë“±ê¸‰ ë°˜ì˜
int ltciGrade = assessment.getLtciGrade() != null ? assessment.getLtciGrade() : 8;
â‹®----
// 3. ëŒë´„ëŒ€ìƒì ìƒíƒœ ë°˜ì˜
int careTargetStatus = assessment.getCareTargetStatus() != null ? assessment.getCareTargetStatus() : 4;
â‹®----
// 4. ì¢…í•© ì¼€ì–´ ë“±ê¸‰ ë„ì¶œ (KBë¼ì´í”„ìƒëª… ìš°ì„ ìˆœìœ„ ë°©ì‹)
CareGradeResult result = determineOverallCareGrade(assessment, adlScore, ltciGrade, careTargetStatus);
â‹®----
// 5. í‰ê°€ ê²°ê³¼ ì €ì¥
assessment.setOverallCareGrade(result.getGradeName());
â‹®----
log.info("ì¼€ì–´ ë“±ê¸‰ ê³„ì‚° ì™„ë£Œ - íšŒì›: {}, ADLì ìˆ˜: {}, ì¢…í•©ë“±ê¸‰: {}, íŠ¹í™”ì¼€ì–´: {}",
assessment.getMemberId(), adlScore, result.getGradeName(), assessment.getSpecializedCareType());
â‹®----
/**
     * ADL ì ìˆ˜ ê³„ì‚° (ì¼ìƒìƒí™œìˆ˜í–‰ëŠ¥ë ¥)
     * ê° ì˜ì—­ë³„ ê°€ì¤‘ì¹˜ ì ìš©:
     * - ê±·ê¸°: 25%
     * - ì‹ì‚¬: 20%  
     * - ë°°ë³€: 30%
     * - ì˜ì‚¬ì†Œí†µ: 25%
     */
private int calculateADLScore(HealthAssessment assessment) {
int mobility = assessment.getMobilityLevel();
int eating = assessment.getEatingLevel();
int toilet = assessment.getToiletLevel();
int communication = assessment.getCommunicationLevel();
â‹®----
// ê° ì˜ì—­ë³„ ê°€ì¤‘ì¹˜ ì ìš© (1-3ì ì„ 25-75ì ìœ¼ë¡œ í™˜ì‚°)
int mobilityScore = mobility * 25;        // 25, 50, 75
int eatingScore = eating * 20;            // 20, 40, 60
int toiletScore = toilet * 30;            // 30, 60, 90
int communicationScore = communication * 25; // 25, 50, 75
â‹®----
log.debug("ADL ì ìˆ˜ ê³„ì‚° - ê±·ê¸°:{}({}ì ), ì‹ì‚¬:{}({}ì ), ë°°ë³€:{}({}ì ), ì˜ì‚¬ì†Œí†µ:{}({}ì ) = ì´ {}ì ",
â‹®----
/**
     * ì¢…í•© ì¼€ì–´ ë“±ê¸‰ ê²°ì • (KBë¼ì´í”„ìƒëª… ìš°ì„ ìˆœìœ„ ë¡œì§ ì ìš©)
     */
private CareGradeResult determineOverallCareGrade(HealthAssessment assessment, int adlScore, int ltciGrade, int careTargetStatus) {
â‹®----
// === 1ë‹¨ê³„: íŠ¹ìˆ˜ ìƒí™© ìš°ì„  ì ìš© (KBë¼ì´í”„ìƒëª… ë°©ì‹) ===
if (careTargetStatus == 1) { // 6ê°œì›” ì´í•˜ ê¸°ëŒ€ìˆ˜ëª…
return createHospiceGrade("ìƒëª…ìœ„í—˜ ê³ ë„", "6ê°œì›” ì´í•˜ ê¸°ëŒ€ìˆ˜ëª… ìƒíƒœ");
â‹®----
if (careTargetStatus == 2) { // íšŒë³µ ì–´ë ¤ìš´ ìƒí™©
return createHospiceGrade("ìƒëª…ìœ„í—˜ ì¤‘ë“±ë„", "ì§ˆë³‘ íšŒë³µì´ ì–´ë ¤ìš´ ìƒí™©");
â‹®----
if (careTargetStatus == 3) { // ì™„ì „ ì˜ì¡´ì  ìƒíƒœ
return CareGradeResult.builder()
.gradeLevel(1)
.gradeName("1ë“±ê¸‰ (ìµœì¤‘ì¦ - ì™„ì „ì˜ì¡´)")
.description("ì™„ì „íˆ íƒ€ì¸ì—ê²Œ ì˜ì¡´ì ì¸ ìƒíƒœ")
.recommendedFacilityTypes("ì „ë¬¸ ìš”ì–‘ë³‘ì›, Aë“±ê¸‰ ìš”ì–‘ì‹œì„¤")
.urgencyLevel("ë§¤ìš° ë†’ìŒ")
.medicalSupport("ì˜ë£Œì§„ 24ì‹œê°„ ìƒì£¼")
.build();
â‹®----
// === 2ë‹¨ê³„: ì¤‘ì¦ ì§€í‘œ ìš°ì„  ì²´í¬ (KBë¼ì´í”„ìƒëª… ë°©ì‹) ===
â‹®----
// ê²½ê´€ì‹(íŠœë¸Œ ì£¼ì…) ë˜ëŠ” ë°°ë³€í™œë™ ì™„ì „ë„ì›€ â†’ ìµœì¤‘ì¦ íŒì •
if ((assessment.getMealType() != null && assessment.getMealType() == 3) ||
(assessment.getToiletLevel() != null && assessment.getToiletLevel() == 3)) {
â‹®----
.gradeName("1ë“±ê¸‰ (ìµœì¤‘ì¦ - ì¤‘ì¦ì§€í‘œ)")
.description("ê²½ê´€ì‹ ë˜ëŠ” ë°°ë³€í™œë™ ì™„ì „ë„ì›€ í•„ìš”")
.recommendedFacilityTypes("ìš”ì–‘ë³‘ì›, ì „ë¬¸ ê°„ë³‘ì‹œì„¤")
â‹®----
.medicalSupport("ì˜ë£Œì§„ ë° ì „ë¬¸ ê°„ë³‘ì¸ ìƒì£¼")
â‹®----
// === 3ë‹¨ê³„: ì¸ì§€ì§€ì›ë“±ê¸‰ (ì¹˜ë§¤ ì „ë¬¸ ì¼€ì–´) ===
â‹®----
return createDementiaGrade(assessment);
â‹®----
// === 4ë‹¨ê³„: ì¥ê¸°ìš”ì–‘ë“±ê¸‰ ê¸°ë°˜ íŒì • (1-5ë“±ê¸‰) ===
â‹®----
return createLtciBasedGrade(ltciGrade, adlScore, assessment);
â‹®----
// === 5ë‹¨ê³„: ì¥ê¸°ìš”ì–‘ë“±ê¸‰ì´ ì—†ëŠ” ê²½ìš° ADL ì ìˆ˜ ê¸°ë°˜ ì¶”ì • ===
return createAdlBasedGrade(adlScore, assessment);
â‹®----
/**
     * í˜¸ìŠ¤í”¼ìŠ¤ ì¼€ì–´ ë“±ê¸‰ ìƒì„±
     */
private CareGradeResult createHospiceGrade(String severityLevel, String description) {
â‹®----
.gradeLevel(0) // íŠ¹ë³„ ë“±ê¸‰
.gradeName("í˜¸ìŠ¤í”¼ìŠ¤ ì¼€ì–´ (" + severityLevel + ")")
.description(description)
.recommendedFacilityTypes("í˜¸ìŠ¤í”¼ìŠ¤ ì „ë¬¸ì‹œì„¤, ì™„í™”ì˜ë£Œì„¼í„°")
.urgencyLevel("ìµœìš°ì„ ")
.medicalSupport("ì™„í™”ì˜ë£Œ ì „ë¬¸ì˜, 24ì‹œê°„ ì¼€ì–´íŒ€")
â‹®----
/**
     * ì¹˜ë§¤ ì „ë¬¸ ì¼€ì–´ ë“±ê¸‰ ìƒì„± (ì§ˆí™˜ ì •ë³´ ë°˜ì˜)
     */
private CareGradeResult createDementiaGrade(HealthAssessment assessment) {
â‹®----
// ì§ˆí™˜ ì •ë³´ê°€ ìˆìœ¼ë©´ ë” ì„¸ë°€í•œ ì¶”ì²œ
if (assessment != null && assessment.getDiseaseTypes() != null) {
if (assessment.getDiseaseTypes().contains("PARKINSON")) {
â‹®----
} else if (assessment.getDiseaseTypes().contains("STROKE")) {
â‹®----
.gradeLevel(6)
.gradeName("ì¸ì§€ì§€ì›ë“±ê¸‰ (ì¹˜ë§¤ ì „ë¬¸)")
â‹®----
.recommendedFacilityTypes(facilityTypes)
.urgencyLevel("ë†’ìŒ")
.medicalSupport("ì¹˜ë§¤ ì „ë¬¸ì˜, ì¸ì§€ì¬í™œ í”„ë¡œê·¸ë¨")
â‹®----
/**
     * ì¥ê¸°ìš”ì–‘ë³´í—˜ ë“±ê¸‰ ê¸°ë°˜ ì¼€ì–´ ë“±ê¸‰ ìƒì„± (ì§ˆí™˜ ì •ë³´ ë°˜ì˜)
     */
private CareGradeResult createLtciBasedGrade(int ltciGrade, int adlScore, HealthAssessment assessment) {
â‹®----
.gradeName("1ë“±ê¸‰ (ìµœì¤‘ì¦)")
.description("24ì‹œê°„ ì „ë¬¸ ì¼€ì–´ê°€ í•„ìš”í•œ ìµœì¤‘ì¦ ìƒíƒœ")
.recommendedFacilityTypes("ìš”ì–‘ë³‘ì›, Aë“±ê¸‰ ìš”ì–‘ì‹œì„¤")
â‹®----
.medicalSupport("ì˜ì‚¬ ë° ê°„í˜¸ì‚¬ 24ì‹œê°„ ìƒì£¼")
â‹®----
.gradeLevel(2)
.gradeName("2ë“±ê¸‰ (ì¤‘ì¦)")
.description("ì§‘ì¤‘ì ì¸ ì˜ë£Œ ì§€ì›ì´ í•„ìš”í•œ ì¤‘ì¦ ìƒíƒœ")
.recommendedFacilityTypes("ìš”ì–‘ë³‘ì›, A-Bë“±ê¸‰ ìš”ì–‘ì‹œì„¤")
â‹®----
.medicalSupport("ê°„í˜¸ì‚¬ ìƒì£¼, ì˜ì‚¬ ì •ê¸° ë°©ë¬¸")
â‹®----
.gradeLevel(3)
.gradeName("3ë“±ê¸‰ (ì¤‘ë“±ì¦)")
.description("ì¼ìƒ í™œë™ì— ìƒë‹¹í•œ ë„ì›€ì´ í•„ìš”í•œ ìƒíƒœ")
.recommendedFacilityTypes("ìš”ì–‘ì‹œì„¤, ë…¸ì¸ìš”ì–‘ê³µë™ìƒí™œê°€ì •")
.urgencyLevel("ë³´í†µ")
.medicalSupport("ìš”ì–‘ë³´í˜¸ì‚¬ ë° ê°„í˜¸ì¡°ë¬´ì‚¬")
â‹®----
.gradeLevel(4)
.gradeName("4ë“±ê¸‰ (ê²½ì¦)")
.description("ë¶€ë¶„ì ì¸ ë„ì›€ì´ í•„ìš”í•œ ê²½ì¦ ìƒíƒœ")
.recommendedFacilityTypes("ì£¼ì•¼ê°„ë³´í˜¸ì‹œì„¤, ì¬ê°€ë³µì§€ì‹œì„¤")
.urgencyLevel("ë‚®ìŒ")
.medicalSupport("ìš”ì–‘ë³´í˜¸ì‚¬, ì •ê¸° ê±´ê°• ì²´í¬")
â‹®----
.gradeLevel(5)
.gradeName("5ë“±ê¸‰ (ê²½ì¦)")
.description("ê¸°ë³¸ì ì¸ ì§€ì›ì´ í•„ìš”í•œ ê²½ì¦ ìƒíƒœ")
.recommendedFacilityTypes("ì£¼ì•¼ê°„ë³´í˜¸ì‹œì„¤, ë°©ë¬¸ìš”ì–‘ì„œë¹„ìŠ¤")
â‹®----
.medicalSupport("ìš”ì–‘ë³´í˜¸ì‚¬, ì›”ê°„ ê±´ê°• ê´€ë¦¬")
â‹®----
/**
     * ADL ì ìˆ˜ ê¸°ë°˜ ì¼€ì–´ ë“±ê¸‰ ì¶”ì • (ì¥ê¸°ìš”ì–‘ë“±ê¸‰ì´ ì—†ëŠ” ê²½ìš°, ì§ˆí™˜ ì •ë³´ ë°˜ì˜)
     */
private CareGradeResult createAdlBasedGrade(int adlScore, HealthAssessment assessment) {
â‹®----
.gradeName("ì¶”ì • 1ë“±ê¸‰ (ìµœì¤‘ì¦)")
.description("ADL ì ìˆ˜ ê¸°ë°˜ ìµœì¤‘ì¦ìœ¼ë¡œ ì¶”ì •ë¨ (ì¥ê¸°ìš”ì–‘ë“±ê¸‰ ì‹ ì²­ ê¶Œì¥)")
.recommendedFacilityTypes("ìš”ì–‘ë³‘ì›, ì „ë¬¸ ìš”ì–‘ì‹œì„¤")
â‹®----
.medicalSupport("ì „ë¬¸ ì˜ë£Œì§„ ìƒë‹´ í•„ìš”")
â‹®----
.gradeName("ì¶”ì • 2ë“±ê¸‰ (ì¤‘ì¦)")
.description("ADL ì ìˆ˜ ê¸°ë°˜ ì¤‘ì¦ìœ¼ë¡œ ì¶”ì •ë¨ (ì¥ê¸°ìš”ì–‘ë“±ê¸‰ ì‹ ì²­ ê¶Œì¥)")
.recommendedFacilityTypes("ìš”ì–‘ì‹œì„¤, ì˜ë£Œ ì—°ê³„ ì‹œì„¤")
â‹®----
.medicalSupport("ì˜ë£Œì§„ ì •ê¸° ìƒë‹´ ê¶Œì¥")
â‹®----
.gradeName("ì¶”ì • 3ë“±ê¸‰ (ì¤‘ë“±ì¦)")
.description("ADL ì ìˆ˜ ê¸°ë°˜ ì¤‘ë“±ì¦ìœ¼ë¡œ ì¶”ì •ë¨")
.recommendedFacilityTypes("ì¼ë°˜ ìš”ì–‘ì‹œì„¤, ê³µë™ìƒí™œê°€ì •")
â‹®----
.medicalSupport("ìš”ì–‘ë³´í˜¸ì‚¬ ìƒì£¼")
â‹®----
.gradeName("ì¶”ì • 4ë“±ê¸‰ (ê²½ì¦)")
.description("ADL ì ìˆ˜ ê¸°ë°˜ ê²½ì¦ìœ¼ë¡œ ì¶”ì •ë¨")
.recommendedFacilityTypes("ì£¼ì•¼ê°„ë³´í˜¸ì‹œì„¤, ì¬ê°€ì„œë¹„ìŠ¤")
â‹®----
.medicalSupport("ì •ê¸° ê±´ê°• ê´€ë¦¬")
â‹®----
.gradeName("ì¶”ì • 5ë“±ê¸‰ (ê²½ì¦)")
â‹®----
.recommendedFacilityTypes("ë°©ë¬¸ìš”ì–‘ì„œë¹„ìŠ¤, ìƒí™œ ì§€ì›")
â‹®----
.medicalSupport("ì›”ê°„ ê±´ê°• ì²´í¬")
â‹®----
/**
     * ì¼€ì–´ ë“±ê¸‰ ê²°ê³¼ DTO
     */
â‹®----
public static class CareGradeResult {
private final int gradeLevel;           // ë“±ê¸‰ ë ˆë²¨ (1-6)
private final String gradeName;         // ë“±ê¸‰ëª…
private final String description;       // ìƒíƒœ ì„¤ëª…
private final String recommendedFacilityTypes; // ì¶”ì²œ ì‹œì„¤ ìœ í˜•
private final String urgencyLevel;      // ê¸´ê¸‰ë„ (ë§¤ìš° ë†’ìŒ, ë†’ìŒ, ë³´í†µ, ë‚®ìŒ)
private final String medicalSupport;    // í•„ìš”í•œ ì˜ë£Œ ì§€ì›
â‹®----
/**
         * ì½”ë””ë„¤ì´í„° ë§¤ì¹­ ìš°ì„ ìˆœìœ„ ë°˜í™˜
         */
public String getCoordinatorMatchingPriority() {
â‹®----
/**
         * ì˜ˆìƒ ì›” ë¹„ìš© ë²”ìœ„ (ë‹¨ìœ„: ë§Œì›)
         */
public String getEstimatedMonthlyCost() {
</file>

<file path="src/main/java/com/globalcarelink/health/HealthAssessmentController.java">
/**
 * ê±´ê°• ìƒíƒœ í‰ê°€ API ì»¨íŠ¸ë¡¤ëŸ¬
 * KBë¼ì´í”„ìƒëª… ê¸°ë°˜ ëŒë´„ì§€ìˆ˜ ì²´í¬ ì‹œìŠ¤í…œ
 * ë¶„ë¦¬ëœ ì„œë¹„ìŠ¤ ê³„ì¸µ ì‚¬ìš© (SRP ì›ì¹™ ì ìš©)
 */
â‹®----
public class HealthAssessmentController {
â‹®----
public ResponseEntity<HealthAssessment> createAssessment(
â‹®----
log.info("ê±´ê°• í‰ê°€ ìƒì„± ìš”ì²­ - íšŒì›: {}", request.getMemberId());
â‹®----
HealthAssessment assessment = healthAssessmentService.createAssessment(request);
â‹®----
return ResponseEntity.status(HttpStatus.CREATED).body(assessment);
â‹®----
public ResponseEntity<HealthAssessment> getAssessment(
â‹®----
Optional<HealthAssessment> assessment = healthAssessmentService.getAssessmentById(assessmentId);
â‹®----
.map(ResponseEntity::ok)
.orElse(ResponseEntity.notFound().build());
â‹®----
public ResponseEntity<HealthAssessment> getLatestAssessment(
â‹®----
Optional<HealthAssessment> assessment = healthAssessmentService.getLatestAssessmentByMember(memberId);
â‹®----
public ResponseEntity<List<HealthAssessment>> getAssessmentHistory(
â‹®----
List<HealthAssessment> assessments = queryService.getAssessmentHistoryByMemberId(memberId);
â‹®----
return ResponseEntity.ok(assessments);
â‹®----
public ResponseEntity<Page<HealthAssessment>> getAssessmentsByMember(
â‹®----
Pageable pageable = PageRequest.of(page, size);
Page<HealthAssessment> assessments = queryService.getAssessmentsByMemberId(memberId, pageable);
â‹®----
public ResponseEntity<HealthAssessment> updateAssessment(
â‹®----
log.info("ê±´ê°• í‰ê°€ ìˆ˜ì • ìš”ì²­ - ID: {}", assessmentId);
â‹®----
HealthAssessment updated = healthAssessmentService.updateAssessment(assessmentId, request);
â‹®----
return ResponseEntity.ok(updated);
â‹®----
public ResponseEntity<CareGradeCalculator.CareGradeResult> calculateCareGrade(
â‹®----
if (assessment.isEmpty()) {
return ResponseEntity.notFound().build();
â‹®----
CareGradeCalculator.CareGradeResult result = healthAssessmentService.calculateCareGrade(assessment.get());
â‹®----
return ResponseEntity.ok(result);
â‹®----
public ResponseEntity<Void> deleteAssessment(
â‹®----
healthAssessmentService.deleteAssessment(assessmentId);
â‹®----
return ResponseEntity.noContent().build();
â‹®----
// ===== ì¡°íšŒ ì „ë‹´ ì„œë¹„ìŠ¤ ì‚¬ìš© ì—”ë“œí¬ì¸íŠ¸ =====
â‹®----
public ResponseEntity<List<HealthAssessment>> getAssessmentsByCareGrade(
â‹®----
List<HealthAssessment> assessments = queryService.getAssessmentsByCareGradeRange(minGrade, maxGrade);
â‹®----
public ResponseEntity<List<HealthAssessment>> getHospiceCareTargets() {
â‹®----
List<HealthAssessment> targets = queryService.getHospiceCareTargets();
â‹®----
return ResponseEntity.ok(targets);
â‹®----
public ResponseEntity<List<HealthAssessment>> getDementiaCareTargets() {
â‹®----
List<HealthAssessment> targets = queryService.getDementiaCareTargets();
â‹®----
public ResponseEntity<List<HealthAssessment>> getSevereCareTargets() {
â‹®----
List<HealthAssessment> targets = queryService.getSevereCareTargets();
â‹®----
public ResponseEntity<List<HealthAssessment>> getOverseasKoreanAssessments() {
â‹®----
List<HealthAssessment> assessments = queryService.getOverseasKoreanAssessments();
â‹®----
public ResponseEntity<List<Map<String, Object>>> getMemberAssessmentTrend(
â‹®----
List<Map<String, Object>> trend = queryService.getMemberAssessmentTrend(memberId);
â‹®----
return ResponseEntity.ok(trend);
â‹®----
// ===== í†µê³„ ì „ë‹´ ì„œë¹„ìŠ¤ ì‚¬ìš© ì—”ë“œí¬ì¸íŠ¸ =====
â‹®----
public ResponseEntity<HealthAssessmentStatistics> getStatistics() {
â‹®----
HealthAssessmentStatistics statistics = statsService.getComprehensiveStatistics();
â‹®----
return ResponseEntity.ok(statistics);
â‹®----
public ResponseEntity<Map<String, Long>> getSpecialCareStatistics() {
â‹®----
Map<String, Long> statistics = statsService.getSpecialCareTargetStatistics();
â‹®----
public ResponseEntity<Map<String, Long>> getRecentStatistics() {
â‹®----
Map<String, Long> statistics = statsService.getRecentAssessmentStatistics();
â‹®----
public ResponseEntity<Map<String, Long>> getDiseaseStatistics() {
â‹®----
Map<String, Long> statistics = statsService.getDiseaseTypeStatistics();
â‹®----
public ResponseEntity<Map<String, Object>> getCompletionStatistics() {
â‹®----
Map<String, Object> statistics = statsService.getCompletionStatistics();
â‹®----
// ===== ìœ í‹¸ë¦¬í‹° ì—”ë“œí¬ì¸íŠ¸ =====
â‹®----
public ResponseEntity<Boolean> checkAssessmentExists(
â‹®----
boolean exists = healthAssessmentService.existsById(assessmentId);
â‹®----
return ResponseEntity.ok(exists);
â‹®----
public ResponseEntity<Boolean> checkAssessmentComplete(
â‹®----
boolean isComplete = healthAssessmentService.isAssessmentComplete(assessmentId);
â‹®----
return ResponseEntity.ok(isComplete);
â‹®----
public ResponseEntity<Void> evictCaches() {
â‹®----
healthAssessmentService.evictAllCaches();
â‹®----
return ResponseEntity.ok().build();
</file>

<file path="src/main/java/com/globalcarelink/profile/DomesticProfile.java">
import lombok.*;
â‹®----
/**
 * êµ­ë‚´ í”„ë¡œí•„ ì—”í‹°í‹°
 * BaseProfileì„ ìƒì†ë°›ì•„ ê³µí†µ í•„ë“œ ì¤‘ë³µ ì œê±°
 */
â‹®----
public class DomesticProfile extends BaseProfile {
â‹®----
// ===== êµ­ë‚´ í”„ë¡œí•„ ê³ ìœ  í•„ë“œ =====
â‹®----
/**
     * êµ­ë‚´ í”„ë¡œí•„ ìƒì„±ì (Builder íŒ¨í„´ìš©)
     */
â‹®----
updateCompletionPercentage();
â‹®----
/**
     * ê±´ê°•ë³´í—˜ ì •ë³´ ì—…ë°ì´íŠ¸
     */
public void updateHealthInfo(String healthInsuranceNumber, Integer ltciGrade,
â‹®----
if (healthInsuranceNumber != null && !healthInsuranceNumber.trim().isEmpty()) {
â‹®----
if (ltciCertificateNumber != null && !ltciCertificateNumber.trim().isEmpty()) {
â‹®----
/**
     * ì„ í˜¸ë„ ì •ë³´ ì—…ë°ì´íŠ¸
     */
public void updatePreferences(String preferredRegion, String familyVisitFrequency) {
if (preferredRegion != null && !preferredRegion.trim().isEmpty()) {
â‹®----
if (familyVisitFrequency != null && !familyVisitFrequency.trim().isEmpty()) {
â‹®----
protected void updateCompletionPercentage() {
// ê³µí†µ í•„ë“œ ì™„ì„±ë„ (70% ê°€ì¤‘ì¹˜)
int commonCompletion = calculateCommonFieldsCompletion();
â‹®----
// êµ­ë‚´ í”„ë¡œí•„ ê³ ìœ  í•„ë“œ ì™„ì„±ë„ (30% ê°€ì¤‘ì¹˜)
int domesticFields = 5; // ê³ ìœ  í•„ë“œ ê°œìˆ˜
â‹®----
if (healthInsuranceNumber != null && !healthInsuranceNumber.trim().isEmpty()) completedDomesticFields++;
â‹®----
if (ltciCertificateNumber != null && !ltciCertificateNumber.trim().isEmpty()) completedDomesticFields++;
if (preferredRegion != null && !preferredRegion.trim().isEmpty()) completedDomesticFields++;
if (familyVisitFrequency != null && !familyVisitFrequency.trim().isEmpty()) completedDomesticFields++;
â‹®----
int domesticCompletion = (int) Math.round((double) completedDomesticFields / domesticFields * 100);
â‹®----
// ê°€ì¤‘ í‰ê·  ê³„ì‚°
this.profileCompletionPercentage = (int) Math.round(commonCompletion * 0.7 + domesticCompletion * 0.3);
â‹®----
public String getProfileType() {
â‹®----
/**
     * ì¥ê¸°ìš”ì–‘ë³´í—˜ ë“±ê¸‰ í…ìŠ¤íŠ¸ ë°˜í™˜
     */
public String getLtciGradeText() {
â‹®----
/**
     * êµ­ë‚´ í”„ë¡œí•„ ìš”ì•½ ì •ë³´
     */
public String getDomesticProfileSummary() {
StringBuilder summary = new StringBuilder(getProfileSummary());
summary.append("\n=== êµ­ë‚´ í”„ë¡œí•„ ì •ë³´ ===\n");
â‹®----
summary.append("ê±´ê°•ë³´í—˜ë²ˆí˜¸: ").append(healthInsuranceNumber).append("\n");
â‹®----
summary.append("ì¥ê¸°ìš”ì–‘ë“±ê¸‰: ").append(getLtciGradeText()).append("\n");
â‹®----
summary.append("ì„ í˜¸ì§€ì—­: ").append(preferredRegion).append("\n");
â‹®----
summary.append("ê°€ì¡±ë°©ë¬¸ë¹ˆë„: ").append(familyVisitFrequency).append("\n");
â‹®----
return summary.toString();
â‹®----
/**
     * ì¥ê¸°ìš”ì–‘ë³´í—˜ ë“±ê¸‰ ë³´ìœ  ì—¬ë¶€
     */
public boolean hasLtciGrade() {
â‹®----
/**
     * ì¤‘ì¦ í™˜ì ì—¬ë¶€ (1-3ë“±ê¸‰)
     */
public boolean isSevereCase() {
return hasLtciGrade() && ltciGrade <= 3;
â‹®----
/**
     * ì¸ì§€ì§€ì›ë“±ê¸‰ ì—¬ë¶€
     */
public boolean isCognitiveSupport() {
return hasLtciGrade() && ltciGrade == 6;
</file>

<file path="src/main/java/com/globalcarelink/profile/OverseasProfile.java">
import lombok.*;
â‹®----
/**
 * í•´ì™¸ í”„ë¡œí•„ ì—”í‹°í‹° (ì¬ì™¸ë™í¬)
 * BaseProfileì„ ìƒì†ë°›ì•„ ê³µí†µ í•„ë“œ ì¤‘ë³µ ì œê±°
 */
â‹®----
public class OverseasProfile extends BaseProfile {
â‹®----
// ===== í•´ì™¸ í”„ë¡œí•„ ê³ ìœ  í•„ë“œ =====
â‹®----
/**
     * í•´ì™¸ í”„ë¡œí•„ ìƒì„±ì (Builder íŒ¨í„´ìš©)
     */
â‹®----
updateCompletionPercentage();
â‹®----
/**
     * ê±°ì£¼ì§€ ì •ë³´ ì—…ë°ì´íŠ¸
     */
public void updateResidenceInfo(String residenceCountry, String residenceCity,
â‹®----
if (residenceCountry != null && !residenceCountry.trim().isEmpty()) {
â‹®----
if (residenceCity != null && !residenceCity.trim().isEmpty()) {
â‹®----
if (koreanAddress != null && !koreanAddress.trim().isEmpty()) {
â‹®----
if (koreanPostalCode != null && !koreanPostalCode.trim().isEmpty()) {
â‹®----
/**
     * ì—¬ê¶Œ/ë¹„ì ì •ë³´ ì—…ë°ì´íŠ¸
     */
public void updateDocumentInfo(String passportNumber, LocalDate passportExpiryDate,
â‹®----
if (passportNumber != null && !passportNumber.trim().isEmpty()) {
â‹®----
if (visaStatus != null && !visaStatus.trim().isEmpty()) {
â‹®----
/**
     * í˜„ì§€ ì—°ë½ì²˜ ì •ë³´ ì—…ë°ì´íŠ¸
     */
public void updateOverseasContact(String name, String phone, String relation) {
if (name != null && !name.trim().isEmpty()) {
â‹®----
if (phone != null && !phone.trim().isEmpty()) {
â‹®----
if (relation != null && !relation.trim().isEmpty()) {
â‹®----
/**
     * ì„ í˜¸ë„ ì •ë³´ ì—…ë°ì´íŠ¸
     */
public void updatePreferences(String languagePreference, String timeZonePreference,
â‹®----
if (languagePreference != null && !languagePreference.trim().isEmpty()) {
â‹®----
if (timeZonePreference != null && !timeZonePreference.trim().isEmpty()) {
â‹®----
if (preferredRegionInKorea != null && !preferredRegionInKorea.trim().isEmpty()) {
â‹®----
if (culturalDietaryRequirements != null && !culturalDietaryRequirements.trim().isEmpty()) {
â‹®----
protected void updateCompletionPercentage() {
// ê³µí†µ í•„ë“œ ì™„ì„±ë„ (60% ê°€ì¤‘ì¹˜)
int commonCompletion = calculateCommonFieldsCompletion();
â‹®----
// í•´ì™¸ í”„ë¡œí•„ ê³ ìœ  í•„ë“œ ì™„ì„±ë„ (40% ê°€ì¤‘ì¹˜)
int overseasFields = 13; // ê³ ìœ  í•„ë“œ ê°œìˆ˜
â‹®----
if (residenceCountry != null && !residenceCountry.trim().isEmpty()) completedOverseasFields++;
if (residenceCity != null && !residenceCity.trim().isEmpty()) completedOverseasFields++;
if (koreanAddress != null && !koreanAddress.trim().isEmpty()) completedOverseasFields++;
if (koreanPostalCode != null && !koreanPostalCode.trim().isEmpty()) completedOverseasFields++;
if (passportNumber != null && !passportNumber.trim().isEmpty()) completedOverseasFields++;
â‹®----
if (visaStatus != null && !visaStatus.trim().isEmpty()) completedOverseasFields++;
â‹®----
if (overseasContactName != null && !overseasContactName.trim().isEmpty()) completedOverseasFields++;
if (overseasContactPhone != null && !overseasContactPhone.trim().isEmpty()) completedOverseasFields++;
if (languagePreference != null && !languagePreference.trim().isEmpty()) completedOverseasFields++;
if (timeZonePreference != null && !timeZonePreference.trim().isEmpty()) completedOverseasFields++;
if (preferredRegionInKorea != null && !preferredRegionInKorea.trim().isEmpty()) completedOverseasFields++;
â‹®----
int overseasCompletion = (int) Math.round((double) completedOverseasFields / overseasFields * 100);
â‹®----
// ê°€ì¤‘ í‰ê·  ê³„ì‚°
this.profileCompletionPercentage = (int) Math.round(commonCompletion * 0.6 + overseasCompletion * 0.4);
â‹®----
public String getProfileType() {
â‹®----
/**
     * í•´ì™¸ í”„ë¡œí•„ ìš”ì•½ ì •ë³´
     */
public String getOverseasProfileSummary() {
StringBuilder summary = new StringBuilder(getProfileSummary());
summary.append("\n=== í•´ì™¸ í”„ë¡œí•„ ì •ë³´ ===\n");
â‹®----
summary.append("ê±°ì£¼ êµ­ê°€: ").append(residenceCountry);
â‹®----
summary.append(" (").append(residenceCity).append(")");
â‹®----
summary.append("\n");
â‹®----
summary.append("ì—¬ê¶Œë²ˆí˜¸: ").append(passportNumber).append("\n");
â‹®----
summary.append("ë¹„ì ìƒíƒœ: ").append(visaStatus).append("\n");
â‹®----
summary.append("ì–¸ì–´ ì„ í˜¸ë„: ").append(languagePreference).append("\n");
â‹®----
summary.append("í•œêµ­ ë‚´ ì„ í˜¸ì§€ì—­: ").append(preferredRegionInKorea).append("\n");
â‹®----
summary.append("ì½”ë””ë„¤ì´í„° í•„ìš”: ").append(coordinatorRequired ? "ì˜ˆ" : "ì•„ë‹ˆì˜¤");
â‹®----
return summary.toString();
â‹®----
/**
     * ë¬¸ì„œ ìœ íš¨ì„± í™•ì¸
     */
public boolean hasValidDocuments() {
LocalDate now = LocalDate.now();
boolean passportValid = passportExpiryDate != null && passportExpiryDate.isAfter(now);
boolean visaValid = visaExpiryDate == null || visaExpiryDate.isAfter(now); // ë¹„ìëŠ” ì„ íƒì‚¬í•­
â‹®----
/**
     * ì—¬ê¶Œ ë§Œë£Œ ì„ë°• ì—¬ë¶€ (30ì¼ ì´ë‚´)
     */
public boolean isPassportExpiringSoon() {
â‹®----
LocalDate thirtyDaysFromNow = LocalDate.now().plusDays(30);
return passportExpiryDate.isBefore(thirtyDaysFromNow);
â‹®----
/**
     * ë¹„ì ë§Œë£Œ ì„ë°• ì—¬ë¶€ (30ì¼ ì´ë‚´)
     */
public boolean isVisaExpiringSoon() {
â‹®----
return visaExpiryDate.isBefore(thirtyDaysFromNow);
â‹®----
/**
     * í•œêµ­ ë‚´ ì—°ë½ì²˜ ë³´ìœ  ì—¬ë¶€
     */
public boolean hasKoreanContact() {
return koreanAddress != null && !koreanAddress.trim().isEmpty();
â‹®----
/**
     * í˜„ì§€ ì—°ë½ì²˜ ë³´ìœ  ì—¬ë¶€
     */
public boolean hasOverseasContact() {
return overseasContactName != null && !overseasContactName.trim().isEmpty() &&
overseasContactPhone != null && !overseasContactPhone.trim().isEmpty();
</file>

<file path="src/test/java/com/globalcarelink/auth/AuthControllerTest.java">
class AuthControllerTest {
â‹®----
void setUp() {
validRegisterRequest = MemberRegisterRequest.builder()
.email("test@example.com")
.password("password123")
.name("í…ŒìŠ¤íŠ¸ì‚¬ìš©ì")
.phoneNumber("010-1234-5678")
.role(MemberRole.USER_DOMESTIC)
.isJobSeeker(true)
.language("ko")
.region("ì„œìš¸")
.build();
â‹®----
invalidRegisterRequest = MemberRegisterRequest.builder()
.email("invalid-email")
.password("123")
.name("")
.role(null)
â‹®----
validLoginRequest = new LoginRequest("test@example.com", "password123");
invalidLoginRequest = new LoginRequest("", "");
â‹®----
memberResponse = MemberResponse.builder()
.id(1L)
â‹®----
.isActive(true)
â‹®----
tokenResponse = TokenResponse.builder()
.accessToken("jwt_access_token")
.tokenType("Bearer")
.expiresIn(86400000L)
.member(memberResponse)
â‹®----
void register_Success() throws Exception {
given(memberService.register(validRegisterRequest)).willReturn(memberResponse);
â‹®----
mockMvc.perform(post("/api/auth/register")
.with(csrf())
.contentType(MediaType.APPLICATION_JSON)
.content(objectMapper.writeValueAsString(validRegisterRequest)))
.andDo(print())
.andExpect(status().isCreated())
.andExpect(content().contentType(MediaType.APPLICATION_JSON))
.andExpect(jsonPath("$.id").value(1L))
.andExpect(jsonPath("$.email").value("test@example.com"))
.andExpect(jsonPath("$.name").value("í…ŒìŠ¤íŠ¸ì‚¬ìš©ì"))
.andExpect(jsonPath("$.role").value("USER_DOMESTIC"))
.andExpect(jsonPath("$.isJobSeeker").value(true))
.andExpect(jsonPath("$.isActive").value(true))
.andExpect(jsonPath("$.language").value("ko"))
.andExpect(jsonPath("$.region").value("ì„œìš¸"));
â‹®----
void register_Fail_ValidationError() throws Exception {
â‹®----
.content(objectMapper.writeValueAsString(invalidRegisterRequest)))
â‹®----
.andExpect(status().isBadRequest())
â‹®----
.andExpect(jsonPath("$.status").value(400))
.andExpect(jsonPath("$.error").value("Bad Request"))
.andExpect(jsonPath("$.message").value("ì…ë ¥ ê°’ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤"));
â‹®----
void register_Fail_EmailConflict() throws Exception {
given(memberService.register(validRegisterRequest))
.willThrow(new CustomException.Conflict("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤"));
â‹®----
.andExpect(status().isConflict())
â‹®----
.andExpect(jsonPath("$.status").value(409))
.andExpect(jsonPath("$.error").value("Conflict"))
.andExpect(jsonPath("$.message").value("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤"));
â‹®----
void register_Fail_InvalidJson() throws Exception {
â‹®----
.content("invalid json"))
â‹®----
.andExpect(status().isBadRequest());
â‹®----
void login_Success() throws Exception {
given(memberService.login(validLoginRequest)).willReturn(tokenResponse);
â‹®----
mockMvc.perform(post("/api/auth/login")
â‹®----
.content(objectMapper.writeValueAsString(validLoginRequest)))
â‹®----
.andExpect(status().isOk())
â‹®----
.andExpect(jsonPath("$.accessToken").value("jwt_access_token"))
.andExpect(jsonPath("$.tokenType").value("Bearer"))
.andExpect(jsonPath("$.expiresIn").value(86400000L))
.andExpect(jsonPath("$.member.email").value("test@example.com"))
.andExpect(jsonPath("$.member.role").value("USER_DOMESTIC"));
â‹®----
void login_Fail_ValidationError() throws Exception {
â‹®----
.content(objectMapper.writeValueAsString(invalidLoginRequest)))
â‹®----
void login_Fail_Unauthorized() throws Exception {
given(memberService.login(validLoginRequest))
.willThrow(new CustomException.Unauthorized("ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤"));
â‹®----
.andExpect(status().isUnauthorized())
â‹®----
.andExpect(jsonPath("$.status").value(401))
.andExpect(jsonPath("$.error").value("Unauthorized"))
.andExpect(jsonPath("$.message").value("ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤"));
â‹®----
void login_Fail_Forbidden() throws Exception {
â‹®----
.willThrow(new CustomException.Forbidden("ë¹„í™œì„±í™”ëœ ê³„ì •ì…ë‹ˆë‹¤"));
â‹®----
.andExpect(status().isForbidden())
â‹®----
.andExpect(jsonPath("$.status").value(403))
.andExpect(jsonPath("$.message").value("ë¹„í™œì„±í™”ëœ ê³„ì •ì…ë‹ˆë‹¤"));
â‹®----
void getCurrentMember_Success() throws Exception {
given(memberService.findByEmail("test@example.com")).willReturn(memberResponse);
â‹®----
mockMvc.perform(get("/api/auth/me")
.param("email", "test@example.com"))
â‹®----
.andExpect(jsonPath("$.role").value("USER_DOMESTIC"));
â‹®----
void getCurrentMember_Fail_NotFound() throws Exception {
given(memberService.findByEmail("notexist@example.com"))
.willThrow(new CustomException.NotFound("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íšŒì›ì…ë‹ˆë‹¤"));
â‹®----
.param("email", "notexist@example.com"))
â‹®----
.andExpect(status().isNotFound())
â‹®----
.andExpect(jsonPath("$.status").value(404))
.andExpect(jsonPath("$.message").value("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íšŒì›ì…ë‹ˆë‹¤"));
â‹®----
void getCurrentMember_Fail_Unauthenticated() throws Exception {
â‹®----
.andExpect(status().isUnauthorized());
â‹®----
void register_Fail_NoCsrfToken() throws Exception {
â‹®----
.andExpect(status().isForbidden());
â‹®----
void register_Fail_NoRequestBody() throws Exception {
â‹®----
.contentType(MediaType.APPLICATION_JSON))
â‹®----
void register_Fail_NoContentType() throws Exception {
â‹®----
.andExpect(status().isUnsupportedMediaType());
</file>

<file path="src/test/java/com/globalcarelink/auth/MemberRepositoryTest.java">
class MemberRepositoryTest {
â‹®----
void setUp() {
domesticUser = createMember("domestic@test.com", "êµ­ë‚´ì‚¬ìš©ì", MemberRole.USER_DOMESTIC, true, "ko", "ì„œìš¸");
overseasUser = createMember("overseas@test.com", "í•´ì™¸ì‚¬ìš©ì", MemberRole.USER_OVERSEAS, true, "en", "New York");
coordinator = createMember("coordinator@test.com", "ì½”ë””ë„¤ì´í„°", MemberRole.COORDINATOR, false, "ko", "ì„œìš¸");
facilityAdmin = createMember("facility@test.com", "ì‹œì„¤ê´€ë¦¬ì", MemberRole.FACILITY, false, "ko", "ë¶€ì‚°");
â‹®----
entityManager.persistAndFlush(domesticUser);
entityManager.persistAndFlush(overseasUser);
entityManager.persistAndFlush(coordinator);
entityManager.persistAndFlush(facilityAdmin);
â‹®----
void findByEmail_Success() {
Optional<Member> found = memberRepository.findByEmail("domestic@test.com");
â‹®----
assertThat(found).isPresent();
assertThat(found.get().getName()).isEqualTo("êµ­ë‚´ì‚¬ìš©ì");
assertThat(found.get().getRole()).isEqualTo(MemberRole.USER_DOMESTIC);
â‹®----
void findByEmail_NotFound() {
Optional<Member> found = memberRepository.findByEmail("notexist@test.com");
â‹®----
assertThat(found).isEmpty();
â‹®----
void existsByEmail_True() {
boolean exists = memberRepository.existsByEmail("coordinator@test.com");
â‹®----
assertThat(exists).isTrue();
â‹®----
void existsByEmail_False() {
boolean exists = memberRepository.existsByEmail("newuser@test.com");
â‹®----
assertThat(exists).isFalse();
â‹®----
void findByRole_Success() {
List<Member> users = memberRepository.findByRole(MemberRole.USER_DOMESTIC);
â‹®----
assertThat(users).hasSize(1);
assertThat(users.get(0).getEmail()).isEqualTo("domestic@test.com");
â‹®----
void findByIsJobSeekerAndIsActive_Success() {
List<Member> jobSeekers = memberRepository.findByIsJobSeekerAndIsActive(true, true);
â‹®----
assertThat(jobSeekers).hasSize(2);
assertThat(jobSeekers).extracting(Member::getEmail)
.containsExactlyInAnyOrder("domestic@test.com", "overseas@test.com");
â‹®----
void findActiveByRoleAndRegion_Success() {
List<Member> seoulCoordinators = memberRepository.findActiveByRoleAndRegion(MemberRole.COORDINATOR, "ì„œìš¸");
â‹®----
assertThat(seoulCoordinators).hasSize(1);
assertThat(seoulCoordinators.get(0).getEmail()).isEqualTo("coordinator@test.com");
â‹®----
void searchByKeyword_ByName() {
List<Member> results = memberRepository.searchByKeyword("êµ­ë‚´");
â‹®----
assertThat(results).hasSize(1);
assertThat(results.get(0).getName()).contains("êµ­ë‚´");
â‹®----
void searchByKeyword_ByEmail() {
List<Member> results = memberRepository.searchByKeyword("coordinator");
â‹®----
assertThat(results.get(0).getEmail()).contains("coordinator");
â‹®----
void countByRole_Success() {
long userCount = memberRepository.countByRole(MemberRole.USER_DOMESTIC);
long coordinatorCount = memberRepository.countByRole(MemberRole.COORDINATOR);
â‹®----
assertThat(userCount).isEqualTo(1);
assertThat(coordinatorCount).isEqualTo(1);
â‹®----
void countByRoleAndIsActive_Success() {
long activeUsers = memberRepository.countByRoleAndIsActive(MemberRole.USER_DOMESTIC, true);
â‹®----
assertThat(activeUsers).isEqualTo(1);
â‹®----
void findByRolesAndIsActive_Success() {
List<MemberRole> userRoles = List.of(MemberRole.USER_DOMESTIC, MemberRole.USER_OVERSEAS);
List<Member> users = memberRepository.findByRolesAndIsActive(userRoles, true);
â‹®----
assertThat(users).hasSize(2);
assertThat(users).extracting(Member::getRole)
.containsExactlyInAnyOrder(MemberRole.USER_DOMESTIC, MemberRole.USER_OVERSEAS);
â‹®----
private Member createMember(String email, String name, MemberRole role, boolean isJobSeeker, String language, String region) {
return Member.builder()
.email(email)
.password("encoded_password")
.name(name)
.phoneNumber("010-1234-5678")
.role(role)
.isJobSeeker(isJobSeeker)
.language(language)
.region(region)
.build();
</file>

<file path="src/test/java/com/globalcarelink/auth/MemberServiceTest.java">
class MemberServiceTest {
â‹®----
void setUp() {
ReflectionTestUtils.setField(memberService, "jwtExpiration", 86400000L);
â‹®----
testMember = Member.builder()
.id(1L)
.email("test@example.com")
.password("encoded_password")
.name("í…ŒìŠ¤íŠ¸ì‚¬ìš©ì")
.phoneNumber("010-1234-5678")
.role(MemberRole.USER_DOMESTIC)
.isJobSeeker(true)
.language("ko")
.region("ì„œìš¸")
.build();
â‹®----
registerRequest = MemberRegisterRequest.builder()
.email("new@example.com")
.password("plainPassword123")
.name("ì‹ ê·œì‚¬ìš©ì")
.phoneNumber("010-9876-5432")
.role(MemberRole.USER_OVERSEAS)
.isJobSeeker(false)
.language("en")
.region("New York")
â‹®----
loginRequest = new LoginRequest("test@example.com", "plainPassword123");
â‹®----
void register_Success() {
given(memberRepository.existsByEmail(registerRequest.getEmail())).willReturn(false);
given(passwordEncoder.encode(registerRequest.getPassword())).willReturn("encoded_password");
given(memberRepository.save(any(Member.class))).willReturn(testMember);
â‹®----
MemberResponse result = memberService.register(registerRequest);
â‹®----
assertThat(result.getEmail()).isEqualTo(testMember.getEmail());
assertThat(result.getName()).isEqualTo(testMember.getName());
assertThat(result.getRole()).isEqualTo(testMember.getRole());
â‹®----
then(memberRepository).should().existsByEmail(registerRequest.getEmail());
then(passwordEncoder).should().encode(registerRequest.getPassword());
then(memberRepository).should().save(any(Member.class));
â‹®----
void register_Fail_EmailExists() {
given(memberRepository.existsByEmail(registerRequest.getEmail())).willReturn(true);
â‹®----
assertThatThrownBy(() -> memberService.register(registerRequest))
.isInstanceOf(CustomException.Conflict.class)
.hasMessage("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤");
â‹®----
then(passwordEncoder).should(never()).encode(anyString());
then(memberRepository).should(never()).save(any(Member.class));
â‹®----
void login_Success() {
given(memberRepository.findByEmail(loginRequest.getEmail())).willReturn(Optional.of(testMember));
given(passwordEncoder.matches(loginRequest.getPassword(), testMember.getPassword())).willReturn(true);
given(jwtTokenProvider.createToken(testMember.getEmail(), testMember.getRole().name())).willReturn("jwt_token");
â‹®----
TokenResponse result = memberService.login(loginRequest);
â‹®----
assertThat(result.getAccessToken()).isEqualTo("jwt_token");
assertThat(result.getTokenType()).isEqualTo("Bearer");
assertThat(result.getExpiresIn()).isEqualTo(86400000L);
assertThat(result.getMember().getEmail()).isEqualTo(testMember.getEmail());
â‹®----
then(memberRepository).should().findByEmail(loginRequest.getEmail());
then(passwordEncoder).should().matches(loginRequest.getPassword(), testMember.getPassword());
then(jwtTokenProvider).should().createToken(testMember.getEmail(), testMember.getRole().name());
â‹®----
void login_Fail_EmailNotFound() {
given(memberRepository.findByEmail(loginRequest.getEmail())).willReturn(Optional.empty());
â‹®----
assertThatThrownBy(() -> memberService.login(loginRequest))
.isInstanceOf(CustomException.Unauthorized.class)
.hasMessage("ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤");
â‹®----
then(passwordEncoder).should(never()).matches(anyString(), anyString());
then(jwtTokenProvider).should(never()).createToken(anyString(), anyString());
â‹®----
void login_Fail_PasswordMismatch() {
â‹®----
given(passwordEncoder.matches(loginRequest.getPassword(), testMember.getPassword())).willReturn(false);
â‹®----
void login_Fail_InactiveAccount() {
Member inactiveMember = Member.builder()
â‹®----
.isActive(false)
â‹®----
given(memberRepository.findByEmail(loginRequest.getEmail())).willReturn(Optional.of(inactiveMember));
â‹®----
.isInstanceOf(CustomException.Forbidden.class)
.hasMessage("ë¹„í™œì„±í™”ëœ ê³„ì •ì…ë‹ˆë‹¤");
â‹®----
void findById_Success() {
given(memberRepository.findById(1L)).willReturn(Optional.of(testMember));
â‹®----
MemberResponse result = memberService.findById(1L);
â‹®----
assertThat(result.getId()).isEqualTo(1L);
â‹®----
then(memberRepository).should().findById(1L);
â‹®----
void findById_Fail_NotFound() {
given(memberRepository.findById(999L)).willReturn(Optional.empty());
â‹®----
assertThatThrownBy(() -> memberService.findById(999L))
.isInstanceOf(CustomException.NotFound.class)
.hasMessage("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íšŒì›ì…ë‹ˆë‹¤");
â‹®----
then(memberRepository).should().findById(999L);
â‹®----
void updateProfile_Success() {
MemberUpdateRequest updateRequest = new MemberUpdateRequest("ìƒˆì´ë¦„", "010-0000-0000", "en", "ë¶€ì‚°");
â‹®----
MemberResponse result = memberService.updateProfile(1L, updateRequest);
â‹®----
assertThat(result.getName()).isEqualTo("ìƒˆì´ë¦„");
assertThat(result.getPhoneNumber()).isEqualTo("010-0000-0000");
assertThat(result.getLanguage()).isEqualTo("en");
assertThat(result.getRegion()).isEqualTo("ë¶€ì‚°");
â‹®----
void updateProfile_PartialUpdate() {
MemberUpdateRequest updateRequest = new MemberUpdateRequest("ìƒˆì´ë¦„", null, null, null);
â‹®----
assertThat(result.getPhoneNumber()).isEqualTo(testMember.getPhoneNumber());
assertThat(result.getLanguage()).isEqualTo(testMember.getLanguage());
assertThat(result.getRegion()).isEqualTo(testMember.getRegion());
â‹®----
void toggleJobSeekerStatus_Success() {
boolean originalStatus = testMember.getIsJobSeeker();
â‹®----
memberService.toggleJobSeekerStatus(1L);
â‹®----
assertThat(testMember.getIsJobSeeker()).isNotEqualTo(originalStatus);
â‹®----
void deactivate_Success() {
â‹®----
memberService.deactivate(1L);
â‹®----
assertThat(testMember.getIsActive()).isFalse();
â‹®----
void findByRole_Success() {
List<Member> members = List.of(testMember);
given(memberRepository.findByRole(MemberRole.USER_DOMESTIC)).willReturn(members);
â‹®----
List<MemberResponse> result = memberService.findByRole(MemberRole.USER_DOMESTIC);
â‹®----
assertThat(result).hasSize(1);
assertThat(result.get(0).getRole()).isEqualTo(MemberRole.USER_DOMESTIC);
â‹®----
then(memberRepository).should().findByRole(MemberRole.USER_DOMESTIC);
â‹®----
void findActiveJobSeekers_Success() {
List<Member> jobSeekers = List.of(testMember);
given(memberRepository.findByIsJobSeekerAndIsActive(true, true)).willReturn(jobSeekers);
â‹®----
List<MemberResponse> result = memberService.findActiveJobSeekers();
â‹®----
assertThat(result.get(0).getIsJobSeeker()).isTrue();
assertThat(result.get(0).getIsActive()).isTrue();
â‹®----
then(memberRepository).should().findByIsJobSeekerAndIsActive(true, true);
â‹®----
void countByRole_Success() {
given(memberRepository.countByRole(MemberRole.COORDINATOR)).willReturn(5L);
â‹®----
long result = memberService.countByRole(MemberRole.COORDINATOR);
â‹®----
assertThat(result).isEqualTo(5L);
then(memberRepository).should().countByRole(MemberRole.COORDINATOR);
</file>

<file path="src/test/java/com/globalcarelink/coordinator/CoordinatorMatchingControllerTest.java">
class CoordinatorMatchingControllerTest {
â‹®----
void setUp() {
setupTestData();
â‹®----
void matchCoordinators_Success() throws Exception {
given(healthAssessmentService.getAssessmentById(1L)).willReturn(Optional.of(testAssessment));
given(matchingService.findOptimalMatches(any(HealthAssessment.class), any(MatchingPreference.class)))
.willReturn(testMatches);
â‹®----
mockMvc.perform(post("/api/coordinator-matching/match")
.with(csrf())
.param("healthAssessmentId", "1")
.contentType(MediaType.APPLICATION_JSON)
.content(objectMapper.writeValueAsString(testPreference)))
.andDo(print())
.andExpect(status().isOk())
.andExpect(content().contentType(MediaType.APPLICATION_JSON))
.andExpect(jsonPath("$").isArray())
.andExpect(jsonPath("$.length()").value(2))
.andExpect(jsonPath("$[0].coordinatorId").value("coordinator-001"))
.andExpect(jsonPath("$[0].matchScore").value(4.5))
.andExpect(jsonPath("$[0].matchReason").exists())
.andExpect(jsonPath("$[0].experienceYears").value(5))
.andExpect(jsonPath("$[0].customerSatisfaction").value(4.2));
â‹®----
void matchCoordinators_NotFound() throws Exception {
given(healthAssessmentService.getAssessmentById(999L)).willReturn(Optional.empty());
â‹®----
.param("healthAssessmentId", "999")
â‹®----
.andExpect(status().isNotFound());
â‹®----
void matchCoordinators_Unauthorized() throws Exception {
â‹®----
.andExpect(status().isUnauthorized());
â‹®----
void matchCoordinators_ValidationError() throws Exception {
MatchingPreference invalidPreference = MatchingPreference.builder()
.maxResults(-1)
.minCustomerSatisfaction(6.0)
.build();
â‹®----
.content(objectMapper.writeValueAsString(invalidPreference)))
â‹®----
.andExpect(status().isBadRequest());
â‹®----
void getCoordinatorsBySpecialty_Success() throws Exception {
List<CoordinatorCareSettings> specialtyCoordinators = List.of(
createTestCoordinatorSettings("coordinator-001", Set.of("medical"))
â‹®----
given(coordinatorCareSettingsService.getCoordinatorsBySpecialty("medical"))
.willReturn(specialtyCoordinators);
â‹®----
mockMvc.perform(get("/api/coordinator-matching/specialty/medical"))
â‹®----
.andExpect(jsonPath("$.length()").value(1))
.andExpect(jsonPath("$[0].coordinatorId").value("coordinator-001"));
â‹®----
void getAvailableCoordinators_Success() throws Exception {
List<CoordinatorCareSettings> availableCoordinators = List.of(
createTestCoordinatorSettings("coordinator-001", Set.of("medical")),
createTestCoordinatorSettings("coordinator-002", Set.of("rehabilitation"))
â‹®----
given(coordinatorCareSettingsService.getAvailableCoordinators())
.willReturn(availableCoordinators);
â‹®----
mockMvc.perform(get("/api/coordinator-matching/available"))
â‹®----
.andExpect(jsonPath("$.length()").value(2));
â‹®----
void getAvailableCoordinators_Forbidden() throws Exception {
â‹®----
.andExpect(status().isForbidden());
â‹®----
void getMatchingStatistics_Success() throws Exception {
given(coordinatorCareSettingsService.getMatchingStatistics())
.willReturn(testStatistics);
â‹®----
mockMvc.perform(get("/api/coordinator-matching/statistics"))
â‹®----
.andExpect(jsonPath("$.totalActiveCoordinators").value(50))
.andExpect(jsonPath("$.averageCustomerSatisfaction").value(4.1))
.andExpect(jsonPath("$.availableCoordinators").value(30))
.andExpect(jsonPath("$.totalSuccessfulMatches").value(1200))
.andExpect(jsonPath("$.overallMatchingSuccessRate").value(85.5))
.andExpect(jsonPath("$.averageResponseTime").value(12.3));
â‹®----
void getMatchingStatistics_Forbidden() throws Exception {
â‹®----
void simulateMatching_Success() throws Exception {
MatchingSimulationRequest simulationRequest = MatchingSimulationRequest.builder()
.healthAssessmentCount(100)
.coordinatorCount(20)
.simulationType("REALISTIC")
.includeLanguageMatching(true)
.includeSpecialtyMatching(true)
.includeWorkloadOptimization(true)
â‹®----
MatchingSimulationResult simulationResult = MatchingSimulationResult.builder()
.totalHealthAssessments(100)
.totalCoordinators(20)
.successfulMatches(95)
.averageMatchingScore(4.2)
.matchingSuccessRate(95.0)
.executionTimeMs(1500L)
â‹®----
given(coordinatorCareSettingsService.runMatchingSimulation(any(MatchingSimulationRequest.class)))
.willReturn(simulationResult);
â‹®----
mockMvc.perform(post("/api/coordinator-matching/simulate")
â‹®----
.content(objectMapper.writeValueAsString(simulationRequest)))
â‹®----
.andExpect(jsonPath("$.totalHealthAssessments").value(100))
.andExpect(jsonPath("$.totalCoordinators").value(20))
.andExpect(jsonPath("$.successfulMatches").value(95))
.andExpect(jsonPath("$.averageMatchingScore").value(4.2))
.andExpect(jsonPath("$.matchingSuccessRate").value(95.0))
.andExpect(jsonPath("$.executionTimeMs").value(1500));
â‹®----
void simulateMatching_ValidationError() throws Exception {
MatchingSimulationRequest invalidRequest = MatchingSimulationRequest.builder()
.healthAssessmentCount(-1)
.coordinatorCount(0)
.simulationType("INVALID")
â‹®----
.content(objectMapper.writeValueAsString(invalidRequest)))
â‹®----
void postWithoutCsrf_Forbidden() throws Exception {
â‹®----
void postWithWrongContentType_UnsupportedMediaType() throws Exception {
â‹®----
.contentType(MediaType.TEXT_PLAIN)
.content("invalid content"))
â‹®----
.andExpect(status().isUnsupportedMediaType());
â‹®----
private void setupTestData() {
testAssessment = HealthAssessment.builder()
.id(1L)
.memberId("test-member-001")
.mobilityLevel(2)
.eatingLevel(2)
.toiletLevel(2)
.communicationLevel(2)
.ltciGrade(3)
.careTargetStatus(4)
.mealType(1)
.adlScore(180)
.overallCareGrade("3ë“±ê¸‰ (ì¤‘ë“±ì¦)")
â‹®----
testPreference = MatchingPreference.builder()
.preferredLanguage("ko")
.preferredRegion("seoul")
.maxResults(20)
.minCustomerSatisfaction(3.0)
.needsWeekendAvailability(false)
.needsEmergencyAvailability(false)
â‹®----
CoordinatorMatch match1 = CoordinatorMatch.builder()
.coordinatorId("coordinator-001")
.name("ê¹€ì½”ë””ë„¤ì´í„°")
.matchScore(4.5)
.matchReason("ì „ë¬¸ ë¶„ì•¼ ë§¤ì¹­ ë° ë†’ì€ ê²½ë ¥")
.experienceYears(5)
.successfulCases(120)
.customerSatisfaction(4.2)
.specialtyAreas(Set.of("medical", "elderly_care"))
.languageSkills(List.of())
.availableWeekends(true)
.availableEmergency(true)
.workingRegions(Set.of("seoul", "incheon"))
.currentActiveCases(3)
.maxSimultaneousCases(8)
.workloadRatio(0.375)
â‹®----
CoordinatorMatch match2 = CoordinatorMatch.builder()
.coordinatorId("coordinator-002")
.name("ì´ì½”ë””ë„¤ì´í„°")
.matchScore(4.0)
.matchReason("ì§€ì—­ ë§¤ì¹­ ë° ì ì • ê²½ë ¥")
.experienceYears(3)
.successfulCases(80)
.customerSatisfaction(3.8)
.specialtyAreas(Set.of("rehabilitation"))
â‹®----
.availableWeekends(false)
.availableEmergency(false)
.workingRegions(Set.of("seoul", "gyeonggi"))
.currentActiveCases(2)
.maxSimultaneousCases(6)
.workloadRatio(0.333)
â‹®----
testMatches = List.of(match1, match2);
â‹®----
testStatistics = CoordinatorMatchingStatistics.builder()
.totalActiveCoordinators(50L)
.averageCustomerSatisfaction(4.1)
.availableCoordinators(30)
.totalSuccessfulMatches(1200L)
.overallMatchingSuccessRate(85.5)
.averageResponseTime(12.3)
â‹®----
private CoordinatorCareSettings createTestCoordinatorSettings(String coordinatorId, Set<String> specialtyAreas) {
return CoordinatorCareSettings.builder()
.coordinatorId(coordinatorId)
.baseCareLevel(1)
.maxCareLevel(5)
â‹®----
.successfulCases(100)
.customerSatisfaction(4.0)
â‹®----
.specialtyAreas(specialtyAreas)
.workingRegions(Set.of("seoul"))
â‹®----
.isActive(true)
</file>

<file path="src/test/java/com/globalcarelink/coordinator/CoordinatorMatchingServiceIntegrationTest.java">
class CoordinatorMatchingServiceIntegrationTest {
â‹®----
void setUp() {
setupTestData();
â‹®----
void findOptimalMatches_BasicMatching() {
MatchingPreference preference = MatchingPreference.builder()
.maxResults(10)
.minCustomerSatisfaction(3.0)
.build();
â‹®----
List<CoordinatorMatch> matches = matchingService.findOptimalMatches(testAssessment, preference);
â‹®----
assertThat(matches).isNotEmpty();
assertThat(matches).hasSizeLessThanOrEqualTo(10);
assertThat(matches.get(0).getMatchScore()).isGreaterThan(0.0);
â‹®----
matches.forEach(match -> {
assertThat(match.getCustomerSatisfaction()).isGreaterThanOrEqualTo(3.0);
assertThat(match.getMatchReason()).isNotBlank();
â‹®----
void findOptimalMatches_LanguageMatching() {
â‹®----
.preferredLanguage("ko")
.maxResults(5)
â‹®----
boolean hasKorean = match.getLanguageSkills().stream()
.anyMatch(skill -> "ko".equals(skill.getLanguageCode()));
assertThat(hasKorean).isTrue();
â‹®----
void findOptimalMatches_WorkloadOptimization() {
â‹®----
.maxResults(20)
â‹®----
assertThat(match.getWorkloadRatio()).isLessThanOrEqualTo(1.0);
â‹®----
previousWorkloadRatio = match.getWorkloadRatio();
â‹®----
void findOptimalMatches_SpecialtyMatching() {
testAssessment.setLtciGrade(2);
â‹®----
.needsProfessionalConsultation(true)
â‹®----
assertThat(match.getSpecialtyAreas()).isNotEmpty();
â‹®----
void findOptimalMatches_WeekendAvailability() {
â‹®----
.needsWeekendAvailability(true)
â‹®----
assertThat(match.getAvailableWeekends()).isTrue();
â‹®----
void findOptimalMatches_EmergencyAvailability() {
â‹®----
.needsEmergencyAvailability(true)
â‹®----
assertThat(match.getAvailableEmergency()).isTrue();
â‹®----
void findOptimalMatches_RegionalMatching() {
â‹®----
.preferredRegion("seoul")
â‹®----
assertThat(match.getWorkingRegions()).contains("seoul");
â‹®----
void findOptimalMatches_ScoreOrdering() {
â‹®----
for (int i = 0; i < matches.size() - 1; i++) {
assertThat(matches.get(i).getMatchScore())
.isGreaterThanOrEqualTo(matches.get(i + 1).getMatchScore());
â‹®----
void findOptimalMatches_NoMatches() {
â‹®----
.minCustomerSatisfaction(5.0)
â‹®----
assertThat(matches).isEmpty();
â‹®----
private void setupTestData() {
createTestHealthAssessment();
createTestCoordinators();
createTestLanguageSkills();
â‹®----
private void createTestHealthAssessment() {
HealthAssessmentCreateRequest request = HealthAssessmentCreateRequest.builder()
.memberId("test-member-001")
.birthYear(1950)
.gender("M")
.mobilityLevel(3)
.eatingLevel(2)
.toiletLevel(3)
.communicationLevel(2)
.careTargetStatus(2)
.mealType(1)
.diseaseTypes("ê³ í˜ˆì••, ë‹¹ë‡¨")
.notes("ì£¼ê°„ ëŒë´„ í•„ìš”")
â‹®----
testAssessment = healthAssessmentService.createAssessment(request);
â‹®----
private void createTestCoordinators() {
coordinator1 = CoordinatorCareSettings.builder()
.coordinatorId("coordinator-001")
.baseCareLevel(1)
.maxCareLevel(3)
.experienceYears(5)
.successfulCases(120)
.customerSatisfaction(4.2)
.maxSimultaneousCases(8)
.specialtyAreas(Set.of("medical", "elderly_care"))
.workingRegions(Set.of("seoul", "incheon"))
.availableWeekends(true)
.availableEmergency(true)
.isActive(true)
â‹®----
coordinator2 = CoordinatorCareSettings.builder()
.coordinatorId("coordinator-002")
.baseCareLevel(2)
.maxCareLevel(5)
.experienceYears(3)
.successfulCases(80)
.customerSatisfaction(3.8)
.maxSimultaneousCases(6)
.specialtyAreas(Set.of("rehabilitation"))
.workingRegions(Set.of("seoul", "gyeonggi"))
.availableWeekends(false)
.availableEmergency(false)
â‹®----
careSettingsRepository.save(coordinator1);
careSettingsRepository.save(coordinator2);
â‹®----
private void createTestLanguageSkills() {
CoordinatorLanguageSkill skill1 = CoordinatorLanguageSkill.builder()
â‹®----
.languageCode("ko")
.languageName("í•œêµ­ì–´")
.proficiencyLevel(CoordinatorLanguageSkill.LanguageProficiency.NATIVE)
.certification("C2")
â‹®----
CoordinatorLanguageSkill skill2 = CoordinatorLanguageSkill.builder()
â‹®----
.languageCode("en")
.languageName("ì˜ì–´")
.proficiencyLevel(CoordinatorLanguageSkill.LanguageProficiency.BUSINESS)
.certification("B2")
â‹®----
CoordinatorLanguageSkill skill3 = CoordinatorLanguageSkill.builder()
â‹®----
languageSkillRepository.save(skill1);
languageSkillRepository.save(skill2);
languageSkillRepository.save(skill3);
</file>

<file path="src/test/java/com/globalcarelink/e2e/HealthAssessmentToCoordinatorMatchingE2ETest.java">
class HealthAssessmentToCoordinatorMatchingE2ETest {
â‹®----
void setUp() {
setupTestCoordinators();
â‹®----
void completeE2EFlow_HealthAssessmentToMatching() throws Exception {
HealthAssessmentCreateRequest assessmentRequest = HealthAssessmentCreateRequest.builder()
.memberId("e2e-test-member")
.gender("M")
.birthYear(1950)
.mobilityLevel(2)
.eatingLevel(2)
.toiletLevel(3)
.communicationLevel(2)
.ltciGrade(3)
.careTargetStatus(4)
.mealType(1)
.diseaseTypes("ê³ í˜ˆì••, ë‹¹ë‡¨")
.build();
â‹®----
MvcResult assessmentResult = mockMvc.perform(post("/api/health-assessments")
.with(csrf())
.contentType(MediaType.APPLICATION_JSON)
.content(objectMapper.writeValueAsString(assessmentRequest)))
.andDo(print())
.andExpect(status().isCreated())
.andExpect(jsonPath("$.id").exists())
.andExpect(jsonPath("$.memberId").value("e2e-test-member"))
.andExpect(jsonPath("$.adlScore").exists())
.andExpect(jsonPath("$.overallCareGrade").exists())
.andReturn();
â‹®----
String assessmentJson = assessmentResult.getResponse().getContentAsString();
HealthAssessment createdAssessment = objectMapper.readValue(assessmentJson, HealthAssessment.class);
Long assessmentId = createdAssessment.getId();
â‹®----
assertThat(assessmentId).isNotNull();
assertThat(createdAssessment.getAdlScore()).isEqualTo(180);
â‹®----
MatchingPreference matchingPreference = MatchingPreference.builder()
.preferredLanguage("ko")
.preferredRegion("seoul")
.maxResults(10)
.minCustomerSatisfaction(3.0)
.needsWeekendAvailability(false)
.needsEmergencyAvailability(false)
â‹®----
mockMvc.perform(post("/api/coordinator-matching/match")
â‹®----
.param("healthAssessmentId", assessmentId.toString())
â‹®----
.content(objectMapper.writeValueAsString(matchingPreference)))
â‹®----
.andExpect(status().isOk())
.andExpect(content().contentType(MediaType.APPLICATION_JSON))
.andExpect(jsonPath("$").isArray())
.andExpect(jsonPath("$.length()").value(2))
.andExpect(jsonPath("$[0].coordinatorId").exists())
.andExpect(jsonPath("$[0].matchScore").exists())
.andExpect(jsonPath("$[0].matchReason").exists())
.andExpect(jsonPath("$[0].experienceYears").exists())
.andExpect(jsonPath("$[0].customerSatisfaction").exists())
.andExpect(jsonPath("$[0].specialtyAreas").isArray())
.andExpect(jsonPath("$[0].languageSkills").isArray())
.andExpect(jsonPath("$[0].workingRegions").isArray());
â‹®----
void severePatientE2EFlow() throws Exception {
HealthAssessmentCreateRequest severeRequest = HealthAssessmentCreateRequest.builder()
.memberId("severe-patient")
.gender("F")
.birthYear(1940)
.mobilityLevel(3)
.eatingLevel(3)
â‹®----
.communicationLevel(3)
.ltciGrade(1)
.careTargetStatus(3)
.mealType(3)
.diseaseTypes("ë‡Œì¡¸ì¤‘, ì¹˜ë§¤")
â‹®----
.content(objectMapper.writeValueAsString(severeRequest)))
â‹®----
.andExpect(jsonPath("$.overallCareGrade").value("1ë“±ê¸‰ (ìµœì¤‘ì¦ - ì¤‘ì¦ì§€í‘œ)"))
â‹®----
MatchingPreference medicalPreference = MatchingPreference.builder()
.needsProfessionalConsultation(true)
.needsEmergencyAvailability(true)
.maxResults(5)
.minCustomerSatisfaction(4.0)
â‹®----
.content(objectMapper.writeValueAsString(medicalPreference)))
â‹®----
.andExpect(jsonPath("$[0].availableEmergency").value(true))
â‹®----
.andExpect(jsonPath("$[0].customerSatisfaction").value(4.2));
â‹®----
void dementiaPatientE2EFlow() throws Exception {
HealthAssessmentCreateRequest dementiaRequest = HealthAssessmentCreateRequest.builder()
.memberId("dementia-patient")
â‹®----
.birthYear(1935)
â‹®----
.toiletLevel(2)
â‹®----
.ltciGrade(6)
â‹®----
.mealType(2)
.diseaseTypes("ì•Œì¸ í•˜ì´ë¨¸")
â‹®----
.content(objectMapper.writeValueAsString(dementiaRequest)))
â‹®----
.andExpect(jsonPath("$.ltciGrade").value(6))
â‹®----
MatchingPreference dementiaPreference = MatchingPreference.builder()
.preferredLanguage("en")
.countryCode("US")
â‹®----
.minCustomerSatisfaction(3.5)
â‹®----
.content(objectMapper.writeValueAsString(dementiaPreference)))
â‹®----
.andExpect(jsonPath("$[0].specialtyAreas").isArray());
â‹®----
void mildPatientE2EFlow() throws Exception {
HealthAssessmentCreateRequest mildRequest = HealthAssessmentCreateRequest.builder()
.memberId("mild-patient")
â‹®----
.birthYear(1960)
.mobilityLevel(1)
.eatingLevel(1)
.toiletLevel(1)
.communicationLevel(1)
.ltciGrade(5)
â‹®----
.diseaseTypes("ê³ í˜ˆì••")
â‹®----
.content(objectMapper.writeValueAsString(mildRequest)))
â‹®----
.andExpect(jsonPath("$.adlScore").value(100))
â‹®----
MatchingPreference generalPreference = MatchingPreference.builder()
â‹®----
.maxResults(15)
â‹®----
.needsWeekendAvailability(true)
â‹®----
.content(objectMapper.writeValueAsString(generalPreference)))
â‹®----
.andExpected(jsonPath("$[0].availableWeekends").value(true))
.andExpect(jsonPath("$[0].workingRegions").isArray())
.andExpected(jsonPath("$[0].workloadRatio").exists());
â‹®----
void multipleAssessmentUpdateE2EFlow() throws Exception {
HealthAssessmentCreateRequest initialRequest = HealthAssessmentCreateRequest.builder()
.memberId("update-test-member")
â‹®----
MvcResult initialResult = mockMvc.perform(post("/api/health-assessments")
â‹®----
.content(objectMapper.writeValueAsString(initialRequest)))
â‹®----
HealthAssessment initialAssessment = objectMapper.readValue(
initialResult.getResponse().getContentAsString(), HealthAssessment.class);
â‹®----
MatchingPreference initialPreference = MatchingPreference.builder()
â‹®----
MvcResult initialMatchingResult = mockMvc.perform(post("/api/coordinator-matching/match")
â‹®----
.param("healthAssessmentId", initialAssessment.getId().toString())
â‹®----
.content(objectMapper.writeValueAsString(initialPreference)))
â‹®----
.andExpected(status().isOk())
â‹®----
String initialMatchingJson = initialMatchingResult.getResponse().getContentAsString();
assertThat(initialMatchingJson).contains("coordinatorId");
â‹®----
com.globalcarelink.health.dto.HealthAssessmentUpdateRequest.builder()
â‹®----
mockMvc.perform(put("/api/health-assessments/{assessmentId}", initialAssessment.getId())
â‹®----
.content(objectMapper.writeValueAsString(updateRequest)))
â‹®----
.andExpected(jsonPath("$.adlScore").value(300));
â‹®----
MatchingPreference updatedPreference = MatchingPreference.builder()
â‹®----
.content(objectMapper.writeValueAsString(updatedPreference)))
â‹®----
.andExpected(jsonPath("$[0].specialtyAreas").isArray());
â‹®----
void matchingStatisticsE2EFlow() throws Exception {
HealthAssessmentCreateRequest request1 = HealthAssessmentCreateRequest.builder()
.memberId("stats-member-1")
â‹®----
HealthAssessmentCreateRequest request2 = HealthAssessmentCreateRequest.builder()
.memberId("stats-member-2")
â‹®----
mockMvc.perform(post("/api/health-assessments")
â‹®----
.content(objectMapper.writeValueAsString(request1)))
.andExpect(status().isCreated());
â‹®----
.content(objectMapper.writeValueAsString(request2)))
â‹®----
mockMvc.perform(get("/api/health-assessments/statistics"))
â‹®----
.andExpect(jsonPath("$.totalAssessments").value(2))
.andExpected(jsonPath("$.completeAssessments").value(2))
.andExpect(jsonPath("$.careGradeDistribution").isArray());
â‹®----
mockMvc.perform(get("/api/coordinator-matching/statistics"))
â‹®----
.andExpect(jsonPath("$.totalActiveCoordinators").exists())
.andExpect(jsonPath("$.averageCustomerSatisfaction").exists())
.andExpected(jsonPath("$.availableCoordinators").exists());
â‹®----
private void setupTestCoordinators() {
CoordinatorCareSettings coordinator1 = CoordinatorCareSettings.builder()
.coordinatorId("e2e-coordinator-001")
.baseCareLevel(1)
.maxCareLevel(5)
.experienceYears(5)
.successfulCases(120)
.customerSatisfaction(4.2)
.maxSimultaneousCases(8)
.specialtyAreas(Set.of("medical", "elderly_care"))
.workingRegions(Set.of("seoul", "incheon"))
.availableWeekends(true)
.availableEmergency(true)
.isActive(true)
â‹®----
CoordinatorCareSettings coordinator2 = CoordinatorCareSettings.builder()
.coordinatorId("e2e-coordinator-002")
.baseCareLevel(2)
â‹®----
.experienceYears(3)
.successfulCases(80)
.customerSatisfaction(3.8)
.maxSimultaneousCases(6)
.specialtyAreas(Set.of("rehabilitation"))
.workingRegions(Set.of("seoul", "gyeonggi"))
.availableWeekends(false)
.availableEmergency(false)
â‹®----
coordinatorCareSettingsRepository.save(coordinator1);
coordinatorCareSettingsRepository.save(coordinator2);
â‹®----
CoordinatorLanguageSkill skill1 = CoordinatorLanguageSkill.builder()
â‹®----
.languageCode("ko")
.languageName("í•œêµ­ì–´")
.proficiencyLevel(CoordinatorLanguageSkill.LanguageProficiency.NATIVE)
.certification("C2")
â‹®----
CoordinatorLanguageSkill skill2 = CoordinatorLanguageSkill.builder()
â‹®----
.languageCode("en")
.languageName("ì˜ì–´")
.proficiencyLevel(CoordinatorLanguageSkill.LanguageProficiency.BUSINESS)
.certification("B2")
â‹®----
CoordinatorLanguageSkill skill3 = CoordinatorLanguageSkill.builder()
â‹®----
coordinatorLanguageSkillRepository.save(skill1);
coordinatorLanguageSkillRepository.save(skill2);
coordinatorLanguageSkillRepository.save(skill3);
</file>

<file path="src/test/java/com/globalcarelink/health/HealthAssessmentControllerIntegrationTest.java">
class HealthAssessmentControllerIntegrationTest {
â‹®----
void setUp() {
setupTestData();
â‹®----
void createAssessment_Integration_Success() throws Exception {
mockMvc.perform(post("/api/health-assessments")
.with(csrf())
.contentType(MediaType.APPLICATION_JSON)
.content(objectMapper.writeValueAsString(validCreateRequest)))
.andDo(print())
.andExpect(status().isCreated())
.andExpect(content().contentType(MediaType.APPLICATION_JSON))
.andExpect(jsonPath("$.memberId").value("test-member-001"))
.andExpect(jsonPath("$.mobilityLevel").value(2))
.andExpect(jsonPath("$.eatingLevel").value(2))
.andExpect(jsonPath("$.toiletLevel").value(3))
.andExpect(jsonPath("$.communicationLevel").value(2))
.andExpect(jsonPath("$.ltciGrade").value(3))
.andExpect(jsonPath("$.adlScore").exists())
.andExpect(jsonPath("$.overallCareGrade").exists())
.andExpect(jsonPath("$.assessmentDate").exists());
â‹®----
void getAssessment_Integration_Success() throws Exception {
HealthAssessment created = healthAssessmentService.createAssessment(validCreateRequest);
â‹®----
mockMvc.perform(get("/api/health-assessments/{assessmentId}", created.getId()))
â‹®----
.andExpect(status().isOk())
â‹®----
.andExpect(jsonPath("$.id").value(created.getId()))
â‹®----
.andExpect(jsonPath("$.adlScore").value(created.getAdlScore()))
.andExpect(jsonPath("$.overallCareGrade").value(created.getOverallCareGrade()));
â‹®----
void updateAssessment_Integration_Success() throws Exception {
â‹®----
mockMvc.perform(put("/api/health-assessments/{assessmentId}", created.getId())
â‹®----
.content(objectMapper.writeValueAsString(validUpdateRequest)))
â‹®----
.andExpect(jsonPath("$.mobilityLevel").value(validUpdateRequest.getMobilityLevel()))
.andExpect(jsonPath("$.eatingLevel").value(validUpdateRequest.getEatingLevel()))
.andExpect(jsonPath("$.adlScore").exists());
â‹®----
void getMemberAssessments_Integration_Success() throws Exception {
healthAssessmentService.createAssessment(validCreateRequest);
â‹®----
HealthAssessmentCreateRequest secondRequest = HealthAssessmentCreateRequest.builder()
.memberId("test-member-001")
.mobilityLevel(3)
.eatingLevel(3)
.toiletLevel(3)
.communicationLevel(3)
.ltciGrade(2)
.careTargetStatus(3)
.mealType(2)
.diseaseTypes("ê³ í˜ˆì••")
.build();
â‹®----
healthAssessmentService.createAssessment(secondRequest);
â‹®----
mockMvc.perform(get("/api/health-assessments/member/test-member-001"))
â‹®----
.andExpect(jsonPath("$").isArray())
.andExpect(jsonPath("$.length()").value(2))
.andExpect(jsonPath("$[0].memberId").value("test-member-001"))
.andExpect(jsonPath("$[1].memberId").value("test-member-001"));
â‹®----
void getStatistics_Integration_Success() throws Exception {
â‹®----
HealthAssessmentCreateRequest request2 = HealthAssessmentCreateRequest.builder()
.memberId("test-member-002")
.mobilityLevel(1)
.eatingLevel(1)
.toiletLevel(1)
.communicationLevel(1)
.ltciGrade(5)
â‹®----
healthAssessmentService.createAssessment(request2);
â‹®----
mockMvc.perform(get("/api/health-assessments/statistics"))
â‹®----
.andExpect(jsonPath("$.totalAssessments").value(2))
.andExpect(jsonPath("$.completeAssessments").value(2))
.andExpect(jsonPath("$.careGradeDistribution").isArray())
.andExpect(jsonPath("$.adlScoreDistribution").isArray());
â‹®----
void getAssessmentsByCareGrade_Integration_Success() throws Exception {
â‹®----
HealthAssessmentCreateRequest grade1Request = HealthAssessmentCreateRequest.builder()
â‹®----
.ltciGrade(1)
â‹®----
healthAssessmentService.createAssessment(grade1Request);
â‹®----
mockMvc.perform(get("/api/health-assessments/care-grade")
.param("minGrade", "1")
.param("maxGrade", "3"))
â‹®----
.andExpect(jsonPath("$.length()").value(2));
â‹®----
void getSpecializedCareTargets_Integration_Success() throws Exception {
HealthAssessmentCreateRequest hospiceRequest = HealthAssessmentCreateRequest.builder()
.memberId("hospice-patient")
â‹®----
.careTargetStatus(1)
.mealType(3)
.diseaseTypes("ë§ê¸°ì•”")
â‹®----
healthAssessmentService.createAssessment(hospiceRequest);
â‹®----
mockMvc.perform(get("/api/health-assessments/hospice-care"))
â‹®----
.andExpect(jsonPath("$.length()").value(1))
.andExpect(jsonPath("$[0].memberId").value("hospice-patient"))
.andExpect(jsonPath("$[0].careTargetStatus").value(1));
â‹®----
void getDementiaCareTargets_Integration_Success() throws Exception {
HealthAssessmentCreateRequest dementiaRequest = HealthAssessmentCreateRequest.builder()
.memberId("dementia-patient")
.mobilityLevel(2)
.eatingLevel(2)
.toiletLevel(2)
â‹®----
.ltciGrade(6)
.diseaseTypes("ì¹˜ë§¤")
â‹®----
healthAssessmentService.createAssessment(dementiaRequest);
â‹®----
mockMvc.perform(get("/api/health-assessments/dementia-care"))
â‹®----
.andExpect(jsonPath("$[0].memberId").value("dementia-patient"))
.andExpect(jsonPath("$[0].ltciGrade").value(6));
â‹®----
void adlScoreCalculation_Integration_Test() throws Exception {
HealthAssessmentCreateRequest request = HealthAssessmentCreateRequest.builder()
.memberId("adl-test-member")
â‹®----
.communicationLevel(2)
â‹®----
.content(objectMapper.writeValueAsString(request)))
â‹®----
.andExpect(jsonPath("$.adlScore").value(180))
.andExpect(jsonPath("$.overallCareGrade").exists());
â‹®----
void careGradeCalculation_Integration_Test() throws Exception {
HealthAssessmentCreateRequest severeRequest = HealthAssessmentCreateRequest.builder()
.memberId("severe-patient")
â‹®----
.content(objectMapper.writeValueAsString(severeRequest)))
â‹®----
.andExpect(jsonPath("$.overallCareGrade").value("1ë“±ê¸‰ (ìµœì¤‘ì¦ - ì¤‘ì¦ì§€í‘œ)"));
â‹®----
void accessControl_Integration_Test() throws Exception {
â‹®----
.andExpect(status().isForbidden());
â‹®----
private void setupTestData() {
validCreateRequest = HealthAssessmentCreateRequest.builder()
â‹®----
.gender("M")
.birthYear(1950)
â‹®----
.ltciGrade(3)
.careTargetStatus(4)
.mealType(1)
.diseaseTypes("ê³ í˜ˆì••, ë‹¹ë‡¨")
â‹®----
validUpdateRequest = HealthAssessmentUpdateRequest.builder()
â‹®----
.ltciGrade(4)
</file>

<file path="frontend/src/stores/healthAssessmentStore.ts">
/**
 * ê±´ê°• ìƒíƒœ í‰ê°€ ì²´í¬ë¦¬ìŠ¤íŠ¸ ìƒíƒœ ê´€ë¦¬ (ìµœì í™”)
 * Zustandë¥¼ ì‚¬ìš©í•œ ìµœì†Œí•œì˜ ì „ì—­ ìƒíƒœ ê´€ë¦¬
 * ë¡œì»¬ ìƒíƒœë¡œ ì²˜ë¦¬ ê°€ëŠ¥í•œ ê²ƒë“¤ì€ ë¶„ë¦¬í•˜ì—¬ ì„±ëŠ¥ ìµœì í™”
 */
import { create } from 'zustand';
import { devtools, subscribeWithSelector } from 'zustand/middleware';
import { immer } from 'zustand/middleware/immer';
import type { 
  HealthAssessmentCreateRequest, 
  AdlLevel,
  LtciGrade,
  CareTargetStatus,
  MealType,
  Gender 
} from '@/types/health';
â‹®----
// ìµœì†Œí•œì˜ ì „ì—­ ìƒíƒœë§Œ ê´€ë¦¬
interface HealthAssessmentState {
  // í•µì‹¬ í¼ ë°ì´í„° (ì „ì—­ ê³µìœ  í•„ìš”)
  formData: HealthAssessmentCreateRequest;
  
  // í˜„ì¬ ë‹¨ê³„ (ì „ì—­ ê³µìœ  í•„ìš”)
  currentStep: number;
  
  // ì œì¶œ ìƒíƒœ (ì „ì—­ ê³µìœ  í•„ìš”)
  isSubmitting: boolean;
  
  // ì—ëŸ¬ ìƒíƒœ (ì „ì—­ ê³µìœ  í•„ìš”)
  errors: Record<string, string>;
}
â‹®----
// í•µì‹¬ í¼ ë°ì´í„° (ì „ì—­ ê³µìœ  í•„ìš”)
â‹®----
// í˜„ì¬ ë‹¨ê³„ (ì „ì—­ ê³µìœ  í•„ìš”)
â‹®----
// ì œì¶œ ìƒíƒœ (ì „ì—­ ê³µìœ  í•„ìš”)
â‹®----
// ì—ëŸ¬ ìƒíƒœ (ì „ì—­ ê³µìœ  í•„ìš”)
â‹®----
interface HealthAssessmentActions {
  // í¼ ë°ì´í„° ì—…ë°ì´íŠ¸
  updateFormData: (data: Partial<HealthAssessmentCreateRequest>) => void;
  
  // ë‹¨ê³„ ê´€ë¦¬
  setCurrentStep: (step: number) => void;
  nextStep: () => void;
  previousStep: () => void;
  goToStep: (stepIndex: number) => void;
  
  // ì œì¶œ ìƒíƒœ ê´€ë¦¬
  setSubmitting: (isSubmitting: boolean) => void;
  
  // ì—ëŸ¬ ê´€ë¦¬
  setError: (field: string, error: string) => void;
  clearError: (field: string) => void;
  clearAllErrors: () => void;
  
  // ìœ í‹¸ë¦¬í‹°
  resetForm: () => void;
  isStepValid: (step: number) => boolean;
}
â‹®----
// í¼ ë°ì´í„° ì—…ë°ì´íŠ¸
â‹®----
// ë‹¨ê³„ ê´€ë¦¬
â‹®----
// ì œì¶œ ìƒíƒœ ê´€ë¦¬
â‹®----
// ì—ëŸ¬ ê´€ë¦¬
â‹®----
// ìœ í‹¸ë¦¬í‹°
â‹®----
type HealthAssessmentStore = HealthAssessmentState & HealthAssessmentActions;
â‹®----
// ì´ˆê¸° í¼ ë°ì´í„°
â‹®----
// ë‹¨ê³„ë³„ í•„ìˆ˜ í•„ë“œ ì •ì˜ (ì„±ëŠ¥ì„ ìœ„í•´ ìƒìˆ˜ë¡œ ë¶„ë¦¬)
â‹®----
6: [] // ì¶”ê°€ ì •ë³´ëŠ” ì„ íƒì‚¬í•­
â‹®----
/**
 * ìµœì í™”ëœ ê±´ê°• í‰ê°€ ìŠ¤í† ì–´
 * - immer ë¯¸ë“¤ì›¨ì–´ë¡œ ë¶ˆë³€ì„± ê´€ë¦¬ ìë™í™”
 * - subscribeWithSelectorë¡œ ì„ íƒì  êµ¬ë… ì§€ì›
 * - devtoolsë¡œ ë””ë²„ê¹… ì§€ì›
 */
â‹®----
// ì´ˆê¸° ìƒíƒœ
â‹®----
// í¼ ë°ì´í„° ì—…ë°ì´íŠ¸ (Immerë¡œ ë¶ˆë³€ì„± ìë™ ê´€ë¦¬)
â‹®----
// ë‹¨ê³„ ê´€ë¦¬
â‹®----
// ì œì¶œ ìƒíƒœ ê´€ë¦¬
â‹®----
// ì—ëŸ¬ ê´€ë¦¬
â‹®----
// í¼ ì´ˆê¸°í™”
â‹®----
// ë‹¨ê³„ ìœ íš¨ì„± ê²€ì¦
â‹®----
// ê°œë°œ í™˜ê²½ì—ì„œë§Œ devtools í™œì„±í™”
â‹®----
// ì„ íƒì  êµ¬ë…ì„ ìœ„í•œ ì…€ë ‰í„° í•¨ìˆ˜ë“¤
export const selectFormData = (state: HealthAssessmentStore)
export const selectCurrentStep = (state: HealthAssessmentStore)
export const selectIsSubmitting = (state: HealthAssessmentStore)
export const selectErrors = (state: HealthAssessmentStore)
â‹®----
// íŒŒìƒ ìƒíƒœ ì…€ë ‰í„°ë“¤ (ë©”ëª¨ì´ì œì´ì…˜ ì ìš©)
export const selectProgress = (state: HealthAssessmentStore) =>
â‹®----
// ê° ë‹¨ê³„ë³„ ì™„ì„±ë„ ê³„ì‚°
â‹®----
export const selectCanSubmit = (state: HealthAssessmentStore) =>
â‹®----
// í•„ìˆ˜ ë‹¨ê³„(0-4) ëª¨ë‘ ì™„ë£Œ í™•ì¸
â‹®----
export const selectStepErrors = (step: number) => (state: HealthAssessmentStore) =>
â‹®----
// ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•œ ì–•ì€ ë¹„êµ ì…€ë ‰í„°
export const selectBasicInfo = (state: HealthAssessmentStore) => (
â‹®----
export const selectAdlScores = (state: HealthAssessmentStore) => (
â‹®----
export const selectAdditionalInfo = (state: HealthAssessmentStore) => (
â‹®----
// íŠ¹ì • í•„ë“œë§Œ êµ¬ë…í•˜ëŠ” í›…ë“¤
export const useFormField = <K extends keyof HealthAssessmentCreateRequest>(
  field: K
) =>
â‹®----
// ì–•ì€ ë¹„êµë¡œ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€
â‹®----
export const useStepValidation = (step: number) =>
â‹®----
// ë¶ˆë¦¬ì–¸ ê°’ì´ë¯€ë¡œ ì°¸ì¡° ë¹„êµë¡œ ì¶©ë¶„
â‹®----
// ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì—°ë™ (ì„ íƒì )
export const persistFormData = () =>
â‹®----
export const loadPersistedFormData = () =>
â‹®----
export const clearPersistedFormData = () =>
â‹®----
// ê°œë°œ í™˜ê²½ì—ì„œ ìŠ¤í† ì–´ ìƒíƒœ ë¡œê¹…
</file>

<file path="frontend/package.json">
{
  "name": "global-care-link-frontend",
  "version": "1.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "lint": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.20.0",
    "zustand": "^4.4.6",
    "@tanstack/react-query": "^5.8.0",
    "axios": "^1.6.0",
    "framer-motion": "^10.0.0",
    "lucide-react": "^0.292.0",
    "react-hook-form": "^7.47.0",
    "zod": "^3.22.0",
    "@hookform/resolvers": "^3.3.0",
    "tailwindcss": "^3.3.0",
    "@allpepper/memory-bank-mcp": "^0.2.1",
    "@modelcontextprotocol/server-filesystem": "^2025.7.1"
  },
  "devDependencies": {
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@typescript-eslint/parser": "^6.0.0",
    "@vitejs/plugin-react": "^4.0.0",
    "autoprefixer": "^10.4.0",
    "eslint": "^8.45.0",
    "eslint-plugin-react-hooks": "^4.6.0",
    "eslint-plugin-react-refresh": "^0.4.0",
    "postcss": "^8.4.0",
    "typescript": "^5.0.0",
    "vite": "^5.0.0"
  }
}
</file>

<file path="src/main/java/com/globalcarelink/coordinator/CoordinatorCareSettingsRepository.java">
/**
 * ì½”ë””ë„¤ì´í„° ì¼€ì–´ ì„¤ì • Repository
 * JPA N+1 ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ @EntityGraph ì ìš©
 */
â‹®----
public interface CoordinatorCareSettingsRepository extends JpaRepository<CoordinatorCareSettings, Long> {
â‹®----
/**
     * ì½”ë””ë„¤ì´í„° IDë¡œ ì¡°íšŒ (ì–¸ì–´ ìŠ¤í‚¬ ì •ë³´ í•¨ê»˜ ì¡°íšŒ)
     * @EntityGraphë¡œ N+1 ë¬¸ì œ í•´ê²°
     */
â‹®----
Optional<CoordinatorCareSettings> findByCoordinatorId(String coordinatorId);
â‹®----
/**
     * ì½”ë””ë„¤ì´í„° IDì™€ í™œì„± ìƒíƒœë¡œ ì¡°íšŒ
     */
â‹®----
Optional<CoordinatorCareSettings> findByCoordinatorIdAndIsActiveTrue(String coordinatorId);
â‹®----
/**
     * ì „ë¬¸ ë¶„ì•¼ë¡œ ì¡°íšŒ
     */
â‹®----
List<CoordinatorCareSettings> findBySpecialty(String specialty);
â‹®----
/**
     * ìµœì†Œ ë§Œì¡±ë„ ì´ìƒìœ¼ë¡œ ì¡°íšŒ
     */
â‹®----
List<CoordinatorCareSettings> findByMinSatisfaction(Double minSatisfaction);
â‹®----
/**
     * í™œì„± ì½”ë””ë„¤ì´í„° ìˆ˜ ì¡°íšŒ
     */
â‹®----
Long getActiveCoordinatorCount();
â‹®----
/**
     * í‰ê·  ê³ ê° ë§Œì¡±ë„ ì¡°íšŒ
     */
â‹®----
Double getAverageCustomerSatisfaction();
â‹®----
/**
     * í™œì„± ì½”ë””ë„¤ì´í„° ì¡°íšŒ (ì–¸ì–´ ìŠ¤í‚¬ ì •ë³´ í•¨ê»˜ ì¡°íšŒ)
     */
â‹®----
List<CoordinatorCareSettings> findByIsActiveTrueOrderByCustomerSatisfactionDesc();
â‹®----
/**
     * ì„±ê³¼ ì ìˆ˜ ìˆœìœ¼ë¡œ í™œì„± ì½”ë””ë„¤ì´í„° ì¡°íšŒ
     */
â‹®----
List<CoordinatorCareSettings> findByIsActiveTrueOrderByPerformanceScoreDesc();
â‹®----
/**
     * ì¼€ì–´ ë“±ê¸‰ ë²”ìœ„ì— ì í•©í•œ ì½”ë””ë„¤ì´í„° ì¡°íšŒ (ì–¸ì–´ ìŠ¤í‚¬ í¬í•¨)
     */
â‹®----
List<CoordinatorCareSettings> findEligibleForCareGrade(@Param("careGrade") Integer careGrade);
â‹®----
/**
     * íŠ¹ì • ì§€ì—­ì—ì„œ í™œë™í•˜ëŠ” ì½”ë””ë„¤ì´í„° ì¡°íšŒ (ì–¸ì–´ ìŠ¤í‚¬ í¬í•¨)
     */
â‹®----
List<CoordinatorCareSettings> findByWorkingRegionsContaining(@Param("region") String region);
â‹®----
/**
     * ì£¼ë§ ê·¼ë¬´ ê°€ëŠ¥í•œ ì½”ë””ë„¤ì´í„° ì¡°íšŒ (ì–¸ì–´ ìŠ¤í‚¬ í¬í•¨)
     */
â‹®----
List<CoordinatorCareSettings> findByIsActiveTrueAndAvailableWeekendsTrue();
â‹®----
/**
     * ì‘ê¸‰ ìƒí™© ëŒ€ì‘ ê°€ëŠ¥í•œ ì½”ë””ë„¤ì´í„° ì¡°íšŒ (ì–¸ì–´ ìŠ¤í‚¬ í¬í•¨)
     */
â‹®----
List<CoordinatorCareSettings> findByIsActiveTrueAndAvailableEmergencyTrue();
â‹®----
/**
     * íŠ¹ì • ì „ë¬¸ ë¶„ì•¼ ì½”ë””ë„¤ì´í„° ì¡°íšŒ (ì–¸ì–´ ìŠ¤í‚¬ í¬í•¨)
     */
â‹®----
List<CoordinatorCareSettings> findBySpecialtyAreasContaining(@Param("specialty") String specialty);
â‹®----
/**
     * ê³ ê° ë§Œì¡±ë„ ê¸°ì¤€ ì´ìƒ ì½”ë””ë„¤ì´í„° ì¡°íšŒ (ì–¸ì–´ ìŠ¤í‚¬ í¬í•¨)
     */
â‹®----
List<CoordinatorCareSettings> findByCustomerSatisfactionGreaterThanEqual(@Param("minSatisfaction") Double minSatisfaction);
â‹®----
/**
     * ê²½ë ¥ ê¸°ì¤€ ì´ìƒ ì½”ë””ë„¤ì´í„° ì¡°íšŒ (ì–¸ì–´ ìŠ¤í‚¬ í¬í•¨)
     */
â‹®----
List<CoordinatorCareSettings> findByExperienceYearsGreaterThanEqual(@Param("minExperience") Integer minExperience);
â‹®----
/**
     * í˜„ì¬ ì¼€ì´ìŠ¤ ìˆ˜ê°€ ìµœëŒ€ì¹˜ ë¯¸ë§Œì¸ ì½”ë””ë„¤ì´í„° ì¡°íšŒ (ì–¸ì–´ ìŠ¤í‚¬ í¬í•¨)
     */
â‹®----
List<CoordinatorCareSettings> findAvailableCoordinators();
â‹®----
/**
     * ë³µí•© ì¡°ê±´ ë§¤ì¹­ì„ ìœ„í•œ ê³ ê¸‰ ì¿¼ë¦¬ (ì–¸ì–´ ìŠ¤í‚¬ í¬í•¨)
     */
â‹®----
List<CoordinatorCareSettings> findOptimalMatches(
â‹®----
/**
     * í†µê³„ìš© ì¿¼ë¦¬ - í™œì„± ì½”ë””ë„¤ì´í„° ìˆ˜
     */
â‹®----
Long countActiveCoordinators();
â‹®----
/**
     * í†µê³„ìš© ì¿¼ë¦¬ - í‰ê·  ê³ ê° ë§Œì¡±ë„
     */
â‹®----
Double findAverageCustomerSatisfaction();
â‹®----
/**
     * í†µê³„ìš© ì¿¼ë¦¬ - ì§€ì—­ë³„ ì½”ë””ë„¤ì´í„° ë¶„í¬
     */
â‹®----
List<Object[]> findCoordinatorDistributionByRegion();
â‹®----
/**
     * í†µê³„ìš© ì¿¼ë¦¬ - ì „ë¬¸ ë¶„ì•¼ë³„ ì½”ë””ë„¤ì´í„° ë¶„í¬
     */
â‹®----
List<Object[]> findCoordinatorDistributionBySpecialty();
â‹®----
/**
     * ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•œ ì¸ë±ìŠ¤ íŒíŠ¸ê°€ í¬í•¨ëœ ì¿¼ë¦¬
     */
â‹®----
List<CoordinatorCareSettings> findTopPerformers(
â‹®----
/**
     * ë°°ì¹˜ ì²˜ë¦¬ë¥¼ ìœ„í•œ ID ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ
     */
â‹®----
List<String> findAllActiveCoordinatorIds();
â‹®----
/**
     * ìºì‹œ ë¬´íš¨í™”ë¥¼ ìœ„í•œ ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ì‹œê°„ ì¡°íšŒ
     */
â‹®----
java.time.LocalDateTime findLastUpdateTime();
</file>

<file path="src/main/java/com/globalcarelink/coordinator/OptimizedCoordinatorMatchingService.java">
/**
 * ìµœì í™”ëœ ì½”ë””ë„¤ì´í„° ë§¤ì¹­ ì„œë¹„ìŠ¤
 * JPA N+1 ë¬¸ì œ í•´ê²° ë° ì„±ëŠ¥ ìµœì í™” ì ìš©
 * @EntityGraph í™œìš©ìœ¼ë¡œ ì–¸ì–´ ìŠ¤í‚¬ ì •ë³´ í•œ ë²ˆì— ì¡°íšŒ
 */
â‹®----
public class OptimizedCoordinatorMatchingService {
â‹®----
/**
     * ìµœì í™”ëœ ì½”ë””ë„¤ì´í„° ë§¤ì¹­
     * @EntityGraphë¡œ N+1 ë¬¸ì œ í•´ê²°
     * ë³µí•© ì¡°ê±´ ì¿¼ë¦¬ë¡œ ì„±ëŠ¥ ìµœì í™”
     */
â‹®----
public List<CoordinatorMatch> findOptimalMatches(HealthAssessment assessment, MatchingPreference preference) {
log.info("ìµœì í™”ëœ ì½”ë””ë„¤ì´í„° ë§¤ì¹­ ì‹œì‘ - í‰ê°€: {}, ì¼€ì–´ë“±ê¸‰: {}",
assessment.getId(), assessment.getLtciGrade());
â‹®----
// 1. ë³µí•© ì¡°ê±´ ì¿¼ë¦¬ë¡œ ê¸°ë³¸ í•„í„°ë§ (N+1 ë¬¸ì œ í•´ê²°)
List<CoordinatorCareSettings> eligibleCoordinators = findEligibleCoordinatorsOptimized(assessment, preference);
â‹®----
if (eligibleCoordinators.isEmpty()) {
log.warn("ë§¤ì¹­ ì¡°ê±´ì— ë¶€í•©í•˜ëŠ” ì½”ë””ë„¤ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤ - í‰ê°€: {}", assessment.getId());
return List.of();
â‹®----
// 2. ì–¸ì–´ í•„í„°ë§ (ì´ë¯¸ @EntityGraphë¡œ ì–¸ì–´ ìŠ¤í‚¬ ì •ë³´ ë¡œë“œë¨)
â‹®----
filterByLanguageOptimized(eligibleCoordinators, preference.getPreferredLanguage());
â‹®----
// 3. ë§¤ì¹­ ì ìˆ˜ ê³„ì‚° ë° ì •ë ¬
List<CoordinatorMatch> matches = languageFilteredCoordinators.stream()
.map(coordinator -> createOptimizedCoordinatorMatch(coordinator, assessment, preference))
.sorted((m1, m2) -> Double.compare(m2.getMatchScore(), m1.getMatchScore()))
.limit(preference.getMaxResults())
.collect(Collectors.toList());
â‹®----
log.info("ìµœì í™”ëœ ë§¤ì¹­ ì™„ë£Œ - í‰ê°€: {}, ë§¤ì¹­ëœ ì½”ë””ë„¤ì´í„°: {}ëª…",
assessment.getId(), matches.size());
â‹®----
/**
     * ë¹„ë™ê¸° ë§¤ì¹­ (ì„±ëŠ¥ ìµœì í™”)
     */
â‹®----
public CompletableFuture<List<CoordinatorMatch>> findOptimalMatchesAsync(
â‹®----
List<CoordinatorMatch> matches = findOptimalMatches(assessment, preference);
return CompletableFuture.completedFuture(matches);
â‹®----
log.error("ë¹„ë™ê¸° ë§¤ì¹­ ì‹¤íŒ¨ - í‰ê°€: {}", assessment.getId(), e);
return CompletableFuture.failedFuture(e);
â‹®----
/**
     * íŠ¹ì • ì–¸ì–´ì™€ ì§€ì—­ ì¡°í•© ë§¤ì¹­ (ìµœì í™”ëœ ì¡°ì¸ ì¿¼ë¦¬ ì‚¬ìš©)
     */
public List<CoordinatorMatch> findByLanguageAndRegion(String languageCode, String region,
â‹®----
log.debug("ì–¸ì–´-ì§€ì—­ ë§¤ì¹­ - ì–¸ì–´: {}, ì§€ì—­: {}", languageCode, region);
â‹®----
// ìµœì í™”ëœ ì¡°ì¸ ì¿¼ë¦¬ ì‚¬ìš© (N+1 ë¬¸ì œ í•´ê²°)
â‹®----
languageSkillRepository.findByLanguageAndRegion(languageCode, region);
â‹®----
return languageSkills.stream()
.map(skill -> {
// ì–¸ì–´ ìŠ¤í‚¬ì—ì„œ ì½”ë””ë„¤ì´í„° ì •ë³´ ê°€ì ¸ì˜¤ê¸° (ì´ë¯¸ ì¡°ì¸ë¨)
â‹®----
.findByCoordinatorId(skill.getCoordinatorId())
.orElse(null);
â‹®----
return createOptimizedCoordinatorMatch(coordinator, assessment,
MatchingPreference.builder()
.preferredLanguage(languageCode)
.preferredRegion(region)
.build());
â‹®----
.filter(match -> match != null)
â‹®----
/**
     * ê³ ì„±ëŠ¥ ì½”ë””ë„¤ì´í„° ì¡°íšŒ (ì¸ë±ìŠ¤ ìµœì í™”ëœ ì¿¼ë¦¬)
     */
public List<CoordinatorMatch> findTopPerformers(Double minSatisfaction, Integer maxResults,
â‹®----
log.debug("ê³ ì„±ëŠ¥ ì½”ë””ë„¤ì´í„° ì¡°íšŒ - ìµœì†Œë§Œì¡±ë„: {}, ìµœëŒ€ê²°ê³¼: {}", minSatisfaction, maxResults);
â‹®----
// ì¸ë±ìŠ¤ ìµœì í™”ëœ ë„¤ì´í‹°ë¸Œ ì¿¼ë¦¬ ì‚¬ìš©
â‹®----
careSettingsRepository.findTopPerformers(minSatisfaction, maxResults);
â‹®----
return topPerformers.stream()
.map(coordinator -> createOptimizedCoordinatorMatch(coordinator, assessment,
â‹®----
.minCustomerSatisfaction(minSatisfaction)
.maxResults(maxResults)
.build()))
â‹®----
/**
     * ë§¤ì¹­ í†µê³„ ì¡°íšŒ (ì„±ëŠ¥ ìµœì í™”)
     */
â‹®----
public CoordinatorMatchingStatistics getMatchingStatistics() {
log.debug("ë§¤ì¹­ í†µê³„ ì¡°íšŒ");
â‹®----
// ë³‘ë ¬ ì²˜ë¦¬ë¡œ ì„±ëŠ¥ ìµœì í™”
â‹®----
.supplyAsync(() -> careSettingsRepository.countActiveCoordinators());
â‹®----
.supplyAsync(() -> careSettingsRepository.findAverageCustomerSatisfaction());
â‹®----
.supplyAsync(() -> careSettingsRepository.findCoordinatorDistributionByRegion());
â‹®----
.supplyAsync(() -> careSettingsRepository.findCoordinatorDistributionBySpecialty());
â‹®----
return CoordinatorMatchingStatistics.builder()
.totalActiveCoordinators(activeCountFuture.get())
.averageCustomerSatisfaction(avgSatisfactionFuture.get() != null ? avgSatisfactionFuture.get() : 0.0)
.availableCoordinators(careSettingsRepository.findAvailableCoordinators().size())
.totalSuccessfulMatches(calculateSuccessfulMatches()) // ë³„ë„ ê³„ì‚° ë¡œì§
.overallMatchingSuccessRate(calculateMatchingSuccessRate()) // ë³„ë„ ê³„ì‚° ë¡œì§
.averageResponseTime(calculateAverageResponseTime()) // ë³„ë„ ê³„ì‚° ë¡œì§
.regionDistribution(regionDistributionFuture.get())
.specialtyDistribution(specialtyDistributionFuture.get())
.build();
â‹®----
log.error("ë§¤ì¹­ í†µê³„ ì¡°íšŒ ì‹¤íŒ¨", e);
â‹®----
.totalActiveCoordinators(0L)
.averageCustomerSatisfaction(0.0)
.availableCoordinators(0)
â‹®----
/**
     * ìºì‹œ ë¬´íš¨í™”
     */
â‹®----
public void evictMatchingCache() {
log.info("ì½”ë””ë„¤ì´í„° ë§¤ì¹­ ìºì‹œ ì‚­ì œ");
â‹®----
// ===== ë‚´ë¶€ ìµœì í™” ë©”ì„œë“œë“¤ =====
â‹®----
/**
     * ë³µí•© ì¡°ê±´ìœ¼ë¡œ ì í•©í•œ ì½”ë””ë„¤ì´í„° ì¡°íšŒ (N+1 ë¬¸ì œ í•´ê²°)
     */
private List<CoordinatorCareSettings> findEligibleCoordinatorsOptimized(
â‹®----
Integer careGrade = assessment.getLtciGrade() != null ? assessment.getLtciGrade() : 4;
Double minSatisfaction = preference.getMinCustomerSatisfaction() != null ?
preference.getMinCustomerSatisfaction() : 3.0;
â‹®----
// ë³µí•© ì¡°ê±´ ì¿¼ë¦¬ ì‚¬ìš© (@EntityGraphë¡œ ì–¸ì–´ ìŠ¤í‚¬ ì •ë³´ í•¨ê»˜ ì¡°íšŒ)
return careSettingsRepository.findOptimalMatches(
â‹®----
preference.getPreferredRegion(),
preference.getNeedsWeekendAvailability(),
preference.getNeedsEmergencyAvailability()
â‹®----
/**
     * ì–¸ì–´ í•„í„°ë§ ìµœì í™” (ì´ë¯¸ ë¡œë“œëœ ì–¸ì–´ ìŠ¤í‚¬ ì •ë³´ í™œìš©)
     */
private List<CoordinatorCareSettings> filterByLanguageOptimized(
â‹®----
if (preferredLanguage == null || preferredLanguage.trim().isEmpty()) {
â‹®----
return coordinators.stream()
.filter(coordinator -> {
// @EntityGraphë¡œ ì´ë¯¸ ë¡œë“œëœ ì–¸ì–´ ìŠ¤í‚¬ ì •ë³´ í™œìš© (N+1 ë¬¸ì œ ì—†ìŒ)
return coordinator.getLanguageSkills().stream()
.anyMatch(skill -> skill.getLanguageCode().equals(preferredLanguage)
&& skill.getIsActive());
â‹®----
/**
     * ìµœì í™”ëœ ì½”ë””ë„¤ì´í„° ë§¤ì¹˜ ê°ì²´ ìƒì„±
     */
private CoordinatorMatch createOptimizedCoordinatorMatch(
â‹®----
double matchScore = calculateComprehensiveMatchScore(coordinator, assessment, preference);
String matchReason = explanationGenerator.generateMatchReason(coordinator, assessment, matchScore);
â‹®----
// ì´ë¯¸ @EntityGraphë¡œ ë¡œë“œëœ ì–¸ì–´ ìŠ¤í‚¬ ì •ë³´ ì‚¬ìš© (ì¶”ê°€ ì¿¼ë¦¬ ì—†ìŒ)
List<CoordinatorLanguageSkill> languageSkills = coordinator.getLanguageSkills();
â‹®----
return CoordinatorMatch.builder()
.coordinatorId(coordinator.getCoordinatorId())
.name(generateCoordinatorName(coordinator.getCoordinatorId())) // ì‹¤ì œë¡œëŠ” ë³„ë„ ì¡°íšŒ í•„ìš”
.matchScore(matchScore)
.matchReason(matchReason)
.experienceYears(coordinator.getExperienceYears())
.successfulCases(coordinator.getSuccessfulCases())
.customerSatisfaction(coordinator.getCustomerSatisfaction())
.specialtyAreas(coordinator.getSpecialtyAreas())
.languageSkills(languageSkills)
.availableWeekends(coordinator.getAvailableWeekends())
.availableEmergency(coordinator.getAvailableEmergency())
.workingRegions(coordinator.getWorkingRegions())
.currentActiveCases(coordinator.getCurrentActiveCases())
.maxSimultaneousCases(coordinator.getMaxSimultaneousCases())
.workloadRatio((double) coordinator.getCurrentActiveCases() / coordinator.getMaxSimultaneousCases())
â‹®----
/**
     * ì¢…í•© ë§¤ì¹­ ì ìˆ˜ ê³„ì‚° (ìµœì í™”ëœ ì•Œê³ ë¦¬ì¦˜)
     */
private double calculateComprehensiveMatchScore(
â‹®----
// 1. ì¼€ì–´ ë“±ê¸‰ ì í•©ì„± (30%)
if (assessment.getLtciGrade() != null) {
if (coordinator.getBaseCareLevel() <= assessment.getLtciGrade() &&
coordinator.getMaxCareLevel() >= assessment.getLtciGrade()) {
â‹®----
baseScore += 15.0; // ë“±ê¸‰ ì •ë³´ ì—†ì„ ë•Œ ê¸°ë³¸ ì ìˆ˜
â‹®----
// 2. ê³ ê° ë§Œì¡±ë„ (25%)
baseScore += (coordinator.getCustomerSatisfaction() / 5.0) * 25.0;
â‹®----
// 3. ê²½ë ¥ (20%)
baseScore += Math.min(coordinator.getExperienceYears() / 10.0, 1.0) * 20.0;
â‹®----
// 4. ì›Œí¬ë¡œë“œ (15%)
double workloadRatio = (double) coordinator.getCurrentActiveCases() / coordinator.getMaxSimultaneousCases();
â‹®----
// 5. ì–¸ì–´ ë§¤ì¹­ (10%)
if (preference.getPreferredLanguage() != null) {
boolean hasLanguage = coordinator.getLanguageSkills().stream()
.anyMatch(skill -> skill.getLanguageCode().equals(preference.getPreferredLanguage()));
â‹®----
baseScore += 5.0; // ì–¸ì–´ ì„ í˜¸ë„ ì—†ì„ ë•Œ ê¸°ë³¸ ì ìˆ˜
â‹®----
return Math.min(baseScore, 100.0);
â‹®----
// ===== í†µê³„ ê³„ì‚° í—¬í¼ ë©”ì„œë“œë“¤ =====
â‹®----
private Long calculateSuccessfulMatches() {
// ì‹¤ì œë¡œëŠ” ë§¤ì¹­ ì´ë ¥ í…Œì´ë¸”ì—ì„œ ì¡°íšŒ
return 1200L; // ì„ì‹œê°’
â‹®----
private Double calculateMatchingSuccessRate() {
// ì‹¤ì œë¡œëŠ” ì„±ê³µ/ì „ì²´ ë§¤ì¹­ ë¹„ìœ¨ ê³„ì‚°
return 85.5; // ì„ì‹œê°’
â‹®----
private Double calculateAverageResponseTime() {
// ì‹¤ì œë¡œëŠ” ë§¤ì¹­ ì‘ë‹µ ì‹œê°„ í†µê³„ ê³„ì‚°
return 12.3; // ì„ì‹œê°’
â‹®----
private String generateCoordinatorName(String coordinatorId) {
// ì‹¤ì œë¡œëŠ” Member í…Œì´ë¸”ì—ì„œ ì´ë¦„ ì¡°íšŒ ë˜ëŠ” ë³„ë„ ìºì‹œ ì‚¬ìš©
return coordinatorId.endsWith("001") ? "ê¹€ì½”ë””ë„¤ì´í„°" : "ì´ì½”ë””ë„¤ì´í„°";
</file>

<file path="src/main/java/com/globalcarelink/health/HealthAssessment.java">
import lombok.*;
â‹®----
/**
 * ê±´ê°• ìƒíƒœ í‰ê°€ ì—”í‹°í‹° (KBë¼ì´í”„ìƒëª… ê¸°ë°˜ ëŒë´„ì§€ìˆ˜)
 * 
 * 4ê°œ ì£¼ìš” í‰ê°€ ì˜ì—­:
 * - ê±·ê¸° í™œë™ ëŠ¥ë ¥ (mobility)
 * - ì‹ì‚¬ í™œë™ ëŠ¥ë ¥ (eating) 
 * - ë°°ë³€ í™œë™ ëŠ¥ë ¥ (toilet)
 * - ì˜ì‚¬ì†Œí†µ ëŠ¥ë ¥ (communication)
 */
â‹®----
public class HealthAssessment extends BaseEntity {
â‹®----
// ===== ê¸°ë³¸ ì •ë³´ =====
â‹®----
// ===== ADL í‰ê°€ (ê° ì˜ì—­ 1-3ì ) =====
â‹®----
/**
     * ê±·ê¸° í™œë™ ëŠ¥ë ¥ (care_mobility)
     * 1: ë…ë¦½ - í˜¼ìì„œ ê°€ëŠ¥
     * 2: ë¶€ë¶„ë„ì›€ - ë¶€ì¶•, ì§€íŒ¡ì´ ë“± í•„ìš”
     * 3: ì™„ì „ë„ì›€ - íœ ì²´ì–´ ì‚¬ìš© ë“±
     */
â‹®----
/**
     * ì‹ì‚¬ í™œë™ ëŠ¥ë ¥ (care_eating)
     * 1: ë…ë¦½ - í˜¼ìì„œ ê°€ëŠ¥
     * 2: ë¶€ë¶„ë„ì›€ - ë°˜ì°¬ ì§‘ê¸°, ìë¥´ê¸° ë“± ì¼ë¶€ ë„ì›€
     * 3: ì™„ì „ë„ì›€ - ìŒì‹ì„ ë–  ë¨¹ì—¬ì¤Œ
     */
â‹®----
/**
     * ë°°ë³€ í™œë™ ëŠ¥ë ¥ (care_toilet)
     * 1: ë…ë¦½ - í˜¼ìì„œ í™”ì¥ì‹¤ ì´ìš© ê°€ëŠ¥
     * 2: ë¶€ë¶„ë„ì›€ - í™”ì¥ì‹¤ ì´ìš© ì‹œ ë¶€ë¶„ì  ë„ì›€ í•„ìš”
     * 3: ì™„ì „ë„ì›€ - ê°„ì´ë³€ê¸°, ê¸°ì €ê·€ ì°©ìš© ë“±
     */
â‹®----
/**
     * ì˜ì‚¬ì†Œí†µ ëŠ¥ë ¥ (care_communication)
     * 1: ì •ìƒ - ì •ìƒì ìœ¼ë¡œ ê°€ëŠ¥
     * 2: ë¶€ë¶„ì œí•œ - ë•Œë•Œë¡œ ì–´ë ¤ì›€ (í™”ì¥ì‹¤ ì´ìš©ì˜ì‚¬ í‘œí˜„ ê°€ëŠ¥)
     * 3: ì‹¬ê°ì œí•œ - ì†Œí†µì´ ì–´ë ¤ì›€ (í™”ì¥ì‹¤ ì´ìš©ì˜ì‚¬ í‘œí˜„ ì˜ ëª»í•¨)
     */
â‹®----
// ===== ì¥ê¸°ìš”ì–‘ë³´í—˜ ì •ë³´ =====
â‹®----
/**
     * ì¥ê¸°ìš”ì–‘ë³´í—˜ ë“±ê¸‰
     * 1-5: ì¥ê¸°ìš”ì–‘ë“±ê¸‰ (1ë“±ê¸‰ì´ ìµœì¤‘ì¦)
     * 6: ì¸ì§€ì§€ì›ë“±ê¸‰ (ì¹˜ë§¤ ë“±)
     * 7: ë“±ê¸‰ íŒì • ì¤‘ ë˜ëŠ” ëª¨ë¦„
     * 8: ë“±ê¸‰ ì—†ìŒ
     */
â‹®----
/**
     * ëŒë´„ëŒ€ìƒì ìƒíƒœ (ìƒëª…ì˜ˆí›„ ìƒíƒœ)
     * 1: 6ê°œì›” ì´í•˜ ê¸°ëŒ€ìˆ˜ëª… (í˜¸ìŠ¤í”¼ìŠ¤ ì¼€ì–´)
     * 2: ì§ˆë³‘ì´ íšŒë³µí•˜ê¸° ì–´ë ¤ìš´ ìƒí™©ìœ¼ë¡œ ìˆ˜ëª…ì´ ì–¼ë§ˆ ë‚¨ì§€ ì•ŠìŒ
     * 3: ì™„ì „íˆ íƒ€ì¸ ì˜ì¡´ì ì´ë‚˜ ì‚¬ë§ìœ„í—˜ì´ ë†’ì§€ ì•ŠìŒ
     * 4: í•´ë‹¹ì‚¬í•­ ì—†ìŒ (ì¼ë°˜ ìš”ì–‘)
     */
â‹®----
// ===== KBë¼ì´í”„ìƒëª… ì°¸ì¡°: ì¶”ê°€ í‰ê°€ í•­ëª© =====
â‹®----
/**
     * ì‹ì‚¬ í˜•íƒœ (KBë¼ì´í”„ìƒëª… ê¸°ì¤€ ì¶”ê°€)
     * 1: ì¼ë°˜ì‹ (ì •ìƒ ì‹ì‚¬ ê°€ëŠ¥)
     * 2: ë‹¤ì§„ì‹/ê°ˆì€ì‹ (ë¶€ë“œëŸ¬ìš´ ì‹ì‚¬ í•„ìš”)
     * 3: ê²½ê´€ì‹ (íŠœë¸Œ ì£¼ì…)
     */
â‹®----
/**
     * ì£¼ìš” ì§ˆí™˜ ë¶„ë¥˜ (ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)
     * DEMENTIA: ì¹˜ë§¤ (ì¸ì§€ê¸°ëŠ¥ ì €í•˜)
     * PARKINSON: íŒŒí‚¨ìŠ¨ (ìš´ë™ì¥ì• )
     * STROKE: ë‡Œí˜ˆê´€ì§ˆí™˜ (ë‡Œì¡¸ì¤‘ ë“±)
     * DIABETES: ë‹¹ë‡¨ë³‘
     * HYPERTENSION: ê³ í˜ˆì••
     * OTHER: ê¸°íƒ€
     * UNKNOWN: ì˜ ëª¨ë¥´ê² ìŒ
     */
â‹®----
private String diseaseTypes; // JSON í˜•íƒœë¡œ ì €ì¥: ["DEMENTIA", "STROKE"]
â‹®----
// ===== ê³„ì‚°ëœ ê²°ê³¼ =====
â‹®----
/**
     * ADL ì ìˆ˜ (ì¼ìƒìƒí™œìˆ˜í–‰ëŠ¥ë ¥ ì ìˆ˜)
     * ê³„ì‚°ì‹: (mobility*25) + (eating*20) + (toilet*30) + (communication*25)
     * ë²”ìœ„: 100-300ì 
     */
â‹®----
/**
     * ì¢…í•© ì¼€ì–´ ë“±ê¸‰
     * ADL ì ìˆ˜ + ì¥ê¸°ìš”ì–‘ë³´í—˜ ë“±ê¸‰ + ëŒë´„ëŒ€ìƒì ìƒíƒœë¥¼ ì¢…í•©í•˜ì—¬ ì‚°ì¶œ
     */
â‹®----
private LocalDateTime assessmentDate = LocalDateTime.now();
â‹®----
// ===== ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì„œë“œ =====
â‹®----
/**
     * ADL ì ìˆ˜ ê³„ì‚°
     * ê° ì˜ì—­ë³„ ê°€ì¤‘ì¹˜ë¥¼ ì ìš©í•˜ì—¬ ì´ì  ê³„ì‚°
     */
public void calculateAdlScore() {
â‹®----
/**
     * ì¬ì™¸ë™í¬ ì—¬ë¶€ í™•ì¸
     * íšŒì› ì •ë³´ë¥¼ í†µí•´ í™•ì¸ (ì¶”í›„ Member ì—”í‹°í‹°ì™€ ì—°ë™)
     */
public boolean isOverseasKorean() {
// TODO: Member ì—”í‹°í‹°ì˜ roleì´ USER_OVERSEASì¸ì§€ í™•ì¸
return false; // ì„ì‹œ êµ¬í˜„
â‹®----
/**
     * ì¢…í•© í‰ê°€ ì ìˆ˜ (5ì  ë§Œì )
     * ADL ì ìˆ˜ë¥¼ 5ì  ë§Œì ìœ¼ë¡œ í™˜ì‚°
     */
public double getOverallScore() {
â‹®----
calculateAdlScore();
â‹®----
// 100ì (ìµœê³ ) â†’ 5.0ì , 300ì (ìµœì €) â†’ 1.0ì ìœ¼ë¡œ í™˜ì‚°
â‹®----
return Math.max(1.0, Math.min(5.0, normalizedScore));
â‹®----
/**
     * ì¼€ì–´ ë“±ê¸‰ ë ˆë²¨ ë°˜í™˜
     * 1: ìµœì¤‘ì¦, 2: ì¤‘ì¦, 3: ì¤‘ë“±ì¦, 4: ê²½ì¦, 5: ê²½ì¦, 6: ì¸ì§€ì§€ì›
     */
public int getCareGradeLevel() {
â‹®----
// ì¥ê¸°ìš”ì–‘ë“±ê¸‰ì´ ì—†ëŠ” ê²½ìš° ADL ì ìˆ˜ë¡œ ì¶”ì •
â‹®----
if (adlScore >= 250) return 1; // ìµœì¤‘ì¦
if (adlScore >= 220) return 2; // ì¤‘ì¦
if (adlScore >= 180) return 3; // ì¤‘ë“±ì¦
if (adlScore >= 140) return 4; // ê²½ì¦
return 5; // ê²½ì¦
â‹®----
/**
     * í‰ê°€ ì™„ì„±ë„ í™•ì¸
     */
public boolean isComplete() {
â‹®----
/**
     * í‰ê°€ ê°±ì‹  (ìƒˆë¡œìš´ í‰ê°€ ê²°ê³¼ë¡œ ì—…ë°ì´íŠ¸)
     */
public void updateAssessment(Integer mobility, Integer eating, Integer toilet, Integer communication) {
â‹®----
this.assessmentDate = LocalDateTime.now();
â‹®----
// ìë™ìœ¼ë¡œ ADL ì ìˆ˜ ì¬ê³„ì‚°
â‹®----
/**
     * íŠ¹ì • ì§ˆí™˜ ì—¬ë¶€ í™•ì¸
     */
public boolean hasDiseaseType(String diseaseType) {
return diseaseTypes != null && diseaseTypes.contains(diseaseType);
â‹®----
/**
     * ì¤‘ì¦ ì§€í‘œ ì—¬ë¶€ í™•ì¸ (KBë¼ì´í”„ìƒëª… ê¸°ì¤€)
     * - ê²½ê´€ì‹(íŠœë¸Œ ì£¼ì…) ë˜ëŠ”
     * - ë°°ë³€í™œë™ ì™„ì „ë„ì›€
     */
public boolean hasSevereIndicators() {
â‹®----
/**
     * ì¹˜ë§¤ ê´€ë ¨ ì§ˆí™˜ ì—¬ë¶€ í™•ì¸
     */
public boolean hasDementiaRelatedCondition() {
â‹®----
hasDiseaseType("DEMENTIA");
â‹®----
/**
     * í˜¸ìŠ¤í”¼ìŠ¤ ì¼€ì–´ í•„ìš” ì—¬ë¶€ í™•ì¸
     */
public boolean needsHospiceCare() {
â‹®----
/**
     * ì§ˆí™˜ë³„ ì „ë¬¸ ì¼€ì–´ íƒ€ì… ë°˜í™˜
     */
public String getSpecializedCareType() {
if (needsHospiceCare()) {
â‹®----
if (hasDementiaRelatedCondition()) {
â‹®----
if (hasDiseaseType("PARKINSON")) {
â‹®----
if (hasDiseaseType("STROKE")) {
â‹®----
if (hasSevereIndicators()) {
â‹®----
/**
     * ì˜ˆìƒ ì›” ë¹„ìš© ë²”ìœ„ ë°˜í™˜ (ë“±ê¸‰ ê¸°ë°˜)
     */
public String getEstimatedMonthlyCostRange() {
int gradeLevel = getCareGradeLevel();
â‹®----
/**
     * í‰ê°€ ê²°ê³¼ ìš”ì•½ í…ìŠ¤íŠ¸ ìƒì„±
     */
public String generateAssessmentSummary() {
StringBuilder summary = new StringBuilder();
â‹®----
summary.append("ğŸ¥ ì¢…í•© ì¼€ì–´ ë“±ê¸‰: ").append(overallCareGrade != null ? overallCareGrade : "ë¯¸ì‚°ì¶œ").append("\n");
summary.append("ğŸ“Š ADL ì ìˆ˜: ").append(adlScore != null ? adlScore + "ì " : "ë¯¸ê³„ì‚°").append("\n");
â‹®----
summary.append("ğŸ¯ ì¥ê¸°ìš”ì–‘ë“±ê¸‰: ").append(ltciGrade).append("ë“±ê¸‰\n");
â‹®----
summary.append("âš ï¸ ì¤‘ì¦ ì§€í‘œ ì¡´ì¬\n");
â‹®----
summary.append("ğŸ•Šï¸ í˜¸ìŠ¤í”¼ìŠ¤ ì¼€ì–´ ê¶Œì¥\n");
â‹®----
summary.append("ğŸ’° ì˜ˆìƒ ë¹„ìš©: ").append(getEstimatedMonthlyCostRange());
â‹®----
return summary.toString();
</file>

<file path="src/main/java/com/globalcarelink/health/HealthAssessmentRepository.java">
/**
 * ê±´ê°• ìƒíƒœ í‰ê°€ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ
 */
â‹®----
public interface HealthAssessmentRepository extends JpaRepository<HealthAssessment, Long> {
â‹®----
/**
     * íšŒì› IDë¡œ ê±´ê°• í‰ê°€ ì¡°íšŒ
     */
Optional<HealthAssessment> findByMemberId(Long memberId);
â‹®----
/**
     * íšŒì›ë³„ ìµœì‹  ê±´ê°• í‰ê°€ ì¡°íšŒ
     */
Optional<HealthAssessment> findTopByMemberIdOrderByAssessmentDateDesc(String memberId);
â‹®----
/**
     * íšŒì›ë³„ ëª¨ë“  ê±´ê°• í‰ê°€ ì´ë ¥ ì¡°íšŒ (ìµœì‹ ìˆœ)
     */
List<HealthAssessment> findByMemberIdOrderByAssessmentDateDesc(String memberId);
â‹®----
/**
     * íšŒì›ë³„ ê±´ê°• í‰ê°€ í˜ì´ì§• ì¡°íšŒ
     */
Page<HealthAssessment> findByMemberIdOrderByAssessmentDateDesc(String memberId, Pageable pageable);
â‹®----
/**
     * ì™„ì„±ëœ í‰ê°€ë§Œ ì¡°íšŒ
     */
â‹®----
List<HealthAssessment> findCompleteAssessments();
â‹®----
/**
     * íŠ¹ì • ì¼€ì–´ ë“±ê¸‰ ë²”ìœ„ì˜ í‰ê°€ ì¡°íšŒ
     */
â‹®----
List<HealthAssessment> findByCareGradeRange(@Param("minGrade") Integer minGrade, @Param("maxGrade") Integer maxGrade);
â‹®----
/**
     * ADL ì ìˆ˜ ë²”ìœ„ë³„ ì¡°íšŒ
     */
â‹®----
List<HealthAssessment> findByAdlScoreRange(@Param("minScore") Integer minScore, @Param("maxScore") Integer maxScore);
â‹®----
/**
     * ì§ˆí™˜ ìœ í˜•ë³„ í‰ê°€ ì¡°íšŒ
     */
List<HealthAssessment> findByDiseaseTypesContaining(String diseaseType);
â‹®----
/**
     * ì¶œìƒë…„ë„ ë²”ìœ„ë³„ í‰ê°€ ì¡°íšŒ (ì—°ë ¹ëŒ€ ì¡°íšŒìš©)
     */
List<HealthAssessment> findByBirthYearBetween(Integer startYear, Integer endYear);
â‹®----
/**
     * ì¬ì™¸ë™í¬ ëŒ€ìƒ í‰ê°€ ì¡°íšŒ (Member ì—”í‹°í‹°ì™€ ì¡°ì¸ í•„ìš” - ì¶”í›„ êµ¬í˜„)
     */
â‹®----
List<HealthAssessment> findOverseasKoreanAssessments();
â‹®----
/**
     * íŠ¹ì • ê¸°ê°„ ë‚´ í‰ê°€ ì¡°íšŒ
     */
List<HealthAssessment> findByAssessmentDateBetween(LocalDateTime startDate, LocalDateTime endDate);
â‹®----
/**
     * ì¼€ì–´ ë“±ê¸‰ë³„ í†µê³„
     */
â‹®----
List<Map<String, Object>> findCareGradeStatistics();
â‹®----
/**
     * ADL ì ìˆ˜ êµ¬ê°„ë³„ í†µê³„
     */
â‹®----
List<Map<String, Object>> findAdlScoreDistribution();
â‹®----
/**
     * ì—°ë ¹ëŒ€ë³„ ì¼€ì–´ ë“±ê¸‰ ë¶„í¬
     */
â‹®----
List<Map<String, Object>> findAgeGroupCareGradeDistribution();
â‹®----
/**
     * ì„±ë³„ ì¼€ì–´ íŒ¨í„´ ë¶„ì„
     */
â‹®----
List<Map<String, Object>> findGenderCarePatternAnalysis();
â‹®----
/**
     * í˜¸ìŠ¤í”¼ìŠ¤ ì¼€ì–´ ëŒ€ìƒì ì¡°íšŒ
     * - 1-2ë“±ê¸‰ ìµœì¤‘ì¦/ì¤‘ì¦ í™˜ì
     * - ë§ê¸° ì§ˆí™˜ ê´€ë ¨ í‚¤ì›Œë“œ í¬í•¨
     */
â‹®----
List<HealthAssessment> findHospiceCareTargets();
â‹®----
/**
     * ì¹˜ë§¤ ì „ë¬¸ ì¼€ì–´ ëŒ€ìƒì ì¡°íšŒ
     * - ì¸ì§€ì§€ì›ë“±ê¸‰ ë˜ëŠ” ì¹˜ë§¤ ê´€ë ¨ ì§ˆí™˜
     * - ì˜ì‚¬ì†Œí†µ ëŠ¥ë ¥ ì €í•˜ì (3ì )
     */
â‹®----
List<HealthAssessment> findDementiaCareTargets();
â‹®----
/**
     * ì¤‘ì¦ í™˜ì ì¡°íšŒ
     * - 1-3ë“±ê¸‰ ì¤‘ì¦ ì´ìƒ
     * - ADL ì ìˆ˜ 200ì  ì´ìƒ
     */
â‹®----
List<HealthAssessment> findSevereCareTargets();
â‹®----
/**
     * ìµœê·¼ ì§€ì • ê¸°ê°„ ë‚´ í‰ê°€ ê°œìˆ˜ ì¡°íšŒ
     */
â‹®----
Long countRecentAssessments(@Param("since") LocalDateTime since);
â‹®----
/**
     * íšŒì›ì˜ í‰ê°€ ê°œì„  ì¶”ì´ ë¶„ì„
     */
â‹®----
List<Map<String, Object>> findMemberAssessmentTrend(@Param("memberId") String memberId);
</file>

<file path="src/main/java/com/globalcarelink/profile/ProfileService.java">
/**
 * í”„ë¡œí•„ ì„œë¹„ìŠ¤
 * BaseProfile ì¶”ìƒí™”ë¥¼ í™œìš©í•œ DRY ì›ì¹™ ì ìš©
 * ê³µí†µ ë¡œì§ í†µí•©ìœ¼ë¡œ ì¤‘ë³µ ì½”ë“œ ì œê±°
 */
â‹®----
public class ProfileService {
â‹®----
// ===== êµ­ë‚´ í”„ë¡œí•„ ê´€ë¦¬ =====
â‹®----
public DomesticProfileResponse createDomesticProfile(Long memberId, DomesticProfileRequest request) {
log.info("êµ­ë‚´ í”„ë¡œí•„ ìƒì„± ì‹œì‘ - íšŒì›: {}", memberId);
â‹®----
validateDomesticProfileRequest(request);
â‹®----
Member member = findMemberById(memberId);
validateMemberForDomesticProfile(member);
â‹®----
if (domesticProfileRepository.existsByMemberId(memberId)) {
â‹®----
DomesticProfile profile = buildDomesticProfile(member, request);
DomesticProfile savedProfile = domesticProfileRepository.save(profile);
â‹®----
log.info("êµ­ë‚´ í”„ë¡œí•„ ìƒì„± ì™„ë£Œ - íšŒì›: {}, ì™„ì„±ë„: {}%",
memberId, savedProfile.getProfileCompletionPercentage());
â‹®----
return DomesticProfileResponse.from(savedProfile);
â‹®----
public OverseasProfileResponse createOverseasProfile(Long memberId, OverseasProfileRequest request) {
log.info("í•´ì™¸ í”„ë¡œí•„ ìƒì„± ì‹œì‘ - íšŒì›: {}", memberId);
â‹®----
validateOverseasProfileRequest(request);
â‹®----
validateMemberForOverseasProfile(member);
â‹®----
if (overseasProfileRepository.existsByMemberId(memberId)) {
â‹®----
OverseasProfile profile = buildOverseasProfile(member, request);
OverseasProfile savedProfile = overseasProfileRepository.save(profile);
â‹®----
log.info("í•´ì™¸ í”„ë¡œí•„ ìƒì„± ì™„ë£Œ - íšŒì›: {}, ê±°ì£¼êµ­: {}, ì™„ì„±ë„: {}%",
memberId, savedProfile.getResidenceCountry(), savedProfile.getProfileCompletionPercentage());
â‹®----
return OverseasProfileResponse.from(savedProfile);
â‹®----
public DomesticProfileResponse getDomesticProfile(Long memberId) {
DomesticProfile profile = domesticProfileRepository.findByMemberId(memberId)
.orElseThrow(() -> new CustomException.NotFound("êµ­ë‚´ í”„ë¡œí•„ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤"));
â‹®----
return DomesticProfileResponse.from(profile);
â‹®----
public OverseasProfileResponse getOverseasProfile(Long memberId) {
OverseasProfile profile = overseasProfileRepository.findByMemberId(memberId)
.orElseThrow(() -> new CustomException.NotFound("í•´ì™¸ í”„ë¡œí•„ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤"));
â‹®----
return OverseasProfileResponse.from(profile);
â‹®----
public DomesticProfileResponse updateDomesticProfile(Long memberId, DomesticProfileRequest request) {
log.info("êµ­ë‚´ í”„ë¡œí•„ ìˆ˜ì • ì‹œì‘ - íšŒì›: {}", memberId);
â‹®----
updateDomesticProfileFields(profile, request);
â‹®----
log.info("êµ­ë‚´ í”„ë¡œí•„ ìˆ˜ì • ì™„ë£Œ - íšŒì›: {}, ì™„ì„±ë„: {}%",
memberId, profile.getProfileCompletionPercentage());
â‹®----
public OverseasProfileResponse updateOverseasProfile(Long memberId, OverseasProfileRequest request) {
log.info("í•´ì™¸ í”„ë¡œí•„ ìˆ˜ì • ì‹œì‘ - íšŒì›: {}", memberId);
â‹®----
updateOverseasProfileFields(profile, request);
â‹®----
log.info("í•´ì™¸ í”„ë¡œí•„ ìˆ˜ì • ì™„ë£Œ - íšŒì›: {}, ì™„ì„±ë„: {}%",
â‹®----
public void deleteDomesticProfile(Long memberId) {
â‹®----
domesticProfileRepository.delete(profile);
log.info("êµ­ë‚´ í”„ë¡œí•„ ì‚­ì œ ì™„ë£Œ - íšŒì›: {}", memberId);
â‹®----
public void deleteOverseasProfile(Long memberId) {
â‹®----
overseasProfileRepository.delete(profile);
log.info("í•´ì™¸ í”„ë¡œí•„ ì‚­ì œ ì™„ë£Œ - íšŒì›: {}", memberId);
â‹®----
// ===== ì¡°íšŒ ë©”ì„œë“œë“¤ =====
â‹®----
public List<DomesticProfileResponse> getDomesticProfilesByCompletion(int minCompletionRate) {
validateCompletionRate(minCompletionRate);
â‹®----
return domesticProfileRepository.findByProfileCompletionPercentageGreaterThanEqual(minCompletionRate)
.stream()
.map(DomesticProfileResponse::from)
.collect(Collectors.toList());
â‹®----
public List<OverseasProfileResponse> getOverseasProfilesByCountry(String country) {
if (!StringUtils.hasText(country)) {
â‹®----
return overseasProfileRepository.findByResidenceCountry(country)
â‹®----
.map(OverseasProfileResponse::from)
â‹®----
public List<OverseasProfileResponse> getOverseasProfilesRequiringCoordinator() {
return overseasProfileRepository.findRequiringCoordinator()
â‹®----
public List<DomesticProfileResponse> getDomesticProfilesByCareLevel(String careLevel) {
if (!StringUtils.hasText(careLevel)) {
â‹®----
return domesticProfileRepository.findByCareLevel(careLevel)
â‹®----
public List<OverseasProfileResponse> getOverseasProfilesByLanguage(String language) {
if (!StringUtils.hasText(language)) {
â‹®----
return overseasProfileRepository.findByLanguagePreferenceContaining(language)
â‹®----
// ===== ë‚´ë¶€ ë©”ì„œë“œë“¤ (DRY ì›ì¹™ ì ìš©) =====
â‹®----
private Member findMemberById(Long memberId) {
return memberRepository.findById(memberId)
.orElseThrow(() -> new CustomException.NotFound("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íšŒì›ì…ë‹ˆë‹¤"));
â‹®----
private DomesticProfile buildDomesticProfile(Member member, DomesticProfileRequest request) {
DomesticProfile profile = DomesticProfile.builder()
.member(member)
.healthInsuranceNumber(sanitizeInput(request.getHealthInsuranceNumber()))
.ltciGrade(request.getLtciGrade())
.ltciCertificateNumber(sanitizeInput(request.getLtciCertificateNumber()))
.preferredRegion(sanitizeInput(request.getPreferredRegion()))
.familyVisitFrequency(sanitizeInput(request.getFamilyVisitFrequency()))
.build();
â‹®----
// BaseProfileì˜ ê³µí†µ í•„ë“œ ì„¤ì •
updateBaseProfileFields(profile, request);
â‹®----
private OverseasProfile buildOverseasProfile(Member member, OverseasProfileRequest request) {
OverseasProfile profile = OverseasProfile.builder()
â‹®----
.residenceCountry(sanitizeInput(request.getResidenceCountry()))
.residenceCity(sanitizeInput(request.getResidenceCity()))
.koreanAddress(sanitizeInput(request.getKoreanAddress()))
.koreanPostalCode(sanitizeInput(request.getKoreanPostalCode()))
.passportNumber(sanitizeInput(request.getPassportNumber()))
.passportExpiryDate(request.getPassportExpiryDate())
.visaStatus(sanitizeInput(request.getVisaStatus()))
.visaExpiryDate(request.getVisaExpiryDate())
.overseasContactName(sanitizeInput(request.getOverseasContactName()))
.overseasContactPhone(sanitizeInput(request.getOverseasContactPhone()))
.overseasContactRelation(sanitizeInput(request.getOverseasContactRelation()))
.languagePreference(sanitizeInput(request.getLanguagePreference()))
.timeZonePreference(sanitizeInput(request.getTimeZonePreference()))
.preferredRegionInKorea(sanitizeInput(request.getPreferredRegionInKorea()))
.culturalDietaryRequirements(sanitizeInput(request.getCulturalDietaryRequirements()))
.coordinatorRequired(request.getCoordinatorRequired())
â‹®----
/**
     * BaseProfile ê³µí†µ í•„ë“œ ì—…ë°ì´íŠ¸ (ì œë„¤ë¦­ ë©”ì„œë“œ)
     * DRY ì›ì¹™ ì ìš©ìœ¼ë¡œ ì¤‘ë³µ ì½”ë“œ ì œê±°
     */
private <T extends BaseProfile, R extends BaseProfileRequest> void updateBaseProfileFields(T profile, R request) {
// ê¸°ë³¸ ì •ë³´ ì—…ë°ì´íŠ¸
profile.updateBasicInfo(
request.getBirthDate(),
sanitizeInput(request.getGender()),
sanitizeInput(request.getAddress()),
sanitizeInput(request.getDetailedAddress()),
sanitizeInput(request.getPostalCode())
â‹®----
// ë¹„ìƒì—°ë½ì²˜ ì •ë³´ ì—…ë°ì´íŠ¸
profile.updateEmergencyContact(
sanitizeInput(request.getEmergencyContactName()),
sanitizeInput(request.getEmergencyContactPhone()),
sanitizeInput(request.getEmergencyContactRelation())
â‹®----
// ì¼€ì–´ ê´€ë ¨ ì •ë³´ ì—…ë°ì´íŠ¸
profile.updateCareInfo(
sanitizeInput(request.getCareLevel()),
sanitizeInput(request.getSpecialNeeds()),
sanitizeInput(request.getBudgetRange())
â‹®----
private void updateDomesticProfileFields(DomesticProfile profile, DomesticProfileRequest request) {
// ê³µí†µ í•„ë“œ ì—…ë°ì´íŠ¸
â‹®----
// êµ­ë‚´ í”„ë¡œí•„ ê³ ìœ  í•„ë“œ ì—…ë°ì´íŠ¸
profile.updateHealthInfo(
sanitizeInput(request.getHealthInsuranceNumber()),
request.getLtciGrade(),
sanitizeInput(request.getLtciCertificateNumber())
â‹®----
profile.updatePreferences(
sanitizeInput(request.getPreferredRegion()),
sanitizeInput(request.getFamilyVisitFrequency())
â‹®----
private void updateOverseasProfileFields(OverseasProfile profile, OverseasProfileRequest request) {
â‹®----
// í•´ì™¸ í”„ë¡œí•„ ê³ ìœ  í•„ë“œ ì—…ë°ì´íŠ¸
profile.updateResidenceInfo(
sanitizeInput(request.getResidenceCountry()),
sanitizeInput(request.getResidenceCity()),
sanitizeInput(request.getKoreanAddress()),
sanitizeInput(request.getKoreanPostalCode())
â‹®----
profile.updateDocumentInfo(
sanitizeInput(request.getPassportNumber()),
request.getPassportExpiryDate(),
sanitizeInput(request.getVisaStatus()),
request.getVisaExpiryDate()
â‹®----
profile.updateOverseasContact(
sanitizeInput(request.getOverseasContactName()),
sanitizeInput(request.getOverseasContactPhone()),
sanitizeInput(request.getOverseasContactRelation())
â‹®----
sanitizeInput(request.getLanguagePreference()),
sanitizeInput(request.getTimeZonePreference()),
sanitizeInput(request.getPreferredRegionInKorea()),
sanitizeInput(request.getCulturalDietaryRequirements()),
request.getCoordinatorRequired()
â‹®----
// ===== ê²€ì¦ ë©”ì„œë“œë“¤ =====
â‹®----
private void validateDomesticProfileRequest(DomesticProfileRequest request) {
â‹®----
// ê³µí†µ í•„ë“œ ê²€ì¦
validateBaseProfileRequest(request);
â‹®----
// ì¥ê¸°ìš”ì–‘ë“±ê¸‰ ê²€ì¦
if (request.getLtciGrade() != null &&
(request.getLtciGrade() < 1 || request.getLtciGrade() > 6)) {
â‹®----
private void validateOverseasProfileRequest(OverseasProfileRequest request) {
â‹®----
// ê±°ì£¼ êµ­ê°€ í•„ìˆ˜ ê²€ì¦
if (!StringUtils.hasText(request.getResidenceCountry())) {
â‹®----
// ì—¬ê¶Œ ë§Œë£Œì¼ ê²€ì¦
if (request.getPassportExpiryDate() != null &&
request.getPassportExpiryDate().isBefore(java.time.LocalDate.now())) {
â‹®----
/**
     * BaseProfile ê³µí†µ í•„ë“œ ê²€ì¦ (ì œë„¤ë¦­ ë©”ì„œë“œ)
     */
private <T extends BaseProfileRequest> void validateBaseProfileRequest(T request) {
// ë³´ì•ˆ íŒ¨í„´ ê²€ì¦
validateSecurityPatterns(
request.getGender(),
request.getAddress(),
request.getDetailedAddress(),
request.getPostalCode(),
request.getEmergencyContactName(),
request.getEmergencyContactPhone(),
request.getEmergencyContactRelation(),
request.getCareLevel(),
request.getSpecialNeeds(),
request.getBudgetRange()
â‹®----
// ì „í™”ë²ˆí˜¸ í˜•ì‹ ê²€ì¦
if (StringUtils.hasText(request.getEmergencyContactPhone()) &&
!ValidationUtil.isValidPhoneNumber(request.getEmergencyContactPhone())) {
â‹®----
private void validateMemberForDomesticProfile(Member member) {
if (!member.getRole().isDomestic()) {
â‹®----
private void validateMemberForOverseasProfile(Member member) {
if (!member.getRole().isOverseas()) {
â‹®----
private void validateSecurityPatterns(String... inputs) {
â‹®----
if (StringUtils.hasText(input)) {
if (ValidationUtil.containsSuspiciousPattern(input)) {
â‹®----
if (SecurityUtil.containsSqlInjection(input)) {
log.warn("í”„ë¡œí•„ ì…ë ¥ì—ì„œ SQL ì¸ì ì…˜ íŒ¨í„´ ê°ì§€: {}", SecurityUtil.maskEmail(input));
â‹®----
private void validateCompletionRate(int rate) {
â‹®----
private String sanitizeInput(String input) {
return ValidationUtil.sanitizeInput(input);
</file>

<file path="build.gradle.kts">
plugins {
    java
    id("org.springframework.boot") version "3.3.5"
    id("io.spring.dependency-management") version "1.1.6"
}

group = "com.globalcarelink"
version = "0.0.1-SNAPSHOT"

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(21)
    }
}

configurations {
    compileOnly {
        extendsFrom(configurations.annotationProcessor.get())
    }
}

repositories {
    mavenCentral()
}

dependencies {
    // Spring Boot Starters
    implementation("org.springframework.boot:spring-boot-starter-web")
    implementation("org.springframework.boot:spring-boot-starter-data-jpa")
    implementation("org.springframework.boot:spring-boot-starter-security")
    implementation("org.springframework.boot:spring-boot-starter-validation")
    implementation("org.springframework.boot:spring-boot-starter-actuator")
    implementation("org.springframework.boot:spring-boot-starter-cache")
    
    // WebClient for reactive HTTP client
    implementation("org.springframework.boot:spring-boot-starter-webflux")
    
    // Spring Retry
    implementation("org.springframework.retry:spring-retry")
    implementation("org.springframework:spring-aspects")
    
    // OpenAPI/Swagger
    implementation("org.springdoc:springdoc-openapi-starter-webmvc-ui:2.2.0")
    
    // Database
    runtimeOnly("com.h2database:h2")
    
    // JWT
    implementation("io.jsonwebtoken:jjwt-api:0.12.3")
    runtimeOnly("io.jsonwebtoken:jjwt-impl:0.12.3")
    runtimeOnly("io.jsonwebtoken:jjwt-jackson:0.12.3")
    
    // Caffeine Cache
    implementation("com.github.ben-manes.caffeine:caffeine")
    
    // JSON Logging
    implementation("net.logstash.logback:logstash-logback-encoder:7.4")
    
    // Lombok
    compileOnly("org.projectlombok:lombok")
    annotationProcessor("org.projectlombok:lombok")
    
    // Testing
    testImplementation("org.springframework.boot:spring-boot-starter-test")
    testImplementation("org.springframework.security:spring-security-test")
    testRuntimeOnly("org.junit.platform:junit-platform-launcher")
}

tasks.withType<Test> {
    useJUnitPlatform()
}
</file>

<file path="frontend/src/App.tsx">
/**
 * ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸
 * Elderberry ê¸€ë¡œë²Œ ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ ì„œë¹„ìŠ¤
 */
import React from 'react';
import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';
import HealthAssessmentWizard from './features/health/HealthAssessmentWizard';
import FacilitySearchPage from './features/facility/FacilitySearchPage';
â‹®----
function App()
â‹®----
{/* ê¸°ë³¸ ê²½ë¡œ - ê±´ê°• í‰ê°€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ */}
â‹®----
{/* ê±´ê°• ìƒíƒœ í‰ê°€ */}
â‹®----
// í‰ê°€ ì™„ë£Œ í›„ ì‹œì„¤ ê²€ìƒ‰ìœ¼ë¡œ ì´ë™í•  ìˆ˜ ìˆìŒ
â‹®----
onCancel=
â‹®----
{/* ì‹œì„¤ ê²€ìƒ‰ ë° ì¶”ì²œ */}
â‹®----
{/* 404 í˜ì´ì§€ */}
</file>

<file path="src/main/java/com/globalcarelink/common/exception/GlobalExceptionHandler.java">
/**
 * ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬ê¸° (ê°œì„ ëœ ë²„ì „)
 * ìƒì„¸í•œ ìœ íš¨ì„± ê²€ì¦ ì˜¤ë¥˜ ì •ë³´ ì œê³µ
 * ë³´ì•ˆì„ ê³ ë ¤í•œ ì˜¤ë¥˜ ë©”ì‹œì§€ ì²˜ë¦¬
 */
â‹®----
public class GlobalExceptionHandler {
â‹®----
/**
     * ì»¤ìŠ¤í…€ ì˜ˆì™¸ ì²˜ë¦¬
     */
â‹®----
public ResponseEntity<ValidationErrorDetails> handleCustomException(
â‹®----
log.warn("ì»¤ìŠ¤í…€ ì˜ˆì™¸ ë°œìƒ: {} - URI: {}", ex.getMessage(), request.getRequestURI());
â‹®----
.create(ex.getMessage())
.withTimestamp()
.withErrorId("CUSTOM")
.addMetadata("requestUri", request.getRequestURI())
.addMetadata("httpMethod", request.getMethod())
.build();
â‹®----
return ResponseEntity.status(status).body(errorDetails);
â‹®----
/**
     * Bean Validation ì˜ˆì™¸ ì²˜ë¦¬ (@Valid ì–´ë…¸í…Œì´ì…˜)
     */
â‹®----
public ResponseEntity<ValidationErrorDetails> handleMethodArgumentNotValidException(
â‹®----
log.warn("ìœ íš¨ì„± ê²€ì¦ ì‹¤íŒ¨: {} ê°œ ì˜¤ë¥˜ - URI: {}",
ex.getBindingResult().getErrorCount(), request.getRequestURI());
â‹®----
.create("ì…ë ¥ê°’ ìœ íš¨ì„± ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")
â‹®----
.withErrorId("VALIDATION")
â‹®----
.addMetadata("totalErrors", ex.getBindingResult().getErrorCount());
â‹®----
// í•„ë“œ ì˜¤ë¥˜ ì²˜ë¦¬
for (FieldError fieldError : ex.getBindingResult().getFieldErrors()) {
ValidationErrorDetails.FieldError error = createDetailedFieldError(fieldError);
builder.fieldErrors(builder.build().getFieldErrors() == null ?
new ArrayList<>() : new ArrayList<>(builder.build().getFieldErrors()));
builder.build().getFieldErrors().add(error);
â‹®----
// ê¸€ë¡œë²Œ ì˜¤ë¥˜ ì²˜ë¦¬
ex.getBindingResult().getGlobalErrors().forEach(globalError -> {
builder.addGlobalError(
globalError.getDefaultMessage(),
globalError.getCode(),
â‹®----
return ResponseEntity.badRequest().body(builder.build());
â‹®----
/**
     * Bean Validation ì˜ˆì™¸ ì²˜ë¦¬ (ì§ì ‘ ê²€ì¦)
     */
â‹®----
public ResponseEntity<ValidationErrorDetails> handleConstraintViolationException(
â‹®----
log.warn("ì œì•½ ì¡°ê±´ ìœ„ë°˜: {} ê°œ ì˜¤ë¥˜ - URI: {}",
ex.getConstraintViolations().size(), request.getRequestURI());
â‹®----
.create("ì œì•½ ì¡°ê±´ ìœ„ë°˜ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤")
â‹®----
.withErrorId("CONSTRAINT")
â‹®----
.addMetadata("totalViolations", ex.getConstraintViolations().size());
â‹®----
for (ConstraintViolation<?> violation : ex.getConstraintViolations()) {
String fieldName = violation.getPropertyPath().toString();
Object rejectedValue = violation.getInvalidValue();
String message = violation.getMessage();
String constraintType = violation.getConstraintDescriptor().getAnnotation().annotationType().getSimpleName();
â‹®----
ValidationErrorDetails.FieldError fieldError = createConstraintFieldError(
â‹®----
fieldErrors.add(fieldError);
â‹®----
return ResponseEntity.badRequest()
.body(builder.fieldErrors(fieldErrors).build());
â‹®----
/**
     * ë°”ì¸ë”© ì˜ˆì™¸ ì²˜ë¦¬
     */
â‹®----
public ResponseEntity<ValidationErrorDetails> handleBindException(
â‹®----
log.warn("ë°”ì¸ë”© ì˜¤ë¥˜: {} - URI: {}", ex.getMessage(), request.getRequestURI());
â‹®----
.create("ìš”ì²­ ë°ì´í„° ë°”ì¸ë”©ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")
â‹®----
.withErrorId("BINDING")
.addMetadata("requestUri", request.getRequestURI());
â‹®----
fieldErrors.add(createDetailedFieldError(fieldError));
â‹®----
/**
     * íƒ€ì… ë¶ˆì¼ì¹˜ ì˜ˆì™¸ ì²˜ë¦¬
     */
â‹®----
public ResponseEntity<ValidationErrorDetails> handleMethodArgumentTypeMismatchException(
â‹®----
log.warn("íƒ€ì… ë¶ˆì¼ì¹˜: {} - URI: {}", ex.getMessage(), request.getRequestURI());
â‹®----
String fieldName = ex.getName();
Object rejectedValue = ex.getValue();
Class<?> requiredType = ex.getRequiredType();
â‹®----
ValidationErrorDetails.FieldError fieldError = ValidationErrorDetails.FieldError.builder()
.field(fieldName)
.rejectedValue(rejectedValue)
.message(String.format("%sì˜ ê°’ì´ ì˜¬ë°”ë¥¸ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤. %s íƒ€ì…ì´ í•„ìš”í•©ë‹ˆë‹¤ (í˜„ì¬: %s)",
fieldName, requiredType != null ? requiredType.getSimpleName() : "ì•Œ ìˆ˜ ì—†ìŒ", rejectedValue))
.code("field.type.mismatch")
.constraint("TypeMatch")
.helpMessage(getTypeHelpMessage(requiredType))
â‹®----
.create("ìš”ì²­ íŒŒë¼ë¯¸í„°ì˜ íƒ€ì…ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤")
â‹®----
.withErrorId("TYPE_MISMATCH")
.fieldErrors(List.of(fieldError))
â‹®----
.addMetadata("expectedType", requiredType != null ? requiredType.getSimpleName() : "unknown")
â‹®----
return ResponseEntity.badRequest().body(errorDetails);
â‹®----
/**
     * í•„ìˆ˜ íŒŒë¼ë¯¸í„° ëˆ„ë½ ì˜ˆì™¸ ì²˜ë¦¬
     */
â‹®----
public ResponseEntity<ValidationErrorDetails> handleMissingServletRequestParameterException(
â‹®----
log.warn("í•„ìˆ˜ íŒŒë¼ë¯¸í„° ëˆ„ë½: {} - URI: {}", ex.getParameterName(), request.getRequestURI());
â‹®----
.requiredField(ex.getParameterName());
â‹®----
.create("í•„ìˆ˜ ìš”ì²­ íŒŒë¼ë¯¸í„°ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤")
â‹®----
.withErrorId("MISSING_PARAM")
â‹®----
.addMetadata("parameterType", ex.getParameterType())
â‹®----
/**
     * HTTP ë©”ì‹œì§€ ì½ê¸° ì˜¤ë¥˜ ì²˜ë¦¬
     */
â‹®----
public ResponseEntity<ValidationErrorDetails> handleHttpMessageNotReadableException(
â‹®----
log.warn("HTTP ë©”ì‹œì§€ ì½ê¸° ì˜¤ë¥˜ - URI: {}", request.getRequestURI());
â‹®----
.create("ìš”ì²­ ë³¸ë¬¸ì„ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")
â‹®----
.withErrorId("MESSAGE_NOT_READABLE")
.addGlobalError("JSON í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•Šê±°ë‚˜ í•„ìˆ˜ í•„ë“œê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤",
â‹®----
.addMetadata("contentType", request.getContentType())
â‹®----
/**
     * ë°ì´í„° ë¬´ê²°ì„± ìœ„ë°˜ ì˜ˆì™¸ ì²˜ë¦¬
     */
â‹®----
public ResponseEntity<ValidationErrorDetails> handleDataIntegrityViolationException(
â‹®----
log.error("ë°ì´í„° ë¬´ê²°ì„± ìœ„ë°˜ - URI: {}", request.getRequestURI(), ex);
â‹®----
// ë³´ì•ˆìƒ ìƒì„¸í•œ ë°ì´í„°ë² ì´ìŠ¤ ì˜¤ë¥˜ëŠ” ë…¸ì¶œí•˜ì§€ ì•ŠìŒ
â‹®----
.create("ë°ì´í„° ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤")
â‹®----
.withErrorId("DATA_INTEGRITY")
.addGlobalError("ì¤‘ë³µëœ ë°ì´í„°ì´ê±°ë‚˜ ì°¸ì¡° ë¬´ê²°ì„± ì œì•½ ì¡°ê±´ì„ ìœ„ë°˜í–ˆìŠµë‹ˆë‹¤",
â‹®----
return ResponseEntity.status(HttpStatus.CONFLICT).body(errorDetails);
â‹®----
/**
     * ì¸ì¦ ì˜ˆì™¸ ì²˜ë¦¬
     */
â‹®----
public ResponseEntity<ValidationErrorDetails> handleAuthenticationException(
â‹®----
log.warn("ì¸ì¦ ì‹¤íŒ¨ - URI: {} - IP: {}",
request.getRequestURI(), SecurityUtil.getClientIpAddress(request));
â‹®----
.create("ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")
â‹®----
.withErrorId("AUTH_FAILED")
.addGlobalError("ì‚¬ìš©ì ì¸ì¦ ì •ë³´ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤",
â‹®----
return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(errorDetails);
â‹®----
/**
     * ê¶Œí•œ ë¶€ì¡± ì˜ˆì™¸ ì²˜ë¦¬
     */
â‹®----
public ResponseEntity<ValidationErrorDetails> handleAccessDeniedException(
â‹®----
log.warn("ì ‘ê·¼ ê¶Œí•œ ë¶€ì¡± - URI: {} - IP: {}",
â‹®----
.create("ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤")
â‹®----
.withErrorId("ACCESS_DENIED")
.addGlobalError("ì´ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤",
â‹®----
return ResponseEntity.status(HttpStatus.FORBIDDEN).body(errorDetails);
â‹®----
/**
     * HTTP ë©”ì„œë“œ ë¯¸ì§€ì› ì˜ˆì™¸ ì²˜ë¦¬
     */
â‹®----
public ResponseEntity<ValidationErrorDetails> handleHttpRequestMethodNotSupportedException(
â‹®----
log.warn("ì§€ì›í•˜ì§€ ì•ŠëŠ” HTTP ë©”ì„œë“œ: {} - URI: {}", ex.getMethod(), request.getRequestURI());
â‹®----
.create("ì§€ì›í•˜ì§€ ì•ŠëŠ” HTTP ë©”ì„œë“œì…ë‹ˆë‹¤")
â‹®----
.withErrorId("METHOD_NOT_SUPPORTED")
.addGlobalError(String.format("ì´ ì—”ë“œí¬ì¸íŠ¸ëŠ” %s ë©”ì„œë“œë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì§€ì›ë˜ëŠ” ë©”ì„œë“œ: %s",
ex.getMethod(), Arrays.toString(ex.getSupportedMethods())),
â‹®----
.addMetadata("requestMethod", ex.getMethod())
.addMetadata("supportedMethods", ex.getSupportedMethods())
â‹®----
return ResponseEntity.status(HttpStatus.METHOD_NOT_ALLOWED).body(errorDetails);
â‹®----
/**
     * í•¸ë“¤ëŸ¬ ì—†ìŒ ì˜ˆì™¸ ì²˜ë¦¬ (404)
     */
â‹®----
public ResponseEntity<ValidationErrorDetails> handleNoHandlerFoundException(
â‹®----
log.warn("í•¸ë“¤ëŸ¬ ì—†ìŒ: {} {} - IP: {}",
ex.getHttpMethod(), ex.getRequestURL(), SecurityUtil.getClientIpAddress(request));
â‹®----
.create("ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")
â‹®----
.withErrorId("NOT_FOUND")
.addGlobalError("ìš”ì²­í•œ URLì´ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤",
â‹®----
.addMetadata("requestUri", ex.getRequestURL())
.addMetadata("httpMethod", ex.getHttpMethod())
â‹®----
return ResponseEntity.status(HttpStatus.NOT_FOUND).body(errorDetails);
â‹®----
/**
     * ì¼ë°˜ ì˜ˆì™¸ ì²˜ë¦¬ (ìµœí›„ ìˆ˜ë‹¨)
     */
â‹®----
public ResponseEntity<ValidationErrorDetails> handleGeneralException(
â‹®----
String errorId = "ERR-" + UUID.randomUUID().toString().substring(0, 8);
log.error("ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ [{}] - URI: {}", errorId, request.getRequestURI(), ex);
â‹®----
.create("ë‚´ë¶€ ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤")
â‹®----
.errorId(errorId)
.addGlobalError("ì‹œìŠ¤í…œì—ì„œ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”",
â‹®----
.addMetadata("errorId", errorId)
â‹®----
return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(errorDetails);
â‹®----
// ===== í—¬í¼ ë©”ì„œë“œë“¤ =====
â‹®----
/**
     * ìƒì„¸í•œ í•„ë“œ ì˜¤ë¥˜ ìƒì„±
     */
private ValidationErrorDetails.FieldError createDetailedFieldError(FieldError fieldError) {
String field = fieldError.getField();
Object rejectedValue = fieldError.getRejectedValue();
String code = fieldError.getCode();
String message = fieldError.getDefaultMessage();
â‹®----
// ì½”ë“œì— ë”°ë¥¸ ìƒì„¸ ì˜¤ë¥˜ ì •ë³´ ìƒì„±
â‹®----
case "NotNull", "NotEmpty", "NotBlank" -> validationErrorBuilder.requiredField(field);
case "Size" -> createSizeFieldError(field, rejectedValue, fieldError);
case "Min", "Max", "Range" -> createRangeFieldError(field, rejectedValue, fieldError);
case "Email" -> validationErrorBuilder.invalidEmail(field, rejectedValue);
case "Pattern" -> createPatternFieldError(field, rejectedValue, fieldError);
default -> ValidationErrorDetails.FieldError.builder()
.field(field)
â‹®----
.message(message != null ? message : field + " ê°’ì´ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤")
.code("field.invalid")
.constraint(code)
â‹®----
/**
     * ì œì•½ ì¡°ê±´ ìœ„ë°˜ í•„ë“œ ì˜¤ë¥˜ ìƒì„±
     */
private ValidationErrorDetails.FieldError createConstraintFieldError(
â‹®----
case "NotNull" -> validationErrorBuilder.requiredField(fieldName);
â‹®----
Integer min = (Integer) violation.getConstraintDescriptor().getAttributes().get("min");
Integer max = (Integer) violation.getConstraintDescriptor().getAttributes().get("max");
yield validationErrorBuilder.stringLength(fieldName, rejectedValue, min, max);
â‹®----
Long min = (Long) violation.getConstraintDescriptor().getAttributes().get("value");
yield validationErrorBuilder.numberRange(fieldName, rejectedValue, min, null);
â‹®----
case "Email" -> validationErrorBuilder.invalidEmail(fieldName, rejectedValue);
â‹®----
String pattern = (String) violation.getConstraintDescriptor().getAttributes().get("regexp");
yield validationErrorBuilder.patternMismatch(fieldName, rejectedValue, pattern, message);
â‹®----
.message(message)
.code("field.constraint.violation")
.constraint(constraintType)
â‹®----
private ValidationErrorDetails.FieldError createSizeFieldError(String field, Object rejectedValue, FieldError fieldError) {
// Size ì–´ë…¸í…Œì´ì…˜ì˜ min, max ê°’ì„ ì¶”ì¶œí•˜ë ¤ê³  ì‹œë„í•˜ì§€ë§Œ,
// FieldErrorì—ì„œëŠ” ì§ì ‘ ì ‘ê·¼ì´ ì–´ë ¤ìš°ë¯€ë¡œ ê¸°ë³¸ê°’ ì‚¬ìš©
return validationErrorBuilder.stringLength(field, rejectedValue, null, null);
â‹®----
private ValidationErrorDetails.FieldError createRangeFieldError(String field, Object rejectedValue, FieldError fieldError) {
// ë²”ìœ„ ì •ë³´ë¥¼ ì¶”ì¶œí•˜ë ¤ê³  ì‹œë„í•˜ì§€ë§Œ, ê¸°ë³¸ê°’ ì‚¬ìš©
return validationErrorBuilder.numberRange(field, rejectedValue, null, null);
â‹®----
private ValidationErrorDetails.FieldError createPatternFieldError(String field, Object rejectedValue, FieldError fieldError) {
return validationErrorBuilder.patternMismatch(field, rejectedValue, "", fieldError.getDefaultMessage());
â‹®----
private String getTypeHelpMessage(Class<?> requiredType) {
â‹®----
return switch (requiredType.getSimpleName()) {
â‹®----
default -> "ì˜¬ë°”ë¥¸ " + requiredType.getSimpleName() + " í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”";
</file>

<file path="src/main/java/com/globalcarelink/health/HealthAssessmentService.java">
/**
 * ê±´ê°• ìƒíƒœ í‰ê°€ í•µì‹¬ ì„œë¹„ìŠ¤
 * CRUD ê¸°ëŠ¥ì— ì§‘ì¤‘ (SRP ì›ì¹™ ì ìš©)
 * KBë¼ì´í”„ìƒëª… ê¸°ë°˜ ëŒë´„ì§€ìˆ˜ ì²´í¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
 */
â‹®----
public class HealthAssessmentService {
â‹®----
/**
     * ê±´ê°• í‰ê°€ ìƒì„±
     * ìºì‹œ ì—…ë°ì´íŠ¸ ë° ë¬´íš¨í™” ì ìš©
     */
â‹®----
public HealthAssessment createAssessment(HealthAssessmentCreateRequest request) {
log.info("ê±´ê°• í‰ê°€ ìƒì„± ì‹œì‘ - íšŒì›: {}", request.getMemberId());
â‹®----
// ì…ë ¥ê°’ ê²€ì¦
validateAssessmentRequest(request);
â‹®----
// ì—”í‹°í‹° ìƒì„±
HealthAssessment assessment = HealthAssessment.builder()
.memberId(request.getMemberId())
.gender(request.getGender())
.birthYear(request.getBirthYear())
.mobilityLevel(request.getMobilityLevel())
.eatingLevel(request.getEatingLevel())
.toiletLevel(request.getToiletLevel())
.communicationLevel(request.getCommunicationLevel())
.ltciGrade(request.getLtciGrade())
.careTargetStatus(request.getCareTargetStatus() != null ? request.getCareTargetStatus() : 4)
.mealType(request.getMealType() != null ? request.getMealType() : 1)
.diseaseTypes(request.getDiseaseTypes())
.assessmentDate(LocalDateTime.now())
.build();
â‹®----
// ADL ì ìˆ˜ ìë™ ê³„ì‚°
assessment.calculateAdlScore();
â‹®----
// ì¼€ì–´ ë“±ê¸‰ ê³„ì‚° ë° ì„¤ì •
CareGradeCalculator.CareGradeResult gradeResult = careGradeCalculator.calculateComprehensiveGrade(assessment);
assessment.setOverallCareGrade(gradeResult.getGradeName());
â‹®----
// ì €ì¥
HealthAssessment saved = healthAssessmentRepository.save(assessment);
â‹®----
log.info("ê±´ê°• í‰ê°€ ìƒì„± ì™„ë£Œ - ID: {}, íšŒì›: {}, ë“±ê¸‰: {}",
saved.getId(), request.getMemberId(), gradeResult.getGradeName());
â‹®----
/**
     * IDë¡œ ê±´ê°• í‰ê°€ ì¡°íšŒ
     */
â‹®----
public Optional<HealthAssessment> getAssessmentById(Long assessmentId) {
log.debug("ê±´ê°• í‰ê°€ ì¡°íšŒ - ID: {}", assessmentId);
â‹®----
return healthAssessmentRepository.findById(assessmentId);
â‹®----
/**
     * íšŒì›ë³„ ìµœì‹  ê±´ê°• í‰ê°€ ì¡°íšŒ
     */
â‹®----
public Optional<HealthAssessment> getLatestAssessmentByMember(String memberId) {
log.debug("íšŒì› ìµœì‹  ê±´ê°• í‰ê°€ ì¡°íšŒ - íšŒì›: {}", memberId);
â‹®----
if (memberId == null || memberId.trim().isEmpty()) {
â‹®----
return healthAssessmentRepository.findTopByMemberIdOrderByAssessmentDateDesc(memberId);
â‹®----
/**
     * ê±´ê°• í‰ê°€ ìˆ˜ì •
     * ìºì‹œ ì—…ë°ì´íŠ¸ ë° ë¬´íš¨í™” ì ìš©
     */
â‹®----
public HealthAssessment updateAssessment(Long assessmentId, HealthAssessmentUpdateRequest request) {
log.info("ê±´ê°• í‰ê°€ ìˆ˜ì • ì‹œì‘ - ID: {}", assessmentId);
â‹®----
// ê¸°ì¡´ í‰ê°€ ì¡°íšŒ
HealthAssessment assessment = healthAssessmentRepository.findById(assessmentId)
.orElseThrow(() -> new CustomException.NotFound("ê±´ê°• í‰ê°€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + assessmentId));
â‹®----
validateUpdateRequest(request);
â‹®----
// í‰ê°€ ì •ë³´ ì—…ë°ì´íŠ¸
updateAssessmentFields(assessment, request);
â‹®----
// í‰ê°€ ë‚ ì§œ ê°±ì‹ 
assessment.setAssessmentDate(LocalDateTime.now());
â‹®----
// ADL ì ìˆ˜ ì¬ê³„ì‚°
â‹®----
// ì¼€ì–´ ë“±ê¸‰ ì¬ê³„ì‚°
â‹®----
HealthAssessment updated = healthAssessmentRepository.save(assessment);
â‹®----
log.info("ê±´ê°• í‰ê°€ ìˆ˜ì • ì™„ë£Œ - ID: {}, ìƒˆ ë“±ê¸‰: {}", assessmentId, gradeResult.getGradeName());
â‹®----
/**
     * ì¼€ì–´ ë“±ê¸‰ ê³„ì‚° (ë³„ë„ í˜¸ì¶œ)
     */
public CareGradeCalculator.CareGradeResult calculateCareGrade(HealthAssessment assessment) {
â‹®----
return careGradeCalculator.calculateComprehensiveGrade(assessment);
â‹®----
/**
     * ê±´ê°• í‰ê°€ ì‚­ì œ
     */
â‹®----
public void deleteAssessment(Long assessmentId) {
log.info("ê±´ê°• í‰ê°€ ì‚­ì œ ì‹œì‘ - ID: {}", assessmentId);
â‹®----
healthAssessmentRepository.delete(assessment);
â‹®----
log.info("ê±´ê°• í‰ê°€ ì‚­ì œ ì™„ë£Œ - ID: {}, íšŒì›: {}", assessmentId, assessment.getMemberId());
â‹®----
/**
     * í‰ê°€ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
     */
public boolean existsById(Long assessmentId) {
â‹®----
return healthAssessmentRepository.existsById(assessmentId);
â‹®----
/**
     * íšŒì›ì˜ í‰ê°€ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
     */
public boolean existsByMemberId(String memberId) {
â‹®----
return healthAssessmentRepository.findTopByMemberIdOrderByAssessmentDateDesc(memberId).isPresent();
â‹®----
/**
     * í‰ê°€ ì™„ì„±ë„ í™•ì¸
     */
public boolean isAssessmentComplete(Long assessmentId) {
return getAssessmentById(assessmentId)
.map(HealthAssessment::isComplete)
.orElse(false);
â‹®----
/**
     * ëª¨ë“  ìºì‹œ ë¬´íš¨í™”
     */
â‹®----
public void evictAllCaches() {
log.info("ê±´ê°• í‰ê°€ ê´€ë ¨ ëª¨ë“  ìºì‹œ ì‚­ì œ");
â‹®----
// ===== ë‚´ë¶€ ê²€ì¦ ë° ì—…ë°ì´íŠ¸ ë©”ì„œë“œ =====
â‹®----
private void validateAssessmentRequest(HealthAssessmentCreateRequest request) {
// í•„ìˆ˜ í•„ë“œ ê²€ì¦
if (request.getMemberId() == null || request.getMemberId().trim().isEmpty()) {
â‹®----
if (request.getMobilityLevel() == null || request.getEatingLevel() == null ||
request.getToiletLevel() == null || request.getCommunicationLevel() == null) {
â‹®----
// ë²”ìœ„ ê²€ì¦
validateAdlLevels(request.getMobilityLevel(), request.getEatingLevel(),
request.getToiletLevel(), request.getCommunicationLevel());
â‹®----
// ì¶œìƒë…„ë„ ê²€ì¦
if (request.getBirthYear() != null &&
(request.getBirthYear() < 1900 || request.getBirthYear() > LocalDateTime.now().getYear())) {
â‹®----
// ì§ˆí™˜ ì •ë³´ ê²€ì¦
if (request.getDiseaseTypes() != null && request.getDiseaseTypes().length() > 200) {
â‹®----
private void validateUpdateRequest(HealthAssessmentUpdateRequest request) {
// ADL ìˆ˜ì¤€ ê²€ì¦ (nullì´ ì•„ë‹Œ ê²½ìš°ë§Œ)
if (request.getMobilityLevel() != null || request.getEatingLevel() != null ||
request.getToiletLevel() != null || request.getCommunicationLevel() != null) {
â‹®----
private void validateAdlLevels(Integer... levels) {
â‹®----
private void updateAssessmentFields(HealthAssessment assessment, HealthAssessmentUpdateRequest request) {
// ADL í‰ê°€ í•­ëª© ì—…ë°ì´íŠ¸
if (request.getMobilityLevel() != null) {
assessment.setMobilityLevel(request.getMobilityLevel());
â‹®----
if (request.getEatingLevel() != null) {
assessment.setEatingLevel(request.getEatingLevel());
â‹®----
if (request.getToiletLevel() != null) {
assessment.setToiletLevel(request.getToiletLevel());
â‹®----
if (request.getCommunicationLevel() != null) {
assessment.setCommunicationLevel(request.getCommunicationLevel());
â‹®----
// ì¶”ê°€ ì •ë³´ ì—…ë°ì´íŠ¸
if (request.getLtciGrade() != null) {
assessment.setLtciGrade(request.getLtciGrade());
â‹®----
if (request.getCareTargetStatus() != null) {
assessment.setCareTargetStatus(request.getCareTargetStatus());
â‹®----
if (request.getMealType() != null) {
assessment.setMealType(request.getMealType());
â‹®----
if (request.getDiseaseTypes() != null) {
assessment.setDiseaseTypes(request.getDiseaseTypes());
</file>

<file path="src/main/resources/application.yml">
# ê³µí†µ ì„¤ì •
spring:
  application:
    name: elderberry
  profiles:
    active: dev
  
  # ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
  datasource:
    url: jdbc:h2:file:./data/elderberry;AUTO_SERVER=TRUE;DB_CLOSE_DELAY=-1
    driver-class-name: org.h2.Driver
    username: sa
    password: password
  
  # JPA ì„¤ì •
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: false
    properties:
      hibernate:
        format_sql: true
        jdbc:
          batch_size: 20
        order_inserts: true
        order_updates: true
  
  # H2 ì½˜ì†” ì„¤ì •
  h2:
    console:
      enabled: true
      path: /h2-console
      settings:
        web-allow-others: true
  
  # ìºì‹œ ì„¤ì •
  cache:
    type: caffeine
    caffeine:
      spec: maximumSize=1000,expireAfterWrite=1h
  
  # JSON ì„¤ì •
  jackson:
    property-naming-strategy: SNAKE_CASE
    default-property-inclusion: NON_NULL

# ì„œë²„ ì„¤ì •
server:
  port: 8080
  servlet:
    context-path: /
    encoding:
      charset: UTF-8
      enabled: true
      force: true

# ë¡œê¹… ì„¤ì •
logging:
  level:
    com.globalcarelink: DEBUG
    org.springframework.security: DEBUG
    org.springframework.web.reactive.function.client: DEBUG
    reactor.netty.http.client: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# JWT ì„¤ì •
jwt:
  secret: elderberry-jwt-secret-key-for-development-only-change-in-production
  access-token-expiration: 3600000  # 1ì‹œê°„
  refresh-token-expiration: 86400000 # 24ì‹œê°„

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •
app:
  # ê³µê³µë°ì´í„° API ì„¤ì •
  public-data:
    api-key: CCXHQiSSQ0J+RRaadSjmmS7ltxG/tlSVOYMjh45MmGne68ptgGAaAJVJti8nBazSjLemTAyb5gAuj43xq7fTog==
    base-url: https://apis.data.go.kr
    connect-timeout: 10000    # 10ì´ˆ
    read-timeout: 30000       # 30ì´ˆ
    write-timeout: 10000      # 10ì´ˆ
    max-memory-size: 1048576  # 1MB
    
    # API í˜¸ì¶œ ì œí•œ ì„¤ì •
    rate-limit:
      requests-per-minute: 1000
      requests-per-hour: 10000
      requests-per-day: 100000
    
    # ì¬ì‹œë„ ì„¤ì •
    retry:
      max-attempts: 3
      backoff-delay: 1000     # 1ì´ˆ
      backoff-multiplier: 2
    
    # ìºì‹œ ì„¤ì •
    cache:
      ltci-search-ttl: 3600   # 1ì‹œê°„
      ltci-detail-ttl: 7200   # 2ì‹œê°„
      hospital-search-ttl: 3600
      pharmacy-search-ttl: 3600
      facility-status-ttl: 1800  # 30ë¶„
  
  # ìŠ¤ì¼€ì¤„ëŸ¬ ì„¤ì •
  scheduler:
    # ì‹œì„¤ ì •ë³´ ë™ê¸°í™” ìŠ¤ì¼€ì¤„ (ë§¤ì¼ ìƒˆë²½ 2ì‹œ)
    facility-sync-cron: "0 0 2 * * ?"
    
    # API ìƒíƒœ ì²´í¬ ìŠ¤ì¼€ì¤„ (ë§¤ 10ë¶„)
    health-check-cron: "0 */10 * * * ?"
    
    # í†µê³„ ì—…ë°ì´íŠ¸ ìŠ¤ì¼€ì¤„ (ë§¤ ì‹œê°„)
    statistics-update-cron: "0 0 * * * ?"
  
  # ë¹„ë™ê¸° ì²˜ë¦¬ ì„¤ì •
  async:
    core-pool-size: 5
    max-pool-size: 20
    queue-capacity: 100
    thread-name-prefix: "elderberry-async-"
    
    # ê³µê³µë°ì´í„° ì „ìš© ìŠ¤ë ˆë“œ í’€
    public-data:
      core-pool-size: 3
      max-pool-size: 10
      queue-capacity: 50
      thread-name-prefix: "public-data-"

# ê´€ë¦¬ ë° ëª¨ë‹ˆí„°ë§ ì„¤ì •
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,env,caches,scheduledtasks
  endpoint:
    health:
      show-details: always
  metrics:
    export:
      simple:
        enabled: true

---
# ê°œë°œ í™˜ê²½ ì„¤ì •
spring:
  config:
    activate:
      on-profile: dev
  
  # ê°œë°œ í™˜ê²½ ë¡œê¹…
  logging:
    level:
      com.globalcarelink: DEBUG
      org.springframework.web.reactive.function.client: DEBUG

# ê°œë°œ í™˜ê²½ ê³µê³µë°ì´í„° API ì„¤ì •
app:
  public-data:
    # ê°œë°œ í™˜ê²½ì—ì„œëŠ” ë” ê´€ëŒ€í•œ ì„¤ì •
    connect-timeout: 15000
    read-timeout: 45000
    
    # ê°œë°œ í™˜ê²½ API í˜¸ì¶œ ì œí•œ
    rate-limit:
      requests-per-minute: 100
      requests-per-hour: 1000
      requests-per-day: 10000

---
# ìš´ì˜ í™˜ê²½ ì„¤ì •
spring:
  config:
    activate:
      on-profile: prod
  
  # ìš´ì˜ í™˜ê²½ ë°ì´í„°ë² ì´ìŠ¤ (SQLite)
  datasource:
    url: jdbc:sqlite:./data/elderberry.db
    driver-class-name: org.sqlite.JDBC
  
  # ìš´ì˜ í™˜ê²½ ë¡œê¹…
  logging:
    level:
      com.globalcarelink: INFO
      org.springframework.web.reactive.function.client: WARN

# ìš´ì˜ í™˜ê²½ ê³µê³µë°ì´í„° API ì„¤ì •
app:
  public-data:
    # ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ë” ì—„ê²©í•œ ì„¤ì •
    connect-timeout: 8000
    read-timeout: 20000
    
    # ìš´ì˜ í™˜ê²½ API í˜¸ì¶œ ì œí•œ
    rate-limit:
      requests-per-minute: 500
      requests-per-hour: 5000
      requests-per-day: 50000

---
# í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì •
spring:
  config:
    activate:
      on-profile: test
  
  # í…ŒìŠ¤íŠ¸ í™˜ê²½ ë°ì´í„°ë² ì´ìŠ¤ (ë©”ëª¨ë¦¬)
  datasource:
    url: jdbc:h2:mem:testdb
  
  jpa:
    hibernate:
      ddl-auto: create-drop

# í…ŒìŠ¤íŠ¸ í™˜ê²½ ê³µê³µë°ì´í„° API ì„¤ì •
app:
  public-data:
    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” Mock ì„œë²„ ì‚¬ìš©
    base-url: http://localhost:8081
    connect-timeout: 5000
    read-timeout: 10000
</file>

<file path="CLAUDE.md">
# ì—˜ë”ë² ë¦¬ í”„ë¡œì íŠ¸ ê°œë°œ ê°€ì´ë“œ

## ğŸ“‹ í˜„ì¬ ê°œë°œ ìƒí™© (2025-07-23)

### âœ… ì™„ë£Œëœ ì£¼ìš” ì‘ì—…
- **ë¡œê·¸ ê¸°ë°˜ ë””ë²„ê¹… ì‹œìŠ¤í…œ**: ì™„ë²½ êµ¬ì¶• ë° ìš´ì˜ ì¤‘
- **Plain Java ì„œë²„**: ì •ìƒ ë™ì‘ (í¬íŠ¸ 8080)
- **React í”„ë¡ íŠ¸ì—”ë“œ**: ì •ìƒ ë™ì‘ (í¬íŠ¸ 5173)
- **JWT ì¸ì¦ ì‹œìŠ¤í…œ**: Spring Boot 3.x í˜¸í™˜ì„± ì™„ë£Œ
- **í•µì‹¬ Repository ë©”ì„œë“œë“¤**: ëŒ€ë¶€ë¶„ êµ¬í˜„ ì™„ë£Œ
- **ì£¼ìš” DTO í´ë˜ìŠ¤ë“¤**: ìƒì„± ë° ë©”ì„œë“œ ì¶”ê°€ ì™„ë£Œ

### âš ï¸ ì§„í–‰ ì¤‘ì¸ ì‘ì—…
- **Spring Boot ë°±ì—”ë“œ**: 67ê°œ ì»´íŒŒì¼ ì—ëŸ¬ ì ì§„ì  í•´ê²° ì¤‘
- **Repository ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜**: Pageable ì¸ì ì¶”ê°€ í•„ìš”
- **ì—”í‹°í‹° getter/setter**: ì¼ë¶€ ë©”ì„œë“œë“¤ ì¶”ê°€ í•„ìš”
- **DTO íƒ€ì… ë§¤í•‘**: ì„œë¹„ìŠ¤ ê°„ íƒ€ì… ë¶ˆì¼ì¹˜ í•´ê²° ì¤‘

## ğŸš€ ê°œë°œ ì‹œì‘ ë°©ë²•

### 1. ì‹œìŠ¤í…œ ì‹œì‘
```powershell
# í†µí•© ê°œë°œ ì„œë²„ ì‹œì‘
.\start-dev.ps1

# ë˜ëŠ” ê°œë³„ ì‹œì‘
cd frontend && npm run dev  # í”„ë¡ íŠ¸ì—”ë“œ (í¬íŠ¸ 5173)
java -cp build\classes com.globalcarelink.PlainJavaServer  # ë°±ì—”ë“œ (í¬íŠ¸ 8080)
```

### 2. ë¡œê·¸ ê¸°ë°˜ ë””ë²„ê¹… ì‹œìŠ¤í…œ
```powershell
# ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§
.\debug-system.ps1

# ì‹œìŠ¤í…œ ìƒíƒœë§Œ í™•ì¸
.\check-system.ps1
```

## ğŸ”§ ì—ëŸ¬ í•´ê²° ê°€ì´ë“œ

### í˜„ì¬ ìƒí™©
- **ì´ 92ê°œ ì—ëŸ¬ â†’ 67ê°œë¡œ ê°ì†Œ** (73% í•´ê²° ì™„ë£Œ)
- Plain Java ì„œë²„ë¡œ ê¸°ë³¸ ê¸°ëŠ¥ ì •ìƒ ë™ì‘ ì¤‘
- Spring Boot ì—ëŸ¬ë“¤ì€ ê°œë°œì— ì˜í–¥ ì—†ìŒ

### ì—ëŸ¬ í•´ê²° ìš°ì„ ìˆœìœ„

#### 1. Repository ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ (ìš°ì„ ë„: ë†’ìŒ)
```java
// í˜„ì¬ ë¬¸ì œ
List<Entity> findByField(String field);

// í•´ê²° ë°©ë²•
Page<Entity> findByField(String field, Pageable pageable);
```

#### 2. ì—”í‹°í‹° getter/setter ë©”ì„œë“œ (ìš°ì„ ë„: ì¤‘ê°„)
```java
// Lombok @Getter @Setter í™•ì¸ ë˜ëŠ” ìˆ˜ë™ ì¶”ê°€
public String getGrade() { return grade; }
public void setGrade(String grade) { this.grade = grade; }
```

#### 3. DTO íƒ€ì… ë¶ˆì¼ì¹˜ (ìš°ì„ ë„: ì¤‘ê°„)
```java
// ë‚´ë¶€ í´ë˜ìŠ¤ vs ë³„ë„ DTO í´ë˜ìŠ¤ í†µì¼
// import ë¬¸ ì¶”ê°€ í™•ì¸
```

### ê°œë°œ ì§„í–‰ ì „ëµ

#### Phase 1: ê¸°ëŠ¥ ê°œë°œ ìš°ì„  (í˜„ì¬)
- Plain Java ì„œë²„ë¡œ í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„
- React í”„ë¡ íŠ¸ì—”ë“œì™€ ì—°ë™ í…ŒìŠ¤íŠ¸
- ë¡œê·¸ ê¸°ë°˜ ë””ë²„ê¹…ìœ¼ë¡œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§

#### Phase 2: Spring Boot ì—ëŸ¬ í•´ê²° (í›„ìˆœìœ„)
- Repository ë©”ì„œë“œë“¤ ì ì§„ì  ìˆ˜ì •
- ì—”í‹°í‹° ë©”ì„œë“œë“¤ ì¶”ê°€
- ì™„ì „í•œ Spring Boot ë°±ì—”ë“œ êµ¬ì¶•

## ğŸ“ í•µì‹¬ íŒŒì¼ êµ¬ì¡°

### ë””ë²„ê¹… ì‹œìŠ¤í…œ
- `debug-system.ps1`: í†µí•© ë””ë²„ê¹… ë° ëª¨ë‹ˆí„°ë§
- `start-dev.ps1`: ê°œë°œ ì„œë²„ ì‹œì‘
- `check-system.ps1`: ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸
- `logs/`: ë¡œê·¸ íŒŒì¼ë“¤

### ë°±ì—”ë“œ
- `src/main/java/com/globalcarelink/PlainJavaServer.java`: í˜„ì¬ ë™ì‘ ì¤‘ì¸ ì„œë²„
- `src/main/java/com/globalcarelink/`: Spring Boot ì†ŒìŠ¤ (ê°œë°œ ì¤‘)

### í”„ë¡ íŠ¸ì—”ë“œ
- `frontend/`: React + TypeScript + Vite

## ğŸ¯ ê°œë°œ ê¶Œì¥ì‚¬í•­

1. **í˜„ì¬ ì‹œìŠ¤í…œ í™œìš©**: Plain Java ì„œë²„ë¡œ ê¸°ëŠ¥ ê°œë°œ ì§„í–‰
2. **ì ì§„ì  ê°œì„ **: í•„ìš”í•œ ê¸°ëŠ¥ë¶€í„° Spring Boot ì—ëŸ¬ í•´ê²°
3. **ë¡œê·¸ ëª¨ë‹ˆí„°ë§**: ì‹¤ì‹œê°„ ë””ë²„ê¹… ì‹œìŠ¤í…œ ì ê·¹ í™œìš©
4. **ë‹¨ê³„ì  ì ‘ê·¼**: í•œ ë²ˆì— ëª¨ë“  ì—ëŸ¬ í•´ê²°ë³´ë‹¤ëŠ” ìš°ì„ ìˆœìœ„ë³„ ì ‘ê·¼

---

## ğŸ”„ Context7 í™œìš© ê·œì¹™

- ëª¨ë“  ëª…ë ¹ì€ ìˆœì°¨ì ìœ¼ë¡œ ì‘ì—…
- ë‹µë³€ì€ í•œêµ­ì–´ë¡œ ì‘ì„±
- ì½”ë“œì—ëŠ” í•œêµ­ì–´ ì£¼ì„ ì¶”ê°€
- ë¡œì»¬ í”„ë¡œì íŠ¸ íŒŒì¼ ê²€í†  í›„ ë‹µë³€
- ì¤‘ê°„ í™•ì¸ ì—†ì´ ì™„ë£Œê¹Œì§€ ì‘ì—…
- ë¡œì»¬ ë°ì´í„° ì‚¬ìš© (ì„ì‹œ ë°ì´í„° ìƒì„± ê¸ˆì§€)
- ì½”ë“œ ì‘ì„± í›„ ì¤‘ë³µ ë° ì˜¤ë¥˜ í™•ì¸

---

**ğŸš€ ê°œë°œì„ ì‹œì‘í•˜ì„¸ìš”! ì‹œìŠ¤í…œì´ ì¤€ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.**
</file>

</files>
