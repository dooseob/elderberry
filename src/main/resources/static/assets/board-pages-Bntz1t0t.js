var e=Object.defineProperty,r=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(r,t,a)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a,i=(e,r)=>{for(var t in r||(r={}))n.call(r,t)&&s(e,t,r[t]);if(a)for(var t of a(r))l.call(r,t)&&s(e,t,r[t]);return e},o=(e,a)=>r(e,t(a)),c=(e,r)=>{var t={};for(var s in e)n.call(e,s)&&r.indexOf(s)<0&&(t[s]=e[s]);if(null!=e&&a)for(var s of a(e))r.indexOf(s)<0&&l.call(e,s)&&(t[s]=e[s]);return t},d=(e,r,t)=>new Promise((a,n)=>{var l=e=>{try{i(t.next(e))}catch(r){n(r)}},s=e=>{try{i(t.throw(e))}catch(r){n(r)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,s);i((t=t.apply(e,r)).next())});import{c as m,j as u,L as h,r as p,a as g,R as y,u as b,b as f,P as v,M as x,C as N,T as w,S as E,F as k,d as C,E as L,e as R,f as T,A as S,g as O,h as P,i as A,k as j,l as I,m as $,n as _,B as M,o as D,p as B,D as z,q as U,s as K,t as F,v as V,X as H,U as W,I as J,w as q,x as Q}from"./react-vendor-CUGNoUm4.js";import{m as G,A as Y}from"./animation-lib-DMXijsVD.js";import{B as X}from"./core-ui-Bn7VW9o5.js";import{t as Z,c as ee,a as re}from"./style-utils-DeQRAeyh.js";import{u as te,a as ae}from"./theme-layout-Dx2gLv9U.js";import{a as ne}from"./http-client-9JY-woyA.js";import{p as le}from"./state-management-DFZwgI-2.js";function se(e){return"object"==typeof e&&null!==e&&"message"in e&&"code"in e&&"status"in e&&"timestamp"in e&&"path"in e}function ie(e){return e instanceof Error&&"code"in e&&["NETWORK_ERROR","TIMEOUT_ERROR","CONNECTION_ERROR"].includes(e.code)}function oe(e){return se(e)&&["UNAUTHORIZED","FORBIDDEN","TOKEN_EXPIRED","INVALID_CREDENTIALS"].includes(e.code)}function ce(e){return se(e)&&["VALIDATION_FAILED","RESOURCE_NOT_FOUND","BUSINESS_RULE_VIOLATION"].includes(e.code)}function de(e){return se(e)&&["INTERNAL_ERROR","SERVICE_UNAVAILABLE","DATABASE_ERROR"].includes(e.code)}function me(e,r){if(se(e)||ie(e))return e;if(e instanceof Error)return{name:e.name,message:e.message,code:"NETWORK_ERROR",stack:e.stack};if("string"==typeof e)return{name:"Error",message:e,code:"NETWORK_ERROR"};if("object"==typeof e&&null!==e){const t=e;if("response"in t&&"object"==typeof t.response&&null!==t.response){const e=t.response;if("data"in e&&"object"==typeof e.data&&null!==e.data){const t=e.data;return{message:t.message||"알 수 없는 오류가 발생했습니다.",code:t.code||"UNKNOWN_ERROR",status:e.status||500,timestamp:t.timestamp||(new Date).toISOString(),path:t.path||(null==r?void 0:r.route)||"",details:t.details||{}}}}return{message:t.message||"알 수 없는 오류가 발생했습니다.",code:t.code||"UNKNOWN_ERROR",status:t.status||500,timestamp:(new Date).toISOString(),path:(null==r?void 0:r.route)||"",details:t}}return{message:"알 수 없는 오류가 발생했습니다.",code:"UNKNOWN_ERROR",status:500,timestamp:(new Date).toISOString(),path:(null==r?void 0:r.route)||""}}function ue(e){if(oe(e))switch(e.code){case"UNAUTHORIZED":return"로그인이 필요합니다.";case"FORBIDDEN":return"접근 권한이 없습니다.";case"TOKEN_EXPIRED":return"세션이 만료되었습니다. 다시 로그인해주세요.";case"INVALID_CREDENTIALS":return"이메일 또는 비밀번호가 올바르지 않습니다.";default:return"인증 오류가 발생했습니다."}if(ie(e))switch(e.code){case"NETWORK_ERROR":return"네트워크 연결을 확인해주세요.";case"TIMEOUT_ERROR":return"요청 시간이 초과되었습니다. 잠시 후 다시 시도해주세요.";case"CONNECTION_ERROR":return"서버에 연결할 수 없습니다.";default:return"네트워크 오류가 발생했습니다."}if(ce(e))switch(e.code){case"VALIDATION_FAILED":return"입력 정보를 확인해주세요.";case"RESOURCE_NOT_FOUND":return"요청하신 정보를 찾을 수 없습니다.";case"BUSINESS_RULE_VIOLATION":return"비즈니스 규칙 위반입니다.";default:return"처리 중 오류가 발생했습니다."}if(de(e))switch(e.code){case"INTERNAL_ERROR":return"시스템 오류가 발생했습니다. 관리자에게 문의해주세요.";case"SERVICE_UNAVAILABLE":return"서비스가 일시적으로 사용할 수 없습니다.";case"DATABASE_ERROR":return"데이터 처리 중 오류가 발생했습니다.";default:return"시스템 오류가 발생했습니다."}return e.message||"알 수 없는 오류가 발생했습니다."}const he={error:(e,r)=>{!function(e){const r=function(e){return ie(e)?"NETWORK":oe(e)?"AUTH":ce(e)?"BUSINESS":de(e)?"SYSTEM":se(e)?"VALIDATION":"UNKNOWN"}(e),t=function(e){return oe(e)?"UNAUTHORIZED"===e.code?"HIGH":"MEDIUM":de(e)?"CRITICAL":ie(e)?"MEDIUM":ce(e)?"LOW":"MEDIUM"}(e);e.message,"details"in e&&e.details,ue(e)}(me(e,r))},warn:(e,r)=>{me(e,r)},info:(e,r)=>{}},pe=e=>{return{id:e.id,email:e.email,name:e.name,phoneNumber:e.phoneNumber,role:(r=e.role,{ADMIN:MemberRole.ADMIN,FACILITY:MemberRole.FACILITY,COORDINATOR:MemberRole.COORDINATOR,USER_DOMESTIC:MemberRole.USER_DOMESTIC,USER_OVERSEAS:MemberRole.USER_OVERSEAS,JOB_SEEKER_DOMESTIC:MemberRole.JOB_SEEKER_DOMESTIC,JOB_SEEKER_OVERSEAS:MemberRole.JOB_SEEKER_OVERSEAS}[r]||MemberRole.USER_DOMESTIC),profileCompletionRate:e.profileCompletionRate||0,isActive:e.isActive,isJobSeeker:e.isJobSeeker,language:e.language,region:e.region,createdAt:e.createdAt,updatedAt:e.updatedAt};var r},ge=e=>({accessToken:e.accessToken,refreshToken:e.refreshToken,tokenType:e.tokenType,expiresIn:e.expiresIn,member:pe(e.member)}),ye=e=>e&&"number"==typeof e.id&&"string"==typeof e.email&&"string"==typeof e.name&&"string"==typeof e.role&&"boolean"==typeof e.isActive,be=e=>e&&"string"==typeof e.accessToken&&"string"==typeof e.tokenType&&"number"==typeof e.expiresIn&&e.member&&ye(e.member),fe=ne.create({baseURL:"http://localhost:8080/api/auth",timeout:1e4,headers:{"Content-Type":"application/json"}}),ve=ne.create({baseURL:"http://localhost:8080/api/auth",timeout:1e4,headers:{"Content-Type":"application/json"}});fe.interceptors.request.use(e=>{if(["/login","/register","/signup","/login-test","/login-dto-test","/login-simple-test","/login-map-test","/password-hash-test"].some(r=>{const t=e.url||"";return t===r||t.endsWith(r)}))delete e.headers.Authorization;else{const r=localStorage.getItem("accessToken");r&&(e.headers.Authorization=`Bearer ${r}`)}return e}),ve.interceptors.request.use(e=>{const r=localStorage.getItem("accessToken");return r&&(e.headers.Authorization=`Bearer ${r}`),e});const xe=e=>{var r,t,a;const n=e,l={component:"authApi",route:(null==(r=null==n?void 0:n.config)?void 0:r.url)||""};if(401===(null==(t=null==n?void 0:n.response)?void 0:t.status)){const r=(null==(a=n.config)?void 0:a.url)||"";if(r.includes("/login")||r.includes("/register")){const r=me(e,l);return Promise.reject(r)}{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user");const r=me(e,l);return he.warn(r,l),Promise.reject(r)}}const s=me(e,l);return he.error(s,l),Promise.reject(s)};fe.interceptors.response.use(e=>e,xe),ve.interceptors.response.use(e=>e,xe);const Ne={login(e){return d(this,null,function*(){const r=yield fe.post("/login",e);if(be(r.data))return ge(r.data);throw new Error("Invalid login response format")})},register(e){return d(this,null,function*(){const r=yield fe.post("/register",e);if(be(r.data))return ge(r.data);throw new Error("Invalid register response format")})},logout(){return d(this,null,function*(){yield fe.post("/logout")})},refreshToken(e){return d(this,null,function*(){return(yield fe.post("/refresh",e)).data})},validateToken(e){return d(this,null,function*(){return(yield fe.post("/validate",e)).data})},invalidateAllTokens(){return d(this,null,function*(){yield fe.post("/invalidate-all")})},getActiveTokens(){return d(this,null,function*(){return(yield fe.get("/active-tokens")).data})},invalidateToken(e){return d(this,null,function*(){yield fe.post(`/invalidate/${e}`)})},getTokenMetadata(){return d(this,null,function*(){return(yield fe.get("/token-metadata")).data})}},we={getProfile(){return d(this,null,function*(){const e=yield ve.get("/me");if(ye(e.data))return pe(e.data);throw new Error("Invalid member response format")})},updateProfile(e){return d(this,null,function*(){return(yield ve.put("/me",e)).data})},deleteAccount(){return d(this,null,function*(){yield ve.delete("/me")})},getMember(e){return d(this,null,function*(){return(yield ve.get(`/${e}`)).data})},getAllMembers(){return d(this,null,function*(){return(yield ve.get("")).data})},getMembersByRole(e){return d(this,null,function*(){return(yield ve.get(`/role/${e}`)).data})},createMember(e){return d(this,null,function*(){return(yield ve.post("",e)).data})},updateMember(e,r){return d(this,null,function*(){return(yield ve.put(`/${e}`,r)).data})},deleteMember(e){return d(this,null,function*(){yield ve.delete(`/${e}`)})}},Ee={ACCESS_TOKEN:"accessToken",REFRESH_TOKEN:"refreshToken",USER:"user"},ke=e=>{try{return sessionStorage.getItem(Ee[e])}catch(r){return null}},Ce=(e,r)=>{try{sessionStorage.setItem(Ee[e],r)}catch(t){}},Le=e=>{try{sessionStorage.removeItem(Ee[e])}catch(r){}},Re=e=>{try{sessionStorage.setItem(Ee.USER,JSON.stringify(e))}catch(r){}},Te=()=>{try{sessionStorage.removeItem(Ee.USER)}catch(e){}},Se={user:(()=>{try{const e=sessionStorage.getItem(Ee.USER);return e?JSON.parse(e):null}catch(e){return null}})(),accessToken:ke("ACCESS_TOKEN"),refreshToken:ke("REFRESH_TOKEN"),isAuthenticated:!!ke("ACCESS_TOKEN"),isLoading:!1,error:null},Oe=m()(le((e,r)=>o(i({},Se),{login:r=>d(null,null,function*(){var t;try{e({isLoading:!0,error:null}),Le("ACCESS_TOKEN"),Le("REFRESH_TOKEN"),Te();const t=yield Ne.login(r),a={id:t.member.id,email:t.member.email,name:t.member.name,role:t.member.role,profileCompletionRate:t.member.profileCompletionRate||0,isActive:t.member.isActive};Ce("ACCESS_TOKEN",t.accessToken),t.refreshToken&&Ce("REFRESH_TOKEN",t.refreshToken),Re(a),e({user:a,accessToken:t.accessToken,refreshToken:t.refreshToken||null,isAuthenticated:!0,isLoading:!1,error:null})}catch(a){const r={component:"authStore",action:"login"},n=me(a,r),l=(null==(t=n.message)?void 0:t.includes("401"))?"이메일 또는 비밀번호가 올바르지 않습니다.":n.message||"로그인에 실패했습니다.";throw he.warn(n,r),e({isLoading:!1,error:l}),n}}),register:r=>d(null,null,function*(){var t;try{e({isLoading:!0,error:null});const t=yield Ne.register(r),a={id:t.member.id,email:t.member.email,name:t.member.name,role:t.member.role,profileCompletionRate:t.member.profileCompletionRate||0,isActive:t.member.isActive};Ce("ACCESS_TOKEN",t.accessToken),Ce("REFRESH_TOKEN",t.refreshToken),Re(a),e({user:a,accessToken:t.accessToken,refreshToken:t.refreshToken,isAuthenticated:!0,isLoading:!1,error:null})}catch(a){const r={component:"authStore",action:"register"},n=me(a,r),l=(null==(t=n.message)?void 0:t.includes("409"))?"이미 사용중인 이메일입니다.":n.message||"회원가입에 실패했습니다.";throw he.warn(n,r),e({isLoading:!1,error:l}),n}}),logout:()=>d(null,null,function*(){try{e({isLoading:!0}),yield Ne.logout()}catch(r){he.warn(r,{component:"authStore",action:"logout"})}finally{Le("ACCESS_TOKEN"),Le("REFRESH_TOKEN"),Te(),e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:null})}}),refreshToken:()=>d(null,null,function*(){try{const{refreshToken:t}=r();if(!t)throw new Error("리프레시 토큰이 없습니다.");const a=yield Ne.refreshToken({refreshToken:t}),n={id:a.member.id,email:a.member.email,name:a.member.name,role:a.member.role,profileCompletionRate:a.member.profileCompletionRate||0,isActive:a.member.isActive};Ce("ACCESS_TOKEN",a.accessToken),Ce("REFRESH_TOKEN",a.refreshToken),Re(n),e({user:n,accessToken:a.accessToken,refreshToken:a.refreshToken,isAuthenticated:!0,error:null})}catch(t){const e={component:"authStore",action:"refreshToken"},a=me(t,e);throw he.error(a,e),r().logout(),a}}),refreshUser:()=>d(null,null,function*(){try{e({isLoading:!0});const r=yield we.getProfile(),t={id:r.id,email:r.email,name:r.name,role:r.role,profileCompletionRate:r.profileCompletionRate,isActive:r.isActive};Re(t),e({user:t,isLoading:!1,error:null})}catch(r){const t={component:"authStore",action:"refreshUser"},a=me(r,t);throw he.error(a,t),e({isLoading:!1,error:a.message||"사용자 정보 조회에 실패했습니다."}),a}}),updateProfile:r=>d(null,null,function*(){try{e({isLoading:!0,error:null});const t=yield we.updateProfile(r),a={id:t.id,email:t.email,name:t.name,role:t.role,profileCompletionRate:t.profileCompletionRate,isActive:t.isActive};Re(a),e({user:a,isLoading:!1,error:null})}catch(t){const r={component:"authStore",action:"updateProfile"},a=me(t,r);throw he.error(a,r),e({isLoading:!1,error:a.message||"프로필 업데이트에 실패했습니다."}),a}}),validateToken:()=>d(null,null,function*(){try{const{accessToken:e}=r();return!!e&&(yield Ne.validateToken({token:e})).valid}catch(e){return he.warn(e,{component:"authStore",action:"validateToken"}),!1}}),clearError:()=>{e({error:null})},setLoading:r=>{e({isLoading:r})},reset:()=>{Le("ACCESS_TOKEN"),Le("REFRESH_TOKEN"),Te(),e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:null})}}),{name:"elderberry-auth",partialize:e=>({isAuthenticated:e.isAuthenticated})}));var Pe=(e=>(e.ADMIN="ADMIN",e.FACILITY="FACILITY",e.COORDINATOR="COORDINATOR",e.USER_DOMESTIC="USER_DOMESTIC",e.USER_OVERSEAS="USER_OVERSEAS",e.JOB_SEEKER_DOMESTIC="JOB_SEEKER_DOMESTIC",e.JOB_SEEKER_OVERSEAS="JOB_SEEKER_OVERSEAS",e))(Pe||{});const Ae=({size:e="md",color:r="blue",text:t,className:a=""})=>{const n={blue:"text-blue-600",gray:"text-gray-600",white:"text-white"};return u.jsxs("div",{className:`flex flex-col items-center justify-center ${a}`,children:[u.jsx(h,{className:`animate-spin ${{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"}[e]} ${n[r]}`,"aria-label":"로딩 중"}),t&&u.jsx("p",{className:`mt-2 ${{sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl"}[e]} ${n[r]} animate-pulse`,children:t})]})};function je(...e){return Z(ee(e))}const Ie=re(["rounded-[var(--linear-radius-medium)] border","transition-all duration-[var(--linear-transition-fast)]","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--linear-color-accent)] focus-visible:ring-offset-2","relative overflow-hidden"],{variants:{surface:{default:["bg-[var(--linear-color-background)] text-[var(--linear-color-text-primary)]","border-[var(--linear-color-border-subtle)]"],elevated:["bg-[var(--linear-color-surface-elevated)] text-[var(--linear-color-text-primary)]","border-[var(--linear-color-border-subtle)]"],panel:["bg-[var(--linear-color-surface-panel)] text-[var(--linear-color-text-primary)]","border-[var(--linear-color-border-default)]"],modal:["bg-[var(--linear-color-surface-modal)] text-[var(--linear-color-text-primary)]","border-[var(--linear-color-border-default)]"],gradient:["bg-gradient-to-br from-[var(--linear-color-surface-elevated)] to-[var(--linear-color-surface-panel)]","text-[var(--linear-color-text-primary)] border-[var(--linear-color-border-subtle)]"],"accent-gradient":["bg-gradient-to-br from-[var(--linear-color-accent)] to-[var(--linear-color-accent-hover)]","text-[var(--linear-color-text-on-accent)] border-[var(--linear-color-accent)]"]},padding:{none:"p-0",xs:"p-[var(--linear-spacing-xs)]",sm:"p-[var(--linear-spacing-sm)]",md:"p-[var(--linear-spacing-lg)]",lg:"p-[var(--linear-spacing-xl)]",xl:"p-[var(--linear-spacing-2xl)]"},shadow:{none:"shadow-none",card:"shadow-[var(--linear-shadow-card)]",modal:"shadow-[var(--linear-shadow-modal)]",dropdown:"shadow-[var(--linear-shadow-dropdown)]"},radius:{none:"rounded-none",sm:"rounded-[var(--linear-radius-small)]",md:"rounded-[var(--linear-radius-medium)]",lg:"rounded-[var(--linear-radius-large)]",full:"rounded-[var(--linear-radius-full)]"},interactive:{false:"",true:["cursor-pointer select-none","hover:shadow-[var(--linear-shadow-modal)] hover:border-[var(--linear-color-border-default)]","hover:-translate-y-1 active:translate-y-0 active:scale-[0.98]","focus-visible:ring-2 focus-visible:ring-[var(--linear-color-accent)]"]}},defaultVariants:{surface:"elevated",padding:"md",shadow:"card",radius:"md",interactive:!1}}),$e=p.forwardRef((e,r)=>{var t=e,{children:a,className:n,surface:l,padding:s,shadow:d,radius:m,interactive:h,animation:g=!0,title:y,description:b,headerContent:f,footerContent:v,loading:x=!1,empty:N=!1,emptyMessage:w="데이터가 없습니다.",error:E=!1,errorMessage:k="오류가 발생했습니다.",overlay:C,badge:L,onClick:R,onKeyDown:T,role:S,"aria-label":O,"aria-describedby":P}=t,A=c(t,["children","className","surface","padding","shadow","radius","interactive","animation","title","description","headerContent","footerContent","loading","empty","emptyMessage","error","errorMessage","overlay","badge","onClick","onKeyDown","role","aria-label","aria-describedby"]);const{isDark:j,isHighContrast:I}=te(),$=Boolean(R||h),_=g&&$,M=S||($?"button":"article"),D=O||(y&&$?`${y} 카드`:void 0),B=_?{whileHover:{y:-2,scale:1.01,transition:{duration:.15,ease:"easeOut"}},whileTap:{scale:.98,y:0,transition:{duration:.1,ease:"easeOut"}}}:{},z=_?G.div:"div";return u.jsxs(z,o(i(i({ref:r,className:je(Ie({surface:l,padding:s,shadow:d,radius:m,interactive:$}),"linear-animate-in",n),onClick:$?R:void 0,onKeyDown:$?e=>{!$||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),null==R||R(e)),null==T||T(e)}:void 0,tabIndex:$?0:void 0,role:M,"aria-label":D,"aria-describedby":P,"aria-busy":x,"aria-disabled":x||E},_?B:{}),A),{children:[L&&u.jsx("div",{className:"absolute top-2 right-2 z-10",children:L}),y||b||f?u.jsxs(_e,{children:[(y||b)&&u.jsxs("div",{className:"space-y-[var(--linear-spacing-xs)]",children:[y&&u.jsx(Me,{id:`card-title-${p.useId()}`,children:y}),b&&u.jsx(De,{children:b})]}),f]}):null,u.jsx("div",{className:je(y||b||f?"px-[var(--linear-spacing-lg)] pb-[var(--linear-spacing-lg)]":"",v?"pb-0":""),children:x?u.jsxs("div",{className:"flex items-center justify-center p-[var(--linear-spacing-2xl)]",children:[u.jsx("div",{className:"w-6 h-6 border-2 border-[var(--linear-color-accent)] border-t-transparent rounded-full animate-spin"}),u.jsx("span",{className:"ml-2 text-[var(--linear-color-text-secondary)]",children:"로딩 중..."})]}):E?u.jsxs("div",{className:"flex flex-col items-center justify-center p-[var(--linear-spacing-2xl)] text-center",children:[u.jsx("div",{className:"w-12 h-12 mb-4 rounded-full bg-[var(--linear-color-error-bg)] flex items-center justify-center",children:u.jsx("svg",{className:"w-6 h-6 text-[var(--linear-color-error)]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5C2.962 18.333 3.924 20 5.464 20z"})})}),u.jsx("p",{className:"text-[var(--linear-color-error)]",children:k})]}):N&&!a?u.jsxs("div",{className:"flex flex-col items-center justify-center p-[var(--linear-spacing-2xl)] text-center",children:[u.jsx("div",{className:"w-12 h-12 mb-4 rounded-full bg-[var(--linear-color-surface-panel)] flex items-center justify-center",children:u.jsx("svg",{className:"w-6 h-6 text-[var(--linear-color-text-tertiary)]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),u.jsx("p",{className:"text-[var(--linear-color-text-secondary)]",children:w})]}):a}),v?u.jsx(ze,{children:v}):null,C&&u.jsx("div",{className:"absolute inset-0 bg-[var(--linear-color-surface-modal)] bg-opacity-90 flex items-center justify-center z-20",children:C})]}))});$e.displayName="LinearCard";const _e=p.forwardRef((e,r)=>{var t=e,{className:a,centered:n=!1,border:l=!1}=t,s=c(t,["className","centered","border"]);return u.jsx("div",i({ref:r,className:je("flex flex-col space-y-[var(--linear-spacing-xs)] p-[var(--linear-spacing-lg)] pb-[var(--linear-spacing-md)]",n&&"items-center text-center",l&&"border-b border-[var(--linear-color-border-subtle)] mb-[var(--linear-spacing-md)] pb-[var(--linear-spacing-lg)]",a)},s))}),Me=p.forwardRef((e,r)=>{var t=e,{className:a,children:n,level:l=3,size:s="md",variant:d="primary"}=t,m=c(t,["className","children","level","size","variant"]);const h=`h${l}`;return u.jsx(h,o(i({ref:r,className:je("leading-[var(--linear-line-height-tight)] tracking-tight",{sm:"text-base font-[var(--linear-font-weight-medium)]",md:"text-lg font-[var(--linear-font-weight-semibold)]",lg:"text-xl font-[var(--linear-font-weight-semibold)]",xl:"text-2xl font-[var(--linear-font-weight-bold)]"}[s],{primary:"text-[var(--linear-color-text-primary)]",secondary:"text-[var(--linear-color-text-secondary)]",accent:"text-[var(--linear-color-accent)]",muted:"text-[var(--linear-color-text-tertiary)]"}[d],a)},m),{children:n}))}),De=p.forwardRef((e,r)=>{var t=e,{className:a,size:n="sm",variant:l="secondary",maxLines:s,style:o}=t,d=c(t,["className","size","variant","maxLines","style"]);const m=s?i({display:"-webkit-box",WebkitLineClamp:s,WebkitBoxOrient:"vertical",overflow:"hidden"},o):o;return u.jsx("p",i({ref:r,className:je("leading-[var(--linear-line-height-normal)]",{sm:"text-sm",md:"text-base",lg:"text-lg"}[n],{secondary:"text-[var(--linear-color-text-secondary)]",tertiary:"text-[var(--linear-color-text-tertiary)]",muted:"text-[var(--linear-color-text-tertiary)] opacity-75"}[l],a),style:m},d))}),Be=p.forwardRef((e,r)=>{var t=e,{className:a,padding:n="lg",centered:l=!1,as:s="div"}=t,o=c(t,["className","padding","centered","as"]);const d=s;return u.jsx(d,i({ref:r,className:je("text-[var(--linear-color-text-primary)]",{none:"p-0",sm:"p-[var(--linear-spacing-sm)]",md:"p-[var(--linear-spacing-md)]",lg:"p-[var(--linear-spacing-lg)]"}[n],"pt-0",l&&"flex flex-col items-center justify-center text-center",a)},o))}),ze=p.forwardRef((e,r)=>{var t=e,{className:a,justify:n="start",border:l=!1,padding:s="lg"}=t,o=c(t,["className","justify","border","padding"]);return u.jsx("div",i({ref:r,className:je("flex items-center pt-0 gap-[var(--linear-spacing-sm)]",{sm:"p-[var(--linear-spacing-sm)]",md:"p-[var(--linear-spacing-md)]",lg:"p-[var(--linear-spacing-lg)]"}[s],{start:"justify-start",center:"justify-center",end:"justify-end",between:"justify-between",around:"justify-around"}[n],l&&"border-t border-[var(--linear-color-border-subtle)] mt-[var(--linear-spacing-md)] pt-[var(--linear-spacing-lg)]",a)},o))});_e.displayName="LinearCardHeader",Me.displayName="LinearCardTitle",De.displayName="LinearCardDescription",Be.displayName="LinearCardContent",ze.displayName="LinearCardFooter";const Ue=re(["absolute z-[var(--linear-z-tooltip)]","bg-[var(--linear-color-surface-modal)] text-[var(--linear-color-text-primary)]","border border-[var(--linear-color-border-default)]","rounded-[var(--linear-radius-small)]","shadow-[var(--linear-shadow-dropdown)]","px-[var(--linear-spacing-sm)] py-[var(--linear-spacing-xs)]","text-sm font-[var(--linear-font-weight-normal)]","max-w-xs break-words","pointer-events-none select-none"],{variants:{variant:{default:["bg-[var(--linear-color-surface-modal)] text-[var(--linear-color-text-primary)]","border-[var(--linear-color-border-default)]"],dark:["bg-gray-900 text-white","border-gray-700"],light:["bg-white text-gray-900","border-gray-200"],accent:["bg-[var(--linear-color-accent)] text-[var(--linear-color-text-on-accent)]","border-[var(--linear-color-accent)]"],error:["bg-[var(--linear-color-error)] text-white","border-[var(--linear-color-error)]"],success:["bg-[var(--linear-color-success)] text-white","border-[var(--linear-color-success)]"],warning:["bg-[var(--linear-color-warning)] text-white","border-[var(--linear-color-warning)]"]},size:{sm:"text-xs px-[var(--linear-spacing-xs)] py-[calc(var(--linear-spacing-xs)/2)] max-w-[200px]",md:"text-sm px-[var(--linear-spacing-sm)] py-[var(--linear-spacing-xs)] max-w-[300px]",lg:"text-base px-[var(--linear-spacing-md)] py-[var(--linear-spacing-sm)] max-w-[400px]"}},defaultVariants:{variant:"default",size:"md"}}),Ke=re(["absolute w-2 h-2 rotate-45","border border-[var(--linear-color-border-default)]"],{variants:{variant:{default:"bg-[var(--linear-color-surface-modal)]",dark:"bg-gray-900 border-gray-700",light:"bg-white border-gray-200",accent:"bg-[var(--linear-color-accent)] border-[var(--linear-color-accent)]",error:"bg-[var(--linear-color-error)] border-[var(--linear-color-error)]",success:"bg-[var(--linear-color-success)] border-[var(--linear-color-success)]",warning:"bg-[var(--linear-color-warning)] border-[var(--linear-color-warning)]"}},defaultVariants:{variant:"default"}}),Fe=p.forwardRef((e,r)=>{var t=e,{content:a,children:n,className:l,variant:s,size:d,position:m="top",trigger:h="hover",showDelay:y=500,hideDelay:b=0,showArrow:f=!0,open:v,onOpenChange:x,disabled:N=!1,animation:w=!0,offset:E=8,autoPosition:k=!0,container:C,role:L="tooltip",id:R}=t,T=c(t,["content","children","className","variant","size","position","trigger","showDelay","hideDelay","showArrow","open","onOpenChange","disabled","animation","offset","autoPosition","container","role","id"]);const{isReducedMotion:S}=ae(),[O,P]=p.useState(!1),[A,j]=p.useState(!1),I=p.useRef(null),$=p.useRef(null),_=p.useRef(),M=p.useRef(),D=R||p.useId(),B="manual"===h,z=B?null!=v&&v:O,U=w&&!S,{calculatedPosition:K,coordinates:F,arrowPosition:V,calculatePosition:H}=((e,r,t,a,n)=>{const[l,s]=p.useState(t),[i,o]=p.useState({x:0,y:0}),[c,d]=p.useState({x:0,y:0});return{calculatedPosition:l,coordinates:i,arrowPosition:c,calculatePosition:p.useCallback(()=>{if(!e.current||!r.current)return;const l=e.current.getBoundingClientRect(),i=r.current.getBoundingClientRect(),c=window.innerWidth,m=window.innerHeight;let u=t,h=0,p=0,g=0,y=0;const b=e=>{switch(e){case"top":case"top-start":case"top-end":h="top-start"===e?l.left:"top-end"===e?l.right-i.width:l.left+(l.width-i.width)/2,p=l.top-i.height-a,g="top-start"===e?16:"top-end"===e?i.width-16-8:i.width/2-4,y=i.height-1;break;case"bottom":case"bottom-start":case"bottom-end":h="bottom-start"===e?l.left:"bottom-end"===e?l.right-i.width:l.left+(l.width-i.width)/2,p=l.bottom+a,g="bottom-start"===e?16:"bottom-end"===e?i.width-16-8:i.width/2-4,y=-4;break;case"left":case"left-start":case"left-end":h=l.left-i.width-a,p="left-start"===e?l.top:"left-end"===e?l.bottom-i.height:l.top+(l.height-i.height)/2,g=i.width-1,y="left-start"===e?16:"left-end"===e?i.height-16-8:i.height/2-4;break;case"right":case"right-start":case"right-end":h=l.right+a,p="right-start"===e?l.top:"right-end"===e?l.bottom-i.height:l.top+(l.height-i.height)/2,g=-4,y="right-start"===e?16:"right-end"===e?i.height-16-8:i.height/2-4}return{x:h,y:p,arrowX:g,arrowY:y}},f=b(u);if(h=f.x,p=f.y,g=f.arrowX,y=f.arrowY,n&&(h+i.width>c&&(u.includes("left")?u=u.replace("left","right"):u.includes("right")?u=u.replace("right","left"):h=c-i.width-8),h<0&&(u.includes("right")?u=u.replace("right","left"):u.includes("left")?u=u.replace("left","right"):h=8),p+i.height>m&&(u.includes("bottom")?u=u.replace("bottom","top"):u.includes("top")?u=u.replace("top","bottom"):p=m-i.height-8),p<0&&(u.includes("top")?u=u.replace("top","bottom"):u.includes("bottom")?u=u.replace("bottom","top"):p=8),u!==t)){const e=b(u);h=e.x,p=e.y,g=e.arrowX,y=e.arrowY}s(u),o({x:h,y:p}),d({x:g,y:y})},[t,a,n,e,r])}})(I,$,m,E,k),W=p.useCallback(()=>{N||(M.current&&clearTimeout(M.current),y>0?_.current=setTimeout(()=>{B?null==x||x(!0):P(!0)},y):B?null==x||x(!0):P(!0))},[N,y,B,x]),J=p.useCallback(()=>{_.current&&clearTimeout(_.current),b>0?M.current=setTimeout(()=>{B?null==x||x(!1):P(!1)},b):B?null==x||x(!1):P(!1)},[b,B,x]),q=p.cloneElement(n,{ref:e=>{I.current=e,n.ref&&("function"==typeof n.ref?n.ref(e):n.ref.current=e)},onMouseEnter:e=>{var r,t;null==(t=(r=n.props).onMouseEnter)||t.call(r,e),"hover"===h&&W()},onMouseLeave:e=>{var r,t;null==(t=(r=n.props).onMouseLeave)||t.call(r,e),"hover"===h&&J()},onClick:e=>{var r,t;null==(t=(r=n.props).onClick)||t.call(r,e),"click"===h&&(z?J():W())},onFocus:e=>{var r,t;null==(t=(r=n.props).onFocus)||t.call(r,e),"focus"===h&&W()},onBlur:e=>{var r,t;null==(t=(r=n.props).onBlur)||t.call(r,e),"focus"===h&&J()},onKeyDown:e=>{var r,t;null==(t=(r=n.props).onKeyDown)||t.call(r,e),(e=>{"Escape"===e.key&&z&&J()})(e)},"aria-describedby":"tooltip"===L&&z?D:void 0,"aria-expanded":"click"===h?z:void 0,"aria-haspopup":"click"===h?"dialog":void 0});p.useEffect(()=>{j(!0)},[]),p.useEffect(()=>{if(z&&A){H();const e=()=>H();return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}},[z,A,H]),p.useEffect(()=>()=>{_.current&&clearTimeout(_.current),M.current&&clearTimeout(M.current)},[]);const Q=p.useMemo(()=>C?"function"==typeof C?C():C:"undefined"!=typeof document?document.body:null,[C]);if(!A||!Q||N)return q;const X=u.jsx(Y,{children:z&&u.jsxs(G.div,o(i(i({ref:p.useMemo(()=>e=>{r&&("function"==typeof r?r(e):r.current=e),$.current=e},[r]),className:je(Ue({variant:s,size:d}),l),style:{left:F.x,top:F.y},role:L,id:D},U?{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15,ease:"easeOut"}}:{}),T),{children:[a,f&&u.jsx("div",{className:je(Ke({variant:s}),(Z=K,Z.includes("top")?"border-t-0 border-l-0":Z.includes("bottom")?"border-b-0 border-r-0":Z.includes("left")?"border-l-0 border-b-0":Z.includes("right")?"border-r-0 border-t-0":"")),style:{left:V.x,top:V.y}})]}))});var Z;return u.jsxs(u.Fragment,{children:[q,g.createPortal(X,Q)]})});Fe.displayName="LinearTooltip",p.forwardRef((e,r)=>{var t=e,{iconSize:a="md",className:n}=t,l=c(t,["iconSize","className"]);return u.jsx(Fe,o(i({ref:r,trigger:"hover",position:"top",variant:"default",size:"sm",className:n},l),{children:u.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full text-[var(--linear-color-text-tertiary)] hover:text-[var(--linear-color-text-primary)] transition-colors","aria-label":"추가 정보",children:u.jsx("svg",{className:{sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"}[a],fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}))}).displayName="LinearInfoTooltip",p.forwardRef((e,r)=>{var t=e,{shortcut:a,description:n}=t,l=c(t,["shortcut","description"]);const s=Array.isArray(a)?a:[a],o=u.jsxs("div",{className:"flex flex-col gap-1",children:[n&&u.jsx("div",{className:"text-sm",children:n}),u.jsx("div",{className:"flex items-center gap-1",children:s.map((e,r)=>u.jsxs(p.Fragment,{children:[r>0&&u.jsx("span",{className:"text-xs opacity-70",children:"+"}),u.jsx("kbd",{className:"px-1.5 py-0.5 text-xs font-mono bg-[var(--linear-color-surface-panel)] border border-[var(--linear-color-border-default)] rounded",children:e})]},e))})]});return u.jsx(Fe,i({ref:r,content:o,variant:"default",size:"sm",position:"bottom"},l))}).displayName="LinearShortcutTooltip";const Ve=({children:e,defaultDelay:r=500,defaultPosition:t="top"})=>u.jsx(u.Fragment,{children:e});Ve.displayName="LinearTooltipProvider";const He=p.forwardRef(({children:e,asChild:r=!1},t)=>r?p.cloneElement(e,{ref:t}):e);He.displayName="LinearTooltipTrigger";const We=p.forwardRef(({children:e,className:r},t)=>u.jsx("div",{ref:t,className:r,children:e}));We.displayName="LinearTooltipContent";const Je=re("inline-flex items-center px-2 py-1 text-xs font-medium rounded-md",{variants:{variant:{default:"bg-gray-100 text-gray-800",primary:"bg-blue-100 text-blue-800",secondary:"bg-purple-100 text-purple-800",success:"bg-green-100 text-green-800",error:"bg-red-100 text-red-800",warning:"bg-yellow-100 text-yellow-800",outline:"border border-gray-300 text-gray-700"}},defaultVariants:{variant:"default"}}),qe=y.forwardRef((e,r)=>{var t=e,{className:a,variant:n,children:l}=t,s=c(t,["className","variant","children"]);return u.jsx("span",o(i({ref:r,className:je(Je({variant:n}),a)},s),{children:l}))});qe.displayName="Badge";const Qe=p.memo(e=>{var r=e,{src:t,webpSrc:a,avifSrc:n,placeholder:l,lazy:s=!0,priority:d=!1,aspectRatio:m,sizes:h,fallback:g,loader:y,alt:b="",className:f="",containerClassName:v="",onLoad:x,onError:N}=r,w=c(r,["src","webpSrc","avifSrc","placeholder","lazy","priority","aspectRatio","sizes","fallback","loader","alt","className","containerClassName","onLoad","onError"]);const E=p.useRef(null),k=p.useRef(null),[C,L]=p.useState({isLoading:!0,isLoaded:!1,hasError:!1,currentSrc:l||t}),[R,T]=p.useState(!s||d);p.useEffect(()=>{if(!s||d)return;const e=new IntersectionObserver(r=>{const[t]=r;t.isIntersecting&&(T(!0),e.disconnect())},{rootMargin:"50px",threshold:.1});return k.current&&e.observe(k.current),()=>e.disconnect()},[s,d]),p.useEffect(()=>{if(!R)return;const e=new Image;let r=t;n&&Ge("avif")?r=n:a&&Ge("webp")&&(r=a),e.onload=()=>{L({isLoading:!1,isLoaded:!0,hasError:!1,currentSrc:r})},e.onerror=()=>{if(g&&r!==g){const e=new Image;e.onload=()=>{L({isLoading:!1,isLoaded:!0,hasError:!1,currentSrc:g})},e.onerror=()=>{L({isLoading:!1,isLoaded:!1,hasError:!0,currentSrc:l||""})},e.src=g}else L({isLoading:!1,isLoaded:!1,hasError:!0,currentSrc:l||""})},e.src=r},[R,t,a,n,g,l]);const S=o(i({},m&&{aspectRatio:m}),{position:"relative",overflow:"hidden"}),O=je("transition-all duration-300 ease-in-out","w-full h-full object-cover",{"opacity-0":C.isLoading||!C.isLoaded,"opacity-100":C.isLoaded&&!C.hasError,"filter blur-sm scale-105":C.isLoading&&l,"filter-none scale-100":C.isLoaded},f),P=je("absolute inset-0 transition-opacity duration-300","bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200","animate-pulse",{"opacity-100":C.isLoading,"opacity-0":C.isLoaded||C.hasError});return u.jsxs("div",{ref:k,className:je("relative",v),style:S,children:[!C.isLoaded&&!C.hasError&&u.jsx("div",{className:P,children:y||u.jsx("div",{className:"flex items-center justify-center h-full",children:u.jsx("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"})})}),l&&C.isLoading&&u.jsx("img",{src:l,alt:"",className:"absolute inset-0 w-full h-full object-cover filter blur-sm opacity-60",loading:d?"eager":"lazy"}),R&&u.jsxs("picture",{children:[n&&u.jsx("source",{srcSet:n,type:"image/avif",sizes:h}),a&&u.jsx("source",{srcSet:a,type:"image/webp",sizes:h}),u.jsx("img",i({ref:E,src:C.currentSrc,alt:b,className:O,loading:d?"eager":"lazy",fetchPriority:d?"high":"auto",decoding:d?"sync":"async",sizes:h,onLoad:e=>{L(e=>o(i({},e),{isLoading:!1,isLoaded:!0})),null==x||x(e)},onError:e=>{L(e=>o(i({},e),{hasError:!0})),null==N||N(e)}},w))]}),C.hasError&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 text-gray-400",children:u.jsxs("div",{className:"text-center",children:[u.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),u.jsx("p",{className:"text-sm",children:"이미지를 불러올 수 없습니다"})]})})]})}),Ge=e=>{if("undefined"==typeof window)return!1;const r=document.createElement("canvas");r.width=1,r.height=1;try{return 5===r.toDataURL(`image/${e}`).indexOf(`image/${e}`)}catch(t){return!1}};Qe.displayName="OptimizedImage";const Ye=re(["flex-shrink-0 border-0","transition-all duration-[var(--linear-transition-fast)]"],{variants:{orientation:{horizontal:"w-full h-px",vertical:"h-full w-px"},variant:{subtle:"bg-[var(--linear-color-border-subtle)]",default:"bg-[var(--linear-color-border-default)]",strong:"bg-[var(--linear-color-border-strong)]",accent:"bg-[var(--linear-color-accent)]",gradient:"bg-gradient-to-r from-transparent via-[var(--linear-color-border-default)] to-transparent",dashed:"border-t border-dashed border-[var(--linear-color-border-default)] bg-transparent",dotted:"border-t border-dotted border-[var(--linear-color-border-default)] bg-transparent"},thickness:{thin:"",normal:"h-0.5",thick:"h-1",thicker:"h-1.5"},spacing:{none:"my-0",xs:"my-[var(--linear-spacing-xs)]",sm:"my-[var(--linear-spacing-sm)]",md:"my-[var(--linear-spacing-md)]",lg:"my-[var(--linear-spacing-lg)]",xl:"my-[var(--linear-spacing-xl)]","2xl":"my-[var(--linear-spacing-2xl)]"}},compoundVariants:[{orientation:"vertical",variant:"dashed",className:"border-t-0 border-l border-dashed"},{orientation:"vertical",variant:"dotted",className:"border-t-0 border-l border-dotted"},{orientation:"vertical",thickness:"normal",className:"h-full w-0.5"},{orientation:"vertical",thickness:"thick",className:"h-full w-1"},{orientation:"vertical",thickness:"thicker",className:"h-full w-1.5"},{orientation:"vertical",spacing:"xs",className:"my-0 mx-[var(--linear-spacing-xs)]"},{orientation:"vertical",spacing:"sm",className:"my-0 mx-[var(--linear-spacing-sm)]"},{orientation:"vertical",spacing:"md",className:"my-0 mx-[var(--linear-spacing-md)]"},{orientation:"vertical",spacing:"lg",className:"my-0 mx-[var(--linear-spacing-lg)]"},{orientation:"vertical",spacing:"xl",className:"my-0 mx-[var(--linear-spacing-xl)]"},{orientation:"vertical",spacing:"2xl",className:"my-0 mx-[var(--linear-spacing-2xl)]"}],defaultVariants:{orientation:"horizontal",variant:"subtle",thickness:"thin",spacing:"md"}}),Xe=p.forwardRef((e,r)=>{var t,a=e,{className:n,orientation:l,variant:s,thickness:d,spacing:m,label:h,icon:g,labelPosition:y="center",animation:b=!1,fade:f=!1,customColor:v,role:x="separator","aria-label":N}=a,w=c(a,["className","orientation","variant","thickness","spacing","label","icon","labelPosition","animation","fade","customColor","role","aria-label"]);const E=b&&!0,k=Boolean(h||g),C="horizontal"===l,L=p.useMemo(()=>{if(!v)return;const e=v.startsWith("#")?v:`var(${v})`;return"gradient"===s?{background:C?`linear-gradient(to right, transparent, ${e}, transparent)`:`linear-gradient(to bottom, transparent, ${e}, transparent)`}:{backgroundColor:e}},[v,s,C]);return k&&C?u.jsxs("div",o(i({ref:r,className:je("flex items-center",m&&`my-[var(--linear-spacing-${m})]`,E&&"linear-animate-in",n),role:x,"aria-label":N||("string"==typeof h?h:void 0)},w),{children:["left"!==y&&u.jsx("div",{className:je(Ye({orientation:"horizontal",variant:f?"gradient":s,thickness:d,spacing:"none"}),"flex-1"),style:L}),u.jsxs("div",{className:"flex items-center px-[var(--linear-spacing-md)] text-[var(--linear-color-text-secondary)] text-sm font-[var(--linear-font-weight-medium)]",children:[g&&u.jsx("span",{className:"flex items-center justify-center mr-2",children:p.isValidElement(g)?p.cloneElement(g,{className:je("w-4 h-4",null==(t=g.props)?void 0:t.className),"aria-hidden":"true"}):g}),h&&u.jsx("span",{children:h})]}),"right"!==y&&u.jsx("div",{className:je(Ye({orientation:"horizontal",variant:f?"gradient":s,thickness:d,spacing:"none"}),"flex-1"),style:L})]})):u.jsx("div",i({ref:r,className:je(Ye({orientation:l,variant:s,thickness:d,spacing:m}),E&&"linear-animate-in",n),style:L,role:x,"aria-label":N},w))});Xe.displayName="LinearSeparator",p.forwardRef((e,r)=>{var t=e,{title:a,description:n}=t,l=c(t,["title","description"]);return u.jsxs("div",{className:"flex flex-col space-y-2",children:[u.jsx(Xe,i({ref:r,label:a,variant:"gradient",spacing:"lg",role:"separator","aria-label":`${a} 섹션 구분`},l)),n&&u.jsx("p",{className:"text-center text-sm text-[var(--linear-color-text-tertiary)] px-4",children:n})]})}).displayName="LinearSectionSeparator",p.forwardRef((e,r)=>{var t=e,{iconType:a="chevron",className:n}=t,l=c(t,["iconType","className"]);const s={chevron:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),slash:u.jsx("span",{className:"text-[var(--linear-color-text-tertiary)]",children:"/"}),dot:u.jsx("span",{className:"text-[var(--linear-color-text-tertiary)]",children:"•"}),arrow:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})};return u.jsx("span",o(i({ref:r,className:je("inline-flex items-center justify-center text-[var(--linear-color-text-tertiary)] mx-2",n),role:"presentation","aria-hidden":"true"},l),{children:s[a]}))}).displayName="LinearBreadcrumbSeparator",p.forwardRef((e,r)=>{var t=e,{node:a,active:n=!1,completed:l=!1,className:s}=t,o=c(t,["node","active","completed","className"]);const d=l?"accent":n?"default":"subtle";return u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("div",{className:je("flex items-center justify-center w-8 h-8 rounded-full border-2 bg-[var(--linear-color-background)]",l&&"border-[var(--linear-color-accent)] bg-[var(--linear-color-accent)] text-white",n&&"border-[var(--linear-color-accent)] text-[var(--linear-color-accent)]",!n&&!l&&"border-[var(--linear-color-border-default)] text-[var(--linear-color-text-tertiary)]"),children:a||u.jsx("div",{className:je("w-2 h-2 rounded-full",l&&"bg-white",n&&"bg-[var(--linear-color-accent)]",!n&&!l&&"bg-[var(--linear-color-border-default)]")})}),u.jsx(Xe,i({ref:r,orientation:"vertical",variant:d,thickness:"thin",spacing:"none",className:je("h-8 my-2",s),role:"presentation"},o))]})}).displayName="LinearTimelineSeparator";const Ze=p.createContext(null),er=()=>{const e=p.useContext(Ze);if(!e)throw new Error("Form compound components must be used within Form.Root");return e};p.forwardRef(({title:e,description:r,children:t,className:a,"data-testid":n},l)=>u.jsxs("div",{ref:l,className:je("space-y-4",a),"data-testid":n,children:[e&&u.jsxs("div",{className:"space-y-1",children:[u.jsx("h3",{className:"text-lg font-medium",children:e}),r&&u.jsx("p",{className:"text-sm text-muted-foreground",children:r})]}),u.jsx("div",{className:"space-y-4",children:t})]})).displayName="FormGroup",p.forwardRef(({children:e,align:r="right",className:t,"data-testid":a},n)=>u.jsx("div",{ref:n,className:je("flex gap-3",{left:"justify-start",center:"justify-center",right:"justify-end"}[r],t),"data-testid":a,children:e})).displayName="FormActions",p.forwardRef(({children:e,variant:r="primary",size:t="md",disabled:a,loading:n,className:l,"data-testid":s},i)=>{const{formState:{isSubmitting:o,isValid:c}}=er(),d=a||o||n,m=o||n;return u.jsxs("button",{ref:i,type:"submit",disabled:d,className:je("inline-flex items-center justify-center rounded-md font-medium transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","disabled:pointer-events-none disabled:opacity-50",{primary:"bg-blue-600 text-white hover:bg-blue-700 disabled:bg-blue-300",secondary:"bg-gray-600 text-white hover:bg-gray-700 disabled:bg-gray-300",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:bg-gray-100"}[r],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[t],l),"data-testid":s,children:[m&&u.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e]})}).displayName="FormSubmit",p.forwardRef(({children:e,variant:r="outline",size:t="md",className:a,"data-testid":n},l)=>{const{reset:s}=er();return u.jsx("button",{ref:l,type:"button",onClick:()=>s(),className:je("inline-flex items-center justify-center rounded-md font-medium transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",{secondary:"bg-gray-600 text-white hover:bg-gray-700",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50",ghost:"text-gray-700 hover:bg-gray-100"}[r],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[t],a),"data-testid":n,children:e})}).displayName="FormReset";const rr=({name:e,value:r,options:t,onChange:a,error:n,required:l=!1,className:s="",direction:i="vertical","aria-label":o,"aria-describedby":c})=>{const d="vertical"===i?"space-y-3":"space-x-4 flex flex-wrap",m=n?`${e}-error`:void 0,h=[c,m].filter(Boolean).join(" ")||void 0;return u.jsxs("div",{className:s,children:[u.jsx("div",{className:d,role:"radiogroup","aria-label":o,"aria-describedby":h,"aria-required":l,"aria-invalid":!!n,children:t.map(t=>{const s=r===t.value,i=t.disabled;return u.jsxs(G.label,{className:`\n                relative flex items-start cursor-pointer p-4 rounded-lg border-2 transition-all duration-200\n                ${s?"border-elderberry-500 bg-elderberry-50":"border-elderberry-200 bg-white hover:border-elderberry-300"}\n                ${i?"opacity-50 cursor-not-allowed":"hover:bg-elderberry-25"}\n                ${n?"border-red-300":""}\n              `,whileHover:i?{}:{scale:1.02},whileTap:i?{}:{scale:.98},children:[u.jsx("input",{type:"radio",name:e,value:t.value,checked:s,onChange:()=>!i&&a(t.value),disabled:i,required:l,className:"sr-only","aria-describedby":t.description?`${e}-${t.value}-desc`:void 0}),u.jsx("div",{className:`\n                flex-shrink-0 w-5 h-5 rounded-full border-2 mr-4 mt-0.5 relative\n                ${s?"border-elderberry-500":"border-elderberry-300"}\n              `,children:s&&u.jsx(G.div,{className:"absolute inset-1 bg-elderberry-500 rounded-full",initial:{scale:0},animate:{scale:1},transition:{duration:.2}})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:`\n                  text-sm font-medium\n                  ${s?"text-elderberry-900":"text-elderberry-700"}\n                  ${i?"text-elderberry-400":""}\n                `,children:t.label}),t.description&&u.jsx("div",{id:`${e}-${t.value}-desc`,className:`\n                      text-xs mt-1\n                      ${s?"text-elderberry-600":"text-elderberry-500"}\n                      ${i?"text-elderberry-300":""}\n                    `,children:t.description})]}),s&&u.jsx(G.div,{className:"flex-shrink-0 ml-4",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{duration:.2},children:u.jsx("div",{className:"w-5 h-5 bg-elderberry-500 rounded-full flex items-center justify-center",children:u.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]},t.value)})}),n&&u.jsx(G.div,{id:m,className:"mt-2 text-sm text-red-600",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2},role:"alert","aria-live":"polite",children:n})]})},tr=({progress:e,steps:r=[],currentStep:t=0,showPercentage:a=!0,showSteps:n=!1,className:l=""})=>{const s=Math.max(0,Math.min(100,e));return u.jsxs("div",{className:`w-full ${l}`,children:[a&&u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-sm font-medium text-elderberry-700",children:"진행률"}),u.jsxs("span",{className:"text-sm font-semibold text-elderberry-900",children:[Math.round(s),"%"]})]}),u.jsx("div",{className:"w-full bg-elderberry-100 rounded-full h-3 overflow-hidden",children:u.jsx(G.div,{className:"h-full bg-gradient-to-r from-elderberry-500 to-elderberry-600 rounded-full",initial:{width:0},animate:{width:`${s}%`},transition:{duration:.8,ease:"easeOut"}})}),n&&r.length>0&&u.jsxs("div",{className:"mt-4",children:[u.jsx("div",{className:"flex justify-between items-center",children:r.map((e,r)=>u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("div",{className:`\n                    w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold\n                    transition-all duration-300\n                    ${r<=t?"bg-elderberry-600 text-white":"bg-elderberry-100 text-elderberry-400"}\n                  `,children:r+1}),u.jsx("span",{className:`\n                    mt-2 text-xs text-center max-w-16\n                    ${r<=t?"text-elderberry-700 font-medium":"text-elderberry-400"}\n                  `,children:e})]},r))}),u.jsxs("div",{className:"relative mt-2",children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-0.5 bg-elderberry-100"}),u.jsx(G.div,{className:"absolute top-0 left-0 h-0.5 bg-elderberry-600",initial:{width:0},animate:{width:r.length>1?t/(r.length-1)*100+"%":"0%"},transition:{duration:.8,ease:"easeOut"}})]})]})]})},ar=({title:e,description:r,keywords:t,ogTitle:a,ogDescription:n,ogImage:l="/og-image.jpg",canonicalUrl:s,noIndex:i=!1})=>{p.useEffect(()=>{const o="엘더베리",c="재외동포를 위한 한국 요양원 구인구직 매칭 서비스",d="해외 거주 재외동포와 한국 요양원을 연결하는 전문 매칭 플랫폼. 건강평가부터 시설매칭, 코디네이터 연결까지 원스톱 서비스 제공.";return document.title=e?`${e} | ${o}`:`${o} - ${c}`,nr("description",r||d),t&&nr("keywords",t),nr("robots",i?"noindex, nofollow":"index, follow"),lr("og:title",a||e||c),lr("og:description",n||r||d),lr("og:image",l),lr("og:url",s||window.location.href),nr("twitter:title",a||e||c),nr("twitter:description",n||r||d),nr("twitter:image",l),s&&sr(s),()=>{document.title=`${o} - ${c}`,nr("description",d),nr("robots","index, follow")}},[e,r,t,a,n,l,s,i])},nr=(e,r)=>{let t=document.querySelector(`meta[name="${e}"]`);t?t.content=r:(t=document.createElement("meta"),t.name=e,t.content=r,document.head.appendChild(t))},lr=(e,r)=>{let t=document.querySelector(`meta[property="${e}"]`);t?t.content=r:(t=document.createElement("meta"),t.setAttribute("property",e),t.content=r,document.head.appendChild(t))},sr=e=>{let r=document.querySelector('link[rel="canonical"]');r?r.href=e:(r=document.createElement("link"),r.rel="canonical",r.href=e,document.head.appendChild(r))},ir=(e,r)=>{const t=r||"structured-data",a=document.getElementById(t);a&&a.remove();const n=document.createElement("script");n.id=t,n.type="application/ld+json",n.textContent=JSON.stringify(e),document.head.appendChild(n)},or={healthAssessment:{title:"건강 평가",description:"재외동포를 위한 전문 건강 평가 서비스. ADL 평가부터 장기요양등급까지 체계적 건강 상태 진단.",keywords:"건강평가, ADL평가, 장기요양등급, 요양원, 재외동포",ogTitle:"건강 평가 - 엘더베리",canonicalUrl:"https://elderberry.co.kr/health-assessment"},facilitySearch:{title:"시설 검색",description:"전국 요양원 시설 검색 및 매칭 서비스. 지역별, 서비스별 맞춤 시설 추천.",keywords:"요양원검색, 시설매칭, 요양시설, 노인요양원, 재외동포",ogTitle:"시설 검색 - 엘더베리",canonicalUrl:"https://elderberry.co.kr/facility-search"}},cr=ne.create({baseURL:"http://localhost:8080/api/boards",timeout:1e4,headers:{"Content-Type":"application/json"}}),dr=ne.create({baseURL:"http://localhost:8080/api/posts",timeout:1e4,headers:{"Content-Type":"application/json"}}),mr=ne.create({baseURL:"http://localhost:8080/api/comments",timeout:1e4,headers:{"Content-Type":"application/json"}}),ur=ne.create({baseURL:"http://localhost:8080/api/files",timeout:3e4,headers:{"Content-Type":"multipart/form-data"}}),hr=e=>{const r=localStorage.getItem("accessToken");return r&&(e.headers.Authorization=`Bearer ${r}`),e};cr.interceptors.request.use(hr),dr.interceptors.request.use(hr),mr.interceptors.request.use(hr),ur.interceptors.request.use(hr);const pr=e=>{var r,t,a,n,l,s,i,o;const c={message:(null==(t=null==(r=e.response)?void 0:r.data)?void 0:t.message)||"네트워크 오류가 발생했습니다.",code:(null==(n=null==(a=e.response)?void 0:a.data)?void 0:n.code)||"NETWORK_ERROR",status:(null==(l=e.response)?void 0:l.status)||500,timestamp:(new Date).toISOString(),path:(null==(s=e.config)?void 0:s.url)||"",details:null==(o=null==(i=e.response)?void 0:i.data)?void 0:o.details};return Promise.reject(c)};[cr,dr,mr,ur].forEach(e=>{e.interceptors.response.use(e=>e,pr)});const gr={getBoards(){return d(this,null,function*(){return(yield cr.get("")).data})},getBoard(e){return d(this,null,function*(){return(yield cr.get(`/${e}`)).data})},createBoard(e){return d(this,null,function*(){return(yield cr.post("",e)).data})},updateBoard(e,r){return d(this,null,function*(){return(yield cr.put(`/${e}`,r)).data})},deleteBoard(e){return d(this,null,function*(){yield cr.delete(`/${e}`)})},getBoardStatistics(){return d(this,null,function*(){return(yield cr.get("/statistics")).data})}},yr={getPosts(){return d(this,arguments,function*(e={}){return(yield dr.get("",{params:e})).data})},getPost(e){return d(this,null,function*(){return(yield dr.get(`/${e}`)).data})},createPost(e){return d(this,null,function*(){return(yield dr.post("",e)).data})},updatePost(e,r){return d(this,null,function*(){return(yield dr.put(`/${e}`,r)).data})},deletePost(e){return d(this,null,function*(){yield dr.delete(`/${e}`)})},getMyPosts(){return d(this,arguments,function*(e={}){return(yield dr.get("/my",{params:e})).data})},incrementViewCount(e){return d(this,null,function*(){yield dr.post(`/${e}/view`)})},likePost(e){return d(this,null,function*(){return(yield dr.post(`/${e}/like`)).data})},unlikePost(e){return d(this,null,function*(){return(yield dr.delete(`/${e}/like`)).data})},checkPostLike(e){return d(this,null,function*(){return(yield dr.get(`/${e}/like/status`)).data})},getPopularPosts(e=10){return d(this,null,function*(){return(yield dr.get("/popular",{params:{limit:e}})).data})},getLatestPosts(e=10){return d(this,null,function*(){return(yield dr.get("/latest",{params:{limit:e}})).data})},getRecommendedPosts(e=10){return d(this,null,function*(){return(yield dr.get("/recommended",{params:{limit:e}})).data})}},br={getComments(e){return d(this,arguments,function*(e,r={}){return(yield mr.get(`/post/${e}`,{params:r})).data})},getComment(e){return d(this,null,function*(){return(yield mr.get(`/${e}`)).data})},createComment(e){return d(this,null,function*(){return(yield mr.post("",e)).data})},updateComment(e,r){return d(this,null,function*(){return(yield mr.put(`/${e}`,r)).data})},deleteComment(e){return d(this,null,function*(){yield mr.delete(`/${e}`)})},getMyComments(){return d(this,arguments,function*(e={}){return(yield mr.get("/my",{params:e})).data})},likeComment(e){return d(this,null,function*(){return(yield mr.post(`/${e}/like`)).data})},unlikeComment(e){return d(this,null,function*(){return(yield mr.delete(`/${e}/like`)).data})},checkCommentLike(e){return d(this,null,function*(){return(yield mr.get(`/${e}/like/status`)).data})}},fr={uploadFile(e){return d(this,null,function*(){const r=new FormData;return r.append("file",e),(yield ur.post("/upload",r)).data})},uploadFiles(e){return d(this,null,function*(){const r=new FormData;return e.forEach(e=>{r.append("files",e)}),(yield ur.post("/upload/multiple",r)).data})},getFileDownloadUrl:e=>`/api/files/download/${e}`,getFileInfo(e){return d(this,null,function*(){return(yield ur.get(`/${e}`)).data})},deleteFile(e){return d(this,null,function*(){yield ur.delete(`/${e}`)})}},vr={page:0,size:20,sortBy:"createdAt",sortDirection:"desc"},xr={boards:[],currentBoard:null,boardsLoading:!1,boardsError:null,posts:[],currentPost:null,postsLoading:!1,postsError:null,postsTotalPages:0,postsCurrentPage:0,postsTotalElements:0,comments:[],commentsLoading:!1,commentsError:null,commentsTotalPages:0,commentsCurrentPage:0,statistics:null,popularPosts:[],statisticsLoading:!1,statisticsError:null,searchParams:vr,likedPosts:new Set,likedComments:new Set},Nr=m()((e,r)=>o(i({},xr),{loadBoards:()=>d(null,null,function*(){try{e({boardsLoading:!0,boardsError:null});const r=yield gr.getBoards();e({boards:r,boardsLoading:!1})}catch(r){throw e({boardsLoading:!1,boardsError:r.message||"게시판 목록을 불러오는데 실패했습니다."}),r}}),loadBoard:r=>d(null,null,function*(){try{e({boardsLoading:!0,boardsError:null});const t=yield gr.getBoard(r);e({currentBoard:t,boardsLoading:!1})}catch(t){throw e({boardsLoading:!1,boardsError:t.message||"게시판 정보를 불러오는데 실패했습니다."}),t}}),loadPosts:t=>d(null,null,function*(){try{e({postsLoading:!0,postsError:null});const a=i(i({},r().searchParams),t),n=yield yr.getPosts(a);e({posts:n.content,postsTotalPages:n.totalPages,postsCurrentPage:n.page,postsTotalElements:n.totalElements,searchParams:a,postsLoading:!1})}catch(a){throw e({postsLoading:!1,postsError:a.message||"게시글 목록을 불러오는데 실패했습니다."}),a}}),loadPost:r=>d(null,null,function*(){try{e({postsLoading:!0,postsError:null});const a=yield yr.getPost(r);yield yr.incrementViewCount(r);try{(yield yr.checkPostLike(r)).liked&&e(e=>({likedPosts:new Set([...e.likedPosts,r])}))}catch(t){}e({currentPost:o(i({},a),{viewCount:a.viewCount+1}),postsLoading:!1})}catch(t){throw e({postsLoading:!1,postsError:t.message||"게시글을 불러오는데 실패했습니다."}),t}}),createPost:r=>d(null,null,function*(){try{e({postsLoading:!0,postsError:null});const t=yield yr.createPost(r);return e(e=>({posts:[t,...e.posts],postsTotalElements:e.postsTotalElements+1,postsLoading:!1})),t}catch(t){throw e({postsLoading:!1,postsError:t.message||"게시글 작성에 실패했습니다."}),t}}),updatePost:(r,t)=>d(null,null,function*(){try{e({postsLoading:!0,postsError:null});const a=yield yr.updatePost(r,t);return e(e=>{var t;return{posts:e.posts.map(e=>e.id===r?a:e),currentPost:(null==(t=e.currentPost)?void 0:t.id)===r?a:e.currentPost,postsLoading:!1}}),a}catch(a){throw e({postsLoading:!1,postsError:a.message||"게시글 수정에 실패했습니다."}),a}}),deletePost:r=>d(null,null,function*(){try{e({postsLoading:!0,postsError:null}),yield yr.deletePost(r),e(e=>{var t;return{posts:e.posts.filter(e=>e.id!==r),currentPost:(null==(t=e.currentPost)?void 0:t.id)===r?null:e.currentPost,postsTotalElements:e.postsTotalElements-1,postsLoading:!1}})}catch(t){throw e({postsLoading:!1,postsError:t.message||"게시글 삭제에 실패했습니다."}),t}}),loadMyPosts:t=>d(null,null,function*(){try{e({postsLoading:!0,postsError:null});const a=i(i({},r().searchParams),t),n=yield yr.getMyPosts(a);e({posts:n.content,postsTotalPages:n.totalPages,postsCurrentPage:n.page,postsTotalElements:n.totalElements,searchParams:a,postsLoading:!1})}catch(a){throw e({postsLoading:!1,postsError:a.message||"내 게시글을 불러오는데 실패했습니다."}),a}}),incrementPostView:r=>d(null,null,function*(){try{yield yr.incrementViewCount(r),e(e=>{var t;return{posts:e.posts.map(e=>e.id===r?o(i({},e),{viewCount:e.viewCount+1}):e),currentPost:(null==(t=e.currentPost)?void 0:t.id)===r?o(i({},e.currentPost),{viewCount:e.currentPost.viewCount+1}):e.currentPost}})}catch(t){}}),loadComments:(r,t=0,a=20)=>d(null,null,function*(){try{e({commentsLoading:!0,commentsError:null});const n=yield br.getComments(r,{page:t,size:a});e({comments:n.content,commentsTotalPages:n.totalPages,commentsCurrentPage:n.page,commentsLoading:!1})}catch(n){throw e({commentsLoading:!1,commentsError:n.message||"댓글을 불러오는데 실패했습니다."}),n}}),createComment:r=>d(null,null,function*(){try{e({commentsLoading:!0,commentsError:null});const t=yield br.createComment(r);return e(e=>{var a;return{comments:[...e.comments,t],commentsLoading:!1,currentPost:(null==(a=e.currentPost)?void 0:a.id)===r.postId?o(i({},e.currentPost),{commentCount:e.currentPost.commentCount+1}):e.currentPost,posts:e.posts.map(e=>e.id===r.postId?o(i({},e),{commentCount:e.commentCount+1}):e)}}),t}catch(t){throw e({commentsLoading:!1,commentsError:t.message||"댓글 작성에 실패했습니다."}),t}}),updateComment:(r,t)=>d(null,null,function*(){try{e({commentsLoading:!0,commentsError:null});const a=yield br.updateComment(r,t);return e(e=>({comments:e.comments.map(e=>e.id===r?a:e),commentsLoading:!1})),a}catch(a){throw e({commentsLoading:!1,commentsError:a.message||"댓글 수정에 실패했습니다."}),a}}),deleteComment:r=>d(null,null,function*(){try{e({commentsLoading:!0,commentsError:null}),yield br.deleteComment(r),e(e=>{const t=e.comments.find(e=>e.id===r);return{comments:e.comments.filter(e=>e.id!==r),commentsLoading:!1,currentPost:e.currentPost&&(null==t?void 0:t.postId)===e.currentPost.id?o(i({},e.currentPost),{commentCount:e.currentPost.commentCount-1}):e.currentPost,posts:e.posts.map(e=>(null==t?void 0:t.postId)===e.id?o(i({},e),{commentCount:e.commentCount-1}):e)}})}catch(t){throw e({commentsLoading:!1,commentsError:t.message||"댓글 삭제에 실패했습니다."}),t}}),togglePostLike:t=>d(null,null,function*(){try{const{likedPosts:a}=r(),n=a.has(t)?yield yr.unlikePost(t):yield yr.likePost(t),l=new Set(a);n.liked?l.add(t):l.delete(t),e(e=>{var r;return{likedPosts:l,posts:e.posts.map(e=>e.id===t?o(i({},e),{likeCount:n.likeCount}):e),currentPost:(null==(r=e.currentPost)?void 0:r.id)===t?o(i({},e.currentPost),{likeCount:n.likeCount}):e.currentPost}})}catch(a){throw a}}),toggleCommentLike:t=>d(null,null,function*(){try{const{likedComments:a}=r(),n=a.has(t)?yield br.unlikeComment(t):yield br.likeComment(t),l=new Set(a);n.liked?l.add(t):l.delete(t),e(e=>({likedComments:l,comments:e.comments.map(e=>e.id===t?o(i({},e),{likeCount:n.likeCount}):e)}))}catch(a){throw a}}),loadStatistics:()=>d(null,null,function*(){try{e({statisticsLoading:!0,statisticsError:null});const r=yield gr.getBoardStatistics();e({statistics:r,statisticsLoading:!1})}catch(r){throw e({statisticsLoading:!1,statisticsError:r.message||"통계를 불러오는데 실패했습니다."}),r}}),loadPopularPosts:(r=10)=>d(null,null,function*(){try{e({statisticsLoading:!0,statisticsError:null});const t=yield yr.getPopularPosts(r);e({popularPosts:t,statisticsLoading:!1})}catch(t){throw e({statisticsLoading:!1,statisticsError:t.message||"인기 게시글을 불러오는데 실패했습니다."}),t}}),setSearchParams:r=>{e(e=>({searchParams:i(i({},e.searchParams),r)}))},resetSearchParams:()=>{e({searchParams:vr})},clearBoardsError:()=>{e({boardsError:null})},clearPostsError:()=>{e({postsError:null})},clearCommentsError:()=>{e({commentsError:null})},clearStatisticsError:()=>{e({statisticsError:null})},reset:()=>{e(xr)}}));var wr=(e=>(e.GENERAL="GENERAL",e.NOTICE="NOTICE",e.FAQ="FAQ",e.QNA="QNA",e.REVIEW="REVIEW",e.FREE="FREE",e.JOB_DISCUSSION="JOB_DISCUSSION",e.TIPS="TIPS",e.NEWS="NEWS",e))(wr||{});const Er={[wr.GENERAL]:"일반",[wr.NOTICE]:"공지사항",[wr.FAQ]:"FAQ",[wr.QNA]:"Q&A",[wr.REVIEW]:"후기",[wr.FREE]:"자유",[wr.JOB_DISCUSSION]:"구인구직 토론",[wr.TIPS]:"팁과 노하우",[wr.NEWS]:"업계 소식"},kr=e=>{const r=new Date(e),t=(new Date).getTime()-r.getTime(),a=Math.floor(t/36e5),n=Math.floor(a/24);return a<1?"방금 전":a<24?`${a}시간 전`:n<7?`${n}일 전`:r.toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"})},Cr=({board:e})=>u.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},transition:{duration:.2},children:u.jsx(f,{to:`/boards/${e.id}`,children:u.jsx($e,{className:"hover:shadow-lg transition-shadow",children:u.jsxs(Be,{className:"p-6",children:[u.jsx("div",{className:"flex items-start justify-between mb-3",children:u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-elderberry-100 text-elderberry-700",children:Er[e.type]})]}),u.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description})]})}),u.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("span",{className:"flex items-center",children:[u.jsx(x,{className:"w-4 h-4 mr-1"}),e.postCount,"개 글"]}),e.lastPostDate&&u.jsxs("span",{className:"flex items-center",children:[u.jsx(N,{className:"w-4 h-4 mr-1"}),kr(e.lastPostDate)]})]}),u.jsx(S,{className:"w-4 h-4 text-gray-400"})]})]})})})}),Lr=({post:e})=>u.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},transition:{duration:.2},children:u.jsx(f,{to:`/boards/${e.boardId}/posts/${e.id}`,children:u.jsx($e,{className:"hover:shadow-lg transition-shadow",children:u.jsxs(Be,{className:"p-4",children:[u.jsx("div",{className:"flex items-start justify-between mb-3",children:u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.isPinned&&u.jsx(O,{className:"w-4 h-4 text-elderberry-600"}),e.isNotice&&u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"공지"}),u.jsx("span",{className:"text-xs text-gray-500",children:e.boardName})]}),u.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2 line-clamp-1",children:e.title}),e.summary&&u.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.summary})]})}),e.tags&&e.tags.length>0&&u.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[e.tags.slice(0,3).map((e,r)=>u.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-600",children:[u.jsx(P,{className:"w-3 h-3 mr-1"}),e]},r)),e.tags.length>3&&u.jsxs("span",{className:"text-xs text-gray-500",children:["+",e.tags.length-3]})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("span",{children:e.isAnonymous?"익명":e.authorName}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(A,{className:"w-3 h-3 mr-1"}),kr(e.createdAt)]})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("span",{className:"flex items-center",children:[u.jsx(L,{className:"w-3 h-3 mr-1"}),e.viewCount]}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(R,{className:"w-3 h-3 mr-1"}),e.likeCount]}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(x,{className:"w-3 h-3 mr-1"}),e.commentCount]})]})]})]})})})}),Rr=Object.freeze(Object.defineProperty({__proto__:null,default:function(){ar({title:"게시판",description:"요양원 관련 정보 공유, Q&A, 후기, 팁과 노하우를 나누는 커뮤니티 게시판",keywords:"게시판, 커뮤니티, 요양원정보, Q&A, 후기, 팁과노하우",ogTitle:"게시판 - 엘더베리",canonicalUrl:"https://elderberry.co.kr/boards"}),p.useEffect(()=>{ir({"@context":"https://schema.org","@type":"DiscussionForumPosting",name:"엘더베리 커뮤니티 게시판",description:"요양원 관련 정보 공유, Q&A, 후기, 팁과 노하우를 나누는 커뮤니티 포럼",about:{"@type":"Thing",name:"요양원 서비스"},audience:{"@type":"Audience",audienceType:"재외동포, 요양원 관련자"},provider:{"@type":"Organization",name:"엘더베리"}},"forum-data"),ir({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"홈",item:"https://elderberry.co.kr"},{"@type":"ListItem",position:2,name:"게시판",item:"https://elderberry.co.kr/boards"}]},"board-breadcrumb")},[]);const[e,r]=b(),{user:t}=Oe(),{boards:a,posts:n,popularPosts:l,boardsLoading:s,postsLoading:c,boardsError:d,postsError:m,postsTotalPages:h,postsCurrentPage:g,postsTotalElements:y,searchParams:S,loadBoards:O,loadPosts:P,loadPopularPosts:A,setSearchParams:j,clearBoardsError:I,clearPostsError:$}=Nr(),[_,M]=p.useState(e.get("keyword")||""),[D,B]=p.useState(!1),[z,U]=p.useState(""),[K,F]=p.useState("boards"),V=t&&[Pe.CAREGIVER,Pe.EMPLOYER,Pe.COORDINATOR,Pe.ADMIN].includes(t.role);p.useEffect(()=>{O(),A();const r={};e.get("keyword")&&(r.keyword=e.get("keyword")),e.get("boardType")&&(r.boardType=e.get("boardType")),e.get("page")&&(r.page=parseInt(e.get("page"))||0),P(r)},[e]);const H=()=>{const e={page:0,keyword:_||void 0,boardType:z||void 0};j(e),P(e);const t=new URLSearchParams;_&&t.set("keyword",_),z&&t.set("boardType",z),r(t)},W=t=>{const a=o(i({},S),{page:t});j(a),P(a);const n=new URLSearchParams(e);n.set("page",t.toString()),r(n)},J=()=>{M(""),U(""),j({page:0}),P({page:0}),r({})};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"커뮤니티"}),u.jsx("p",{className:"text-gray-600 mt-1",children:"다양한 정보를 공유하고 소통해보세요"})]}),V&&u.jsx("div",{className:"mt-4 sm:mt-0",children:u.jsx(f,{to:"/boards/create-post",children:u.jsxs(X,{variant:"primary",children:[u.jsx(v,{className:"w-4 h-4 mr-2"}),"글 작성하기"]})})})]}),u.jsx("div",{className:"border-b border-gray-200",children:u.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"boards",label:"게시판",icon:x},{key:"posts",label:"최신 글",icon:N},{key:"popular",label:"인기 글",icon:w}].map(({key:e,label:r,icon:t})=>u.jsxs("button",{onClick:()=>F(e),className:`\n                flex items-center py-4 px-1 border-b-2 font-medium text-sm transition-colors\n                ${K===e?"border-elderberry-500 text-elderberry-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}\n              `,children:[u.jsx(t,{className:"w-4 h-4 mr-2"}),r]},e))})}),("posts"===K||"popular"===K)&&u.jsx($e,{children:u.jsx(Be,{className:"p-6",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex space-x-4",children:[u.jsx("div",{className:"flex-1",children:u.jsxs("div",{className:"relative",children:[u.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"제목, 내용, 작성자 검색...",value:_,onChange:e=>M(e.target.value),onKeyPress:e=>"Enter"===e.key&&H(),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500"})]})}),u.jsxs(X,{variant:"outline",onClick:()=>B(!D),className:"flex items-center",children:[u.jsx(k,{className:"w-4 h-4 mr-2"}),"필터"]}),u.jsx(X,{variant:"primary",onClick:H,children:"검색"})]}),D&&u.jsxs(G.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-gray-200 pt-4",children:[u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"게시판 타입"}),u.jsxs("select",{value:z,onChange:e=>U(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500",children:[u.jsx("option",{value:"",children:"전체 게시판"}),Object.entries(Er).map(([e,r])=>u.jsx("option",{value:e,children:r},e))]})]})}),u.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[u.jsx(X,{variant:"outline",onClick:J,children:"초기화"}),u.jsx(X,{variant:"primary",onClick:H,children:"필터 적용"})]})]})]})})}),(d||m)&&u.jsxs(G.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[u.jsx(C,{className:"w-5 h-5 flex-shrink-0"}),u.jsx("span",{className:"text-sm",children:d||m}),u.jsx("button",{onClick:()=>{I(),$()},className:"ml-auto text-red-600 hover:text-red-800",children:"✕"})]}),"boards"===K&&u.jsx("div",{children:s?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,r)=>u.jsx("div",{className:"animate-pulse",children:u.jsx($e,{children:u.jsxs(Be,{className:"p-6",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-2"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3 mb-4"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})})},r))}):a.length>0?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>u.jsx(Cr,{board:e},e.id))}):u.jsxs("div",{className:"text-center py-12",children:[u.jsx(x,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"게시판이 없습니다"}),u.jsx("p",{className:"text-gray-600",children:"아직 생성된 게시판이 없습니다."})]})}),"posts"===K&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("p",{className:"text-sm text-gray-600",children:["총 ",u.jsx("span",{className:"font-semibold text-elderberry-600",children:y}),"개의 게시글이 있습니다",_&&u.jsxs("span",{children:[" ('",_,"' 검색 결과)"]})]})}),c?u.jsx("div",{className:"space-y-4",children:[...Array(5)].map((e,r)=>u.jsx("div",{className:"animate-pulse",children:u.jsx($e,{children:u.jsxs(Be,{className:"p-4",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-3"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-2"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3 mb-3"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]})})},r))}):n.length>0?u.jsx("div",{className:"space-y-4",children:n.map(e=>u.jsx(Lr,{post:e},e.id))}):u.jsxs("div",{className:"text-center py-12",children:[u.jsx(x,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"게시글이 없습니다"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"검색 조건에 맞는 게시글이 없습니다"}),u.jsx(X,{variant:"outline",onClick:J,children:"검색 조건 초기화"})]}),h>1&&u.jsx("div",{className:"flex justify-center",children:u.jsxs("div",{className:"flex space-x-2",children:[u.jsx(X,{variant:"outline",disabled:0===g,onClick:()=>W(g-1),children:"이전"}),[...Array(Math.min(5,h))].map((e,r)=>{const t=Math.max(0,Math.min(g-2,h-5))+r;return t>=h?null:u.jsx(X,{variant:t===g?"primary":"outline",onClick:()=>W(t),children:t+1},t)}),u.jsx(X,{variant:"outline",disabled:g>=h-1,onClick:()=>W(g+1),children:"다음"})]})})]}),"popular"===K&&u.jsx("div",{className:"space-y-4",children:l.length>0?u.jsx("div",{className:"space-y-4",children:l.map((e,r)=>u.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*r},children:u.jsx(f,{to:`/boards/posts/${e.id}`,children:u.jsx($e,{className:"hover:shadow-lg transition-shadow",children:u.jsx(Be,{className:"p-4",children:u.jsxs("div",{className:"flex items-start space-x-4",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("div",{className:"w-8 h-8 bg-elderberry-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-bold text-elderberry-600",children:r+1})})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:e.title}),"up"===e.trend&&u.jsx(w,{className:"w-4 h-4 text-green-500"})]}),u.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[u.jsx("span",{children:e.boardName}),u.jsx("span",{children:e.authorName}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(L,{className:"w-3 h-3 mr-1"}),e.viewCount]}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(R,{className:"w-3 h-3 mr-1"}),e.likeCount]}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(x,{className:"w-3 h-3 mr-1"}),e.commentCount]})]})]})]})})})})},e.id))}):u.jsxs("div",{className:"text-center py-12",children:[u.jsx(T,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"인기 게시글이 없습니다"}),u.jsx("p",{className:"text-gray-600",children:"아직 인기 게시글이 없습니다."})]})})]})}},Symbol.toStringTag,{value:"Module"})),Tr=e=>new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),Sr=({comment:e,level:r,onReply:t,onEdit:a,onDelete:n,onLike:l,isLiked:s})=>{const{user:i}=Oe(),[o,c]=p.useState(!1),d=(null==i?void 0:i.id)===e.authorId,m=(null==i?void 0:i.role)===Pe.ADMIN||(null==i?void 0:i.role)===Pe.COORDINATOR;return u.jsx("div",{className:r>0?"ml-8 border-l-2 border-gray-100 pl-4":"",children:u.jsxs(G.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-lg p-4 mb-4 border border-gray-200",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-8 h-8 bg-elderberry-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-semibold text-elderberry-600",children:e.isAnonymous?"익":e.authorName.charAt(0)})}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"font-medium text-gray-900",children:e.isAnonymous?"익명":e.authorName}),u.jsx("span",{className:"text-xs text-gray-500",children:e.authorRole})]}),u.jsx("span",{className:"text-xs text-gray-500",children:Tr(e.createdAt)})]})]}),(d||m)&&u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>c(!o),className:"p-1 rounded-full hover:bg-gray-100",children:u.jsx(K,{className:"w-4 h-4 text-gray-400"})}),u.jsx(Y,{children:o&&u.jsxs(G.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"absolute right-0 mt-2 w-32 bg-white rounded-md shadow-lg border border-gray-200 z-10",children:[d&&u.jsxs("button",{onClick:()=>{a(e),c(!1)},className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[u.jsx(D,{className:"w-3 h-3 mr-2"}),"수정"]}),(d||m)&&u.jsxs("button",{onClick:()=>{n(e.id),c(!1)},className:"flex items-center w-full px-3 py-2 text-sm text-red-600 hover:bg-red-50",children:[u.jsx(B,{className:"w-3 h-3 mr-2"}),"삭제"]})]})})]})]}),u.jsx("div",{className:"prose prose-sm max-w-none mb-4",children:u.jsx("div",{className:"whitespace-pre-wrap text-gray-700",children:e.content})}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("button",{onClick:()=>l(e.id),className:"flex items-center space-x-1 text-sm transition-colors "+(s?"text-red-500":"text-gray-500 hover:text-red-500"),children:[u.jsx(R,{className:"w-4 h-4 "+(s?"fill-current":"")}),u.jsx("span",{children:e.likeCount})]}),u.jsxs("button",{onClick:()=>t(e.id),className:"flex items-center space-x-1 text-sm text-gray-500 hover:text-elderberry-600",children:[u.jsx(F,{className:"w-4 h-4"}),u.jsx("span",{children:"답글"})]})]}),e.replies&&e.replies.length>0&&u.jsx("div",{className:"mt-4",children:e.replies.map(e=>u.jsx(Sr,{comment:e,level:r+1,onReply:t,onEdit:a,onDelete:n,onLike:l,isLiked:!1},e.id))})]})})},Or=({onSubmit:e,parentId:r,onCancel:t,placeholder:a="댓글을 작성하세요..."})=>{const[n,l]=p.useState(""),[s,i]=p.useState(!1),[o,c]=p.useState(!1);return u.jsxs(G.form,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},onSubmit:a=>d(null,null,function*(){if(a.preventDefault(),n.trim())try{c(!0),yield e({postId:0,parentId:r,content:n.trim(),isAnonymous:s}),l(""),i(!1),t&&t()}catch(o){}finally{c(!1)}else alert("댓글 내용을 입력해주세요.")}),className:"bg-gray-50 rounded-lg p-4 space-y-4",children:[u.jsx("textarea",{value:n,onChange:e=>l(e.target.value),placeholder:a,className:"w-full h-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500 resize-none",required:!0}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:s,onChange:e=>i(e.target.checked),className:"w-4 h-4 text-elderberry-600 border-gray-300 rounded focus:ring-elderberry-500"}),u.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"익명으로 작성"})]}),u.jsxs("div",{className:"flex space-x-2",children:[t&&u.jsx(X,{type:"button",variant:"outline",onClick:t,children:"취소"}),u.jsxs(X,{type:"submit",variant:"primary",loading:o,children:[o?"작성 중...":"댓글 작성",u.jsx(U,{className:"w-4 h-4 ml-2"})]})]})]})]})},Pr=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{boardId:e,postId:r}=j(),t=I(),{user:a}=Oe(),{currentPost:n,comments:l,postsLoading:s,commentsLoading:c,postsError:m,commentsError:h,likedPosts:g,likedComments:y,loadPost:b,loadComments:v,createComment:N,deletePost:w,togglePostLike:E,toggleCommentLike:k,clearPostsError:T,clearCommentsError:S}=Nr(),[U,K]=p.useState(!1),[F,V]=p.useState(null),H=parseInt(r||"0"),W=n&&(null==a?void 0:a.id)===n.authorId,J=(null==a?void 0:a.role)===Pe.ADMIN||(null==a?void 0:a.role)===Pe.COORDINATOR,q=a&&[Pe.CAREGIVER,Pe.EMPLOYER,Pe.COORDINATOR,Pe.ADMIN].includes(a.role),Q=g.has(H);p.useEffect(()=>{H&&(b(H),v(H))},[H]);const G=e=>d(null,null,function*(){n&&(yield N(o(i({},e),{postId:n.id})),K(!1),V(null))});return s?u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-8"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"h-64 bg-gray-200 rounded"}),u.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})]})}):m||!n?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(C,{className:"w-16 h-16 text-red-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"게시글을 찾을 수 없습니다"}),u.jsx("p",{className:"text-gray-600 mb-4",children:m||"요청한 게시글이 존재하지 않거나 삭제되었습니다."}),u.jsxs("div",{className:"space-x-3",children:[u.jsxs(X,{variant:"outline",onClick:()=>t(-1),children:[u.jsx($,{className:"w-4 h-4 mr-2"}),"뒤로 가기"]}),u.jsx(f,{to:"/boards",children:u.jsx(X,{variant:"primary",children:"게시판 목록"})})]})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(X,{variant:"outline",onClick:()=>t(-1),className:"flex items-center",children:[u.jsx($,{className:"w-4 h-4 mr-2"}),"뒤로"]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs(X,{variant:"outline",onClick:()=>d(null,null,function*(){if(navigator.share)try{yield navigator.share({title:null==n?void 0:n.title,text:null==n?void 0:n.content,url:window.location.href})}catch(e){}else navigator.clipboard.writeText(window.location.href),alert("링크가 클립보드에 복사되었습니다!")}),children:[u.jsx(_,{className:"w-4 h-4 mr-2"}),"공유"]}),u.jsxs(X,{variant:"outline",children:[u.jsx(M,{className:"w-4 h-4 mr-2"}),"북마크"]}),(W||J)&&u.jsxs(u.Fragment,{children:[u.jsx(f,{to:`/boards/${e}/posts/${n.id}/edit`,children:u.jsxs(X,{variant:"outline",children:[u.jsx(D,{className:"w-4 h-4 mr-2"}),"수정"]})}),u.jsxs(X,{variant:"outline",onClick:()=>d(null,null,function*(){if(n&&window.confirm("정말로 이 게시글을 삭제하시겠습니까?"))try{yield w(n.id),t(`/boards/${e||""}`)}catch(r){}}),children:[u.jsx(B,{className:"w-4 h-4 mr-2"}),"삭제"]})]})]})]}),u.jsx($e,{children:u.jsxs(Be,{className:"p-6",children:[u.jsxs("div",{className:"border-b border-gray-200 pb-6 mb-6",children:[u.jsx("div",{className:"flex items-start justify-between mb-4",children:u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[n.isPinned&&u.jsx(O,{className:"w-4 h-4 text-elderberry-600"}),n.isNotice&&u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"공지"}),u.jsx("span",{className:"text-sm text-gray-500",children:n.boardName})]}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:n.title}),u.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-8 h-8 bg-elderberry-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-semibold text-elderberry-600",children:n.isAnonymous?"익":n.authorName.charAt(0)})}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:n.isAnonymous?"익명":n.authorName}),u.jsx("span",{className:"text-xs text-gray-500 ml-2",children:n.authorRole})]})]}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(A,{className:"w-4 h-4 mr-1"}),Tr(n.createdAt)]})]})]})}),u.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[u.jsxs("span",{className:"flex items-center",children:[u.jsx(L,{className:"w-4 h-4 mr-1"}),"조회 ",n.viewCount]}),u.jsxs("button",{onClick:()=>E(n.id),className:"flex items-center transition-colors "+(Q?"text-red-500":"hover:text-red-500"),children:[u.jsx(R,{className:"w-4 h-4 mr-1 "+(Q?"fill-current":"")}),"좋아요 ",n.likeCount]}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(x,{className:"w-4 h-4 mr-1"}),"댓글 ",n.commentCount]})]})]}),u.jsx("div",{className:"prose max-w-none mb-6",children:u.jsx("div",{className:"whitespace-pre-wrap text-gray-700",children:n.content})}),n.attachments&&n.attachments.length>0&&u.jsxs("div",{className:"border-t border-gray-200 pt-6 mb-6",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"첨부파일"}),u.jsx("div",{className:"space-y-2",children:n.attachments.map(e=>u.jsxs("a",{href:e.downloadUrl,download:e.originalFileName,className:"flex items-center space-x-2 text-sm text-elderberry-600 hover:text-elderberry-800",children:[u.jsx(z,{className:"w-4 h-4"}),u.jsx("span",{children:e.originalFileName}),u.jsxs("span",{className:"text-xs text-gray-500",children:["(",(e.fileSize/1024/1024).toFixed(1),"MB)"]})]},e.id))})]}),n.tags&&n.tags.length>0&&u.jsx("div",{className:"border-t border-gray-200 pt-6",children:u.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map((e,r)=>u.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-elderberry-100 text-elderberry-700",children:[u.jsx(P,{className:"w-3 h-3 mr-1"}),e]},r))})})]})}),u.jsxs($e,{children:[u.jsx(_e,{children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(Me,{children:["댓글 ",n.commentCount,"개"]}),q&&u.jsxs(X,{variant:"outline",onClick:()=>K(!U),children:[u.jsx(x,{className:"w-4 h-4 mr-2"}),"댓글 작성"]})]})}),u.jsxs(Be,{children:[u.jsx(Y,{children:U&&q&&u.jsx("div",{className:"mb-6",children:u.jsx(Or,{onSubmit:G,onCancel:()=>K(!1)})})}),c?u.jsx("div",{className:"space-y-4",children:[...Array(3)].map((e,r)=>u.jsx("div",{className:"animate-pulse",children:u.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-2"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})},r))}):l.length>0?u.jsxs("div",{className:"space-y-4",children:[l.map(e=>u.jsx(Sr,{comment:e,level:0,onReply:e=>V(e),onEdit:e=>{},onDelete:e=>d(null,null,function*(){window.confirm("댓글을 삭제하시겠습니까?")}),onLike:e=>k(e),isLiked:y.has(e.id)},e.id)),u.jsx(Y,{children:F&&q&&u.jsx("div",{className:"ml-8",children:u.jsx(Or,{onSubmit:e=>G(o(i({},e),{parentId:F})),parentId:F,onCancel:()=>V(null),placeholder:"답글을 작성하세요..."})})})]}):u.jsxs("div",{className:"text-center py-8",children:[u.jsx(x,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"아직 댓글이 없습니다"}),q&&u.jsx(X,{variant:"outline",onClick:()=>K(!0),children:"첫 댓글을 작성해보세요"})]})]})]})]})}},Symbol.toStringTag,{value:"Module"})),Ar=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const e=I(),[r]=b(),{user:t}=Oe(),{boards:a,boardsLoading:n,postsLoading:l,boardsError:s,postsError:c,loadBoards:m,createPost:h,clearBoardsError:g,clearPostsError:y}=Nr(),[f,v]=p.useState(parseInt(r.get("boardId")||"0")||0),[x,N]=p.useState(""),[w,E]=p.useState(""),[k,R]=p.useState(!1),[T,S]=p.useState(!1),[A,j]=p.useState(!1),[_,M]=p.useState(""),[D,B]=p.useState([]),[z,U]=p.useState([]),K=(null==t?void 0:t.role)===Pe.ADMIN||(null==t?void 0:t.role)===Pe.COORDINATOR,F=(null==t?void 0:t.role)===Pe.ADMIN||(null==t?void 0:t.role)===Pe.COORDINATOR;p.useEffect(()=>{m()},[]),p.useEffect(()=>{a.length>0&&0===f&&v(a[0].id)},[a,f]);const Y=()=>{const e=_.trim();e&&!D.includes(e)&&D.length<10&&(B([...D,e]),M(""))},Z=(e,r)=>d(null,null,function*(){if(!e.file)return null;try{U(e=>e.map((e,t)=>t===r?o(i({},e),{uploading:!0}):e));const t=yield fr.uploadFile(e.file);return U(e=>e.map((e,a)=>a===r?o(i({},e),{id:t.id,uploading:!1,uploaded:!0,url:t.downloadUrl}):e)),t.id}catch(t){return U(e=>e.map((e,t)=>t===r?o(i({},e),{uploading:!1,uploaded:!1}):e)),alert(`파일 업로드에 실패했습니다: ${e.name}`),null}}),ee=e=>{if(0===e)return"0 Bytes";const r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(2))+" "+["Bytes","KB","MB","GB"][r]};return n?u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),u.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs(X,{variant:"outline",onClick:()=>e(-1),className:"flex items-center",children:[u.jsx($,{className:"w-4 h-4 mr-2"}),"뒤로"]}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"게시글 작성"})]}),u.jsx("div",{className:"flex items-center space-x-3",children:u.jsxs(X,{variant:"outline",onClick:()=>{},children:[u.jsx(L,{className:"w-4 h-4 mr-2"}),"미리보기"]})})]}),(s||c)&&u.jsxs(G.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[u.jsx(C,{className:"w-5 h-5 flex-shrink-0"}),u.jsx("span",{className:"text-sm",children:s||c}),u.jsx("button",{onClick:()=>{g(),y()},className:"ml-auto text-red-600 hover:text-red-800",children:"✕"})]}),u.jsxs("form",{onSubmit:r=>d(null,null,function*(){if(r.preventDefault(),f)if(x.trim())if(w.trim())try{const r=[];for(let e=0;e<z.length;e++){const t=z[e];if(t.file&&!t.uploaded){const a=yield Z(t,e);a&&r.push(a)}else t.id&&r.push(t.id)}const t={boardId:f,title:x.trim(),content:w.trim(),isAnonymous:k,isNotice:!!K&&T,isPinned:!!F&&A,tags:D.length>0?D:void 0,attachmentIds:r.length>0?r:void 0},a=yield h(t);e(`/boards/${f}/posts/${a.id}`)}catch(t){alert("게시글 작성에 실패했습니다. 다시 시도해주세요.")}else alert("내용을 입력해주세요.");else alert("제목을 입력해주세요.");else alert("게시판을 선택해주세요.")}),className:"space-y-6",children:[u.jsxs($e,{children:[u.jsx(_e,{children:u.jsx(Me,{children:"기본 정보"})}),u.jsxs(Be,{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["게시판 ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{value:f,onChange:e=>v(parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500",required:!0,children:[u.jsx("option",{value:0,children:"게시판을 선택해주세요"}),a.map(e=>u.jsx("option",{value:e.id,children:e.name},e.id))]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["제목 ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",value:x,onChange:e=>N(e.target.value),placeholder:"제목을 입력하세요",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500",maxLength:200,required:!0}),u.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[x.length,"/200자"]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["내용 ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("textarea",{value:w,onChange:e=>E(e.target.value),placeholder:"내용을 입력하세요",className:"w-full h-64 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500 resize-none",required:!0}),u.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[w.length,"자"]})]})]})]}),u.jsxs($e,{children:[u.jsx(_e,{children:u.jsx(Me,{children:"게시 옵션"})}),u.jsxs(Be,{className:"space-y-4",children:[u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:k,onChange:e=>R(e.target.checked),className:"w-4 h-4 text-elderberry-600 border-gray-300 rounded focus:ring-elderberry-500"}),u.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"익명으로 작성"})]}),K&&u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:T,onChange:e=>S(e.target.checked),className:"w-4 h-4 text-elderberry-600 border-gray-300 rounded focus:ring-elderberry-500"}),u.jsxs("div",{className:"ml-2 flex items-center",children:[u.jsx(V,{className:"w-4 h-4 text-red-500 mr-1"}),u.jsx("span",{className:"text-sm text-gray-700",children:"공지사항으로 등록"})]})]}),F&&u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:A,onChange:e=>j(e.target.checked),className:"w-4 h-4 text-elderberry-600 border-gray-300 rounded focus:ring-elderberry-500"}),u.jsxs("div",{className:"ml-2 flex items-center",children:[u.jsx(O,{className:"w-4 h-4 text-elderberry-500 mr-1"}),u.jsx("span",{className:"text-sm text-gray-700",children:"상단 고정"})]})]})]})]}),u.jsxs($e,{children:[u.jsx(_e,{children:u.jsx(Me,{children:"태그"})}),u.jsxs(Be,{className:"space-y-4",children:[u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("input",{type:"text",value:_,onChange:e=>M(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),Y())},placeholder:"태그를 입력하고 Enter를 누르세요",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500",maxLength:20}),u.jsxs(X,{type:"button",variant:"outline",onClick:Y,children:[u.jsx(P,{className:"w-4 h-4 mr-2"}),"추가"]})]}),D.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2",children:D.map((e,r)=>u.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-elderberry-100 text-elderberry-700",children:[u.jsx(P,{className:"w-3 h-3 mr-1"}),e,u.jsx("button",{type:"button",onClick:()=>(e=>{B(D.filter((r,t)=>t!==e))})(r),className:"ml-1 text-elderberry-500 hover:text-elderberry-700",children:u.jsx(H,{className:"w-3 h-3"})})]},r))}),u.jsxs("p",{className:"text-xs text-gray-500",children:["최대 10개까지 추가할 수 있습니다. (",D.length,"/10)"]})]})]}),u.jsxs($e,{children:[u.jsx(_e,{children:u.jsx(Me,{children:"첨부파일"})}),u.jsxs(Be,{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("input",{type:"file",multiple:!0,onChange:e=>{Array.from(e.target.files||[]).forEach(e=>{if(e.size>10485760)return void alert(`파일 크기가 너무 큽니다: ${e.name} (최대 10MB)`);const r={file:e,name:e.name,size:e.size,type:e.type,uploading:!1,uploaded:!1};U(e=>[...e,r])}),e.target.value=""},className:"hidden",id:"file-upload",accept:"image/*,.pdf,.doc,.docx,.txt,.zip,.rar"}),u.jsxs("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer",children:[u.jsx(W,{className:"w-4 h-4 mr-2"}),"파일 선택"]}),u.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"최대 10MB까지 업로드 가능합니다. (이미지, PDF, 문서, 압축파일)"})]}),z.length>0&&u.jsx("div",{className:"space-y-2",children:z.map((e,r)=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-8 h-8 bg-elderberry-100 rounded-lg flex items-center justify-center",children:e.type.startsWith("image/")?u.jsx(J,{className:"w-4 h-4 text-elderberry-600"}):u.jsx(q,{className:"w-4 h-4 text-elderberry-600"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.name}),u.jsx("p",{className:"text-xs text-gray-500",children:ee(e.size)})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[e.uploading&&u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-elderberry-600"}),e.uploaded&&u.jsx("div",{className:"w-4 h-4 bg-green-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-green-600",children:"✓"})}),u.jsx("button",{type:"button",onClick:()=>(e=>{U(r=>r.filter((r,t)=>t!==e))})(r),className:"text-gray-400 hover:text-red-500",children:u.jsx(H,{className:"w-4 h-4"})})]})]},r))})]})]}),u.jsxs("div",{className:"flex justify-end space-x-3",children:[u.jsx(X,{type:"button",variant:"outline",onClick:()=>e(-1),children:"취소"}),u.jsxs(X,{type:"submit",variant:"primary",loading:l,disabled:!f||!x.trim()||!w.trim(),children:[u.jsx(Q,{className:"w-4 h-4 mr-2"}),l?"작성 중...":"게시글 작성"]})]})]})]})}},Symbol.toStringTag,{value:"Module"}));export{qe as B,$e as C,Ae as L,Pe as M,tr as P,rr as R,or as S,Ve as T,Fe as a,He as b,We as c,Be as d,je as e,_e as f,Me as g,ir as h,De as i,ze as j,Oe as k,he as l,Rr as m,me as n,Pr as o,Ar as p,ar as u};
