var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(a,t,i)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[t]=i,n=(e,a)=>{for(var t in a||(a={}))l.call(a,t)&&s(e,t,a[t]);if(i)for(var t of i(a))r.call(a,t)&&s(e,t,a[t]);return e},c=(e,i)=>a(e,t(i)),d=(e,a,t)=>s(e,"symbol"!=typeof a?a+"":a,t),o=(e,a,t)=>new Promise((i,l)=>{var r=e=>{try{n(t.next(e))}catch(a){l(a)}},s=e=>{try{n(t.throw(e))}catch(a){l(a)}},n=e=>e.done?i(e.value):Promise.resolve(e.value).then(r,s);n((t=t.apply(e,a)).next())});import{c as m,r as h,j as u,f as p,V as y,W as g,Y as x,i as f,E as N,Z as v,S as b,X as w,_ as C,$ as k,a0 as F,a1 as j,a2 as S,a3 as A,a4 as R,a5 as E,T as M,a6 as T,N as $,d as O,a7 as I,C as z,F as L,a8 as G,a9 as P}from"./react-vendor-l0S2e_aq.js";import{B as D}from"./core-ui-DWxtYFuZ.js";import{C as B,d as H,f as _,g as U,B as W,S as V,u as K}from"./board-pages-BfaHUs1j.js";import{d as Q,s as q,i as J}from"./state-management-DFZwgI-2.js";import{m as Y,A as Z}from"./animation-lib-D4tZK1yC.js";import{a as X}from"./http-client-9JY-woyA.js";const ee=new class{constructor(e={}){d(this,"config"),d(this,"tokenProvider",null),d(this,"isRefreshing",!1),d(this,"failedQueue",[]),this.config=n({baseURL:"/api",timeout:1e4,withCredentials:!0},e)}setTokenProvider(e){this.tokenProvider=e}injectAuthHeaders(e={}){var a;const t=new Headers(e),i=null==(a=this.tokenProvider)?void 0:a.getAccessToken();return i&&t.set("Authorization",`Bearer ${i}`),t.has("Content-Type")||t.set("Content-Type","application/json"),t}handleResponse(e,a){return o(this,null,function*(){if(e.ok)return{data:yield e.json(),status:e.status,statusText:e.statusText,headers:e.headers};if(401===e.status&&this.tokenProvider)return this.handleTokenRefresh(e,a);const t=yield e.json().catch(()=>({}));throw{message:t.message||e.statusText,status:e.status,code:t.code,details:t}})}handleTokenRefresh(e,a){return o(this,null,function*(){if(this.isRefreshing)return new Promise((e,a)=>{this.failedQueue.push({resolve:e,reject:a})});try{return this.isRefreshing=!0,yield this.tokenProvider.refreshToken(),this.failedQueue.forEach(({resolve:e})=>{e(this.request(a.method,a.url,a))}),this.failedQueue=[],yield this.request(a.method,a.url,a)}catch(e){throw this.tokenProvider.logout(),this.failedQueue.forEach(({reject:a})=>{a(e)}),this.failedQueue=[],e}finally{this.isRefreshing=!1}})}request(e,a){return o(this,arguments,function*(e,a,t={}){const s=t,{baseURL:c=this.config.baseURL,timeout:d=this.config.timeout}=s,o=((e,a)=>{var t={};for(var s in e)l.call(e,s)&&a.indexOf(s)<0&&(t[s]=e[s]);if(null!=e&&i)for(var s of i(e))a.indexOf(s)<0&&r.call(e,s)&&(t[s]=e[s]);return t})(s,["baseURL","timeout"]),m=a.startsWith("http")?a:`${c}${a}`,h=new AbortController,u=setTimeout(()=>h.abort(),d);try{const i=yield fetch(m,n({method:e,headers:this.injectAuthHeaders(o.headers),signal:h.signal,credentials:this.config.withCredentials?"include":"same-origin"},o));return yield this.handleResponse(i,n({method:e,url:a},t))}catch(p){if(p instanceof Error&&"AbortError"===p.name)throw new Error(`ìš”ì²­ ì‹œê°„ ì´ˆê³¼ (${d}ms)`);throw p}finally{clearTimeout(u)}})}get(e,a){return o(this,null,function*(){return this.request("GET",e,a)})}post(e,a,t){return o(this,null,function*(){return this.request("POST",e,c(n({},t),{body:a?JSON.stringify(a):void 0}))})}put(e,a,t){return o(this,null,function*(){return this.request("PUT",e,c(n({},t),{body:a?JSON.stringify(a):void 0}))})}delete(e,a){return o(this,null,function*(){return this.request("DELETE",e,a)})}patch(e,a,t){return o(this,null,function*(){return this.request("PATCH",e,c(n({},t),{body:a?JSON.stringify(a):void 0}))})}upload(e,a,t){return o(this,null,function*(){const i=n({},t);if(i.headers){const e=new Headers(i.headers);e.delete("Content-Type"),i.headers=e}return this.request("POST",e,c(n({},i),{body:a}))})}getWithParams(e){return o(this,arguments,function*(e,a={},t){const i=new URLSearchParams;Object.entries(a).forEach(([e,a])=>{null!=a&&(Array.isArray(a)?a.forEach(a=>i.append(e,String(a))):i.append(e,String(a)))});const l=i.toString(),r=l?`${e}?${l}`:e;return this.get(r,t)})}}({baseURL:"/api",timeout:15e3,withCredentials:!0});ee.get.bind(ee),ee.post.bind(ee),ee.put.bind(ee),ee.delete.bind(ee),ee.patch.bind(ee),ee.upload.bind(ee),ee.getWithParams.bind(ee);const ae={searchResults:[],recommendations:[],selectedFacility:null,searchFilters:{},matchingPreference:{preferredRegions:new Set(["ì„œìš¸íŠ¹ë³„ì‹œ","ê²½ê¸°ë„"]),preferredFacilityTypes:new Set(["ìš”ì–‘ì›","ìš”ì–‘ë³‘ì›"]),maxMonthlyFee:3e6,minFacilityGrade:"C",requiredSpecialties:new Set,maxDistanceKm:null,prioritizeAvailability:!0,prioritizeCost:!1,prioritizeQuality:!0},userHistory:[],isSearching:!1,isLoadingRecommendations:!1,isLoadingHistory:!1,searchError:null,recommendationError:null,isDetailModalOpen:!1,isRecommendationModalOpen:!1,isMatchingFormOpen:!1},te={searchFacilities(e){return o(this,null,function*(){try{return(yield ee.getWithParams("/facilities",{facilityType:e.facilityType,facilityGrade:e.facilityGrade,region:e.region,careGradeLevel:e.careGradeLevel})).data.content||[]}catch(a){throw new Error(`ì‹œì„¤ ê²€ìƒ‰ ì‹¤íŒ¨: ${a.message||a.statusText}`)}})},getRecommendations(e,a,t){return o(this,null,function*(){const i={memberId:e.toString(),coordinatorId:t,preference:{preferredRegions:Array.from(a.preferredRegions),preferredFacilityTypes:Array.from(a.preferredFacilityTypes),maxMonthlyFee:a.maxMonthlyFee,minFacilityGrade:a.minFacilityGrade,requiredSpecialties:Array.from(a.requiredSpecialties),maxDistanceKm:a.maxDistanceKm,prioritizeAvailability:a.prioritizeAvailability,prioritizeCost:a.prioritizeCost,prioritizeQuality:a.prioritizeQuality},maxResults:10};try{return(yield ee.post("/facilities/recommendations",i)).data}catch(l){if(400===l.status)throw new Error(`ì¶”ì²œ ì‹œì„¤ ì¡°íšŒ ì‹¤íŒ¨: ê±´ê°• í‰ê°€ ë°ì´í„°ê°€ ì—†ê±°ë‚˜ ìš”ì²­ ë°ì´í„°ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤. (${l.status})`);throw new Error(`ì¶”ì²œ ì‹œì„¤ ì¡°íšŒ ì‹¤íŒ¨: ${l.message||l.statusText} (${l.status||"Unknown"})`)}})},trackFacilityAction(e,a){return o(this,null,function*(){try{yield ee.post(`/facilities/${e}/${a}`)}catch(t){throw new Error(`ì‹œì„¤ ${a} ì¶”ì  ì‹¤íŒ¨: ${t.message||t.statusText}`)}})},completeMatching(e,a,t,i){return o(this,null,function*(){const l={outcome:a,satisfactionScore:t,feedback:i};try{yield ee.post(`/facilities/${e}/complete-matching`,l)}catch(r){throw new Error(`ë§¤ì¹­ ì™„ë£Œ ì²˜ë¦¬ ì‹¤íŒ¨: ${r.message||r.statusText}`)}})},getUserHistory(){return o(this,null,function*(){try{return(yield ee.get("/facilities/matching-history")).data}catch(e){throw new Error(`ë§¤ì¹­ ì´ë ¥ ì¡°íšŒ ì‹¤íŒ¨: ${e.message||e.statusText}`)}})}},ie=m()(Q(q(J((e,a)=>c(n({},ae),{searchFacilities:a=>o(null,null,function*(){e(e=>{e.isSearching=!0,e.searchError=null});try{const t=yield te.searchFacilities(a);e(e=>{e.searchResults=t,e.searchFilters=a,e.isSearching=!1})}catch(t){e(e=>{e.searchError=t instanceof Error?t.message:"ì‹œì„¤ ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",e.isSearching=!1})}}),updateSearchFilters:a=>{e(e=>{Object.assign(e.searchFilters,a)})},clearSearchResults:()=>{e(e=>{e.searchResults=[],e.searchFilters={},e.searchError=null})},getRecommendations:(t,i)=>o(null,null,function*(){e(e=>{e.isLoadingRecommendations=!0,e.recommendationError=null});try{const l=yield te.getRecommendations(t,a().matchingPreference,i);e(e=>{e.recommendations=l,e.isLoadingRecommendations=!1})}catch(l){e(e=>{e.recommendationError=l instanceof Error?l.message:"ì‹œì„¤ ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",e.isLoadingRecommendations=!1})}}),updateMatchingPreference:a=>{e(e=>{Object.assign(e.matchingPreference,a)})},clearRecommendations:()=>{e(e=>{e.recommendations=[],e.recommendationError=null})},selectFacility:a=>{e(e=>{e.selectedFacility=a})},clearSelectedFacility:()=>{e(e=>{e.selectedFacility=null})},trackFacilityView:e=>o(null,null,function*(){}),trackFacilityContact:e=>o(null,null,function*(){try{yield te.trackFacilityAction(e,"contact"),a().loadUserHistory()}catch(t){}}),trackFacilityVisit:e=>o(null,null,function*(){try{yield te.trackFacilityAction(e,"visit"),a().loadUserHistory()}catch(t){}}),completeMatching:(e,t,i,l)=>o(null,null,function*(){try{yield te.completeMatching(e,t,i,l),a().loadUserHistory()}catch(r){throw r}}),loadUserHistory:()=>o(null,null,function*(){e(e=>{e.isLoadingHistory=!0});try{const a=yield te.getUserHistory();e(e=>{e.userHistory=a,e.isLoadingHistory=!1})}catch(a){e(e=>{e.isLoadingHistory=!1})}}),clearUserHistory:()=>{e(e=>{e.userHistory=[]})},openDetailModal:()=>{e(e=>{e.isDetailModalOpen=!0})},closeDetailModal:()=>{e(e=>{e.isDetailModalOpen=!1})},openRecommendationModal:()=>{e(e=>{e.isRecommendationModalOpen=!0})},closeRecommendationModal:()=>{e(e=>{e.isRecommendationModalOpen=!1})},openMatchingForm:()=>{e(e=>{e.isMatchingFormOpen=!0})},closeMatchingForm:()=>{e(e=>{e.isMatchingFormOpen=!1})},setSearchError:a=>{e(e=>{e.searchError=a})},setRecommendationError:a=>{e(e=>{e.recommendationError=a})},clearAllErrors:()=>{e(e=>{e.searchError=null,e.recommendationError=null})},resetFacilityState:()=>{e(()=>n({},ae))}}))),{name:"FacilityStore"})),le=new WeakMap,re=({facility:e,viewMode:a="list",onSelect:t,showActions:i=!0,isRecommendation:l=!1,matchScore:r,recommendationReason:s})=>{const[n,c]=h.useState(null),{selectFacility:d,openDetailModal:m,trackFacilityContact:v,trackFacilityVisit:b}=ie(),w=()=>{d(e),m(),null==t||t(e)},C=a=>o(null,null,function*(){a.stopPropagation(),c("contact");try{yield v(e.id),window.open(`tel:${e.phoneNumber}`)}catch(t){}finally{c(null)}}),k=a=>o(null,null,function*(){a.stopPropagation(),c("visit");try{yield b(e.id),alert("ë°©ë¬¸ ì˜ˆì•½ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹œì„¤ì—ì„œ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.")}catch(t){}finally{c(null)}}),F=e=>{switch(e){case"A":return"text-green-600 bg-green-100";case"B":return"text-blue-600 bg-blue-100";case"C":return"text-yellow-600 bg-yellow-100";case"D":return"text-orange-600 bg-orange-100";case"E":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},j=e.totalCapacity-e.currentOccupancy,S=e.currentOccupancy/e.totalCapacity*100,A=e=>e?`${(e/1e4).toFixed(0)}ë§Œì›`:"ë¬¸ì˜";return"grid"===a?u.jsx(Y.div,{whileHover:{y:-4},transition:{duration:.2},children:u.jsxs(B,{className:"h-full cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:w,children:[l&&r&&u.jsx("div",{className:"absolute top-4 right-4 z-10",children:u.jsxs("div",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium flex items-center",children:[u.jsx(p,{className:"w-3 h-3 mr-1"}),Math.round(r),"% ë§¤ì¹­"]})}),u.jsxs("div",{className:"relative h-48 bg-gray-200 rounded-t-lg overflow-hidden",children:[e.imageUrl?u.jsx("img",{src:e.imageUrl,alt:e.facilityName,className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx(y,{className:"w-12 h-12 text-gray-400"})}),u.jsx("div",{className:"absolute top-3 left-3",children:u.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F(e.facilityGrade)}`,children:[e.facilityGrade,"ë“±ê¸‰"]})})]}),u.jsxs(H,{className:"p-4",children:[u.jsxs("div",{className:"mb-3",children:[u.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-1 line-clamp-1",children:e.facilityName}),u.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.facilityType}),u.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[u.jsx(g,{className:"w-4 h-4 mr-1"}),u.jsx("span",{className:"line-clamp-1",children:e.address})]})]}),u.jsxs("div",{className:"mb-3",children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[u.jsx("span",{className:"text-gray-600",children:"ì…ì†Œ í˜„í™©"}),u.jsx("span",{className:"font-medium "+(j>0?"text-green-600":"text-red-600"),children:j>0?`${j}ëª… ì…ì†Œ ê°€ëŠ¥`:"ì…ì†Œ ëŒ€ê¸°"})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"h-2 rounded-full "+(S>=90?"bg-red-500":S>=70?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(S,100)}%`}})})]}),u.jsx("div",{className:"mb-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"ì›” ê¸°ë³¸ë£Œ"}),u.jsx("span",{className:"font-semibold text-lg text-gray-900",children:A(e.monthlyBasicFee)})]})}),e.specialties&&e.specialties.length>0&&u.jsx("div",{className:"mb-4",children:u.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.specialties.slice(0,2).map(e=>u.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full",children:e},e)),e.specialties.length>2&&u.jsxs("span",{className:"px-2 py-1 bg-gray-50 text-gray-600 text-xs rounded-full",children:["+",e.specialties.length-2]})]})}),l&&s&&u.jsx("div",{className:"mb-4 p-2 bg-purple-50 rounded-lg",children:u.jsxs("p",{className:"text-xs text-purple-700 line-clamp-2",children:["ğŸ’¡ ",s]})}),i&&u.jsxs("div",{className:"flex space-x-2",children:[u.jsx(D,{variant:"outline",size:"sm",onClick:C,disabled:"contact"===n,className:"flex-1",children:"contact"===n?u.jsx(Y.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:u.jsx(x,{className:"w-4 h-4"})}):u.jsx(x,{className:"w-4 h-4"})}),u.jsx(D,{size:"sm",onClick:k,disabled:"visit"===n,className:"flex-1",children:"visit"===n?u.jsx(Y.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:u.jsx(f,{className:"w-4 h-4"})}):u.jsxs(u.Fragment,{children:[u.jsx(f,{className:"w-4 h-4 mr-1"}),"ë°©ë¬¸"]})})]})]})]})}):u.jsx(Y.div,{whileHover:{x:4},transition:{duration:.2},children:u.jsx(B,{className:"cursor-pointer hover:shadow-md transition-shadow duration-200",onClick:w,children:u.jsx(H,{className:"p-6",children:u.jsxs("div",{className:"flex items-start space-x-4",children:[u.jsx("div",{className:"relative w-24 h-24 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0",children:e.imageUrl?u.jsx("img",{src:e.imageUrl,alt:e.facilityName,className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx(y,{className:"w-8 h-8 text-gray-400"})})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"flex items-start justify-between mb-2",children:u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-xl text-gray-900 mb-1",children:e.facilityName}),u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx("span",{className:"text-gray-600",children:e.facilityType}),u.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F(e.facilityGrade)}`,children:[e.facilityGrade,"ë“±ê¸‰"]}),l&&r&&u.jsxs("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium flex items-center",children:[u.jsx(p,{className:"w-3 h-3 mr-1"}),Math.round(r),"% ë§¤ì¹­"]})]})]})}),u.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-3",children:[u.jsx(g,{className:"w-4 h-4 mr-1"}),u.jsx("span",{children:e.address})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[u.jsx("span",{className:"text-gray-600",children:"ì…ì†Œ í˜„í™©"}),u.jsx("span",{className:"font-medium "+(j>0?"text-green-600":"text-red-600"),children:j>0?`${j}ëª… ê°€ëŠ¥`:"ëŒ€ê¸°"})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"h-2 rounded-full "+(S>=90?"bg-red-500":S>=70?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(S,100)}%`}})})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"ì›” ê¸°ë³¸ë£Œ"}),u.jsx("div",{className:"font-semibold text-lg text-gray-900",children:A(e.monthlyBasicFee)})]})]}),e.specialties&&e.specialties.length>0&&u.jsx("div",{className:"mb-3",children:u.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.specialties.slice(0,4).map(e=>u.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full",children:e},e)),e.specialties.length>4&&u.jsxs("span",{className:"px-2 py-1 bg-gray-50 text-gray-600 text-xs rounded-full",children:["+",e.specialties.length-4,"ê°œ ë”"]})]})}),l&&s&&u.jsx("div",{className:"mb-3 p-3 bg-purple-50 rounded-lg",children:u.jsxs("p",{className:"text-sm text-purple-700",children:["ğŸ’¡ ",s]})}),i&&u.jsxs("div",{className:"flex space-x-2 pt-2",children:[u.jsx(D,{variant:"outline",size:"sm",onClick:C,disabled:"contact"===n,children:"contact"===n?u.jsx(Y.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:u.jsx(x,{className:"w-4 h-4"})}):u.jsxs(u.Fragment,{children:[u.jsx(x,{className:"w-4 h-4 mr-1"}),"ì—°ë½í•˜ê¸°"]})}),u.jsx(D,{size:"sm",onClick:k,disabled:"visit"===n,children:"visit"===n?u.jsx(Y.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:u.jsx(f,{className:"w-4 h-4"})}):u.jsxs(u.Fragment,{children:[u.jsx(f,{className:"w-4 h-4 mr-1"}),"ë°©ë¬¸ ì˜ˆì•½"]})}),u.jsxs(D,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),w()},children:[u.jsx(N,{className:"w-4 h-4 mr-1"}),"ìƒì„¸ë³´ê¸°"]})]})]})]})})})})},se=({facilities:e,viewMode:a="list",isLoading:t=!1,emptyMessage:i="ì‹œì„¤ì´ ì—†ìŠµë‹ˆë‹¤.",onFacilitySelect:l,showActions:r=!0})=>{const s=()=>u.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((e,a)=>u.jsx(B,{className:"animate-pulse",children:u.jsx(H,{className:"p-6",children:u.jsxs("div",{className:"flex items-start space-x-4",children:[u.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-lg flex-shrink-0"}),u.jsxs("div",{className:"flex-1 space-y-3",children:[u.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]}),u.jsxs("div",{className:"flex space-x-2 pt-2",children:[u.jsx("div",{className:"h-8 bg-gray-200 rounded w-20"}),u.jsx("div",{className:"h-8 bg-gray-200 rounded w-20"})]})]}),u.jsxs("div",{className:"text-right space-y-2",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"}),u.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-12"})]})]})})},a))}),n=()=>u.jsx(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"text-center py-12",children:u.jsx(B,{children:u.jsx(H,{className:"p-12",children:u.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[u.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:u.jsx(b,{className:"w-8 h-8 text-gray-400"})}),u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤"}),u.jsx("p",{className:"text-gray-500 max-w-md",children:i})]}),u.jsx("div",{className:"text-sm text-gray-400 mt-4",children:u.jsx("p",{children:"ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ í•„í„°ë¥¼ ì¡°ì •í•´ë³´ì„¸ìš”."})})]})})})});return t?u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex items-center justify-center py-8",children:u.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[u.jsx(v,{className:"w-5 h-5 animate-spin"}),u.jsx("span",{children:"ì‹œì„¤ì„ ê²€ìƒ‰í•˜ê³  ìˆìŠµë‹ˆë‹¤..."})]})}),u.jsx(s,{})]}):0===e.length?u.jsx(n,{}):"grid"===a?u.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.jsx(Z,{children:e.map((e,a)=>u.jsx(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.05*a},children:u.jsx(re,{facility:e,viewMode:"grid",onSelect:l,showActions:r})},e.id))})}):u.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"space-y-4",children:u.jsx(Z,{children:e.map((e,a)=>u.jsx(Y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,delay:.05*a},children:u.jsx(re,{facility:e,viewMode:"list",onSelect:l,showActions:r})},e.id))})})},ne=[{value:"ìš”ì–‘ì‹œì„¤",label:"ë…¸ì¸ìš”ì–‘ì‹œì„¤",description:"24ì‹œê°„ ì¼€ì–´ ì„œë¹„ìŠ¤"},{value:"ìš”ì–‘ë³‘ì›",label:"ìš”ì–‘ë³‘ì›",description:"ì˜ë£Œì§„ ìƒì£¼ ì¹˜ë£Œ"},{value:"ì–‘ë¡œì‹œì„¤",label:"ì–‘ë¡œì‹œì„¤",description:"ë…ë¦½ìƒí™œ ì§€ì›"},{value:"ì¹˜ë§¤ì „ë¬¸ì‹œì„¤",label:"ì¹˜ë§¤ì „ë¬¸ì‹œì„¤",description:"ì¹˜ë§¤ íŠ¹í™” ì¼€ì–´"},{value:"ì¬í™œì „ë¬¸ì‹œì„¤",label:"ì¬í™œì „ë¬¸ì‹œì„¤",description:"ì¬í™œì¹˜ë£Œ ì¤‘ì‹¬"},{value:"ë‹¨ê¸°ë³´í˜¸ì‹œì„¤",label:"ë‹¨ê¸°ë³´í˜¸ì‹œì„¤",description:"ì„ì‹œ ë³´í˜¸ ì„œë¹„ìŠ¤"}],ce=[{value:"A",label:"Aë“±ê¸‰",description:"ìµœìš°ìˆ˜ (90ì  ì´ìƒ)",color:"text-green-600"},{value:"B",label:"Bë“±ê¸‰",description:"ìš°ìˆ˜ (80-89ì )",color:"text-blue-600"},{value:"C",label:"Cë“±ê¸‰",description:"ì–‘í˜¸ (70-79ì )",color:"text-yellow-600"},{value:"D",label:"Dë“±ê¸‰",description:"ë³´í†µ (60-69ì )",color:"text-orange-600"},{value:"E",label:"Eë“±ê¸‰",description:"ë¯¸í¡ (60ì  ë¯¸ë§Œ)",color:"text-red-600"}],de=[{value:1,label:"1ë“±ê¸‰",description:"ìµœì¤‘ì¦ (95ì  ì´ìƒ)"},{value:2,label:"2ë“±ê¸‰",description:"ì¤‘ì¦ (75-94ì )"},{value:3,label:"3ë“±ê¸‰",description:"ì¤‘ë“±ë„ (60-74ì )"},{value:4,label:"4ë“±ê¸‰",description:"ê²½ì¦ (51-59ì )"},{value:5,label:"5ë“±ê¸‰",description:"ê²½ì¦ (45-50ì )"}],oe=["ì„œìš¸íŠ¹ë³„ì‹œ","ë¶€ì‚°ê´‘ì—­ì‹œ","ëŒ€êµ¬ê´‘ì—­ì‹œ","ì¸ì²œê´‘ì—­ì‹œ","ê´‘ì£¼ê´‘ì—­ì‹œ","ëŒ€ì „ê´‘ì—­ì‹œ","ìš¸ì‚°ê´‘ì—­ì‹œ","ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ","ê²½ê¸°ë„","ê°•ì›ë„","ì¶©ì²­ë¶ë„","ì¶©ì²­ë‚¨ë„","ì „ë¼ë¶ë„","ì „ë¼ë‚¨ë„","ê²½ìƒë¶ë„","ê²½ìƒë‚¨ë„","ì œì£¼íŠ¹ë³„ìì¹˜ë„"],me=[{value:1e6,label:"100ë§Œì› ì´í•˜"},{value:15e5,label:"150ë§Œì› ì´í•˜"},{value:2e6,label:"200ë§Œì› ì´í•˜"},{value:25e5,label:"250ë§Œì› ì´í•˜"},{value:3e6,label:"300ë§Œì› ì´í•˜"},{value:5e6,label:"500ë§Œì› ì´í•˜"}],he=["ì¹˜ë§¤ì¼€ì–´","ì¬í™œì¹˜ë£Œ","ë¬¼ë¦¬ì¹˜ë£Œ","ì‘ì—…ì¹˜ë£Œ","ì–¸ì–´ì¹˜ë£Œ","ì¸ì§€ì¹˜ë£Œ","í˜¸ìŠ¤í”¼ìŠ¤ì¼€ì–´","ì˜ë£Œì¼€ì–´","ì˜ì–‘ê´€ë¦¬","ì‹¬ë¦¬ìƒë‹´"],ue=({filters:e,onFiltersChange:a,onClear:t})=>{const[i,l]=h.useState(new Set(["type","grade"])),r=e=>{const a=new Set(i);a.has(e)?a.delete(e):a.add(e),l(a)},s=(e,t)=>{a({[e]:t})},n=Object.values(e).filter(e=>null!=e&&""!==e).length;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["ìƒì„¸ í•„í„°",n>0&&u.jsxs("span",{className:"ml-2 bg-blue-100 text-blue-800 text-sm px-2 py-1 rounded-full",children:[n,"ê°œ ì ìš©ë¨"]})]}),n>0&&u.jsxs(D,{variant:"outline",size:"sm",onClick:()=>{a({facilityType:void 0,facilityGrade:void 0,region:void 0,careGradeLevel:void 0,maxMonthlyFee:void 0,minFacilityGrade:void 0,specialties:void 0,maxDistanceKm:void 0,hasAvailableSlots:void 0}),null==t||t()},className:"text-gray-500 hover:text-gray-700",children:[u.jsx(w,{className:"w-4 h-4 mr-1"}),"ì „ì²´ ì´ˆê¸°í™”"]})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[u.jsxs("button",{onClick:()=>r("type"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(y,{className:"w-5 h-5 text-gray-400 mr-2"}),u.jsx("span",{className:"font-medium",children:"ì‹œì„¤ íƒ€ì…"})]}),u.jsx(Y.div,{animate:{rotate:i.has("type")?180:0},transition:{duration:.2},children:u.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),i.has("type")&&u.jsx(Y.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:ne.map(a=>u.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"facilityType",value:a.value,checked:e.facilityType===a.value,onChange:e=>s("facilityType",e.target.value),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.label}),u.jsx("div",{className:"text-xs text-gray-500",children:a.description})]})]},a.value))})})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[u.jsxs("button",{onClick:()=>r("grade"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(p,{className:"w-5 h-5 text-gray-400 mr-2"}),u.jsx("span",{className:"font-medium",children:"ì‹œì„¤ ë“±ê¸‰"})]}),u.jsx(Y.div,{animate:{rotate:i.has("grade")?180:0},transition:{duration:.2},children:u.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),i.has("grade")&&u.jsx(Y.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:ce.map(a=>u.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"facilityGrade",value:a.value,checked:e.facilityGrade===a.value,onChange:e=>s("facilityGrade",e.target.value),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),u.jsxs("div",{children:[u.jsx("div",{className:`text-sm font-medium ${a.color}`,children:a.label}),u.jsx("div",{className:"text-xs text-gray-500",children:a.description})]})]},a.value))})})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[u.jsxs("button",{onClick:()=>r("region"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(g,{className:"w-5 h-5 text-gray-400 mr-2"}),u.jsx("span",{className:"font-medium",children:"ì§€ì—­"})]}),u.jsx(Y.div,{animate:{rotate:i.has("region")?180:0},transition:{duration:.2},children:u.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),i.has("region")&&u.jsx(Y.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:u.jsxs("select",{value:e.region||"",onChange:e=>s("region",e.target.value||void 0),className:"mt-3 w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[u.jsx("option",{value:"",children:"ì „ì²´ ì§€ì—­"}),oe.map(e=>u.jsx("option",{value:e,children:e},e))]})})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[u.jsxs("button",{onClick:()=>r("care"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(C,{className:"w-5 h-5 text-gray-400 mr-2"}),u.jsx("span",{className:"font-medium",children:"ì¼€ì–´ ë“±ê¸‰"})]}),u.jsx(Y.div,{animate:{rotate:i.has("care")?180:0},transition:{duration:.2},children:u.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),i.has("care")&&u.jsx(Y.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:de.map(a=>u.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"careGradeLevel",value:a.value,checked:e.careGradeLevel===a.value,onChange:e=>s("careGradeLevel",parseInt(e.target.value)),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.label}),u.jsx("div",{className:"text-xs text-gray-500",children:a.description})]})]},a.value))})})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[u.jsxs("button",{onClick:()=>r("cost"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(k,{className:"w-5 h-5 text-gray-400 mr-2"}),u.jsx("span",{className:"font-medium",children:"ì›” ë¹„ìš©"})]}),u.jsx(Y.div,{animate:{rotate:i.has("cost")?180:0},transition:{duration:.2},children:u.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),i.has("cost")&&u.jsx(Y.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:u.jsx("div",{className:"space-y-2 mt-3",children:me.map(a=>u.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"maxMonthlyFee",value:a.value,checked:e.maxMonthlyFee===a.value,onChange:e=>s("maxMonthlyFee",parseInt(e.target.value)),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),u.jsx("span",{className:"text-sm text-gray-900",children:a.label})]},a.value))})})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[u.jsxs("button",{onClick:()=>r("specialties"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(p,{className:"w-5 h-5 text-gray-400 mr-2"}),u.jsx("span",{className:"font-medium",children:"ì „ë¬¸ ì„œë¹„ìŠ¤"})]}),u.jsx(Y.div,{animate:{rotate:i.has("specialties")?180:0},transition:{duration:.2},children:u.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),i.has("specialties")&&u.jsx(Y.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:u.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:he.map(a=>u.jsx("button",{onClick:()=>{const t=e.specialties||[],i=t.includes(a)?t.filter(e=>e!==a):[...t,a];s("specialties",i.length>0?i:void 0)},className:"px-3 py-1 text-sm rounded-full border transition-colors "+((e.specialties||[]).includes(a)?"bg-blue-100 border-blue-300 text-blue-800":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"),children:a},a))})})]}),u.jsx("div",{className:"border border-gray-200 rounded-lg",children:u.jsxs("div",{className:"px-4 py-3",children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"ê¸°íƒ€ ì˜µì…˜"}),u.jsx("div",{className:"space-y-3",children:u.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:e.hasAvailableSlots||!1,onChange:e=>s("hasAvailableSlots",!!e.target.checked||void 0),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),u.jsx("span",{className:"text-sm text-gray-900",children:"ì…ì†Œ ê°€ëŠ¥í•œ ì‹œì„¤ë§Œ ë³´ê¸°"})]})})]})})]})},pe=({recommendations:e,isLoading:a=!1,onRefresh:t,memberId:i,showPreferences:l=!0})=>{const{matchingPreference:r,updateMatchingPreference:s}=ie(),[n,c]=h.useState(!1),[d,o]=h.useState(!1),m={averageScore:e.length>0?Math.round(e.reduce((e,a)=>e+a.matchScore,0)/e.length):0,highScoreCount:e.filter(e=>e.matchScore>=80).length,mediumScoreCount:e.filter(e=>e.matchScore>=60&&e.matchScore<80).length,lowScoreCount:e.filter(e=>e.matchScore<60).length},p=(()=>{const e=[];return m.averageScore>=80?e.push({type:"success",icon:$,title:"ìš°ìˆ˜í•œ ë§¤ì¹­ ê²°ê³¼",description:"íšŒì›ë‹˜ì˜ ìš”êµ¬ì‚¬í•­ì— ì˜ ë§ëŠ” ì‹œì„¤ë“¤ì´ ë§ì´ ì°¾ì•„ì¡ŒìŠµë‹ˆë‹¤."}):m.averageScore>=60?e.push({type:"warning",icon:O,title:"ì–‘í˜¸í•œ ë§¤ì¹­ ê²°ê³¼",description:"ì¼ë¶€ ì¡°ê±´ì„ ì¡°ì •í•˜ë©´ ë” ì í•©í•œ ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."}):e.push({type:"info",icon:I,title:"ë§¤ì¹­ ì¡°ê±´ ê²€í†  í•„ìš”",description:"ì„ í˜¸ ì¡°ê±´ì„ ì¡°ì •í•˜ì—¬ ë” ë‚˜ì€ ì¶”ì²œ ê²°ê³¼ë¥¼ ë°›ì•„ë³´ì„¸ìš”."}),0===m.highScoreCount&&e.push({type:"tip",icon:T,title:"ì¶”ì²œ íŒ",description:"ì§€ì—­ ë²”ìœ„ë¥¼ ë„“íˆê±°ë‚˜ ë¹„ìš© ì¡°ê±´ì„ ì¡°ì •í•´ë³´ì„¸ìš”."}),e})(),y=(e,a)=>{s({[e]:a})};return a?u.jsxs("div",{className:"space-y-6",children:[u.jsx(B,{children:u.jsx(H,{className:"p-6",children:u.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[u.jsx(Y.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:u.jsx(F,{className:"w-6 h-6 text-purple-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AIê°€ ë§ì¶¤í˜• ì‹œì„¤ì„ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤"}),u.jsx("p",{className:"text-gray-600",children:"íšŒì›ë‹˜ì˜ ê±´ê°• ìƒíƒœì™€ ì„ í˜¸ë„ë¥¼ ì¢…í•©ì ìœ¼ë¡œ ë¶„ì„í•˜ê³  ìˆì–´ìš”..."})]})]})})}),u.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((e,a)=>u.jsx(B,{className:"animate-pulse",children:u.jsx(H,{className:"p-6",children:u.jsxs("div",{className:"flex items-start space-x-4",children:[u.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-lg"}),u.jsxs("div",{className:"flex-1 space-y-3",children:[u.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]}),u.jsxs("div",{className:"text-right space-y-2",children:[u.jsx("div",{className:"h-8 bg-gray-200 rounded w-16"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"})]})]})})},a))})]}):0===e.length?u.jsx("div",{className:"text-center py-12",children:u.jsx(B,{children:u.jsx(H,{className:"p-12",children:u.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[u.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center",children:u.jsx(j,{className:"w-8 h-8 text-purple-600"})}),u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ì¶”ì²œ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤"}),u.jsx("p",{className:"text-gray-500 max-w-md",children:"í˜„ì¬ ì¡°ê±´ì— ë§ëŠ” ì‹œì„¤ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì„ í˜¸ ì¡°ê±´ì„ ì¡°ì •í•˜ê±°ë‚˜ ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”."})]}),t&&u.jsxs(D,{onClick:t,variant:"outline",children:[u.jsx(v,{className:"w-4 h-4 mr-2"}),"ë‹¤ì‹œ ì¶”ì²œë°›ê¸°"]})]})})})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs(B,{children:[u.jsx(_,{children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:u.jsx(j,{className:"w-5 h-5 text-purple-600"})}),u.jsxs("div",{children:[u.jsx(U,{className:"text-xl",children:"ë§ì¶¤í˜• ì¶”ì²œ ê²°ê³¼"}),u.jsxs("p",{className:"text-gray-600",children:["AIê°€ ë¶„ì„í•œ íšŒì›ë‹˜ê»˜ ìµœì ì˜ ì‹œì„¤ ",e.length,"ê³³"]})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[t&&u.jsxs(D,{variant:"outline",size:"sm",onClick:t,children:[u.jsx(v,{className:"w-4 h-4 mr-1"}),"ìƒˆë¡œê³ ì¹¨"]}),l&&u.jsxs(D,{variant:"outline",size:"sm",onClick:()=>c(!n),children:[u.jsx(S,{className:"w-4 h-4 mr-1"}),"ì„ í˜¸ë„ ì„¤ì •"]})]})]})}),u.jsxs(H,{children:[u.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[m.averageScore,"%"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"í‰ê·  ë§¤ì¹­ë„"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-green-600",children:m.highScoreCount}),u.jsx("div",{className:"text-sm text-gray-600",children:"ìš°ìˆ˜ ë§¤ì¹­ (80%+)"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:m.mediumScoreCount}),u.jsx("div",{className:"text-sm text-gray-600",children:"ì–‘í˜¸ ë§¤ì¹­ (60-79%)"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-gray-600",children:m.lowScoreCount}),u.jsx("div",{className:"text-sm text-gray-600",children:"ë³´í†µ ë§¤ì¹­ (60% ë¯¸ë§Œ)"})]})]}),u.jsxs("button",{onClick:()=>o(!d),className:"w-full flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(F,{className:"w-5 h-5 text-purple-600"}),u.jsx("span",{className:"font-medium",children:"AI ì¶”ì²œ ë¶„ì„ ê²°ê³¼"})]}),d?u.jsx(A,{className:"w-5 h-5 text-gray-400"}):u.jsx(R,{className:"w-5 h-5 text-gray-400"})]}),u.jsx(Z,{children:d&&u.jsx(Y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:u.jsx("div",{className:"pt-4 space-y-3",children:p.map((e,a)=>{const t=e.icon,i={success:"text-green-600 bg-green-50",warning:"text-yellow-600 bg-yellow-50",info:"text-blue-600 bg-blue-50",tip:"text-purple-600 bg-purple-50"}[e.type];return u.jsx("div",{className:`p-3 rounded-lg ${i}`,children:u.jsxs("div",{className:"flex items-start space-x-2",children:[u.jsx(t,{className:"w-5 h-5 mt-0.5"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:e.title}),u.jsx("div",{className:"text-sm opacity-90",children:e.description})]})]})},a)})})})})]})]}),u.jsx(Z,{children:n&&u.jsx(Y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:u.jsxs(B,{children:[u.jsx(_,{children:u.jsxs(U,{className:"text-lg flex items-center",children:[u.jsx(S,{className:"w-5 h-5 mr-2"}),"ì¶”ì²œ ì„ í˜¸ë„ ì„¤ì •"]})}),u.jsxs(H,{children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"space-y-3",children:[u.jsx("h4",{className:"font-medium",children:"ìš°ì„ ìˆœìœ„"}),u.jsxs("label",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",checked:r.prioritizeQuality,onChange:e=>y("prioritizeQuality",e.target.checked),className:"rounded border-gray-300"}),u.jsx("span",{className:"text-sm",children:"í’ˆì§ˆ ìš°ì„ "})]}),u.jsxs("label",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",checked:r.prioritizeCost,onChange:e=>y("prioritizeCost",e.target.checked),className:"rounded border-gray-300"}),u.jsx("span",{className:"text-sm",children:"ë¹„ìš© ìš°ì„ "})]}),u.jsxs("label",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",checked:r.prioritizeAvailability,onChange:e=>y("prioritizeAvailability",e.target.checked),className:"rounded border-gray-300"}),u.jsx("span",{className:"text-sm",children:"ì…ì†Œ ê°€ëŠ¥ì„± ìš°ì„ "})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h4",{className:"font-medium",children:"ìµœëŒ€ ì›” ë¹„ìš©"}),u.jsxs("select",{value:r.maxMonthlyFee||"",onChange:e=>y("maxMonthlyFee",e.target.value?parseInt(e.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",children:[u.jsx("option",{value:"",children:"ì œí•œ ì—†ìŒ"}),u.jsx("option",{value:"1500000",children:"150ë§Œì›"}),u.jsx("option",{value:"2000000",children:"200ë§Œì›"}),u.jsx("option",{value:"2500000",children:"250ë§Œì›"}),u.jsx("option",{value:"3000000",children:"300ë§Œì›"}),u.jsx("option",{value:"4000000",children:"400ë§Œì›"}),u.jsx("option",{value:"5000000",children:"500ë§Œì›"})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h4",{className:"font-medium",children:"ìµœì†Œ ì‹œì„¤ ë“±ê¸‰"}),u.jsxs("select",{value:r.minFacilityGrade,onChange:e=>y("minFacilityGrade",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",children:[u.jsx("option",{value:"E",children:"Eë“±ê¸‰ ì´ìƒ"}),u.jsx("option",{value:"D",children:"Dë“±ê¸‰ ì´ìƒ"}),u.jsx("option",{value:"C",children:"Cë“±ê¸‰ ì´ìƒ"}),u.jsx("option",{value:"B",children:"Bë“±ê¸‰ ì´ìƒ"}),u.jsx("option",{value:"A",children:"Aë“±ê¸‰ë§Œ"})]})]})]}),u.jsx("div",{className:"mt-4 pt-4 border-t",children:u.jsxs(D,{onClick:t,className:"w-full",children:[u.jsx(E,{className:"w-4 h-4 mr-2"}),"ìƒˆë¡œìš´ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ ì¶”ì²œë°›ê¸°"]})})]})]})})}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"ì¶”ì²œ ì‹œì„¤ ëª©ë¡"}),u.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[u.jsx(M,{className:"w-4 h-4"}),u.jsx("span",{children:"ë§¤ì¹­ë„ ìˆœìœ¼ë¡œ ì •ë ¬ë¨"})]})]}),u.jsx(Z,{children:e.map((e,a)=>u.jsx(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.1*a},children:u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute -left-4 top-4 z-10",children:u.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold "+(0===a?"bg-yellow-500":1===a?"bg-gray-400":2===a?"bg-amber-600":"bg-gray-300"),children:a+1})}),u.jsx(re,{facility:e.facility,viewMode:"list",isRecommendation:!0,matchScore:e.matchScore,recommendationReason:e.recommendationReason,showActions:!0})]})},e.facility.id))})]}),u.jsx(B,{children:u.jsx(H,{className:"p-6",children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx(T,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"ì¶”ì²œ ê²°ê³¼ë¥¼ ê°œì„ í•˜ë ¤ë©´?"}),u.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[u.jsx("li",{children:"â€¢ ì„ í˜¸ ì§€ì—­ ë²”ìœ„ë¥¼ ì¡°ì •í•´ë³´ì„¸ìš”"}),u.jsx("li",{children:"â€¢ ì˜ˆì‚° ì¡°ê±´ì„ ë‹¤ì‹œ ê²€í† í•´ë³´ì„¸ìš”"}),u.jsx("li",{children:"â€¢ í•„ìˆ˜ ì„œë¹„ìŠ¤ ì¡°ê±´ì„ ëª…í™•íˆ í•´ë³´ì„¸ìš”"}),u.jsx("li",{children:"â€¢ ì‹œì„¤ ë°©ë¬¸ í›„ í”¼ë“œë°±ì„ ë‚¨ê²¨ì£¼ì‹œë©´ ë” ì •í™•í•œ ì¶”ì²œì´ ê°€ëŠ¥í•©ë‹ˆë‹¤"})]})]})]})})})]})},ye=e=>{if(!e)return[];try{return e.split(",").map(e=>e.trim()).filter(e=>e.length>0)}catch(a){return[]}},ge=e=>{if(!e)return[];try{return e.split(",").map(e=>parseInt(e.trim())).filter(e=>!isNaN(e))}catch(a){return[]}},xe=e=>{return{id:e.id,facilityName:e.facilityName,facilityType:(t=e.facilityType,{NURSING_HOME:FacilityType.NURSING_HOME,DAY_CARE_CENTER:FacilityType.DAY_CARE_CENTER,SENIOR_WELFARE_CENTER:FacilityType.SENIOR_WELFARE_CENTER,GROUP_HOME:FacilityType.GROUP_HOME,SHORT_TERM_CARE:FacilityType.SHORT_TERM_CARE,HOME_CARE_SERVICE:FacilityType.HOME_CARE_SERVICE,SENIOR_HOUSING:FacilityType.SENIOR_HOUSING,MEDICAL_FACILITY:FacilityType.MEDICAL_FACILITY}[t]||FacilityType.NURSING_HOME),facilityGrade:(a=e.facilityGrade,a&&{A:FacilityGrade.A,B:FacilityGrade.B,C:FacilityGrade.C,D:FacilityGrade.D,UNGRADED:FacilityGrade.UNGRADED}[a.toUpperCase()]||FacilityGrade.UNGRADED),address:`${e.sido} ${e.sigungu} ${e.detailAddress||""}`.trim(),phoneNumber:e.phoneNumber||"",totalCapacity:e.totalCapacity||0,currentOccupancy:e.currentOccupancy||0,monthlyBasicFee:e.monthlyBasicFee,availableCareGrades:ge(e.careGradeLevels),specialties:ye(e.specialties),latitude:e.latitude,longitude:e.longitude,description:e.description||void 0,createdAt:e.createdAt,updatedAt:e.updatedAt};var a,t},fe=e=>({content:e.content.map(xe),totalElements:e.totalElements,totalPages:e.totalPages,page:e.number,size:e.size,first:e.first,last:e.last}),Ne=e=>e&&Array.isArray(e.content)&&"number"==typeof e.totalElements&&"number"==typeof e.totalPages,ve=e=>({id:e,facilityName:"ì •ë³´ ì—†ìŒ",facilityType:FacilityType.NURSING_HOME,facilityGrade:FacilityGrade.UNGRADED,address:"",phoneNumber:"",totalCapacity:0,currentOccupancy:0,monthlyBasicFee:null,availableCareGrades:[],specialties:[],latitude:null,longitude:null,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),detailedDescription:"ì‹œì„¤ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",photos:[],staffInfo:{totalStaff:0,nurses:0,caregivers:0,doctors:0,socialWorkers:0},programsAndServices:[],mealServices:{breakfastIncluded:!1,lunchIncluded:!1,dinnerIncluded:!1,specialDiets:[]},visitingPolicies:{visitingHours:"ë¬¸ì˜ ë°”ëë‹ˆë‹¤",restrictionsAndGuidelines:[]},contactInfo:{primaryContact:"",email:"",emergencyContact:""},reviews:[],averageRating:0}),be={}.REACT_APP_API_BASE_URL||"http://localhost:8080/api",we=X.create({baseURL:be,timeout:1e4,headers:{"Content-Type":"application/json"}});we.interceptors.request.use(e=>{const a=localStorage.getItem("accessToken");return a&&(e.headers.Authorization=`Bearer ${a}`),e},e=>Promise.reject(e)),we.interceptors.response.use(e=>e,e=>{var a;return 401===(null==(a=e.response)?void 0:a.status)&&(localStorage.removeItem("accessToken"),window.location.href="/login"),Promise.reject(e)});const Ce={searchFacilities(e){return o(this,null,function*(){try{const a=(e=>{const a={};return e.keyword&&(a.keyword=e.keyword),e.region&&(a.sido=e.region),e.district&&(a.sigungu=e.district),e.facilityType&&(a.facilityType=e.facilityType),e.minGrade&&(a.minFacilityGrade=e.minGrade),e.maxMonthlyCost&&(a.maxMonthlyFee=e.maxMonthlyCost),e.latitude&&(a.latitude=e.latitude),e.longitude&&(a.longitude=e.longitude),e.radiusKm&&(a.radiusKm=e.radiusKm),e.sortBy&&(a.sortBy=e.sortBy),void 0!==e.page&&(a.page=e.page),void 0!==e.size&&(a.size=e.size),!0===e.availableBedsOnly&&(a.hasAvailableSlots=!0),a})(e),t=yield we.get("/facilities",{params:a});return Ne(t.data)?fe(t.data):{content:[],totalElements:0,totalPages:0,page:0,size:20,first:!0,last:!0}}catch(a){return{content:[],totalElements:0,totalPages:0,page:0,size:20,first:!0,last:!0}}})},searchFacilitiesOnMap(e){return o(this,null,function*(){try{const a={latitude:(e.neLat+e.swLat)/2,longitude:(e.neLng+e.swLng)/2,radiusKm:110*Math.abs(e.neLat-e.swLat),facilityType:e.facilityType,minGrade:e.minGrade,availableBedsOnly:e.availableBedsOnly},t=yield we.get("/facilities",{params:a});return Ne(t.data)?fe(t.data):{content:[],totalElements:0,totalPages:0,page:0,size:20,first:!0,last:!0}}catch(a){return{content:[],totalElements:0,totalPages:0,page:0,size:20,first:!0,last:!0}}})},getFacilityDetail(e){return o(this,null,function*(){try{const a=yield we.get(`/facilities/${e}`);return a.data&&"object"==typeof a.data?(e=>{const a=xe(e);return c(n({},a),{detailedDescription:a.description||"ìƒì„¸ ì •ë³´ê°€ ì œê³µë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.",photos:[],videos:[],staffInfo:{totalStaff:0,nurses:0,caregivers:0,doctors:0,socialWorkers:0},programsAndServices:[],mealServices:{breakfastIncluded:!1,lunchIncluded:!1,dinnerIncluded:!1,specialDiets:[]},visitingPolicies:{visitingHours:"ë¬¸ì˜ ë°”ëë‹ˆë‹¤",restrictionsAndGuidelines:[]},contactInfo:{primaryContact:a.phoneNumber,email:"",emergencyContact:a.phoneNumber},reviews:[],averageRating:0})})(a.data):ve(e)}catch(a){return ve(e)}})},getRecommendations(){return o(this,arguments,function*(e={}){return(yield we.get("/facilities/recommendations",{params:e})).data})},getPopularFacilities(){return o(this,null,function*(){return(yield we.get("/facilities",{params:{sortBy:"rating",size:10}})).data.content||[]})},compareFacilities(e){return o(this,null,function*(){return(yield we.post("/facilities/compare",e)).data})},getFavoriteFacilities(e=0,a=20){return o(this,null,function*(){return(yield we.get("/facilities/favorites",{params:{page:e,size:a}})).data})},toggleLike(e){return o(this,null,function*(){try{return(yield we.post(`/facilities/${e}/favorite`,null,{params:{isFavorite:!0}})).data}catch(a){return(yield we.post(`/facilities/${e}/favorite`,null,{params:{isFavorite:!1}})).data}})},shareFacility(e,a){return o(this,null,function*(){return Promise.resolve({success:!0,shareUrl:`${window.location.origin}/facilities/${e}`,message:"ì‹œì„¤ ì •ë³´ê°€ ê³µìœ ë˜ì—ˆìŠµë‹ˆë‹¤."})})},getFacilityStatisticsByRegion(e,a){return o(this,null,function*(){return Promise.resolve({totalCount:0,region:{sido:e,sigungu:a},operatorTypeDistribution:{},capacityStats:{},facilityTypeDistribution:{}})})}},ke=({facilityId:e,isOpen:a,onClose:t,onContact:i,onVisit:l})=>{var r;const[s,n]=h.useState(null),[c,d]=h.useState(!1),[m,f]=h.useState(null);h.useEffect(()=>{a&&e&&N()},[a,e]);const N=()=>o(null,null,function*(){try{d(!0),f(null);const a=yield Ce.get(`/${e}`);n(a.data)}catch(a){f("ì‹œì„¤ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{d(!1)}});return a?u.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[u.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),u.jsxs("div",{className:"relative w-full max-w-4xl max-h-[90vh] mx-4 bg-white rounded-xl shadow-2xl overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gradient-to-r from-blue-50 to-indigo-50",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"ì‹œì„¤ ìƒì„¸ ì •ë³´"}),u.jsx("p",{className:"text-sm text-gray-600",children:"ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ì—°ë½í•´ë³´ì„¸ìš”"})]}),u.jsx(D,{variant:"ghost",size:"sm",onClick:t,className:"rounded-full p-2 hover:bg-gray-100",children:u.jsx(w,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)]",children:c?u.jsx("div",{className:"flex items-center justify-center h-96",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):m?u.jsxs("div",{className:"flex flex-col items-center justify-center h-96 text-center p-6",children:[u.jsx("div",{className:"text-red-500 mb-4",children:"âš ï¸"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"ì˜¤ë¥˜ ë°œìƒ"}),u.jsx("p",{className:"text-gray-600 mb-4",children:m}),u.jsx(D,{onClick:N,variant:"outline",children:"ë‹¤ì‹œ ì‹œë„"})]}):s?u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs(B,{children:[u.jsx(_,{children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{children:[u.jsx(U,{className:"text-xl font-bold text-gray-900",children:s.facilityName}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsx(W,{variant:"secondary",children:s.facilityType}),u.jsxs(W,{variant:"outline",children:[s.facilityGrade,"ë“±ê¸‰"]})]})]}),s.averageRating&&u.jsxs("div",{className:"flex items-center gap-1 text-yellow-500",children:[u.jsx(p,{className:"w-5 h-5 fill-current"}),u.jsx("span",{className:"font-semibold",children:s.averageRating})]})]})}),u.jsxs(H,{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(g,{className:"w-4 h-4"}),u.jsxs("span",{children:[s.region," ",s.district]})]}),s.contactNumber&&u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(x,{className:"w-4 h-4"}),u.jsx("span",{children:s.contactNumber})]}),s.operatingHours&&u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(z,{className:"w-4 h-4"}),u.jsx("span",{children:s.operatingHours})]}),s.capacity&&u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(y,{className:"w-4 h-4"}),u.jsxs("span",{children:["ì •ì› ",s.capacity,"ëª…"]})]}),s.monthlyFee&&u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(k,{className:"w-4 h-4"}),u.jsxs("span",{children:["ì›” ",null==(r=s.monthlyFee)?void 0:r.toLocaleString(),"ì›"]})]})]})]}),s.description&&u.jsxs(B,{children:[u.jsx(_,{children:u.jsx(U,{className:"text-lg",children:"ì‹œì„¤ ì†Œê°œ"})}),u.jsx(H,{children:u.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:s.description})})]}),s.specializedCare&&s.specializedCare.length>0&&u.jsxs(B,{children:[u.jsx(_,{children:u.jsxs(U,{className:"text-lg flex items-center gap-2",children:[u.jsx(C,{className:"w-5 h-5 text-red-500"}),"íŠ¹í™” ì„œë¹„ìŠ¤"]})}),u.jsx(H,{children:u.jsx("div",{className:"flex flex-wrap gap-2",children:s.specializedCare.map((e,a)=>u.jsx(W,{variant:"secondary",className:"text-sm",children:e},a))})})]}),s.amenities&&s.amenities.length>0&&u.jsxs(B,{children:[u.jsx(_,{children:u.jsx(U,{className:"text-lg",children:"í¸ì˜ì‹œì„¤"})}),u.jsx(H,{children:u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:s.amenities.map((e,a)=>u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[u.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e]},a))})})]}),u.jsx(V,{}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[u.jsxs(D,{onClick:()=>o(null,null,function*(){if(s)try{yield Ce.post(`/${s.id}/contact`),null==i||i(s.id),s.contactNumber&&window.open(`tel:${s.contactNumber}`)}catch(e){}}),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3",size:"lg",children:[u.jsx(x,{className:"w-4 h-4 mr-2"}),"ì—°ë½í•˜ê¸°"]}),u.jsxs(D,{onClick:()=>o(null,null,function*(){if(s)try{yield Ce.post(`/${s.id}/visit`),null==l||l(s.id),s.websiteUrl&&window.open(s.websiteUrl,"_blank")}catch(e){}}),variant:"outline",className:"flex-1 border-blue-600 text-blue-600 hover:bg-blue-50 py-3",size:"lg",children:[u.jsx(g,{className:"w-4 h-4 mr-2"}),"ë°©ë¬¸í•˜ê¸°"]})]})]}):null})]})]}):null},Fe=Object.freeze(Object.defineProperty({__proto__:null,default:({memberId:e,coordinatorId:a,showRecommendations:t=!0})=>{K({title:"ì‹œì„¤ ê²€ìƒ‰ ë° ì¶”ì²œ",description:"ë§ì¶¤í˜• ìš”ì–‘ ì‹œì„¤ì„ ì°¾ì•„ë³´ì„¸ìš”. AI ê¸°ë°˜ ì¶”ì²œìœ¼ë¡œ ìµœì ì˜ ì‹œì„¤ì„ ì œì•ˆí•´ë“œë¦½ë‹ˆë‹¤.",keywords:["ìš”ì–‘ì›","ì‹œì„¤ê²€ìƒ‰","ë…¸ì¸ëŒë´„","ì¬ì™¸ë™í¬"],type:"website"});const i=ie(e=>(le.has(e)&&le.get(e)===e.searchResults||le.set(e,e.searchResults),le.get(e))),l=ie(e=>e.isSearching),r=ie(e=>e.isLoadingRecommendations),s=ie(e=>e.searchError),c=ie(e=>e.recommendationError),{recommendations:d,searchFilters:m,isDetailModalOpen:p,isRecommendationModalOpen:y,searchFacilities:g,getRecommendations:x,updateSearchFilters:f,clearSearchResults:N,clearRecommendations:w,openRecommendationModal:C,closeRecommendationModal:k,clearAllErrors:F}=ie(),[S,A]=h.useState("list"),[R,E]=h.useState(!1),[M,T]=h.useState(""),[$,I]=h.useState("search"),[z,_]=h.useState(null),[U,W]=h.useState(!1);h.useEffect(()=>(F(),t&&e&&(I("recommendations"),Q()),()=>{N(),w()}),[e,t]);const V=()=>o(null,null,function*(){if(!M.trim()&&0===Object.keys(m).length)return;const e=n(n({},m),M&&{region:M});yield g(e),I("search")}),Q=()=>o(null,null,function*(){e&&(yield x(e,a))}),q=e=>{_(e.id),W(!0)};return u.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"ì‹œì„¤ ê²€ìƒ‰ ë° ì¶”ì²œ"}),u.jsx("p",{className:"text-gray-600",children:"ë§ì¶¤í˜• ìš”ì–‘ ì‹œì„¤ì„ ì°¾ì•„ë³´ì„¸ìš”. AI ê¸°ë°˜ ì¶”ì²œìœ¼ë¡œ ìµœì ì˜ ì‹œì„¤ì„ ì œì•ˆí•´ë“œë¦½ë‹ˆë‹¤."})]}),u.jsx("div",{className:"mb-6",children:u.jsx("div",{className:"border-b border-gray-200",children:u.jsxs("nav",{className:"-mb-px flex space-x-8",children:[u.jsxs("button",{onClick:()=>I("search"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("search"===$?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[u.jsx(b,{className:"w-4 h-4 inline mr-2"}),"ì‹œì„¤ ê²€ìƒ‰"]}),t&&u.jsxs("button",{onClick:()=>{I("recommendations"),e&&Q()},className:"py-2 px-1 border-b-2 font-medium text-sm "+("recommendations"===$?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[u.jsx(j,{className:"w-4 h-4 inline mr-2"}),"ë§ì¶¤ ì¶”ì²œ",d.length>0&&u.jsx("span",{className:"ml-2 bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full",children:d.length})]})]})})}),u.jsxs(Z,{mode:"wait",children:["search"===$&&u.jsxs(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[u.jsx(B,{className:"mb-6",children:u.jsxs(H,{className:"p-6",children:[u.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[u.jsx("div",{className:"flex-1",children:u.jsxs("div",{className:"relative",children:[u.jsx(b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"ì§€ì—­ëª…ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì„œìš¸ì‹œ ê°•ë‚¨êµ¬)",value:M,onChange:e=>{T(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&V()},className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),u.jsx(D,{onClick:V,disabled:l,className:"px-8 py-3",children:l?u.jsxs(u.Fragment,{children:[u.jsx(v,{className:"w-4 h-4 mr-2 animate-spin"}),"ê²€ìƒ‰ ì¤‘..."]}):u.jsxs(u.Fragment,{children:[u.jsx(b,{className:"w-4 h-4 mr-2"}),"ê²€ìƒ‰"]})}),u.jsxs(D,{variant:"outline",onClick:()=>E(!R),className:"px-4 py-3",children:[u.jsx(L,{className:"w-4 h-4 mr-2"}),"í•„í„°"]})]}),u.jsx(Z,{children:R&&u.jsx(Y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:u.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:u.jsx(ue,{filters:m,onFiltersChange:e=>{f(e),"search"===$&&setTimeout(()=>{V()},500)}})})})})]})}),s&&u.jsx(Y.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6",children:u.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(O,{className:"w-5 h-5 text-red-500 mr-2"}),u.jsx("span",{className:"text-red-700",children:s})]})})}),i.length>0&&u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"ê²€ìƒ‰ ê²°ê³¼"}),u.jsxs("p",{className:"text-gray-600",children:["ì´ ",i.length,"ê°œì˜ ì‹œì„¤ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤."]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(D,{variant:"list"===S?"default":"outline",size:"sm",onClick:()=>A("list"),children:u.jsx(G,{className:"w-4 h-4"})}),u.jsx(D,{variant:"grid"===S?"default":"outline",size:"sm",onClick:()=>A("grid"),children:u.jsx(P,{className:"w-4 h-4"})})]})]}),u.jsx(se,{facilities:i,viewMode:S,isLoading:l,emptyMessage:"ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ì‹œì„¤ì´ ì—†ìŠµë‹ˆë‹¤.",onFacilitySelect:q})]},"search"),"recommendations"===$&&u.jsxs(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[c&&u.jsx(Y.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6",children:u.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(O,{className:"w-5 h-5 text-red-500 mr-2"}),u.jsx("span",{className:"text-red-700",children:c})]})})}),u.jsx(pe,{recommendations:d,isLoading:r,onRefresh:Q,onFacilitySelect:q,memberId:e})]},"recommendations")]}),z&&u.jsx(ke,{facilityId:z,isOpen:U,onClose:()=>{W(!1),_(null)},onContact:e=>{},onVisit:e=>{}})]})})}},Symbol.toStringTag,{value:"Module"}));export{Fe as F,ee as a,ie as u};
