var e=Object.defineProperty,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,r=(e,r)=>{for(var i in r||(r={}))s.call(r,i)&&l(e,i,r[i]);if(t)for(var i of t(r))a.call(r,i)&&l(e,i,r[i]);return e};import{j as i,r as n}from"./react-vendor-DxVTcXnD.js";import{u as o,a as c,b as d,N as x}from"./notificationStore-Cqmvu1Uf.js";import{C as m}from"./index-D5N1MR7h.js";import{a6 as u,a7 as h}from"./vendor-Cb5iQNse.js";import{B as p,C as j,L as g}from"./board-pages-B7TFhQ6F.js";import"./state-management-DszUOxv_.js";import"./ui-libs-CJrx2-W2.js";import"./chat-pages-DH9VB2rd.js";import"./utils-D3YFsgXT.js";const b=({notification:e,onClick:t,showActions:s=!0,compact:a=!1})=>{const{markAsRead:l,deleteNotification:r}=o(),n=c[e.type],x=()=>{e.read||l(e.id),t?t(e):e.actionUrl&&(window.location.href=e.actionUrl)},p=u(new Date(e.createdAt),{addSuffix:!0,locale:h}),j={[d.LOW]:"border-l-gray-300",[d.MEDIUM]:"border-l-blue-400",[d.HIGH]:"border-l-orange-400",[d.URGENT]:"border-l-red-500"};return i.jsx(m,{animation:{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2}},children:i.jsxs("div",{className:`\n          relative p-4 border-l-4 cursor-pointer transition-all duration-200\n          ${j[e.priority]}\n          ${e.read?"bg-gray-50 opacity-75":`${n.bgColor} hover:shadow-md`}\n          ${a?"p-3":"p-4"}\n          hover:bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-blue-500\n        `,onClick:x,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),x())},tabIndex:0,role:"button","aria-label":`알림: ${e.title}. ${e.read?"읽음":"읽지 않음"}`,children:[!e.read&&i.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-blue-500 rounded-full","aria-label":"읽지 않은 알림"}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`text-lg ${n.textColor} flex-shrink-0`,children:n.icon}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("h3",{className:`\n                font-medium text-sm ${e.read?"text-gray-600":"text-gray-900"}\n                ${a?"text-xs":"text-sm"}\n                truncate\n              `,children:e.title}),!a&&i.jsx("span",{className:`\n                  text-xs ${e.read?"text-gray-400":"text-gray-500"}\n                  flex-shrink-0 ml-2\n                `,children:p})]}),i.jsx("p",{className:`\n              text-sm ${e.read?"text-gray-500":"text-gray-700"}\n              ${a?"text-xs line-clamp-1":"line-clamp-2"}\n            `,children:e.message}),e.priority===d.URGENT&&i.jsx("div",{className:"mt-2",children:i.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full",children:"🚨 긴급"})}),s&&!a&&i.jsxs("div",{className:"mt-3 flex gap-2",children:[!e.read&&i.jsx("button",{onClick:t=>{t.stopPropagation(),l(e.id)},className:"text-xs text-blue-600 hover:text-blue-800 focus:outline-none focus:underline","aria-label":"읽음으로 표시",children:"읽음 표시"}),i.jsx("button",{onClick:t=>{t.stopPropagation(),r(e.id)},className:"text-xs text-red-600 hover:text-red-800 focus:outline-none focus:underline","aria-label":"알림 삭제",children:"삭제"})]})]})]})]})})},f=()=>{const{notifications:e,summary:t,filter:s,isLoading:a,error:l,hasMore:c,fetchNotifications:m,markAllAsRead:u,clearAllNotifications:h,setFilter:f,clearFilter:N}=o(),[y,E]=n.useState(!1);n.useEffect(()=>{m()},[m]);const C=e=>{f(e),m(r(r({},s),e))},I=Object.keys(s).length>0;return i.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"알림"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["총 ",t.total,"개의 알림 중 ",t.unread,"개를 읽지 않았습니다."]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(p,{variant:"outline",size:"small",onClick:()=>E(!y),children:["필터 ",y?"숨기기":"보기"]}),t.unread>0&&i.jsx(p,{variant:"outline",size:"small",onClick:()=>{u()},disabled:a,children:"모두 읽음 표시"}),e.length>0&&i.jsx(p,{variant:"outline",size:"small",onClick:()=>{window.confirm("모든 알림을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.")&&h()},disabled:a,className:"text-red-600 hover:text-red-800",children:"모두 삭제"})]})]}),y&&i.jsx(j,{className:"p-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"필터"}),I&&i.jsx(p,{variant:"ghost",size:"small",onClick:()=>{N(),m()},children:"초기화"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"읽음 상태"}),i.jsxs("select",{value:void 0===s.read?"all":s.read.toString(),onChange:e=>{const t="all"===e.target.value?void 0:"true"===e.target.value;C({read:t})},className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"all",children:"전체"}),i.jsx("option",{value:"false",children:"읽지 않음"}),i.jsx("option",{value:"true",children:"읽음"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"우선순위"}),i.jsxs("select",{value:s.priority||"all",onChange:e=>{const t="all"===e.target.value?void 0:e.target.value;C({priority:t})},className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"all",children:"전체"}),i.jsx("option",{value:d.URGENT,children:"긴급"}),i.jsx("option",{value:d.HIGH,children:"높음"}),i.jsx("option",{value:d.MEDIUM,children:"보통"}),i.jsx("option",{value:d.LOW,children:"낮음"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"기간"}),i.jsxs("select",{onChange:e=>{const t=e.target.value,s=new Date;let a;switch(t){case"today":a=new Date(s.getFullYear(),s.getMonth(),s.getDate()).toISOString();break;case"week":a=new Date(s.getTime()-6048e5).toISOString();break;case"month":a=new Date(s.getTime()-2592e6).toISOString();break;default:a=void 0}C({dateFrom:a,dateTo:void 0})},className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"all",children:"전체"}),i.jsx("option",{value:"today",children:"오늘"}),i.jsx("option",{value:"week",children:"최근 7일"}),i.jsx("option",{value:"month",children:"최근 30일"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"알림 타입"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Object.values(x).map(e=>{var t;return i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:(null==(t=s.types)?void 0:t.includes(e))||!1,onChange:t=>{const a=s.types||[],l=t.target.checked?[...a,e]:a.filter(t=>t!==e);C({types:l.length>0?l:void 0})},className:"rounded text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-xs text-gray-700",children:v(e)})]},e)})})]})]})}),i.jsx("div",{className:"space-y-2",children:a&&0===e.length?i.jsxs("div",{className:"flex items-center justify-center py-12",children:[i.jsx(g,{size:"medium"}),i.jsx("span",{className:"ml-3 text-gray-600",children:"알림을 불러오는 중..."})]}):l?i.jsxs(j,{className:"p-8 text-center",children:[i.jsx("p",{className:"text-red-600 mb-4",children:"알림을 불러오는데 실패했습니다."}),i.jsx(p,{variant:"outline",onClick:()=>m(),children:"다시 시도"})]}):0===e.length?i.jsxs(j,{className:"p-12 text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:"🔔"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"알림이 없습니다"}),i.jsx("p",{className:"text-gray-600",children:I?"필터 조건에 맞는 알림이 없습니다.":"새로운 알림이 없습니다."})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"space-y-2",children:e.map(e=>i.jsx(j,{className:"overflow-hidden",children:i.jsx(b,{notification:e,showActions:!0,compact:!1})},e.id))}),c&&i.jsx("div",{className:"text-center py-6",children:i.jsx(p,{variant:"outline",onClick:()=>{m(s,!0)},disabled:a,children:a?"불러오는 중...":"더 보기"})})]})})]})};function v(e){return{[x.FACILITY_MATCH_FOUND]:"시설 매칭",[x.FACILITY_MATCH_CONFIRMED]:"매칭 확정",[x.FACILITY_MATCH_CANCELLED]:"매칭 취소",[x.REVIEW_APPROVED]:"리뷰 승인",[x.REVIEW_REJECTED]:"리뷰 거부",[x.REVIEW_REPORTED]:"리뷰 신고",[x.JOB_APPLICATION_RECEIVED]:"지원 접수",[x.JOB_APPLICATION_APPROVED]:"지원 승인",[x.JOB_APPLICATION_REJECTED]:"지원 거부",[x.JOB_INTERVIEW_SCHEDULED]:"면접 일정",[x.SYSTEM_MAINTENANCE]:"시스템 점검",[x.SYSTEM_UPDATE]:"시스템 업데이트",[x.ACCOUNT_SECURITY]:"계정 보안",[x.GENERAL_INFO]:"일반 정보",[x.PROMOTION]:"프로모션"}[e]||e}const N=()=>i.jsx("div",{className:"container mx-auto py-6",children:i.jsx(f,{})});export{N as default};
