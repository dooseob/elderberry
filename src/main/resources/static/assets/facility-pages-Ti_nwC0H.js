var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(t,l,a)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a,r=(e,t)=>{for(var l in t||(t={}))i.call(t,l)&&s(e,l,t[l]);if(a)for(var l of a(t))n.call(t,l)&&s(e,l,t[l]);return e},c=(e,a)=>t(e,l(a)),d=(e,t,l)=>s(e,"symbol"!=typeof t?t+"":t,l),o=(e,t,l)=>new Promise((a,i)=>{var n=e=>{try{r(l.next(e))}catch(t){i(t)}},s=e=>{try{r(l.throw(e))}catch(t){i(t)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,s);r((l=l.apply(e,t)).next())});import{c as m,r as h,j as u,f as p,V as g,W as y,Y as x,i as f,E as b,Z as v,S as N,X as w,_ as k,$,a0 as C,a1 as j,a2 as F,a3 as S,a4 as R,a5 as M,T as A,a6 as z,N as E,d as T,a7 as P,a8 as I,a9 as O,aa as B,ab as L,ac as D,ad as H,C as U,ae as W,af as _,ag as G,ah as V,ai as K,aj as q,F as Q,ak as J,s as Y,e as Z,al as X,am as ee,an as te,ao as le,I as ae,ap as ie,aq as ne,ar as se,as as re,at as ce}from"./react-vendor-CUGNoUm4.js";import{d as de,s as oe,i as me}from"./state-management-DFZwgI-2.js";import{B as he}from"./core-ui-Bn7VW9o5.js";import{C as ue,d as pe,f as ge,g as ye,L as xe,u as fe,h as be,S as ve}from"./board-pages-Bntz1t0t.js";import{m as Ne,A as we}from"./animation-lib-DMXijsVD.js";import{a as ke}from"./http-client-9JY-woyA.js";const $e=new class{constructor(e={}){d(this,"config"),d(this,"tokenProvider",null),d(this,"isRefreshing",!1),d(this,"failedQueue",[]),this.config=r({baseURL:"/api",timeout:1e4,withCredentials:!0},e)}setTokenProvider(e){this.tokenProvider=e}injectAuthHeaders(e={}){var t;const l=new Headers(e),a=null==(t=this.tokenProvider)?void 0:t.getAccessToken();return a&&l.set("Authorization",`Bearer ${a}`),l.has("Content-Type")||l.set("Content-Type","application/json"),l}handleResponse(e,t){return o(this,null,function*(){if(e.ok)return{data:yield e.json(),status:e.status,statusText:e.statusText,headers:e.headers};if(401===e.status&&this.tokenProvider)return this.handleTokenRefresh(e,t);const l=yield e.json().catch(()=>({}));throw{message:l.message||e.statusText,status:e.status,code:l.code,details:l}})}handleTokenRefresh(e,t){return o(this,null,function*(){if(this.isRefreshing)return new Promise((e,t)=>{this.failedQueue.push({resolve:e,reject:t})});try{return this.isRefreshing=!0,yield this.tokenProvider.refreshToken(),this.failedQueue.forEach(({resolve:e})=>{e(this.request(t.method,t.url,t))}),this.failedQueue=[],yield this.request(t.method,t.url,t)}catch(e){throw this.tokenProvider.logout(),this.failedQueue.forEach(({reject:t})=>{t(e)}),this.failedQueue=[],e}finally{this.isRefreshing=!1}})}request(e,t){return o(this,arguments,function*(e,t,l={}){const s=l,{baseURL:c=this.config.baseURL,timeout:d=this.config.timeout}=s,o=((e,t)=>{var l={};for(var s in e)i.call(e,s)&&t.indexOf(s)<0&&(l[s]=e[s]);if(null!=e&&a)for(var s of a(e))t.indexOf(s)<0&&n.call(e,s)&&(l[s]=e[s]);return l})(s,["baseURL","timeout"]),m=t.startsWith("http")?t:`${c}${t}`,h=new AbortController,u=setTimeout(()=>h.abort(),d);try{const a=yield fetch(m,r({method:e,headers:this.injectAuthHeaders(o.headers),signal:h.signal,credentials:this.config.withCredentials?"include":"same-origin"},o));return yield this.handleResponse(a,r({method:e,url:t},l))}catch(p){if(p instanceof Error&&"AbortError"===p.name)throw new Error(`ìš”ì²­ ì‹œê°„ ì´ˆê³¼ (${d}ms)`);throw p}finally{clearTimeout(u)}})}get(e,t){return o(this,null,function*(){return this.request("GET",e,t)})}post(e,t,l){return o(this,null,function*(){return this.request("POST",e,c(r({},l),{body:t?JSON.stringify(t):void 0}))})}put(e,t,l){return o(this,null,function*(){return this.request("PUT",e,c(r({},l),{body:t?JSON.stringify(t):void 0}))})}delete(e,t){return o(this,null,function*(){return this.request("DELETE",e,t)})}patch(e,t,l){return o(this,null,function*(){return this.request("PATCH",e,c(r({},l),{body:t?JSON.stringify(t):void 0}))})}upload(e,t,l){return o(this,null,function*(){const a=r({},l);if(a.headers){const e=new Headers(a.headers);e.delete("Content-Type"),a.headers=e}return this.request("POST",e,c(r({},a),{body:t}))})}getWithParams(e){return o(this,arguments,function*(e,t={},l){const a=new URLSearchParams;Object.entries(t).forEach(([e,t])=>{null!=t&&(Array.isArray(t)?t.forEach(t=>a.append(e,String(t))):a.append(e,String(t)))});const i=a.toString(),n=i?`${e}?${i}`:e;return this.get(n,l)})}}({baseURL:"/api",timeout:15e3,withCredentials:!0});$e.get.bind($e),$e.post.bind($e),$e.put.bind($e),$e.delete.bind($e),$e.patch.bind($e),$e.upload.bind($e),$e.getWithParams.bind($e);const Ce={searchResults:[],recommendations:[],selectedFacility:null,searchFilters:{},matchingPreference:{preferredRegions:new Set(["ì„œìš¸íŠ¹ë³„ì‹œ","ê²½ê¸°ë„"]),preferredFacilityTypes:new Set(["ìš”ì–‘ì›","ìš”ì–‘ë³‘ì›"]),maxMonthlyFee:3e6,minFacilityGrade:"C",requiredSpecialties:new Set,maxDistanceKm:null,prioritizeAvailability:!0,prioritizeCost:!1,prioritizeQuality:!0},userHistory:[],isSearching:!1,isLoadingRecommendations:!1,isLoadingHistory:!1,searchError:null,recommendationError:null,isDetailModalOpen:!1,isRecommendationModalOpen:!1,isMatchingFormOpen:!1},je={searchFacilities(e){return o(this,null,function*(){try{return(yield $e.getWithParams("/facilities",{facilityType:e.facilityType,facilityGrade:e.facilityGrade,region:e.region,careGradeLevel:e.careGradeLevel})).data.content||[]}catch(t){throw new Error(`ì‹œì„¤ ê²€ìƒ‰ ì‹¤íŒ¨: ${t.message||t.statusText}`)}})},getRecommendations(e,t,l){return o(this,null,function*(){const a={memberId:e.toString(),coordinatorId:l,preference:{preferredRegions:Array.from(t.preferredRegions),preferredFacilityTypes:Array.from(t.preferredFacilityTypes),maxMonthlyFee:t.maxMonthlyFee,minFacilityGrade:t.minFacilityGrade,requiredSpecialties:Array.from(t.requiredSpecialties),maxDistanceKm:t.maxDistanceKm,prioritizeAvailability:t.prioritizeAvailability,prioritizeCost:t.prioritizeCost,prioritizeQuality:t.prioritizeQuality},maxResults:10};try{return(yield $e.post("/facilities/recommendations",a)).data}catch(i){if(400===i.status)throw new Error(`ì¶”ì²œ ì‹œì„¤ ì¡°íšŒ ì‹¤íŒ¨: ê±´ê°• í‰ê°€ ë°ì´í„°ê°€ ì—†ê±°ë‚˜ ìš”ì²­ ë°ì´í„°ê°€ ìž˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤. (${i.status})`);throw new Error(`ì¶”ì²œ ì‹œì„¤ ì¡°íšŒ ì‹¤íŒ¨: ${i.message||i.statusText} (${i.status||"Unknown"})`)}})},trackFacilityAction(e,t){return o(this,null,function*(){try{yield $e.post(`/facilities/${e}/${t}`)}catch(l){throw new Error(`ì‹œì„¤ ${t} ì¶”ì  ì‹¤íŒ¨: ${l.message||l.statusText}`)}})},completeMatching(e,t,l,a){return o(this,null,function*(){const i={outcome:t,satisfactionScore:l,feedback:a};try{yield $e.post(`/facilities/${e}/complete-matching`,i)}catch(n){throw new Error(`ë§¤ì¹­ ì™„ë£Œ ì²˜ë¦¬ ì‹¤íŒ¨: ${n.message||n.statusText}`)}})},getUserHistory(){return o(this,null,function*(){try{return(yield $e.get("/facilities/matching-history")).data}catch(e){throw new Error(`ë§¤ì¹­ ì´ë ¥ ì¡°íšŒ ì‹¤íŒ¨: ${e.message||e.statusText}`)}})}},Fe=m()(de(oe(me((e,t)=>c(r({},Ce),{searchFacilities:t=>o(null,null,function*(){e(e=>{e.isSearching=!0,e.searchError=null});try{const l=yield je.searchFacilities(t);e(e=>{e.searchResults=l,e.searchFilters=t,e.isSearching=!1})}catch(l){e(e=>{e.searchError=l instanceof Error?l.message:"ì‹œì„¤ ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",e.isSearching=!1})}}),updateSearchFilters:t=>{e(e=>{Object.assign(e.searchFilters,t)})},clearSearchResults:()=>{e(e=>{e.searchResults=[],e.searchFilters={},e.searchError=null})},getRecommendations:(l,a)=>o(null,null,function*(){e(e=>{e.isLoadingRecommendations=!0,e.recommendationError=null});try{const i=yield je.getRecommendations(l,t().matchingPreference,a);e(e=>{e.recommendations=i,e.isLoadingRecommendations=!1})}catch(i){e(e=>{e.recommendationError=i instanceof Error?i.message:"ì‹œì„¤ ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",e.isLoadingRecommendations=!1})}}),updateMatchingPreference:t=>{e(e=>{Object.assign(e.matchingPreference,t)})},clearRecommendations:()=>{e(e=>{e.recommendations=[],e.recommendationError=null})},selectFacility:t=>{e(e=>{e.selectedFacility=t})},clearSelectedFacility:()=>{e(e=>{e.selectedFacility=null})},trackFacilityView:e=>o(null,null,function*(){}),trackFacilityContact:e=>o(null,null,function*(){try{yield je.trackFacilityAction(e,"contact"),t().loadUserHistory()}catch(l){}}),trackFacilityVisit:e=>o(null,null,function*(){try{yield je.trackFacilityAction(e,"visit"),t().loadUserHistory()}catch(l){}}),completeMatching:(e,l,a,i)=>o(null,null,function*(){try{yield je.completeMatching(e,l,a,i),t().loadUserHistory()}catch(n){throw n}}),loadUserHistory:()=>o(null,null,function*(){e(e=>{e.isLoadingHistory=!0});try{const t=yield je.getUserHistory();e(e=>{e.userHistory=t,e.isLoadingHistory=!1})}catch(t){e(e=>{e.isLoadingHistory=!1})}}),clearUserHistory:()=>{e(e=>{e.userHistory=[]})},openDetailModal:()=>{e(e=>{e.isDetailModalOpen=!0})},closeDetailModal:()=>{e(e=>{e.isDetailModalOpen=!1})},openRecommendationModal:()=>{e(e=>{e.isRecommendationModalOpen=!0})},closeRecommendationModal:()=>{e(e=>{e.isRecommendationModalOpen=!1})},openMatchingForm:()=>{e(e=>{e.isMatchingFormOpen=!0})},closeMatchingForm:()=>{e(e=>{e.isMatchingFormOpen=!1})},setSearchError:t=>{e(e=>{e.searchError=t})},setRecommendationError:t=>{e(e=>{e.recommendationError=t})},clearAllErrors:()=>{e(e=>{e.searchError=null,e.recommendationError=null})},resetFacilityState:()=>{e(()=>r({},Ce))}}))),{name:"FacilityStore"})),Se=new WeakMap,Re=({facility:e,viewMode:t="list",onSelect:l,showActions:a=!0,isRecommendation:i=!1,matchScore:n,recommendationReason:s})=>{const[r,c]=h.useState(null),{selectFacility:d,openDetailModal:m,trackFacilityContact:v,trackFacilityVisit:N}=Fe(),w=()=>{d(e),m(),null==l||l(e)},k=t=>o(null,null,function*(){t.stopPropagation(),c("contact");try{yield v(e.id),window.open(`tel:${e.phoneNumber}`)}catch(l){}finally{c(null)}}),$=t=>o(null,null,function*(){t.stopPropagation(),c("visit");try{yield N(e.id),alert("ë°©ë¬¸ ì˜ˆì•½ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹œì„¤ì—ì„œ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.")}catch(l){}finally{c(null)}}),C=e=>{switch(e){case"A":return"text-green-600 bg-green-100";case"B":return"text-blue-600 bg-blue-100";case"C":return"text-yellow-600 bg-yellow-100";case"D":return"text-orange-600 bg-orange-100";case"E":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},j=e.totalCapacity-e.currentOccupancy,F=e.currentOccupancy/e.totalCapacity*100,S=e=>e?`${(e/1e4).toFixed(0)}ë§Œì›`:"ë¬¸ì˜";return"grid"===t?u.jsx(Ne.div,{whileHover:{y:-4},transition:{duration:.2},children:u.jsxs(ue,{className:"h-full cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:w,children:[i&&n&&u.jsx("div",{className:"absolute top-4 right-4 z-10",children:u.jsxs("div",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium flex items-center",children:[u.jsx(p,{className:"w-3 h-3 mr-1"}),Math.round(n),"% ë§¤ì¹­"]})}),u.jsxs("div",{className:"relative h-48 bg-gray-200 rounded-t-lg overflow-hidden",children:[e.imageUrl?u.jsx("img",{src:e.imageUrl,alt:e.facilityName,className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx(g,{className:"w-12 h-12 text-gray-400"})}),u.jsx("div",{className:"absolute top-3 left-3",children:u.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C(e.facilityGrade)}`,children:[e.facilityGrade,"ë“±ê¸‰"]})})]}),u.jsxs(pe,{className:"p-4",children:[u.jsxs("div",{className:"mb-3",children:[u.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-1 line-clamp-1",children:e.facilityName}),u.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.facilityType}),u.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[u.jsx(y,{className:"w-4 h-4 mr-1"}),u.jsx("span",{className:"line-clamp-1",children:e.address})]})]}),u.jsxs("div",{className:"mb-3",children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[u.jsx("span",{className:"text-gray-600",children:"ìž…ì†Œ í˜„í™©"}),u.jsx("span",{className:"font-medium "+(j>0?"text-green-600":"text-red-600"),children:j>0?`${j}ëª… ìž…ì†Œ ê°€ëŠ¥`:"ìž…ì†Œ ëŒ€ê¸°"})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"h-2 rounded-full "+(F>=90?"bg-red-500":F>=70?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(F,100)}%`}})})]}),u.jsx("div",{className:"mb-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"ì›” ê¸°ë³¸ë£Œ"}),u.jsx("span",{className:"font-semibold text-lg text-gray-900",children:S(e.monthlyBasicFee)})]})}),e.specialties&&e.specialties.length>0&&u.jsx("div",{className:"mb-4",children:u.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.specialties.slice(0,2).map(e=>u.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full",children:e},e)),e.specialties.length>2&&u.jsxs("span",{className:"px-2 py-1 bg-gray-50 text-gray-600 text-xs rounded-full",children:["+",e.specialties.length-2]})]})}),i&&s&&u.jsx("div",{className:"mb-4 p-2 bg-purple-50 rounded-lg",children:u.jsxs("p",{className:"text-xs text-purple-700 line-clamp-2",children:["ðŸ’¡ ",s]})}),a&&u.jsxs("div",{className:"flex space-x-2",children:[u.jsx(he,{variant:"outline",size:"sm",onClick:k,disabled:"contact"===r,className:"flex-1",children:"contact"===r?u.jsx(Ne.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:u.jsx(x,{className:"w-4 h-4"})}):u.jsx(x,{className:"w-4 h-4"})}),u.jsx(he,{size:"sm",onClick:$,disabled:"visit"===r,className:"flex-1",children:"visit"===r?u.jsx(Ne.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:u.jsx(f,{className:"w-4 h-4"})}):u.jsxs(u.Fragment,{children:[u.jsx(f,{className:"w-4 h-4 mr-1"}),"ë°©ë¬¸"]})})]})]})]})}):u.jsx(Ne.div,{whileHover:{x:4},transition:{duration:.2},children:u.jsx(ue,{className:"cursor-pointer hover:shadow-md transition-shadow duration-200",onClick:w,children:u.jsx(pe,{className:"p-6",children:u.jsxs("div",{className:"flex items-start space-x-4",children:[u.jsx("div",{className:"relative w-24 h-24 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0",children:e.imageUrl?u.jsx("img",{src:e.imageUrl,alt:e.facilityName,className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx(g,{className:"w-8 h-8 text-gray-400"})})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"flex items-start justify-between mb-2",children:u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-xl text-gray-900 mb-1",children:e.facilityName}),u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx("span",{className:"text-gray-600",children:e.facilityType}),u.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C(e.facilityGrade)}`,children:[e.facilityGrade,"ë“±ê¸‰"]}),i&&n&&u.jsxs("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium flex items-center",children:[u.jsx(p,{className:"w-3 h-3 mr-1"}),Math.round(n),"% ë§¤ì¹­"]})]})]})}),u.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-3",children:[u.jsx(y,{className:"w-4 h-4 mr-1"}),u.jsx("span",{children:e.address})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[u.jsx("span",{className:"text-gray-600",children:"ìž…ì†Œ í˜„í™©"}),u.jsx("span",{className:"font-medium "+(j>0?"text-green-600":"text-red-600"),children:j>0?`${j}ëª… ê°€ëŠ¥`:"ëŒ€ê¸°"})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"h-2 rounded-full "+(F>=90?"bg-red-500":F>=70?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(F,100)}%`}})})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"ì›” ê¸°ë³¸ë£Œ"}),u.jsx("div",{className:"font-semibold text-lg text-gray-900",children:S(e.monthlyBasicFee)})]})]}),e.specialties&&e.specialties.length>0&&u.jsx("div",{className:"mb-3",children:u.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.specialties.slice(0,4).map(e=>u.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full",children:e},e)),e.specialties.length>4&&u.jsxs("span",{className:"px-2 py-1 bg-gray-50 text-gray-600 text-xs rounded-full",children:["+",e.specialties.length-4,"ê°œ ë”"]})]})}),i&&s&&u.jsx("div",{className:"mb-3 p-3 bg-purple-50 rounded-lg",children:u.jsxs("p",{className:"text-sm text-purple-700",children:["ðŸ’¡ ",s]})}),a&&u.jsxs("div",{className:"flex space-x-2 pt-2",children:[u.jsx(he,{variant:"outline",size:"sm",onClick:k,disabled:"contact"===r,children:"contact"===r?u.jsx(Ne.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:u.jsx(x,{className:"w-4 h-4"})}):u.jsxs(u.Fragment,{children:[u.jsx(x,{className:"w-4 h-4 mr-1"}),"ì—°ë½í•˜ê¸°"]})}),u.jsx(he,{size:"sm",onClick:$,disabled:"visit"===r,children:"visit"===r?u.jsx(Ne.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:u.jsx(f,{className:"w-4 h-4"})}):u.jsxs(u.Fragment,{children:[u.jsx(f,{className:"w-4 h-4 mr-1"}),"ë°©ë¬¸ ì˜ˆì•½"]})}),u.jsxs(he,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),w()},children:[u.jsx(b,{className:"w-4 h-4 mr-1"}),"ìƒì„¸ë³´ê¸°"]})]})]})]})})})})},Me=({facilities:e,viewMode:t="list",isLoading:l=!1,emptyMessage:a="ì‹œì„¤ì´ ì—†ìŠµë‹ˆë‹¤.",onFacilitySelect:i,showActions:n=!0})=>{const s=()=>u.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((e,t)=>u.jsx(ue,{className:"animate-pulse",children:u.jsx(pe,{className:"p-6",children:u.jsxs("div",{className:"flex items-start space-x-4",children:[u.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-lg flex-shrink-0"}),u.jsxs("div",{className:"flex-1 space-y-3",children:[u.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]}),u.jsxs("div",{className:"flex space-x-2 pt-2",children:[u.jsx("div",{className:"h-8 bg-gray-200 rounded w-20"}),u.jsx("div",{className:"h-8 bg-gray-200 rounded w-20"})]})]}),u.jsxs("div",{className:"text-right space-y-2",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"}),u.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-12"})]})]})})},t))}),r=()=>u.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"text-center py-12",children:u.jsx(ue,{children:u.jsx(pe,{className:"p-12",children:u.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[u.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:u.jsx(N,{className:"w-8 h-8 text-gray-400"})}),u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤"}),u.jsx("p",{className:"text-gray-500 max-w-md",children:a})]}),u.jsx("div",{className:"text-sm text-gray-400 mt-4",children:u.jsx("p",{children:"ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ í•„í„°ë¥¼ ì¡°ì •í•´ë³´ì„¸ìš”."})})]})})})});return l?u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex items-center justify-center py-8",children:u.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[u.jsx(v,{className:"w-5 h-5 animate-spin"}),u.jsx("span",{children:"ì‹œì„¤ì„ ê²€ìƒ‰í•˜ê³  ìžˆìŠµë‹ˆë‹¤..."})]})}),u.jsx(s,{})]}):0===e.length?u.jsx(r,{}):"grid"===t?u.jsx(Ne.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.jsx(we,{children:e.map((e,t)=>u.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.05*t},children:u.jsx(Re,{facility:e,viewMode:"grid",onSelect:i,showActions:n})},e.id))})}):u.jsx(Ne.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"space-y-4",children:u.jsx(we,{children:e.map((e,t)=>u.jsx(Ne.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,delay:.05*t},children:u.jsx(Re,{facility:e,viewMode:"list",onSelect:i,showActions:n})},e.id))})})},Ae=[{value:"ìš”ì–‘ì‹œì„¤",label:"ë…¸ì¸ìš”ì–‘ì‹œì„¤",description:"24ì‹œê°„ ì¼€ì–´ ì„œë¹„ìŠ¤"},{value:"ìš”ì–‘ë³‘ì›",label:"ìš”ì–‘ë³‘ì›",description:"ì˜ë£Œì§„ ìƒì£¼ ì¹˜ë£Œ"},{value:"ì–‘ë¡œì‹œì„¤",label:"ì–‘ë¡œì‹œì„¤",description:"ë…ë¦½ìƒí™œ ì§€ì›"},{value:"ì¹˜ë§¤ì „ë¬¸ì‹œì„¤",label:"ì¹˜ë§¤ì „ë¬¸ì‹œì„¤",description:"ì¹˜ë§¤ íŠ¹í™” ì¼€ì–´"},{value:"ìž¬í™œì „ë¬¸ì‹œì„¤",label:"ìž¬í™œì „ë¬¸ì‹œì„¤",description:"ìž¬í™œì¹˜ë£Œ ì¤‘ì‹¬"},{value:"ë‹¨ê¸°ë³´í˜¸ì‹œì„¤",label:"ë‹¨ê¸°ë³´í˜¸ì‹œì„¤",description:"ìž„ì‹œ ë³´í˜¸ ì„œë¹„ìŠ¤"}],ze=[{value:"A",label:"Aë“±ê¸‰",description:"ìµœìš°ìˆ˜ (90ì  ì´ìƒ)",color:"text-green-600"},{value:"B",label:"Bë“±ê¸‰",description:"ìš°ìˆ˜ (80-89ì )",color:"text-blue-600"},{value:"C",label:"Cë“±ê¸‰",description:"ì–‘í˜¸ (70-79ì )",color:"text-yellow-600"},{value:"D",label:"Dë“±ê¸‰",description:"ë³´í†µ (60-69ì )",color:"text-orange-600"},{value:"E",label:"Eë“±ê¸‰",description:"ë¯¸í¡ (60ì  ë¯¸ë§Œ)",color:"text-red-600"}],Ee=[{value:1,label:"1ë“±ê¸‰",description:"ìµœì¤‘ì¦ (95ì  ì´ìƒ)"},{value:2,label:"2ë“±ê¸‰",description:"ì¤‘ì¦ (75-94ì )"},{value:3,label:"3ë“±ê¸‰",description:"ì¤‘ë“±ë„ (60-74ì )"},{value:4,label:"4ë“±ê¸‰",description:"ê²½ì¦ (51-59ì )"},{value:5,label:"5ë“±ê¸‰",description:"ê²½ì¦ (45-50ì )"}],Te=["ì„œìš¸íŠ¹ë³„ì‹œ","ë¶€ì‚°ê´‘ì—­ì‹œ","ëŒ€êµ¬ê´‘ì—­ì‹œ","ì¸ì²œê´‘ì—­ì‹œ","ê´‘ì£¼ê´‘ì—­ì‹œ","ëŒ€ì „ê´‘ì—­ì‹œ","ìš¸ì‚°ê´‘ì—­ì‹œ","ì„¸ì¢…íŠ¹ë³„ìžì¹˜ì‹œ","ê²½ê¸°ë„","ê°•ì›ë„","ì¶©ì²­ë¶ë„","ì¶©ì²­ë‚¨ë„","ì „ë¼ë¶ë„","ì „ë¼ë‚¨ë„","ê²½ìƒë¶ë„","ê²½ìƒë‚¨ë„","ì œì£¼íŠ¹ë³„ìžì¹˜ë„"],Pe=[{value:1e6,label:"100ë§Œì› ì´í•˜"},{value:15e5,label:"150ë§Œì› ì´í•˜"},{value:2e6,label:"200ë§Œì› ì´í•˜"},{value:25e5,label:"250ë§Œì› ì´í•˜"},{value:3e6,label:"300ë§Œì› ì´í•˜"},{value:5e6,label:"500ë§Œì› ì´í•˜"}],Ie=["ì¹˜ë§¤ì¼€ì–´","ìž¬í™œì¹˜ë£Œ","ë¬¼ë¦¬ì¹˜ë£Œ","ìž‘ì—…ì¹˜ë£Œ","ì–¸ì–´ì¹˜ë£Œ","ì¸ì§€ì¹˜ë£Œ","í˜¸ìŠ¤í”¼ìŠ¤ì¼€ì–´","ì˜ë£Œì¼€ì–´","ì˜ì–‘ê´€ë¦¬","ì‹¬ë¦¬ìƒë‹´"],Oe=({filters:e,onFiltersChange:t,onClear:l})=>{const[a,i]=h.useState(new Set(["type","grade"])),n=e=>{const t=new Set(a);t.has(e)?t.delete(e):t.add(e),i(t)},s=(e,l)=>{t({[e]:l})},r=Object.values(e).filter(e=>null!=e&&""!==e).length;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["ìƒì„¸ í•„í„°",r>0&&u.jsxs("span",{className:"ml-2 bg-blue-100 text-blue-800 text-sm px-2 py-1 rounded-full",children:[r,"ê°œ ì ìš©ë¨"]})]}),r>0&&u.jsxs(he,{variant:"outline",size:"sm",onClick:()=>{t({facilityType:void 0,facilityGrade:void 0,region:void 0,careGradeLevel:void 0,maxMonthlyFee:void 0,minFacilityGrade:void 0,specialties:void 0,maxDistanceKm:void 0,hasAvailableSlots:void 0}),null==l||l()},className:"text-gray-500 hover:text-gray-700",children:[u.jsx(w,{className:"w-4 h-4 mr-1"}),"ì „ì²´ ì´ˆê¸°í™”"]})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[u.jsxs("button",{onClick:()=>n("type"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(g,{className:"w-5 h-5 text-gray-400 mr-2"}),u.jsx("span",{className:"font-medium",children:"ì‹œì„¤ íƒ€ìž…"})]}),u.jsx(Ne.div,{animate:{rotate:a.has("type")?180:0},transition:{duration:.2},children:u.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),a.has("type")&&u.jsx(Ne.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:Ae.map(t=>u.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"facilityType",value:t.value,checked:e.facilityType===t.value,onChange:e=>s("facilityType",e.target.value),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.label}),u.jsx("div",{className:"text-xs text-gray-500",children:t.description})]})]},t.value))})})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[u.jsxs("button",{onClick:()=>n("grade"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(p,{className:"w-5 h-5 text-gray-400 mr-2"}),u.jsx("span",{className:"font-medium",children:"ì‹œì„¤ ë“±ê¸‰"})]}),u.jsx(Ne.div,{animate:{rotate:a.has("grade")?180:0},transition:{duration:.2},children:u.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),a.has("grade")&&u.jsx(Ne.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:ze.map(t=>u.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"facilityGrade",value:t.value,checked:e.facilityGrade===t.value,onChange:e=>s("facilityGrade",e.target.value),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),u.jsxs("div",{children:[u.jsx("div",{className:`text-sm font-medium ${t.color}`,children:t.label}),u.jsx("div",{className:"text-xs text-gray-500",children:t.description})]})]},t.value))})})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[u.jsxs("button",{onClick:()=>n("region"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(y,{className:"w-5 h-5 text-gray-400 mr-2"}),u.jsx("span",{className:"font-medium",children:"ì§€ì—­"})]}),u.jsx(Ne.div,{animate:{rotate:a.has("region")?180:0},transition:{duration:.2},children:u.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),a.has("region")&&u.jsx(Ne.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:u.jsxs("select",{value:e.region||"",onChange:e=>s("region",e.target.value||void 0),className:"mt-3 w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[u.jsx("option",{value:"",children:"ì „ì²´ ì§€ì—­"}),Te.map(e=>u.jsx("option",{value:e,children:e},e))]})})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[u.jsxs("button",{onClick:()=>n("care"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(k,{className:"w-5 h-5 text-gray-400 mr-2"}),u.jsx("span",{className:"font-medium",children:"ì¼€ì–´ ë“±ê¸‰"})]}),u.jsx(Ne.div,{animate:{rotate:a.has("care")?180:0},transition:{duration:.2},children:u.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),a.has("care")&&u.jsx(Ne.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:Ee.map(t=>u.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"careGradeLevel",value:t.value,checked:e.careGradeLevel===t.value,onChange:e=>s("careGradeLevel",parseInt(e.target.value)),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.label}),u.jsx("div",{className:"text-xs text-gray-500",children:t.description})]})]},t.value))})})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[u.jsxs("button",{onClick:()=>n("cost"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx($,{className:"w-5 h-5 text-gray-400 mr-2"}),u.jsx("span",{className:"font-medium",children:"ì›” ë¹„ìš©"})]}),u.jsx(Ne.div,{animate:{rotate:a.has("cost")?180:0},transition:{duration:.2},children:u.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),a.has("cost")&&u.jsx(Ne.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:u.jsx("div",{className:"space-y-2 mt-3",children:Pe.map(t=>u.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"maxMonthlyFee",value:t.value,checked:e.maxMonthlyFee===t.value,onChange:e=>s("maxMonthlyFee",parseInt(e.target.value)),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),u.jsx("span",{className:"text-sm text-gray-900",children:t.label})]},t.value))})})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[u.jsxs("button",{onClick:()=>n("specialties"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(p,{className:"w-5 h-5 text-gray-400 mr-2"}),u.jsx("span",{className:"font-medium",children:"ì „ë¬¸ ì„œë¹„ìŠ¤"})]}),u.jsx(Ne.div,{animate:{rotate:a.has("specialties")?180:0},transition:{duration:.2},children:u.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),a.has("specialties")&&u.jsx(Ne.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:u.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:Ie.map(t=>u.jsx("button",{onClick:()=>{const l=e.specialties||[],a=l.includes(t)?l.filter(e=>e!==t):[...l,t];s("specialties",a.length>0?a:void 0)},className:"px-3 py-1 text-sm rounded-full border transition-colors "+((e.specialties||[]).includes(t)?"bg-blue-100 border-blue-300 text-blue-800":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"),children:t},t))})})]}),u.jsx("div",{className:"border border-gray-200 rounded-lg",children:u.jsxs("div",{className:"px-4 py-3",children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"ê¸°íƒ€ ì˜µì…˜"}),u.jsx("div",{className:"space-y-3",children:u.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:e.hasAvailableSlots||!1,onChange:e=>s("hasAvailableSlots",!!e.target.checked||void 0),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),u.jsx("span",{className:"text-sm text-gray-900",children:"ìž…ì†Œ ê°€ëŠ¥í•œ ì‹œì„¤ë§Œ ë³´ê¸°"})]})})]})})]})},Be=({recommendations:e,isLoading:t=!1,onRefresh:l,memberId:a,showPreferences:i=!0})=>{const{matchingPreference:n,updateMatchingPreference:s}=Fe(),[r,c]=h.useState(!1),[d,o]=h.useState(!1),m={averageScore:e.length>0?Math.round(e.reduce((e,t)=>e+t.matchScore,0)/e.length):0,highScoreCount:e.filter(e=>e.matchScore>=80).length,mediumScoreCount:e.filter(e=>e.matchScore>=60&&e.matchScore<80).length,lowScoreCount:e.filter(e=>e.matchScore<60).length},p=(()=>{const e=[];return m.averageScore>=80?e.push({type:"success",icon:E,title:"ìš°ìˆ˜í•œ ë§¤ì¹­ ê²°ê³¼",description:"íšŒì›ë‹˜ì˜ ìš”êµ¬ì‚¬í•­ì— ìž˜ ë§žëŠ” ì‹œì„¤ë“¤ì´ ë§Žì´ ì°¾ì•„ì¡ŒìŠµë‹ˆë‹¤."}):m.averageScore>=60?e.push({type:"warning",icon:T,title:"ì–‘í˜¸í•œ ë§¤ì¹­ ê²°ê³¼",description:"ì¼ë¶€ ì¡°ê±´ì„ ì¡°ì •í•˜ë©´ ë” ì í•©í•œ ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤."}):e.push({type:"info",icon:P,title:"ë§¤ì¹­ ì¡°ê±´ ê²€í†  í•„ìš”",description:"ì„ í˜¸ ì¡°ê±´ì„ ì¡°ì •í•˜ì—¬ ë” ë‚˜ì€ ì¶”ì²œ ê²°ê³¼ë¥¼ ë°›ì•„ë³´ì„¸ìš”."}),0===m.highScoreCount&&e.push({type:"tip",icon:z,title:"ì¶”ì²œ íŒ",description:"ì§€ì—­ ë²”ìœ„ë¥¼ ë„“ížˆê±°ë‚˜ ë¹„ìš© ì¡°ê±´ì„ ì¡°ì •í•´ë³´ì„¸ìš”."}),e})(),g=(e,t)=>{s({[e]:t})};return t?u.jsxs("div",{className:"space-y-6",children:[u.jsx(ue,{children:u.jsx(pe,{className:"p-6",children:u.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[u.jsx(Ne.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:u.jsx(C,{className:"w-6 h-6 text-purple-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AIê°€ ë§žì¶¤í˜• ì‹œì„¤ì„ ë¶„ì„ ì¤‘ìž…ë‹ˆë‹¤"}),u.jsx("p",{className:"text-gray-600",children:"íšŒì›ë‹˜ì˜ ê±´ê°• ìƒíƒœì™€ ì„ í˜¸ë„ë¥¼ ì¢…í•©ì ìœ¼ë¡œ ë¶„ì„í•˜ê³  ìžˆì–´ìš”..."})]})]})})}),u.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((e,t)=>u.jsx(ue,{className:"animate-pulse",children:u.jsx(pe,{className:"p-6",children:u.jsxs("div",{className:"flex items-start space-x-4",children:[u.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-lg"}),u.jsxs("div",{className:"flex-1 space-y-3",children:[u.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]}),u.jsxs("div",{className:"text-right space-y-2",children:[u.jsx("div",{className:"h-8 bg-gray-200 rounded w-16"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"})]})]})})},t))})]}):0===e.length?u.jsx("div",{className:"text-center py-12",children:u.jsx(ue,{children:u.jsx(pe,{className:"p-12",children:u.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[u.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center",children:u.jsx(j,{className:"w-8 h-8 text-purple-600"})}),u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ì¶”ì²œ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤"}),u.jsx("p",{className:"text-gray-500 max-w-md",children:"í˜„ìž¬ ì¡°ê±´ì— ë§žëŠ” ì‹œì„¤ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì„ í˜¸ ì¡°ê±´ì„ ì¡°ì •í•˜ê±°ë‚˜ ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”."})]}),l&&u.jsxs(he,{onClick:l,variant:"outline",children:[u.jsx(v,{className:"w-4 h-4 mr-2"}),"ë‹¤ì‹œ ì¶”ì²œë°›ê¸°"]})]})})})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs(ue,{children:[u.jsx(ge,{children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:u.jsx(j,{className:"w-5 h-5 text-purple-600"})}),u.jsxs("div",{children:[u.jsx(ye,{className:"text-xl",children:"ë§žì¶¤í˜• ì¶”ì²œ ê²°ê³¼"}),u.jsxs("p",{className:"text-gray-600",children:["AIê°€ ë¶„ì„í•œ íšŒì›ë‹˜ê»˜ ìµœì ì˜ ì‹œì„¤ ",e.length,"ê³³"]})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[l&&u.jsxs(he,{variant:"outline",size:"sm",onClick:l,children:[u.jsx(v,{className:"w-4 h-4 mr-1"}),"ìƒˆë¡œê³ ì¹¨"]}),i&&u.jsxs(he,{variant:"outline",size:"sm",onClick:()=>c(!r),children:[u.jsx(F,{className:"w-4 h-4 mr-1"}),"ì„ í˜¸ë„ ì„¤ì •"]})]})]})}),u.jsxs(pe,{children:[u.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[m.averageScore,"%"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"í‰ê·  ë§¤ì¹­ë„"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-green-600",children:m.highScoreCount}),u.jsx("div",{className:"text-sm text-gray-600",children:"ìš°ìˆ˜ ë§¤ì¹­ (80%+)"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:m.mediumScoreCount}),u.jsx("div",{className:"text-sm text-gray-600",children:"ì–‘í˜¸ ë§¤ì¹­ (60-79%)"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-gray-600",children:m.lowScoreCount}),u.jsx("div",{className:"text-sm text-gray-600",children:"ë³´í†µ ë§¤ì¹­ (60% ë¯¸ë§Œ)"})]})]}),u.jsxs("button",{onClick:()=>o(!d),className:"w-full flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(C,{className:"w-5 h-5 text-purple-600"}),u.jsx("span",{className:"font-medium",children:"AI ì¶”ì²œ ë¶„ì„ ê²°ê³¼"})]}),d?u.jsx(S,{className:"w-5 h-5 text-gray-400"}):u.jsx(R,{className:"w-5 h-5 text-gray-400"})]}),u.jsx(we,{children:d&&u.jsx(Ne.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:u.jsx("div",{className:"pt-4 space-y-3",children:p.map((e,t)=>{const l=e.icon,a={success:"text-green-600 bg-green-50",warning:"text-yellow-600 bg-yellow-50",info:"text-blue-600 bg-blue-50",tip:"text-purple-600 bg-purple-50"}[e.type];return u.jsx("div",{className:`p-3 rounded-lg ${a}`,children:u.jsxs("div",{className:"flex items-start space-x-2",children:[u.jsx(l,{className:"w-5 h-5 mt-0.5"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:e.title}),u.jsx("div",{className:"text-sm opacity-90",children:e.description})]})]})},t)})})})})]})]}),u.jsx(we,{children:r&&u.jsx(Ne.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:u.jsxs(ue,{children:[u.jsx(ge,{children:u.jsxs(ye,{className:"text-lg flex items-center",children:[u.jsx(F,{className:"w-5 h-5 mr-2"}),"ì¶”ì²œ ì„ í˜¸ë„ ì„¤ì •"]})}),u.jsxs(pe,{children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"space-y-3",children:[u.jsx("h4",{className:"font-medium",children:"ìš°ì„ ìˆœìœ„"}),u.jsxs("label",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",checked:n.prioritizeQuality,onChange:e=>g("prioritizeQuality",e.target.checked),className:"rounded border-gray-300"}),u.jsx("span",{className:"text-sm",children:"í’ˆì§ˆ ìš°ì„ "})]}),u.jsxs("label",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",checked:n.prioritizeCost,onChange:e=>g("prioritizeCost",e.target.checked),className:"rounded border-gray-300"}),u.jsx("span",{className:"text-sm",children:"ë¹„ìš© ìš°ì„ "})]}),u.jsxs("label",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",checked:n.prioritizeAvailability,onChange:e=>g("prioritizeAvailability",e.target.checked),className:"rounded border-gray-300"}),u.jsx("span",{className:"text-sm",children:"ìž…ì†Œ ê°€ëŠ¥ì„± ìš°ì„ "})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h4",{className:"font-medium",children:"ìµœëŒ€ ì›” ë¹„ìš©"}),u.jsxs("select",{value:n.maxMonthlyFee||"",onChange:e=>g("maxMonthlyFee",e.target.value?parseInt(e.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",children:[u.jsx("option",{value:"",children:"ì œí•œ ì—†ìŒ"}),u.jsx("option",{value:"1500000",children:"150ë§Œì›"}),u.jsx("option",{value:"2000000",children:"200ë§Œì›"}),u.jsx("option",{value:"2500000",children:"250ë§Œì›"}),u.jsx("option",{value:"3000000",children:"300ë§Œì›"}),u.jsx("option",{value:"4000000",children:"400ë§Œì›"}),u.jsx("option",{value:"5000000",children:"500ë§Œì›"})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h4",{className:"font-medium",children:"ìµœì†Œ ì‹œì„¤ ë“±ê¸‰"}),u.jsxs("select",{value:n.minFacilityGrade,onChange:e=>g("minFacilityGrade",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",children:[u.jsx("option",{value:"E",children:"Eë“±ê¸‰ ì´ìƒ"}),u.jsx("option",{value:"D",children:"Dë“±ê¸‰ ì´ìƒ"}),u.jsx("option",{value:"C",children:"Cë“±ê¸‰ ì´ìƒ"}),u.jsx("option",{value:"B",children:"Bë“±ê¸‰ ì´ìƒ"}),u.jsx("option",{value:"A",children:"Aë“±ê¸‰ë§Œ"})]})]})]}),u.jsx("div",{className:"mt-4 pt-4 border-t",children:u.jsxs(he,{onClick:l,className:"w-full",children:[u.jsx(M,{className:"w-4 h-4 mr-2"}),"ìƒˆë¡œìš´ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ ì¶”ì²œë°›ê¸°"]})})]})]})})}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"ì¶”ì²œ ì‹œì„¤ ëª©ë¡"}),u.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[u.jsx(A,{className:"w-4 h-4"}),u.jsx("span",{children:"ë§¤ì¹­ë„ ìˆœìœ¼ë¡œ ì •ë ¬ë¨"})]})]}),u.jsx(we,{children:e.map((e,t)=>u.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.1*t},children:u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute -left-4 top-4 z-10",children:u.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold "+(0===t?"bg-yellow-500":1===t?"bg-gray-400":2===t?"bg-amber-600":"bg-gray-300"),children:t+1})}),u.jsx(Re,{facility:e.facility,viewMode:"list",isRecommendation:!0,matchScore:e.matchScore,recommendationReason:e.recommendationReason,showActions:!0})]})},e.facility.id))})]}),u.jsx(ue,{children:u.jsx(pe,{className:"p-6",children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx(z,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"ì¶”ì²œ ê²°ê³¼ë¥¼ ê°œì„ í•˜ë ¤ë©´?"}),u.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[u.jsx("li",{children:"â€¢ ì„ í˜¸ ì§€ì—­ ë²”ìœ„ë¥¼ ì¡°ì •í•´ë³´ì„¸ìš”"}),u.jsx("li",{children:"â€¢ ì˜ˆì‚° ì¡°ê±´ì„ ë‹¤ì‹œ ê²€í† í•´ë³´ì„¸ìš”"}),u.jsx("li",{children:"â€¢ í•„ìˆ˜ ì„œë¹„ìŠ¤ ì¡°ê±´ì„ ëª…í™•ížˆ í•´ë³´ì„¸ìš”"}),u.jsx("li",{children:"â€¢ ì‹œì„¤ ë°©ë¬¸ í›„ í”¼ë“œë°±ì„ ë‚¨ê²¨ì£¼ì‹œë©´ ë” ì •í™•í•œ ì¶”ì²œì´ ê°€ëŠ¥í•©ë‹ˆë‹¤"})]})]})]})})})]})};var Le=(e=>(e.LATEST="latest",e.OLDEST="oldest",e.HIGHEST_RATING="highest",e.LOWEST_RATING="lowest",e.MOST_HELPFUL="helpful",e))(Le||{});const De={baseURL:"http://localhost:8080",timeout:3e4,headers:{"Content-Type":"application/json"}};class He{constructor(){d(this,"ACCESS_TOKEN_KEY","accessToken"),d(this,"REFRESH_TOKEN_KEY","refreshToken")}getAccessToken(){return localStorage.getItem(this.ACCESS_TOKEN_KEY)}getRefreshToken(){return localStorage.getItem(this.REFRESH_TOKEN_KEY)}setTokens(e,t){localStorage.setItem(this.ACCESS_TOKEN_KEY,e),localStorage.setItem(this.REFRESH_TOKEN_KEY,t)}clearTokens(){localStorage.removeItem(this.ACCESS_TOKEN_KEY),localStorage.removeItem(this.REFRESH_TOKEN_KEY)}isTokenExpired(e){try{return 1e3*JSON.parse(atob(e.split(".")[1])).exp<Date.now()}catch(t){return!0}}}const Ue=new class{constructor(){d(this,"client"),d(this,"tokenManager"),d(this,"isRefreshing",!1),d(this,"refreshPromise",null),this.client=ke.create(De),this.tokenManager=new He,this.setupInterceptors()}setupInterceptors(){this.client.interceptors.request.use(e=>{const t=this.tokenManager.getAccessToken();return t&&!this.tokenManager.isTokenExpired(t)&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,e=>o(this,null,function*(){var t;const l=e.config;if(401===(null==(t=e.response)?void 0:t.status)&&!l.t){l.t=!0;try{const e=yield this.refreshAccessToken();return l.headers.Authorization=`Bearer ${e}`,this.client(l)}catch(a){return this.tokenManager.clearTokens(),window.location.href="/login",Promise.reject(a)}}return Promise.reject(this.handleError(e))}))}refreshAccessToken(){return o(this,null,function*(){if(this.isRefreshing&&this.refreshPromise)return this.refreshPromise;this.isRefreshing=!0,this.refreshPromise=this.performTokenRefresh();try{return yield this.refreshPromise}finally{this.isRefreshing=!1,this.refreshPromise=null}})}performTokenRefresh(){return o(this,null,function*(){const e=this.tokenManager.getRefreshToken();if(!e)throw new Error("No refresh token available");const t=yield ke.post(`${De.baseURL}/auth/refresh`,{refreshToken:e},{headers:De.headers}),{accessToken:l,refreshToken:a}=t.data;return this.tokenManager.setTokens(l,a),l})}handleError(e){var t,l;return(null==(t=e.response)?void 0:t.data)?e.response.data:{error:"NETWORK_ERROR",message:e.message||"Network error occurred",statusCode:(null==(l=e.response)?void 0:l.status)||0,timestamp:(new Date).toISOString()}}get(e,t){return o(this,null,function*(){return(yield this.client.get(e,t)).data})}post(e,t,l){return o(this,null,function*(){return(yield this.client.post(e,t,l)).data})}put(e,t,l){return o(this,null,function*(){return(yield this.client.put(e,t,l)).data})}patch(e,t,l){return o(this,null,function*(){return(yield this.client.patch(e,t,l)).data})}delete(e,t){return o(this,null,function*(){return(yield this.client.delete(e,t)).data})}uploadFile(e,t,l){return o(this,null,function*(){const a=new FormData;a.append("file",t);const i={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(l&&e.total){const t=Math.round(100*e.loaded/e.total);l(t)}}};return(yield this.client.post(e,a,i)).data})}setTokens(e,t){this.tokenManager.setTokens(e,t)}clearTokens(){this.tokenManager.clearTokens()}getAccessToken(){return this.tokenManager.getAccessToken()}isAuthenticated(){const e=this.tokenManager.getAccessToken();return!!e&&!this.tokenManager.isTokenExpired(e)}},We=e=>{var t,l,a;if(null==(l=null==(t=e.response)?void 0:t.data)?void 0:l.message)return e.response.data.message;switch(null==(a=e.response)?void 0:a.status){case 400:return"ìž˜ëª»ëœ ìš”ì²­ìž…ë‹ˆë‹¤. ìž…ë ¥ ì •ë³´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.";case 401:return"ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.";case 403:return"ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.";case 404:return"ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";case 409:return"ì´ë¯¸ ë¦¬ë·°ë¥¼ ìž‘ì„±í•˜ì…¨ê±°ë‚˜ ì¤‘ë³µëœ ìš”ì²­ìž…ë‹ˆë‹¤.";case 500:return"ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ìž ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";default:return"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."}},_e={reviews:[],currentReview:null,reviewStatistics:null,pagination:{page:0,size:10,totalElements:0,totalPages:0,hasNext:!1,hasPrevious:!1},currentFilter:{},currentSort:Le.LATEST,loading:{reviews:!1,create:!1,update:!1,delete:!1,vote:!1,report:!1,statistics:!1},error:null,selectedFacilityId:null,myReviews:[],myReviewsPagination:{page:0,totalElements:0,totalPages:0}},Ge=m()(me((e,t)=>c(r({},_e),{loadReviews:(t,l=0,a=10)=>o(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null,e.selectedFacilityId=t});try{const i=yield((e,t=0,l=10)=>o(null,null,function*(){return(yield Ue.get(`/reviews/facility/${e}?page=${t}&size=${l}`)).data}))(t,l,a);e(e=>{e.reviews=i.content,e.pagination={page:i.number,size:i.size,totalElements:i.totalElements,totalPages:i.totalPages,hasNext:!i.last,hasPrevious:!i.first},e.loading.reviews=!1})}catch(i){e(e=>{e.error=We(i),e.loading.reviews=!1})}}),loadReviewById:t=>o(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null});try{const l=yield(e=>o(null,null,function*(){return(yield Ue.get(`/reviews/${e}`)).data}))(t);e(e=>{e.currentReview=l,e.loading.reviews=!1})}catch(l){e(e=>{e.error=We(l),e.loading.reviews=!1})}}),createReview:(t,l)=>o(null,null,function*(){e(e=>{e.loading.create=!0,e.error=null});try{const a=yield((e,t)=>o(null,null,function*(){return(yield Ue.post(`/reviews/facility/${e}`,t)).data}))(t,l);return e(e=>{e.reviews.unshift(a),e.loading.create=!1}),a}catch(a){throw e(e=>{e.error=We(a),e.loading.create=!1}),a}}),updateReview:(t,l)=>o(null,null,function*(){e(e=>{e.loading.update=!0,e.error=null});try{const a=yield((e,t)=>o(null,null,function*(){return(yield Ue.put(`/reviews/${e}`,t)).data}))(t,l);return e(e=>{var l;const i=e.reviews.findIndex(e=>e.id===t);-1!==i&&(e.reviews[i]=a),(null==(l=e.currentReview)?void 0:l.id)===t&&(e.currentReview=a),e.loading.update=!1}),a}catch(a){throw e(e=>{e.error=We(a),e.loading.update=!1}),a}}),deleteReview:t=>o(null,null,function*(){e(e=>{e.loading.delete=!0,e.error=null});try{yield(e=>o(null,null,function*(){yield Ue.delete(`/reviews/${e}`)}))(t),e(e=>{var l;e.reviews=e.reviews.filter(e=>e.id!==t),(null==(l=e.currentReview)?void 0:l.id)===t&&(e.currentReview=null),e.loading.delete=!1})}catch(l){throw e(e=>{e.error=We(l),e.loading.delete=!1}),l}}),loadLatestReviews:(l,a=0)=>o(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null,e.selectedFacilityId=l,e.currentSort=Le.LATEST});try{const i=yield((e,t=0,l=10)=>o(null,null,function*(){return(yield Ue.get(`/reviews/facility/${e}/latest?page=${t}&size=${l}`)).data}))(l,a,t().pagination.size);e(e=>{e.reviews=i.content,e.pagination.page=i.number,e.pagination.totalElements=i.totalElements,e.pagination.totalPages=i.totalPages,e.pagination.hasNext=!i.last,e.pagination.hasPrevious=!i.first,e.loading.reviews=!1})}catch(i){e(e=>{e.error=We(i),e.loading.reviews=!1})}}),loadBestReviews:(l,a=0)=>o(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null,e.selectedFacilityId=l,e.currentSort=Le.MOST_HELPFUL});try{const i=yield((e,t=0,l=10)=>o(null,null,function*(){return(yield Ue.get(`/reviews/facility/${e}/best?page=${t}&size=${l}`)).data}))(l,a,t().pagination.size);e(e=>{e.reviews=i.content,e.pagination.page=i.number,e.pagination.totalElements=i.totalElements,e.pagination.totalPages=i.totalPages,e.pagination.hasNext=!i.last,e.pagination.hasPrevious=!i.first,e.loading.reviews=!1})}catch(i){e(e=>{e.error=We(i),e.loading.reviews=!1})}}),loadVerifiedReviews:(l,a=0)=>o(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null,e.selectedFacilityId=l,e.currentFilter=c(r({},e.currentFilter),{verified:!0})});try{const i=yield((e,t=0,l=10)=>o(null,null,function*(){return(yield Ue.get(`/reviews/facility/${e}/verified?page=${t}&size=${l}`)).data}))(l,a,t().pagination.size);e(e=>{e.reviews=i.content,e.pagination.page=i.number,e.pagination.totalElements=i.totalElements,e.pagination.totalPages=i.totalPages,e.pagination.hasNext=!i.last,e.pagination.hasPrevious=!i.first,e.loading.reviews=!1})}catch(i){e(e=>{e.error=We(i),e.loading.reviews=!1})}}),loadReviewsWithImages:(l,a=0)=>o(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null,e.selectedFacilityId=l,e.currentFilter=c(r({},e.currentFilter),{hasImages:!0})});try{const i=yield((e,t=0,l=10)=>o(null,null,function*(){return(yield Ue.get(`/reviews/facility/${e}/with-images?page=${t}&size=${l}`)).data}))(l,a,t().pagination.size);e(e=>{e.reviews=i.content,e.pagination.page=i.number,e.pagination.totalElements=i.totalElements,e.pagination.totalPages=i.totalPages,e.pagination.hasNext=!i.last,e.pagination.hasPrevious=!i.first,e.loading.reviews=!1})}catch(i){e(e=>{e.error=We(i),e.loading.reviews=!1})}}),applyFilter:l=>o(null,null,function*(){const{selectedFacilityId:a,currentSort:i,pagination:n}=t();a&&(e(e=>{e.currentFilter=l}),yield t().loadFilteredReviews(a,l,i,0))}),changeSort:l=>o(null,null,function*(){const{selectedFacilityId:a,currentFilter:i}=t();a&&(e(e=>{e.currentSort=l}),yield t().loadFilteredReviews(a,i,l,0))}),loadFilteredReviews:(l,a,i,n=0)=>o(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null,e.selectedFacilityId=l,e.currentFilter=a,e.currentSort=i});try{const s=yield((e,t,...l)=>o(null,[e,t,...l],function*(e,t,l=Le.LATEST,a=0,i=10){const n=new URLSearchParams({page:a.toString(),size:i.toString(),sort:l});return t.reviewType&&n.append("reviewType",t.reviewType),t.minRating&&n.append("minRating",t.minRating.toString()),t.maxRating&&n.append("maxRating",t.maxRating.toString()),void 0!==t.verified&&n.append("verified",t.verified.toString()),void 0!==t.hasImages&&n.append("hasImages",t.hasImages.toString()),void 0!==t.recommended&&n.append("recommended",t.recommended.toString()),(yield Ue.get(`/reviews/facility/${e}/filtered?${n.toString()}`)).data}))(l,a,i,n,t().pagination.size);e(e=>{e.reviews=s.content,e.pagination.page=s.number,e.pagination.totalElements=s.totalElements,e.pagination.totalPages=s.totalPages,e.pagination.hasNext=!s.last,e.pagination.hasPrevious=!s.first,e.loading.reviews=!1})}catch(s){e(e=>{e.error=We(s),e.loading.reviews=!1})}}),clearFilter:()=>{e(e=>{e.currentFilter={}})},voteHelpful:t=>o(null,null,function*(){e(e=>{e.loading.vote=!0,e.error=null});try{yield(e=>o(null,null,function*(){yield Ue.post(`/reviews/${e}/vote/helpful`)}))(t),e(e=>{var l;const a=e.reviews.find(e=>e.id===t);a&&(a.helpfulCount+=1),(null==(l=e.currentReview)?void 0:l.id)===t&&(e.currentReview.helpfulCount+=1),e.loading.vote=!1})}catch(l){throw e(e=>{e.error=We(l),e.loading.vote=!1}),l}}),voteNotHelpful:t=>o(null,null,function*(){e(e=>{e.loading.vote=!0,e.error=null});try{yield(e=>o(null,null,function*(){yield Ue.post(`/reviews/${e}/vote/not-helpful`)}))(t),e(e=>{var l;const a=e.reviews.find(e=>e.id===t);a&&(a.notHelpfulCount+=1),(null==(l=e.currentReview)?void 0:l.id)===t&&(e.currentReview.notHelpfulCount+=1),e.loading.vote=!1})}catch(l){throw e(e=>{e.error=We(l),e.loading.vote=!1}),l}}),reportReview:(t,l,a)=>o(null,null,function*(){e(e=>{e.loading.report=!0,e.error=null});try{yield((e,t,l)=>o(null,null,function*(){yield Ue.post(`/reviews/${e}/report`,{reason:t,description:l})}))(t,l,a),e(e=>{var l;const a=e.reviews.find(e=>e.id===t);a&&(a.reportCount+=1),(null==(l=e.currentReview)?void 0:l.id)===t&&(e.currentReview.reportCount+=1),e.loading.report=!1})}catch(i){throw e(e=>{e.error=We(i),e.loading.report=!1}),i}}),loadReviewStatistics:t=>o(null,null,function*(){e(e=>{e.loading.statistics=!0,e.error=null});try{const l=yield(e=>o(null,null,function*(){return(yield Ue.get(`/reviews/facility/${e}/statistics`)).data}))(t);e(e=>{e.reviewStatistics=l,e.loading.statistics=!1})}catch(l){e(e=>{e.error=We(l),e.loading.statistics=!1})}}),loadMyReviews:(t=0)=>o(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null});try{const l=yield((e=0,t=10)=>o(null,null,function*(){return(yield Ue.get(`/reviews/my?page=${e}&size=${t}`)).data}))(t,10);e(e=>{e.myReviews=l.content,e.myReviewsPagination={page:l.number,totalElements:l.totalElements,totalPages:l.totalPages},e.loading.reviews=!1})}catch(l){e(e=>{e.error=We(l),e.loading.reviews=!1})}}),addAdminResponse:(t,l)=>o(null,null,function*(){e(e=>{e.loading.update=!0,e.error=null});try{const a=yield((e,t)=>o(null,null,function*(){return(yield Ue.post(`/admin/reviews/${e}/response`,t)).data}))(t,{response:l});e(e=>{var l;const i=e.reviews.findIndex(e=>e.id===t);-1!==i&&(e.reviews[i]=a),(null==(l=e.currentReview)?void 0:l.id)===t&&(e.currentReview=a),e.loading.update=!1})}catch(a){throw e(e=>{e.error=We(a),e.loading.update=!1}),a}}),blockReview:t=>o(null,null,function*(){try{const l=yield(e=>o(null,null,function*(){return(yield Ue.post(`/admin/reviews/${e}/block`)).data}))(t);e(e=>{var a;const i=e.reviews.findIndex(e=>e.id===t);-1!==i&&(e.reviews[i]=l),(null==(a=e.currentReview)?void 0:a.id)===t&&(e.currentReview=l)})}catch(l){throw e(e=>{e.error=We(l)}),l}}),activateReview:t=>o(null,null,function*(){try{const l=yield(e=>o(null,null,function*(){return(yield Ue.post(`/admin/reviews/${e}/activate`)).data}))(t);e(e=>{var a;const i=e.reviews.findIndex(e=>e.id===t);-1!==i&&(e.reviews[i]=l),(null==(a=e.currentReview)?void 0:a.id)===t&&(e.currentReview=l)})}catch(l){throw e(e=>{e.error=We(l)}),l}}),setReviewVerified:(t,l)=>o(null,null,function*(){try{const a=yield((e,t)=>o(null,null,function*(){return(yield Ue.patch(`/admin/reviews/${e}/verified`,{verified:t})).data}))(t,l);e(e=>{var l;const i=e.reviews.findIndex(e=>e.id===t);-1!==i&&(e.reviews[i]=a),(null==(l=e.currentReview)?void 0:l.id)===t&&(e.currentReview=a)})}catch(a){throw e(e=>{e.error=We(a)}),a}}),setSelectedFacility:t=>{e(e=>{e.selectedFacilityId=t})},clearCurrentReview:()=>{e(e=>{e.currentReview=null})},clearError:()=>{e(e=>{e.error=null})},resetStore:()=>{e(e=>{Object.assign(e,_e)})},goToPage:e=>o(null,null,function*(){const{selectedFacilityId:l,currentFilter:a,currentSort:i}=t();l&&(Object.keys(a).length>0?yield t().loadFilteredReviews(l,a,i,e):yield t().loadReviews(l,e))}),goToNextPage:()=>o(null,null,function*(){const{pagination:e}=t();e.hasNext&&(yield t().goToPage(e.page+1))}),goToPreviousPage:()=>o(null,null,function*(){const{pagination:e}=t();e.hasPrevious&&(yield t().goToPage(e.page-1))})}))),Ve=h.memo(({facility:e,isActionLoading:t,onContact:l,onVisit:a,onMatching:i})=>{const n=[{icon:I,label:"ë¬´ë£Œ WiFi",available:!0},{icon:O,label:"ì£¼ì°¨ìž¥",available:!0},{icon:B,label:"ì‹ë‹¹",available:!0},{icon:L,label:"ìš´ë™ì‹œì„¤",available:!1},{icon:D,label:"CCTV",available:!0},{icon:H,label:"24ì‹œê°„ ë³´ì•ˆ",available:!0}];return u.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6",role:"tabpanel",id:"tabpanel-overview","aria-labelledby":"tab-overview",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold mb-3",children:"ì‹œì„¤ ì†Œê°œ"}),u.jsx("p",{className:"text-gray-700 leading-relaxed",children:e.description||`${e.facilityName}ì€(ëŠ”) ${e.facilityType}ë¡œì„œ ì „ë¬¸ì ì¸ ëŒë´„ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. \n            ìˆ™ë ¨ëœ ì „ë¬¸ ì¸ë ¥ê³¼ ì²´ê³„ì ì¸ ì¼€ì–´ í”„ë¡œê·¸ëž¨ì„ í†µí•´ ìž…ì†Œìžë¶„ë“¤ì˜ ê±´ê°•í•˜ê³  ì•ˆì „í•œ ìƒí™œì„ ì§€ì›í•˜ê³  ìžˆìŠµë‹ˆë‹¤.`})]}),e.specialties&&e.specialties.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold mb-3",children:"ì „ë¬¸ ì„œë¹„ìŠ¤"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:e.specialties.map(e=>u.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm",children:e},e))})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold mb-3",children:"íŽ¸ì˜ì‹œì„¤"}),u.jsx("div",{className:"grid grid-cols-2 gap-3",children:n.map(({icon:e,label:t,available:l})=>u.jsxs("div",{className:"flex items-center space-x-2 "+(l?"text-gray-900":"text-gray-400"),children:[u.jsx(e,{className:"w-4 h-4"}),u.jsx("span",{className:"text-sm",children:t}),l?u.jsx(E,{className:"w-4 h-4 text-green-500"}):u.jsx(w,{className:"w-4 h-4 text-gray-400"})]},t))})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-3",children:"ìš´ì˜ ì •ë³´"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(U,{className:"w-4 h-4 mr-2 text-gray-400"}),u.jsxs("span",{children:["ìš´ì˜ì‹œê°„: ",e.operatingHours||"24ì‹œê°„ ìš´ì˜"]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx(x,{className:"w-4 h-4 mr-2 text-gray-400"}),u.jsxs("span",{children:["ì—°ë½ì²˜: ",e.phoneNumber]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx(g,{className:"w-4 h-4 mr-2 text-gray-400"}),u.jsxs("span",{children:["ì •ì›: ",e.totalCapacity,"ëª…"]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx(W,{className:"w-4 h-4 mr-2 text-gray-400"}),u.jsxs("span",{children:["ë“±ê¸‰: ",e.facilityGrade,"ë“±ê¸‰"]})]})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-3",children:"ë¹„ìš© ì •ë³´"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"ì›” ê¸°ë³¸ë£Œ"}),u.jsx("span",{className:"font-semibold",children:(s=e.monthlyBasicFee,s?`${(s/1e4).toFixed(0)}ë§Œì›`:"ë¬¸ì˜")})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"ì‹ë¹„"}),u.jsx("span",{className:"text-gray-500",children:"ë³„ë„ ë¬¸ì˜"})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"ê°„ë³‘ë¹„"}),u.jsx("span",{className:"text-gray-500",children:"ë“±ê¸‰ë³„ ìƒì´"})]}),u.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"* ì •í™•í•œ ë¹„ìš©ì€ ìƒë‹´ì„ í†µí•´ í™•ì¸í•˜ì‹¤ ìˆ˜ ìžˆìŠµë‹ˆë‹¤."})]})]})]}),u.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg",children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"ë¹ ë¥¸ ì—°ë½ ë° ì˜ˆì•½"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[u.jsxs(he,{onClick:l,disabled:"contact"===t,className:"flex items-center justify-center space-x-2",children:["contact"===t?u.jsx(Ne.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:u.jsx(x,{className:"w-4 h-4"})}):u.jsx(x,{className:"w-4 h-4"}),u.jsx("span",{children:"ì „í™” ìƒë‹´"})]}),u.jsxs(he,{variant:"outline",onClick:a,disabled:"visit"===t,className:"flex items-center justify-center space-x-2",children:["visit"===t?u.jsx(Ne.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:u.jsx(f,{className:"w-4 h-4"})}):u.jsx(f,{className:"w-4 h-4"}),u.jsx("span",{children:"ë°©ë¬¸ ì˜ˆì•½"})]}),u.jsxs(he,{variant:"outline",onClick:i,className:"flex items-center justify-center space-x-2",children:[u.jsx(k,{className:"w-4 h-4"}),u.jsx("span",{children:"ë§¤ì¹­ ì‹ ì²­"})]})]}),u.jsxs("div",{className:"mt-3 text-sm text-gray-600 text-center",children:[u.jsx("p",{children:"ðŸ“ž ìƒë‹´ ê°€ëŠ¥ ì‹œê°„: í‰ì¼ 09:00 ~ 18:00"}),u.jsx("p",{children:"ðŸ¥ ë°©ë¬¸ ìƒë‹´ ì‹œ ì‚¬ì „ ì˜ˆì•½ì„ ê¶Œìž¥í•©ë‹ˆë‹¤."})]})]}),u.jsxs("div",{className:"mt-6",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ì œê³µ ì„œë¹„ìŠ¤"}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h4",{className:"font-medium mb-3",children:"ì¼€ì–´ ë“±ê¸‰ë³„ ì„œë¹„ìŠ¤"}),u.jsx("div",{className:"space-y-2",children:e.availableCareGrades.map(e=>u.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded",children:[u.jsxs("span",{children:[e,"ë“±ê¸‰ ì¼€ì–´"]}),u.jsx(E,{className:"w-4 h-4 text-green-500"})]},e))})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 bg-white border rounded-lg",children:[u.jsx("h5",{className:"font-medium mb-2",children:"ì¼ìƒìƒí™œ ì§€ì›"}),u.jsx("p",{className:"text-sm text-gray-600",children:"ì‹ì‚¬, ëª©ìš•, ë°°ì„¤, ì´ë™ ë“± ì¼ìƒìƒí™œ ì „ë°˜ì— ëŒ€í•œ ì „ë¬¸ì ì¸ ëŒë´„ ì„œë¹„ìŠ¤"})]}),u.jsxs("div",{className:"p-4 bg-white border rounded-lg",children:[u.jsx("h5",{className:"font-medium mb-2",children:"ê±´ê°• ê´€ë¦¬"}),u.jsx("p",{className:"text-sm text-gray-600",children:"ì •ê¸° ê±´ê°•ê²€ì§„, íˆ¬ì•½ ê´€ë¦¬, ì‘ê¸‰ìƒí™© ëŒ€ì‘ ë“± ì²´ê³„ì ì¸ ê±´ê°• ê´€ë¦¬"})]}),u.jsxs("div",{className:"p-4 bg-white border rounded-lg",children:[u.jsx("h5",{className:"font-medium mb-2",children:"ì—¬ê°€ í™œë™"}),u.jsx("p",{className:"text-sm text-gray-600",children:"ë‹¤ì–‘í•œ í”„ë¡œê·¸ëž¨ê³¼ ì—¬ê°€ í™œë™ì„ í†µí•œ ì •ì„œì  ì§€ì› ë° ì‚¬íšŒì  êµë¥˜"})]})]})]})]},"overview");var s});Ve.displayName="FacilityInfo";var Ke={};const qe=[{code:"HP8",name:"ë³‘ì›",icon:G,color:"text-red-600"},{code:"PM9",name:"ì•½êµ­",icon:G,color:"text-green-600"},{code:"MT1",name:"ë§ˆíŠ¸",icon:V,color:"text-blue-600"},{code:"CS2",name:"íŽ¸ì˜ì ",icon:V,color:"text-purple-600"},{code:"CE7",name:"ì¹´íŽ˜",icon:K,color:"text-orange-600"},{code:"SW8",name:"ì§€í•˜ì² ì—­",icon:q,color:"text-indigo-600"}],Qe=({facilities:e,width:t="100%",height:l="400px",level:a=3,showNearbyPlaces:i=!1,showTrafficInfo:n=!1,showControls:s=!0,enableClustering:d=!0,onLocationChange:m,onFacilityClick:p,onMapBoundsChange:g,className:x=""})=>{const f=h.useRef(null),b=h.useRef(null),v=h.useRef([]),[N,w]=h.useState(!0),[k,$]=h.useState(null),[C,j]=h.useState([]),[F,S]=h.useState(null),[R,M]=h.useState(null),[A,z]=h.useState([]),[E,T]=h.useState(null);h.useEffect(()=>{o(null,null,function*(){try{if(w(!0),$(null),!Ke.REACT_APP_KAKAO_MAP_API_KEY)throw new Error("ì¹´ì¹´ì˜¤ ì§€ë„ API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");yield new Promise((e,t)=>{if(window.kakao&&window.kakao.maps)return void e(window.kakao);const l=document.createElement("script");l.src=`//dapi.kakao.com/v2/maps/sdk.js?appkey=${Ke.REACT_APP_KAKAO_MAP_API_KEY}&libraries=services&autoload=false`,l.async=!0,l.onload=()=>{window.kakao.maps.load(()=>{e(window.kakao)})},l.onerror=()=>{t(new Error("ì¹´ì¹´ì˜¤ ì§€ë„ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨"))},document.head.appendChild(l)});const t=yield I(e);if(M(t),P(t.lat,t.lng),yield B(),i&&e.length>0){const t=yield O(e[0]);W(t.latitude,t.longitude)}}catch(t){$(t.message||"ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")}finally{w(!1)}})},[e,a,i]);const P=(e,t)=>{if(!f.current)return;const l={center:new window.kakao.maps.LatLng(e,t),level:a},i=new window.kakao.maps.Map(f.current,l);if(b.current=i,s){const e=new window.kakao.maps.MapTypeControl;i.addControl(e,window.kakao.maps.ControlPosition.TOPRIGHT);const t=new window.kakao.maps.ZoomControl;i.addControl(t,window.kakao.maps.ControlPosition.RIGHT)}n&&i.addOverlayMapTypeId(window.kakao.maps.MapTypeId.TRAFFIC),g&&window.kakao.maps.event.addListener(i,"bounds_changed",()=>{const e=i.getBounds(),t=e.getNorthEast(),l=e.getSouthWest();g({ne:{lat:t.getLat(),lng:t.getLng()},sw:{lat:l.getLat(),lng:l.getLng()}})}),m&&window.kakao.maps.event.addListener(i,"center_changed",()=>{const e=i.getCenter();m(e.getLat(),e.getLng())})},I=e=>o(null,null,function*(){if(0===e.length)return{lat:37.5665,lng:126.978};if(1===e.length){const t=yield O(e[0]);return{lat:t.latitude,lng:t.longitude}}const t=yield Promise.all(e.map(e=>O(e))),l=t.reduce((e,t)=>e+t.latitude,0),a=t.reduce((e,t)=>e+t.longitude,0);return{lat:l/t.length,lng:a/t.length}}),O=e=>o(null,null,function*(){if(e.latitude&&e.longitude)return e;try{const l=yield(t=e.address,new Promise((e,l)=>{(new window.kakao.maps.services.Geocoder).addressSearch(t,(t,a)=>{if(a===window.kakao.maps.services.Status.OK){const l={lat:parseFloat(t[0].y),lng:parseFloat(t[0].x)};e(l)}else l(new Error("ì£¼ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."))})}));return c(r({},e),{latitude:l.lat,longitude:l.lng})}catch(l){return c(r({},e),{latitude:37.5665,longitude:126.978})}var t}),B=()=>o(null,null,function*(){if(!b.current||0===e.length)return;const t=yield Promise.all(e.map(e=>O(e)));if(t.forEach((e,t)=>{L(b.current,e,t)}),t.length>1){const e=new window.kakao.maps.LatLngBounds;t.forEach(t=>{e.extend(new window.kakao.maps.LatLng(t.latitude,t.longitude))}),b.current.setBounds(e)}}),L=(e,t,l)=>{const a=new window.kakao.maps.LatLng(t.latitude,t.longitude),i=D(t),n=t.isRecommended?{width:36,height:45}:{width:28,height:35},s="data:image/svg+xml;base64,"+btoa(`\n      <svg width="${n.width}" height="${n.height}" viewBox="0 0 ${n.width} ${n.height}" xmlns="http://www.w3.org/2000/svg">\n        <path d="M${n.width/2} 0C${.225*n.width} 0 0 ${.225*n.width} 0 ${.5*n.width}c0 ${.5*n.width} ${n.width/2} ${.6*n.height} ${n.width/2} ${.6*n.height}s${n.width/2}-${.1*n.height} ${n.width/2}-${.6*n.height}C${n.width} ${.225*n.width} ${.775*n.width} 0 ${n.width/2} 0z" fill="${i}"/>\n        <circle cx="${n.width/2}" cy="${.5*n.width}" r="${.25*n.width}" fill="white"/>\n        ${t.isRecommended?`<path d="M${n.width/2} ${.3*n.width}l${.06*n.width} ${.12*n.width}h${.13*n.width}l-${.105*n.width} ${.075*n.width}l${.04*n.width} ${.12*n.width}l-${.105*n.width}-${.075*n.width}l-${.105*n.width} ${.075*n.width}l${.04*n.width}-${.12*n.width}l-${.105*n.width}-${.075*n.width}h${.13*n.width}z" fill="${i}"/>`:""}\n      </svg>\n    `),r=new window.kakao.maps.Size(n.width,n.height),c={offset:new window.kakao.maps.Point(n.width/2,n.height)},d=new window.kakao.maps.MarkerImage(s,r,c),o=new window.kakao.maps.Marker({position:a,image:d});o.setMap(e),v.current.push(o);const m=H(t),h=new window.kakao.maps.InfoWindow({content:m});window.kakao.maps.event.addListener(o,"click",()=>{v.current.forEach((e,t)=>{window.infoWindows&&window.infoWindows[t]&&window.infoWindows[t].close()}),h.open(e,o),T(t),p&&p(t)}),window.infoWindows||(window.infoWindows=[]),window.infoWindows[l]=h},D=e=>{if(e.isRecommended)return"#FF6B6B";if(!e.availableBeds||0===e.availableBeds)return"#9CA3AF";switch(e.grade){case"A":case"Aë“±ê¸‰":return"#10B981";case"B":case"Bë“±ê¸‰":return"#3B82F6";case"C":case"Cë“±ê¸‰":return"#F59E0B";default:return"#6366F1"}},H=e=>`\n      <div style="padding: 15px; font-size: 14px; max-width: 280px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;">\n        <div style="display: flex; align-items: center; margin-bottom: 8px;">\n          <div style="font-weight: bold; font-size: 16px; color: #1f2937; flex: 1;">${e.name}</div>\n          ${e.isRecommended?'<span style="background: #ef4444; color: white; padding: 2px 6px; border-radius: 4px; font-size: 11px; margin-left: 8px;">ì¶”ì²œ</span>':""}\n        </div>\n        \n        <div style="color: #6b7280; margin-bottom: 4px; font-size: 13px;">${e.address}</div>\n        \n        <div style="display: flex; gap: 12px; margin: 8px 0; align-items: center;">\n          ${e.grade?`<span style="background: ${U(e.grade)}; color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px;">${e.grade}</span>`:""}\n          ${e.rating?`<span style="color: #f59e0b;">â˜… ${e.rating.toFixed(1)}</span>`:""}\n          ${void 0!==e.availableBeds?`<span style="color: ${e.availableBeds>0?"#10b981":"#ef4444"}; font-size: 12px;">\n            ${e.availableBeds>0?`ìž…ì†Œê°€ëŠ¥ ${e.availableBeds}ê°œ`:"ëŒ€ê¸°í•„ìš”"}\n          </span>`:""}\n        </div>\n        \n        ${e.facilityType?`<div style="color: #6b7280; font-size: 12px; margin-bottom: 4px;">${e.facilityType}</div>`:""}\n        ${e.phone?`<div style="color: #3b82f6; font-size: 12px;">${e.phone}</div>`:""}\n        \n        <div style="text-align: center; margin-top: 10px;">\n          <button onclick="window.facilityDetailClick(${e.id})" style="background: #3b82f6; color: white; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;">ìƒì„¸ë³´ê¸°</button>\n        </div>\n      </div>\n    `,U=e=>{switch(e){case"A":case"Aë“±ê¸‰":return"#10b981";case"B":case"Bë“±ê¸‰":return"#3b82f6";case"C":case"Cë“±ê¸‰":return"#f59e0b";default:return"#6b7280"}},W=(e,t)=>o(null,null,function*(){if(!window.kakao.maps.services)return;const l=new window.kakao.maps.services.Places,a={location:new window.kakao.maps.LatLng(e,t),radius:1e3,sort:window.kakao.maps.services.SortBy.DISTANCE};try{const e=[];for(const t of qe){const i=yield G(l,t.code,a);e.push(...i.slice(0,3))}j(e)}catch(i){}}),G=(e,t,l)=>new Promise((a,i)=>{e.categorySearch(t,(e,l)=>{if(l===window.kakao.maps.services.Status.OK){const l=e.map(e=>({id:e.id,name:e.place_name,address:e.address_name,latitude:parseFloat(e.y),longitude:parseFloat(e.x),phone:e.phone,category:t,distance:parseInt(e.distance)}));a(l)}else a([])},l)});return h.useEffect(()=>(window.facilityDetailClick=t=>{const l=e.find(e=>e.id===t);l&&p&&p(l)},()=>{delete window.facilityDetailClick}),[e,p]),h.useEffect(()=>()=>{v.current.forEach(e=>e.setMap(null)),v.current=[]},[]),u.jsxs("div",{className:`relative ${x}`,children:[u.jsx("div",{ref:f,style:{width:t,height:l},className:"rounded-lg overflow-hidden shadow-lg"}),N&&u.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center rounded-lg",style:{width:t,height:l},children:u.jsx(xe,{size:"lg",text:"ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})}),k&&u.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center rounded-lg",style:{width:t,height:l},children:u.jsxs("div",{className:"text-center",children:[u.jsx(y,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600 mb-2",children:k}),u.jsx(he,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:"ë‹¤ì‹œ ì‹œë„"})]})}),!N&&!k&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"absolute top-4 right-4 z-10 flex flex-col gap-2",children:[E&&u.jsxs(he,{onClick:()=>(e=>{const t=e||E;if(!t)return;const l=`https://map.kakao.com/link/to/${encodeURIComponent(t.name)},${t.latitude},${t.longitude}`;window.open(l,"_blank")})(E),className:"bg-white shadow-lg hover:shadow-xl flex items-center space-x-2",variant:"outline",size:"sm",children:[u.jsx(_,{className:"h-4 w-4"}),u.jsx("span",{children:"ê¸¸ì°¾ê¸°"})]}),e.length>1&&u.jsxs(he,{onClick:()=>{if(b.current){const t=new window.kakao.maps.LatLngBounds;e.forEach(e=>{e.latitude&&e.longitude&&t.extend(new window.kakao.maps.LatLng(e.latitude,e.longitude))}),b.current.setBounds(t)}},className:"bg-white shadow-lg hover:shadow-xl flex items-center space-x-2",variant:"outline",size:"sm",children:[u.jsx(y,{className:"h-4 w-4"}),u.jsx("span",{children:"ì „ì²´ë³´ê¸°"})]})]}),u.jsxs("div",{className:"absolute bottom-4 left-4 right-4 z-10",children:[E&&u.jsx(ue,{className:"p-4 bg-white/95 backdrop-blur-sm mb-3",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:E.name}),u.jsx("p",{className:"text-sm text-gray-600",children:E.address}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[E.grade&&u.jsx(Badge,{className:"text-xs",style:{backgroundColor:U(E.grade)},children:E.grade}),E.rating&&u.jsxs("span",{className:"text-sm text-yellow-600",children:["â˜… ",E.rating.toFixed(1)]})]})]}),u.jsx(he,{variant:"outline",size:"sm",onClick:()=>T(null),children:"âœ•"})]})}),i&&C.length>0&&u.jsxs(ue,{className:"p-3 bg-white/95 backdrop-blur-sm",children:[u.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"ì£¼ë³€ íŽ¸ì˜ì‹œì„¤"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:qe.map(e=>{const t=C.filter(t=>t.category===e.code).length;if(0===t)return null;const l=e.icon;return u.jsxs(he,{variant:F===e.code?"default":"outline",size:"sm",onClick:()=>(e=>{if(!b.current)return;if(v.current.slice(1).forEach(e=>e.setMap(null)),v.current=v.current.slice(0,1),F===e)return void S(null);S(e);const t=C.filter(t=>t.category===e),l=qe.find(t=>t.code===e);l&&t.forEach(e=>{const t=new window.kakao.maps.LatLng(e.latitude,e.longitude),a=l.color.includes("red")?"#EF4444":l.color.includes("green")?"#10B981":l.color.includes("blue")?"#3B82F6":l.color.includes("purple")?"#8B5CF6":l.color.includes("orange")?"#F59E0B":"#6366F1",i="data:image/svg+xml;base64,"+btoa(`\n        <svg width="24" height="30" viewBox="0 0 24 30" xmlns="http://www.w3.org/2000/svg">\n          <path d="M12 0C5.4 0 0 5.4 0 12c0 12 12 18 12 18s12-6 12-18C24 5.4 18.6 0 12 0z" fill="${a}"/>\n          <circle cx="12" cy="12" r="6" fill="white"/>\n        </svg>\n      `),n=new window.kakao.maps.Size(24,30),s={offset:new window.kakao.maps.Point(12,30)},r=new window.kakao.maps.MarkerImage(i,n,s),c=new window.kakao.maps.Marker({position:t,image:r});c.setMap(b.current),v.current.push(c);const d=new window.kakao.maps.InfoWindow({content:`\n          <div style="padding: 10px; font-size: 12px; max-width: 200px;">\n            <div style="font-weight: bold; margin-bottom: 2px;">${e.name}</div>\n            <div style="color: #666; margin-bottom: 2px;">${e.address}</div>\n            <div style="color: #007bff; font-size: 11px;">\n              ${e.distance?`ê±°ë¦¬: ${e.distance}m`:""}\n              ${e.phone?` | ${e.phone}`:""}\n            </div>\n          </div>\n        `});window.kakao.maps.event.addListener(c,"click",()=>{d.open(b.current,c)})})})(e.code),className:"flex items-center space-x-1",children:[u.jsx(l,{className:`h-3 w-3 ${e.color}`}),u.jsxs("span",{className:"text-xs",children:[e.name," (",t,")"]})]},e.code)})})]}),e.length>1&&u.jsx(ue,{className:"p-3 bg-white/95 backdrop-blur-sm mt-2",children:u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsxs("span",{className:"text-gray-600",children:["ì´ ",e.length,"ê°œ ì‹œì„¤"]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("span",{className:"text-green-600",children:["Aë“±ê¸‰ ",e.filter(e=>{var t;return null==(t=e.grade)?void 0:t.includes("A")}).length,"ê°œ"]}),u.jsxs("span",{className:"text-blue-600",children:["ìž…ì†Œê°€ëŠ¥ ",e.filter(e=>e.availableBeds&&e.availableBeds>0).length,"ê°œ"]}),u.jsxs("span",{className:"text-red-600",children:["ì¶”ì²œ ",e.filter(e=>e.isRecommended).length,"ê°œ"]})]})]})})]})]})]})},Je=h.memo(({facility:e,nearbyFacilities:t=[]})=>u.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6 space-y-6",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ìœ„ì¹˜ ì •ë³´"}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[u.jsx(y,{className:"w-4 h-4 mr-2 text-blue-600"}),"ì§€ë„"]}),u.jsx(Qe,{facility:{id:e.id,name:e.facilityName,address:e.address,latitude:e.latitude||void 0,longitude:e.longitude||void 0,phone:e.phoneNumber},height:"350px",showNearbyPlaces:!0,showControls:!0,className:"rounded-lg overflow-hidden"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center mb-2",children:[u.jsx(y,{className:"w-4 h-4 mr-2 text-gray-400"}),u.jsx("span",{className:"font-medium",children:"ì£¼ì†Œ"})]}),u.jsx("p",{className:"text-gray-700 ml-6",children:e.address})]}),e.latitude&&e.longitude&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center mb-2",children:[u.jsx(_,{className:"w-4 h-4 mr-2 text-gray-400"}),u.jsx("span",{className:"font-medium",children:"ì¢Œí‘œ"})]}),u.jsxs("p",{className:"text-gray-700 ml-6",children:["ìœ„ë„: ",e.latitude,", ê²½ë„: ",e.longitude]})]}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsxs(he,{onClick:()=>{if((null==e?void 0:e.latitude)&&(null==e?void 0:e.longitude)){const t=`https://map.kakao.com/link/map/${e.facilityName},${e.latitude},${e.longitude}`;window.open(t,"_blank")}},variant:"outline",className:"flex-1",children:[u.jsx(y,{className:"w-4 h-4 mr-2"}),"ì¹´ì¹´ì˜¤ë§µì—ì„œ ë³´ê¸°"]}),u.jsxs(he,{onClick:()=>{const t=`https://map.naver.com/v5/search/${encodeURIComponent(e.address)}`;window.open(t,"_blank")},variant:"outline",className:"flex-1",children:[u.jsx(_,{className:"w-4 h-4 mr-2"}),"ë„¤ì´ë²„ì§€ë„ì—ì„œ ë³´ê¸°"]})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium mb-3",children:"êµí†µ ì •ë³´"}),u.jsxs("div",{className:"space-y-2 text-sm",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(O,{className:"w-4 h-4 mr-2 text-gray-400"}),u.jsx("span",{children:"ì£¼ì°¨ìž¥ ì´ìš© ê°€ëŠ¥"})]}),u.jsx("div",{className:"text-gray-600 ml-6",children:"ëŒ€ì¤‘êµí†µ ì´ìš© ì‹œ ê°€ìž¥ ê°€ê¹Œìš´ ì§€í•˜ì² ì—­ì—ì„œ ë„ë³´ 10ë¶„ ê±°ë¦¬"})]})]}),t.length>0&&u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium mb-3",children:"ì£¼ë³€ íŽ¸ì˜ì‹œì„¤"}),u.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.slice(0,6).map((e,t)=>u.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),u.jsx("span",{className:"text-gray-700",children:e.name}),u.jsxs("span",{className:"text-gray-500 text-xs",children:["(",e.distance,"m)"]})]},t))})]}),u.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[u.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"ì§€ë„ ì‚¬ìš© ì•ˆë‚´"}),u.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[u.jsx("p",{children:"â€¢ ì§€ë„ë¥¼ ë“œëž˜ê·¸í•˜ì—¬ ì£¼ë³€ ì§€ì—­ì„ íƒìƒ‰í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤"}),u.jsx("p",{children:"â€¢ í™•ëŒ€/ì¶•ì†Œ ë²„íŠ¼ìœ¼ë¡œ ìƒì„¸í•œ ìœ„ì¹˜ í™•ì¸ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤"}),u.jsx("p",{children:"â€¢ ë§ˆì»¤ë¥¼ í´ë¦­í•˜ë©´ ì‹œì„¤ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤"}),u.jsx("p",{children:"â€¢ ì™¸ë¶€ ì§€ë„ ì•±ì—ì„œ ê¸¸ì°¾ê¸° ê¸°ëŠ¥ì„ ì´ìš©í•˜ì‹¤ ìˆ˜ ìžˆìŠµë‹ˆë‹¤"})]})]}),u.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"ë°©ë¬¸ ì‹œ ì°¸ê³ ì‚¬í•­"}),u.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[u.jsx("p",{children:"â€¢ ë°©ë¬¸ ì „ ì‚¬ì „ ì—°ë½ì„ ê¶Œìž¥í•©ë‹ˆë‹¤"}),u.jsx("p",{children:"â€¢ ì£¼ì°¨ ê³µê°„ì´ ì œí•œì ì¼ ìˆ˜ ìžˆìœ¼ë‹ˆ ëŒ€ì¤‘êµí†µ ì´ìš©ì„ ê³ ë ¤í•´ë³´ì„¸ìš”"}),u.jsx("p",{children:"â€¢ ì‹œì„¤ ë‚´ ë°©ì—­ ìˆ˜ì¹™ì„ ì¤€ìˆ˜í•´ ì£¼ì‹œê¸° ë°”ëžë‹ˆë‹¤"})]})]})]})]},"location"));Je.displayName="FacilityMap";const Ye=h.memo(({reviews:e,reviewStatistics:t,loading:l,pagination:a,currentSort:i,currentFilter:n,onSortChange:s,onFilterApply:r,onVote:c,onPageChange:d})=>u.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6 space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"ì´ìš© í›„ê¸°"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs(he,{variant:"outline",size:"sm",children:[u.jsx(Q,{className:"w-4 h-4 mr-1"}),"í•„í„°"]}),u.jsxs("select",{value:i,onChange:e=>s(e.target.value),className:"px-3 py-1 border rounded text-sm",children:[u.jsx("option",{value:Le.LATEST,children:"ìµœì‹ ìˆœ"}),u.jsx("option",{value:Le.HIGHEST_RATING,children:"í‰ì  ë†’ì€ìˆœ"}),u.jsx("option",{value:Le.LOWEST_RATING,children:"í‰ì  ë‚®ì€ìˆœ"}),u.jsx("option",{value:Le.MOST_HELPFUL,children:"ë„ì›€ë¨ìˆœ"})]})]})]}),t&&u.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:t.averageRating.toFixed(1)}),u.jsx("div",{className:"flex items-center justify-center mb-2",children:Array.from({length:5}).map((e,l)=>u.jsx(p,{className:"w-5 h-5 "+(l<Math.round(t.averageRating)?"text-yellow-400 fill-current":"text-gray-300")},l))}),u.jsxs("div",{className:"text-sm text-gray-600",children:[t.totalCount,"ê°œì˜ ë¦¬ë·°"]}),u.jsxs("div",{className:"text-sm text-blue-600 font-medium mt-2",children:["ì¶”ì²œë¥  ",t.recommendationPercentage,"%"]})]}),u.jsx("div",{className:"space-y-2",children:Object.entries(t.ratingDistribution).sort(([e],[t])=>Number(t)-Number(e)).map(([e,l])=>u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("span",{className:"text-sm w-4",children:[e,"ì "]}),u.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:(t.totalCount>0?l/t.totalCount*100:0)+"%"}})}),u.jsx("span",{className:"text-sm text-gray-600 w-8",children:l})]},e))})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-blue-100",children:[u.jsx("h4",{className:"font-medium mb-3 text-gray-700",children:"ì¹´í…Œê³ ë¦¬ë³„ í‰ì "}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:Object.entries(t.categoryRatings).map(([e,t])=>u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"serviceQuality"===e?"ì„œë¹„ìŠ¤":"facility"===e?"ì‹œì„¤":"staff"===e?"ì§ì›":"price"===e?"ê°€ê²©":"accessibility"===e?"ì ‘ê·¼ì„±":e}),u.jsx("div",{className:"text-lg font-semibold text-blue-600",children:t>0?t.toFixed(1):"-"})]},e))})]})]}),u.jsx("div",{className:"space-y-4",children:l.reviews?u.jsxs("div",{className:"text-center py-8",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),u.jsx("p",{className:"mt-2 text-gray-600",children:"ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]}):0===e.length?u.jsxs("div",{className:"text-center py-8 text-gray-500",children:[u.jsx(J,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),u.jsx("p",{children:"ì•„ì§ ë“±ë¡ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤."}),u.jsx("p",{className:"text-sm mt-1",children:"ì²« ë²ˆì§¸ ë¦¬ë·°ë¥¼ ìž‘ì„±í•´ë³´ì„¸ìš”!"})]}):e.map(e=>u.jsx(ue,{className:"hover:shadow-md transition-shadow",children:u.jsxs(pe,{className:"p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-medium text-blue-600",children:e.reviewer.name.charAt(0)})}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"font-medium text-gray-900",children:e.anonymous?"ìµëª…":e.reviewer.name}),e.verified&&u.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-800 text-xs rounded-full",children:"ì¸ì¦ë¨"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"flex items-center",children:Array.from({length:5}).map((t,l)=>u.jsx(p,{className:"w-4 h-4 "+(l<e.overallRating?"text-yellow-400 fill-current":"text-gray-300")},l))}),u.jsx("span",{className:"text-sm text-gray-500",children:new Date(e.createdDate).toLocaleDateString()})]})]})]}),u.jsx(he,{variant:"ghost",size:"sm",children:u.jsx(Y,{className:"w-4 h-4"})})]}),e.title&&u.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:e.title}),u.jsx("p",{className:"text-gray-700 mb-3 leading-relaxed",children:e.content}),e.tags.length>0&&u.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:e.tags.map((e,t)=>u.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:e},t))}),e.imageUrls.length>0&&u.jsxs("div",{className:"flex space-x-2 mb-3",children:[e.imageUrls.slice(0,3).map((e,t)=>u.jsx("img",{src:e,alt:`ë¦¬ë·° ì´ë¯¸ì§€ ${t+1}`,className:"w-16 h-16 object-cover rounded-lg cursor-pointer hover:opacity-80",onClick:()=>{}},t)),e.imageUrls.length>3&&u.jsxs("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center text-gray-500 text-xs",children:["+",e.imageUrls.length-3]})]}),u.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("button",{onClick:()=>c(e.id,!0),className:"flex items-center space-x-1 text-sm text-gray-500 hover:text-blue-600",disabled:l.vote,children:[u.jsx(Z,{className:"w-4 h-4"}),u.jsxs("span",{children:["ë„ì›€ë¨ ",e.helpfulCount]})]}),u.jsxs("button",{onClick:()=>c(e.id,!1),className:"flex items-center space-x-1 text-sm text-gray-500 hover:text-red-600",disabled:l.vote,children:[u.jsx(X,{className:"w-4 h-4"}),u.jsx("span",{children:e.notHelpfulCount})]}),u.jsxs("button",{className:"flex items-center space-x-1 text-sm text-gray-500 hover:text-red-600",children:[u.jsx(ee,{className:"w-4 h-4"}),u.jsx("span",{children:"ì‹ ê³ "})]})]}),e.recommended&&u.jsx("span",{className:"text-sm text-green-600 font-medium",children:"ì¶”ì²œí•©ë‹ˆë‹¤"})]}),e.adminResponse&&u.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400",children:[u.jsxs("div",{className:"flex items-center mb-2",children:[u.jsx(P,{className:"w-4 h-4 text-blue-600 mr-2"}),u.jsx("span",{className:"text-sm font-medium text-blue-900",children:"ì‹œì„¤ ê´€ë¦¬ìž ë‹µë³€"}),e.adminResponseDate&&u.jsx("span",{className:"text-xs text-blue-600 ml-auto",children:new Date(e.adminResponseDate).toLocaleDateString()})]}),u.jsx("p",{className:"text-sm text-blue-800",children:e.adminResponse})]})]})},e.id))}),a.totalPages>1&&u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx(he,{variant:"outline",size:"sm",onClick:()=>d(a.page-1),disabled:!a.hasPrevious,children:u.jsx(te,{className:"w-4 h-4"})}),u.jsxs("span",{className:"text-sm text-gray-600",children:[a.page+1," / ",a.totalPages]}),u.jsx(he,{variant:"outline",size:"sm",onClick:()=>d(a.page+1),disabled:!a.hasNext,children:u.jsx(le,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"text-center pt-4 border-t",children:u.jsxs(he,{className:"px-6",children:[u.jsx(p,{className:"w-4 h-4 mr-2"}),"ë¦¬ë·° ìž‘ì„±í•˜ê¸°"]})})]},"reviews"));Ye.displayName="FacilityReviews";const Ze=h.memo(({facility:e,facilityImages:t,currentImageIndex:l,onImageIndexChange:a,onPreviousImage:i,onNextImage:n})=>{const[s,r]=h.useState(!1),c=[{name:"ì™¸ê´€",count:3,icon:ie},{name:"ë‚´ë¶€ì‹œì„¤",count:5,icon:L},{name:"ê°ì‹¤",count:4,icon:g},{name:"íŽ¸ì˜ì‹œì„¤",count:2,icon:I}];return u.jsxs(u.Fragment,{children:[u.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"ì‹œì„¤ ì‚¬ì§„"}),u.jsxs("span",{className:"text-sm text-gray-600",children:["ì´ ",t.length,"ìž¥"]})]}),u.jsxs("div",{className:"relative mb-6",children:[u.jsx("div",{className:"aspect-video bg-gray-200 rounded-lg overflow-hidden",children:u.jsx("img",{src:t[l],alt:`${e.facilityName} ì‚¬ì§„ ${l+1}`,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/images/facility-default.jpg"}})}),t.length>1&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:i,className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full flex items-center justify-center shadow-lg transition-all",children:u.jsx(te,{className:"w-5 h-5 text-gray-700"})}),u.jsx("button",{onClick:n,className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full flex items-center justify-center shadow-lg transition-all",children:u.jsx(le,{className:"w-5 h-5 text-gray-700"})}),u.jsxs("div",{className:"absolute bottom-4 right-4 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-sm",children:[l+1," / ",t.length]})]}),u.jsx("button",{onClick:()=>r(!0),className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-colors",children:u.jsx(ae,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-3",children:[t.map((t,i)=>u.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg overflow-hidden cursor-pointer transition-all "+(i===l?"ring-2 ring-blue-500 ring-offset-2":"hover:opacity-80"),onClick:()=>a(i),children:u.jsx("img",{src:t,alt:`${e.facilityName} ì¸ë„¤ì¼ ${i+1}`,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/images/facility-default.jpg"}})},i)),Array.from({length:Math.max(0,12-t.length)}).map((e,t)=>u.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg flex items-center justify-center",children:u.jsx(ae,{className:"w-6 h-6 text-gray-400"})},`placeholder-${t}`))]}),u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("h4",{className:"font-medium text-gray-900",children:"ì‚¬ì§„ ì¹´í…Œê³ ë¦¬"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:c.map(e=>u.jsx(ue,{className:"cursor-pointer hover:shadow-md transition-shadow",children:u.jsxs(pe,{className:"p-4 text-center",children:[u.jsx(e.icon,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),u.jsx("h5",{className:"font-medium text-gray-900",children:e.name}),u.jsxs("p",{className:"text-sm text-gray-600",children:[e.count,"ìž¥"]})]})},e.name))})]}),u.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"ì‚¬ì§„ ì •ë³´"}),u.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[u.jsx("p",{children:"â€¢ ëª¨ë“  ì‚¬ì§„ì€ ì‹¤ì œ ì‹œì„¤ì„ ì´¬ì˜í•œ ê²ƒìž…ë‹ˆë‹¤."}),u.jsx("p",{children:"â€¢ ì‚¬ì§„ì€ ì •ê¸°ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤."}),u.jsx("p",{children:"â€¢ ê¶ê¸ˆí•œ ë¶€ë¶„ì´ ìžˆìœ¼ì‹œë©´ ì‹œì„¤ì— ì§ì ‘ ë¬¸ì˜í•´ì£¼ì„¸ìš”."})]})]}),u.jsx("div",{className:"mt-4 text-center",children:u.jsxs("div",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:[u.jsx(ae,{className:"w-4 h-4 mr-1"}),"ìµœê·¼ ì—…ë°ì´íŠ¸: 2024ë…„ 1ì›”"]})})]},"photos"),u.jsx(we,{children:s&&u.jsx(Ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-90",onClick:()=>r(!1),children:u.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[u.jsx("img",{src:t[l],alt:`${e.facilityName} ì‚¬ì§„ ${l+1}`,className:"max-w-full max-h-full object-contain",onClick:e=>e.stopPropagation()}),u.jsx("button",{onClick:()=>r(!1),className:"absolute top-4 right-4 w-12 h-12 bg-white bg-opacity-20 hover:bg-opacity-30 text-white rounded-full flex items-center justify-center",children:u.jsx(w,{className:"w-6 h-6"})}),t.length>1&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:i,className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-white bg-opacity-20 hover:bg-opacity-30 text-white rounded-full flex items-center justify-center",children:u.jsx(te,{className:"w-6 h-6"})}),u.jsx("button",{onClick:n,className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-white bg-opacity-20 hover:bg-opacity-30 text-white rounded-full flex items-center justify-center",children:u.jsx(le,{className:"w-6 h-6"})}),u.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-50 text-white px-4 py-2 rounded-full text-sm",children:[l+1," / ",t.length]})]})]})})})]})});Ze.displayName="FacilityPhotos";const Xe=h.memo(({facility:e,nearbyFacilities:t})=>{const l=t.length>0?t:[{id:1,name:"ì„œìš¸ëŒ€í•™êµë³‘ì›",category:"hospital",distance:250,address:"ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ëŒ€í•™ë¡œ",phone:"02-2072-2114",rating:4.5,isOpen:!0},{id:2,name:"ì˜¨ëˆ„ë¦¬ì•½êµ­",category:"pharmacy",distance:180,address:"ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ í˜œí™”ë™",phone:"02-764-8532",rating:4.2,isOpen:!0},{id:3,name:"ì´ë§ˆíŠ¸ ì„±ìˆ˜ì ",category:"market",distance:800,address:"ì„œìš¸íŠ¹ë³„ì‹œ ì„±ë™êµ¬ ì„±ìˆ˜ë™",phone:"02-499-1234",rating:4,isOpen:!1},{id:4,name:"êµ­ë¯¼ì€í–‰ í˜œí™”ì§€ì ",category:"bank",distance:320,address:"ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ í˜œí™”ë¡œ",phone:"02-760-1234",rating:3.8,isOpen:!0},{id:5,name:"í˜œí™”ì—­ (ì§€í•˜ì²  4í˜¸ì„ )",category:"transport",distance:450,address:"ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ í˜œí™”ë™",phone:"-",rating:4.3,isOpen:!0},{id:6,name:"ì¹´íŽ˜ë² ë„¤ ëŒ€í•™ë¡œì ",category:"restaurant",distance:290,address:"ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ëŒ€í•™ë¡œ",phone:"02-744-5678",rating:4.1,isOpen:!0}],a=l.reduce((e,t)=>{const l=t.category||"default";return e[l]||(e[l]=[]),e[l].push(t),e},{}),i=e=>({hospital:"ë³‘ì›/ì˜ë£Œê¸°ê´€",pharmacy:"ì•½êµ­",market:"ë§ˆíŠ¸/ì‡¼í•‘",bank:"ì€í–‰/ê¸ˆìœµ",restaurant:"ìŒì‹ì /ì¹´íŽ˜",transport:"êµí†µ",parking:"ì£¼ì°¨ìž¥",accommodation:"ìˆ™ë°•",entertainment:"ì—¬ê°€ì‹œì„¤",education:"êµìœ¡ê¸°ê´€",default:"ê¸°íƒ€ì‹œì„¤"}[e]||"ê¸°íƒ€ì‹œì„¤");return u.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6 space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"ì£¼ë³€ íŽ¸ì˜ì‹œì„¤"}),u.jsxs("span",{className:"text-sm text-gray-600",children:["ì´ ",l.length,"ê°œ ì‹œì„¤"]})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[{range:"300m ì´ë‚´",count:l.filter(e=>e.distance<=300).length,color:"bg-green-100 text-green-800"},{range:"500m ì´ë‚´",count:l.filter(e=>e.distance<=500).length,color:"bg-blue-100 text-blue-800"},{range:"1km ì´ë‚´",count:l.filter(e=>e.distance<=1e3).length,color:"bg-yellow-100 text-yellow-800"},{range:"1km ì´ˆê³¼",count:l.filter(e=>e.distance>1e3).length,color:"bg-red-100 text-red-800"}].map(e=>u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${e.color}`,children:[e.count,"ê°œ"]}),u.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e.range})]},e.range))}),u.jsx("div",{className:"space-y-6",children:Object.entries(a).map(([e,t])=>{const l=(e=>{const t={hospital:se,pharmacy:k,market:V,bank:ne,restaurant:K,transport:q,parking:O,accommodation:ie,entertainment:L,education:g,default:y};return t[e]||t.default})(e);return u.jsxs("div",{children:[u.jsxs("h4",{className:"flex items-center font-medium text-gray-900 mb-3",children:[u.jsx(l,{className:"w-5 h-5 mr-2 text-blue-600"}),i(e),u.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",t.length,"ê°œ)"]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(e=>{return u.jsx(ue,{className:"hover:shadow-md transition-shadow",children:u.jsxs(pe,{className:"p-4",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h5",{className:"font-medium text-gray-900 mb-1",children:e.name}),u.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[u.jsx(y,{className:"w-3 h-3 mr-1"}),u.jsx("span",{className:"truncate",children:e.address})]})]}),u.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[u.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium "+(t=e.distance,t<=300?"text-green-600 bg-green-100":t<=500?"text-blue-600 bg-blue-100":t<=1e3?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100"),children:[e.distance,"m"]}),void 0!==e.isOpen&&u.jsx("span",{className:"text-xs "+(e.isOpen?"text-green-600":"text-red-600"),children:e.isOpen?"ì˜ì—…ì¤‘":"ì˜ì—…ì¢…ë£Œ"})]})]}),e.rating&&u.jsxs("div",{className:"flex items-center mb-2",children:[u.jsx("div",{className:"flex items-center",children:Array.from({length:5}).map((t,l)=>u.jsx("div",{className:"w-3 h-3 "+(l<Math.round(e.rating)?"text-yellow-400":"text-gray-300"),children:"â˜…"},l))}),u.jsx("span",{className:"text-sm text-gray-600 ml-1",children:e.rating.toFixed(1)})]}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsxs(he,{variant:"outline",size:"sm",onClick:()=>(e=>{const t=`https://map.kakao.com/link/to/${e.name},${e.latitude||37.5665},${e.longitude||126.978}`;window.open(t,"_blank")})(e),className:"flex-1 text-xs",children:[u.jsx(_,{className:"w-3 h-3 mr-1"}),"ê¸¸ì°¾ê¸°"]}),e.phone&&"-"!==e.phone&&u.jsxs(he,{variant:"outline",size:"sm",onClick:()=>{var t;(t=e.phone)&&"-"!==t&&window.open(`tel:${t}`)},className:"flex-1 text-xs",children:[u.jsx(x,{className:"w-3 h-3 mr-1"}),"ì—°ë½"]})]})]})},e.id);var t})})]},e)})}),u.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[u.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"ì£¼ë³€ ì‹œì„¤ ì´ìš© ì•ˆë‚´"}),u.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[u.jsx("p",{children:"â€¢ ê±°ë¦¬ ì •ë³´ëŠ” ì§ì„ ê±°ë¦¬ ê¸°ì¤€ì´ë©°, ì‹¤ì œ ì´ë™ì‹œê°„ê³¼ ë‹¤ë¥¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤"}),u.jsx("p",{children:"â€¢ ì˜ì—…ì‹œê°„ ë° ì—°ë½ì²˜ ì •ë³´ëŠ” ë³€ê²½ë  ìˆ˜ ìžˆìœ¼ë‹ˆ ë°©ë¬¸ ì „ í™•ì¸í•˜ì‹œê¸° ë°”ëžë‹ˆë‹¤"}),u.jsx("p",{children:"â€¢ ê¸¸ì°¾ê¸° ê¸°ëŠ¥ì„ í†µí•´ ì •í™•í•œ ê²½ë¡œì™€ ì†Œìš”ì‹œê°„ì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìžˆìŠµë‹ˆë‹¤"})]})]}),u.jsxs("div",{className:"text-center pt-4 border-t",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"ì›í•˜ì‹œëŠ” ì£¼ë³€ ì‹œì„¤ ì •ë³´ê°€ ì—†ë‚˜ìš”?"}),u.jsxs(he,{variant:"outline",className:"px-6",children:[u.jsx(y,{className:"w-4 h-4 mr-2"}),"ì¶”ê°€ ì •ë³´ ìš”ì²­í•˜ê¸°"]})]})]},"nearby")});Xe.displayName="NearbyFacilities";const et=()=>{const e=Fe(e=>e.selectedFacility),{isDetailModalOpen:t,closeDetailModal:l,clearSelectedFacility:a,trackFacilityContact:i,trackFacilityVisit:n,openMatchingForm:s}=Fe(),{reviews:r,reviewStatistics:c,loading:d,pagination:m,currentSort:g,currentFilter:x,loadReviews:f,loadReviewStatistics:b,changeSort:v,applyFilter:N,voteHelpful:k,voteNotHelpful:$,goToPage:C}=Ge(),[j,F]=h.useState("overview"),[S,R]=h.useState(null),[M,A]=h.useState(0),[z]=h.useState([]),E=function({isActive:e,initialFocus:t,returnFocus:l=!0}){const a=h.useRef(null),i=h.useRef(null);return h.useEffect(()=>{if(!e)return;i.current=document.activeElement;const n=a.current;if(!n)return;const s=["button:not([disabled])","input:not([disabled])","textarea:not([disabled])","select:not([disabled])","a[href]",'[tabindex]:not([tabindex="-1"])','[contenteditable="true"]'].join(", "),r=()=>Array.from(n.querySelectorAll(s)).filter(e=>{const t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility}),c=e=>{if("Tab"!==e.key)return;const t=r();if(0===t.length)return;const l=t[0],a=t[t.length-1],i=document.activeElement;e.shiftKey?i===l&&(e.preventDefault(),a.focus()):i===a&&(e.preventDefault(),l.focus())},d=setTimeout(()=>{{const e=n.querySelector(t);if(e)return void e.focus()}const e=r();e.length>0&&e[0].focus()},0);return document.addEventListener("keydown",c),()=>{clearTimeout(d),document.removeEventListener("keydown",c),l&&i.current&&i.current.focus()}},[e,t,l]),a}({isActive:t,initialFocus:"button[data-close]",returnFocus:!0}),T=(null==e?void 0:e.imageUrl)?[e.imageUrl]:["/images/facility-placeholder-1.jpg","/images/facility-placeholder-2.jpg","/images/facility-placeholder-3.jpg"],P=()=>{l(),setTimeout(()=>{a()},300)};if(h.useEffect(()=>{const l=e=>{"Escape"===e.key&&P()};return t&&(document.addEventListener("keydown",l),document.body.style.overflow="hidden",e&&(f(e.id),b(e.id))),()=>{document.removeEventListener("keydown",l),document.body.style.overflow="unset"}},[t,e,f,b]),!t||!e)return null;const I=e.totalCapacity-e.currentOccupancy;return e.currentOccupancy,e.totalCapacity,u.jsx(we,{children:u.jsxs(Ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:P,children:[u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),u.jsxs(Ne.div,{ref:E,initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full max-w-4xl max-h-[90vh] bg-white rounded-lg shadow-xl overflow-hidden",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-description",children:[u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"relative h-48 bg-gray-200",children:[u.jsx("img",{src:T[0],alt:e.facilityName,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/images/facility-default.jpg"}}),u.jsx("div",{className:"absolute top-4 left-4",children:u.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${(e=>{switch(e){case"A":return"text-green-600 bg-green-100";case"B":return"text-blue-600 bg-blue-100";case"C":return"text-yellow-600 bg-yellow-100";case"D":return"text-orange-600 bg-orange-100";case"E":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}})(e.facilityGrade)}`,children:[e.facilityGrade,"ë“±ê¸‰"]})}),u.jsx("button",{"data-close":!0,onClick:P,className:"absolute top-4 right-4 w-8 h-8 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-black","aria-label":"ëª¨ë‹¬ ë‹«ê¸°",children:u.jsx(w,{className:"w-5 h-5","aria-hidden":"true"})})]}),u.jsxs("div",{className:"p-4 border-b bg-white",children:[u.jsx("h1",{id:"modal-title",className:"text-xl font-bold text-gray-900 mb-1",children:e.facilityName}),u.jsx("p",{className:"text-gray-600 text-sm mb-2",children:e.facilityType}),u.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center text-sm",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-600",children:"ì›” ê¸°ë³¸ë£Œ"}),u.jsx("div",{className:"font-semibold text-blue-600",children:(O=e.monthlyBasicFee,O?`${(O/1e4).toFixed(0)}ë§Œì›`:"ë¬¸ì˜")})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-600",children:"ìž…ì†Œ í˜„í™©"}),u.jsxs("div",{className:"font-semibold",children:[e.currentOccupancy,"/",e.totalCapacity,"ëª…"]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-600",children:"ìž…ì†Œ ê°€ëŠ¥"}),u.jsx("div",{className:"font-semibold "+(I>0?"text-green-600":"text-red-600"),children:I>0?`${I}ëª…`:"ëŒ€ê¸°"})]})]})]})]}),u.jsx("div",{className:"border-b bg-white",children:u.jsx("nav",{className:"flex px-4 overflow-x-auto",role:"tablist","aria-label":"ì‹œì„¤ ì •ë³´ íƒ­",children:[{key:"overview",label:"ê°œìš”",icon:ie},{key:"location",label:"ìœ„ì¹˜",icon:y},{key:"reviews",label:"ë¦¬ë·°",icon:p,badge:null==c?void 0:c.totalCount},{key:"photos",label:"ì‚¬ì§„",icon:ae,badge:T.length},{key:"nearby",label:"ì£¼ë³€ì‹œì„¤",icon:ne}].map(({key:e,label:t,icon:l,badge:a})=>u.jsxs("button",{onClick:()=>F(e),className:"flex items-center px-4 py-3 border-b-2 font-medium text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 "+(j===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),role:"tab","aria-selected":j===e,"aria-controls":`tabpanel-${e}`,id:`tab-${e}`,children:[u.jsx(l,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),u.jsx("span",{children:t}),a&&a>0&&u.jsx("span",{className:"ml-1 bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded-full",children:a})]},e))})}),u.jsx("div",{className:"flex-1 overflow-y-auto max-h-96",children:u.jsxs(we,{mode:"wait",children:["overview"===j&&u.jsx(Ve,{facility:e,isActionLoading:S,onContact:()=>o(null,null,function*(){if(e){R("contact");try{yield i(e.id),window.open(`tel:${e.phoneNumber}`)}catch(t){}finally{R(null)}}}),onVisit:()=>o(null,null,function*(){if(e){R("visit");try{yield n(e.id),alert("ë°©ë¬¸ ì˜ˆì•½ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹œì„¤ì—ì„œ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.")}catch(t){}finally{R(null)}}}),onMatching:()=>{s()}}),"location"===j&&u.jsx(Je,{facility:e,nearbyFacilities:z}),"reviews"===j&&u.jsx(Ye,{reviews:r,reviewStatistics:c,loading:d,pagination:m,currentSort:g,currentFilter:x,onSortChange:t=>o(null,null,function*(){e&&(yield v(t))}),onFilterApply:t=>o(null,null,function*(){e&&(yield N(t))}),onVote:(e,t)=>o(null,null,function*(){try{t?yield k(e):yield $(e)}catch(l){}}),onPageChange:C}),"photos"===j&&u.jsx(Ze,{facility:e,facilityImages:T,currentImageIndex:M,onImageIndexChange:e=>{A(e)},onPreviousImage:()=>{A(e=>0===e?T.length-1:e-1)},onNextImage:()=>{A(e=>e===T.length-1?0:e+1)}}),"nearby"===j&&u.jsx(Xe,{facility:e,nearbyFacilities:z})]})})]})]})});var O},tt=Object.freeze(Object.defineProperty({__proto__:null,default:({memberId:e,coordinatorId:t,showRecommendations:l=!0})=>{fe(ve.facilitySearch),h.useEffect(()=>{be({"@context":"https://schema.org","@type":"WebApplication",name:"ìš”ì–‘ì› ì‹œì„¤ ê²€ìƒ‰",description:"ìž¬ì™¸ë™í¬ë¥¼ ìœ„í•œ í•œêµ­ ìš”ì–‘ì› ê²€ìƒ‰ ë° ë§¤ì¹­ ì„œë¹„ìŠ¤",applicationCategory:"HealthApplication",operatingSystem:"Web",offers:{"@type":"Offer",price:"0",priceCurrency:"KRW"}},"facility-search-data")},[]);const a=Fe(e=>(Se.has(e)&&Se.get(e)===e.searchResults||Se.set(e,e.searchResults),Se.get(e))),i=Fe(e=>e.isSearching),n=Fe(e=>e.isLoadingRecommendations),s=Fe(e=>e.searchError),c=Fe(e=>e.recommendationError),{recommendations:d,searchFilters:m,isDetailModalOpen:p,isRecommendationModalOpen:g,searchFacilities:y,getRecommendations:x,updateSearchFilters:f,clearSearchResults:b,clearRecommendations:w,openRecommendationModal:k,closeRecommendationModal:$,clearAllErrors:C}=Fe(),[F,S]=h.useState("list"),[R,M]=h.useState(!1),[A,z]=h.useState(""),[E,P]=h.useState("search");h.useEffect(()=>(C(),l&&e&&(P("recommendations"),O()),()=>{b(),w()}),[e,l]);const I=()=>o(null,null,function*(){if(!A.trim()&&0===Object.keys(m).length)return;const e=r(r({},m),A&&{region:A});yield y(e),P("search")}),O=()=>o(null,null,function*(){e&&(yield x(e,t))});return u.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"ì‹œì„¤ ê²€ìƒ‰ ë° ì¶”ì²œ"}),u.jsx("p",{className:"text-gray-600",children:"ë§žì¶¤í˜• ìš”ì–‘ ì‹œì„¤ì„ ì°¾ì•„ë³´ì„¸ìš”. AI ê¸°ë°˜ ì¶”ì²œìœ¼ë¡œ ìµœì ì˜ ì‹œì„¤ì„ ì œì•ˆí•´ë“œë¦½ë‹ˆë‹¤."})]}),u.jsx("div",{className:"mb-6",children:u.jsx("div",{className:"border-b border-gray-200",children:u.jsxs("nav",{className:"-mb-px flex space-x-8",children:[u.jsxs("button",{onClick:()=>P("search"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("search"===E?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[u.jsx(N,{className:"w-4 h-4 inline mr-2"}),"ì‹œì„¤ ê²€ìƒ‰"]}),l&&u.jsxs("button",{onClick:()=>{P("recommendations"),e&&O()},className:"py-2 px-1 border-b-2 font-medium text-sm "+("recommendations"===E?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[u.jsx(j,{className:"w-4 h-4 inline mr-2"}),"ë§žì¶¤ ì¶”ì²œ",d.length>0&&u.jsx("span",{className:"ml-2 bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full",children:d.length})]})]})})}),u.jsxs(we,{mode:"wait",children:["search"===E&&u.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[u.jsx(ue,{className:"mb-6",children:u.jsxs(pe,{className:"p-6",children:[u.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[u.jsx("div",{className:"flex-1",children:u.jsxs("div",{className:"relative",children:[u.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"ì§€ì—­ëª…ì„ ìž…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì„œìš¸ì‹œ ê°•ë‚¨êµ¬)",value:A,onChange:e=>{z(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&I()},className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),u.jsx(he,{onClick:I,disabled:i,className:"px-8 py-3",children:i?u.jsxs(u.Fragment,{children:[u.jsx(v,{className:"w-4 h-4 mr-2 animate-spin"}),"ê²€ìƒ‰ ì¤‘..."]}):u.jsxs(u.Fragment,{children:[u.jsx(N,{className:"w-4 h-4 mr-2"}),"ê²€ìƒ‰"]})}),u.jsxs(he,{variant:"outline",onClick:()=>M(!R),className:"px-4 py-3",children:[u.jsx(Q,{className:"w-4 h-4 mr-2"}),"í•„í„°"]})]}),u.jsx(we,{children:R&&u.jsx(Ne.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:u.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:u.jsx(Oe,{filters:m,onFiltersChange:e=>{f(e),"search"===E&&setTimeout(()=>{I()},500)}})})})})]})}),s&&u.jsx(Ne.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6",children:u.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(T,{className:"w-5 h-5 text-red-500 mr-2"}),u.jsx("span",{className:"text-red-700",children:s})]})})}),a.length>0&&u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"ê²€ìƒ‰ ê²°ê³¼"}),u.jsxs("p",{className:"text-gray-600",children:["ì´ ",a.length,"ê°œì˜ ì‹œì„¤ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤."]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(he,{variant:"list"===F?"default":"outline",size:"sm",onClick:()=>S("list"),children:u.jsx(re,{className:"w-4 h-4"})}),u.jsx(he,{variant:"grid"===F?"default":"outline",size:"sm",onClick:()=>S("grid"),children:u.jsx(ce,{className:"w-4 h-4"})})]})]}),u.jsx(Me,{facilities:a,viewMode:F,isLoading:i,emptyMessage:"ê²€ìƒ‰ ì¡°ê±´ì— ë§žëŠ” ì‹œì„¤ì´ ì—†ìŠµë‹ˆë‹¤."})]},"search"),"recommendations"===E&&u.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[c&&u.jsx(Ne.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6",children:u.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(T,{className:"w-5 h-5 text-red-500 mr-2"}),u.jsx("span",{className:"text-red-700",children:c})]})})}),u.jsx(Be,{recommendations:d,isLoading:n,onRefresh:O,memberId:e})]},"recommendations")]}),u.jsx(et,{})]})})}},Symbol.toStringTag,{value:"Module"}));export{tt as F,Fe as a,Ge as u};
