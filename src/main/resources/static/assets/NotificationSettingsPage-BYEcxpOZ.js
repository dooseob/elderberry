var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,i=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,n=(e,a)=>{for(var l in a||(a={}))c.call(a,l)&&i(e,l,a[l]);if(s)for(var l of s(a))t.call(a,l)&&i(e,l,a[l]);return e},r=(e,s)=>a(e,l(s));import{r as m,j as d,a3 as o,aF as h,aX as b,at as p,aR as u,aZ as x}from"./react-vendor-DjlEhPtN.js";import{c as N,P as f,N as g,d as v}from"./theme-layout-lfdIx57L.js";import{B as y}from"./board-pages-Boj7UMsD.js";import"./core-ui-CLdLL7GI.js";import"./facility-pages-CdldLj64.js";import{C as k}from"./chat-pages-DZlm3u1D.js";import"./state-management-DnGX11vy.js";import"./vendor-Bp3O2Fb0.js";import"./style-utils-DeQRAeyh.js";import"./http-client-9JY-woyA.js";import"./animation-lib-Df_skjj_.js";const w=({className:e=""})=>{const{settings:a,fetchSettings:l,updateSettings:s,isLoading:c,error:t}=N(),[i,w]=m.useState(null),[j,C]=m.useState(!1),[S,O]=m.useState(!1),[E,P]=m.useState(!1);m.useEffect(()=>{l()},[l]),m.useEffect(()=>{a&&!i&&w(a)},[a,i]),m.useEffect(()=>{a&&i&&C(JSON.stringify(a)!==JSON.stringify(i))},[a,i]);const T=(e,a)=>{i&&w(r(n({},i),{[e]:a}))},z=(e,a,l)=>{i&&w(r(n({},i),{typeSettings:r(n({},i.typeSettings),{[e]:r(n({},i.typeSettings[e]),{[a]:l})})}))},J=(e,a,l)=>{i&&w(r(n({},i),{quietHours:n(n(r(n({},i.quietHours),{enabled:e}),a&&{startTime:a}),l&&{endTime:l})}))};return i?d.jsx(f,{title:"알림 설정",description:"알림 수신 방법과 타입별 설정을 관리하세요",icon:d.jsx(o,{className:"h-6 w-6"}),className:e,actions:[{label:"초기화",variant:"outline",onClick:()=>{a&&w(a)},disabled:!j||c},{label:S?"저장 중...":"저장",variant:"primary",onClick:()=>{return e=function*(){if(i){O(!0);try{yield s(i),P(!0),setTimeout(()=>P(!1),3e3)}catch(e){}finally{O(!1)}}},new Promise((a,l)=>{var s=a=>{try{t(e.next(a))}catch(s){l(s)}},c=a=>{try{t(e.throw(a))}catch(s){l(s)}},t=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,c);t((e=e.apply(null,null)).next())});var e},disabled:!j||c||S,icon:E?d.jsx(h,{className:"h-4 w-4"}):d.jsx(x,{className:"h-4 w-4"})}],children:d.jsxs("div",{className:"max-w-4xl space-y-6",children:[E&&d.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center",children:[d.jsx(h,{className:"h-5 w-5 text-green-600 mr-2"}),d.jsx("span",{className:"text-green-800",children:"설정이 성공적으로 저장되었습니다."})]}),t&&d.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:d.jsx("p",{className:"text-red-800",children:t})}),d.jsxs(k,{className:"p-6",children:[d.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[d.jsx(b,{className:"h-5 w-5 mr-2"}),"알림 수신 방법"]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(b,{className:"h-5 w-5 text-blue-600 mr-3"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium",children:"푸시 알림"}),d.jsx("p",{className:"text-sm text-gray-600",children:"브라우저에서 즉시 알림을 받습니다"})]})]}),d.jsx("label",{className:"inline-flex items-center",children:d.jsx("input",{type:"checkbox",checked:i.pushEnabled,onChange:e=>T("pushEnabled",e.target.checked),className:"form-checkbox h-5 w-5 text-blue-600"})})]}),d.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(p,{className:"h-5 w-5 text-green-600 mr-3"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium",children:"이메일 알림"}),d.jsx("p",{className:"text-sm text-gray-600",children:"등록된 이메일로 알림을 받습니다"})]})]}),d.jsx("label",{className:"inline-flex items-center",children:d.jsx("input",{type:"checkbox",checked:i.emailEnabled,onChange:e=>T("emailEnabled",e.target.checked),className:"form-checkbox h-5 w-5 text-blue-600"})})]}),d.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(u,{className:"h-5 w-5 text-purple-600 mr-3"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium",children:"SMS 알림"}),d.jsx("p",{className:"text-sm text-gray-600",children:"등록된 휴대폰번호로 문자를 받습니다"})]})]}),d.jsx("label",{className:"inline-flex items-center",children:d.jsx("input",{type:"checkbox",checked:i.smsEnabled,onChange:e=>T("smsEnabled",e.target.checked),className:"form-checkbox h-5 w-5 text-blue-600"})})]})]})]}),d.jsxs(k,{className:"p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"알림 타입별 설정"}),d.jsx("div",{className:"space-y-4",children:Object.values(g).map(e=>{const a=i.typeSettings[e],l=a&&(a.push||a.email||a.sms);return d.jsxs("div",{className:"border rounded-lg p-4",children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("h3",{className:"font-medium",children:v[e]}),l&&d.jsx(y,{variant:"outline",className:"ml-2 text-xs",children:"활성화"})]})}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("label",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"checkbox",checked:(null==a?void 0:a.push)||!1,onChange:a=>z(e,"push",a.target.checked),disabled:!i.pushEnabled,className:"form-checkbox h-4 w-4 text-blue-600"}),d.jsx("span",{className:"text-sm",children:"푸시"})]}),d.jsxs("label",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"checkbox",checked:(null==a?void 0:a.email)||!1,onChange:a=>z(e,"email",a.target.checked),disabled:!i.emailEnabled,className:"form-checkbox h-4 w-4 text-blue-600"}),d.jsx("span",{className:"text-sm",children:"이메일"})]}),d.jsxs("label",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"checkbox",checked:(null==a?void 0:a.sms)||!1,onChange:a=>z(e,"sms",a.target.checked),disabled:!i.smsEnabled,className:"form-checkbox h-4 w-4 text-blue-600"}),d.jsx("span",{className:"text-sm",children:"SMS"})]})]})]},e)})})]}),d.jsxs(k,{className:"p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"조용한 시간"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"설정한 시간 동안은 알림을 받지 않습니다"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("label",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"checkbox",checked:i.quietHours.enabled,onChange:e=>J(e.target.checked),className:"form-checkbox h-5 w-5 text-blue-600"}),d.jsx("span",{className:"font-medium",children:"조용한 시간 활성화"})]}),i.quietHours.enabled&&d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"시작 시간"}),d.jsx("input",{type:"time",value:i.quietHours.startTime,onChange:e=>J(!0,e.target.value),className:"form-input w-full"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"종료 시간"}),d.jsx("input",{type:"time",value:i.quietHours.endTime,onChange:e=>J(!0,void 0,e.target.value),className:"form-input w-full"})]})]})]})]}),d.jsxs(k,{className:"p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"기타 설정"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"언어"}),d.jsxs("select",{value:i.language,onChange:e=>w(r(n({},i),{language:e.target.value})),className:"form-select w-full",children:[d.jsx("option",{value:"ko",children:"한국어"}),d.jsx("option",{value:"en",children:"English"}),d.jsx("option",{value:"zh",children:"中文"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"시간대"}),d.jsx("input",{type:"text",value:i.timezone,onChange:e=>w(r(n({},i),{timezone:e.target.value})),className:"form-input w-full",placeholder:"Asia/Seoul"})]})]})]})]})}):d.jsx(f,{title:"알림 설정",description:"알림 수신 방법을 설정하세요",icon:d.jsx(o,{className:"h-6 w-6"}),children:d.jsxs("div",{className:"flex justify-center items-center h-64",children:[d.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full"}),d.jsx("span",{className:"ml-3 text-gray-600",children:"설정을 불러오는 중..."})]})})};export{w as NotificationSettingsPage,w as default};
