import{r as e,j as l,k as s,bk as a,$ as r,N as t,bf as i,bl as c,ah as d,be as n,m}from"./react-vendor-D482bdOD.js";import{C as h,a as o}from"./chat-pages-eKQuMn9L.js";import{B as x}from"./core-ui-B951Z2Bq.js";import{S as g}from"./StarRating-NgqKDVDd.js";const b=({review:b,showFacilityInfo:u=!1,showActions:p=!1,onEdit:N,onDelete:f,onHelpful:v})=>{const[y,w]=e.useState(!1),[j,k]=e.useState(null),z=e=>new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}),C=e=>{j===(e?"helpful":"not_helpful")?k(null):(k(e?"helpful":"not_helpful"),null==v||v(e))},_=b.content.length>200,R=y||!_?b.content:`${b.content.substring(0,200)}...`,$=[{label:"서비스",value:b.serviceQualityRating},{label:"시설",value:b.facilityRating},{label:"직원",value:b.staffRating},{label:"가격",value:b.priceRating},{label:"접근성",value:b.accessibilityRating}].filter(e=>e.value&&e.value>0);return l.jsx(h,{className:"hover:shadow-lg transition-shadow",children:l.jsx(o,{className:"p-6",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-elderberry-100 rounded-full flex items-center justify-center",children:l.jsx(s,{className:"w-5 h-5 text-elderberry-600"})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium text-elderberry-900",children:b.isAnonymous?"익명":b.authorName||"사용자"}),b.isVerifiedPurchase&&l.jsx(a,{className:"w-4 h-4 text-green-500"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-elderberry-600",children:[l.jsx(r,{className:"w-3 h-3"}),z(b.createdAt)]})]})]}),l.jsx("div",{className:"text-right",children:l.jsx(g,{value:b.overallRating,readonly:!0,size:"md",showValue:!0})})]}),u&&b.facilityName&&l.jsxs("div",{className:"flex items-center gap-2 p-3 bg-elderberry-50 rounded-lg",children:[l.jsx(t,{className:"w-4 h-4 text-elderberry-600"}),l.jsx("span",{className:"font-medium text-elderberry-900",children:b.facilityName})]}),l.jsx("h3",{className:"text-lg font-semibold text-elderberry-900",children:b.title}),$.length>0&&l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:$.map(e=>l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xs text-elderberry-600 mb-1",children:e.label}),l.jsx(g,{value:e.value,readonly:!0,size:"sm",className:"justify-center"})]},e.label))}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-elderberry-700 leading-relaxed whitespace-pre-wrap",children:R}),_&&l.jsx(x,{variant:"ghost",size:"sm",onClick:()=>w(!y),className:"text-elderberry-600 hover:text-elderberry-800",children:y?"접기":"더보기"})]}),b.tags&&b.tags.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2",children:b.tags.map((e,s)=>l.jsxs("span",{className:"px-2 py-1 text-xs bg-blue-50 text-blue-700 rounded-full",children:["#",e]},s))}),b.imageUrls&&b.imageUrls.length>0&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[b.imageUrls.slice(0,4).map((e,s)=>l.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:l.jsx("img",{src:e,alt:`리뷰 이미지 ${s+1}`,className:"w-full h-full object-cover hover:scale-105 transition-transform cursor-pointer",onClick:()=>{window.open(e,"_blank")}})},s)),b.imageUrls.length>4&&l.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg flex items-center justify-center",children:l.jsxs("span",{className:"text-sm text-gray-600",children:["+",b.imageUrls.length-4]})})]}),b.adminResponse&&l.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border-l-4 border-blue-400 rounded-r-lg",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(a,{className:"w-4 h-4 text-blue-600"}),l.jsx("span",{className:"text-sm font-medium text-blue-900",children:"시설 관리자"}),l.jsx("span",{className:"text-xs text-blue-600",children:z(b.adminResponse.createdAt)})]}),l.jsx("p",{className:"text-sm text-blue-800 leading-relaxed",children:b.adminResponse.content})]}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-elderberry-100",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[!p&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>C(!0),className:"flex items-center gap-1 "+("helpful"===j?"text-green-600 bg-green-50":"text-elderberry-600"),children:[l.jsx(i,{className:"w-4 h-4"}),"도움됨 ",b.helpfulCount||0]}),l.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>C(!1),className:"flex items-center gap-1 "+("not_helpful"===j?"text-red-600 bg-red-50":"text-elderberry-600"),children:[l.jsx(c,{className:"w-4 h-4"}),b.notHelpfulCount||0]})]}),b.commentCount&&b.commentCount>0&&l.jsxs("div",{className:"flex items-center gap-1 text-sm text-elderberry-600",children:[l.jsx(d,{className:"w-4 h-4"}),b.commentCount,"개 댓글"]})]}),p&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(x,{variant:"outline",size:"sm",onClick:N,className:"flex items-center gap-1",children:[l.jsx(n,{className:"w-4 h-4"}),"수정"]}),l.jsxs(x,{variant:"outline",size:"sm",onClick:f,className:"flex items-center gap-1 text-red-600 border-red-200 hover:bg-red-50",children:[l.jsx(m,{className:"w-4 h-4"}),"삭제"]})]}),void 0!==b.wouldRecommend&&l.jsx("div",{className:"text-xs px-2 py-1 rounded-full "+(b.wouldRecommend?"bg-green-50 text-green-700":"bg-red-50 text-red-700"),children:b.wouldRecommend?"추천":"비추천"})]})]})})})};export{b as R};
