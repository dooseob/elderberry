var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,s=(e,a)=>{for(var t in a||(a={}))i.call(a,t)&&n(e,t,a[t]);if(r)for(var t of r(a))l.call(a,t)&&n(e,t,a[t]);return e},c=(e,r)=>a(e,t(r)),o=(e,a)=>{var t={};for(var n in e)i.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&r)for(var n of r(e))a.indexOf(n)<0&&l.call(e,n)&&(t[n]=e[n]);return t},d=(e,a,t)=>new Promise((r,i)=>{var l=e=>{try{s(t.next(e))}catch(a){i(a)}},n=e=>{try{s(t.throw(e))}catch(a){i(a)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,n);s((t=t.apply(e,a)).next())});import{r as m,j as h,c as u,Y as p,U as y,Z as g,_ as x,$ as v,E as b,a as f,W as N,X as w,H as k,a0 as C,a1 as j,a2 as F,a3 as S,a4 as $,a5 as E,a6 as M,h as L,a7 as A,b as z,C as R,I,g as O,a8 as T,v as G,a9 as P}from"./react-vendor-DjlEhPtN.js";import{m as _,A as B}from"./animation-lib-Df_skjj_.js";import{B as D}from"./core-ui-CLdLL7GI.js";import{C as H,a as W,b as U,c as V}from"./chat-pages-DZlm3u1D.js";import{c as q,a as K,B as Q}from"./board-pages-Boj7UMsD.js";import{d as Y,s as J,i as Z}from"./state-management-DnGX11vy.js";import{a as X}from"./style-utils-DeQRAeyh.js";import{a as ee}from"./http-client-9JY-woyA.js";const ae=m.memo(e=>{var a=e,{src:t,webpSrc:r,avifSrc:i,placeholder:l,lazy:n=!0,priority:d=!1,aspectRatio:u,sizes:p,fallback:y,loader:g,alt:x="",className:v="",containerClassName:b="",onLoad:f,onError:N}=a,w=o(a,["src","webpSrc","avifSrc","placeholder","lazy","priority","aspectRatio","sizes","fallback","loader","alt","className","containerClassName","onLoad","onError"]);const k=m.useRef(null),C=m.useRef(null),[j,F]=m.useState({isLoading:!0,isLoaded:!1,hasError:!1,currentSrc:l||t}),[S,$]=m.useState(!n||d);m.useEffect(()=>{if(!n||d)return;const e=new IntersectionObserver(a=>{const[t]=a;t.isIntersecting&&($(!0),e.disconnect())},{rootMargin:"50px",threshold:.1});return C.current&&e.observe(C.current),()=>e.disconnect()},[n,d]),m.useEffect(()=>{if(!S)return;const e=new Image;let a=t;i&&te("avif")?a=i:r&&te("webp")&&(a=r),e.onload=()=>{F({isLoading:!1,isLoaded:!0,hasError:!1,currentSrc:a})},e.onerror=()=>{if(y&&a!==y){const e=new Image;e.onload=()=>{F({isLoading:!1,isLoaded:!0,hasError:!1,currentSrc:y})},e.onerror=()=>{F({isLoading:!1,isLoaded:!1,hasError:!0,currentSrc:l||""})},e.src=y}else F({isLoading:!1,isLoaded:!1,hasError:!0,currentSrc:l||""})},e.src=a},[S,t,r,i,y,l]);const E=c(s({},u&&{aspectRatio:u}),{position:"relative",overflow:"hidden"}),M=q("transition-all duration-300 ease-in-out","w-full h-full object-cover",{"opacity-0":j.isLoading||!j.isLoaded,"opacity-100":j.isLoaded&&!j.hasError,"filter blur-sm scale-105":j.isLoading&&l,"filter-none scale-100":j.isLoaded},v),L=q("absolute inset-0 transition-opacity duration-300","bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200","animate-pulse",{"opacity-100":j.isLoading,"opacity-0":j.isLoaded||j.hasError});return h.jsxs("div",{ref:C,className:q("relative",b),style:E,children:[!j.isLoaded&&!j.hasError&&h.jsx("div",{className:L,children:g||h.jsx("div",{className:"flex items-center justify-center h-full",children:h.jsx("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"})})}),l&&j.isLoading&&h.jsx("img",{src:l,alt:"",className:"absolute inset-0 w-full h-full object-cover filter blur-sm opacity-60",loading:d?"eager":"lazy"}),S&&h.jsxs("picture",{children:[i&&h.jsx("source",{srcSet:i,type:"image/avif",sizes:p}),r&&h.jsx("source",{srcSet:r,type:"image/webp",sizes:p}),h.jsx("img",s({ref:k,src:j.currentSrc,alt:x,className:M,loading:d?"eager":"lazy",fetchPriority:d?"high":"auto",decoding:d?"sync":"async",sizes:p,onLoad:e=>{F(e=>c(s({},e),{isLoading:!1,isLoaded:!0})),null==f||f(e)},onError:e=>{F(e=>c(s({},e),{hasError:!0})),null==N||N(e)}},w))]}),j.hasError&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 text-gray-400",children:h.jsxs("div",{className:"text-center",children:[h.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),h.jsx("p",{className:"text-sm",children:"이미지를 불러올 수 없습니다"})]})})]})}),te=e=>{if("undefined"==typeof window)return!1;const a=document.createElement("canvas");a.width=1,a.height=1;try{return 5===a.toDataURL(`image/${e}`).indexOf(`image/${e}`)}catch(t){return!1}};ae.displayName="OptimizedImage";const re=X(["flex-shrink-0 border-0","transition-all duration-[var(--linear-transition-fast)]"],{variants:{orientation:{horizontal:"w-full h-px",vertical:"h-full w-px"},variant:{subtle:"bg-[var(--linear-color-border-subtle)]",default:"bg-[var(--linear-color-border-default)]",strong:"bg-[var(--linear-color-border-strong)]",accent:"bg-[var(--linear-color-accent)]",gradient:"bg-gradient-to-r from-transparent via-[var(--linear-color-border-default)] to-transparent",dashed:"border-t border-dashed border-[var(--linear-color-border-default)] bg-transparent",dotted:"border-t border-dotted border-[var(--linear-color-border-default)] bg-transparent"},thickness:{thin:"",normal:"h-0.5",thick:"h-1",thicker:"h-1.5"},spacing:{none:"my-0",xs:"my-[var(--linear-spacing-xs)]",sm:"my-[var(--linear-spacing-sm)]",md:"my-[var(--linear-spacing-md)]",lg:"my-[var(--linear-spacing-lg)]",xl:"my-[var(--linear-spacing-xl)]","2xl":"my-[var(--linear-spacing-2xl)]"}},compoundVariants:[{orientation:"vertical",variant:"dashed",className:"border-t-0 border-l border-dashed"},{orientation:"vertical",variant:"dotted",className:"border-t-0 border-l border-dotted"},{orientation:"vertical",thickness:"normal",className:"h-full w-0.5"},{orientation:"vertical",thickness:"thick",className:"h-full w-1"},{orientation:"vertical",thickness:"thicker",className:"h-full w-1.5"},{orientation:"vertical",spacing:"xs",className:"my-0 mx-[var(--linear-spacing-xs)]"},{orientation:"vertical",spacing:"sm",className:"my-0 mx-[var(--linear-spacing-sm)]"},{orientation:"vertical",spacing:"md",className:"my-0 mx-[var(--linear-spacing-md)]"},{orientation:"vertical",spacing:"lg",className:"my-0 mx-[var(--linear-spacing-lg)]"},{orientation:"vertical",spacing:"xl",className:"my-0 mx-[var(--linear-spacing-xl)]"},{orientation:"vertical",spacing:"2xl",className:"my-0 mx-[var(--linear-spacing-2xl)]"}],defaultVariants:{orientation:"horizontal",variant:"subtle",thickness:"thin",spacing:"md"}}),ie=m.forwardRef((e,a)=>{var t,r=e,{className:i,orientation:l,variant:n,thickness:d,spacing:u,label:p,icon:y,labelPosition:g="center",animation:x=!1,fade:v=!1,customColor:b,role:f="separator","aria-label":N}=r,w=o(r,["className","orientation","variant","thickness","spacing","label","icon","labelPosition","animation","fade","customColor","role","aria-label"]);const k=x&&!0,C=Boolean(p||y),j="horizontal"===l,F=m.useMemo(()=>{if(!b)return;const e=b.startsWith("#")?b:`var(${b})`;return"gradient"===n?{background:j?`linear-gradient(to right, transparent, ${e}, transparent)`:`linear-gradient(to bottom, transparent, ${e}, transparent)`}:{backgroundColor:e}},[b,n,j]);return C&&j?h.jsxs("div",c(s({ref:a,className:q("flex items-center",u&&`my-[var(--linear-spacing-${u})]`,k&&"linear-animate-in",i),role:f,"aria-label":N||("string"==typeof p?p:void 0)},w),{children:["left"!==g&&h.jsx("div",{className:q(re({orientation:"horizontal",variant:v?"gradient":n,thickness:d,spacing:"none"}),"flex-1"),style:F}),h.jsxs("div",{className:"flex items-center px-[var(--linear-spacing-md)] text-[var(--linear-color-text-secondary)] text-sm font-[var(--linear-font-weight-medium)]",children:[y&&h.jsx("span",{className:"flex items-center justify-center mr-2",children:m.isValidElement(y)?m.cloneElement(y,{className:q("w-4 h-4",null==(t=y.props)?void 0:t.className),"aria-hidden":"true"}):y}),p&&h.jsx("span",{children:p})]}),"right"!==g&&h.jsx("div",{className:q(re({orientation:"horizontal",variant:v?"gradient":n,thickness:d,spacing:"none"}),"flex-1"),style:F})]})):h.jsx("div",s({ref:a,className:q(re({orientation:l,variant:n,thickness:d,spacing:u}),k&&"linear-animate-in",i),style:F,role:f,"aria-label":N},w))});ie.displayName="LinearSeparator",m.forwardRef((e,a)=>{var t=e,{title:r,description:i}=t,l=o(t,["title","description"]);return h.jsxs("div",{className:"flex flex-col space-y-2",children:[h.jsx(ie,s({ref:a,label:r,variant:"gradient",spacing:"lg",role:"separator","aria-label":`${r} 섹션 구분`},l)),i&&h.jsx("p",{className:"text-center text-sm text-[var(--linear-color-text-tertiary)] px-4",children:i})]})}).displayName="LinearSectionSeparator",m.forwardRef((e,a)=>{var t=e,{iconType:r="chevron",className:i}=t,l=o(t,["iconType","className"]);const n={chevron:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),slash:h.jsx("span",{className:"text-[var(--linear-color-text-tertiary)]",children:"/"}),dot:h.jsx("span",{className:"text-[var(--linear-color-text-tertiary)]",children:"•"}),arrow:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})};return h.jsx("span",c(s({ref:a,className:q("inline-flex items-center justify-center text-[var(--linear-color-text-tertiary)] mx-2",i),role:"presentation","aria-hidden":"true"},l),{children:n[r]}))}).displayName="LinearBreadcrumbSeparator",m.forwardRef((e,a)=>{var t=e,{node:r,active:i=!1,completed:l=!1,className:n}=t,c=o(t,["node","active","completed","className"]);const d=l?"accent":i?"default":"subtle";return h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("div",{className:q("flex items-center justify-center w-8 h-8 rounded-full border-2 bg-[var(--linear-color-background)]",l&&"border-[var(--linear-color-accent)] bg-[var(--linear-color-accent)] text-white",i&&"border-[var(--linear-color-accent)] text-[var(--linear-color-accent)]",!i&&!l&&"border-[var(--linear-color-border-default)] text-[var(--linear-color-text-tertiary)]"),children:r||h.jsx("div",{className:q("w-2 h-2 rounded-full",l&&"bg-white",i&&"bg-[var(--linear-color-accent)]",!i&&!l&&"bg-[var(--linear-color-border-default)]")})}),h.jsx(ie,s({ref:a,orientation:"vertical",variant:d,thickness:"thin",spacing:"none",className:q("h-8 my-2",n),role:"presentation"},c))]})}).displayName="LinearTimelineSeparator";const le=m.createContext(null),ne=()=>{const e=m.useContext(le);if(!e)throw new Error("Form compound components must be used within Form.Root");return e};m.forwardRef(({title:e,description:a,children:t,className:r,"data-testid":i},l)=>h.jsxs("div",{ref:l,className:q("space-y-4",r),"data-testid":i,children:[e&&h.jsxs("div",{className:"space-y-1",children:[h.jsx("h3",{className:"text-lg font-medium",children:e}),a&&h.jsx("p",{className:"text-sm text-muted-foreground",children:a})]}),h.jsx("div",{className:"space-y-4",children:t})]})).displayName="FormGroup",m.forwardRef(({children:e,align:a="right",className:t,"data-testid":r},i)=>h.jsx("div",{ref:i,className:q("flex gap-3",{left:"justify-start",center:"justify-center",right:"justify-end"}[a],t),"data-testid":r,children:e})).displayName="FormActions",m.forwardRef(({children:e,variant:a="primary",size:t="md",disabled:r,loading:i,className:l,"data-testid":n},s)=>{const{formState:{isSubmitting:c,isValid:o}}=ne(),d=r||c||i,m=c||i;return h.jsxs("button",{ref:s,type:"submit",disabled:d,className:q("inline-flex items-center justify-center rounded-md font-medium transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","disabled:pointer-events-none disabled:opacity-50",{primary:"bg-blue-600 text-white hover:bg-blue-700 disabled:bg-blue-300",secondary:"bg-gray-600 text-white hover:bg-gray-700 disabled:bg-gray-300",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:bg-gray-100"}[a],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[t],l),"data-testid":n,children:[m&&h.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e]})}).displayName="FormSubmit",m.forwardRef(({children:e,variant:a="outline",size:t="md",className:r,"data-testid":i},l)=>{const{reset:n}=ne();return h.jsx("button",{ref:l,type:"button",onClick:()=>n(),className:q("inline-flex items-center justify-center rounded-md font-medium transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",{secondary:"bg-gray-600 text-white hover:bg-gray-700",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50",ghost:"text-gray-700 hover:bg-gray-100"}[a],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[t],r),"data-testid":i,children:e})}).displayName="FormReset";const se=({name:e,value:a,options:t,onChange:r,error:i,required:l=!1,className:n="",direction:s="vertical","aria-label":c,"aria-describedby":o})=>{const d="vertical"===s?"space-y-3":"space-x-4 flex flex-wrap",m=i?`${e}-error`:void 0,u=[o,m].filter(Boolean).join(" ")||void 0;return h.jsxs("div",{className:n,children:[h.jsx("div",{className:d,role:"radiogroup","aria-label":c,"aria-describedby":u,"aria-required":l,"aria-invalid":!!i,children:t.map(t=>{const n=a===t.value,s=t.disabled;return h.jsxs(_.label,{className:`\n                relative flex items-start cursor-pointer p-4 rounded-lg border-2 transition-all duration-200\n                ${n?"border-elderberry-500 bg-elderberry-50":"border-elderberry-200 bg-white hover:border-elderberry-300"}\n                ${s?"opacity-50 cursor-not-allowed":"hover:bg-elderberry-25"}\n                ${i?"border-red-300":""}\n              `,whileHover:s?{}:{scale:1.02},whileTap:s?{}:{scale:.98},children:[h.jsx("input",{type:"radio",name:e,value:t.value,checked:n,onChange:()=>!s&&r(t.value),disabled:s,required:l,className:"sr-only","aria-describedby":t.description?`${e}-${t.value}-desc`:void 0}),h.jsx("div",{className:`\n                flex-shrink-0 w-5 h-5 rounded-full border-2 mr-4 mt-0.5 relative\n                ${n?"border-elderberry-500":"border-elderberry-300"}\n              `,children:n&&h.jsx(_.div,{className:"absolute inset-1 bg-elderberry-500 rounded-full",initial:{scale:0},animate:{scale:1},transition:{duration:.2}})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:`\n                  text-sm font-medium\n                  ${n?"text-elderberry-900":"text-elderberry-700"}\n                  ${s?"text-elderberry-400":""}\n                `,children:t.label}),t.description&&h.jsx("div",{id:`${e}-${t.value}-desc`,className:`\n                      text-xs mt-1\n                      ${n?"text-elderberry-600":"text-elderberry-500"}\n                      ${s?"text-elderberry-300":""}\n                    `,children:t.description})]}),n&&h.jsx(_.div,{className:"flex-shrink-0 ml-4",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{duration:.2},children:h.jsx("div",{className:"w-5 h-5 bg-elderberry-500 rounded-full flex items-center justify-center",children:h.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]},t.value)})}),i&&h.jsx(_.div,{id:m,className:"mt-2 text-sm text-red-600",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2},role:"alert","aria-live":"polite",children:i})]})},ce=({progress:e,steps:a=[],currentStep:t=0,showPercentage:r=!0,showSteps:i=!1,className:l=""})=>{const n=Math.max(0,Math.min(100,e));return h.jsxs("div",{className:`w-full ${l}`,children:[r&&h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("span",{className:"text-sm font-medium text-elderberry-700",children:"진행률"}),h.jsxs("span",{className:"text-sm font-semibold text-elderberry-900",children:[Math.round(n),"%"]})]}),h.jsx("div",{className:"w-full bg-elderberry-100 rounded-full h-3 overflow-hidden",children:h.jsx(_.div,{className:"h-full bg-gradient-to-r from-elderberry-500 to-elderberry-600 rounded-full",initial:{width:0},animate:{width:`${n}%`},transition:{duration:.8,ease:"easeOut"}})}),i&&a.length>0&&h.jsxs("div",{className:"mt-4",children:[h.jsx("div",{className:"flex justify-between items-center",children:a.map((e,a)=>h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("div",{className:`\n                    w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold\n                    transition-all duration-300\n                    ${a<=t?"bg-elderberry-600 text-white":"bg-elderberry-100 text-elderberry-400"}\n                  `,children:a+1}),h.jsx("span",{className:`\n                    mt-2 text-xs text-center max-w-16\n                    ${a<=t?"text-elderberry-700 font-medium":"text-elderberry-400"}\n                  `,children:e})]},a))}),h.jsxs("div",{className:"relative mt-2",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-0.5 bg-elderberry-100"}),h.jsx(_.div,{className:"absolute top-0 left-0 h-0.5 bg-elderberry-600",initial:{width:0},animate:{width:a.length>1?t/(a.length-1)*100+"%":"0%"},transition:{duration:.8,ease:"easeOut"}})]})]})]})},oe=(e,a)=>{const t={name:"Elderberry - 글로벌 요양원 구인구직 서비스",description:"전문적인 요양원 검색과 건강 평가를 제공하는 글로벌 플랫폼",url:"https://www.elderberry-ai.com",image:"https://www.elderberry-ai.com/images/og-image.jpg",locale:"ko_KR"};return m.useEffect(()=>{e.title?document.title=`${e.title} | ${t.name}`:document.title=t.name,de(e,t),me(e,t),he(e,t),ue(e,t)},[e,t]),{updateSEO:a=>{de(s(s({},e),a),t)}}},de=(e,a)=>{var t,r;if(pe("description",e.description||(null==a?void 0:a.description)),null==(t=e.keywords)?void 0:t.length){const a=Array.isArray(e.keywords)?e.keywords.join(", "):"string"==typeof e.keywords?e.keywords:String(e.keywords);pe("keywords",a)}e.author&&pe("author",e.author),pe("robots","index, follow, max-snippet:-1, max-image-preview:large"),pe("viewport","width=device-width, initial-scale=1.0"),document.documentElement.lang=(null==(r=e.locale)?void 0:r.split("_")[0])||"ko"},me=(e,a)=>{var t;pe("og:title",e.title||(null==a?void 0:a.name),"property"),pe("og:description",e.description||(null==a?void 0:a.description),"property"),pe("og:image",e.image||(null==a?void 0:a.image),"property"),pe("og:url",e.url||(null==a?void 0:a.url),"property"),pe("og:type",e.type||"website","property"),pe("og:site_name",e.siteName||(null==a?void 0:a.name),"property"),pe("og:locale",e.locale||(null==a?void 0:a.locale),"property"),(e.image||(null==a?void 0:a.image))&&(pe("og:image:width","1200","property"),pe("og:image:height","630","property"),pe("og:image:alt",e.title||(null==a?void 0:a.name),"property")),"article"===e.type&&(e.author&&pe("article:author",e.author,"property"),e.publishedTime&&pe("article:published_time",e.publishedTime,"property"),e.modifiedTime&&pe("article:modified_time",e.modifiedTime,"property"),e.section&&pe("article:section",e.section,"property"),(null==(t=e.tags)?void 0:t.length)&&e.tags.forEach(e=>{const a=document.createElement("meta");a.property="article:tag",a.content=e,document.head.appendChild(a)}))},he=(e,a)=>{pe("twitter:card","summary_large_image","name"),pe("twitter:title",e.title||(null==a?void 0:a.name),"name"),pe("twitter:description",e.description||(null==a?void 0:a.description),"name"),pe("twitter:image",e.image||(null==a?void 0:a.image),"name"),pe("twitter:site","@elderberry_ai","name"),pe("twitter:creator","@elderberry_ai","name")},ue=(e,a)=>{var t,r,i;const l=document.querySelector("script[data-structured-data]");l&&l.remove();const n={"@context":"https://schema.org","@graph":[]};if(n["@graph"].push({"@type":"WebSite","@id":`${null==a?void 0:a.url}#website`,url:null==a?void 0:a.url,name:null==a?void 0:a.name,description:null==a?void 0:a.description,potentialAction:[{"@type":"SearchAction",target:{"@type":"EntryPoint",urlTemplate:`${null==a?void 0:a.url}/search?q={search_term_string}`},"query-input":"required name=search_term_string"}]}),n["@graph"].push({"@type":"Organization","@id":`${null==a?void 0:a.url}#organization`,name:"Elderberry Inc.",url:null==a?void 0:a.url,logo:{"@type":"ImageObject","@id":`${null==a?void 0:a.url}#logo`,url:`${null==a?void 0:a.url}/images/logo.png`,width:512,height:512,caption:"Elderberry Logo"},sameAs:["https://www.facebook.com/elderberry.ai","https://www.instagram.com/elderberry.ai","https://www.linkedin.com/company/elderberry-ai"]}),("article"===e.type||e.breadcrumbs)&&n["@graph"].push({"@type":"WebPage","@id":`${e.url||(null==a?void 0:a.url)}#webpage`,url:e.url,name:e.title,description:e.description,isPartOf:{"@id":`${null==a?void 0:a.url}#website`},about:{"@id":`${null==a?void 0:a.url}#organization`}}),(null==(t=e.breadcrumbs)?void 0:t.length)&&n["@graph"].push({"@type":"BreadcrumbList",itemListElement:e.breadcrumbs.map((e,a)=>({"@type":"ListItem",position:a+1,name:e.name,item:e.url}))}),(null==(r=e.faqData)?void 0:r.length)&&n["@graph"].push({"@type":"FAQPage",mainEntity:e.faqData.map(e=>({"@type":"Question",name:e.question,acceptedAnswer:{"@type":"Answer",text:e.answer}}))}),e.businessInfo){const t=e.businessInfo;n["@graph"].push({"@type":"LocalBusiness","@id":`${null==a?void 0:a.url}#business`,name:t.name,"@subtype":t.type,address:t.address?{"@type":"PostalAddress",streetAddress:t.address}:void 0,telephone:t.telephone,email:t.email,website:t.website,openingHoursSpecification:null==(i=t.openingHours)?void 0:i.map(e=>{var a,t;return{"@type":"OpeningHoursSpecification",dayOfWeek:e.split(":")[0],opens:null==(a=e.split(":")[1])?void 0:a.split("-")[0],closes:null==(t=e.split(":")[1])?void 0:t.split("-")[1]}}),priceRange:t.priceRange})}const s=document.createElement("script");s.type="application/ld+json",s.setAttribute("data-structured-data","true"),s.textContent=JSON.stringify(n),document.head.appendChild(s)},pe=(e,a,t="name")=>{if(!a)return;let r=document.querySelector(`meta[${t}="${e}"]`);r||(r=document.createElement("meta"),r.setAttribute(t,e),document.head.appendChild(r)),r.content=a},ye={searchResults:[],recommendations:[],selectedFacility:null,searchFilters:{},matchingPreference:{preferredRegions:new Set(["서울특별시","경기도"]),preferredFacilityTypes:new Set(["요양원","요양병원"]),maxMonthlyFee:3e6,minFacilityGrade:"C",requiredSpecialties:new Set,maxDistanceKm:null,prioritizeAvailability:!0,prioritizeCost:!1,prioritizeQuality:!0},userHistory:[],isSearching:!1,isLoadingRecommendations:!1,isLoadingHistory:!1,searchError:null,recommendationError:null,isDetailModalOpen:!1,isRecommendationModalOpen:!1,isMatchingFormOpen:!1},ge={searchFacilities(e){return d(this,null,function*(){try{return(yield K.getWithParams("/facilities",{facilityType:e.facilityType,facilityGrade:e.facilityGrade,region:e.region,careGradeLevel:e.careGradeLevel})).data.content||[]}catch(a){throw new Error(`시설 검색 실패: ${a.message||a.statusText}`)}})},getRecommendations(e,a,t){return d(this,null,function*(){const r={memberId:e.toString(),coordinatorId:t,preference:{preferredRegions:Array.from(a.preferredRegions),preferredFacilityTypes:Array.from(a.preferredFacilityTypes),maxMonthlyFee:a.maxMonthlyFee,minFacilityGrade:a.minFacilityGrade,requiredSpecialties:Array.from(a.requiredSpecialties),maxDistanceKm:a.maxDistanceKm,prioritizeAvailability:a.prioritizeAvailability,prioritizeCost:a.prioritizeCost,prioritizeQuality:a.prioritizeQuality},maxResults:10};try{return(yield K.post("/facilities/recommendations",r)).data}catch(i){if(400===i.status)throw new Error(`추천 시설 조회 실패: 건강 평가 데이터가 없거나 요청 데이터가 잘못되었습니다. (${i.status})`);throw new Error(`추천 시설 조회 실패: ${i.message||i.statusText} (${i.status||"Unknown"})`)}})},trackFacilityAction(e,a){return d(this,null,function*(){try{yield K.post(`/facilities/${e}/${a}`)}catch(t){throw new Error(`시설 ${a} 추적 실패: ${t.message||t.statusText}`)}})},completeMatching(e,a,t,r){return d(this,null,function*(){const i={outcome:a,satisfactionScore:t,feedback:r};try{yield K.post(`/facilities/${e}/complete-matching`,i)}catch(l){throw new Error(`매칭 완료 처리 실패: ${l.message||l.statusText}`)}})},getUserHistory(){return d(this,null,function*(){try{return(yield K.get("/facilities/matching-history")).data}catch(e){throw new Error(`매칭 이력 조회 실패: ${e.message||e.statusText}`)}})}},xe=u()(Y(J(Z((e,a)=>c(s({},ye),{searchFacilities:a=>d(null,null,function*(){e(e=>{e.isSearching=!0,e.searchError=null});try{const t=yield ge.searchFacilities(a);e(e=>{e.searchResults=t,e.searchFilters=a,e.isSearching=!1})}catch(t){e(e=>{e.searchError=t instanceof Error?t.message:"시설 검색 중 오류가 발생했습니다.",e.isSearching=!1})}}),updateSearchFilters:a=>{e(e=>{Object.assign(e.searchFilters,a)})},clearSearchResults:()=>{e(e=>{e.searchResults=[],e.searchFilters={},e.searchError=null})},getRecommendations:(t,r)=>d(null,null,function*(){e(e=>{e.isLoadingRecommendations=!0,e.recommendationError=null});try{const i=yield ge.getRecommendations(t,a().matchingPreference,r);e(e=>{e.recommendations=i,e.isLoadingRecommendations=!1})}catch(i){e(e=>{e.recommendationError=i instanceof Error?i.message:"시설 추천 중 오류가 발생했습니다.",e.isLoadingRecommendations=!1})}}),updateMatchingPreference:a=>{e(e=>{Object.assign(e.matchingPreference,a)})},clearRecommendations:()=>{e(e=>{e.recommendations=[],e.recommendationError=null})},selectFacility:a=>{e(e=>{e.selectedFacility=a})},clearSelectedFacility:()=>{e(e=>{e.selectedFacility=null})},trackFacilityView:e=>d(null,null,function*(){}),trackFacilityContact:e=>d(null,null,function*(){try{yield ge.trackFacilityAction(e,"contact"),a().loadUserHistory()}catch(t){}}),trackFacilityVisit:e=>d(null,null,function*(){try{yield ge.trackFacilityAction(e,"visit"),a().loadUserHistory()}catch(t){}}),completeMatching:(e,t,r,i)=>d(null,null,function*(){try{yield ge.completeMatching(e,t,r,i),a().loadUserHistory()}catch(l){throw l}}),loadUserHistory:()=>d(null,null,function*(){e(e=>{e.isLoadingHistory=!0});try{const a=yield ge.getUserHistory();e(e=>{e.userHistory=a,e.isLoadingHistory=!1})}catch(a){e(e=>{e.isLoadingHistory=!1})}}),clearUserHistory:()=>{e(e=>{e.userHistory=[]})},openDetailModal:()=>{e(e=>{e.isDetailModalOpen=!0})},closeDetailModal:()=>{e(e=>{e.isDetailModalOpen=!1})},openRecommendationModal:()=>{e(e=>{e.isRecommendationModalOpen=!0})},closeRecommendationModal:()=>{e(e=>{e.isRecommendationModalOpen=!1})},openMatchingForm:()=>{e(e=>{e.isMatchingFormOpen=!0})},closeMatchingForm:()=>{e(e=>{e.isMatchingFormOpen=!1})},setSearchError:a=>{e(e=>{e.searchError=a})},setRecommendationError:a=>{e(e=>{e.recommendationError=a})},clearAllErrors:()=>{e(e=>{e.searchError=null,e.recommendationError=null})},resetFacilityState:()=>{e(()=>s({},ye))}}))),{name:"FacilityStore"})),ve=new WeakMap,be=({facility:e,viewMode:a="list",onSelect:t,showActions:r=!0,isRecommendation:i=!1,matchScore:l,recommendationReason:n})=>{const[s,c]=m.useState(null),{selectFacility:o,openDetailModal:u,trackFacilityContact:f,trackFacilityVisit:N}=xe(),w=()=>{o(e),u(),null==t||t(e)},k=a=>d(null,null,function*(){a.stopPropagation(),c("contact");try{yield f(e.id),window.open(`tel:${e.phoneNumber}`)}catch(t){}finally{c(null)}}),C=a=>d(null,null,function*(){a.stopPropagation(),c("visit");try{yield N(e.id),alert("방문 예약이 접수되었습니다. 시설에서 연락드리겠습니다.")}catch(t){}finally{c(null)}}),j=e=>{switch(e){case"A":return"text-green-600 bg-green-100";case"B":return"text-blue-600 bg-blue-100";case"C":return"text-yellow-600 bg-yellow-100";case"D":return"text-orange-600 bg-orange-100";case"E":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},F=e.totalCapacity-e.currentOccupancy,S=e.currentOccupancy/e.totalCapacity*100,$=e=>e?`${(e/1e4).toFixed(0)}만원`:"문의";return"grid"===a?h.jsx(_.div,{whileHover:{y:-4},transition:{duration:.2},children:h.jsxs(H,{className:"h-full cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:w,children:[i&&l&&h.jsx("div",{className:"absolute top-4 right-4 z-10",children:h.jsxs("div",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium flex items-center",children:[h.jsx(p,{className:"w-3 h-3 mr-1"}),Math.round(l),"% 매칭"]})}),h.jsxs("div",{className:"relative h-48 bg-gray-200 rounded-t-lg overflow-hidden",children:[e.imageUrl?h.jsx("img",{src:e.imageUrl,alt:e.facilityName,className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx(y,{className:"w-12 h-12 text-gray-400"})}),h.jsx("div",{className:"absolute top-3 left-3",children:h.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${j(e.facilityGrade)}`,children:[e.facilityGrade,"등급"]})})]}),h.jsxs(W,{className:"p-4",children:[h.jsxs("div",{className:"mb-3",children:[h.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-1 line-clamp-1",children:e.facilityName}),h.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.facilityType}),h.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[h.jsx(g,{className:"w-4 h-4 mr-1"}),h.jsx("span",{className:"line-clamp-1",children:e.address})]})]}),h.jsxs("div",{className:"mb-3",children:[h.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[h.jsx("span",{className:"text-gray-600",children:"입소 현황"}),h.jsx("span",{className:"font-medium "+(F>0?"text-green-600":"text-red-600"),children:F>0?`${F}명 입소 가능`:"입소 대기"})]}),h.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:h.jsx("div",{className:"h-2 rounded-full "+(S>=90?"bg-red-500":S>=70?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(S,100)}%`}})})]}),h.jsx("div",{className:"mb-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm text-gray-600",children:"월 기본료"}),h.jsx("span",{className:"font-semibold text-lg text-gray-900",children:$(e.monthlyBasicFee)})]})}),e.specialties&&e.specialties.length>0&&h.jsx("div",{className:"mb-4",children:h.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.specialties.slice(0,2).map(e=>h.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full",children:e},e)),e.specialties.length>2&&h.jsxs("span",{className:"px-2 py-1 bg-gray-50 text-gray-600 text-xs rounded-full",children:["+",e.specialties.length-2]})]})}),i&&n&&h.jsx("div",{className:"mb-4 p-2 bg-purple-50 rounded-lg",children:h.jsxs("p",{className:"text-xs text-purple-700 line-clamp-2",children:["💡 ",n]})}),r&&h.jsxs("div",{className:"flex space-x-2",children:[h.jsx(D,{variant:"outline",size:"sm",onClick:k,disabled:"contact"===s,className:"flex-1",children:"contact"===s?h.jsx(_.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:h.jsx(x,{className:"w-4 h-4"})}):h.jsx(x,{className:"w-4 h-4"})}),h.jsx(D,{size:"sm",onClick:C,disabled:"visit"===s,className:"flex-1",children:"visit"===s?h.jsx(_.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:h.jsx(v,{className:"w-4 h-4"})}):h.jsxs(h.Fragment,{children:[h.jsx(v,{className:"w-4 h-4 mr-1"}),"방문"]})})]})]})]})}):h.jsx(_.div,{whileHover:{x:4},transition:{duration:.2},children:h.jsx(H,{className:"cursor-pointer hover:shadow-md transition-shadow duration-200",onClick:w,children:h.jsx(W,{className:"p-6",children:h.jsxs("div",{className:"flex items-start space-x-4",children:[h.jsx("div",{className:"relative w-24 h-24 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0",children:e.imageUrl?h.jsx("img",{src:e.imageUrl,alt:e.facilityName,className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx(y,{className:"w-8 h-8 text-gray-400"})})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:"flex items-start justify-between mb-2",children:h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-xl text-gray-900 mb-1",children:e.facilityName}),h.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[h.jsx("span",{className:"text-gray-600",children:e.facilityType}),h.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${j(e.facilityGrade)}`,children:[e.facilityGrade,"등급"]}),i&&l&&h.jsxs("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium flex items-center",children:[h.jsx(p,{className:"w-3 h-3 mr-1"}),Math.round(l),"% 매칭"]})]})]})}),h.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-3",children:[h.jsx(g,{className:"w-4 h-4 mr-1"}),h.jsx("span",{children:e.address})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[h.jsx("span",{className:"text-gray-600",children:"입소 현황"}),h.jsx("span",{className:"font-medium "+(F>0?"text-green-600":"text-red-600"),children:F>0?`${F}명 가능`:"대기"})]}),h.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:h.jsx("div",{className:"h-2 rounded-full "+(S>=90?"bg-red-500":S>=70?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(S,100)}%`}})})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"월 기본료"}),h.jsx("div",{className:"font-semibold text-lg text-gray-900",children:$(e.monthlyBasicFee)})]})]}),e.specialties&&e.specialties.length>0&&h.jsx("div",{className:"mb-3",children:h.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.specialties.slice(0,4).map(e=>h.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full",children:e},e)),e.specialties.length>4&&h.jsxs("span",{className:"px-2 py-1 bg-gray-50 text-gray-600 text-xs rounded-full",children:["+",e.specialties.length-4,"개 더"]})]})}),i&&n&&h.jsx("div",{className:"mb-3 p-3 bg-purple-50 rounded-lg",children:h.jsxs("p",{className:"text-sm text-purple-700",children:["💡 ",n]})}),r&&h.jsxs("div",{className:"flex space-x-2 pt-2",children:[h.jsx(D,{variant:"outline",size:"sm",onClick:k,disabled:"contact"===s,children:"contact"===s?h.jsx(_.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:h.jsx(x,{className:"w-4 h-4"})}):h.jsxs(h.Fragment,{children:[h.jsx(x,{className:"w-4 h-4 mr-1"}),"연락하기"]})}),h.jsx(D,{size:"sm",onClick:C,disabled:"visit"===s,children:"visit"===s?h.jsx(_.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:h.jsx(v,{className:"w-4 h-4"})}):h.jsxs(h.Fragment,{children:[h.jsx(v,{className:"w-4 h-4 mr-1"}),"방문 예약"]})}),h.jsxs(D,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),w()},children:[h.jsx(b,{className:"w-4 h-4 mr-1"}),"상세보기"]})]})]})]})})})})},fe=({facilities:e,viewMode:a="list",isLoading:t=!1,emptyMessage:r="시설이 없습니다.",onFacilitySelect:i,showActions:l=!0})=>{const n=()=>h.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((e,a)=>h.jsx(H,{className:"animate-pulse",children:h.jsx(W,{className:"p-6",children:h.jsxs("div",{className:"flex items-start space-x-4",children:[h.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-lg flex-shrink-0"}),h.jsxs("div",{className:"flex-1 space-y-3",children:[h.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3"}),h.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]}),h.jsxs("div",{className:"flex space-x-2 pt-2",children:[h.jsx("div",{className:"h-8 bg-gray-200 rounded w-20"}),h.jsx("div",{className:"h-8 bg-gray-200 rounded w-20"})]})]}),h.jsxs("div",{className:"text-right space-y-2",children:[h.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"}),h.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"}),h.jsx("div",{className:"h-4 bg-gray-200 rounded w-12"})]})]})})},a))}),s=()=>h.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"text-center py-12",children:h.jsx(H,{children:h.jsx(W,{className:"p-12",children:h.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[h.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:h.jsx(N,{className:"w-8 h-8 text-gray-400"})}),h.jsxs("div",{className:"text-center",children:[h.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"검색 결과가 없습니다"}),h.jsx("p",{className:"text-gray-500 max-w-md",children:r})]}),h.jsx("div",{className:"text-sm text-gray-400 mt-4",children:h.jsx("p",{children:"검색 조건을 변경하거나 필터를 조정해보세요."})})]})})})});return t?h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"flex items-center justify-center py-8",children:h.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[h.jsx(f,{className:"w-5 h-5 animate-spin"}),h.jsx("span",{children:"시설을 검색하고 있습니다..."})]})}),h.jsx(n,{})]}):0===e.length?h.jsx(s,{}):"grid"===a?h.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.jsx(B,{children:e.map((e,a)=>h.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.05*a},children:h.jsx(be,{facility:e,viewMode:"grid",onSelect:i,showActions:l})},e.id))})}):h.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"space-y-4",children:h.jsx(B,{children:e.map((e,a)=>h.jsx(_.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,delay:.05*a},children:h.jsx(be,{facility:e,viewMode:"list",onSelect:i,showActions:l})},e.id))})})},Ne=[{value:"요양시설",label:"노인요양시설",description:"24시간 케어 서비스"},{value:"요양병원",label:"요양병원",description:"의료진 상주 치료"},{value:"양로시설",label:"양로시설",description:"독립생활 지원"},{value:"치매전문시설",label:"치매전문시설",description:"치매 특화 케어"},{value:"재활전문시설",label:"재활전문시설",description:"재활치료 중심"},{value:"단기보호시설",label:"단기보호시설",description:"임시 보호 서비스"}],we=[{value:"A",label:"A등급",description:"최우수 (90점 이상)",color:"text-green-600"},{value:"B",label:"B등급",description:"우수 (80-89점)",color:"text-blue-600"},{value:"C",label:"C등급",description:"양호 (70-79점)",color:"text-yellow-600"},{value:"D",label:"D등급",description:"보통 (60-69점)",color:"text-orange-600"},{value:"E",label:"E등급",description:"미흡 (60점 미만)",color:"text-red-600"}],ke=[{value:1,label:"1등급",description:"최중증 (95점 이상)"},{value:2,label:"2등급",description:"중증 (75-94점)"},{value:3,label:"3등급",description:"중등도 (60-74점)"},{value:4,label:"4등급",description:"경증 (51-59점)"},{value:5,label:"5등급",description:"경증 (45-50점)"}],Ce=["서울특별시","부산광역시","대구광역시","인천광역시","광주광역시","대전광역시","울산광역시","세종특별자치시","경기도","강원도","충청북도","충청남도","전라북도","전라남도","경상북도","경상남도","제주특별자치도"],je=[{value:1e6,label:"100만원 이하"},{value:15e5,label:"150만원 이하"},{value:2e6,label:"200만원 이하"},{value:25e5,label:"250만원 이하"},{value:3e6,label:"300만원 이하"},{value:5e6,label:"500만원 이하"}],Fe=["치매케어","재활치료","물리치료","작업치료","언어치료","인지치료","호스피스케어","의료케어","영양관리","심리상담"],Se=({filters:e,onFiltersChange:a,onClear:t})=>{const[r,i]=m.useState(new Set(["type","grade"])),l=e=>{const a=new Set(r);a.has(e)?a.delete(e):a.add(e),i(a)},n=(e,t)=>{a({[e]:t})},s=Object.values(e).filter(e=>null!=e&&""!==e).length;return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["상세 필터",s>0&&h.jsxs("span",{className:"ml-2 bg-blue-100 text-blue-800 text-sm px-2 py-1 rounded-full",children:[s,"개 적용됨"]})]}),s>0&&h.jsxs(D,{variant:"outline",size:"sm",onClick:()=>{a({facilityType:void 0,facilityGrade:void 0,region:void 0,careGradeLevel:void 0,maxMonthlyFee:void 0,minFacilityGrade:void 0,specialties:void 0,maxDistanceKm:void 0,hasAvailableSlots:void 0}),null==t||t()},className:"text-gray-500 hover:text-gray-700",children:[h.jsx(w,{className:"w-4 h-4 mr-1"}),"전체 초기화"]})]}),h.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[h.jsxs("button",{onClick:()=>l("type"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(y,{className:"w-5 h-5 text-gray-400 mr-2"}),h.jsx("span",{className:"font-medium",children:"시설 타입"})]}),h.jsx(_.div,{animate:{rotate:r.has("type")?180:0},transition:{duration:.2},children:h.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),r.has("type")&&h.jsx(_.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:Ne.map(a=>h.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[h.jsx("input",{type:"radio",name:"facilityType",value:a.value,checked:e.facilityType===a.value,onChange:e=>n("facilityType",e.target.value),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.label}),h.jsx("div",{className:"text-xs text-gray-500",children:a.description})]})]},a.value))})})]}),h.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[h.jsxs("button",{onClick:()=>l("grade"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(p,{className:"w-5 h-5 text-gray-400 mr-2"}),h.jsx("span",{className:"font-medium",children:"시설 등급"})]}),h.jsx(_.div,{animate:{rotate:r.has("grade")?180:0},transition:{duration:.2},children:h.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),r.has("grade")&&h.jsx(_.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:we.map(a=>h.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[h.jsx("input",{type:"radio",name:"facilityGrade",value:a.value,checked:e.facilityGrade===a.value,onChange:e=>n("facilityGrade",e.target.value),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),h.jsxs("div",{children:[h.jsx("div",{className:`text-sm font-medium ${a.color}`,children:a.label}),h.jsx("div",{className:"text-xs text-gray-500",children:a.description})]})]},a.value))})})]}),h.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[h.jsxs("button",{onClick:()=>l("region"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(g,{className:"w-5 h-5 text-gray-400 mr-2"}),h.jsx("span",{className:"font-medium",children:"지역"})]}),h.jsx(_.div,{animate:{rotate:r.has("region")?180:0},transition:{duration:.2},children:h.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),r.has("region")&&h.jsx(_.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:h.jsxs("select",{value:e.region||"",onChange:e=>n("region",e.target.value||void 0),className:"mt-3 w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[h.jsx("option",{value:"",children:"전체 지역"}),Ce.map(e=>h.jsx("option",{value:e,children:e},e))]})})]}),h.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[h.jsxs("button",{onClick:()=>l("care"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(k,{className:"w-5 h-5 text-gray-400 mr-2"}),h.jsx("span",{className:"font-medium",children:"케어 등급"})]}),h.jsx(_.div,{animate:{rotate:r.has("care")?180:0},transition:{duration:.2},children:h.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),r.has("care")&&h.jsx(_.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:ke.map(a=>h.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[h.jsx("input",{type:"radio",name:"careGradeLevel",value:a.value,checked:e.careGradeLevel===a.value,onChange:e=>n("careGradeLevel",parseInt(e.target.value)),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.label}),h.jsx("div",{className:"text-xs text-gray-500",children:a.description})]})]},a.value))})})]}),h.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[h.jsxs("button",{onClick:()=>l("cost"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(C,{className:"w-5 h-5 text-gray-400 mr-2"}),h.jsx("span",{className:"font-medium",children:"월 비용"})]}),h.jsx(_.div,{animate:{rotate:r.has("cost")?180:0},transition:{duration:.2},children:h.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),r.has("cost")&&h.jsx(_.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:h.jsx("div",{className:"space-y-2 mt-3",children:je.map(a=>h.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[h.jsx("input",{type:"radio",name:"maxMonthlyFee",value:a.value,checked:e.maxMonthlyFee===a.value,onChange:e=>n("maxMonthlyFee",parseInt(e.target.value)),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),h.jsx("span",{className:"text-sm text-gray-900",children:a.label})]},a.value))})})]}),h.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[h.jsxs("button",{onClick:()=>l("specialties"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(p,{className:"w-5 h-5 text-gray-400 mr-2"}),h.jsx("span",{className:"font-medium",children:"전문 서비스"})]}),h.jsx(_.div,{animate:{rotate:r.has("specialties")?180:0},transition:{duration:.2},children:h.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),r.has("specialties")&&h.jsx(_.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:h.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:Fe.map(a=>h.jsx("button",{onClick:()=>{const t=e.specialties||[],r=t.includes(a)?t.filter(e=>e!==a):[...t,a];n("specialties",r.length>0?r:void 0)},className:"px-3 py-1 text-sm rounded-full border transition-colors "+((e.specialties||[]).includes(a)?"bg-blue-100 border-blue-300 text-blue-800":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"),children:a},a))})})]}),h.jsx("div",{className:"border border-gray-200 rounded-lg",children:h.jsxs("div",{className:"px-4 py-3",children:[h.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"기타 옵션"}),h.jsx("div",{className:"space-y-3",children:h.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:e.hasAvailableSlots||!1,onChange:e=>n("hasAvailableSlots",!!e.target.checked||void 0),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),h.jsx("span",{className:"text-sm text-gray-900",children:"입소 가능한 시설만 보기"})]})})]})})]})},$e=({recommendations:e,isLoading:a=!1,onRefresh:t,memberId:r,showPreferences:i=!0})=>{const{matchingPreference:l,updateMatchingPreference:n}=xe(),[s,c]=m.useState(!1),[o,d]=m.useState(!1),u={averageScore:e.length>0?Math.round(e.reduce((e,a)=>e+a.matchScore,0)/e.length):0,highScoreCount:e.filter(e=>e.matchScore>=80).length,mediumScoreCount:e.filter(e=>e.matchScore>=60&&e.matchScore<80).length,lowScoreCount:e.filter(e=>e.matchScore<60).length},p=(()=>{const e=[];return u.averageScore>=80?e.push({type:"success",icon:z,title:"우수한 매칭 결과",description:"회원님의 요구사항에 잘 맞는 시설들이 많이 찾아졌습니다."}):u.averageScore>=60?e.push({type:"warning",icon:R,title:"양호한 매칭 결과",description:"일부 조건을 조정하면 더 적합한 시설을 찾을 수 있습니다."}):e.push({type:"info",icon:I,title:"매칭 조건 검토 필요",description:"선호 조건을 조정하여 더 나은 추천 결과를 받아보세요."}),0===u.highScoreCount&&e.push({type:"tip",icon:A,title:"추천 팁",description:"지역 범위를 넓히거나 비용 조건을 조정해보세요."}),e})(),y=(e,a)=>{n({[e]:a})};return a?h.jsxs("div",{className:"space-y-6",children:[h.jsx(H,{children:h.jsx(W,{className:"p-6",children:h.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[h.jsx(_.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:h.jsx(j,{className:"w-6 h-6 text-purple-600"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AI가 맞춤형 시설을 분석 중입니다"}),h.jsx("p",{className:"text-gray-600",children:"회원님의 건강 상태와 선호도를 종합적으로 분석하고 있어요..."})]})]})})}),h.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((e,a)=>h.jsx(H,{className:"animate-pulse",children:h.jsx(W,{className:"p-6",children:h.jsxs("div",{className:"flex items-start space-x-4",children:[h.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-lg"}),h.jsxs("div",{className:"flex-1 space-y-3",children:[h.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3"}),h.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]}),h.jsxs("div",{className:"text-right space-y-2",children:[h.jsx("div",{className:"h-8 bg-gray-200 rounded w-16"}),h.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"})]})]})})},a))})]}):0===e.length?h.jsx("div",{className:"text-center py-12",children:h.jsx(H,{children:h.jsx(W,{className:"p-12",children:h.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[h.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center",children:h.jsx(F,{className:"w-8 h-8 text-purple-600"})}),h.jsxs("div",{className:"text-center",children:[h.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"추천 결과가 없습니다"}),h.jsx("p",{className:"text-gray-500 max-w-md",children:"현재 조건에 맞는 시설을 찾지 못했습니다. 선호 조건을 조정하거나 다시 시도해보세요."})]}),t&&h.jsxs(D,{onClick:t,variant:"outline",children:[h.jsx(f,{className:"w-4 h-4 mr-2"}),"다시 추천받기"]})]})})})}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs(H,{children:[h.jsx(U,{children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:h.jsx(F,{className:"w-5 h-5 text-purple-600"})}),h.jsxs("div",{children:[h.jsx(V,{className:"text-xl",children:"맞춤형 추천 결과"}),h.jsxs("p",{className:"text-gray-600",children:["AI가 분석한 회원님께 최적의 시설 ",e.length,"곳"]})]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[t&&h.jsxs(D,{variant:"outline",size:"sm",onClick:t,children:[h.jsx(f,{className:"w-4 h-4 mr-1"}),"새로고침"]}),i&&h.jsxs(D,{variant:"outline",size:"sm",onClick:()=>c(!s),children:[h.jsx(S,{className:"w-4 h-4 mr-1"}),"선호도 설정"]})]})]})}),h.jsxs(W,{children:[h.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[h.jsxs("div",{className:"text-center",children:[h.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[u.averageScore,"%"]}),h.jsx("div",{className:"text-sm text-gray-600",children:"평균 매칭도"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-green-600",children:u.highScoreCount}),h.jsx("div",{className:"text-sm text-gray-600",children:"우수 매칭 (80%+)"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:u.mediumScoreCount}),h.jsx("div",{className:"text-sm text-gray-600",children:"양호 매칭 (60-79%)"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-gray-600",children:u.lowScoreCount}),h.jsx("div",{className:"text-sm text-gray-600",children:"보통 매칭 (60% 미만)"})]})]}),h.jsxs("button",{onClick:()=>d(!o),className:"w-full flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(j,{className:"w-5 h-5 text-purple-600"}),h.jsx("span",{className:"font-medium",children:"AI 추천 분석 결과"})]}),o?h.jsx($,{className:"w-5 h-5 text-gray-400"}):h.jsx(E,{className:"w-5 h-5 text-gray-400"})]}),h.jsx(B,{children:o&&h.jsx(_.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:h.jsx("div",{className:"pt-4 space-y-3",children:p.map((e,a)=>{const t=e.icon,r={success:"text-green-600 bg-green-50",warning:"text-yellow-600 bg-yellow-50",info:"text-blue-600 bg-blue-50",tip:"text-purple-600 bg-purple-50"}[e.type];return h.jsx("div",{className:`p-3 rounded-lg ${r}`,children:h.jsxs("div",{className:"flex items-start space-x-2",children:[h.jsx(t,{className:"w-5 h-5 mt-0.5"}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium",children:e.title}),h.jsx("div",{className:"text-sm opacity-90",children:e.description})]})]})},a)})})})})]})]}),h.jsx(B,{children:s&&h.jsx(_.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:h.jsxs(H,{children:[h.jsx(U,{children:h.jsxs(V,{className:"text-lg flex items-center",children:[h.jsx(S,{className:"w-5 h-5 mr-2"}),"추천 선호도 설정"]})}),h.jsxs(W,{children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"font-medium",children:"우선순위"}),h.jsxs("label",{className:"flex items-center space-x-2",children:[h.jsx("input",{type:"checkbox",checked:l.prioritizeQuality,onChange:e=>y("prioritizeQuality",e.target.checked),className:"rounded border-gray-300"}),h.jsx("span",{className:"text-sm",children:"품질 우선"})]}),h.jsxs("label",{className:"flex items-center space-x-2",children:[h.jsx("input",{type:"checkbox",checked:l.prioritizeCost,onChange:e=>y("prioritizeCost",e.target.checked),className:"rounded border-gray-300"}),h.jsx("span",{className:"text-sm",children:"비용 우선"})]}),h.jsxs("label",{className:"flex items-center space-x-2",children:[h.jsx("input",{type:"checkbox",checked:l.prioritizeAvailability,onChange:e=>y("prioritizeAvailability",e.target.checked),className:"rounded border-gray-300"}),h.jsx("span",{className:"text-sm",children:"입소 가능성 우선"})]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"font-medium",children:"최대 월 비용"}),h.jsxs("select",{value:l.maxMonthlyFee||"",onChange:e=>y("maxMonthlyFee",e.target.value?parseInt(e.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",children:[h.jsx("option",{value:"",children:"제한 없음"}),h.jsx("option",{value:"1500000",children:"150만원"}),h.jsx("option",{value:"2000000",children:"200만원"}),h.jsx("option",{value:"2500000",children:"250만원"}),h.jsx("option",{value:"3000000",children:"300만원"}),h.jsx("option",{value:"4000000",children:"400만원"}),h.jsx("option",{value:"5000000",children:"500만원"})]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"font-medium",children:"최소 시설 등급"}),h.jsxs("select",{value:l.minFacilityGrade,onChange:e=>y("minFacilityGrade",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",children:[h.jsx("option",{value:"E",children:"E등급 이상"}),h.jsx("option",{value:"D",children:"D등급 이상"}),h.jsx("option",{value:"C",children:"C등급 이상"}),h.jsx("option",{value:"B",children:"B등급 이상"}),h.jsx("option",{value:"A",children:"A등급만"})]})]})]}),h.jsx("div",{className:"mt-4 pt-4 border-t",children:h.jsxs(D,{onClick:t,className:"w-full",children:[h.jsx(M,{className:"w-4 h-4 mr-2"}),"새로운 조건으로 다시 추천받기"]})})]})]})})}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"추천 시설 목록"}),h.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[h.jsx(L,{className:"w-4 h-4"}),h.jsx("span",{children:"매칭도 순으로 정렬됨"})]})]}),h.jsx(B,{children:e.map((e,a)=>h.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.1*a},children:h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute -left-4 top-4 z-10",children:h.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold "+(0===a?"bg-yellow-500":1===a?"bg-gray-400":2===a?"bg-amber-600":"bg-gray-300"),children:a+1})}),h.jsx(be,{facility:e.facility,viewMode:"list",isRecommendation:!0,matchScore:e.matchScore,recommendationReason:e.recommendationReason,showActions:!0})]})},e.facility.id))})]}),h.jsx(H,{children:h.jsx(W,{className:"p-6",children:h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx(A,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"추천 결과를 개선하려면?"}),h.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[h.jsx("li",{children:"• 선호 지역 범위를 조정해보세요"}),h.jsx("li",{children:"• 예산 조건을 다시 검토해보세요"}),h.jsx("li",{children:"• 필수 서비스 조건을 명확히 해보세요"}),h.jsx("li",{children:"• 시설 방문 후 피드백을 남겨주시면 더 정확한 추천이 가능합니다"})]})]})]})})})]})},Ee=e=>{if(!e)return[];try{return e.split(",").map(e=>e.trim()).filter(e=>e.length>0)}catch(a){return[]}},Me=e=>{if(!e)return[];try{return e.split(",").map(e=>parseInt(e.trim())).filter(e=>!isNaN(e))}catch(a){return[]}},Le=e=>{return{id:e.id,facilityName:e.facilityName,facilityType:(t=e.facilityType,{NURSING_HOME:FacilityType.NURSING_HOME,DAY_CARE_CENTER:FacilityType.DAY_CARE_CENTER,SENIOR_WELFARE_CENTER:FacilityType.SENIOR_WELFARE_CENTER,GROUP_HOME:FacilityType.GROUP_HOME,SHORT_TERM_CARE:FacilityType.SHORT_TERM_CARE,HOME_CARE_SERVICE:FacilityType.HOME_CARE_SERVICE,SENIOR_HOUSING:FacilityType.SENIOR_HOUSING,MEDICAL_FACILITY:FacilityType.MEDICAL_FACILITY}[t]||FacilityType.NURSING_HOME),facilityGrade:(a=e.facilityGrade,a&&{A:FacilityGrade.A,B:FacilityGrade.B,C:FacilityGrade.C,D:FacilityGrade.D,UNGRADED:FacilityGrade.UNGRADED}[a.toUpperCase()]||FacilityGrade.UNGRADED),address:`${e.sido} ${e.sigungu} ${e.detailAddress||""}`.trim(),phoneNumber:e.phoneNumber||"",totalCapacity:e.totalCapacity||0,currentOccupancy:e.currentOccupancy||0,monthlyBasicFee:e.monthlyBasicFee,availableCareGrades:Me(e.careGradeLevels),specialties:Ee(e.specialties),latitude:e.latitude,longitude:e.longitude,description:e.description||void 0,createdAt:e.createdAt,updatedAt:e.updatedAt};var a,t},Ae=e=>({content:e.content.map(Le),totalElements:e.totalElements,totalPages:e.totalPages,page:e.number,size:e.size,first:e.first,last:e.last}),ze=e=>e&&Array.isArray(e.content)&&"number"==typeof e.totalElements&&"number"==typeof e.totalPages,Re=e=>({id:e,facilityName:"정보 없음",facilityType:FacilityType.NURSING_HOME,facilityGrade:FacilityGrade.UNGRADED,address:"",phoneNumber:"",totalCapacity:0,currentOccupancy:0,monthlyBasicFee:null,availableCareGrades:[],specialties:[],latitude:null,longitude:null,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),detailedDescription:"시설 정보를 불러올 수 없습니다.",photos:[],staffInfo:{totalStaff:0,nurses:0,caregivers:0,doctors:0,socialWorkers:0},programsAndServices:[],mealServices:{breakfastIncluded:!1,lunchIncluded:!1,dinnerIncluded:!1,specialDiets:[]},visitingPolicies:{visitingHours:"문의 바랍니다",restrictionsAndGuidelines:[]},contactInfo:{primaryContact:"",email:"",emergencyContact:""},reviews:[],averageRating:0}),Ie={}.REACT_APP_API_BASE_URL||"http://localhost:8080/api",Oe=ee.create({baseURL:Ie,timeout:1e4,headers:{"Content-Type":"application/json"}});Oe.interceptors.request.use(e=>{const a=localStorage.getItem("accessToken");return a&&(e.headers.Authorization=`Bearer ${a}`),e},e=>Promise.reject(e)),Oe.interceptors.response.use(e=>e,e=>{var a;return 401===(null==(a=e.response)?void 0:a.status)&&(localStorage.removeItem("accessToken"),window.location.href="/login"),Promise.reject(e)});const Te={searchFacilities(e){return d(this,null,function*(){try{const a=(e=>{const a={};return e.keyword&&(a.keyword=e.keyword),e.region&&(a.sido=e.region),e.district&&(a.sigungu=e.district),e.facilityType&&(a.facilityType=e.facilityType),e.minGrade&&(a.minFacilityGrade=e.minGrade),e.maxMonthlyCost&&(a.maxMonthlyFee=e.maxMonthlyCost),e.latitude&&(a.latitude=e.latitude),e.longitude&&(a.longitude=e.longitude),e.radiusKm&&(a.radiusKm=e.radiusKm),e.sortBy&&(a.sortBy=e.sortBy),void 0!==e.page&&(a.page=e.page),void 0!==e.size&&(a.size=e.size),!0===e.availableBedsOnly&&(a.hasAvailableSlots=!0),a})(e),t=yield Oe.get("/facilities",{params:a});return ze(t.data)?Ae(t.data):{content:[],totalElements:0,totalPages:0,page:0,size:20,first:!0,last:!0}}catch(a){return{content:[],totalElements:0,totalPages:0,page:0,size:20,first:!0,last:!0}}})},searchFacilitiesOnMap(e){return d(this,null,function*(){try{const a={latitude:(e.neLat+e.swLat)/2,longitude:(e.neLng+e.swLng)/2,radiusKm:110*Math.abs(e.neLat-e.swLat),facilityType:e.facilityType,minGrade:e.minGrade,availableBedsOnly:e.availableBedsOnly},t=yield Oe.get("/facilities",{params:a});return ze(t.data)?Ae(t.data):{content:[],totalElements:0,totalPages:0,page:0,size:20,first:!0,last:!0}}catch(a){return{content:[],totalElements:0,totalPages:0,page:0,size:20,first:!0,last:!0}}})},getFacilityDetail(e){return d(this,null,function*(){try{const a=yield Oe.get(`/facilities/${e}`);return a.data&&"object"==typeof a.data?(e=>{const a=Le(e);return c(s({},a),{detailedDescription:a.description||"상세 정보가 제공되지 않았습니다.",photos:[],videos:[],staffInfo:{totalStaff:0,nurses:0,caregivers:0,doctors:0,socialWorkers:0},programsAndServices:[],mealServices:{breakfastIncluded:!1,lunchIncluded:!1,dinnerIncluded:!1,specialDiets:[]},visitingPolicies:{visitingHours:"문의 바랍니다",restrictionsAndGuidelines:[]},contactInfo:{primaryContact:a.phoneNumber,email:"",emergencyContact:a.phoneNumber},reviews:[],averageRating:0})})(a.data):Re(e)}catch(a){return Re(e)}})},getRecommendations(){return d(this,arguments,function*(e={}){return(yield Oe.get("/facilities/recommendations",{params:e})).data})},getPopularFacilities(){return d(this,null,function*(){return(yield Oe.get("/facilities",{params:{sortBy:"rating",size:10}})).data.content||[]})},compareFacilities(e){return d(this,null,function*(){return(yield Oe.post("/facilities/compare",e)).data})},getFavoriteFacilities(e=0,a=20){return d(this,null,function*(){return(yield Oe.get("/facilities/favorites",{params:{page:e,size:a}})).data})},toggleLike(e){return d(this,null,function*(){try{return(yield Oe.post(`/facilities/${e}/favorite`,null,{params:{isFavorite:!0}})).data}catch(a){return(yield Oe.post(`/facilities/${e}/favorite`,null,{params:{isFavorite:!1}})).data}})},shareFacility(e,a){return d(this,null,function*(){return Promise.resolve({success:!0,shareUrl:`${window.location.origin}/facilities/${e}`,message:"시설 정보가 공유되었습니다."})})},getFacilityStatisticsByRegion(e,a){return d(this,null,function*(){return Promise.resolve({totalCount:0,region:{sido:e,sigungu:a},operatorTypeDistribution:{},capacityStats:{},facilityTypeDistribution:{}})})}},Ge=({facilityId:e,isOpen:a,onClose:t,onContact:r,onVisit:i})=>{var l;const[n,s]=m.useState(null),[c,o]=m.useState(!1),[u,v]=m.useState(null);m.useEffect(()=>{a&&e&&b()},[a,e]);const b=()=>d(null,null,function*(){try{o(!0),v(null);const a=yield Te.get(`/${e}`);s(a.data)}catch(a){v("시설 정보를 불러오는 중 오류가 발생했습니다.")}finally{o(!1)}});return a?h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[h.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),h.jsxs("div",{className:"relative w-full max-w-4xl max-h-[90vh] mx-4 bg-white rounded-xl shadow-2xl overflow-hidden",children:[h.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gradient-to-r from-blue-50 to-indigo-50",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"시설 상세 정보"}),h.jsx("p",{className:"text-sm text-gray-600",children:"상세 정보를 확인하고 연락해보세요"})]}),h.jsx(D,{variant:"ghost",size:"sm",onClick:t,className:"rounded-full p-2 hover:bg-gray-100",children:h.jsx(w,{className:"w-5 h-5"})})]}),h.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)]",children:c?h.jsx("div",{className:"flex items-center justify-center h-96",children:h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):u?h.jsxs("div",{className:"flex flex-col items-center justify-center h-96 text-center p-6",children:[h.jsx("div",{className:"text-red-500 mb-4",children:"⚠️"}),h.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"오류 발생"}),h.jsx("p",{className:"text-gray-600 mb-4",children:u}),h.jsx(D,{onClick:b,variant:"outline",children:"다시 시도"})]}):n?h.jsxs("div",{className:"p-6 space-y-6",children:[h.jsxs(H,{children:[h.jsx(U,{children:h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{children:[h.jsx(V,{className:"text-xl font-bold text-gray-900",children:n.facilityName}),h.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h.jsx(Q,{variant:"secondary",children:n.facilityType}),h.jsxs(Q,{variant:"outline",children:[n.facilityGrade,"등급"]})]})]}),n.averageRating&&h.jsxs("div",{className:"flex items-center gap-1 text-yellow-500",children:[h.jsx(p,{className:"w-5 h-5 fill-current"}),h.jsx("span",{className:"font-semibold",children:n.averageRating})]})]})}),h.jsxs(W,{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[h.jsx(g,{className:"w-4 h-4"}),h.jsxs("span",{children:[n.region," ",n.district]})]}),n.contactNumber&&h.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[h.jsx(x,{className:"w-4 h-4"}),h.jsx("span",{children:n.contactNumber})]}),n.operatingHours&&h.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[h.jsx(O,{className:"w-4 h-4"}),h.jsx("span",{children:n.operatingHours})]}),n.capacity&&h.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[h.jsx(y,{className:"w-4 h-4"}),h.jsxs("span",{children:["정원 ",n.capacity,"명"]})]}),n.monthlyFee&&h.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[h.jsx(C,{className:"w-4 h-4"}),h.jsxs("span",{children:["월 ",null==(l=n.monthlyFee)?void 0:l.toLocaleString(),"원"]})]})]})]}),n.description&&h.jsxs(H,{children:[h.jsx(U,{children:h.jsx(V,{className:"text-lg",children:"시설 소개"})}),h.jsx(W,{children:h.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:n.description})})]}),n.specializedCare&&n.specializedCare.length>0&&h.jsxs(H,{children:[h.jsx(U,{children:h.jsxs(V,{className:"text-lg flex items-center gap-2",children:[h.jsx(k,{className:"w-5 h-5 text-red-500"}),"특화 서비스"]})}),h.jsx(W,{children:h.jsx("div",{className:"flex flex-wrap gap-2",children:n.specializedCare.map((e,a)=>h.jsx(Q,{variant:"secondary",className:"text-sm",children:e},a))})})]}),n.amenities&&n.amenities.length>0&&h.jsxs(H,{children:[h.jsx(U,{children:h.jsx(V,{className:"text-lg",children:"편의시설"})}),h.jsx(W,{children:h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:n.amenities.map((e,a)=>h.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[h.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e]},a))})})]}),h.jsx(ie,{}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[h.jsxs(D,{onClick:()=>d(null,null,function*(){if(n)try{yield Te.post(`/${n.id}/contact`),null==r||r(n.id),n.contactNumber&&window.open(`tel:${n.contactNumber}`)}catch(e){}}),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3",size:"lg",children:[h.jsx(x,{className:"w-4 h-4 mr-2"}),"연락하기"]}),h.jsxs(D,{onClick:()=>d(null,null,function*(){if(n)try{yield Te.post(`/${n.id}/visit`),null==i||i(n.id),n.websiteUrl&&window.open(n.websiteUrl,"_blank")}catch(e){}}),variant:"outline",className:"flex-1 border-blue-600 text-blue-600 hover:bg-blue-50 py-3",size:"lg",children:[h.jsx(g,{className:"w-4 h-4 mr-2"}),"방문하기"]})]})]}):null})]})]}):null},Pe=Object.freeze(Object.defineProperty({__proto__:null,default:({memberId:e,coordinatorId:a,showRecommendations:t=!0})=>{oe({title:"시설 검색 및 추천",description:"맞춤형 요양 시설을 찾아보세요. AI 기반 추천으로 최적의 시설을 제안해드립니다.",keywords:["요양원","시설검색","노인돌봄","재외동포"],type:"website"});const r=xe(e=>(ve.has(e)&&ve.get(e)===e.searchResults||ve.set(e,e.searchResults),ve.get(e))),i=xe(e=>e.isSearching),l=xe(e=>e.isLoadingRecommendations),n=xe(e=>e.searchError),c=xe(e=>e.recommendationError),{recommendations:o,searchFilters:u,isDetailModalOpen:p,isRecommendationModalOpen:y,searchFacilities:g,getRecommendations:x,updateSearchFilters:v,clearSearchResults:b,clearRecommendations:w,openRecommendationModal:k,closeRecommendationModal:C,clearAllErrors:j}=xe(),[S,$]=m.useState("list"),[E,M]=m.useState(!1),[L,A]=m.useState(""),[z,I]=m.useState("search"),[O,U]=m.useState(null),[V,q]=m.useState(!1);m.useEffect(()=>(j(),t&&e&&(I("recommendations"),Q()),()=>{b(),w()}),[e,t]);const K=()=>d(null,null,function*(){if(!L.trim()&&0===Object.keys(u).length)return;const e=s(s({},u),L&&{region:L});yield g(e),I("search")}),Q=()=>d(null,null,function*(){e&&(yield x(e,a))}),Y=e=>{U(e.id),q(!0)};return h.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsxs("div",{className:"mb-8",children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"시설 검색 및 추천"}),h.jsx("p",{className:"text-gray-600",children:"맞춤형 요양 시설을 찾아보세요. AI 기반 추천으로 최적의 시설을 제안해드립니다."})]}),h.jsx("div",{className:"mb-6",children:h.jsx("div",{className:"border-b border-gray-200",children:h.jsxs("nav",{className:"-mb-px flex space-x-8",children:[h.jsxs("button",{onClick:()=>I("search"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("search"===z?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[h.jsx(N,{className:"w-4 h-4 inline mr-2"}),"시설 검색"]}),t&&h.jsxs("button",{onClick:()=>{I("recommendations"),e&&Q()},className:"py-2 px-1 border-b-2 font-medium text-sm "+("recommendations"===z?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[h.jsx(F,{className:"w-4 h-4 inline mr-2"}),"맞춤 추천",o.length>0&&h.jsx("span",{className:"ml-2 bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full",children:o.length})]})]})})}),h.jsxs(B,{mode:"wait",children:["search"===z&&h.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[h.jsx(H,{className:"mb-6",children:h.jsxs(W,{className:"p-6",children:[h.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[h.jsx("div",{className:"flex-1",children:h.jsxs("div",{className:"relative",children:[h.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),h.jsx("input",{type:"text",placeholder:"지역명을 입력하세요 (예: 서울시 강남구)",value:L,onChange:e=>{A(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&K()},className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),h.jsx(D,{onClick:K,disabled:i,className:"px-8 py-3",children:i?h.jsxs(h.Fragment,{children:[h.jsx(f,{className:"w-4 h-4 mr-2 animate-spin"}),"검색 중..."]}):h.jsxs(h.Fragment,{children:[h.jsx(N,{className:"w-4 h-4 mr-2"}),"검색"]})}),h.jsxs(D,{variant:"outline",onClick:()=>M(!E),className:"px-4 py-3",children:[h.jsx(T,{className:"w-4 h-4 mr-2"}),"필터"]})]}),h.jsx(B,{children:E&&h.jsx(_.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:h.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:h.jsx(Se,{filters:u,onFiltersChange:e=>{v(e),"search"===z&&setTimeout(()=>{K()},500)}})})})})]})}),n&&h.jsx(_.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6",children:h.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:h.jsxs("div",{className:"flex items-center",children:[h.jsx(R,{className:"w-5 h-5 text-red-500 mr-2"}),h.jsx("span",{className:"text-red-700",children:n})]})})}),r.length>0&&h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"검색 결과"}),h.jsxs("p",{className:"text-gray-600",children:["총 ",r.length,"개의 시설을 찾았습니다."]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(D,{variant:"list"===S?"default":"outline",size:"sm",onClick:()=>$("list"),children:h.jsx(G,{className:"w-4 h-4"})}),h.jsx(D,{variant:"grid"===S?"default":"outline",size:"sm",onClick:()=>$("grid"),children:h.jsx(P,{className:"w-4 h-4"})})]})]}),h.jsx(fe,{facilities:r,viewMode:S,isLoading:i,emptyMessage:"검색 조건에 맞는 시설이 없습니다.",onFacilitySelect:Y})]},"search"),"recommendations"===z&&h.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[c&&h.jsx(_.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6",children:h.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:h.jsxs("div",{className:"flex items-center",children:[h.jsx(R,{className:"w-5 h-5 text-red-500 mr-2"}),h.jsx("span",{className:"text-red-700",children:c})]})})}),h.jsx($e,{recommendations:o,isLoading:l,onRefresh:Q,onFacilitySelect:Y,memberId:e})]},"recommendations")]}),O&&h.jsx(Ge,{facilityId:O,isOpen:V,onClose:()=>{q(!1),U(null)},onContact:e=>{},onVisit:e=>{}})]})})}},Symbol.toStringTag,{value:"Module"}));export{Pe as F,ce as P,se as R,xe as a,Te as f,oe as u};
