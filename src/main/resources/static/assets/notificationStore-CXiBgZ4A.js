var t=Object.defineProperty,e=Object.defineProperties,o=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,a=(e,o,r)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,l=(t,e)=>{for(var o in e||(e={}))i.call(e,o)&&a(t,o,e[o]);if(r)for(var o of r(e))n.call(e,o)&&a(t,o,e[o]);return t},c=(t,r)=>e(t,o(r)),s=(t,e,o)=>new Promise((r,i)=>{var n=t=>{try{l(o.next(t))}catch(e){i(e)}},a=t=>{try{l(o.throw(t))}catch(e){i(e)}},l=t=>t.done?r(t.value):Promise.resolve(t.value).then(n,a);l((o=o.apply(t,e)).next())});import{p}from"./state-management-DAchmhq-.js";import{n as d,j as g}from"./board-pages-BVDdwAux.js";import{c as E}from"./react-vendor-Lz2W1ZkW.js";var u=(t=>(t.FACILITY_MATCH_FOUND="facility_match_found",t.FACILITY_MATCH_CONFIRMED="facility_match_confirmed",t.FACILITY_MATCH_CANCELLED="facility_match_cancelled",t.REVIEW_APPROVED="review_approved",t.REVIEW_REJECTED="review_rejected",t.REVIEW_REPORTED="review_reported",t.JOB_APPLICATION_RECEIVED="job_application_received",t.JOB_APPLICATION_APPROVED="job_application_approved",t.JOB_APPLICATION_REJECTED="job_application_rejected",t.JOB_INTERVIEW_SCHEDULED="job_interview_scheduled",t.SYSTEM_MAINTENANCE="system_maintenance",t.SYSTEM_UPDATE="system_update",t.ACCOUNT_SECURITY="account_security",t.GENERAL_INFO="general_info",t.PROMOTION="promotion",t))(u||{}),_=(t=>(t.LOW="low",t.MEDIUM="medium",t.HIGH="high",t.URGENT="urgent",t))(_||{});const f={facility_match_found:{icon:"🏥",color:"blue",bgColor:"bg-blue-50",textColor:"text-blue-600"},facility_match_confirmed:{icon:"✅",color:"green",bgColor:"bg-green-50",textColor:"text-green-600"},facility_match_cancelled:{icon:"❌",color:"red",bgColor:"bg-red-50",textColor:"text-red-600"},review_approved:{icon:"⭐",color:"yellow",bgColor:"bg-yellow-50",textColor:"text-yellow-600"},review_rejected:{icon:"⚠️",color:"orange",bgColor:"bg-orange-50",textColor:"text-orange-600"},review_reported:{icon:"🚨",color:"red",bgColor:"bg-red-50",textColor:"text-red-600"},job_application_received:{icon:"📝",color:"blue",bgColor:"bg-blue-50",textColor:"text-blue-600"},job_application_approved:{icon:"🎉",color:"green",bgColor:"bg-green-50",textColor:"text-green-600"},job_application_rejected:{icon:"📋",color:"gray",bgColor:"bg-gray-50",textColor:"text-gray-600"},job_interview_scheduled:{icon:"📅",color:"purple",bgColor:"bg-purple-50",textColor:"text-purple-600"},system_maintenance:{icon:"🔧",color:"gray",bgColor:"bg-gray-50",textColor:"text-gray-600"},system_update:{icon:"🔄",color:"blue",bgColor:"bg-blue-50",textColor:"text-blue-600"},account_security:{icon:"🔒",color:"red",bgColor:"bg-red-50",textColor:"text-red-600"},general_info:{icon:"ℹ️",color:"blue",bgColor:"bg-blue-50",textColor:"text-blue-600"},promotion:{icon:"🎁",color:"purple",bgColor:"bg-purple-50",textColor:"text-purple-600"}},I={enabled:!0,email:!0,push:!0,sms:!1,types:{[u.FACILITY_MATCH_FOUND]:!0,[u.FACILITY_MATCH_CONFIRMED]:!0,[u.FACILITY_MATCH_CANCELLED]:!0,[u.REVIEW_APPROVED]:!0,[u.REVIEW_REJECTED]:!0,[u.REVIEW_REPORTED]:!1,[u.JOB_APPLICATION_RECEIVED]:!0,[u.JOB_APPLICATION_APPROVED]:!0,[u.JOB_APPLICATION_REJECTED]:!0,[u.JOB_INTERVIEW_SCHEDULED]:!0,[u.SYSTEM_MAINTENANCE]:!0,[u.SYSTEM_UPDATE]:!1,[u.ACCOUNT_SECURITY]:!0,[u.GENERAL_INFO]:!1,[u.PROMOTION]:!1},quietHours:{enabled:!1,start:"22:00",end:"08:00"}},y={total:0,unread:0,byType:Object.fromEntries(Object.values(u).map(t=>[t,0])),byPriority:{[_.LOW]:0,[_.MEDIUM]:0,[_.HIGH]:0,[_.URGENT]:0}},b=E()(p((t,e)=>({notifications:[],summary:y,settings:I,isLoading:!1,error:null,isDropdownOpen:!1,hasMore:!1,filter:{},isPolling:!1,fetchNotifications:(...o)=>s(null,[...o],function*(o={},r=!1){const i={operation:"fetchNotifications",context:{filter:o,loadMore:r}};try{r||t({isLoading:!0,error:null});let i,a=[],l=!1;try{throw new Error("API not implemented yet")}catch(n){a=[{id:"1",type:u.FACILITY_MATCH_FOUND,title:"새로운 시설 매칭",message:"조건에 맞는 요양시설이 발견되었습니다.",read:!1,createdAt:(new Date).toISOString(),priority:_.HIGH,actionUrl:"/facilities/1"},{id:"2",type:u.JOB_APPLICATION_APPROVED,title:"구인 지원 승인",message:"지원하신 구인이 승인되었습니다.",read:!0,createdAt:new Date(Date.now()-864e5).toISOString(),readAt:(new Date).toISOString(),priority:_.MEDIUM,actionUrl:"/jobs/applications"},{id:"3",type:u.REVIEW_APPROVED,title:"리뷰 승인됨",message:"작성하신 리뷰가 승인되어 게시되었습니다.",read:!1,createdAt:new Date(Date.now()-36e5).toISOString(),priority:_.MEDIUM,actionUrl:"/reviews"}].filter(t=>{if(void 0!==o.read&&t.read!==o.read)return!1;if(o.types&&!o.types.includes(t.type))return!1;if(o.priority&&t.priority!==o.priority)return!1;if(o.dateFrom){if(new Date(t.createdAt)<new Date(o.dateFrom))return!1}if(o.dateTo){if(new Date(t.createdAt)>new Date(o.dateTo))return!1}return!0}),l=!1}const c=e(),s=r?[...c.notifications,...a]:a;t({notifications:s,hasMore:l,nextCursor:i,isLoading:!1,lastFetchTime:new Date}),e().updateSummary()}catch(a){const e=d(a,i);g.logError(e,i),t({error:e,isLoading:!1})}}),markAsRead:o=>s(null,null,function*(){const r={operation:"markAsRead",context:{notificationId:o}};try{const r=e().notifications.map(t=>t.id===o?c(l({},t),{read:!0,readAt:(new Date).toISOString()}):t);t({notifications:r}),e().updateSummary()}catch(i){const e=d(i,r);g.logError(e,r),t({error:e})}}),markAllAsRead:()=>s(null,null,function*(){const o={operation:"markAllAsRead",context:{}};try{const o=e(),r=(new Date).toISOString(),i=o.notifications.map(t=>c(l({},t),{read:!0,readAt:t.readAt||r}));t({notifications:i}),e().updateSummary()}catch(r){const e=d(r,o);g.logError(e,o),t({error:e})}}),deleteNotification:o=>s(null,null,function*(){const r={operation:"deleteNotification",context:{notificationId:o}};try{const r=e().notifications.filter(t=>t.id!==o);t({notifications:r}),e().updateSummary()}catch(i){const e=d(i,r);g.logError(e,r),t({error:e})}}),clearAllNotifications:()=>s(null,null,function*(){const e={operation:"clearAllNotifications",context:{}};try{t({notifications:[],summary:y})}catch(o){const r=d(o,e);g.logError(r,e),t({error:r})}}),updateSettings:o=>s(null,null,function*(){const r={operation:"updateSettings",context:{settings:o}};try{const r=e(),i=l(l({},r.settings),o);t({settings:i})}catch(i){const e=d(i,r);g.logError(e,r),t({error:e})}}),toggleDropdown:()=>{t(t=>({isDropdownOpen:!t.isDropdownOpen}))},closeDropdown:()=>{t({isDropdownOpen:!1})},setFilter:o=>{const r=e();t({filter:l(l({},r.filter),o)})},clearFilter:()=>{t({filter:{}})},startPolling:()=>{if(e().isPolling)return;t({isPolling:!0});const o=setInterval(()=>{const t=e();t.isPolling?t.fetchNotifications(t.filter,!1):clearInterval(o)},3e4);window.notificationPollingInterval=o},stopPolling:()=>{t({isPolling:!1}),window.notificationPollingInterval&&(clearInterval(window.notificationPollingInterval),delete window.notificationPollingInterval)},addNotification:o=>{const r=e();t({notifications:[o,...r.notifications]}),e().updateSummary()},clearError:()=>{t({error:null})},setLoading:e=>{t({isLoading:e})},updateSummary:()=>{const o=e().notifications,r={total:o.length,unread:o.filter(t=>!t.read).length,byType:Object.fromEntries(Object.values(u).map(t=>[t,o.filter(e=>e.type===t).length])),byPriority:{[_.LOW]:o.filter(t=>t.priority===_.LOW).length,[_.MEDIUM]:o.filter(t=>t.priority===_.MEDIUM).length,[_.HIGH]:o.filter(t=>t.priority===_.HIGH).length,[_.URGENT]:o.filter(t=>t.priority===_.URGENT).length}};t({summary:r})}}),{name:"notification-store",partialize:t=>({settings:t.settings,filter:t.filter})}));export{u as N,f as a,_ as b,b as u};
