import{l as e,r as l,j as t,y as a,z as s,P as r,q as i,G as c,H as n,J as d,K as o,m}from"./react-vendor-DZ47R_c4.js";import{B as x}from"./core-ui-m-tOi1nQ.js";import{T as h,a as f,b as p,c as b,C as u,d as N}from"./board-pages-DLDogNe8.js";const w={log:(...e)=>{},warn:(...e)=>{},debug:(...e)=>{},performance:(e,l)=>{},action:(e,l)=>{}},g={error:(e,l,t)=>{},warn:(e,l)=>{},network:(e,l)=>{},component:(e,l,t)=>{}},v=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const o=e(),[m,w]=l.useState(!1),[g,v]=l.useState(""),y=[{icon:t.jsx(c,{className:"w-4 h-4"}),text:"도움말"},{icon:t.jsx(n,{className:"w-4 h-4"}),text:"로그인"},{icon:t.jsx(d,{className:"w-4 h-4"}),text:"Elderberry로 이동",onClick:()=>o("/")}],j=()=>{const e=g.trim();e&&o("/chat",{state:{prompt:e}})},C=()=>{o("/chat")};return t.jsxs("div",{className:"flex h-screen items-start bg-white",children:[t.jsxs("aside",{className:"hidden sm:flex flex-col h-full items-start py-[15px] sm:py-[20px] md:py-[30px] bg-white border-r border-[#e8e8e8] transition-all duration-300 "+(m?"w-[60px] px-2":"w-[180px] sm:w-[220px] md:w-[260px] pl-2 sm:pl-4 md:pl-6 pr-2 sm:pr-4 md:pr-[25px]"),children:[t.jsxs("div",{className:"flex flex-col gap-5 pb-5 w-full "+(m?"items-center":"items-start"),children:[t.jsxs("div",{className:"flex items-center w-full "+(m?"justify-center":"justify-between"),children:[!m&&t.jsx("div",{className:"flex flex-col w-[132px] h-[26px] items-start",children:t.jsx("div",{className:"flex items-center",children:t.jsx("span",{className:"font-bold text-lg",children:"ai search"})})}),t.jsx(x,{variant:"outline",size:"icon",className:"w-8 h-8 border-[#e4e4e4]",onClick:()=>w(!m),children:m?t.jsx(a,{className:"w-5 h-5"}):t.jsx(s,{className:"w-5 h-5"})})]}),!m&&t.jsxs(x,{variant:"outline",className:"flex h-[42px] items-center justify-center gap-1 px-[27px] py-[11px] w-full border-[#dedede]",onClick:C,children:[t.jsx(r,{className:"w-4 h-4"}),t.jsx("span",{className:"font-bold text-[14.2px] text-[#404042]",children:"새 대화"})]}),m&&t.jsx(x,{variant:"outline",size:"icon",className:"w-8 h-8 border-[#dedede]",onClick:C,children:t.jsx(r,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"flex flex-col pt-[21px] pb-0 w-full bg-white border-t border-[#e4e4e4] mt-auto "+(m?"items-center":"items-start"),children:t.jsx("div",{className:"flex flex-col gap-1 w-full "+(m?"items-center":"items-start"),children:y.map((e,l)=>t.jsxs("div",{className:"flex min-h-[22px] items-center gap-1.5 p-1.5 w-full cursor-pointer hover:bg-gray-50 rounded "+(m?"justify-center":""),onClick:e.onClick,children:[t.jsx("div",{className:"flex flex-col w-4 h-4 "+(m?"items-center":"items-start"),children:e.icon}),!m&&t.jsx("div",{className:"flex flex-col h-[22.39px] items-start flex-1",children:t.jsx("div",{className:"relative self-stretch mt-[-1.00px] font-normal text-[#404042] text-[13.1px] tracking-[0] leading-[22.4px] overflow-hidden text-ellipsis",children:e.text})}),"로그인"===e.text&&t.jsx(h,{children:t.jsxs(f,{children:[t.jsx(p,{asChild:!0,children:t.jsx("div",{className:"relative"})}),t.jsx(b,{side:"right",className:"bg-[#202020e6] border-none rounded-md",children:t.jsx("span",{className:"font-bold text-white text-[12.2px]",children:"로그인 해주세요."})})]})})]},l))})})]}),t.jsx("div",{className:"sm:hidden fixed top-4 left-4 z-10",children:t.jsx(x,{variant:"outline",size:"icon",className:"w-10 h-10 border-[#e4e4e4]",children:t.jsx(r,{className:"w-5 h-5 rotate-45"})})}),t.jsxs("main",{className:"flex flex-col items-center justify-center flex-1 h-full bg-white overflow-y-auto",children:[t.jsxs("div",{className:"flex flex-col items-center justify-center gap-6 w-full max-w-[900px] px-4 sm:px-8 md:px-16",children:[t.jsx("div",{className:"flex flex-col items-center w-full",children:t.jsx("h1",{className:"font-bold text-[#111111] text-[28.2px] text-center leading-[48px]",children:"Elderberry"})}),t.jsxs(u,{className:"flex flex-col w-full bg-white rounded-2xl border-2 border-[#29b79c] shadow-[0px_2px_10px_#00000029]",children:[t.jsx(N,{className:"p-0 w-full bg-white",children:t.jsx("div",{className:"flex flex-col w-full",children:t.jsx("textarea",{value:g,onChange:e=>v(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),j())},className:"w-full min-h-[80px] p-4 text-[15px] text-[#333] bg-transparent border-none outline-none resize-none placeholder:text-[#818181]",placeholder:"당신의 노년을 돕습니다.",rows:2})})}),t.jsxs("div",{className:"flex items-center justify-between w-full px-4 py-3 border-t border-[#e4e4e4]",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(x,{variant:"ghost",size:"sm",className:"h-8 px-3 text-[#666] hover:bg-gray-100 text-sm",children:"📎 첨부하기"}),t.jsx(x,{variant:"ghost",size:"sm",className:"h-8 px-3 text-[#666] hover:bg-gray-100 text-sm",children:"📄 문서첨부"})]}),t.jsx(x,{variant:"ghost",size:"icon",className:"w-10 h-10 p-0 hover:bg-gray-100 rounded-full",onClick:j,disabled:!g.trim(),children:t.jsx(i,{className:"w-5 h-5 text-[#29b79c]"})})]})]})]}),t.jsxs("footer",{className:"flex items-center justify-center gap-[12.01px] w-full mt-8",children:[t.jsx("div",{className:"text-[#818181] text-[11.1px] text-center leading-[19.2px]",children:"AI 모델에 의해 부정확한 정보가 포함될 수 있습니다."}),t.jsxs("div",{className:"text-[#818181] text-[11.2px] text-center leading-[19.2px]",children:[t.jsx("span",{className:"font-bold",children:"개인정보처리방침 "}),t.jsx("span",{className:"font-normal",children:"이용약관"})]})]})]})]})}},Symbol.toStringTag,{value:"Module"})),y=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const r=o(),h=e(),[f,p]=l.useState(!1),[b,v]=l.useState([]),[y,j]=l.useState(""),[C,k]=l.useState(!1),[z,_]=l.useState(""),E=l.useRef(null);l.useEffect(()=>{var e;const l=null==(e=r.state)?void 0:e.prompt;l&&(j(l),setTimeout(()=>{D(l)},100))},[r.state]),l.useEffect(()=>{T()},[b]);const O=[{icon:t.jsx(c,{className:"w-4 h-4"}),text:"도움말"},{icon:t.jsx(n,{className:"w-4 h-4"}),text:"로그인"},{icon:t.jsx(d,{className:"w-4 h-4"}),text:"Elderberry로 이동",onClick:()=>h("/")}],T=()=>{E.current&&(E.current.scrollTop=E.current.scrollHeight)},P=(e,l,t)=>{const a={id:Date.now(),text:e,isUser:l,timestamp:(new Date).toISOString(),extractedInfo:t};v(e=>[...e,a])},D=(...e)=>{return l=[...e],t=function*(e=y.trim()){if(e){P(e,!0),j(""),k(!0),_("");try{const l=yield fetch("/api/chatbot/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})});if(!l.ok){const e=yield l.text();throw g.network("/api/chatbot/message",{status:l.status,statusText:l.statusText,errorText:e}),new Error(`HTTP error! status: ${l.status}`)}const t=yield l.json();w.log("서버 응답:",t);const a=t.response||"죄송합니다. 응답을 처리할 수 없습니다.";"coordinator_recommendation"===t.response_type&&t.recommendations?P(a,!1,{recommendations:t.recommendations}):P(a,!1)}catch(l){g.error("챗봇 메시지 처리 오류",l),_("메시지 처리 중 오류가 발생했습니다. 다시 시도해 주세요."),P("죄송합니다. 현재 서버에 연결할 수 없습니다. 잠시 후 다시 시도해주세요.",!1)}finally{k(!1)}}},new Promise((e,a)=>{var s=e=>{try{i(t.next(e))}catch(l){a(l)}},r=e=>{try{i(t.throw(e))}catch(l){a(l)}},i=l=>l.done?e(l.value):Promise.resolve(l.value).then(s,r);i((t=t.apply(null,l)).next())});var l,t},S=()=>{h("/chat-home")};return t.jsxs("div",{className:"flex h-screen items-start bg-white",children:[t.jsxs("aside",{className:"hidden sm:flex flex-col h-full items-start py-[15px] sm:py-[20px] md:py-[30px] bg-white border-r border-[#e8e8e8] transition-all duration-300 "+(f?"w-[60px] px-2":"w-[180px] sm:w-[220px] md:w-[260px] pl-2 sm:pl-4 md:pl-6 pr-2 sm:pr-4 md:pr-[25px]"),children:[t.jsxs("div",{className:"flex flex-col gap-5 pb-5 w-full "+(f?"items-center":"items-start"),children:[t.jsxs("div",{className:"flex items-center w-full "+(f?"justify-center":"justify-between"),children:[!f&&t.jsx("div",{className:"flex flex-col w-[132px] h-[26px] items-start",children:t.jsx("div",{className:"flex items-center",children:t.jsx("span",{className:"font-bold text-lg",children:"ai search"})})}),t.jsx(x,{variant:"outline",size:"icon",className:"w-8 h-8 border-[#e4e4e4]",onClick:()=>p(!f),children:f?t.jsx(a,{className:"w-5 h-5"}):t.jsx(s,{className:"w-5 h-5"})})]}),!f&&t.jsxs(x,{variant:"outline",className:"flex h-[42px] items-center justify-center gap-1 px-[27px] py-[11px] w-full border-[#dedede]",onClick:S,children:[t.jsx(m,{className:"w-4 h-4"}),t.jsx("span",{className:"font-bold text-[14.2px] text-[#404042]",children:"홈으로"})]}),f&&t.jsx(x,{variant:"outline",size:"icon",className:"w-8 h-8 border-[#dedede]",onClick:S,children:t.jsx(m,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"flex flex-col pt-[21px] pb-0 w-full bg-white border-t border-[#e4e4e4] mt-auto "+(f?"items-center":"items-start"),children:t.jsx("div",{className:"flex flex-col gap-1 w-full "+(f?"items-center":"items-start"),children:O.map((e,l)=>t.jsxs("div",{className:"flex min-h-[22px] items-center gap-1.5 p-1.5 w-full cursor-pointer hover:bg-gray-50 rounded "+(f?"justify-center":""),onClick:e.onClick,children:[t.jsx("div",{className:"flex flex-col w-4 h-4 "+(f?"items-center":"items-start"),children:e.icon}),!f&&t.jsx("div",{className:"flex flex-col h-[22.39px] items-start flex-1",children:t.jsx("div",{className:"relative self-stretch mt-[-1.00px] font-normal text-[#404042] text-[13.1px] tracking-[0] leading-[22.4px] overflow-hidden text-ellipsis",children:e.text})})]},l))})})]}),t.jsxs("main",{className:"flex flex-col flex-1 h-full bg-white",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#e8e8e8] bg-[#f8f9fa]",children:[t.jsx("h1",{className:"font-bold text-xl text-[#111111]",children:"Elderberry Chat"}),t.jsx(x,{variant:"outline",size:"sm",onClick:()=>{v([]),_("")},className:"text-[#666] hover:bg-gray-100",children:"대화 내용 지우기"})]}),t.jsxs("div",{ref:E,className:"flex-1 overflow-y-auto p-6 space-y-6",style:{maxHeight:"calc(100vh - 200px)"},children:[b.map(e=>t.jsxs("div",{className:"animate-in fade-in duration-300",children:[t.jsx("div",{className:`flex ${e.isUser?"justify-end":"justify-start"} mb-2`,children:t.jsxs("div",{className:"max-w-[75%] "+(e.isUser?"ml-12":"mr-12"),children:[t.jsxs("div",{className:"text-xs text-gray-500 mb-1 "+(e.isUser?"text-right":"text-left"),children:[e.isUser?"나":"Elderberry"," • ",new Date(e.timestamp).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})]}),t.jsx("div",{className:"p-4 rounded-2xl shadow-sm "+(e.isUser?"bg-[#29b79c] text-white rounded-br-md":"bg-white text-[#333] border border-gray-200 rounded-bl-md"),children:t.jsx("div",{className:"text-[15px] leading-relaxed whitespace-pre-wrap break-words",children:e.text})})]})}),e.extractedInfo&&Object.keys(e.extractedInfo).length>0&&t.jsx("div",{className:"flex justify-start",children:t.jsx("div",{className:"max-w-[75%] mr-12 mt-2",children:e.extractedInfo.recommendations?t.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),t.jsx("span",{className:"text-sm font-semibold text-green-800",children:"추천 요양보호사"})]}),t.jsx("div",{className:"space-y-3",children:e.extractedInfo.recommendations.map((e,l)=>t.jsxs("div",{className:"bg-white/70 p-3 rounded-lg border border-green-100",children:[t.jsx("div",{className:"font-medium text-green-900 mb-1",children:e.name||`요양보호사 ${l+1}`}),e.experience&&t.jsxs("div",{className:"text-sm text-green-700 mb-1",children:["경력: ",e.experience]}),e.specialization&&t.jsxs("div",{className:"text-sm text-green-700 mb-1",children:["전문분야: ",e.specialization]}),e.location&&t.jsxs("div",{className:"text-sm text-green-700 mb-1",children:["지역: ",e.location]}),e.rating&&t.jsxs("div",{className:"text-sm text-green-700",children:["평점: ⭐ ",e.rating]})]},l))})]}):t.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),t.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"추출된 정보"})]}),t.jsx("pre",{className:"text-sm text-blue-700 whitespace-pre-wrap font-mono bg-white/50 p-3 rounded-lg overflow-x-auto",children:JSON.stringify(e.extractedInfo,null,2)})]})})})]},e.id)),C&&t.jsx("div",{className:"flex justify-start animate-in fade-in duration-300",children:t.jsxs("div",{className:"max-w-[75%] mr-12",children:[t.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Elderberry • 입력 중..."}),t.jsx("div",{className:"bg-white border border-gray-200 text-[#666] p-4 rounded-2xl rounded-bl-md shadow-sm",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),t.jsx("span",{className:"text-sm",children:"응답 생성 중입니다..."})]})})]})}),0===b.length&&!C&&t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#29b79c] to-[#20a085] rounded-full flex items-center justify-center mb-4",children:t.jsx("span",{className:"text-2xl text-white",children:"🤖"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Elderberry와 대화를 시작해보세요"}),t.jsx("p",{className:"text-gray-500 max-w-md",children:"궁금한 것이 있으시면 언제든지 물어보세요. 도움이 되도록 최선을 다하겠습니다."})]})]}),z&&t.jsx("div",{className:"mx-4 p-3 bg-[#f8d7da] text-[#dc3545] rounded-lg border border-[#f5c6cb]",children:z}),t.jsx("div",{className:"p-4 border-t border-[#e8e8e8]",children:t.jsxs(u,{className:"flex flex-col w-full bg-white rounded-2xl border-2 border-[#29b79c] shadow-[0px_2px_10px_#00000029]",children:[t.jsx(N,{className:"p-0 w-full bg-white",children:t.jsx("div",{className:"flex flex-col w-full",children:t.jsx("textarea",{value:y,onChange:e=>j(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),D())},className:"w-full min-h-[80px] p-4 text-[15px] text-[#333] bg-transparent border-none outline-none resize-none placeholder:text-[#818181]",placeholder:"메시지를 입력하세요...",rows:2,disabled:C})})}),t.jsxs("div",{className:"flex items-center justify-between w-full px-4 py-3 border-t border-[#e4e4e4]",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(x,{variant:"ghost",size:"sm",className:"h-8 px-3 text-[#666] hover:bg-gray-100 text-sm",children:"📎 첨부하기"}),t.jsx(x,{variant:"ghost",size:"sm",className:"h-8 px-3 text-[#666] hover:bg-gray-100 text-sm",children:"📄 문서첨부"})]}),t.jsx(x,{variant:"ghost",size:"icon",className:"w-10 h-10 p-0 hover:bg-gray-100 rounded-full",onClick:()=>D(),disabled:C||!y.trim(),children:t.jsx(i,{className:"w-5 h-5 text-[#29b79c]"})})]})]})})]})]})}},Symbol.toStringTag,{value:"Module"}));export{v as C,y as a,w as d,g as e};
