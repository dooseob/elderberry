<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🍇 엘더베리 개발 대시보드</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }

        .dashboard {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }

        .header h1 {
            color: #667eea;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .header .subtitle {
            color: #666;
            margin-top: 5px;
            font-size: 14px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card h3 {
            color: #667eea;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 8px 0;
            padding: 8px;
            background: #f8fafc;
            border-radius: 8px;
        }

        .metric-value {
            font-weight: bold;
            color: #333;
        }

        .metric-value.success { color: #10b981; }
        .metric-value.warning { color: #f59e0b; }
        .metric-value.error { color: #ef4444; }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #34d399);
            transition: width 0.3s ease;
        }

        .actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .action-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 12px 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .logs {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }

        .logs h3 {
            color: #667eea;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .log-entry {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #f1f5f9;
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        .log-time {
            color: #64748b;
            font-size: 12px;
            white-space: nowrap;
        }

        .log-level {
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .log-level.info { background: #dbeafe; color: #1e40af; }
        .log-level.warn { background: #fef3c7; color: #92400e; }
        .log-level.error { background: #fee2e2; color: #991b1b; }
        .log-level.success { background: #d1fae5; color: #065f46; }

        .log-message {
            flex: 1;
            font-size: 13px;
            line-height: 1.4;
        }

        .refresh-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .refresh-indicator.show {
            opacity: 1;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-badge.healthy {
            background: #d1fae5;
            color: #065f46;
        }

        .status-badge.warning {
            background: #fef3c7;
            color: #92400e;
        }

        .status-badge.critical {
            background: #fee2e2;
            color: #991b1b;
        }

        .chart-container {
            height: 200px;
            background: #f8fafc;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #64748b;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .dashboard {
                padding: 10px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .actions {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <h1>🍇 엘더베리 개발 대시보드</h1>
            <div class="subtitle">Elderberry-Intellect 자기 진화형 개발 지원 시스템</div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <h3>🏥 시스템 상태</h3>
                <div class="metric">
                    <span>전체 헬스 점수</span>
                    <span class="metric-value success" id="health-score">85점</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 85%"></div>
                </div>
                <div class="metric">
                    <span>Spring Boot 상태</span>
                    <span class="status-badge warning">⚠️ 67개 에러</span>
                </div>
                <div class="metric">
                    <span>React 프론트엔드</span>
                    <span class="status-badge healthy">✅ 정상</span>
                </div>
                <div class="metric">
                    <span>Git 상태</span>
                    <span class="status-badge healthy">✅ 깨끗함</span>
                </div>
            </div>

            <div class="stat-card">
                <h3>🧠 AI 지능형 시스템</h3>
                <div class="metric">
                    <span>Claude Guide</span>
                    <span class="metric-value success">v4.0.0</span>
                </div>
                <div class="metric">
                    <span>동적 체크리스트</span>
                    <span class="metric-value success">활성</span>
                </div>
                <div class="metric">
                    <span>예측 분석</span>
                    <span class="metric-value success">활성</span>
                </div>
                <div class="metric">
                    <span>학습된 패턴</span>
                    <span class="metric-value">23개</span>
                </div>
            </div>

            <div class="stat-card">
                <h3>📊 개발 통계</h3>
                <div class="metric">
                    <span>총 해결된 이슈</span>
                    <span class="metric-value">47개</span>
                </div>
                <div class="metric">
                    <span>에러 패턴</span>
                    <span class="metric-value">12개</span>
                </div>
                <div class="metric">
                    <span>성능 최적화</span>
                    <span class="metric-value">8회</span>
                </div>
                <div class="metric">
                    <span>지침 준수율</span>
                    <span class="metric-value success">92%</span>
                </div>
            </div>

            <div class="stat-card">
                <h3>🔄 워크플로우</h3>
                <div class="metric">
                    <span>현재 Phase</span>
                    <span class="metric-value">Phase 7</span>
                </div>
                <div class="metric">
                    <span>완료된 작업</span>
                    <span class="metric-value">38/45</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 84%"></div>
                </div>
                <div class="metric">
                    <span>마지막 실행</span>
                    <span class="metric-value">2분 전</span>
                </div>
            </div>
        </div>

        <div class="actions">
            <button class="action-btn" onclick="runCommand('guide')">
                🧠 지능형 가이드 실행
            </button>
            <button class="action-btn" onclick="runCommand('health')">
                🏥 헬스체크 실행
            </button>
            <button class="action-btn" onclick="runCommand('compliance')">
                📊 지침 준수 검증
            </button>
            <button class="action-btn" onclick="runCommand('troubleshoot')">
                🔧 자동 문제해결
            </button>
            <button class="action-btn" onclick="runCommand('workflow')">
                🔄 워크플로우 시작
            </button>
            <button class="action-btn" onclick="runCommand('predict')">
                🔮 위험도 예측
            </button>
        </div>

        <div class="logs">
            <h3>📝 실시간 로그</h3>
            <div id="log-container">
                <!-- 로그 엔트리들이 여기에 동적으로 추가됩니다 -->
            </div>
        </div>
    </div>

    <div class="refresh-indicator" id="refresh-indicator">
        🔄 데이터 새로고침 중...
    </div>

    <script>
        // 대시보드 상태 관리
        class ElderberryDashboard {
            constructor() {
                this.isRefreshing = false;
                this.refreshInterval = 30000; // 30초
                this.logContainer = document.getElementById('log-container');
                this.refreshIndicator = document.getElementById('refresh-indicator');
                
                this.initializeDashboard();
                this.startAutoRefresh();
            }

            initializeDashboard() {
                console.log('🍇 엘더베리 대시보드 초기화');
                this.loadInitialLogs();
                this.updateStats();
            }

            loadInitialLogs() {
                const initialLogs = [
                    { time: '14:32:15', level: 'success', message: '🍇 엘더베리 대시보드 시작됨' },
                    { time: '14:32:16', level: 'info', message: '🧠 Claude Guide System v4.0.0 로드 완료' },
                    { time: '14:32:17', level: 'info', message: '📋 동적 체크리스트 서비스 활성화' },
                    { time: '14:32:18', level: 'info', message: '🔮 예측 분석 서비스 활성화' },
                    { time: '14:32:19', level: 'warn', message: '⚠️ Spring Boot 67개 컴파일 에러 감지' },
                    { time: '14:32:20', level: 'info', message: '✅ React 프론트엔드 정상 상태 확인' },
                    { time: '14:32:21', level: 'success', message: '🏥 시스템 헬스체크 완료 - 85점' }
                ];

                initialLogs.forEach(log => this.addLogEntry(log));
            }

            addLogEntry(log) {
                const logEntry = document.createElement('div');
                logEntry.className = 'log-entry';
                logEntry.innerHTML = `
                    <span class="log-time">${log.time}</span>
                    <span class="log-level ${log.level}">${log.level}</span>
                    <span class="log-message">${log.message}</span>
                `;
                
                this.logContainer.insertBefore(logEntry, this.logContainer.firstChild);
                
                // 최대 50개 로그만 유지
                if (this.logContainer.children.length > 50) {
                    this.logContainer.removeChild(this.logContainer.lastChild);
                }
            }

            showRefreshIndicator() {
                this.refreshIndicator.classList.add('show');
                setTimeout(() => {
                    this.refreshIndicator.classList.remove('show');
                }, 2000);
            }

            updateStats() {
                // 실제 구현에서는 백엔드 API에서 데이터를 가져옴
                // 현재는 시뮬레이션 데이터 사용
                
                const healthScore = Math.floor(Math.random() * 10) + 80; // 80-90 사이
                document.getElementById('health-score').textContent = `${healthScore}점`;
                
                // 프로그레스 바 업데이트
                const progressBars = document.querySelectorAll('.progress-fill');
                progressBars.forEach(bar => {
                    const currentWidth = parseInt(bar.style.width);
                    const newWidth = Math.max(currentWidth + Math.floor(Math.random() * 3) - 1, 0);
                    bar.style.width = `${Math.min(newWidth, 100)}%`;
                });
            }

            startAutoRefresh() {
                setInterval(() => {
                    if (!this.isRefreshing) {
                        this.refreshData();
                    }
                }, this.refreshInterval);
            }

            async refreshData() {
                this.isRefreshing = true;
                this.showRefreshIndicator();
                
                try {
                    // 실제 구현에서는 CLI 명령어 실행 또는 API 호출
                    await this.simulateDataRefresh();
                    this.updateStats();
                    
                    const now = new Date();
                    const timeString = now.toLocaleTimeString('ko-KR');
                    
                    this.addLogEntry({
                        time: timeString,
                        level: 'info',
                        message: '🔄 대시보드 데이터 자동 갱신 완료'
                    });
                    
                } catch (error) {
                    this.addLogEntry({
                        time: new Date().toLocaleTimeString('ko-KR'),
                        level: 'error',
                        message: `❌ 데이터 갱신 실패: ${error.message}`
                    });
                } finally {
                    this.isRefreshing = false;
                }
            }

            async simulateDataRefresh() {
                // 실제 데이터 로딩 시뮬레이션
                return new Promise(resolve => {
                    setTimeout(resolve, 1000);
                });
            }

            // CLI 명령어 실행 (시뮬레이션)
            async executeCommand(command) {
                const now = new Date().toLocaleTimeString('ko-KR');
                
                this.addLogEntry({
                    time: now,
                    level: 'info',
                    message: `⚡ ${command} 명령어 실행 시작`
                });

                // 실제 구현에서는 웹소켓이나 Server-Sent Events를 통해
                // 백엔드의 CLI 실행 결과를 실시간으로 받아옴
                setTimeout(() => {
                    this.addLogEntry({
                        time: new Date().toLocaleTimeString('ko-KR'),
                        level: 'success',
                        message: `✅ ${command} 명령어 실행 완료`
                    });
                }, 2000);

                return new Promise(resolve => {
                    setTimeout(resolve, 2000);
                });
            }
        }

        // 전역 함수들
        let dashboard;

        function runCommand(command) {
            const commandMap = {
                'guide': '지능형 가이드',
                'health': '헬스체크',
                'compliance': '지침 준수 검증',
                'troubleshoot': '자동 문제해결',
                'workflow': '워크플로우',
                'predict': '위험도 예측'
            };

            const commandName = commandMap[command] || command;
            dashboard.executeCommand(commandName);
        }

        // 페이지 로드 완료시 대시보드 초기화
        document.addEventListener('DOMContentLoaded', () => {
            dashboard = new ElderberryDashboard();
        });

        // 키보드 단축키
        document.addEventListener('keydown', (event) => {
            if (event.ctrlKey || event.metaKey) {
                switch (event.key) {
                    case 'g':
                        event.preventDefault();
                        runCommand('guide');
                        break;
                    case 'h':
                        event.preventDefault();
                        runCommand('health');
                        break;
                    case 'r':
                        event.preventDefault();
                        dashboard.refreshData();
                        break;
                }
            }
        });

        // 페이지 가시성 API - 탭이 활성화되면 데이터 갱신
        document.addEventListener('visibilitychange', () => {
            if (!document.hidden && dashboard) {
                dashboard.refreshData();
            }
        });
    </script>
</body>
</html>