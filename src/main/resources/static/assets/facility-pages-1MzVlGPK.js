var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,n=(e,s)=>{for(var a in s||(s={}))i.call(s,a)&&r(e,a,s[a]);if(t)for(var a of t(s))l.call(s,a)&&r(e,a,s[a]);return e},c=(e,t)=>s(e,a(t)),o=(e,s,a)=>r(e,"symbol"!=typeof s?s+"":s,a),d=(e,s,a)=>new Promise((t,i)=>{var l=e=>{try{n(a.next(e))}catch(s){i(s)}},r=e=>{try{n(a.throw(e))}catch(s){i(s)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(l,r);n((a=a.apply(e,s)).next())});import{r as m,j as x,L as h,c as u,p,_ as g,$ as y,P as j,t as v,f,a0 as b,S as N,X as w,a1 as k,a2 as S,a3 as C,a4 as R,a5 as F,a6 as E,a7 as T,a8 as $,n as P,a9 as M,a as A,C as L,I,aa as z,ab as O,ac as _,ad as H,ae as G,af as B,ag as D,K,ah as U,ai as W,aj as q,ak as Y,al as V,am as Q,m as J,an as Z,F as X,ao as ee,G as se,o as ae,ap as te,aq as ie,ar as le,as as re,at as ne,au as ce}from"./react-vendor-BYDInCC8.js";import{d as oe,s as de,i as me}from"./state-management-DUuJHh35.js";import{C as xe,a as he,B as ue,b as pe,c as ge}from"./auth-pages-DlhpNw8l.js";import{m as ye,A as je}from"./ui-libs-B_iLp8lQ.js";import{a as ve}from"./utils-vhTAaM2j.js";function fe({isActive:e,initialFocus:s,returnFocus:a=!0}){const t=m.useRef(null),i=m.useRef(null);return m.useEffect(()=>{if(!e)return;i.current=document.activeElement;const l=t.current;if(!l)return;const r=["button:not([disabled])","input:not([disabled])","textarea:not([disabled])","select:not([disabled])","a[href]",'[tabindex]:not([tabindex="-1"])','[contenteditable="true"]'].join(", "),n=()=>Array.from(l.querySelectorAll(r)).filter(e=>{const s=window.getComputedStyle(e);return"none"!==s.display&&"hidden"!==s.visibility}),c=e=>{if("Tab"!==e.key)return;const s=n();if(0===s.length)return;const a=s[0],t=s[s.length-1],i=document.activeElement;e.shiftKey?i===a&&(e.preventDefault(),t.focus()):i===t&&(e.preventDefault(),a.focus())},o=setTimeout(()=>{if(s){const e=l.querySelector(s);if(e)return void e.focus()}const e=n();e.length>0&&e[0].focus()},0);return document.addEventListener("keydown",c),()=>{clearTimeout(o),document.removeEventListener("keydown",c),a&&i.current&&i.current.focus()}},[e,s,a]),t}function be(){return{skipToContent:()=>{const e=document.querySelector("main");e&&(e.focus(),e.scrollIntoView())}}}const Ne=({size:e="md",color:s="blue",text:a,className:t=""})=>{const i={blue:"text-blue-600",gray:"text-gray-600",white:"text-white"};return x.jsxs("div",{className:`flex flex-col items-center justify-center ${t}`,children:[x.jsx(h,{className:`animate-spin ${{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"}[e]} ${i[s]}`,"aria-label":"ë¡œë”© ì¤‘"}),a&&x.jsx("p",{className:`mt-2 ${{sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl"}[e]} ${i[s]} animate-pulse`,children:a})]})},we={searchResults:[],recommendations:[],selectedFacility:null,searchFilters:{},matchingPreference:{preferredRegions:new Set,preferredFacilityTypes:new Set,maxMonthlyFee:null,minFacilityGrade:"C",requiredSpecialties:new Set,maxDistanceKm:null,prioritizeAvailability:!0,prioritizeCost:!1,prioritizeQuality:!0},userHistory:[],isSearching:!1,isLoadingRecommendations:!1,isLoadingHistory:!1,searchError:null,recommendationError:null,isDetailModalOpen:!1,isRecommendationModalOpen:!1,isMatchingFormOpen:!1},ke={searchFacilities(e){return d(this,null,function*(){const s=new URLSearchParams;e.facilityType&&s.append("facilityType",e.facilityType),e.facilityGrade&&s.append("facilityGrade",e.facilityGrade),e.region&&s.append("region",e.region),e.careGradeLevel&&s.append("careGradeLevel",e.careGradeLevel.toString());const a=yield fetch(`/api/facilities?${s.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(!a.ok)throw new Error(`ì‹œì„¤ ê²€ìƒ‰ ì‹¤íŒ¨: ${a.statusText}`);return(yield a.json()).content||[]})},getRecommendations(e,s,a){return d(this,null,function*(){const t={memberId:e,coordinatorId:a,preference:{preferredRegions:Array.from(s.preferredRegions),preferredFacilityTypes:Array.from(s.preferredFacilityTypes),maxMonthlyFee:s.maxMonthlyFee,minFacilityGrade:s.minFacilityGrade,requiredSpecialties:Array.from(s.requiredSpecialties),maxDistanceKm:s.maxDistanceKm,prioritizeAvailability:s.prioritizeAvailability,prioritizeCost:s.prioritizeCost,prioritizeQuality:s.prioritizeQuality},maxResults:10},i=yield fetch("/api/facilities/recommendations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify(t)});if(!i.ok)throw new Error(`ì¶”ì²œ ì‹œì„¤ ì¡°íšŒ ì‹¤íŒ¨: ${i.statusText}`);return i.json()})},trackFacilityAction(e,s){return d(this,null,function*(){const a=yield fetch(`/api/facilities/${e}/${s}`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(!a.ok)throw new Error(`ì‹œì„¤ ${s} ì¶”ì  ì‹¤íŒ¨: ${a.statusText}`)})},completeMatching(e,s,a,t){return d(this,null,function*(){const i={outcome:s,satisfactionScore:a,feedback:t},l=yield fetch(`/api/facilities/${e}/complete-matching`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify(i)});if(!l.ok)throw new Error(`ë§¤ì¹­ ì™„ë£Œ ì²˜ë¦¬ ì‹¤íŒ¨: ${l.statusText}`)})},getUserHistory(){return d(this,null,function*(){const e=yield fetch("/api/facilities/matching-history",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(!e.ok)throw new Error(`ë§¤ì¹­ ì´ë ¥ ì¡°íšŒ ì‹¤íŒ¨: ${e.statusText}`);return e.json()})}},Se=u()(oe(de(me((e,s)=>c(n({},we),{searchFacilities:s=>d(null,null,function*(){e(e=>{e.isSearching=!0,e.searchError=null});try{const a=yield ke.searchFacilities(s);e(e=>{e.searchResults=a,e.searchFilters=s,e.isSearching=!1})}catch(a){e(e=>{e.searchError=a instanceof Error?a.message:"ì‹œì„¤ ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",e.isSearching=!1})}}),updateSearchFilters:s=>{e(e=>{Object.assign(e.searchFilters,s)})},clearSearchResults:()=>{e(e=>{e.searchResults=[],e.searchFilters={},e.searchError=null})},getRecommendations:(a,t)=>d(null,null,function*(){e(e=>{e.isLoadingRecommendations=!0,e.recommendationError=null});try{const i=yield ke.getRecommendations(a,s().matchingPreference,t);e(e=>{e.recommendations=i,e.isLoadingRecommendations=!1})}catch(i){e(e=>{e.recommendationError=i instanceof Error?i.message:"ì‹œì„¤ ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",e.isLoadingRecommendations=!1})}}),updateMatchingPreference:s=>{e(e=>{Object.assign(e.matchingPreference,s)})},clearRecommendations:()=>{e(e=>{e.recommendations=[],e.recommendationError=null})},selectFacility:s=>{e(e=>{e.selectedFacility=s})},clearSelectedFacility:()=>{e(e=>{e.selectedFacility=null})},trackFacilityView:e=>d(null,null,function*(){}),trackFacilityContact:e=>d(null,null,function*(){try{yield ke.trackFacilityAction(e,"contact"),s().loadUserHistory()}catch(a){}}),trackFacilityVisit:e=>d(null,null,function*(){try{yield ke.trackFacilityAction(e,"visit"),s().loadUserHistory()}catch(a){}}),completeMatching:(e,a,t,i)=>d(null,null,function*(){try{yield ke.completeMatching(e,a,t,i),s().loadUserHistory()}catch(l){throw l}}),loadUserHistory:()=>d(null,null,function*(){e(e=>{e.isLoadingHistory=!0});try{const s=yield ke.getUserHistory();e(e=>{e.userHistory=s,e.isLoadingHistory=!1})}catch(s){e(e=>{e.isLoadingHistory=!1})}}),clearUserHistory:()=>{e(e=>{e.userHistory=[]})},openDetailModal:()=>{e(e=>{e.isDetailModalOpen=!0})},closeDetailModal:()=>{e(e=>{e.isDetailModalOpen=!1})},openRecommendationModal:()=>{e(e=>{e.isRecommendationModalOpen=!0})},closeRecommendationModal:()=>{e(e=>{e.isRecommendationModalOpen=!1})},openMatchingForm:()=>{e(e=>{e.isMatchingFormOpen=!0})},closeMatchingForm:()=>{e(e=>{e.isMatchingFormOpen=!1})},setSearchError:s=>{e(e=>{e.searchError=s})},setRecommendationError:s=>{e(e=>{e.recommendationError=s})},clearAllErrors:()=>{e(e=>{e.searchError=null,e.recommendationError=null})},resetFacilityState:()=>{e(()=>n({},we))}}))),{name:"FacilityStore"})),Ce=({facility:e,viewMode:s="list",onSelect:a,showActions:t=!0,isRecommendation:i=!1,matchScore:l,recommendationReason:r})=>{const[n,c]=m.useState(null),{selectFacility:o,openDetailModal:h,trackFacilityContact:u,trackFacilityVisit:b}=Se(),N=()=>{o(e),h(),null==a||a(e)},w=s=>d(null,null,function*(){s.stopPropagation(),c("contact");try{yield u(e.id),window.open(`tel:${e.phoneNumber}`)}catch(a){}finally{c(null)}}),k=s=>d(null,null,function*(){s.stopPropagation(),c("visit");try{yield b(e.id),alert("ë°©ë¬¸ ì˜ˆì•½ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹œì„¤ì—ì„œ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.")}catch(a){}finally{c(null)}}),S=e=>{switch(e){case"A":return"text-green-600 bg-green-100";case"B":return"text-blue-600 bg-blue-100";case"C":return"text-yellow-600 bg-yellow-100";case"D":return"text-orange-600 bg-orange-100";case"E":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},C=e.totalCapacity-e.currentOccupancy,R=e.currentOccupancy/e.totalCapacity*100,F=e=>e?`${(e/1e4).toFixed(0)}ë§Œì›`:"ë¬¸ì˜";return"grid"===s?x.jsx(ye.div,{whileHover:{y:-4},transition:{duration:.2},children:x.jsxs(xe,{className:"h-full cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:N,children:[i&&l&&x.jsx("div",{className:"absolute top-4 right-4 z-10",children:x.jsxs("div",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium flex items-center",children:[x.jsx(p,{className:"w-3 h-3 mr-1"}),Math.round(l),"% ë§¤ì¹­"]})}),x.jsxs("div",{className:"relative h-48 bg-gray-200 rounded-t-lg overflow-hidden",children:[e.imageUrl?x.jsx("img",{src:e.imageUrl,alt:e.facilityName,className:"w-full h-full object-cover"}):x.jsx("div",{className:"w-full h-full flex items-center justify-center",children:x.jsx(g,{className:"w-12 h-12 text-gray-400"})}),x.jsx("div",{className:"absolute top-3 left-3",children:x.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S(e.facilityGrade)}`,children:[e.facilityGrade,"ë“±ê¸‰"]})})]}),x.jsxs(he,{className:"p-4",children:[x.jsxs("div",{className:"mb-3",children:[x.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-1 line-clamp-1",children:e.facilityName}),x.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.facilityType}),x.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[x.jsx(y,{className:"w-4 h-4 mr-1"}),x.jsx("span",{className:"line-clamp-1",children:e.address})]})]}),x.jsxs("div",{className:"mb-3",children:[x.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[x.jsx("span",{className:"text-gray-600",children:"ìž…ì†Œ í˜„í™©"}),x.jsx("span",{className:"font-medium "+(C>0?"text-green-600":"text-red-600"),children:C>0?`${C}ëª… ìž…ì†Œ ê°€ëŠ¥`:"ìž…ì†Œ ëŒ€ê¸°"})]}),x.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:x.jsx("div",{className:"h-2 rounded-full "+(R>=90?"bg-red-500":R>=70?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(R,100)}%`}})})]}),x.jsx("div",{className:"mb-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-600",children:"ì›” ê¸°ë³¸ë£Œ"}),x.jsx("span",{className:"font-semibold text-lg text-gray-900",children:F(e.monthlyBasicFee)})]})}),e.specialties&&e.specialties.length>0&&x.jsx("div",{className:"mb-4",children:x.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.specialties.slice(0,2).map(e=>x.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full",children:e},e)),e.specialties.length>2&&x.jsxs("span",{className:"px-2 py-1 bg-gray-50 text-gray-600 text-xs rounded-full",children:["+",e.specialties.length-2]})]})}),i&&r&&x.jsx("div",{className:"mb-4 p-2 bg-purple-50 rounded-lg",children:x.jsxs("p",{className:"text-xs text-purple-700 line-clamp-2",children:["ðŸ’¡ ",r]})}),t&&x.jsxs("div",{className:"flex space-x-2",children:[x.jsx(ue,{variant:"outline",size:"sm",onClick:w,disabled:"contact"===n,className:"flex-1",children:"contact"===n?x.jsx(ye.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:x.jsx(j,{className:"w-4 h-4"})}):x.jsx(j,{className:"w-4 h-4"})}),x.jsx(ue,{size:"sm",onClick:k,disabled:"visit"===n,className:"flex-1",children:"visit"===n?x.jsx(ye.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:x.jsx(v,{className:"w-4 h-4"})}):x.jsxs(x.Fragment,{children:[x.jsx(v,{className:"w-4 h-4 mr-1"}),"ë°©ë¬¸"]})})]})]})]})}):x.jsx(ye.div,{whileHover:{x:4},transition:{duration:.2},children:x.jsx(xe,{className:"cursor-pointer hover:shadow-md transition-shadow duration-200",onClick:N,children:x.jsx(he,{className:"p-6",children:x.jsxs("div",{className:"flex items-start space-x-4",children:[x.jsx("div",{className:"relative w-24 h-24 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0",children:e.imageUrl?x.jsx("img",{src:e.imageUrl,alt:e.facilityName,className:"w-full h-full object-cover"}):x.jsx("div",{className:"w-full h-full flex items-center justify-center",children:x.jsx(g,{className:"w-8 h-8 text-gray-400"})})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"flex items-start justify-between mb-2",children:x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-xl text-gray-900 mb-1",children:e.facilityName}),x.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[x.jsx("span",{className:"text-gray-600",children:e.facilityType}),x.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S(e.facilityGrade)}`,children:[e.facilityGrade,"ë“±ê¸‰"]}),i&&l&&x.jsxs("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium flex items-center",children:[x.jsx(p,{className:"w-3 h-3 mr-1"}),Math.round(l),"% ë§¤ì¹­"]})]})]})}),x.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-3",children:[x.jsx(y,{className:"w-4 h-4 mr-1"}),x.jsx("span",{children:e.address})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[x.jsx("span",{className:"text-gray-600",children:"ìž…ì†Œ í˜„í™©"}),x.jsx("span",{className:"font-medium "+(C>0?"text-green-600":"text-red-600"),children:C>0?`${C}ëª… ê°€ëŠ¥`:"ëŒ€ê¸°"})]}),x.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:x.jsx("div",{className:"h-2 rounded-full "+(R>=90?"bg-red-500":R>=70?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(R,100)}%`}})})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"ì›” ê¸°ë³¸ë£Œ"}),x.jsx("div",{className:"font-semibold text-lg text-gray-900",children:F(e.monthlyBasicFee)})]})]}),e.specialties&&e.specialties.length>0&&x.jsx("div",{className:"mb-3",children:x.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.specialties.slice(0,4).map(e=>x.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full",children:e},e)),e.specialties.length>4&&x.jsxs("span",{className:"px-2 py-1 bg-gray-50 text-gray-600 text-xs rounded-full",children:["+",e.specialties.length-4,"ê°œ ë”"]})]})}),i&&r&&x.jsx("div",{className:"mb-3 p-3 bg-purple-50 rounded-lg",children:x.jsxs("p",{className:"text-sm text-purple-700",children:["ðŸ’¡ ",r]})}),t&&x.jsxs("div",{className:"flex space-x-2 pt-2",children:[x.jsx(ue,{variant:"outline",size:"sm",onClick:w,disabled:"contact"===n,children:"contact"===n?x.jsx(ye.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:x.jsx(j,{className:"w-4 h-4"})}):x.jsxs(x.Fragment,{children:[x.jsx(j,{className:"w-4 h-4 mr-1"}),"ì—°ë½í•˜ê¸°"]})}),x.jsx(ue,{size:"sm",onClick:k,disabled:"visit"===n,children:"visit"===n?x.jsx(ye.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:x.jsx(v,{className:"w-4 h-4"})}):x.jsxs(x.Fragment,{children:[x.jsx(v,{className:"w-4 h-4 mr-1"}),"ë°©ë¬¸ ì˜ˆì•½"]})}),x.jsxs(ue,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),N()},children:[x.jsx(f,{className:"w-4 h-4 mr-1"}),"ìƒì„¸ë³´ê¸°"]})]})]})]})})})})},Re=({facilities:e,viewMode:s="list",isLoading:a=!1,emptyMessage:t="ì‹œì„¤ì´ ì—†ìŠµë‹ˆë‹¤.",onFacilitySelect:i,showActions:l=!0})=>{const r=()=>x.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((e,s)=>x.jsx(xe,{className:"animate-pulse",children:x.jsx(he,{className:"p-6",children:x.jsxs("div",{className:"flex items-start space-x-4",children:[x.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-lg flex-shrink-0"}),x.jsxs("div",{className:"flex-1 space-y-3",children:[x.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3"}),x.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),x.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]}),x.jsxs("div",{className:"flex space-x-2 pt-2",children:[x.jsx("div",{className:"h-8 bg-gray-200 rounded w-20"}),x.jsx("div",{className:"h-8 bg-gray-200 rounded w-20"})]})]}),x.jsxs("div",{className:"text-right space-y-2",children:[x.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"}),x.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"}),x.jsx("div",{className:"h-4 bg-gray-200 rounded w-12"})]})]})})},s))}),n=()=>x.jsx(ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"text-center py-12",children:x.jsx(xe,{children:x.jsx(he,{className:"p-12",children:x.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[x.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:x.jsx(N,{className:"w-8 h-8 text-gray-400"})}),x.jsxs("div",{className:"text-center",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤"}),x.jsx("p",{className:"text-gray-500 max-w-md",children:t})]}),x.jsx("div",{className:"text-sm text-gray-400 mt-4",children:x.jsx("p",{children:"ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ í•„í„°ë¥¼ ì¡°ì •í•´ë³´ì„¸ìš”."})})]})})})});return a?x.jsxs("div",{className:"space-y-4",children:[x.jsx("div",{className:"flex items-center justify-center py-8",children:x.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[x.jsx(b,{className:"w-5 h-5 animate-spin"}),x.jsx("span",{children:"ì‹œì„¤ì„ ê²€ìƒ‰í•˜ê³  ìžˆìŠµë‹ˆë‹¤..."})]})}),x.jsx(r,{})]}):0===e.length?x.jsx(n,{}):"grid"===s?x.jsx(ye.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.jsx(je,{children:e.map((e,s)=>x.jsx(ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.05*s},children:x.jsx(Ce,{facility:e,viewMode:"grid",onSelect:i,showActions:l})},e.id))})}):x.jsx(ye.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"space-y-4",children:x.jsx(je,{children:e.map((e,s)=>x.jsx(ye.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,delay:.05*s},children:x.jsx(Ce,{facility:e,viewMode:"list",onSelect:i,showActions:l})},e.id))})})},Fe=[{value:"ìš”ì–‘ì‹œì„¤",label:"ë…¸ì¸ìš”ì–‘ì‹œì„¤",description:"24ì‹œê°„ ì¼€ì–´ ì„œë¹„ìŠ¤"},{value:"ìš”ì–‘ë³‘ì›",label:"ìš”ì–‘ë³‘ì›",description:"ì˜ë£Œì§„ ìƒì£¼ ì¹˜ë£Œ"},{value:"ì–‘ë¡œì‹œì„¤",label:"ì–‘ë¡œì‹œì„¤",description:"ë…ë¦½ìƒí™œ ì§€ì›"},{value:"ì¹˜ë§¤ì „ë¬¸ì‹œì„¤",label:"ì¹˜ë§¤ì „ë¬¸ì‹œì„¤",description:"ì¹˜ë§¤ íŠ¹í™” ì¼€ì–´"},{value:"ìž¬í™œì „ë¬¸ì‹œì„¤",label:"ìž¬í™œì „ë¬¸ì‹œì„¤",description:"ìž¬í™œì¹˜ë£Œ ì¤‘ì‹¬"},{value:"ë‹¨ê¸°ë³´í˜¸ì‹œì„¤",label:"ë‹¨ê¸°ë³´í˜¸ì‹œì„¤",description:"ìž„ì‹œ ë³´í˜¸ ì„œë¹„ìŠ¤"}],Ee=[{value:"A",label:"Aë“±ê¸‰",description:"ìµœìš°ìˆ˜ (90ì  ì´ìƒ)",color:"text-green-600"},{value:"B",label:"Bë“±ê¸‰",description:"ìš°ìˆ˜ (80-89ì )",color:"text-blue-600"},{value:"C",label:"Cë“±ê¸‰",description:"ì–‘í˜¸ (70-79ì )",color:"text-yellow-600"},{value:"D",label:"Dë“±ê¸‰",description:"ë³´í†µ (60-69ì )",color:"text-orange-600"},{value:"E",label:"Eë“±ê¸‰",description:"ë¯¸í¡ (60ì  ë¯¸ë§Œ)",color:"text-red-600"}],Te=[{value:1,label:"1ë“±ê¸‰",description:"ìµœì¤‘ì¦ (95ì  ì´ìƒ)"},{value:2,label:"2ë“±ê¸‰",description:"ì¤‘ì¦ (75-94ì )"},{value:3,label:"3ë“±ê¸‰",description:"ì¤‘ë“±ë„ (60-74ì )"},{value:4,label:"4ë“±ê¸‰",description:"ê²½ì¦ (51-59ì )"},{value:5,label:"5ë“±ê¸‰",description:"ê²½ì¦ (45-50ì )"}],$e=["ì„œìš¸íŠ¹ë³„ì‹œ","ë¶€ì‚°ê´‘ì—­ì‹œ","ëŒ€êµ¬ê´‘ì—­ì‹œ","ì¸ì²œê´‘ì—­ì‹œ","ê´‘ì£¼ê´‘ì—­ì‹œ","ëŒ€ì „ê´‘ì—­ì‹œ","ìš¸ì‚°ê´‘ì—­ì‹œ","ì„¸ì¢…íŠ¹ë³„ìžì¹˜ì‹œ","ê²½ê¸°ë„","ê°•ì›ë„","ì¶©ì²­ë¶ë„","ì¶©ì²­ë‚¨ë„","ì „ë¼ë¶ë„","ì „ë¼ë‚¨ë„","ê²½ìƒë¶ë„","ê²½ìƒë‚¨ë„","ì œì£¼íŠ¹ë³„ìžì¹˜ë„"],Pe=[{value:1e6,label:"100ë§Œì› ì´í•˜"},{value:15e5,label:"150ë§Œì› ì´í•˜"},{value:2e6,label:"200ë§Œì› ì´í•˜"},{value:25e5,label:"250ë§Œì› ì´í•˜"},{value:3e6,label:"300ë§Œì› ì´í•˜"},{value:5e6,label:"500ë§Œì› ì´í•˜"}],Me=["ì¹˜ë§¤ì¼€ì–´","ìž¬í™œì¹˜ë£Œ","ë¬¼ë¦¬ì¹˜ë£Œ","ìž‘ì—…ì¹˜ë£Œ","ì–¸ì–´ì¹˜ë£Œ","ì¸ì§€ì¹˜ë£Œ","í˜¸ìŠ¤í”¼ìŠ¤ì¼€ì–´","ì˜ë£Œì¼€ì–´","ì˜ì–‘ê´€ë¦¬","ì‹¬ë¦¬ìƒë‹´"],Ae=({filters:e,onFiltersChange:s,onClear:a})=>{const[t,i]=m.useState(new Set(["type","grade"])),l=e=>{const s=new Set(t);s.has(e)?s.delete(e):s.add(e),i(s)},r=(e,a)=>{s({[e]:a})},n=Object.values(e).filter(e=>null!=e&&""!==e).length;return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["ìƒì„¸ í•„í„°",n>0&&x.jsxs("span",{className:"ml-2 bg-blue-100 text-blue-800 text-sm px-2 py-1 rounded-full",children:[n,"ê°œ ì ìš©ë¨"]})]}),n>0&&x.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>{s({facilityType:void 0,facilityGrade:void 0,region:void 0,careGradeLevel:void 0,maxMonthlyFee:void 0,minFacilityGrade:void 0,specialties:void 0,maxDistanceKm:void 0,hasAvailableSlots:void 0}),null==a||a()},className:"text-gray-500 hover:text-gray-700",children:[x.jsx(w,{className:"w-4 h-4 mr-1"}),"ì „ì²´ ì´ˆê¸°í™”"]})]}),x.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[x.jsxs("button",{onClick:()=>l("type"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx(g,{className:"w-5 h-5 text-gray-400 mr-2"}),x.jsx("span",{className:"font-medium",children:"ì‹œì„¤ íƒ€ìž…"})]}),x.jsx(ye.div,{animate:{rotate:t.has("type")?180:0},transition:{duration:.2},children:x.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),t.has("type")&&x.jsx(ye.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:Fe.map(s=>x.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[x.jsx("input",{type:"radio",name:"facilityType",value:s.value,checked:e.facilityType===s.value,onChange:e=>r("facilityType",e.target.value),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.label}),x.jsx("div",{className:"text-xs text-gray-500",children:s.description})]})]},s.value))})})]}),x.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[x.jsxs("button",{onClick:()=>l("grade"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx(p,{className:"w-5 h-5 text-gray-400 mr-2"}),x.jsx("span",{className:"font-medium",children:"ì‹œì„¤ ë“±ê¸‰"})]}),x.jsx(ye.div,{animate:{rotate:t.has("grade")?180:0},transition:{duration:.2},children:x.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),t.has("grade")&&x.jsx(ye.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:Ee.map(s=>x.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[x.jsx("input",{type:"radio",name:"facilityGrade",value:s.value,checked:e.facilityGrade===s.value,onChange:e=>r("facilityGrade",e.target.value),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),x.jsxs("div",{children:[x.jsx("div",{className:`text-sm font-medium ${s.color}`,children:s.label}),x.jsx("div",{className:"text-xs text-gray-500",children:s.description})]})]},s.value))})})]}),x.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[x.jsxs("button",{onClick:()=>l("region"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx(y,{className:"w-5 h-5 text-gray-400 mr-2"}),x.jsx("span",{className:"font-medium",children:"ì§€ì—­"})]}),x.jsx(ye.div,{animate:{rotate:t.has("region")?180:0},transition:{duration:.2},children:x.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),t.has("region")&&x.jsx(ye.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:x.jsxs("select",{value:e.region||"",onChange:e=>r("region",e.target.value||void 0),className:"mt-3 w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[x.jsx("option",{value:"",children:"ì „ì²´ ì§€ì—­"}),$e.map(e=>x.jsx("option",{value:e,children:e},e))]})})]}),x.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[x.jsxs("button",{onClick:()=>l("care"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx(k,{className:"w-5 h-5 text-gray-400 mr-2"}),x.jsx("span",{className:"font-medium",children:"ì¼€ì–´ ë“±ê¸‰"})]}),x.jsx(ye.div,{animate:{rotate:t.has("care")?180:0},transition:{duration:.2},children:x.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),t.has("care")&&x.jsx(ye.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:Te.map(s=>x.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[x.jsx("input",{type:"radio",name:"careGradeLevel",value:s.value,checked:e.careGradeLevel===s.value,onChange:e=>r("careGradeLevel",parseInt(e.target.value)),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.label}),x.jsx("div",{className:"text-xs text-gray-500",children:s.description})]})]},s.value))})})]}),x.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[x.jsxs("button",{onClick:()=>l("cost"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx(S,{className:"w-5 h-5 text-gray-400 mr-2"}),x.jsx("span",{className:"font-medium",children:"ì›” ë¹„ìš©"})]}),x.jsx(ye.div,{animate:{rotate:t.has("cost")?180:0},transition:{duration:.2},children:x.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),t.has("cost")&&x.jsx(ye.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:x.jsx("div",{className:"space-y-2 mt-3",children:Pe.map(s=>x.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[x.jsx("input",{type:"radio",name:"maxMonthlyFee",value:s.value,checked:e.maxMonthlyFee===s.value,onChange:e=>r("maxMonthlyFee",parseInt(e.target.value)),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),x.jsx("span",{className:"text-sm text-gray-900",children:s.label})]},s.value))})})]}),x.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[x.jsxs("button",{onClick:()=>l("specialties"),className:"w-full px-4 py-3 text-left flex justify-between items-center hover:bg-gray-50",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx(p,{className:"w-5 h-5 text-gray-400 mr-2"}),x.jsx("span",{className:"font-medium",children:"ì „ë¬¸ ì„œë¹„ìŠ¤"})]}),x.jsx(ye.div,{animate:{rotate:t.has("specialties")?180:0},transition:{duration:.2},children:x.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),t.has("specialties")&&x.jsx(ye.div,{initial:{height:0},animate:{height:"auto"},className:"px-4 pb-4 border-t border-gray-100",children:x.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:Me.map(s=>x.jsx("button",{onClick:()=>{const a=e.specialties||[],t=a.includes(s)?a.filter(e=>e!==s):[...a,s];r("specialties",t.length>0?t:void 0)},className:"px-3 py-1 text-sm rounded-full border transition-colors "+((e.specialties||[]).includes(s)?"bg-blue-100 border-blue-300 text-blue-800":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"),children:s},s))})})]}),x.jsx("div",{className:"border border-gray-200 rounded-lg",children:x.jsxs("div",{className:"px-4 py-3",children:[x.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"ê¸°íƒ€ ì˜µì…˜"}),x.jsx("div",{className:"space-y-3",children:x.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[x.jsx("input",{type:"checkbox",checked:e.hasAvailableSlots||!1,onChange:e=>r("hasAvailableSlots",!!e.target.checked||void 0),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),x.jsx("span",{className:"text-sm text-gray-900",children:"ìž…ì†Œ ê°€ëŠ¥í•œ ì‹œì„¤ë§Œ ë³´ê¸°"})]})})]})})]})},Le=({recommendations:e,isLoading:s=!1,onRefresh:a,memberId:t,showPreferences:i=!0})=>{const{matchingPreference:l,updateMatchingPreference:r}=Se(),[n,c]=m.useState(!1),[o,d]=m.useState(!1),h={averageScore:e.length>0?Math.round(e.reduce((e,s)=>e+s.matchScore,0)/e.length):0,highScoreCount:e.filter(e=>e.matchScore>=80).length,mediumScoreCount:e.filter(e=>e.matchScore>=60&&e.matchScore<80).length,lowScoreCount:e.filter(e=>e.matchScore<60).length},u=(()=>{const e=[];return h.averageScore>=80?e.push({type:"success",icon:A,title:"ìš°ìˆ˜í•œ ë§¤ì¹­ ê²°ê³¼",description:"íšŒì›ë‹˜ì˜ ìš”êµ¬ì‚¬í•­ì— ìž˜ ë§žëŠ” ì‹œì„¤ë“¤ì´ ë§Žì´ ì°¾ì•„ì¡ŒìŠµë‹ˆë‹¤."}):h.averageScore>=60?e.push({type:"warning",icon:L,title:"ì–‘í˜¸í•œ ë§¤ì¹­ ê²°ê³¼",description:"ì¼ë¶€ ì¡°ê±´ì„ ì¡°ì •í•˜ë©´ ë” ì í•©í•œ ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤."}):e.push({type:"info",icon:I,title:"ë§¤ì¹­ ì¡°ê±´ ê²€í†  í•„ìš”",description:"ì„ í˜¸ ì¡°ê±´ì„ ì¡°ì •í•˜ì—¬ ë” ë‚˜ì€ ì¶”ì²œ ê²°ê³¼ë¥¼ ë°›ì•„ë³´ì„¸ìš”."}),0===h.highScoreCount&&e.push({type:"tip",icon:M,title:"ì¶”ì²œ íŒ",description:"ì§€ì—­ ë²”ìœ„ë¥¼ ë„“ížˆê±°ë‚˜ ë¹„ìš© ì¡°ê±´ì„ ì¡°ì •í•´ë³´ì„¸ìš”."}),e})(),p=(e,s)=>{r({[e]:s})};return s?x.jsxs("div",{className:"space-y-6",children:[x.jsx(xe,{children:x.jsx(he,{className:"p-6",children:x.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[x.jsx(ye.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:x.jsx(C,{className:"w-6 h-6 text-purple-600"})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AIê°€ ë§žì¶¤í˜• ì‹œì„¤ì„ ë¶„ì„ ì¤‘ìž…ë‹ˆë‹¤"}),x.jsx("p",{className:"text-gray-600",children:"íšŒì›ë‹˜ì˜ ê±´ê°• ìƒíƒœì™€ ì„ í˜¸ë„ë¥¼ ì¢…í•©ì ìœ¼ë¡œ ë¶„ì„í•˜ê³  ìžˆì–´ìš”..."})]})]})})}),x.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((e,s)=>x.jsx(xe,{className:"animate-pulse",children:x.jsx(he,{className:"p-6",children:x.jsxs("div",{className:"flex items-start space-x-4",children:[x.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-lg"}),x.jsxs("div",{className:"flex-1 space-y-3",children:[x.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3"}),x.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),x.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),x.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]}),x.jsxs("div",{className:"text-right space-y-2",children:[x.jsx("div",{className:"h-8 bg-gray-200 rounded w-16"}),x.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"})]})]})})},s))})]}):0===e.length?x.jsx("div",{className:"text-center py-12",children:x.jsx(xe,{children:x.jsx(he,{className:"p-12",children:x.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[x.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center",children:x.jsx(R,{className:"w-8 h-8 text-purple-600"})}),x.jsxs("div",{className:"text-center",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ì¶”ì²œ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤"}),x.jsx("p",{className:"text-gray-500 max-w-md",children:"í˜„ìž¬ ì¡°ê±´ì— ë§žëŠ” ì‹œì„¤ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì„ í˜¸ ì¡°ê±´ì„ ì¡°ì •í•˜ê±°ë‚˜ ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”."})]}),a&&x.jsxs(ue,{onClick:a,variant:"outline",children:[x.jsx(b,{className:"w-4 h-4 mr-2"}),"ë‹¤ì‹œ ì¶”ì²œë°›ê¸°"]})]})})})}):x.jsxs("div",{className:"space-y-6",children:[x.jsxs(xe,{children:[x.jsx(pe,{children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:x.jsx(R,{className:"w-5 h-5 text-purple-600"})}),x.jsxs("div",{children:[x.jsx(ge,{className:"text-xl",children:"ë§žì¶¤í˜• ì¶”ì²œ ê²°ê³¼"}),x.jsxs("p",{className:"text-gray-600",children:["AIê°€ ë¶„ì„í•œ íšŒì›ë‹˜ê»˜ ìµœì ì˜ ì‹œì„¤ ",e.length,"ê³³"]})]})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[a&&x.jsxs(ue,{variant:"outline",size:"sm",onClick:a,children:[x.jsx(b,{className:"w-4 h-4 mr-1"}),"ìƒˆë¡œê³ ì¹¨"]}),i&&x.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>c(!n),children:[x.jsx(F,{className:"w-4 h-4 mr-1"}),"ì„ í˜¸ë„ ì„¤ì •"]})]})]})}),x.jsxs(he,{children:[x.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[x.jsxs("div",{className:"text-center",children:[x.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[h.averageScore,"%"]}),x.jsx("div",{className:"text-sm text-gray-600",children:"í‰ê·  ë§¤ì¹­ë„"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl font-bold text-green-600",children:h.highScoreCount}),x.jsx("div",{className:"text-sm text-gray-600",children:"ìš°ìˆ˜ ë§¤ì¹­ (80%+)"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:h.mediumScoreCount}),x.jsx("div",{className:"text-sm text-gray-600",children:"ì–‘í˜¸ ë§¤ì¹­ (60-79%)"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl font-bold text-gray-600",children:h.lowScoreCount}),x.jsx("div",{className:"text-sm text-gray-600",children:"ë³´í†µ ë§¤ì¹­ (60% ë¯¸ë§Œ)"})]})]}),x.jsxs("button",{onClick:()=>d(!o),className:"w-full flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx(C,{className:"w-5 h-5 text-purple-600"}),x.jsx("span",{className:"font-medium",children:"AI ì¶”ì²œ ë¶„ì„ ê²°ê³¼"})]}),o?x.jsx(E,{className:"w-5 h-5 text-gray-400"}):x.jsx(T,{className:"w-5 h-5 text-gray-400"})]}),x.jsx(je,{children:o&&x.jsx(ye.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:x.jsx("div",{className:"pt-4 space-y-3",children:u.map((e,s)=>{const a=e.icon,t={success:"text-green-600 bg-green-50",warning:"text-yellow-600 bg-yellow-50",info:"text-blue-600 bg-blue-50",tip:"text-purple-600 bg-purple-50"}[e.type];return x.jsx("div",{className:`p-3 rounded-lg ${t}`,children:x.jsxs("div",{className:"flex items-start space-x-2",children:[x.jsx(a,{className:"w-5 h-5 mt-0.5"}),x.jsxs("div",{children:[x.jsx("div",{className:"font-medium",children:e.title}),x.jsx("div",{className:"text-sm opacity-90",children:e.description})]})]})},s)})})})})]})]}),x.jsx(je,{children:n&&x.jsx(ye.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:x.jsxs(xe,{children:[x.jsx(pe,{children:x.jsxs(ge,{className:"text-lg flex items-center",children:[x.jsx(F,{className:"w-5 h-5 mr-2"}),"ì¶”ì²œ ì„ í˜¸ë„ ì„¤ì •"]})}),x.jsxs(he,{children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsxs("div",{className:"space-y-3",children:[x.jsx("h4",{className:"font-medium",children:"ìš°ì„ ìˆœìœ„"}),x.jsxs("label",{className:"flex items-center space-x-2",children:[x.jsx("input",{type:"checkbox",checked:l.prioritizeQuality,onChange:e=>p("prioritizeQuality",e.target.checked),className:"rounded border-gray-300"}),x.jsx("span",{className:"text-sm",children:"í’ˆì§ˆ ìš°ì„ "})]}),x.jsxs("label",{className:"flex items-center space-x-2",children:[x.jsx("input",{type:"checkbox",checked:l.prioritizeCost,onChange:e=>p("prioritizeCost",e.target.checked),className:"rounded border-gray-300"}),x.jsx("span",{className:"text-sm",children:"ë¹„ìš© ìš°ì„ "})]}),x.jsxs("label",{className:"flex items-center space-x-2",children:[x.jsx("input",{type:"checkbox",checked:l.prioritizeAvailability,onChange:e=>p("prioritizeAvailability",e.target.checked),className:"rounded border-gray-300"}),x.jsx("span",{className:"text-sm",children:"ìž…ì†Œ ê°€ëŠ¥ì„± ìš°ì„ "})]})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("h4",{className:"font-medium",children:"ìµœëŒ€ ì›” ë¹„ìš©"}),x.jsxs("select",{value:l.maxMonthlyFee||"",onChange:e=>p("maxMonthlyFee",e.target.value?parseInt(e.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",children:[x.jsx("option",{value:"",children:"ì œí•œ ì—†ìŒ"}),x.jsx("option",{value:"1500000",children:"150ë§Œì›"}),x.jsx("option",{value:"2000000",children:"200ë§Œì›"}),x.jsx("option",{value:"2500000",children:"250ë§Œì›"}),x.jsx("option",{value:"3000000",children:"300ë§Œì›"}),x.jsx("option",{value:"4000000",children:"400ë§Œì›"}),x.jsx("option",{value:"5000000",children:"500ë§Œì›"})]})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("h4",{className:"font-medium",children:"ìµœì†Œ ì‹œì„¤ ë“±ê¸‰"}),x.jsxs("select",{value:l.minFacilityGrade,onChange:e=>p("minFacilityGrade",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",children:[x.jsx("option",{value:"E",children:"Eë“±ê¸‰ ì´ìƒ"}),x.jsx("option",{value:"D",children:"Dë“±ê¸‰ ì´ìƒ"}),x.jsx("option",{value:"C",children:"Cë“±ê¸‰ ì´ìƒ"}),x.jsx("option",{value:"B",children:"Bë“±ê¸‰ ì´ìƒ"}),x.jsx("option",{value:"A",children:"Aë“±ê¸‰ë§Œ"})]})]})]}),x.jsx("div",{className:"mt-4 pt-4 border-t",children:x.jsxs(ue,{onClick:a,className:"w-full",children:[x.jsx($,{className:"w-4 h-4 mr-2"}),"ìƒˆë¡œìš´ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ ì¶”ì²œë°›ê¸°"]})})]})]})})}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"ì¶”ì²œ ì‹œì„¤ ëª©ë¡"}),x.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[x.jsx(P,{className:"w-4 h-4"}),x.jsx("span",{children:"ë§¤ì¹­ë„ ìˆœìœ¼ë¡œ ì •ë ¬ë¨"})]})]}),x.jsx(je,{children:e.map((e,s)=>x.jsx(ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.1*s},children:x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"absolute -left-4 top-4 z-10",children:x.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold "+(0===s?"bg-yellow-500":1===s?"bg-gray-400":2===s?"bg-amber-600":"bg-gray-300"),children:s+1})}),x.jsx(Ce,{facility:e.facility,viewMode:"list",isRecommendation:!0,matchScore:e.matchScore,recommendationReason:e.recommendationReason,showActions:!0})]})},e.facility.id))})]}),x.jsx(xe,{children:x.jsx(he,{className:"p-6",children:x.jsxs("div",{className:"flex items-start space-x-3",children:[x.jsx(M,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"ì¶”ì²œ ê²°ê³¼ë¥¼ ê°œì„ í•˜ë ¤ë©´?"}),x.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[x.jsx("li",{children:"â€¢ ì„ í˜¸ ì§€ì—­ ë²”ìœ„ë¥¼ ì¡°ì •í•´ë³´ì„¸ìš”"}),x.jsx("li",{children:"â€¢ ì˜ˆì‚° ì¡°ê±´ì„ ë‹¤ì‹œ ê²€í† í•´ë³´ì„¸ìš”"}),x.jsx("li",{children:"â€¢ í•„ìˆ˜ ì„œë¹„ìŠ¤ ì¡°ê±´ì„ ëª…í™•ížˆ í•´ë³´ì„¸ìš”"}),x.jsx("li",{children:"â€¢ ì‹œì„¤ ë°©ë¬¸ í›„ í”¼ë“œë°±ì„ ë‚¨ê²¨ì£¼ì‹œë©´ ë” ì •í™•í•œ ì¶”ì²œì´ ê°€ëŠ¥í•©ë‹ˆë‹¤"})]})]})]})})})]})};var Ie=(e=>(e.LATEST="latest",e.OLDEST="oldest",e.HIGHEST_RATING="highest",e.LOWEST_RATING="lowest",e.MOST_HELPFUL="helpful",e))(Ie||{});const ze={baseURL:"http://localhost:8080/api",timeout:3e4,headers:{"Content-Type":"application/json"}};class Oe{constructor(){o(this,"ACCESS_TOKEN_KEY","accessToken"),o(this,"REFRESH_TOKEN_KEY","refreshToken")}getAccessToken(){return localStorage.getItem(this.ACCESS_TOKEN_KEY)}getRefreshToken(){return localStorage.getItem(this.REFRESH_TOKEN_KEY)}setTokens(e,s){localStorage.setItem(this.ACCESS_TOKEN_KEY,e),localStorage.setItem(this.REFRESH_TOKEN_KEY,s)}clearTokens(){localStorage.removeItem(this.ACCESS_TOKEN_KEY),localStorage.removeItem(this.REFRESH_TOKEN_KEY)}isTokenExpired(e){try{return 1e3*JSON.parse(atob(e.split(".")[1])).exp<Date.now()}catch(s){return!0}}}const _e=new class{constructor(){o(this,"client"),o(this,"tokenManager"),o(this,"isRefreshing",!1),o(this,"refreshPromise",null),this.client=ve.create(ze),this.tokenManager=new Oe,this.setupInterceptors()}setupInterceptors(){this.client.interceptors.request.use(e=>{const s=this.tokenManager.getAccessToken();return s&&!this.tokenManager.isTokenExpired(s)&&(e.headers.Authorization=`Bearer ${s}`),e},e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,e=>d(this,null,function*(){var s;const a=e.config;if(401===(null==(s=e.response)?void 0:s.status)&&!a._retry){a._retry=!0;try{const e=yield this.refreshAccessToken();return a.headers.Authorization=`Bearer ${e}`,this.client(a)}catch(t){return this.tokenManager.clearTokens(),window.location.href="/login",Promise.reject(t)}}return Promise.reject(this.handleError(e))}))}refreshAccessToken(){return d(this,null,function*(){if(this.isRefreshing&&this.refreshPromise)return this.refreshPromise;this.isRefreshing=!0,this.refreshPromise=this.performTokenRefresh();try{return yield this.refreshPromise}finally{this.isRefreshing=!1,this.refreshPromise=null}})}performTokenRefresh(){return d(this,null,function*(){const e=this.tokenManager.getRefreshToken();if(!e)throw new Error("No refresh token available");const s=yield ve.post(`${ze.baseURL}/auth/refresh`,{refreshToken:e},{headers:ze.headers}),{accessToken:a,refreshToken:t}=s.data;return this.tokenManager.setTokens(a,t),a})}handleError(e){var s,a;return(null==(s=e.response)?void 0:s.data)?e.response.data:{error:"NETWORK_ERROR",message:e.message||"Network error occurred",statusCode:(null==(a=e.response)?void 0:a.status)||0,timestamp:(new Date).toISOString()}}get(e,s){return d(this,null,function*(){return(yield this.client.get(e,s)).data})}post(e,s,a){return d(this,null,function*(){return(yield this.client.post(e,s,a)).data})}put(e,s,a){return d(this,null,function*(){return(yield this.client.put(e,s,a)).data})}patch(e,s,a){return d(this,null,function*(){return(yield this.client.patch(e,s,a)).data})}delete(e,s){return d(this,null,function*(){return(yield this.client.delete(e,s)).data})}uploadFile(e,s,a){return d(this,null,function*(){const t=new FormData;t.append("file",s);const i={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(a&&e.total){const s=Math.round(100*e.loaded/e.total);a(s)}}};return(yield this.client.post(e,t,i)).data})}setTokens(e,s){this.tokenManager.setTokens(e,s)}clearTokens(){this.tokenManager.clearTokens()}getAccessToken(){return this.tokenManager.getAccessToken()}isAuthenticated(){const e=this.tokenManager.getAccessToken();return!!e&&!this.tokenManager.isTokenExpired(e)}},He=e=>{var s,a,t;if(null==(a=null==(s=e.response)?void 0:s.data)?void 0:a.message)return e.response.data.message;switch(null==(t=e.response)?void 0:t.status){case 400:return"ìž˜ëª»ëœ ìš”ì²­ìž…ë‹ˆë‹¤. ìž…ë ¥ ì •ë³´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.";case 401:return"ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.";case 403:return"ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.";case 404:return"ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";case 409:return"ì´ë¯¸ ë¦¬ë·°ë¥¼ ìž‘ì„±í•˜ì…¨ê±°ë‚˜ ì¤‘ë³µëœ ìš”ì²­ìž…ë‹ˆë‹¤.";case 500:return"ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ìž ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";default:return"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."}},Ge={reviews:[],currentReview:null,reviewStatistics:null,pagination:{page:0,size:10,totalElements:0,totalPages:0,hasNext:!1,hasPrevious:!1},currentFilter:{},currentSort:Ie.LATEST,loading:{reviews:!1,create:!1,update:!1,delete:!1,vote:!1,report:!1,statistics:!1},error:null,selectedFacilityId:null,myReviews:[],myReviewsPagination:{page:0,totalElements:0,totalPages:0}},Be=u()(me((e,s)=>c(n({},Ge),{loadReviews:(s,a=0,t=10)=>d(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null,e.selectedFacilityId=s});try{const i=yield((e,s=0,a=10)=>d(null,null,function*(){return(yield _e.get(`/reviews/facility/${e}?page=${s}&size=${a}`)).data}))(s,a,t);e(e=>{e.reviews=i.content,e.pagination={page:i.number,size:i.size,totalElements:i.totalElements,totalPages:i.totalPages,hasNext:!i.last,hasPrevious:!i.first},e.loading.reviews=!1})}catch(i){e(e=>{e.error=He(i),e.loading.reviews=!1})}}),loadReviewById:s=>d(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null});try{const a=yield(e=>d(null,null,function*(){return(yield _e.get(`/reviews/${e}`)).data}))(s);e(e=>{e.currentReview=a,e.loading.reviews=!1})}catch(a){e(e=>{e.error=He(a),e.loading.reviews=!1})}}),createReview:(s,a)=>d(null,null,function*(){e(e=>{e.loading.create=!0,e.error=null});try{const t=yield((e,s)=>d(null,null,function*(){return(yield _e.post(`/reviews/facility/${e}`,s)).data}))(s,a);return e(e=>{e.reviews.unshift(t),e.loading.create=!1}),t}catch(t){throw e(e=>{e.error=He(t),e.loading.create=!1}),t}}),updateReview:(s,a)=>d(null,null,function*(){e(e=>{e.loading.update=!0,e.error=null});try{const t=yield((e,s)=>d(null,null,function*(){return(yield _e.put(`/reviews/${e}`,s)).data}))(s,a);return e(e=>{var a;const i=e.reviews.findIndex(e=>e.id===s);-1!==i&&(e.reviews[i]=t),(null==(a=e.currentReview)?void 0:a.id)===s&&(e.currentReview=t),e.loading.update=!1}),t}catch(t){throw e(e=>{e.error=He(t),e.loading.update=!1}),t}}),deleteReview:s=>d(null,null,function*(){e(e=>{e.loading.delete=!0,e.error=null});try{yield(e=>d(null,null,function*(){yield _e.delete(`/reviews/${e}`)}))(s),e(e=>{var a;e.reviews=e.reviews.filter(e=>e.id!==s),(null==(a=e.currentReview)?void 0:a.id)===s&&(e.currentReview=null),e.loading.delete=!1})}catch(a){throw e(e=>{e.error=He(a),e.loading.delete=!1}),a}}),loadLatestReviews:(a,t=0)=>d(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null,e.selectedFacilityId=a,e.currentSort=Ie.LATEST});try{const i=yield((e,s=0,a=10)=>d(null,null,function*(){return(yield _e.get(`/reviews/facility/${e}/latest?page=${s}&size=${a}`)).data}))(a,t,s().pagination.size);e(e=>{e.reviews=i.content,e.pagination.page=i.number,e.pagination.totalElements=i.totalElements,e.pagination.totalPages=i.totalPages,e.pagination.hasNext=!i.last,e.pagination.hasPrevious=!i.first,e.loading.reviews=!1})}catch(i){e(e=>{e.error=He(i),e.loading.reviews=!1})}}),loadBestReviews:(a,t=0)=>d(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null,e.selectedFacilityId=a,e.currentSort=Ie.MOST_HELPFUL});try{const i=yield((e,s=0,a=10)=>d(null,null,function*(){return(yield _e.get(`/reviews/facility/${e}/best?page=${s}&size=${a}`)).data}))(a,t,s().pagination.size);e(e=>{e.reviews=i.content,e.pagination.page=i.number,e.pagination.totalElements=i.totalElements,e.pagination.totalPages=i.totalPages,e.pagination.hasNext=!i.last,e.pagination.hasPrevious=!i.first,e.loading.reviews=!1})}catch(i){e(e=>{e.error=He(i),e.loading.reviews=!1})}}),loadVerifiedReviews:(a,t=0)=>d(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null,e.selectedFacilityId=a,e.currentFilter=c(n({},e.currentFilter),{verified:!0})});try{const i=yield((e,s=0,a=10)=>d(null,null,function*(){return(yield _e.get(`/reviews/facility/${e}/verified?page=${s}&size=${a}`)).data}))(a,t,s().pagination.size);e(e=>{e.reviews=i.content,e.pagination.page=i.number,e.pagination.totalElements=i.totalElements,e.pagination.totalPages=i.totalPages,e.pagination.hasNext=!i.last,e.pagination.hasPrevious=!i.first,e.loading.reviews=!1})}catch(i){e(e=>{e.error=He(i),e.loading.reviews=!1})}}),loadReviewsWithImages:(a,t=0)=>d(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null,e.selectedFacilityId=a,e.currentFilter=c(n({},e.currentFilter),{hasImages:!0})});try{const i=yield((e,s=0,a=10)=>d(null,null,function*(){return(yield _e.get(`/reviews/facility/${e}/with-images?page=${s}&size=${a}`)).data}))(a,t,s().pagination.size);e(e=>{e.reviews=i.content,e.pagination.page=i.number,e.pagination.totalElements=i.totalElements,e.pagination.totalPages=i.totalPages,e.pagination.hasNext=!i.last,e.pagination.hasPrevious=!i.first,e.loading.reviews=!1})}catch(i){e(e=>{e.error=He(i),e.loading.reviews=!1})}}),applyFilter:a=>d(null,null,function*(){const{selectedFacilityId:t,currentSort:i,pagination:l}=s();t&&(e(e=>{e.currentFilter=a}),yield s().loadFilteredReviews(t,a,i,0))}),changeSort:a=>d(null,null,function*(){const{selectedFacilityId:t,currentFilter:i}=s();t&&(e(e=>{e.currentSort=a}),yield s().loadFilteredReviews(t,i,a,0))}),loadFilteredReviews:(a,t,i,l=0)=>d(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null,e.selectedFacilityId=a,e.currentFilter=t,e.currentSort=i});try{const r=yield((e,s,...a)=>d(null,[e,s,...a],function*(e,s,a=Ie.LATEST,t=0,i=10){const l=new URLSearchParams({page:t.toString(),size:i.toString(),sort:a});return s.reviewType&&l.append("reviewType",s.reviewType),s.minRating&&l.append("minRating",s.minRating.toString()),s.maxRating&&l.append("maxRating",s.maxRating.toString()),void 0!==s.verified&&l.append("verified",s.verified.toString()),void 0!==s.hasImages&&l.append("hasImages",s.hasImages.toString()),void 0!==s.recommended&&l.append("recommended",s.recommended.toString()),(yield _e.get(`/reviews/facility/${e}/filtered?${l.toString()}`)).data}))(a,t,i,l,s().pagination.size);e(e=>{e.reviews=r.content,e.pagination.page=r.number,e.pagination.totalElements=r.totalElements,e.pagination.totalPages=r.totalPages,e.pagination.hasNext=!r.last,e.pagination.hasPrevious=!r.first,e.loading.reviews=!1})}catch(r){e(e=>{e.error=He(r),e.loading.reviews=!1})}}),clearFilter:()=>{e(e=>{e.currentFilter={}})},voteHelpful:s=>d(null,null,function*(){e(e=>{e.loading.vote=!0,e.error=null});try{yield(e=>d(null,null,function*(){yield _e.post(`/reviews/${e}/vote/helpful`)}))(s),e(e=>{var a;const t=e.reviews.find(e=>e.id===s);t&&(t.helpfulCount+=1),(null==(a=e.currentReview)?void 0:a.id)===s&&(e.currentReview.helpfulCount+=1),e.loading.vote=!1})}catch(a){throw e(e=>{e.error=He(a),e.loading.vote=!1}),a}}),voteNotHelpful:s=>d(null,null,function*(){e(e=>{e.loading.vote=!0,e.error=null});try{yield(e=>d(null,null,function*(){yield _e.post(`/reviews/${e}/vote/not-helpful`)}))(s),e(e=>{var a;const t=e.reviews.find(e=>e.id===s);t&&(t.notHelpfulCount+=1),(null==(a=e.currentReview)?void 0:a.id)===s&&(e.currentReview.notHelpfulCount+=1),e.loading.vote=!1})}catch(a){throw e(e=>{e.error=He(a),e.loading.vote=!1}),a}}),reportReview:(s,a,t)=>d(null,null,function*(){e(e=>{e.loading.report=!0,e.error=null});try{yield((e,s,a)=>d(null,null,function*(){yield _e.post(`/reviews/${e}/report`,{reason:s,description:a})}))(s,a,t),e(e=>{var a;const t=e.reviews.find(e=>e.id===s);t&&(t.reportCount+=1),(null==(a=e.currentReview)?void 0:a.id)===s&&(e.currentReview.reportCount+=1),e.loading.report=!1})}catch(i){throw e(e=>{e.error=He(i),e.loading.report=!1}),i}}),loadReviewStatistics:s=>d(null,null,function*(){e(e=>{e.loading.statistics=!0,e.error=null});try{const a=yield(e=>d(null,null,function*(){return(yield _e.get(`/reviews/facility/${e}/statistics`)).data}))(s);e(e=>{e.reviewStatistics=a,e.loading.statistics=!1})}catch(a){e(e=>{e.error=He(a),e.loading.statistics=!1})}}),loadMyReviews:(s=0)=>d(null,null,function*(){e(e=>{e.loading.reviews=!0,e.error=null});try{const a=yield((e=0,s=10)=>d(null,null,function*(){return(yield _e.get(`/reviews/my?page=${e}&size=${s}`)).data}))(s,10);e(e=>{e.myReviews=a.content,e.myReviewsPagination={page:a.number,totalElements:a.totalElements,totalPages:a.totalPages},e.loading.reviews=!1})}catch(a){e(e=>{e.error=He(a),e.loading.reviews=!1})}}),addAdminResponse:(s,a)=>d(null,null,function*(){e(e=>{e.loading.update=!0,e.error=null});try{const t=yield((e,s)=>d(null,null,function*(){return(yield _e.post(`/admin/reviews/${e}/response`,s)).data}))(s,{response:a});e(e=>{var a;const i=e.reviews.findIndex(e=>e.id===s);-1!==i&&(e.reviews[i]=t),(null==(a=e.currentReview)?void 0:a.id)===s&&(e.currentReview=t),e.loading.update=!1})}catch(t){throw e(e=>{e.error=He(t),e.loading.update=!1}),t}}),blockReview:s=>d(null,null,function*(){try{const a=yield(e=>d(null,null,function*(){return(yield _e.post(`/admin/reviews/${e}/block`)).data}))(s);e(e=>{var t;const i=e.reviews.findIndex(e=>e.id===s);-1!==i&&(e.reviews[i]=a),(null==(t=e.currentReview)?void 0:t.id)===s&&(e.currentReview=a)})}catch(a){throw e(e=>{e.error=He(a)}),a}}),activateReview:s=>d(null,null,function*(){try{const a=yield(e=>d(null,null,function*(){return(yield _e.post(`/admin/reviews/${e}/activate`)).data}))(s);e(e=>{var t;const i=e.reviews.findIndex(e=>e.id===s);-1!==i&&(e.reviews[i]=a),(null==(t=e.currentReview)?void 0:t.id)===s&&(e.currentReview=a)})}catch(a){throw e(e=>{e.error=He(a)}),a}}),setReviewVerified:(s,a)=>d(null,null,function*(){try{const t=yield((e,s)=>d(null,null,function*(){return(yield _e.patch(`/admin/reviews/${e}/verified`,{verified:s})).data}))(s,a);e(e=>{var a;const i=e.reviews.findIndex(e=>e.id===s);-1!==i&&(e.reviews[i]=t),(null==(a=e.currentReview)?void 0:a.id)===s&&(e.currentReview=t)})}catch(t){throw e(e=>{e.error=He(t)}),t}}),setSelectedFacility:s=>{e(e=>{e.selectedFacilityId=s})},clearCurrentReview:()=>{e(e=>{e.currentReview=null})},clearError:()=>{e(e=>{e.error=null})},resetStore:()=>{e(e=>{Object.assign(e,Ge)})},goToPage:e=>d(null,null,function*(){const{selectedFacilityId:a,currentFilter:t,currentSort:i}=s();a&&(Object.keys(t).length>0?yield s().loadFilteredReviews(a,t,i,e):yield s().loadReviews(a,e))}),goToNextPage:()=>d(null,null,function*(){const{pagination:e}=s();e.hasNext&&(yield s().goToPage(e.page+1))}),goToPreviousPage:()=>d(null,null,function*(){const{pagination:e}=s();e.hasPrevious&&(yield s().goToPage(e.page-1))})})));var De={};const Ke=[{code:"HP8",name:"ë³‘ì›",icon:O,color:"text-red-600"},{code:"PM9",name:"ì•½êµ­",icon:O,color:"text-green-600"},{code:"MT1",name:"ë§ˆíŠ¸",icon:_,color:"text-blue-600"},{code:"CS2",name:"íŽ¸ì˜ì ",icon:_,color:"text-purple-600"},{code:"CE7",name:"ì¹´íŽ˜",icon:H,color:"text-orange-600"},{code:"SW8",name:"ì§€í•˜ì² ì—­",icon:G,color:"text-indigo-600"}],Ue=({facility:e,width:s="100%",height:a="400px",level:t=3,showNearbyPlaces:i=!0,showTrafficInfo:l=!1,showControls:r=!0,onLocationChange:n,className:c=""})=>{const o=m.useRef(null),h=m.useRef(null),u=m.useRef([]),[p,g]=m.useState(!0),[j,v]=m.useState(null),[f,b]=m.useState([]),[N,w]=m.useState(null),[k,S]=m.useState(null);m.useEffect(()=>{d(null,null,function*(){try{if(g(!0),v(null),!De.REACT_APP_KAKAO_MAP_API_KEY)throw new Error("ì¹´ì¹´ì˜¤ ì§€ë„ API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");yield new Promise((e,s)=>{if(window.kakao&&window.kakao.maps)return void e(window.kakao);const a=document.createElement("script");a.src=`//dapi.kakao.com/v2/maps/sdk.js?appkey=${De.REACT_APP_KAKAO_MAP_API_KEY}&libraries=services&autoload=false`,a.async=!0,a.onload=()=>{window.kakao.maps.load(()=>{e(window.kakao)})},a.onerror=()=>{s(new Error("ì¹´ì¹´ì˜¤ ì§€ë„ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨"))},document.head.appendChild(a)});let s=e.latitude,a=e.longitude;if(!s||!a){const t=yield C(e.address);s=t.lat,a=t.lng}S({lat:s,lng:a}),R(s,a),i&&E(s,a)}catch(s){v(s.message||"ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")}finally{g(!1)}})},[e,t,i]);const C=e=>new Promise((s,a)=>{(new window.kakao.maps.services.Geocoder).addressSearch(e,(e,t)=>{if(t===window.kakao.maps.services.Status.OK){const a={lat:parseFloat(e[0].y),lng:parseFloat(e[0].x)};s(a)}else a(new Error("ì£¼ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."))})}),R=(e,s)=>{if(!o.current)return;const a={center:new window.kakao.maps.LatLng(e,s),level:t},i=new window.kakao.maps.Map(o.current,a);if(h.current=i,r){const e=new window.kakao.maps.MapTypeControl;i.addControl(e,window.kakao.maps.ControlPosition.TOPRIGHT);const s=new window.kakao.maps.ZoomControl;i.addControl(s,window.kakao.maps.ControlPosition.RIGHT)}l&&i.addOverlayMapTypeId(window.kakao.maps.MapTypeId.TRAFFIC),F(i,e,s),n&&window.kakao.maps.event.addListener(i,"center_changed",()=>{const e=i.getCenter();n(e.getLat(),e.getLng())})},F=(s,a,t)=>{const i=new window.kakao.maps.LatLng(a,t),l="data:image/svg+xml;base64,"+btoa('\n      <svg width="32" height="40" viewBox="0 0 32 40" xmlns="http://www.w3.org/2000/svg">\n        <path d="M16 0C7.2 0 0 7.2 0 16c0 16 16 24 16 24s16-8 16-24C32 7.2 24.8 0 16 0z" fill="#FF6B6B"/>\n        <circle cx="16" cy="16" r="8" fill="white"/>\n        <path d="M16 8c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 12c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4z" fill="#FF6B6B"/>\n      </svg>\n    '),r=new window.kakao.maps.Size(32,40),n={offset:new window.kakao.maps.Point(16,40)},c=new window.kakao.maps.MarkerImage(l,r,n),o=new window.kakao.maps.Marker({position:i,image:c});o.setMap(s),u.current.push(o);const d=new window.kakao.maps.InfoWindow({content:`\n        <div style="padding: 12px; font-size: 14px; max-width: 250px;">\n          <div style="font-weight: bold; margin-bottom: 4px;">${e.name}</div>\n          <div style="color: #666; margin-bottom: 4px;">${e.address}</div>\n          ${e.phone?`<div style="color: #007bff;">${e.phone}</div>`:""}\n        </div>\n      `});window.kakao.maps.event.addListener(o,"click",()=>{d.open(s,o)})},E=(e,s)=>d(null,null,function*(){if(!window.kakao.maps.services)return;const a=new window.kakao.maps.services.Places,t={location:new window.kakao.maps.LatLng(e,s),radius:1e3,sort:window.kakao.maps.services.SortBy.DISTANCE};try{const e=[];for(const s of Ke){const i=yield T(a,s.code,t);e.push(...i.slice(0,3))}b(e)}catch(i){}}),T=(e,s,a)=>new Promise((t,i)=>{e.categorySearch(s,(e,a)=>{if(a===window.kakao.maps.services.Status.OK){const a=e.map(e=>({id:e.id,name:e.place_name,address:e.address_name,latitude:parseFloat(e.y),longitude:parseFloat(e.x),phone:e.phone,category:s,distance:parseInt(e.distance)}));t(a)}else t([])},a)});return m.useEffect(()=>()=>{u.current.forEach(e=>e.setMap(null)),u.current=[]},[]),x.jsxs("div",{className:`relative ${c}`,children:[x.jsx("div",{ref:o,style:{width:s,height:a},className:"rounded-lg overflow-hidden shadow-lg"}),p&&x.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center rounded-lg",style:{width:s,height:a},children:x.jsx(Ne,{size:"lg",text:"ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})}),j&&x.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center rounded-lg",style:{width:s,height:a},children:x.jsxs("div",{className:"text-center",children:[x.jsx(y,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),x.jsx("p",{className:"text-gray-600 mb-2",children:j}),x.jsx(ue,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:"ë‹¤ì‹œ ì‹œë„"})]})}),!p&&!j&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"absolute top-4 right-4 z-10",children:x.jsxs(ue,{onClick:()=>{if(!k)return;const s=`https://map.kakao.com/link/to/${encodeURIComponent(e.name)},${k.lat},${k.lng}`;window.open(s,"_blank")},className:"bg-white shadow-lg hover:shadow-xl flex items-center space-x-2",variant:"outline",children:[x.jsx(z,{className:"h-4 w-4"}),x.jsx("span",{children:"ê¸¸ì°¾ê¸°"})]})}),i&&f.length>0&&x.jsx("div",{className:"absolute bottom-4 left-4 right-4 z-10",children:x.jsxs(xe,{className:"p-3 bg-white/95 backdrop-blur-sm",children:[x.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"ì£¼ë³€ íŽ¸ì˜ì‹œì„¤"}),x.jsx("div",{className:"flex flex-wrap gap-2",children:Ke.map(e=>{const s=f.filter(s=>s.category===e.code).length;if(0===s)return null;const a=e.icon;return x.jsxs(ue,{variant:N===e.code?"primary":"outline",size:"sm",onClick:()=>(e=>{if(!h.current)return;if(u.current.slice(1).forEach(e=>e.setMap(null)),u.current=u.current.slice(0,1),N===e)return void w(null);w(e);const s=f.filter(s=>s.category===e),a=Ke.find(s=>s.code===e);a&&s.forEach(e=>{const s=new window.kakao.maps.LatLng(e.latitude,e.longitude),t=a.color.includes("red")?"#EF4444":a.color.includes("green")?"#10B981":a.color.includes("blue")?"#3B82F6":a.color.includes("purple")?"#8B5CF6":a.color.includes("orange")?"#F59E0B":"#6366F1",i="data:image/svg+xml;base64,"+btoa(`\n        <svg width="24" height="30" viewBox="0 0 24 30" xmlns="http://www.w3.org/2000/svg">\n          <path d="M12 0C5.4 0 0 5.4 0 12c0 12 12 18 12 18s12-6 12-18C24 5.4 18.6 0 12 0z" fill="${t}"/>\n          <circle cx="12" cy="12" r="6" fill="white"/>\n        </svg>\n      `),l=new window.kakao.maps.Size(24,30),r={offset:new window.kakao.maps.Point(12,30)},n=new window.kakao.maps.MarkerImage(i,l,r),c=new window.kakao.maps.Marker({position:s,image:n});c.setMap(h.current),u.current.push(c);const o=new window.kakao.maps.InfoWindow({content:`\n          <div style="padding: 10px; font-size: 12px; max-width: 200px;">\n            <div style="font-weight: bold; margin-bottom: 2px;">${e.name}</div>\n            <div style="color: #666; margin-bottom: 2px;">${e.address}</div>\n            <div style="color: #007bff; font-size: 11px;">\n              ${e.distance?`ê±°ë¦¬: ${e.distance}m`:""}\n              ${e.phone?` | ${e.phone}`:""}\n            </div>\n          </div>\n        `});window.kakao.maps.event.addListener(c,"click",()=>{o.open(h.current,c)})})})(e.code),className:"flex items-center space-x-1",children:[x.jsx(a,{className:`h-3 w-3 ${e.color}`}),x.jsxs("span",{className:"text-xs",children:[e.name," (",s,")"]})]},e.code)})})]})})]})]})},We=()=>{const e=Se(e=>e.selectedFacility),{isDetailModalOpen:s,closeDetailModal:a,clearSelectedFacility:t,trackFacilityContact:i,trackFacilityVisit:l,openMatchingForm:r}=Se(),{reviews:n,reviewStatistics:c,loading:o,pagination:h,currentSort:u,currentFilter:f,loadReviews:b,loadReviewStatistics:N,changeSort:S,applyFilter:C,voteHelpful:R,voteNotHelpful:F,goToPage:E}=Be(),[T,$]=m.useState("overview"),[P,M]=m.useState(null),[L,O]=m.useState(0),[_,H]=m.useState(Ie.LATEST),[G,ne]=m.useState({}),[ce,oe]=m.useState(!1),[de]=m.useState([]),me=fe({isActive:s,initialFocus:"button[data-close]",returnFocus:!0}),pe=()=>{a(),setTimeout(()=>{t()},300)};m.useEffect(()=>{const a=e=>{"Escape"===e.key&&pe()};return s&&(document.addEventListener("keydown",a),document.body.style.overflow="hidden",e&&(b(e.id),N(e.id))),()=>{document.removeEventListener("keydown",a),document.body.style.overflow="unset"}},[s,e,b,N]);const ge=()=>d(null,null,function*(){if(e){M("contact");try{yield i(e.id),window.open(`tel:${e.phoneNumber}`)}catch(s){}finally{M(null)}}}),ve=()=>d(null,null,function*(){if(e){M("visit");try{yield l(e.id),alert("ë°©ë¬¸ ì˜ˆì•½ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹œì„¤ì—ì„œ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.")}catch(s){}finally{M(null)}}}),be=()=>{r()},Ne=(e,s)=>d(null,null,function*(){try{s?yield R(e):yield F(e)}catch(a){}}),we=()=>{O(e=>0===e?Ee.length-1:e-1)},ke=()=>{O(e=>e===Ee.length-1?0:e+1)};if(!s||!e)return null;const Ce=e.totalCapacity-e.currentOccupancy,Re=e.currentOccupancy/e.totalCapacity*100,Fe=e=>e?`${(e/1e4).toFixed(0)}ë§Œì›`:"ë¬¸ì˜",Ee=e.imageUrl?[e.imageUrl]:["/images/facility-placeholder-1.jpg","/images/facility-placeholder-2.jpg","/images/facility-placeholder-3.jpg"],Te=[{icon:U,label:"ë¬´ë£Œ WiFi",available:!0},{icon:W,label:"ì£¼ì°¨ìž¥",available:!0},{icon:q,label:"ì‹ë‹¹",available:!0},{icon:Y,label:"ìš´ë™ì‹œì„¤",available:!1},{icon:V,label:"CCTV",available:!0},{icon:Q,label:"24ì‹œê°„ ë³´ì•ˆ",available:!0}];return x.jsxs(je,{children:[x.jsxs(ye.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:pe,children:[x.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),x.jsxs(ye.div,{ref:me,initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full max-w-4xl max-h-[90vh] bg-white rounded-lg shadow-xl overflow-hidden",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-description",children:[x.jsxs("div",{className:"relative",children:[x.jsxs("div",{className:"relative h-64 bg-gray-200",children:[x.jsx("img",{src:Ee[L],alt:e.facilityName,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/images/facility-default.jpg"}}),Ee.length>1&&x.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:Ee.map((e,s)=>x.jsx("button",{onClick:()=>O(s),className:"w-2 h-2 rounded-full "+(s===L?"bg-white":"bg-white bg-opacity-50")},s))}),x.jsx("div",{className:"absolute top-4 left-4",children:x.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${(e=>{switch(e){case"A":return"text-green-600 bg-green-100";case"B":return"text-blue-600 bg-blue-100";case"C":return"text-yellow-600 bg-yellow-100";case"D":return"text-orange-600 bg-orange-100";case"E":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}})(e.facilityGrade)}`,children:[e.facilityGrade,"ë“±ê¸‰"]})}),x.jsx("button",{"data-close":!0,onClick:pe,className:"absolute top-4 right-4 w-8 h-8 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-black","aria-label":"ëª¨ë‹¬ ë‹«ê¸°",children:x.jsx(w,{className:"w-5 h-5","aria-hidden":"true"})})]}),x.jsxs("div",{className:"p-6 border-b",children:[x.jsxs("div",{className:"flex justify-between items-start mb-4",children:[x.jsxs("div",{children:[x.jsx("h1",{id:"modal-title",className:"text-2xl font-bold text-gray-900 mb-2",children:e.facilityName}),x.jsxs("p",{id:"modal-description",className:"sr-only",children:[e.facilityType," ì‹œì„¤ì˜ ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ì—°ë½, ë°©ë¬¸ ì˜ˆì•½, ë§¤ì¹­ ì‹ ì²­ì„ í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤."]}),x.jsx("p",{className:"text-gray-600 mb-2",children:e.facilityType}),x.jsxs("div",{className:"flex items-center text-gray-500",children:[x.jsx(y,{className:"w-4 h-4 mr-1"}),x.jsx("span",{children:e.address})]})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"ì›” ê¸°ë³¸ë£Œ"}),x.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Fe(e.monthlyBasicFee)})]})]}),x.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-sm text-gray-600",children:"ì´ ì •ì›"}),x.jsxs("div",{className:"text-lg font-semibold",children:[e.totalCapacity,"ëª…"]})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-sm text-gray-600",children:"í˜„ìž¬ ìž…ì†Œ"}),x.jsxs("div",{className:"text-lg font-semibold",children:[e.currentOccupancy,"ëª…"]})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-sm text-gray-600",children:"ìž…ì†Œ ê°€ëŠ¥"}),x.jsx("div",{className:"text-lg font-semibold "+(Ce>0?"text-green-600":"text-red-600"),children:Ce>0?`${Ce}ëª…`:"ëŒ€ê¸°"})]})]}),x.jsxs("div",{className:"mb-4",children:[x.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[x.jsx("span",{children:"ìž…ì†Œìœ¨"}),x.jsxs("span",{children:[Math.round(Re),"%"]})]}),x.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:x.jsx("div",{className:"h-2 rounded-full "+(Re>=90?"bg-red-500":Re>=70?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(Re,100)}%`}})})]}),x.jsxs("div",{className:"flex space-x-3",children:[x.jsxs(ue,{onClick:ge,disabled:"contact"===P,className:"flex-1",children:["contact"===P?x.jsx(ye.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:x.jsx(j,{className:"w-4 h-4 mr-2"})}):x.jsx(j,{className:"w-4 h-4 mr-2"}),"ì—°ë½í•˜ê¸°"]}),x.jsxs(ue,{variant:"outline",onClick:ve,disabled:"visit"===P,className:"flex-1",children:["visit"===P?x.jsx(ye.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:x.jsx(v,{className:"w-4 h-4 mr-2"})}):x.jsx(v,{className:"w-4 h-4 mr-2"}),"ë°©ë¬¸ ì˜ˆì•½"]}),x.jsxs(ue,{variant:"outline",onClick:be,className:"flex-1",children:[x.jsx(k,{className:"w-4 h-4 mr-2"}),"ë§¤ì¹­ ì‹ ì²­"]})]})]})]}),x.jsx("div",{className:"border-b",children:x.jsx("nav",{className:"flex px-6 overflow-x-auto",role:"tablist","aria-label":"ì‹œì„¤ ì •ë³´ íƒ­",children:[{key:"overview",label:"ê°œìš”",icon:B},{key:"services",label:"ì„œë¹„ìŠ¤",icon:D},{key:"location",label:"ìœ„ì¹˜",icon:y},{key:"reviews",label:"ë¦¬ë·°",icon:p,badge:null==c?void 0:c.totalCount},{key:"photos",label:"ì‚¬ì§„",icon:K,badge:Ee.length}].map(({key:e,label:s,icon:a,badge:t})=>x.jsxs("button",{onClick:()=>$(e),className:"flex items-center px-4 py-3 border-b-2 font-medium text-sm focus:outline-none focus:ring-2 focus:ring-elderberry-500 focus:ring-offset-2 "+(T===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),role:"tab","aria-selected":T===e,"aria-controls":`tabpanel-${e}`,id:`tab-${e}`,children:[x.jsx(a,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),x.jsx("span",{children:s}),t&&t>0&&x.jsx("span",{className:"ml-1 bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded-full",children:t})]},e))})}),x.jsx("div",{className:"flex-1 overflow-y-auto max-h-96",children:x.jsxs(je,{mode:"wait",children:["overview"===T&&x.jsxs(ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6",role:"tabpanel",id:"tabpanel-overview","aria-labelledby":"tab-overview",children:[x.jsxs("div",{className:"mb-6",children:[x.jsx("h3",{className:"text-lg font-semibold mb-3",children:"ì‹œì„¤ ì†Œê°œ"}),x.jsx("p",{className:"text-gray-700 leading-relaxed",children:e.description||`${e.facilityName}ì€(ëŠ”) ${e.facilityType}ë¡œì„œ ì „ë¬¸ì ì¸ ëŒë´„ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. \n                        ìˆ™ë ¨ëœ ì „ë¬¸ ì¸ë ¥ê³¼ ì²´ê³„ì ì¸ ì¼€ì–´ í”„ë¡œê·¸ëž¨ì„ í†µí•´ ìž…ì†Œìžë¶„ë“¤ì˜ ê±´ê°•í•˜ê³  ì•ˆì „í•œ ìƒí™œì„ ì§€ì›í•˜ê³  ìžˆìŠµë‹ˆë‹¤.`})]}),e.specialties&&e.specialties.length>0&&x.jsxs("div",{className:"mb-6",children:[x.jsx("h3",{className:"text-lg font-semibold mb-3",children:"ì „ë¬¸ ì„œë¹„ìŠ¤"}),x.jsx("div",{className:"flex flex-wrap gap-2",children:e.specialties.map(e=>x.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm",children:e},e))})]}),x.jsxs("div",{className:"mb-6",children:[x.jsx("h3",{className:"text-lg font-semibold mb-3",children:"íŽ¸ì˜ì‹œì„¤"}),x.jsx("div",{className:"grid grid-cols-2 gap-3",children:Te.map(({icon:e,label:s,available:a})=>x.jsxs("div",{className:"flex items-center space-x-2 "+(a?"text-gray-900":"text-gray-400"),children:[x.jsx(e,{className:"w-4 h-4"}),x.jsx("span",{className:"text-sm",children:s}),a?x.jsx(A,{className:"w-4 h-4 text-green-500"}):x.jsx(w,{className:"w-4 h-4 text-gray-400"})]},s))})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold mb-3",children:"ìš´ì˜ ì •ë³´"}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx(J,{className:"w-4 h-4 mr-2 text-gray-400"}),x.jsxs("span",{children:["ìš´ì˜ì‹œê°„: ",e.operatingHours||"24ì‹œê°„ ìš´ì˜"]})]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx(j,{className:"w-4 h-4 mr-2 text-gray-400"}),x.jsxs("span",{children:["ì—°ë½ì²˜: ",e.phoneNumber]})]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx(g,{className:"w-4 h-4 mr-2 text-gray-400"}),x.jsxs("span",{children:["ì •ì›: ",e.totalCapacity,"ëª…"]})]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx(Z,{className:"w-4 h-4 mr-2 text-gray-400"}),x.jsxs("span",{children:["ë“±ê¸‰: ",e.facilityGrade,"ë“±ê¸‰"]})]})]})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold mb-3",children:"ë¹„ìš© ì •ë³´"}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-gray-600",children:"ì›” ê¸°ë³¸ë£Œ"}),x.jsx("span",{className:"font-semibold",children:Fe(e.monthlyBasicFee)})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-gray-600",children:"ì‹ë¹„"}),x.jsx("span",{className:"text-gray-500",children:"ë³„ë„ ë¬¸ì˜"})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-gray-600",children:"ê°„ë³‘ë¹„"}),x.jsx("span",{className:"text-gray-500",children:"ë“±ê¸‰ë³„ ìƒì´"})]}),x.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"* ì •í™•í•œ ë¹„ìš©ì€ ìƒë‹´ì„ í†µí•´ í™•ì¸í•˜ì‹¤ ìˆ˜ ìžˆìŠµë‹ˆë‹¤."})]})]})]}),x.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg",children:[x.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"ë¹ ë¥¸ ì—°ë½ ë° ì˜ˆì•½"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[x.jsxs(ue,{onClick:ge,disabled:"contact"===P,className:"flex items-center justify-center space-x-2",children:[x.jsx(j,{className:"w-4 h-4"}),x.jsx("span",{children:"ì „í™” ìƒë‹´"})]}),x.jsxs(ue,{variant:"outline",onClick:ve,disabled:"visit"===P,className:"flex items-center justify-center space-x-2",children:[x.jsx(v,{className:"w-4 h-4"}),x.jsx("span",{children:"ë°©ë¬¸ ì˜ˆì•½"})]}),x.jsxs(ue,{variant:"outline",onClick:be,className:"flex items-center justify-center space-x-2",children:[x.jsx(k,{className:"w-4 h-4"}),x.jsx("span",{children:"ë§¤ì¹­ ì‹ ì²­"})]})]}),x.jsxs("div",{className:"mt-3 text-sm text-gray-600 text-center",children:[x.jsx("p",{children:"ðŸ“ž ìƒë‹´ ê°€ëŠ¥ ì‹œê°„: í‰ì¼ 09:00 ~ 18:00"}),x.jsx("p",{children:"ðŸ¥ ë°©ë¬¸ ìƒë‹´ ì‹œ ì‚¬ì „ ì˜ˆì•½ì„ ê¶Œìž¥í•©ë‹ˆë‹¤."})]})]})]},"overview"),"services"===T&&x.jsxs(ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6",children:[x.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ì œê³µ ì„œë¹„ìŠ¤"}),x.jsxs("div",{className:"mb-6",children:[x.jsx("h4",{className:"font-medium mb-3",children:"ì¼€ì–´ ë“±ê¸‰ë³„ ì„œë¹„ìŠ¤"}),x.jsx("div",{className:"space-y-2",children:e.availableCareGrades.map(e=>x.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded",children:[x.jsxs("span",{children:[e,"ë“±ê¸‰ ì¼€ì–´"]}),x.jsx(A,{className:"w-4 h-4 text-green-500"})]},e))})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsx(xe,{children:x.jsxs(he,{className:"p-4",children:[x.jsx("h5",{className:"font-medium mb-2",children:"ì¼ìƒìƒí™œ ì§€ì›"}),x.jsx("p",{className:"text-sm text-gray-600",children:"ì‹ì‚¬, ëª©ìš•, ë°°ì„¤, ì´ë™ ë“± ì¼ìƒìƒí™œ ì „ë°˜ì— ëŒ€í•œ ì „ë¬¸ì ì¸ ëŒë´„ ì„œë¹„ìŠ¤"})]})}),x.jsx(xe,{children:x.jsxs(he,{className:"p-4",children:[x.jsx("h5",{className:"font-medium mb-2",children:"ê±´ê°• ê´€ë¦¬"}),x.jsx("p",{className:"text-sm text-gray-600",children:"ì •ê¸° ê±´ê°•ê²€ì§„, íˆ¬ì•½ ê´€ë¦¬, ì‘ê¸‰ìƒí™© ëŒ€ì‘ ë“± ì²´ê³„ì ì¸ ê±´ê°• ê´€ë¦¬"})]})}),x.jsx(xe,{children:x.jsxs(he,{className:"p-4",children:[x.jsx("h5",{className:"font-medium mb-2",children:"ì—¬ê°€ í™œë™"}),x.jsx("p",{className:"text-sm text-gray-600",children:"ë‹¤ì–‘í•œ í”„ë¡œê·¸ëž¨ê³¼ ì—¬ê°€ í™œë™ì„ í†µí•œ ì •ì„œì  ì§€ì› ë° ì‚¬íšŒì  êµë¥˜"})]})})]})]},"services"),"location"===T&&x.jsxs(ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6 space-y-6",children:[x.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ìœ„ì¹˜ ì •ë³´"}),x.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[x.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[x.jsx(y,{className:"w-4 h-4 mr-2 text-blue-600"}),"ì§€ë„"]}),x.jsx(Ue,{facility:{id:e.id,name:e.facilityName,address:e.address,latitude:e.latitude||void 0,longitude:e.longitude||void 0,phone:e.phoneNumber},height:"350px",showNearbyPlaces:!0,showControls:!0,className:"rounded-lg overflow-hidden"})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center mb-2",children:[x.jsx(y,{className:"w-4 h-4 mr-2 text-gray-400"}),x.jsx("span",{className:"font-medium",children:"ì£¼ì†Œ"})]}),x.jsx("p",{className:"text-gray-700 ml-6",children:e.address})]}),e.latitude&&e.longitude&&x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center mb-2",children:[x.jsx(z,{className:"w-4 h-4 mr-2 text-gray-400"}),x.jsx("span",{className:"font-medium",children:"ì¢Œí‘œ"})]}),x.jsxs("p",{className:"text-gray-700 ml-6",children:["ìœ„ë„: ",e.latitude,", ê²½ë„: ",e.longitude]})]}),x.jsxs("div",{className:"flex space-x-3",children:[x.jsxs(ue,{onClick:()=>{if((null==e?void 0:e.latitude)&&(null==e?void 0:e.longitude)){const s=`https://map.kakao.com/link/map/${e.facilityName},${e.latitude},${e.longitude}`;window.open(s,"_blank")}},variant:"outline",className:"flex-1",children:[x.jsx(y,{className:"w-4 h-4 mr-2"}),"ì¹´ì¹´ì˜¤ë§µì—ì„œ ë³´ê¸°"]}),x.jsxs(ue,{onClick:()=>{const s=`https://map.naver.com/v5/search/${encodeURIComponent(e.address)}`;window.open(s,"_blank")},variant:"outline",className:"flex-1",children:[x.jsx(z,{className:"w-4 h-4 mr-2"}),"ë„¤ì´ë²„ì§€ë„ì—ì„œ ë³´ê¸°"]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-medium mb-3",children:"êµí†µ ì •ë³´"}),x.jsxs("div",{className:"space-y-2 text-sm",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx(W,{className:"w-4 h-4 mr-2 text-gray-400"}),x.jsx("span",{children:"ì£¼ì°¨ìž¥ ì´ìš© ê°€ëŠ¥"})]}),x.jsx("div",{className:"text-gray-600 ml-6",children:"ëŒ€ì¤‘êµí†µ ì´ìš© ì‹œ ê°€ìž¥ ê°€ê¹Œìš´ ì§€í•˜ì² ì—­ì—ì„œ ë„ë³´ 10ë¶„ ê±°ë¦¬"})]})]}),de.length>0&&x.jsxs("div",{children:[x.jsx("h4",{className:"font-medium mb-3",children:"ì£¼ë³€ íŽ¸ì˜ì‹œì„¤"}),x.jsx("div",{className:"grid grid-cols-2 gap-3",children:de.slice(0,6).map((e,s)=>x.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[x.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),x.jsx("span",{className:"text-gray-700",children:e.name}),x.jsxs("span",{className:"text-gray-500 text-xs",children:["(",e.distance,"m)"]})]},s))})]})]})]},"location"),"reviews"===T&&x.jsxs(ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6 space-y-6",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h3",{className:"text-lg font-semibold",children:"ì´ìš© í›„ê¸°"}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsxs(ue,{variant:"outline",size:"sm",children:[x.jsx(X,{className:"w-4 h-4 mr-1"}),"í•„í„°"]}),x.jsxs("select",{value:_,onChange:s=>{return a=s.target.value,d(null,null,function*(){H(a),e&&(yield S(a))});var a},className:"px-3 py-1 border rounded text-sm",children:[x.jsx("option",{value:Ie.LATEST,children:"ìµœì‹ ìˆœ"}),x.jsx("option",{value:Ie.HIGHEST_RATING,children:"í‰ì  ë†’ì€ìˆœ"}),x.jsx("option",{value:Ie.LOWEST_RATING,children:"í‰ì  ë‚®ì€ìˆœ"}),x.jsx("option",{value:Ie.MOST_HELPFUL,children:"ë„ì›€ë¨ìˆœ"})]})]})]}),c&&x.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:c.averageRating.toFixed(1)}),x.jsx("div",{className:"flex items-center justify-center mb-2",children:Array.from({length:5}).map((e,s)=>x.jsx(p,{className:"w-5 h-5 "+(s<Math.round(c.averageRating)?"text-yellow-400 fill-current":"text-gray-300")},s))}),x.jsxs("div",{className:"text-sm text-gray-600",children:[c.totalCount,"ê°œì˜ ë¦¬ë·°"]}),x.jsxs("div",{className:"text-sm text-blue-600 font-medium mt-2",children:["ì¶”ì²œë¥  ",c.recommendationPercentage,"%"]})]}),x.jsx("div",{className:"space-y-2",children:Object.entries(c.ratingDistribution).sort(([e],[s])=>Number(s)-Number(e)).map(([e,s])=>x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsxs("span",{className:"text-sm w-4",children:[e,"ì "]}),x.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:x.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:(c.totalCount>0?s/c.totalCount*100:0)+"%"}})}),x.jsx("span",{className:"text-sm text-gray-600 w-8",children:s})]},e))})]}),x.jsxs("div",{className:"mt-4 pt-4 border-t border-blue-100",children:[x.jsx("h4",{className:"font-medium mb-3 text-gray-700",children:"ì¹´í…Œê³ ë¦¬ë³„ í‰ì "}),x.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:Object.entries(c.categoryRatings).map(([e,s])=>x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"serviceQuality"===e?"ì„œë¹„ìŠ¤":"facility"===e?"ì‹œì„¤":"staff"===e?"ì§ì›":"price"===e?"ê°€ê²©":"accessibility"===e?"ì ‘ê·¼ì„±":e}),x.jsx("div",{className:"text-lg font-semibold text-blue-600",children:s>0?s.toFixed(1):"-"})]},e))})]})]}),x.jsx("div",{className:"space-y-4",children:o.reviews?x.jsxs("div",{className:"text-center py-8",children:[x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),x.jsx("p",{className:"mt-2 text-gray-600",children:"ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]}):0===n.length?x.jsxs("div",{className:"text-center py-8 text-gray-500",children:[x.jsx(ee,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),x.jsx("p",{children:"ì•„ì§ ë“±ë¡ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤."}),x.jsx("p",{className:"text-sm mt-1",children:"ì²« ë²ˆì§¸ ë¦¬ë·°ë¥¼ ìž‘ì„±í•´ë³´ì„¸ìš”!"})]}):n.map(e=>x.jsx(xe,{className:"hover:shadow-md transition-shadow",children:x.jsxs(he,{className:"p-4",children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:x.jsx("span",{className:"text-sm font-medium text-blue-600",children:e.reviewer.name.charAt(0)})}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"font-medium text-gray-900",children:e.anonymous?"ìµëª…":e.reviewer.name}),e.verified&&x.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-800 text-xs rounded-full",children:"ì¸ì¦ë¨"})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("div",{className:"flex items-center",children:Array.from({length:5}).map((s,a)=>x.jsx(p,{className:"w-4 h-4 "+(a<e.overallRating?"text-yellow-400 fill-current":"text-gray-300")},a))}),x.jsx("span",{className:"text-sm text-gray-500",children:new Date(e.createdDate).toLocaleDateString()})]})]})]}),x.jsx(ue,{variant:"ghost",size:"sm",children:x.jsx(se,{className:"w-4 h-4"})})]}),e.title&&x.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:e.title}),x.jsx("p",{className:"text-gray-700 mb-3 leading-relaxed",children:e.content}),e.tags.length>0&&x.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:e.tags.map((e,s)=>x.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:e},s))}),e.imageUrls.length>0&&x.jsxs("div",{className:"flex space-x-2 mb-3",children:[e.imageUrls.slice(0,3).map((e,s)=>x.jsx("img",{src:e,alt:`ë¦¬ë·° ì´ë¯¸ì§€ ${s+1}`,className:"w-16 h-16 object-cover rounded-lg cursor-pointer hover:opacity-80",onClick:()=>{}},s)),e.imageUrls.length>3&&x.jsxs("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center text-gray-500 text-xs",children:["+",e.imageUrls.length-3]})]}),x.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsxs("button",{onClick:()=>Ne(e.id,!0),className:"flex items-center space-x-1 text-sm text-gray-500 hover:text-blue-600",disabled:o.vote,children:[x.jsx(ae,{className:"w-4 h-4"}),x.jsxs("span",{children:["ë„ì›€ë¨ ",e.helpfulCount]})]}),x.jsxs("button",{onClick:()=>Ne(e.id,!1),className:"flex items-center space-x-1 text-sm text-gray-500 hover:text-red-600",disabled:o.vote,children:[x.jsx(te,{className:"w-4 h-4"}),x.jsx("span",{children:e.notHelpfulCount})]}),x.jsxs("button",{className:"flex items-center space-x-1 text-sm text-gray-500 hover:text-red-600",children:[x.jsx(ie,{className:"w-4 h-4"}),x.jsx("span",{children:"ì‹ ê³ "})]})]}),e.recommended&&x.jsx("span",{className:"text-sm text-green-600 font-medium",children:"ì¶”ì²œí•©ë‹ˆë‹¤"})]}),e.adminResponse&&x.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400",children:[x.jsxs("div",{className:"flex items-center mb-2",children:[x.jsx(I,{className:"w-4 h-4 text-blue-600 mr-2"}),x.jsx("span",{className:"text-sm font-medium text-blue-900",children:"ì‹œì„¤ ê´€ë¦¬ìž ë‹µë³€"}),e.adminResponseDate&&x.jsx("span",{className:"text-xs text-blue-600 ml-auto",children:new Date(e.adminResponseDate).toLocaleDateString()})]}),x.jsx("p",{className:"text-sm text-blue-800",children:e.adminResponse})]})]})},e.id))}),h.totalPages>1&&x.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[x.jsx(ue,{variant:"outline",size:"sm",onClick:()=>E(h.page-1),disabled:!h.hasPrevious,children:x.jsx(le,{className:"w-4 h-4"})}),x.jsxs("span",{className:"text-sm text-gray-600",children:[h.page+1," / ",h.totalPages]}),x.jsx(ue,{variant:"outline",size:"sm",onClick:()=>E(h.page+1),disabled:!h.hasNext,children:x.jsx(re,{className:"w-4 h-4"})})]}),x.jsx("div",{className:"text-center pt-4 border-t",children:x.jsxs(ue,{className:"px-6",children:[x.jsx(p,{className:"w-4 h-4 mr-2"}),"ë¦¬ë·° ìž‘ì„±í•˜ê¸°"]})})]},"reviews"),"photos"===T&&x.jsxs(ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsx("h3",{className:"text-lg font-semibold",children:"ì‹œì„¤ ì‚¬ì§„"}),x.jsxs("span",{className:"text-sm text-gray-600",children:["ì´ ",Ee.length,"ìž¥"]})]}),x.jsxs("div",{className:"relative mb-6",children:[x.jsx("div",{className:"aspect-video bg-gray-200 rounded-lg overflow-hidden",children:x.jsx("img",{src:Ee[L],alt:`${e.facilityName} ì‚¬ì§„ ${L+1}`,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/images/facility-default.jpg"}})}),Ee.length>1&&x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:we,className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full flex items-center justify-center shadow-lg transition-all",children:x.jsx(le,{className:"w-5 h-5 text-gray-700"})}),x.jsx("button",{onClick:ke,className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full flex items-center justify-center shadow-lg transition-all",children:x.jsx(re,{className:"w-5 h-5 text-gray-700"})}),x.jsxs("div",{className:"absolute bottom-4 right-4 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-sm",children:[L+1," / ",Ee.length]})]}),x.jsx("button",{onClick:()=>oe(!0),className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-colors",children:x.jsx(K,{className:"w-5 h-5"})})]}),x.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-3",children:[Ee.map((s,a)=>x.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg overflow-hidden cursor-pointer transition-all "+(a===L?"ring-2 ring-blue-500 ring-offset-2":"hover:opacity-80"),onClick:()=>O(a),children:x.jsx("img",{src:s,alt:`${e.facilityName} ì¸ë„¤ì¼ ${a+1}`,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/images/facility-default.jpg"}})},a)),Array.from({length:Math.max(0,12-Ee.length)}).map((e,s)=>x.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg flex items-center justify-center",children:x.jsx(K,{className:"w-6 h-6 text-gray-400"})},`placeholder-${s}`))]}),x.jsxs("div",{className:"mt-6 space-y-4",children:[x.jsx("h4",{className:"font-medium text-gray-900",children:"ì‚¬ì§„ ì¹´í…Œê³ ë¦¬"}),x.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{name:"ì™¸ê´€",count:3,icon:B},{name:"ë‚´ë¶€ì‹œì„¤",count:5,icon:Y},{name:"ê°ì‹¤",count:4,icon:g},{name:"íŽ¸ì˜ì‹œì„¤",count:2,icon:U}].map(e=>x.jsx(xe,{className:"cursor-pointer hover:shadow-md transition-shadow",children:x.jsxs(he,{className:"p-4 text-center",children:[x.jsx(e.icon,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),x.jsx("h5",{className:"font-medium text-gray-900",children:e.name}),x.jsxs("p",{className:"text-sm text-gray-600",children:[e.count,"ìž¥"]})]})},e.name))})]}),x.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[x.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"ì‚¬ì§„ ì •ë³´"}),x.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[x.jsx("p",{children:"â€¢ ëª¨ë“  ì‚¬ì§„ì€ ì‹¤ì œ ì‹œì„¤ì„ ì´¬ì˜í•œ ê²ƒìž…ë‹ˆë‹¤."}),x.jsx("p",{children:"â€¢ ì‚¬ì§„ì€ ì •ê¸°ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤."}),x.jsx("p",{children:"â€¢ ê¶ê¸ˆí•œ ë¶€ë¶„ì´ ìžˆìœ¼ì‹œë©´ ì‹œì„¤ì— ì§ì ‘ ë¬¸ì˜í•´ì£¼ì„¸ìš”."})]})]})]},"photos")]})})]})]}),ce&&x.jsx(ye.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-90",onClick:()=>oe(!1),children:x.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[x.jsx("img",{src:Ee[L],alt:`${e.facilityName} ì‚¬ì§„ ${L+1}`,className:"max-w-full max-h-full object-contain",onClick:e=>e.stopPropagation()}),x.jsx("button",{onClick:()=>oe(!1),className:"absolute top-4 right-4 w-12 h-12 bg-white bg-opacity-20 hover:bg-opacity-30 text-white rounded-full flex items-center justify-center",children:x.jsx(w,{className:"w-6 h-6"})}),Ee.length>1&&x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:we,className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-white bg-opacity-20 hover:bg-opacity-30 text-white rounded-full flex items-center justify-center",children:x.jsx(le,{className:"w-6 h-6"})}),x.jsx("button",{onClick:ke,className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-white bg-opacity-20 hover:bg-opacity-30 text-white rounded-full flex items-center justify-center",children:x.jsx(re,{className:"w-6 h-6"})}),x.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-50 text-white px-4 py-2 rounded-full text-sm",children:[L+1," / ",Ee.length]})]})]})})]})},qe=Object.freeze(Object.defineProperty({__proto__:null,default:({memberId:e,coordinatorId:s,showRecommendations:a=!0})=>{const t=Se(e=>e.searchResults),{isSearching:i,isLoadingRecommendations:l}=Se(e=>({isSearching:e.isSearching,isLoadingRecommendations:e.isLoadingRecommendations,isLoadingHistory:e.isLoadingHistory})),{searchError:r,recommendationError:c}=Se(e=>({searchError:e.searchError,recommendationError:e.recommendationError})),{recommendations:o,searchFilters:h,isDetailModalOpen:u,isRecommendationModalOpen:p,searchFacilities:g,getRecommendations:y,updateSearchFilters:j,clearSearchResults:v,clearRecommendations:f,openRecommendationModal:w,closeRecommendationModal:k,clearAllErrors:S}=Se(),[C,F]=m.useState("list"),[E,T]=m.useState(!1),[$,P]=m.useState(""),[M,A]=m.useState("search");m.useEffect(()=>(S(),a&&e&&(A("recommendations"),z()),()=>{v(),f()}),[e,a]);const I=()=>d(null,null,function*(){if(!$.trim()&&0===Object.keys(h).length)return;const e=n(n({},h),$&&{region:$});yield g(e),A("search")}),z=()=>d(null,null,function*(){e&&(yield y(e,s))});return x.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:x.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[x.jsxs("div",{className:"mb-8",children:[x.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"ì‹œì„¤ ê²€ìƒ‰ ë° ì¶”ì²œ"}),x.jsx("p",{className:"text-gray-600",children:"ë§žì¶¤í˜• ìš”ì–‘ ì‹œì„¤ì„ ì°¾ì•„ë³´ì„¸ìš”. AI ê¸°ë°˜ ì¶”ì²œìœ¼ë¡œ ìµœì ì˜ ì‹œì„¤ì„ ì œì•ˆí•´ë“œë¦½ë‹ˆë‹¤."})]}),x.jsx("div",{className:"mb-6",children:x.jsx("div",{className:"border-b border-gray-200",children:x.jsxs("nav",{className:"-mb-px flex space-x-8",children:[x.jsxs("button",{onClick:()=>A("search"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("search"===M?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[x.jsx(N,{className:"w-4 h-4 inline mr-2"}),"ì‹œì„¤ ê²€ìƒ‰"]}),a&&x.jsxs("button",{onClick:()=>{A("recommendations"),e&&z()},className:"py-2 px-1 border-b-2 font-medium text-sm "+("recommendations"===M?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[x.jsx(R,{className:"w-4 h-4 inline mr-2"}),"ë§žì¶¤ ì¶”ì²œ",o.length>0&&x.jsx("span",{className:"ml-2 bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full",children:o.length})]})]})})}),x.jsxs(je,{mode:"wait",children:["search"===M&&x.jsxs(ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[x.jsx(xe,{className:"mb-6",children:x.jsxs(he,{className:"p-6",children:[x.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[x.jsx("div",{className:"flex-1",children:x.jsxs("div",{className:"relative",children:[x.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),x.jsx("input",{type:"text",placeholder:"ì§€ì—­ëª…ì„ ìž…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì„œìš¸ì‹œ ê°•ë‚¨êµ¬)",value:$,onChange:e=>{P(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&I()},className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),x.jsx(ue,{onClick:I,disabled:i,className:"px-8 py-3",children:i?x.jsxs(x.Fragment,{children:[x.jsx(b,{className:"w-4 h-4 mr-2 animate-spin"}),"ê²€ìƒ‰ ì¤‘..."]}):x.jsxs(x.Fragment,{children:[x.jsx(N,{className:"w-4 h-4 mr-2"}),"ê²€ìƒ‰"]})}),x.jsxs(ue,{variant:"outline",onClick:()=>T(!E),className:"px-4 py-3",children:[x.jsx(X,{className:"w-4 h-4 mr-2"}),"í•„í„°"]})]}),x.jsx(je,{children:E&&x.jsx(ye.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:x.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:x.jsx(Ae,{filters:h,onFiltersChange:e=>{j(e),"search"===M&&setTimeout(()=>{I()},500)}})})})})]})}),r&&x.jsx(ye.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6",children:x.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:x.jsxs("div",{className:"flex items-center",children:[x.jsx(L,{className:"w-5 h-5 text-red-500 mr-2"}),x.jsx("span",{className:"text-red-700",children:r})]})})}),t.length>0&&x.jsxs("div",{className:"flex justify-between items-center mb-6",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"ê²€ìƒ‰ ê²°ê³¼"}),x.jsxs("p",{className:"text-gray-600",children:["ì´ ",t.length,"ê°œì˜ ì‹œì„¤ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤."]})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx(ue,{variant:"list"===C?"default":"outline",size:"sm",onClick:()=>F("list"),children:x.jsx(ne,{className:"w-4 h-4"})}),x.jsx(ue,{variant:"grid"===C?"default":"outline",size:"sm",onClick:()=>F("grid"),children:x.jsx(ce,{className:"w-4 h-4"})})]})]}),x.jsx(Re,{facilities:t,viewMode:C,isLoading:i,emptyMessage:"ê²€ìƒ‰ ì¡°ê±´ì— ë§žëŠ” ì‹œì„¤ì´ ì—†ìŠµë‹ˆë‹¤."})]},"search"),"recommendations"===M&&x.jsxs(ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[c&&x.jsx(ye.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6",children:x.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:x.jsxs("div",{className:"flex items-center",children:[x.jsx(L,{className:"w-5 h-5 text-red-500 mr-2"}),x.jsx("span",{className:"text-red-700",children:c})]})})}),x.jsx(Le,{recommendations:o,isLoading:l,onRefresh:z,memberId:e})]},"recommendations")]}),x.jsx(We,{})]})})}},Symbol.toStringTag,{value:"Module"}));export{qe as F,Ne as L,fe as a,Be as b,be as u};
