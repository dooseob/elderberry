var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,r,s)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,i=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))n.call(t,r)&&l(e,r,t[r]);return e},o=(e,s)=>t(e,r(s)),c=(e,t)=>{var r={};for(var l in e)a.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&s)for(var l of s(e))t.indexOf(l)<0&&n.call(e,l)&&(r[l]=e[l]);return r},d=(e,t,r)=>new Promise((s,a)=>{var n=e=>{try{i(r.next(e))}catch(t){a(t)}},l=e=>{try{i(r.throw(e))}catch(t){a(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(n,l);i((r=r.apply(e,t)).next())});import{c as m,r as u,j as h,L as p,u as x,a as g,P as y,M as v,C as f,T as b,S as j,F as N,b as T,E as w,d as E,e as C,A as k,f as S,g as R,h as I,i as L,k as O,l as P,m as A,B as D,n as M,o as _,D as $,p as H,q as U,R as B,s as F,X as K,U as V,I as z,t as G,v as W}from"./react-vendor-3vt79Rze.js";import{m as J,A as q}from"./ui-libs-CPaKlxPe.js";import{a as Y,c as Q}from"./utils-Cch7O-NE.js";import{p as Z}from"./state-management-DvPYDz8O.js";import{t as X,c as ee}from"./vendor-BkdLQwpK.js";function te(e){return"object"==typeof e&&null!==e&&"message"in e&&"code"in e&&"status"in e&&"timestamp"in e&&"path"in e}function re(e){return e instanceof Error&&"code"in e&&["NETWORK_ERROR","TIMEOUT_ERROR","CONNECTION_ERROR"].includes(e.code)}function se(e){return te(e)&&["UNAUTHORIZED","FORBIDDEN","TOKEN_EXPIRED","INVALID_CREDENTIALS"].includes(e.code)}function ae(e){return te(e)&&["VALIDATION_FAILED","RESOURCE_NOT_FOUND","BUSINESS_RULE_VIOLATION"].includes(e.code)}function ne(e){return te(e)&&["INTERNAL_ERROR","SERVICE_UNAVAILABLE","DATABASE_ERROR"].includes(e.code)}function le(e,t){if(te(e)||re(e))return e;if(e instanceof Error){return{name:e.name,message:e.message,code:"NETWORK_ERROR",stack:e.stack}}if("string"==typeof e){return{name:"Error",message:e,code:"NETWORK_ERROR"}}if("object"==typeof e&&null!==e){const r=e;if("response"in r&&"object"==typeof r.response&&null!==r.response){const e=r.response;if("data"in e&&"object"==typeof e.data&&null!==e.data){const r=e.data;return{message:r.message||"알 수 없는 오류가 발생했습니다.",code:r.code||"UNKNOWN_ERROR",status:e.status||500,timestamp:r.timestamp||(new Date).toISOString(),path:r.path||(null==t?void 0:t.route)||"",details:r.details||{}}}}return{message:r.message||"알 수 없는 오류가 발생했습니다.",code:r.code||"UNKNOWN_ERROR",status:r.status||500,timestamp:(new Date).toISOString(),path:(null==t?void 0:t.route)||"",details:r}}return{message:"알 수 없는 오류가 발생했습니다.",code:"UNKNOWN_ERROR",status:500,timestamp:(new Date).toISOString(),path:(null==t?void 0:t.route)||""}}function ie(e,t){const r=function(e){return re(e)?"NETWORK":se(e)?"AUTH":ae(e)?"BUSINESS":ne(e)?"SYSTEM":te(e)?"VALIDATION":"UNKNOWN"}(e),s=function(e){return se(e)?"UNAUTHORIZED"===e.code?"HIGH":"MEDIUM":ne(e)?"CRITICAL":re(e)?"MEDIUM":ae(e)?"LOW":"MEDIUM"}(e);return{category:r,severity:s,message:e.message,details:"details"in e?e.details:void 0,timestamp:new Date,userMessage:oe(e)}}function oe(e){if(se(e))switch(e.code){case"UNAUTHORIZED":return"로그인이 필요합니다.";case"FORBIDDEN":return"접근 권한이 없습니다.";case"TOKEN_EXPIRED":return"세션이 만료되었습니다. 다시 로그인해주세요.";case"INVALID_CREDENTIALS":return"이메일 또는 비밀번호가 올바르지 않습니다.";default:return"인증 오류가 발생했습니다."}if(re(e))switch(e.code){case"NETWORK_ERROR":return"네트워크 연결을 확인해주세요.";case"TIMEOUT_ERROR":return"요청 시간이 초과되었습니다. 잠시 후 다시 시도해주세요.";case"CONNECTION_ERROR":return"서버에 연결할 수 없습니다.";default:return"네트워크 오류가 발생했습니다."}if(ae(e))switch(e.code){case"VALIDATION_FAILED":return"입력 정보를 확인해주세요.";case"RESOURCE_NOT_FOUND":return"요청하신 정보를 찾을 수 없습니다.";case"BUSINESS_RULE_VIOLATION":return"비즈니스 규칙 위반입니다.";default:return"처리 중 오류가 발생했습니다."}if(ne(e))switch(e.code){case"INTERNAL_ERROR":return"시스템 오류가 발생했습니다. 관리자에게 문의해주세요.";case"SERVICE_UNAVAILABLE":return"서비스가 일시적으로 사용할 수 없습니다.";case"DATABASE_ERROR":return"데이터 처리 중 오류가 발생했습니다.";default:return"시스템 오류가 발생했습니다."}return e.message||"알 수 없는 오류가 발생했습니다."}const ce={error:(e,t)=>{ie(le(e,t))},warn:(e,t)=>{le(e,t)},info:(e,t)=>{}},de=Y.create({baseURL:"http://localhost:8080/api/auth",timeout:1e4,headers:{"Content-Type":"application/json"}}),me=Y.create({baseURL:"http://localhost:8080/api/members",timeout:1e4,headers:{"Content-Type":"application/json"}});de.interceptors.request.use(e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),me.interceptors.request.use(e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const ue=e=>{var t;const r={component:"authApi",route:(null==(t=null==e?void 0:e.config)?void 0:t.url)||""},s=le(e,r);return ce.error(s,r),Promise.reject(s)};de.interceptors.response.use(e=>e,ue),me.interceptors.response.use(e=>e,ue);const he={login(e){return d(this,null,function*(){return(yield de.post("/login",e)).data})},register(e){return d(this,null,function*(){return(yield de.post("/register",e)).data})},logout(){return d(this,null,function*(){yield de.post("/logout")})},refreshToken(e){return d(this,null,function*(){return(yield de.post("/refresh",e)).data})},validateToken(e){return d(this,null,function*(){return(yield de.post("/validate",e)).data})},invalidateAllTokens(){return d(this,null,function*(){yield de.post("/invalidate-all")})},getActiveTokens(){return d(this,null,function*(){return(yield de.get("/active-tokens")).data})},invalidateToken(e){return d(this,null,function*(){yield de.post(`/invalidate/${e}`)})},getTokenMetadata(){return d(this,null,function*(){return(yield de.get("/token-metadata")).data})}},pe={getProfile(){return d(this,null,function*(){return(yield me.get("/profile")).data})},updateProfile(e){return d(this,null,function*(){return(yield me.put("/profile",e)).data})},deleteAccount(){return d(this,null,function*(){yield me.delete("/profile")})},getMember(e){return d(this,null,function*(){return(yield me.get(`/${e}`)).data})},getAllMembers(){return d(this,null,function*(){return(yield me.get("")).data})},getMembersByRole(e){return d(this,null,function*(){return(yield me.get(`/role/${e}`)).data})},createMember(e){return d(this,null,function*(){return(yield me.post("",e)).data})},updateMember(e,t){return d(this,null,function*(){return(yield me.put(`/${e}`,t)).data})},deleteMember(e){return d(this,null,function*(){yield me.delete(`/${e}`)})}},xe={ACCESS_TOKEN:"accessToken",REFRESH_TOKEN:"refreshToken",USER:"user"},ge=e=>{try{return localStorage.getItem(xe[e])}catch(t){return null}},ye=(e,t)=>{try{localStorage.setItem(xe[e],t)}catch(r){}},ve=e=>{try{localStorage.removeItem(xe[e])}catch(t){}},fe=e=>{try{localStorage.setItem(xe.USER,JSON.stringify(e))}catch(t){}},be=()=>{try{localStorage.removeItem(xe.USER)}catch(e){}},je={user:(()=>{try{const e=localStorage.getItem(xe.USER);return e?JSON.parse(e):null}catch(e){return null}})(),accessToken:ge("ACCESS_TOKEN"),refreshToken:ge("REFRESH_TOKEN"),isAuthenticated:!!ge("ACCESS_TOKEN"),isLoading:!1,error:null},Ne=m()(Z((e,t)=>o(i({},je),{login:t=>d(null,null,function*(){try{e({isLoading:!0,error:null});const r=yield he.login(t),s={id:r.member.id,email:r.member.email,name:r.member.name,role:r.member.role,profileCompletionRate:r.member.profileCompletionRate||0,isActive:r.member.isActive};ye("ACCESS_TOKEN",r.accessToken),r.refreshToken&&ye("REFRESH_TOKEN",r.refreshToken),fe(s),e({user:s,accessToken:r.accessToken,refreshToken:r.refreshToken||null,isAuthenticated:!0,isLoading:!1,error:null})}catch(r){const t={component:"authStore",action:"login"},s=le(r,t);throw ce.error(s,t),e({isLoading:!1,error:s.message||"로그인에 실패했습니다."}),s}}),register:t=>d(null,null,function*(){try{e({isLoading:!0,error:null});const r=yield he.register(t),s={id:r.member.id,email:r.member.email,name:r.member.name,role:r.member.role,profileCompletionRate:r.member.profileCompletionRate||0,isActive:r.member.isActive};ye("ACCESS_TOKEN",r.accessToken),ye("REFRESH_TOKEN",r.refreshToken),fe(s),e({user:s,accessToken:r.accessToken,refreshToken:r.refreshToken,isAuthenticated:!0,isLoading:!1,error:null})}catch(r){const t={component:"authStore",action:"register"},s=le(r,t);throw ce.error(s,t),e({isLoading:!1,error:s.message||"회원가입에 실패했습니다."}),s}}),logout:()=>d(null,null,function*(){try{e({isLoading:!0}),yield he.logout()}catch(t){ce.warn(t,{component:"authStore",action:"logout"})}finally{ve("ACCESS_TOKEN"),ve("REFRESH_TOKEN"),be(),e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:null})}}),refreshToken:()=>d(null,null,function*(){try{const{refreshToken:r}=t();if(!r)throw new Error("리프레시 토큰이 없습니다.");const s=yield he.refreshToken({refreshToken:r}),a={id:s.member.id,email:s.member.email,name:s.member.name,role:s.member.role,profileCompletionRate:s.member.profileCompletionRate||0,isActive:s.member.isActive};ye("ACCESS_TOKEN",s.accessToken),ye("REFRESH_TOKEN",s.refreshToken),fe(a),e({user:a,accessToken:s.accessToken,refreshToken:s.refreshToken,isAuthenticated:!0,error:null})}catch(r){const e={component:"authStore",action:"refreshToken"},s=le(r,e);throw ce.error(s,e),t().logout(),s}}),refreshUser:()=>d(null,null,function*(){try{e({isLoading:!0});const t=yield pe.getProfile(),r={id:t.id,email:t.email,name:t.name,role:t.role,profileCompletionRate:t.profileCompletionRate,isActive:t.isActive};fe(r),e({user:r,isLoading:!1,error:null})}catch(t){const r={component:"authStore",action:"refreshUser"},s=le(t,r);throw ce.error(s,r),e({isLoading:!1,error:s.message||"사용자 정보 조회에 실패했습니다."}),s}}),updateProfile:t=>d(null,null,function*(){try{e({isLoading:!0,error:null});const r=yield pe.updateProfile(t),s={id:r.id,email:r.email,name:r.name,role:r.role,profileCompletionRate:r.profileCompletionRate,isActive:r.isActive};fe(s),e({user:s,isLoading:!1,error:null})}catch(r){const t={component:"authStore",action:"updateProfile"},s=le(r,t);throw ce.error(s,t),e({isLoading:!1,error:s.message||"프로필 업데이트에 실패했습니다."}),s}}),validateToken:()=>d(null,null,function*(){try{const{accessToken:e}=t();if(!e)return!1;return(yield he.validateToken({token:e})).valid}catch(e){return ce.warn(e,{component:"authStore",action:"validateToken"}),!1}}),clearError:()=>{e({error:null})},setLoading:t=>{e({isLoading:t})},reset:()=>{ve("ACCESS_TOKEN"),ve("REFRESH_TOKEN"),be(),e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:null})}}),{name:"elderberry-auth",partialize:e=>({isAuthenticated:e.isAuthenticated})}));var Te=(e=>(e.ADMIN="ADMIN",e.FACILITY="FACILITY",e.COORDINATOR="COORDINATOR",e.USER_DOMESTIC="USER_DOMESTIC",e.USER_OVERSEAS="USER_OVERSEAS",e.JOB_SEEKER_DOMESTIC="JOB_SEEKER_DOMESTIC",e.JOB_SEEKER_OVERSEAS="JOB_SEEKER_OVERSEAS",e))(Te||{});const we={currentThemeId:"default-light",availableThemes:{"default-light":{core:{base:[95,2,266,1],accent:[44,99,307,1],contrast:30}},"default-dark":{core:{base:[18,11,280,1],accent:[72,40,311,1],contrast:30}},"catppuccin-latte":{core:{base:[95.07617314910061,2.1856276247566773,265.9705972968138,1],accent:[43.717135811988086,99.37386079300107,307.12305463765506,1],contrast:30}},"catppuccin-mocha":{core:{base:[16.02115422223583,13.102236978320558,282.51213623981425,1],accent:[71.7932136171783,46.50946588741101,305.26693753987405,1],contrast:30}},"github-light":{core:{base:[98,0,0,1],accent:[40,80,210,1],contrast:35}},"tokyo-night":{core:{base:[15,15,250,1],accent:[60,90,200,1],contrast:40}},"minimal-dark":{core:{base:[12,8,270,1],accent:[65,85,250,1],contrast:35,sidebar:{base:[8,5,270,1],accent:[65,85,250,1],contrast:35}}},"warm-light":{core:{base:[97,5,40,1],accent:[50,90,15,1],contrast:30,sidebar:{base:[94,8,40,1],accent:[50,90,15,1],contrast:30}}}},customThemes:{},isHighContrast:!1,isReducedMotion:!1,isSystemTheme:!1,loading:!1,error:null,history:[]},Ee=(e,t)=>{var r,s;switch(t.type){case"SET_THEME":return o(i({},e),{currentThemeId:t.payload.themeId,error:null});case"ADD_CUSTOM_THEME":return o(i({},e),{customThemes:o(i({},e.customThemes),{[t.payload.themeId]:t.payload.config})});case"REMOVE_CUSTOM_THEME":const a=e.customThemes,{[r=t.payload.themeId]:n}=a,l=c(a,[(s=r,"symbol"==typeof s?s:s+"")]);return o(i({},e),{customThemes:l,currentThemeId:e.currentThemeId===t.payload.themeId?"default-light":e.currentThemeId});case"TOGGLE_HIGH_CONTRAST":return o(i({},e),{isHighContrast:!e.isHighContrast});case"TOGGLE_REDUCED_MOTION":return o(i({},e),{isReducedMotion:!e.isReducedMotion});case"SET_SYSTEM_THEME":return o(i({},e),{isSystemTheme:t.payload.enabled});case"SET_LOADING":return o(i({},e),{loading:t.payload.loading});case"SET_ERROR":return o(i({},e),{error:t.payload.error,loading:!1});case"LOAD_THEMES":return o(i({},e),{availableThemes:i(i({},e.availableThemes),t.payload.themes)});case"ADD_HISTORY_ENTRY":return o(i({},e),{history:[t.payload.entry,...e.history.slice(0,49)]});case"CLEAR_HISTORY":return o(i({},e),{history:[]});default:return e}},Ce=u.createContext(null);class ke{constructor(){var e;l(this,"symbol"!=typeof(e="listeners")?e+"":e,new Map)}addEventListener(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}removeEventListener(e,t){const r=this.listeners.get(e);r&&r.delete(t)}emit(e,t){const r=this.listeners.get(e);if(r){const s={type:e,timestamp:new Date,data:t};r.forEach(e=>e(s))}}}const Se=({children:e,initialTheme:t,enableSystemTheme:r=!0,enableAnimations:s=!0,storageKey:a="linear-theme-state"})=>{const[n,l]=u.useReducer(Ee,we),o=u.useMemo(()=>new ke,[]);u.useEffect(()=>{d(null,null,function*(){try{l({type:"SET_LOADING",payload:{loading:!0}});const e=localStorage.getItem(a);if(e){const t=JSON.parse(e);t.customThemes&&Object.entries(t.customThemes).forEach(([e,t])=>{l({type:"ADD_CUSTOM_THEME",payload:{themeId:e,config:t}})}),t.currentThemeId&&l({type:"SET_THEME",payload:{themeId:t.currentThemeId}}),void 0!==t.isHighContrast&&t.isHighContrast!==n.isHighContrast&&l({type:"TOGGLE_HIGH_CONTRAST"})}const r=t||n.currentThemeId;yield m(r),l({type:"SET_LOADING",payload:{loading:!1}})}catch(e){l({type:"SET_ERROR",payload:{error:"테마 상태를 로드하는 중 오류가 발생했습니다."}})}})},[t,a]),u.useEffect(()=>{const e={currentThemeId:n.currentThemeId,customThemes:n.customThemes,isHighContrast:n.isHighContrast,isReducedMotion:n.isReducedMotion,isSystemTheme:n.isSystemTheme};localStorage.setItem(a,JSON.stringify(e))},[n.currentThemeId,n.customThemes,n.isHighContrast,n.isReducedMotion,n.isSystemTheme,a]);const c=u.useCallback((e,t={})=>{var r;const a=document.documentElement,{animated:l=s,animationDuration:i=300}=t;l&&(a.style.setProperty("--theme-transition-duration",`${i}ms`),a.classList.add("theme-transitioning"));const{base:o,accent:c,contrast:d,sidebar:m}=e.core;a.style.setProperty("--linear-lch-base",`${o[0]} ${o[1]} ${o[2]}`),a.style.setProperty("--linear-lch-accent",`${c[0]} ${c[1]} ${c[2]}`),a.style.setProperty("--linear-contrast",d.toString()),m&&(a.style.setProperty("--linear-sidebar-lch-base",`${m.base[0]} ${m.base[1]} ${m.base[2]}`),a.style.setProperty("--linear-sidebar-lch-accent",`${m.accent[0]} ${m.accent[1]} ${m.accent[2]}`),a.style.setProperty("--linear-sidebar-contrast",m.contrast.toString()));const u=o[0]<=50;a.classList.remove("theme-light","theme-dark"),a.classList.add(u?"theme-dark":"theme-light"),n.isHighContrast?a.classList.add("theme-high-contrast"):a.classList.remove("theme-high-contrast"),n.isReducedMotion?a.classList.add("theme-reduced-motion"):a.classList.remove("theme-reduced-motion"),l?setTimeout(()=>{var e;a.classList.remove("theme-transitioning"),a.style.removeProperty("--theme-transition-duration"),null==(e=t.onComplete)||e.call(t)},i):null==(r=t.onComplete)||r.call(t)},[s,n.isHighContrast,n.isReducedMotion]),m=u.useCallback((e,...t)=>d(null,[e,...t],function*(e,t={}){var r;try{const r=i(i({},n.availableThemes),n.customThemes)[e];if(!r)throw new Error(`테마 '${e}'를 찾을 수 없습니다.`);const s=n.currentThemeId;l({type:"SET_THEME",payload:{themeId:e,options:t}}),c(r,t);const a={themeId:e,themeName:`Theme ${e}`,changedAt:new Date,reason:t.immediate?"immediate":"user-selection"};l({type:"ADD_HISTORY_ENTRY",payload:{entry:a}}),o.emit("theme-changed",{themeId:e,previousThemeId:s,config:r}),!1!==t.persist&&localStorage.setItem("linear-current-theme",e)}catch(s){const e=s instanceof Error?s.message:"알 수 없는 오류가 발생했습니다.";throw l({type:"SET_ERROR",payload:{error:e}}),o.emit("theme-error",{error:e}),null==(r=t.onError)||r.call(t,s),s}}),[n.availableThemes,n.customThemes,n.currentThemeId,c,o]),p=u.useCallback((e,t)=>d(null,null,function*(){try{l({type:"ADD_CUSTOM_THEME",payload:{themeId:e,config:t}});const r=JSON.parse(localStorage.getItem("linear-custom-themes")||"{}");r[e]=t,localStorage.setItem("linear-custom-themes",JSON.stringify(r)),o.emit("custom-theme-created",{themeId:e,config:t})}catch(r){const e=r instanceof Error?r.message:"커스텀 테마 추가 중 오류가 발생했습니다.";throw l({type:"SET_ERROR",payload:{error:e}}),r}}),[o]),x=u.useCallback(e=>d(null,null,function*(){try{l({type:"REMOVE_CUSTOM_THEME",payload:{themeId:e}});const t=JSON.parse(localStorage.getItem("linear-custom-themes")||"{}");delete t[e],localStorage.setItem("linear-custom-themes",JSON.stringify(t)),o.emit("custom-theme-deleted",{themeId:e})}catch(t){const e=t instanceof Error?t.message:"커스텀 테마 제거 중 오류가 발생했습니다.";throw l({type:"SET_ERROR",payload:{error:e}}),t}}),[o]),g=u.useCallback(()=>{l({type:"TOGGLE_HIGH_CONTRAST"}),o.emit("contrast-toggled",{isHighContrast:!n.isHighContrast});const e=i(i({},n.availableThemes),n.customThemes)[n.currentThemeId];e&&c(e)},[n.isHighContrast,n.availableThemes,n.customThemes,n.currentThemeId,c,o]),y=u.useCallback(()=>{l({type:"TOGGLE_REDUCED_MOTION"})},[]),v=u.useCallback(e=>{if(l({type:"SET_SYSTEM_THEME",payload:{enabled:e}}),e){const e=window.matchMedia("(prefers-color-scheme: dark)").matches;m(e?"default-dark":"default-light")}},[m]),f=u.useCallback((e,t,r,s=30)=>d(null,null,function*(){const a=e.toLowerCase().replace(/\s+/g,"-"),n={core:{base:t,accent:r,contrast:s}};return yield p(a,n),a}),[p]),b=u.useCallback(e=>{const t=i(i({},n.availableThemes),n.customThemes)[e];if(!t)return null;const r={version:"2025.1.0",theme:t,exportedAt:(new Date).toISOString(),compatibility:{minVersion:"2025.1.0"}};return JSON.stringify(r,null,2)},[n.availableThemes,n.customThemes]),j=u.useCallback(e=>d(null,null,function*(){var t;try{const r=JSON.parse(e);if(!r.theme||!r.theme.core)throw new Error("유효하지 않은 테마 형식입니다.");const s=((null==(t=r.theme.metadata)?void 0:t.name)||"Imported Theme").toLowerCase().replace(/\s+/g,"-");return yield p(s,r.theme),s}catch(r){throw new Error("테마 가져오기에 실패했습니다: "+r.message)}}),[p]),N=u.useCallback(()=>d(null,null,function*(){l({type:"CLEAR_HISTORY"}),localStorage.removeItem(a),localStorage.removeItem("linear-custom-themes"),yield m("default-light")}),[a,m]),T=u.useCallback(()=>{l({type:"CLEAR_HISTORY"})},[]);u.useEffect(()=>{if(!r||!n.isSystemTheme)return;const e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{const t=e.matches?"default-dark":"default-light";m(t)};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[r,n.isSystemTheme,m]),u.useEffect(()=>{const e=window.matchMedia("(prefers-contrast: high)"),t=e=>{e.matches&&!n.isHighContrast&&g()},r=window.matchMedia("(prefers-reduced-motion: reduce)"),s=e=>{e.matches!==n.isReducedMotion&&y()};return e.addEventListener("change",t),r.addEventListener("change",s),()=>{e.removeEventListener("change",t),r.removeEventListener("change",s)}},[n.isHighContrast,n.isReducedMotion,g,y]);const w=u.useMemo(()=>{const e=i(i({},n.availableThemes),n.customThemes),t=e[n.currentThemeId]||null,r=!!t&&t.core.base[0]<=50,s=Object.entries(e).map(([e,t])=>({id:e,name:e.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase()),description:`${t.core.base[0]<=50?"Dark":"Light"} theme with ${t.core.contrast}% contrast`,previewColors:{background:`lch(${t.core.base[0]} ${t.core.base[1]} ${t.core.base[2]})`,foreground:`lch(${t.core.base[0]<=50?"90":"20"} 5 ${t.core.base[2]})`,accent:`lch(${t.core.accent[0]} ${t.core.accent[1]} ${t.core.accent[2]})`,border:`lch(${t.core.base[0]<=50?"30":"85"} 5 ${t.core.base[2]})`},category:e.includes("catppuccin")?"pastel":e.includes("minimal")?"minimal":e.includes("tokyo")||e.includes("warm")?"vibrant":"classic",variant:t.core.base[0]<=50?"dark":"light"}));return{currentThemeId:n.currentThemeId,availableThemes:n.availableThemes,customThemes:n.customThemes,isHighContrast:n.isHighContrast,isReducedMotion:n.isReducedMotion,isSystemTheme:n.isSystemTheme,loading:n.loading,error:n.error,history:n.history,currentTheme:t,isDarkMode:r,allThemes:e,themePreview:s,setTheme:m,addCustomTheme:p,removeCustomTheme:x,toggleHighContrast:g,toggleReducedMotion:y,toggleSystemTheme:v,generateThemeFromColors:f,exportTheme:b,importTheme:j,resetToDefaults:N,clearHistory:T,addEventListener:o.addEventListener.bind(o),removeEventListener:o.removeEventListener.bind(o)}},[n,m,p,x,g,y,v,f,b,j,N,T,o]);return h.jsx(Ce.Provider,{value:w,children:e})},Re=()=>{const e=u.useContext(Ce);if(!e)throw new Error("useThemeContext는 ThemeProvider 내에서 사용되어야 합니다.");return e},Ie=(e={})=>{const{debounceDelay:t=300,enableAnimations:r=!0,autoSave:s=!0,detectSystemTheme:a=!0,autoAccessibility:n=!0}=e,l=Re(),[c,m]=u.useState({totalThemes:0,customThemes:0,sessionChanges:0,mostUsedTheme:null,averageUsageTime:0}),[h,p]=u.useState(!1),[x,g]=u.useState(null),y=u.useRef(),v=u.useRef(),f=u.useRef(Date.now()),b=u.useRef(new Map),j=u.useCallback((e,a)=>{y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{l.setTheme(e,i({animated:r,persist:s},a)),m(e=>o(i({},e),{sessionChanges:e.sessionChanges+1})),f.current=Date.now()},t)},[l.setTheme,t,r,s]),N=u.useCallback((e,t)=>{y.current&&clearTimeout(y.current),l.setTheme(e,i({animated:r,persist:s,immediate:!0},t)),m(e=>o(i({},e),{sessionChanges:e.sessionChanges+1})),f.current=Date.now()},[l.setTheme,r,s]),T=u.useCallback((e,t={})=>{const{duration:s=3e3,autoRevert:a=!0,blockEvents:n=!0}=t;h&&v.current&&clearTimeout(v.current);const i=l.currentThemeId;p(!0),g(e),l.setTheme(e,{animated:r,persist:!1,immediate:!1}),a&&(v.current=setTimeout(()=>{l.setTheme(i,{animated:r,persist:!1}),p(!1),g(null)},s))},[l.setTheme,l.currentThemeId,r,h]),w=u.useCallback(()=>{if(v.current&&clearTimeout(v.current),h){const e=localStorage.getItem("linear-current-theme")||"default-light";l.setTheme(e,{animated:r,persist:!1})}p(!1),g(null)},[l.setTheme,r,h]),E=u.useCallback(e=>{const t=e||l.currentThemeId,r=l.allThemes[t];if(!r)return null;const{base:s,accent:a}=r.core,n=s[0],i=a[0],o=Math.abs(n-i)/100*21;let c;c=o>=7?"AAA":o>=4.5?"AA":"FAIL";const d=Math.abs(s[2]-a[2]);let m;m=d<30?"monochromatic":d<60?"analogous":d>150&&d<210?"complementary":d>100&&d<140?"triadic":"custom";const u=(s[2]+a[2])/2;let h;h=u>=0&&u<=60||u>=300?"warm":u>180&&u<300?"cool":"neutral";const p=(s[1]+a[1])/2;let x;return x=p<20?"low":p<60?"medium":"high",{contrastRatio:o,accessibilityGrade:c,harmony:m,temperature:h,saturationLevel:x}},[l.currentThemeId,l.allThemes]),C=u.useCallback((e,t,r,s=30)=>d(null,null,function*(){try{const a=yield l.generateThemeFromColors(e,t,r,s),i=E(a);return n&&(null==i||i.accessibilityGrade),a}catch(a){throw a}}),[l.generateThemeFromColors,E,n]),k=u.useCallback(()=>{var e;const t=l.currentTheme;if(!t)return;const r=t.core.base[0]<=50?"light":"dark",s=l.themePreview,a=null==(e=s.find(e=>e.id===l.currentThemeId))?void 0:e.category,n=s.find(e=>e.variant===r&&(e.category===a||e.id.includes(l.currentThemeId.replace(/-?(light|dark)$/,""))));if(n)N(n.id);else{N("dark"===r?"default-dark":"default-light")}},[l.currentTheme,l.currentThemeId,l.themePreview,N]),S=u.useCallback(()=>{const e=Object.keys(l.allThemes).filter(e=>e!==l.currentThemeId);if(0===e.length)return;const t=e[Math.floor(Math.random()*e.length)];N(t)},[l.allThemes,l.currentThemeId,N]),R=u.useCallback((e,t)=>{l.addEventListener(e,t),b.current.has(e)||b.current.set(e,new Set),b.current.get(e).add(t)},[l.addEventListener]),I=u.useCallback((e,t)=>{l.removeEventListener(e,t);const r=b.current.get(e);r&&r.delete(t)},[l.removeEventListener]),L=u.useMemo(()=>{const e=Object.keys(l.allThemes).length,t=Object.keys(l.customThemes).length;return{totalThemes:e,customThemes:t,currentAnalysis:E(),compatibleThemes:l.themePreview.filter(e=>{if(e.id===l.currentThemeId)return!1;const t=l.themePreview.find(e=>e.id===l.currentThemeId);return!!t&&(e.category===t.category||e.variant===t.variant)}),isValidTheme:null!==l.currentTheme,hasCustomThemes:t>0,canToggleDarkMode:!0}},[l.allThemes,l.customThemes,l.currentThemeId,l.currentTheme,l.themePreview,E]);return u.useEffect(()=>{m(e=>o(i({},e),{totalThemes:L.totalThemes,customThemes:L.customThemes}))},[L.totalThemes,L.customThemes]),u.useEffect(()=>()=>{y.current&&clearTimeout(y.current),v.current&&clearTimeout(v.current)},[]),u.useMemo(()=>o(i({currentThemeId:l.currentThemeId,currentTheme:l.currentTheme,allThemes:l.allThemes,customThemes:l.customThemes,isDarkMode:l.isDarkMode,isHighContrast:l.isHighContrast,isReducedMotion:l.isReducedMotion,isSystemTheme:l.isSystemTheme,loading:l.loading,error:l.error,history:l.history,themePreview:l.themePreview},L),{sessionStats:c,isPreviewMode:h,previewThemeId:x,toggleHighContrast:l.toggleHighContrast,toggleReducedMotion:l.toggleReducedMotion,toggleSystemTheme:l.toggleSystemTheme,addCustomTheme:l.addCustomTheme,removeCustomTheme:l.removeCustomTheme,exportTheme:l.exportTheme,importTheme:l.importTheme,resetToDefaults:l.resetToDefaults,clearHistory:l.clearHistory,setTheme:j,setThemeImmediate:N,previewTheme:T,cancelPreview:w,analyzeTheme:E,createThemeFromColors:C,toggleDarkMode:k,randomTheme:S,addEventListener:R,removeEventListener:I,getThemeById:e=>l.allThemes[e]||null,getThemesByCategory:e=>l.themePreview.filter(t=>t.category===e),getThemesByVariant:e=>l.themePreview.filter(t=>t.variant===e),searchThemes:e=>l.themePreview.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())||t.description.toLowerCase().includes(e.toLowerCase())),lchToHex:e=>{const[t,r,s]=e;return`hsl(${s}, ${r}%, ${t}%)`},hexToLch:e=>[50,50,0,1],validateTheme:e=>{const{base:t,accent:r,contrast:s}=e.core;return Array.isArray(t)&&4===t.length&&Array.isArray(r)&&4===r.length&&"number"==typeof s&&s>=0&&s<=100}}),[l,L,c,h,x,j,N,T,w,E,C,k,S,R,I])};function Le(...e){return X(Q(e))}const Oe=ee(["inline-flex items-center justify-center whitespace-nowrap","font-[var(--linear-font-weight-medium)] text-sm","transition-all duration-[var(--linear-transition-fast)]","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--linear-color-accent)] focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","min-h-[44px] min-w-[44px]","select-none cursor-pointer","relative overflow-hidden"],{variants:{variant:{primary:["bg-[var(--linear-color-accent)] text-[var(--linear-color-text-on-accent)]","border-[var(--linear-color-accent)] border","hover:bg-[var(--linear-color-accent-hover)] hover:border-[var(--linear-color-accent-hover)]","active:bg-[var(--linear-color-accent-active)] active:border-[var(--linear-color-accent-active)]","hover:shadow-[var(--linear-shadow-card)] hover:-translate-y-0.5","active:translate-y-0 active:shadow-none"],secondary:["bg-transparent text-[var(--linear-color-accent)]","border border-[var(--linear-color-accent)]","hover:bg-[var(--linear-color-accent)] hover:text-[var(--linear-color-text-on-accent)]","hover:shadow-[var(--linear-shadow-card)] hover:-translate-y-0.5","active:translate-y-0 active:shadow-none"],ghost:["bg-transparent text-[var(--linear-color-text-primary)] border-transparent","hover:bg-[var(--linear-color-surface-elevated)] hover:text-[var(--linear-color-text-primary)]","active:bg-[var(--linear-color-control-active)]"],outline:["bg-transparent text-[var(--linear-color-text-primary)]","border border-[var(--linear-color-border-default)]","hover:bg-[var(--linear-color-surface-elevated)] hover:border-[var(--linear-color-border-strong)]","active:bg-[var(--linear-color-control-active)]"],link:["bg-transparent text-[var(--linear-color-accent)] border-transparent","hover:text-[var(--linear-color-accent-hover)] hover:underline","underline-offset-4 p-0 h-auto min-h-0 min-w-0"],destructive:["bg-[var(--linear-color-error)] text-[var(--linear-color-text-on-accent)]","border border-[var(--linear-color-error)]","hover:brightness-110 hover:shadow-[var(--linear-shadow-card)] hover:-translate-y-0.5","active:translate-y-0 active:shadow-none active:brightness-95"],success:["bg-[var(--linear-color-success)] text-[var(--linear-color-text-on-accent)]","border border-[var(--linear-color-success)]","hover:brightness-110 hover:shadow-[var(--linear-shadow-card)] hover:-translate-y-0.5","active:translate-y-0 active:shadow-none active:brightness-95"],warning:["bg-[var(--linear-color-warning)] text-[var(--linear-color-text-on-accent)]","border border-[var(--linear-color-warning)]","hover:brightness-110 hover:shadow-[var(--linear-shadow-card)] hover:-translate-y-0.5","active:translate-y-0 active:shadow-none active:brightness-95"],gradient:["bg-gradient-to-r from-[var(--linear-color-accent)] to-[var(--linear-color-accent-hover)]","text-[var(--linear-color-text-on-accent)] border-transparent","hover:shadow-[var(--linear-shadow-card)] hover:-translate-y-0.5 hover:brightness-110","active:translate-y-0 active:shadow-none active:brightness-95"]},size:{sm:"text-sm px-[var(--linear-spacing-sm)] py-[var(--linear-spacing-xs)] min-h-[36px] gap-1",default:"text-sm px-[var(--linear-spacing-lg)] py-[var(--linear-spacing-sm)] min-h-[44px] gap-2",lg:"text-base px-[var(--linear-spacing-xl)] py-[var(--linear-spacing-md)] min-h-[52px] gap-2",xl:"text-lg px-[var(--linear-spacing-2xl)] py-[var(--linear-spacing-lg)] min-h-[60px] gap-3",icon:"w-[44px] h-[44px] p-0","icon-sm":"w-[36px] h-[36px] p-0","icon-lg":"w-[52px] h-[52px] p-0"},radius:{none:"rounded-none",sm:"rounded-[var(--linear-radius-small)]",md:"rounded-[var(--linear-radius-medium)]",lg:"rounded-[var(--linear-radius-large)]",full:"rounded-[var(--linear-radius-full)]"}},defaultVariants:{variant:"primary",size:"default",radius:"md"}}),Pe=u.forwardRef((e,t)=>{var r=e,{className:s,variant:a,size:n,radius:l,loading:d=!1,fullWidth:m=!1,icon:x,iconPosition:g="left",animation:y=!0,loadingSpinner:v,disabledReason:f,asChild:b=!1,testId:j,children:N,disabled:T,onClick:w,onKeyDown:E,"aria-label":C,"aria-describedby":k,"aria-expanded":S,"aria-controls":R}=r,I=c(r,["className","variant","size","radius","loading","fullWidth","icon","iconPosition","animation","loadingSpinner","disabledReason","asChild","testId","children","disabled","onClick","onKeyDown","aria-label","aria-describedby","aria-expanded","aria-controls"]);const{isReducedMotion:L}=Ie(),O=T||d,P=y&&!L&&!O,A=m?"w-full":"",D=u.useMemo(()=>C||(d?"로딩 중...":O&&f?`버튼 비활성화됨: ${f}`:void 0),[C,d,O,f]),M=u.useMemo(()=>{const e=[k,f&&O?"button-disabled-reason":null].filter(Boolean);return e.length>0?e.join(" "):void 0},[k,f,O]),_=()=>{var e;if(d)return v||h.jsx(p,{className:Le("animate-spin","sm"===n?"w-3 h-3":"lg"===n?"w-5 h-5":"w-4 h-4"),"aria-hidden":"true"});if(!x)return null;if(u.isValidElement(x)){const t="sm"===n?"w-3 h-3":"lg"===n?"w-5 h-5":"w-4 h-4";return u.cloneElement(x,{className:Le(t,null==(e=x.props)?void 0:e.className),"aria-hidden":"true"})}return x},$=e=>{O?e.preventDefault():(" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),null==w||w(e)),null==E||E(e))},H=e=>{O?e.preventDefault():null==w||w(e)},U=P?{whileHover:"link"!==a?{y:-1,transition:{duration:.15,ease:"easeOut"}}:void 0,whileTap:"link"!==a?{scale:.98,y:0,transition:{duration:.1,ease:"easeOut"}}:void 0}:{};if(b&&u.isValidElement(N))return u.cloneElement(N,i(i({className:Le(Oe({variant:a,size:n,radius:l}),A,"linear-animate-in",s,N.props.className),disabled:O,onClick:H,onKeyDown:$,"aria-label":D,"aria-describedby":M,"aria-expanded":S,"aria-controls":R,"aria-busy":d,"aria-disabled":O,"data-testid":j,tabIndex:O?-1:0},N.props),I));const B=P?J.button:"button";return h.jsxs(h.Fragment,{children:[h.jsx(B,o(i(i({ref:t,type:"button",className:Le(Oe({variant:a,size:n,radius:l}),A,"linear-animate-in",s),disabled:O,onClick:H,onKeyDown:$,"aria-label":D,"aria-describedby":M,"aria-expanded":S,"aria-controls":R,"aria-busy":d,"aria-disabled":O,tabIndex:O?-1:0,"data-testid":j},P?U:{}),I),{children:(()=>{const e=_();return e||d?N?"right"===g?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"flex-1",children:N}),e]}):h.jsxs(h.Fragment,{children:[e,h.jsx("span",{className:"flex-1",children:N})]}):e:N})()})),f&&O&&h.jsx("span",{id:"button-disabled-reason",className:"sr-only","aria-live":"polite",children:f})]})});Pe.displayName="LinearButton";const Ae=ee(["rounded-[var(--linear-radius-medium)] border","transition-all duration-[var(--linear-transition-fast)]","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--linear-color-accent)] focus-visible:ring-offset-2","relative overflow-hidden"],{variants:{surface:{default:["bg-[var(--linear-color-background)] text-[var(--linear-color-text-primary)]","border-[var(--linear-color-border-subtle)]"],elevated:["bg-[var(--linear-color-surface-elevated)] text-[var(--linear-color-text-primary)]","border-[var(--linear-color-border-subtle)]"],panel:["bg-[var(--linear-color-surface-panel)] text-[var(--linear-color-text-primary)]","border-[var(--linear-color-border-default)]"],modal:["bg-[var(--linear-color-surface-modal)] text-[var(--linear-color-text-primary)]","border-[var(--linear-color-border-default)]"],gradient:["bg-gradient-to-br from-[var(--linear-color-surface-elevated)] to-[var(--linear-color-surface-panel)]","text-[var(--linear-color-text-primary)] border-[var(--linear-color-border-subtle)]"],"accent-gradient":["bg-gradient-to-br from-[var(--linear-color-accent)] to-[var(--linear-color-accent-hover)]","text-[var(--linear-color-text-on-accent)] border-[var(--linear-color-accent)]"]},padding:{none:"p-0",xs:"p-[var(--linear-spacing-xs)]",sm:"p-[var(--linear-spacing-sm)]",md:"p-[var(--linear-spacing-lg)]",lg:"p-[var(--linear-spacing-xl)]",xl:"p-[var(--linear-spacing-2xl)]"},shadow:{none:"shadow-none",card:"shadow-[var(--linear-shadow-card)]",modal:"shadow-[var(--linear-shadow-modal)]",dropdown:"shadow-[var(--linear-shadow-dropdown)]"},radius:{none:"rounded-none",sm:"rounded-[var(--linear-radius-small)]",md:"rounded-[var(--linear-radius-medium)]",lg:"rounded-[var(--linear-radius-large)]",full:"rounded-[var(--linear-radius-full)]"},interactive:{false:"",true:["cursor-pointer select-none","hover:shadow-[var(--linear-shadow-modal)] hover:border-[var(--linear-color-border-default)]","hover:-translate-y-1 active:translate-y-0 active:scale-[0.98]","focus-visible:ring-2 focus-visible:ring-[var(--linear-color-accent)]"]}},defaultVariants:{surface:"elevated",padding:"md",shadow:"card",radius:"md",interactive:!1}}),De=u.forwardRef((e,t)=>{var r=e,{children:s,className:a,surface:n,padding:l,shadow:d,radius:m,interactive:p,animation:x=!0,title:g,description:y,headerContent:v,footerContent:f,loading:b=!1,empty:j=!1,emptyMessage:N="데이터가 없습니다.",error:T=!1,errorMessage:w="오류가 발생했습니다.",overlay:E,badge:C,onClick:k,onKeyDown:S,role:R,"aria-label":I,"aria-describedby":L}=r,O=c(r,["children","className","surface","padding","shadow","radius","interactive","animation","title","description","headerContent","footerContent","loading","empty","emptyMessage","error","errorMessage","overlay","badge","onClick","onKeyDown","role","aria-label","aria-describedby"]);const{isReducedMotion:P}=Ie(),A=Boolean(k||p),D=x&&!P&&A,M=R||(A?"button":"article"),_=I||(g&&A?`${g} 카드`:void 0),$=D?{whileHover:{y:-2,scale:1.01,transition:{duration:.15,ease:"easeOut"}},whileTap:{scale:.98,y:0,transition:{duration:.1,ease:"easeOut"}}}:{},H=D?J.div:"div";return h.jsxs(H,o(i(i({ref:t,className:Le(Ae({surface:n,padding:l,shadow:d,radius:m,interactive:A}),!P&&"linear-animate-in",a),onClick:A?k:void 0,onKeyDown:A?e=>{!A||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),null==k||k(e)),null==S||S(e)}:void 0,tabIndex:A?0:void 0,role:M,"aria-label":_,"aria-describedby":L,"aria-busy":b,"aria-disabled":b||T},D?$:{}),O),{children:[C&&h.jsx("div",{className:"absolute top-2 right-2 z-10",children:C}),g||y||v?h.jsxs(Me,{children:[(g||y)&&h.jsxs("div",{className:"space-y-[var(--linear-spacing-xs)]",children:[g&&h.jsx(_e,{id:`card-title-${u.useId()}`,children:g}),y&&h.jsx($e,{children:y})]}),v]}):null,h.jsx("div",{className:Le(g||y||v?"px-[var(--linear-spacing-lg)] pb-[var(--linear-spacing-lg)]":"",f?"pb-0":""),children:b?h.jsxs("div",{className:"flex items-center justify-center p-[var(--linear-spacing-2xl)]",children:[h.jsx("div",{className:"w-6 h-6 border-2 border-[var(--linear-color-accent)] border-t-transparent rounded-full animate-spin"}),h.jsx("span",{className:"ml-2 text-[var(--linear-color-text-secondary)]",children:"로딩 중..."})]}):T?h.jsxs("div",{className:"flex flex-col items-center justify-center p-[var(--linear-spacing-2xl)] text-center",children:[h.jsx("div",{className:"w-12 h-12 mb-4 rounded-full bg-[var(--linear-color-error-bg)] flex items-center justify-center",children:h.jsx("svg",{className:"w-6 h-6 text-[var(--linear-color-error)]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5C2.962 18.333 3.924 20 5.464 20z"})})}),h.jsx("p",{className:"text-[var(--linear-color-error)]",children:w})]}):j&&!s?h.jsxs("div",{className:"flex flex-col items-center justify-center p-[var(--linear-spacing-2xl)] text-center",children:[h.jsx("div",{className:"w-12 h-12 mb-4 rounded-full bg-[var(--linear-color-surface-panel)] flex items-center justify-center",children:h.jsx("svg",{className:"w-6 h-6 text-[var(--linear-color-text-tertiary)]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),h.jsx("p",{className:"text-[var(--linear-color-text-secondary)]",children:N})]}):s}),f?h.jsx(Ue,{children:f}):null,E&&h.jsx("div",{className:"absolute inset-0 bg-[var(--linear-color-surface-modal)] bg-opacity-90 flex items-center justify-center z-20",children:E})]}))});De.displayName="LinearCard";const Me=u.forwardRef((e,t)=>{var r=e,{className:s,centered:a=!1,border:n=!1}=r,l=c(r,["className","centered","border"]);return h.jsx("div",i({ref:t,className:Le("flex flex-col space-y-[var(--linear-spacing-xs)] p-[var(--linear-spacing-lg)] pb-[var(--linear-spacing-md)]",a&&"items-center text-center",n&&"border-b border-[var(--linear-color-border-subtle)] mb-[var(--linear-spacing-md)] pb-[var(--linear-spacing-lg)]",s)},l))}),_e=u.forwardRef((e,t)=>{var r=e,{className:s,children:a,level:n=3,size:l="md",variant:d="primary"}=r,m=c(r,["className","children","level","size","variant"]);const u=`h${n}`;return h.jsx(u,o(i({ref:t,className:Le("leading-[var(--linear-line-height-tight)] tracking-tight",{sm:"text-base font-[var(--linear-font-weight-medium)]",md:"text-lg font-[var(--linear-font-weight-semibold)]",lg:"text-xl font-[var(--linear-font-weight-semibold)]",xl:"text-2xl font-[var(--linear-font-weight-bold)]"}[l],{primary:"text-[var(--linear-color-text-primary)]",secondary:"text-[var(--linear-color-text-secondary)]",accent:"text-[var(--linear-color-accent)]",muted:"text-[var(--linear-color-text-tertiary)]"}[d],s)},m),{children:a}))}),$e=u.forwardRef((e,t)=>{var r=e,{className:s,size:a="sm",variant:n="secondary",maxLines:l,style:o}=r,d=c(r,["className","size","variant","maxLines","style"]);const m=l?i({display:"-webkit-box",WebkitLineClamp:l,WebkitBoxOrient:"vertical",overflow:"hidden"},o):o;return h.jsx("p",i({ref:t,className:Le("leading-[var(--linear-line-height-normal)]",{sm:"text-sm",md:"text-base",lg:"text-lg"}[a],{secondary:"text-[var(--linear-color-text-secondary)]",tertiary:"text-[var(--linear-color-text-tertiary)]",muted:"text-[var(--linear-color-text-tertiary)] opacity-75"}[n],s),style:m},d))}),He=u.forwardRef((e,t)=>{var r=e,{className:s,padding:a="lg",centered:n=!1,as:l="div"}=r,o=c(r,["className","padding","centered","as"]);const d=l;return h.jsx(d,i({ref:t,className:Le("text-[var(--linear-color-text-primary)]",{none:"p-0",sm:"p-[var(--linear-spacing-sm)]",md:"p-[var(--linear-spacing-md)]",lg:"p-[var(--linear-spacing-lg)]"}[a],"pt-0",n&&"flex flex-col items-center justify-center text-center",s)},o))}),Ue=u.forwardRef((e,t)=>{var r=e,{className:s,justify:a="start",border:n=!1,padding:l="lg"}=r,o=c(r,["className","justify","border","padding"]);return h.jsx("div",i({ref:t,className:Le("flex items-center pt-0 gap-[var(--linear-spacing-sm)]",{sm:"p-[var(--linear-spacing-sm)]",md:"p-[var(--linear-spacing-md)]",lg:"p-[var(--linear-spacing-lg)]"}[l],{start:"justify-start",center:"justify-center",end:"justify-end",between:"justify-between",around:"justify-around"}[a],n&&"border-t border-[var(--linear-color-border-subtle)] mt-[var(--linear-spacing-md)] pt-[var(--linear-spacing-lg)]",s)},o))});Me.displayName="LinearCardHeader",_e.displayName="LinearCardTitle",$e.displayName="LinearCardDescription",He.displayName="LinearCardContent",Ue.displayName="LinearCardFooter";const Be=({title:e,description:t,keywords:r,ogTitle:s,ogDescription:a,ogImage:n="/og-image.jpg",canonicalUrl:l,noIndex:i=!1})=>{u.useEffect(()=>{const o="엘더베리",c="재외동포를 위한 한국 요양원 구인구직 매칭 서비스",d="해외 거주 재외동포와 한국 요양원을 연결하는 전문 매칭 플랫폼. 건강평가부터 시설매칭, 코디네이터 연결까지 원스톱 서비스 제공.";return document.title=e?`${e} | ${o}`:`${o} - ${c}`,Fe("description",t||d),r&&Fe("keywords",r),Fe("robots",i?"noindex, nofollow":"index, follow"),Ke("og:title",s||e||c),Ke("og:description",a||t||d),Ke("og:image",n),Ke("og:url",l||window.location.href),Fe("twitter:title",s||e||c),Fe("twitter:description",a||t||d),Fe("twitter:image",n),l&&Ve(l),()=>{document.title=`${o} - ${c}`,Fe("description",d),Fe("robots","index, follow")}},[e,t,r,s,a,n,l,i])},Fe=(e,t)=>{let r=document.querySelector(`meta[name="${e}"]`);r?r.content=t:(r=document.createElement("meta"),r.name=e,r.content=t,document.head.appendChild(r))},Ke=(e,t)=>{let r=document.querySelector(`meta[property="${e}"]`);r?r.content=t:(r=document.createElement("meta"),r.setAttribute("property",e),r.content=t,document.head.appendChild(r))},Ve=e=>{let t=document.querySelector('link[rel="canonical"]');t?t.href=e:(t=document.createElement("link"),t.rel="canonical",t.href=e,document.head.appendChild(t))},ze=(e,t)=>{const r=t||"structured-data",s=document.getElementById(r);s&&s.remove();const a=document.createElement("script");a.id=r,a.type="application/ld+json",a.textContent=JSON.stringify(e),document.head.appendChild(a)},Ge={healthAssessment:{title:"건강 평가",description:"재외동포를 위한 전문 건강 평가 서비스. ADL 평가부터 장기요양등급까지 체계적 건강 상태 진단.",keywords:"건강평가, ADL평가, 장기요양등급, 요양원, 재외동포",ogTitle:"건강 평가 - 엘더베리",canonicalUrl:"https://elderberry.co.kr/health-assessment"},facilitySearch:{title:"시설 검색",description:"전국 요양원 시설 검색 및 매칭 서비스. 지역별, 서비스별 맞춤 시설 추천.",keywords:"요양원검색, 시설매칭, 요양시설, 노인요양원, 재외동포",ogTitle:"시설 검색 - 엘더베리",canonicalUrl:"https://elderberry.co.kr/facility-search"}},We=Y.create({baseURL:"http://localhost:8080/api/boards",timeout:1e4,headers:{"Content-Type":"application/json"}}),Je=Y.create({baseURL:"http://localhost:8080/api/posts",timeout:1e4,headers:{"Content-Type":"application/json"}}),qe=Y.create({baseURL:"http://localhost:8080/api/comments",timeout:1e4,headers:{"Content-Type":"application/json"}}),Ye=Y.create({baseURL:"http://localhost:8080/api/files",timeout:3e4,headers:{"Content-Type":"multipart/form-data"}}),Qe=e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e};We.interceptors.request.use(Qe),Je.interceptors.request.use(Qe),qe.interceptors.request.use(Qe),Ye.interceptors.request.use(Qe);const Ze=e=>{var t,r,s,a,n,l,i,o;const c={message:(null==(r=null==(t=e.response)?void 0:t.data)?void 0:r.message)||"네트워크 오류가 발생했습니다.",code:(null==(a=null==(s=e.response)?void 0:s.data)?void 0:a.code)||"NETWORK_ERROR",status:(null==(n=e.response)?void 0:n.status)||500,timestamp:(new Date).toISOString(),path:(null==(l=e.config)?void 0:l.url)||"",details:null==(o=null==(i=e.response)?void 0:i.data)?void 0:o.details};return Promise.reject(c)};[We,Je,qe,Ye].forEach(e=>{e.interceptors.response.use(e=>e,Ze)});const Xe={getBoards(){return d(this,null,function*(){return(yield We.get("")).data})},getBoard(e){return d(this,null,function*(){return(yield We.get(`/${e}`)).data})},createBoard(e){return d(this,null,function*(){return(yield We.post("",e)).data})},updateBoard(e,t){return d(this,null,function*(){return(yield We.put(`/${e}`,t)).data})},deleteBoard(e){return d(this,null,function*(){yield We.delete(`/${e}`)})},getBoardStatistics(){return d(this,null,function*(){return(yield We.get("/statistics")).data})}},et={getPosts(){return d(this,arguments,function*(e={}){return(yield Je.get("",{params:e})).data})},getPost(e){return d(this,null,function*(){return(yield Je.get(`/${e}`)).data})},createPost(e){return d(this,null,function*(){return(yield Je.post("",e)).data})},updatePost(e,t){return d(this,null,function*(){return(yield Je.put(`/${e}`,t)).data})},deletePost(e){return d(this,null,function*(){yield Je.delete(`/${e}`)})},getMyPosts(){return d(this,arguments,function*(e={}){return(yield Je.get("/my",{params:e})).data})},incrementViewCount(e){return d(this,null,function*(){yield Je.post(`/${e}/view`)})},likePost(e){return d(this,null,function*(){return(yield Je.post(`/${e}/like`)).data})},unlikePost(e){return d(this,null,function*(){return(yield Je.delete(`/${e}/like`)).data})},checkPostLike(e){return d(this,null,function*(){return(yield Je.get(`/${e}/like/status`)).data})},getPopularPosts(e=10){return d(this,null,function*(){return(yield Je.get("/popular",{params:{limit:e}})).data})},getLatestPosts(e=10){return d(this,null,function*(){return(yield Je.get("/latest",{params:{limit:e}})).data})},getRecommendedPosts(e=10){return d(this,null,function*(){return(yield Je.get("/recommended",{params:{limit:e}})).data})}},tt={getComments(e){return d(this,arguments,function*(e,t={}){return(yield qe.get(`/post/${e}`,{params:t})).data})},getComment(e){return d(this,null,function*(){return(yield qe.get(`/${e}`)).data})},createComment(e){return d(this,null,function*(){return(yield qe.post("",e)).data})},updateComment(e,t){return d(this,null,function*(){return(yield qe.put(`/${e}`,t)).data})},deleteComment(e){return d(this,null,function*(){yield qe.delete(`/${e}`)})},getMyComments(){return d(this,arguments,function*(e={}){return(yield qe.get("/my",{params:e})).data})},likeComment(e){return d(this,null,function*(){return(yield qe.post(`/${e}/like`)).data})},unlikeComment(e){return d(this,null,function*(){return(yield qe.delete(`/${e}/like`)).data})},checkCommentLike(e){return d(this,null,function*(){return(yield qe.get(`/${e}/like/status`)).data})}},rt={uploadFile(e){return d(this,null,function*(){const t=new FormData;t.append("file",e);return(yield Ye.post("/upload",t)).data})},uploadFiles(e){return d(this,null,function*(){const t=new FormData;e.forEach(e=>{t.append("files",e)});return(yield Ye.post("/upload/multiple",t)).data})},getFileDownloadUrl:e=>`/api/files/download/${e}`,getFileInfo(e){return d(this,null,function*(){return(yield Ye.get(`/${e}`)).data})},deleteFile(e){return d(this,null,function*(){yield Ye.delete(`/${e}`)})}},st={page:0,size:20,sortBy:"createdAt",sortDirection:"desc"},at={boards:[],currentBoard:null,boardsLoading:!1,boardsError:null,posts:[],currentPost:null,postsLoading:!1,postsError:null,postsTotalPages:0,postsCurrentPage:0,postsTotalElements:0,comments:[],commentsLoading:!1,commentsError:null,commentsTotalPages:0,commentsCurrentPage:0,statistics:null,popularPosts:[],statisticsLoading:!1,statisticsError:null,searchParams:st,likedPosts:new Set,likedComments:new Set},nt=m()((e,t)=>o(i({},at),{loadBoards:()=>d(null,null,function*(){try{e({boardsLoading:!0,boardsError:null});const t=yield Xe.getBoards();e({boards:t,boardsLoading:!1})}catch(t){throw e({boardsLoading:!1,boardsError:t.message||"게시판 목록을 불러오는데 실패했습니다."}),t}}),loadBoard:t=>d(null,null,function*(){try{e({boardsLoading:!0,boardsError:null});const r=yield Xe.getBoard(t);e({currentBoard:r,boardsLoading:!1})}catch(r){throw e({boardsLoading:!1,boardsError:r.message||"게시판 정보를 불러오는데 실패했습니다."}),r}}),loadPosts:r=>d(null,null,function*(){try{e({postsLoading:!0,postsError:null});const s=i(i({},t().searchParams),r),a=yield et.getPosts(s);e({posts:a.content,postsTotalPages:a.totalPages,postsCurrentPage:a.page,postsTotalElements:a.totalElements,searchParams:s,postsLoading:!1})}catch(s){throw e({postsLoading:!1,postsError:s.message||"게시글 목록을 불러오는데 실패했습니다."}),s}}),loadPost:t=>d(null,null,function*(){try{e({postsLoading:!0,postsError:null});const s=yield et.getPost(t);yield et.incrementViewCount(t);try{(yield et.checkPostLike(t)).liked&&e(e=>({likedPosts:new Set([...e.likedPosts,t])}))}catch(r){}e({currentPost:o(i({},s),{viewCount:s.viewCount+1}),postsLoading:!1})}catch(r){throw e({postsLoading:!1,postsError:r.message||"게시글을 불러오는데 실패했습니다."}),r}}),createPost:t=>d(null,null,function*(){try{e({postsLoading:!0,postsError:null});const r=yield et.createPost(t);return e(e=>({posts:[r,...e.posts],postsTotalElements:e.postsTotalElements+1,postsLoading:!1})),r}catch(r){throw e({postsLoading:!1,postsError:r.message||"게시글 작성에 실패했습니다."}),r}}),updatePost:(t,r)=>d(null,null,function*(){try{e({postsLoading:!0,postsError:null});const s=yield et.updatePost(t,r);return e(e=>{var r;return{posts:e.posts.map(e=>e.id===t?s:e),currentPost:(null==(r=e.currentPost)?void 0:r.id)===t?s:e.currentPost,postsLoading:!1}}),s}catch(s){throw e({postsLoading:!1,postsError:s.message||"게시글 수정에 실패했습니다."}),s}}),deletePost:t=>d(null,null,function*(){try{e({postsLoading:!0,postsError:null}),yield et.deletePost(t),e(e=>{var r;return{posts:e.posts.filter(e=>e.id!==t),currentPost:(null==(r=e.currentPost)?void 0:r.id)===t?null:e.currentPost,postsTotalElements:e.postsTotalElements-1,postsLoading:!1}})}catch(r){throw e({postsLoading:!1,postsError:r.message||"게시글 삭제에 실패했습니다."}),r}}),loadMyPosts:r=>d(null,null,function*(){try{e({postsLoading:!0,postsError:null});const s=i(i({},t().searchParams),r),a=yield et.getMyPosts(s);e({posts:a.content,postsTotalPages:a.totalPages,postsCurrentPage:a.page,postsTotalElements:a.totalElements,searchParams:s,postsLoading:!1})}catch(s){throw e({postsLoading:!1,postsError:s.message||"내 게시글을 불러오는데 실패했습니다."}),s}}),incrementPostView:t=>d(null,null,function*(){try{yield et.incrementViewCount(t),e(e=>{var r;return{posts:e.posts.map(e=>e.id===t?o(i({},e),{viewCount:e.viewCount+1}):e),currentPost:(null==(r=e.currentPost)?void 0:r.id)===t?o(i({},e.currentPost),{viewCount:e.currentPost.viewCount+1}):e.currentPost}})}catch(r){}}),loadComments:(t,r=0,s=20)=>d(null,null,function*(){try{e({commentsLoading:!0,commentsError:null});const a=yield tt.getComments(t,{page:r,size:s});e({comments:a.content,commentsTotalPages:a.totalPages,commentsCurrentPage:a.page,commentsLoading:!1})}catch(a){throw e({commentsLoading:!1,commentsError:a.message||"댓글을 불러오는데 실패했습니다."}),a}}),createComment:t=>d(null,null,function*(){try{e({commentsLoading:!0,commentsError:null});const r=yield tt.createComment(t);return e(e=>{var s;return{comments:[...e.comments,r],commentsLoading:!1,currentPost:(null==(s=e.currentPost)?void 0:s.id)===t.postId?o(i({},e.currentPost),{commentCount:e.currentPost.commentCount+1}):e.currentPost,posts:e.posts.map(e=>e.id===t.postId?o(i({},e),{commentCount:e.commentCount+1}):e)}}),r}catch(r){throw e({commentsLoading:!1,commentsError:r.message||"댓글 작성에 실패했습니다."}),r}}),updateComment:(t,r)=>d(null,null,function*(){try{e({commentsLoading:!0,commentsError:null});const s=yield tt.updateComment(t,r);return e(e=>({comments:e.comments.map(e=>e.id===t?s:e),commentsLoading:!1})),s}catch(s){throw e({commentsLoading:!1,commentsError:s.message||"댓글 수정에 실패했습니다."}),s}}),deleteComment:t=>d(null,null,function*(){try{e({commentsLoading:!0,commentsError:null}),yield tt.deleteComment(t),e(e=>{const r=e.comments.find(e=>e.id===t);return{comments:e.comments.filter(e=>e.id!==t),commentsLoading:!1,currentPost:e.currentPost&&(null==r?void 0:r.postId)===e.currentPost.id?o(i({},e.currentPost),{commentCount:e.currentPost.commentCount-1}):e.currentPost,posts:e.posts.map(e=>(null==r?void 0:r.postId)===e.id?o(i({},e),{commentCount:e.commentCount-1}):e)}})}catch(r){throw e({commentsLoading:!1,commentsError:r.message||"댓글 삭제에 실패했습니다."}),r}}),togglePostLike:r=>d(null,null,function*(){try{const{likedPosts:s}=t(),a=s.has(r)?yield et.unlikePost(r):yield et.likePost(r),n=new Set(s);a.liked?n.add(r):n.delete(r),e(e=>{var t;return{likedPosts:n,posts:e.posts.map(e=>e.id===r?o(i({},e),{likeCount:a.likeCount}):e),currentPost:(null==(t=e.currentPost)?void 0:t.id)===r?o(i({},e.currentPost),{likeCount:a.likeCount}):e.currentPost}})}catch(s){throw s}}),toggleCommentLike:r=>d(null,null,function*(){try{const{likedComments:s}=t(),a=s.has(r)?yield tt.unlikeComment(r):yield tt.likeComment(r),n=new Set(s);a.liked?n.add(r):n.delete(r),e(e=>({likedComments:n,comments:e.comments.map(e=>e.id===r?o(i({},e),{likeCount:a.likeCount}):e)}))}catch(s){throw s}}),loadStatistics:()=>d(null,null,function*(){try{e({statisticsLoading:!0,statisticsError:null});const t=yield Xe.getBoardStatistics();e({statistics:t,statisticsLoading:!1})}catch(t){throw e({statisticsLoading:!1,statisticsError:t.message||"통계를 불러오는데 실패했습니다."}),t}}),loadPopularPosts:(t=10)=>d(null,null,function*(){try{e({statisticsLoading:!0,statisticsError:null});const r=yield et.getPopularPosts(t);e({popularPosts:r,statisticsLoading:!1})}catch(r){throw e({statisticsLoading:!1,statisticsError:r.message||"인기 게시글을 불러오는데 실패했습니다."}),r}}),setSearchParams:t=>{e(e=>({searchParams:i(i({},e.searchParams),t)}))},resetSearchParams:()=>{e({searchParams:st})},clearBoardsError:()=>{e({boardsError:null})},clearPostsError:()=>{e({postsError:null})},clearCommentsError:()=>{e({commentsError:null})},clearStatisticsError:()=>{e({statisticsError:null})},reset:()=>{e(at)}}));var lt=(e=>(e.GENERAL="GENERAL",e.NOTICE="NOTICE",e.FAQ="FAQ",e.QNA="QNA",e.REVIEW="REVIEW",e.FREE="FREE",e.JOB_DISCUSSION="JOB_DISCUSSION",e.TIPS="TIPS",e.NEWS="NEWS",e))(lt||{});const it={[lt.GENERAL]:"일반",[lt.NOTICE]:"공지사항",[lt.FAQ]:"FAQ",[lt.QNA]:"Q&A",[lt.REVIEW]:"후기",[lt.FREE]:"자유",[lt.JOB_DISCUSSION]:"구인구직 토론",[lt.TIPS]:"팁과 노하우",[lt.NEWS]:"업계 소식"},ot=e=>{const t=new Date(e),r=(new Date).getTime()-t.getTime(),s=Math.floor(r/36e5),a=Math.floor(s/24);return s<1?"방금 전":s<24?`${s}시간 전`:a<7?`${a}일 전`:t.toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"})},ct=({board:e})=>h.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},transition:{duration:.2},children:h.jsx(g,{to:`/boards/${e.id}`,children:h.jsx(De,{className:"hover:shadow-lg transition-shadow",children:h.jsxs(He,{className:"p-6",children:[h.jsx("div",{className:"flex items-start justify-between mb-3",children:h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),h.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-elderberry-100 text-elderberry-700",children:it[e.type]})]}),h.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description})]})}),h.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("span",{className:"flex items-center",children:[h.jsx(v,{className:"w-4 h-4 mr-1"}),e.postCount,"개 글"]}),e.lastPostDate&&h.jsxs("span",{className:"flex items-center",children:[h.jsx(f,{className:"w-4 h-4 mr-1"}),ot(e.lastPostDate)]})]}),h.jsx(k,{className:"w-4 h-4 text-gray-400"})]})]})})})}),dt=({post:e})=>h.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},transition:{duration:.2},children:h.jsx(g,{to:`/boards/${e.boardId}/posts/${e.id}`,children:h.jsx(De,{className:"hover:shadow-lg transition-shadow",children:h.jsxs(He,{className:"p-4",children:[h.jsx("div",{className:"flex items-start justify-between mb-3",children:h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.isPinned&&h.jsx(S,{className:"w-4 h-4 text-elderberry-600"}),e.isNotice&&h.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"공지"}),h.jsx("span",{className:"text-xs text-gray-500",children:e.boardName})]}),h.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2 line-clamp-1",children:e.title}),e.summary&&h.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.summary})]})}),e.tags&&e.tags.length>0&&h.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[e.tags.slice(0,3).map((e,t)=>h.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-600",children:[h.jsx(R,{className:"w-3 h-3 mr-1"}),e]},t)),e.tags.length>3&&h.jsxs("span",{className:"text-xs text-gray-500",children:["+",e.tags.length-3]})]}),h.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("span",{children:e.isAnonymous?"익명":e.authorName}),h.jsxs("span",{className:"flex items-center",children:[h.jsx(I,{className:"w-3 h-3 mr-1"}),ot(e.createdAt)]})]}),h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsxs("span",{className:"flex items-center",children:[h.jsx(w,{className:"w-3 h-3 mr-1"}),e.viewCount]}),h.jsxs("span",{className:"flex items-center",children:[h.jsx(E,{className:"w-3 h-3 mr-1"}),e.likeCount]}),h.jsxs("span",{className:"flex items-center",children:[h.jsx(v,{className:"w-3 h-3 mr-1"}),e.commentCount]})]})]})]})})})});const mt=Object.freeze(Object.defineProperty({__proto__:null,default:function(){Be({title:"게시판",description:"요양원 관련 정보 공유, Q&A, 후기, 팁과 노하우를 나누는 커뮤니티 게시판",keywords:"게시판, 커뮤니티, 요양원정보, Q&A, 후기, 팁과노하우",ogTitle:"게시판 - 엘더베리",canonicalUrl:"https://elderberry.co.kr/boards"}),u.useEffect(()=>{ze({"@context":"https://schema.org","@type":"DiscussionForumPosting",name:"엘더베리 커뮤니티 게시판",description:"요양원 관련 정보 공유, Q&A, 후기, 팁과 노하우를 나누는 커뮤니티 포럼",about:{"@type":"Thing",name:"요양원 서비스"},audience:{"@type":"Audience",audienceType:"재외동포, 요양원 관련자"},provider:{"@type":"Organization",name:"엘더베리"}},"forum-data"),ze({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"홈",item:"https://elderberry.co.kr"},{"@type":"ListItem",position:2,name:"게시판",item:"https://elderberry.co.kr/boards"}]},"board-breadcrumb")},[]);const[e,t]=x(),{user:r}=Ne(),{boards:s,posts:a,popularPosts:n,boardsLoading:l,postsLoading:c,boardsError:d,postsError:m,postsTotalPages:p,postsCurrentPage:k,postsTotalElements:S,searchParams:R,loadBoards:I,loadPosts:L,loadPopularPosts:O,setSearchParams:P,clearBoardsError:A,clearPostsError:D}=nt(),[M,_]=u.useState(e.get("keyword")||""),[$,H]=u.useState(!1),[U,B]=u.useState(""),[F,K]=u.useState("boards"),V=r&&[Te.CAREGIVER,Te.EMPLOYER,Te.COORDINATOR,Te.ADMIN].includes(r.role);u.useEffect(()=>{I(),O();const t={};e.get("keyword")&&(t.keyword=e.get("keyword")),e.get("boardType")&&(t.boardType=e.get("boardType")),e.get("page")&&(t.page=parseInt(e.get("page"))||0),L(t)},[e]);const z=()=>{const e={page:0,keyword:M||void 0,boardType:U||void 0};P(e),L(e);const r=new URLSearchParams;M&&r.set("keyword",M),U&&r.set("boardType",U),t(r)},G=r=>{const s=o(i({},R),{page:r});P(s),L(s);const a=new URLSearchParams(e);a.set("page",r.toString()),t(a)},W=()=>{_(""),B(""),P({page:0}),L({page:0}),t({})};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"커뮤니티"}),h.jsx("p",{className:"text-gray-600 mt-1",children:"다양한 정보를 공유하고 소통해보세요"})]}),V&&h.jsx("div",{className:"mt-4 sm:mt-0",children:h.jsx(g,{to:"/boards/create-post",children:h.jsxs(Pe,{variant:"primary",children:[h.jsx(y,{className:"w-4 h-4 mr-2"}),"글 작성하기"]})})})]}),h.jsx("div",{className:"border-b border-gray-200",children:h.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"boards",label:"게시판",icon:v},{key:"posts",label:"최신 글",icon:f},{key:"popular",label:"인기 글",icon:b}].map(({key:e,label:t,icon:r})=>h.jsxs("button",{onClick:()=>K(e),className:`\n                flex items-center py-4 px-1 border-b-2 font-medium text-sm transition-colors\n                ${F===e?"border-elderberry-500 text-elderberry-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}\n              `,children:[h.jsx(r,{className:"w-4 h-4 mr-2"}),t]},e))})}),("posts"===F||"popular"===F)&&h.jsx(De,{children:h.jsx(He,{className:"p-6",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex space-x-4",children:[h.jsx("div",{className:"flex-1",children:h.jsxs("div",{className:"relative",children:[h.jsx(j,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),h.jsx("input",{type:"text",placeholder:"제목, 내용, 작성자 검색...",value:M,onChange:e=>_(e.target.value),onKeyPress:e=>"Enter"===e.key&&z(),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500"})]})}),h.jsxs(Pe,{variant:"outline",onClick:()=>H(!$),className:"flex items-center",children:[h.jsx(N,{className:"w-4 h-4 mr-2"}),"필터"]}),h.jsx(Pe,{variant:"primary",onClick:z,children:"검색"})]}),$&&h.jsxs(J.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-gray-200 pt-4",children:[h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"게시판 타입"}),h.jsxs("select",{value:U,onChange:e=>B(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500",children:[h.jsx("option",{value:"",children:"전체 게시판"}),Object.entries(it).map(([e,t])=>h.jsx("option",{value:e,children:t},e))]})]})}),h.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[h.jsx(Pe,{variant:"outline",onClick:W,children:"초기화"}),h.jsx(Pe,{variant:"primary",onClick:z,children:"필터 적용"})]})]})]})})}),(d||m)&&h.jsxs(J.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[h.jsx(T,{className:"w-5 h-5 flex-shrink-0"}),h.jsx("span",{className:"text-sm",children:d||m}),h.jsx("button",{onClick:()=>{A(),D()},className:"ml-auto text-red-600 hover:text-red-800",children:"✕"})]}),"boards"===F&&h.jsx("div",{children:l?h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>h.jsx("div",{className:"animate-pulse",children:h.jsx(De,{children:h.jsxs(He,{className:"p-6",children:[h.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-2"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3 mb-4"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})})},t))}):s.length>0?h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>h.jsx(ct,{board:e},e.id))}):h.jsxs("div",{className:"text-center py-12",children:[h.jsx(v,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),h.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"게시판이 없습니다"}),h.jsx("p",{className:"text-gray-600",children:"아직 생성된 게시판이 없습니다."})]})}),"posts"===F&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("p",{className:"text-sm text-gray-600",children:["총 ",h.jsx("span",{className:"font-semibold text-elderberry-600",children:S}),"개의 게시글이 있습니다",M&&h.jsxs("span",{children:[" ('",M,"' 검색 결과)"]})]})}),c?h.jsx("div",{className:"space-y-4",children:[...Array(5)].map((e,t)=>h.jsx("div",{className:"animate-pulse",children:h.jsx(De,{children:h.jsxs(He,{className:"p-4",children:[h.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-3"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-2"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3 mb-3"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]})})},t))}):a.length>0?h.jsx("div",{className:"space-y-4",children:a.map(e=>h.jsx(dt,{post:e},e.id))}):h.jsxs("div",{className:"text-center py-12",children:[h.jsx(v,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),h.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"게시글이 없습니다"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"검색 조건에 맞는 게시글이 없습니다"}),h.jsx(Pe,{variant:"outline",onClick:W,children:"검색 조건 초기화"})]}),p>1&&h.jsx("div",{className:"flex justify-center",children:h.jsxs("div",{className:"flex space-x-2",children:[h.jsx(Pe,{variant:"outline",disabled:0===k,onClick:()=>G(k-1),children:"이전"}),[...Array(Math.min(5,p))].map((e,t)=>{const r=Math.max(0,Math.min(k-2,p-5))+t;return r>=p?null:h.jsx(Pe,{variant:r===k?"primary":"outline",onClick:()=>G(r),children:r+1},r)}),h.jsx(Pe,{variant:"outline",disabled:k>=p-1,onClick:()=>G(k+1),children:"다음"})]})})]}),"popular"===F&&h.jsx("div",{className:"space-y-4",children:n.length>0?h.jsx("div",{className:"space-y-4",children:n.map((e,t)=>h.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:h.jsx(g,{to:`/boards/posts/${e.id}`,children:h.jsx(De,{className:"hover:shadow-lg transition-shadow",children:h.jsx(He,{className:"p-4",children:h.jsxs("div",{className:"flex items-start space-x-4",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("div",{className:"w-8 h-8 bg-elderberry-100 rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-sm font-bold text-elderberry-600",children:t+1})})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[h.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:e.title}),"up"===e.trend&&h.jsx(b,{className:"w-4 h-4 text-green-500"})]}),h.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[h.jsx("span",{children:e.boardName}),h.jsx("span",{children:e.authorName}),h.jsxs("span",{className:"flex items-center",children:[h.jsx(w,{className:"w-3 h-3 mr-1"}),e.viewCount]}),h.jsxs("span",{className:"flex items-center",children:[h.jsx(E,{className:"w-3 h-3 mr-1"}),e.likeCount]}),h.jsxs("span",{className:"flex items-center",children:[h.jsx(v,{className:"w-3 h-3 mr-1"}),e.commentCount]})]})]})]})})})})},e.id))}):h.jsxs("div",{className:"text-center py-12",children:[h.jsx(C,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),h.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"인기 게시글이 없습니다"}),h.jsx("p",{className:"text-gray-600",children:"아직 인기 게시글이 없습니다."})]})})]})}},Symbol.toStringTag,{value:"Module"})),ut=e=>new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),ht=({comment:e,level:t,onReply:r,onEdit:s,onDelete:a,onLike:n,isLiked:l})=>{const{user:i}=Ne(),[o,c]=u.useState(!1),d=(null==i?void 0:i.id)===e.authorId,m=(null==i?void 0:i.role)===Te.ADMIN||(null==i?void 0:i.role)===Te.COORDINATOR;return h.jsx("div",{className:""+(t>0?"ml-8 border-l-2 border-gray-100 pl-4":""),children:h.jsxs(J.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-lg p-4 mb-4 border border-gray-200",children:[h.jsxs("div",{className:"flex items-start justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-8 h-8 bg-elderberry-100 rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-sm font-semibold text-elderberry-600",children:e.isAnonymous?"익":e.authorName.charAt(0)})}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("span",{className:"font-medium text-gray-900",children:e.isAnonymous?"익명":e.authorName}),h.jsx("span",{className:"text-xs text-gray-500",children:e.authorRole})]}),h.jsx("span",{className:"text-xs text-gray-500",children:ut(e.createdAt)})]})]}),(d||m)&&h.jsxs("div",{className:"relative",children:[h.jsx("button",{onClick:()=>c(!o),className:"p-1 rounded-full hover:bg-gray-100",children:h.jsx(U,{className:"w-4 h-4 text-gray-400"})}),h.jsx(q,{children:o&&h.jsxs(J.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"absolute right-0 mt-2 w-32 bg-white rounded-md shadow-lg border border-gray-200 z-10",children:[d&&h.jsxs("button",{onClick:()=>{s(e),c(!1)},className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[h.jsx(M,{className:"w-3 h-3 mr-2"}),"수정"]}),(d||m)&&h.jsxs("button",{onClick:()=>{a(e.id),c(!1)},className:"flex items-center w-full px-3 py-2 text-sm text-red-600 hover:bg-red-50",children:[h.jsx(_,{className:"w-3 h-3 mr-2"}),"삭제"]})]})})]})]}),h.jsx("div",{className:"prose prose-sm max-w-none mb-4",children:h.jsx("div",{className:"whitespace-pre-wrap text-gray-700",children:e.content})}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("button",{onClick:()=>n(e.id),className:"flex items-center space-x-1 text-sm transition-colors "+(l?"text-red-500":"text-gray-500 hover:text-red-500"),children:[h.jsx(E,{className:"w-4 h-4 "+(l?"fill-current":"")}),h.jsx("span",{children:e.likeCount})]}),h.jsxs("button",{onClick:()=>r(e.id),className:"flex items-center space-x-1 text-sm text-gray-500 hover:text-elderberry-600",children:[h.jsx(B,{className:"w-4 h-4"}),h.jsx("span",{children:"답글"})]})]}),e.replies&&e.replies.length>0&&h.jsx("div",{className:"mt-4",children:e.replies.map(e=>h.jsx(ht,{comment:e,level:t+1,onReply:r,onEdit:s,onDelete:a,onLike:n,isLiked:!1},e.id))})]})})},pt=({onSubmit:e,parentId:t,onCancel:r,placeholder:s="댓글을 작성하세요..."})=>{const[a,n]=u.useState(""),[l,i]=u.useState(!1),[o,c]=u.useState(!1);return h.jsxs(J.form,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},onSubmit:s=>d(null,null,function*(){if(s.preventDefault(),a.trim())try{c(!0),yield e({postId:0,parentId:t,content:a.trim(),isAnonymous:l}),n(""),i(!1),r&&r()}catch(o){}finally{c(!1)}else alert("댓글 내용을 입력해주세요.")}),className:"bg-gray-50 rounded-lg p-4 space-y-4",children:[h.jsx("textarea",{value:a,onChange:e=>n(e.target.value),placeholder:s,className:"w-full h-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500 resize-none",required:!0}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("label",{className:"flex items-center",children:[h.jsx("input",{type:"checkbox",checked:l,onChange:e=>i(e.target.checked),className:"w-4 h-4 text-elderberry-600 border-gray-300 rounded focus:ring-elderberry-500"}),h.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"익명으로 작성"})]}),h.jsxs("div",{className:"flex space-x-2",children:[r&&h.jsx(Pe,{type:"button",variant:"outline",onClick:r,children:"취소"}),h.jsxs(Pe,{type:"submit",variant:"primary",loading:o,children:[o?"작성 중...":"댓글 작성",h.jsx(H,{className:"w-4 h-4 ml-2"})]})]})]})]})};const xt=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{boardId:e,postId:t}=L(),r=O(),{user:s}=Ne(),{currentPost:a,comments:n,postsLoading:l,commentsLoading:c,postsError:m,commentsError:p,likedPosts:x,likedComments:y,loadPost:f,loadComments:b,createComment:j,deletePost:N,togglePostLike:C,toggleCommentLike:k,clearPostsError:H,clearCommentsError:U}=nt(),[B,F]=u.useState(!1),[K,V]=u.useState(null),z=parseInt(t||"0"),G=a&&(null==s?void 0:s.id)===a.authorId,W=(null==s?void 0:s.role)===Te.ADMIN||(null==s?void 0:s.role)===Te.COORDINATOR,J=s&&[Te.CAREGIVER,Te.EMPLOYER,Te.COORDINATOR,Te.ADMIN].includes(s.role),Y=x.has(z);u.useEffect(()=>{z&&(f(z),b(z))},[z]);const Q=e=>d(null,null,function*(){a&&(yield j(o(i({},e),{postId:a.id})),F(!1),V(null))});return l?h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:"animate-pulse",children:[h.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),h.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-8"}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"h-64 bg-gray-200 rounded"}),h.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})]})}):m||!a?h.jsxs("div",{className:"text-center py-12",children:[h.jsx(T,{className:"w-16 h-16 text-red-300 mx-auto mb-4"}),h.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"게시글을 찾을 수 없습니다"}),h.jsx("p",{className:"text-gray-600 mb-4",children:m||"요청한 게시글이 존재하지 않거나 삭제되었습니다."}),h.jsxs("div",{className:"space-x-3",children:[h.jsxs(Pe,{variant:"outline",onClick:()=>r(-1),children:[h.jsx(P,{className:"w-4 h-4 mr-2"}),"뒤로 가기"]}),h.jsx(g,{to:"/boards",children:h.jsx(Pe,{variant:"primary",children:"게시판 목록"})})]})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs(Pe,{variant:"outline",onClick:()=>r(-1),className:"flex items-center",children:[h.jsx(P,{className:"w-4 h-4 mr-2"}),"뒤로"]}),h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsxs(Pe,{variant:"outline",onClick:()=>d(null,null,function*(){if(navigator.share)try{yield navigator.share({title:null==a?void 0:a.title,text:null==a?void 0:a.content,url:window.location.href})}catch(e){}else navigator.clipboard.writeText(window.location.href),alert("링크가 클립보드에 복사되었습니다!")}),children:[h.jsx(A,{className:"w-4 h-4 mr-2"}),"공유"]}),h.jsxs(Pe,{variant:"outline",children:[h.jsx(D,{className:"w-4 h-4 mr-2"}),"북마크"]}),(G||W)&&h.jsxs(h.Fragment,{children:[h.jsx(g,{to:`/boards/${e}/posts/${a.id}/edit`,children:h.jsxs(Pe,{variant:"outline",children:[h.jsx(M,{className:"w-4 h-4 mr-2"}),"수정"]})}),h.jsxs(Pe,{variant:"outline",onClick:()=>d(null,null,function*(){if(a&&window.confirm("정말로 이 게시글을 삭제하시겠습니까?"))try{yield N(a.id),r(`/boards/${e||""}`)}catch(t){}}),children:[h.jsx(_,{className:"w-4 h-4 mr-2"}),"삭제"]})]})]})]}),h.jsx(De,{children:h.jsxs(He,{className:"p-6",children:[h.jsxs("div",{className:"border-b border-gray-200 pb-6 mb-6",children:[h.jsx("div",{className:"flex items-start justify-between mb-4",children:h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.isPinned&&h.jsx(S,{className:"w-4 h-4 text-elderberry-600"}),a.isNotice&&h.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"공지"}),h.jsx("span",{className:"text-sm text-gray-500",children:a.boardName})]}),h.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:a.title}),h.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-8 h-8 bg-elderberry-100 rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-sm font-semibold text-elderberry-600",children:a.isAnonymous?"익":a.authorName.charAt(0)})}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:a.isAnonymous?"익명":a.authorName}),h.jsx("span",{className:"text-xs text-gray-500 ml-2",children:a.authorRole})]})]}),h.jsxs("span",{className:"flex items-center",children:[h.jsx(I,{className:"w-4 h-4 mr-1"}),ut(a.createdAt)]})]})]})}),h.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[h.jsxs("span",{className:"flex items-center",children:[h.jsx(w,{className:"w-4 h-4 mr-1"}),"조회 ",a.viewCount]}),h.jsxs("button",{onClick:()=>C(a.id),className:"flex items-center transition-colors "+(Y?"text-red-500":"hover:text-red-500"),children:[h.jsx(E,{className:"w-4 h-4 mr-1 "+(Y?"fill-current":"")}),"좋아요 ",a.likeCount]}),h.jsxs("span",{className:"flex items-center",children:[h.jsx(v,{className:"w-4 h-4 mr-1"}),"댓글 ",a.commentCount]})]})]}),h.jsx("div",{className:"prose max-w-none mb-6",children:h.jsx("div",{className:"whitespace-pre-wrap text-gray-700",children:a.content})}),a.attachments&&a.attachments.length>0&&h.jsxs("div",{className:"border-t border-gray-200 pt-6 mb-6",children:[h.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"첨부파일"}),h.jsx("div",{className:"space-y-2",children:a.attachments.map(e=>h.jsxs("a",{href:e.downloadUrl,download:e.originalFileName,className:"flex items-center space-x-2 text-sm text-elderberry-600 hover:text-elderberry-800",children:[h.jsx($,{className:"w-4 h-4"}),h.jsx("span",{children:e.originalFileName}),h.jsxs("span",{className:"text-xs text-gray-500",children:["(",(e.fileSize/1024/1024).toFixed(1),"MB)"]})]},e.id))})]}),a.tags&&a.tags.length>0&&h.jsx("div",{className:"border-t border-gray-200 pt-6",children:h.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map((e,t)=>h.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-elderberry-100 text-elderberry-700",children:[h.jsx(R,{className:"w-3 h-3 mr-1"}),e]},t))})})]})}),h.jsxs(De,{children:[h.jsx(Me,{children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs(_e,{children:["댓글 ",a.commentCount,"개"]}),J&&h.jsxs(Pe,{variant:"outline",onClick:()=>F(!B),children:[h.jsx(v,{className:"w-4 h-4 mr-2"}),"댓글 작성"]})]})}),h.jsxs(He,{children:[h.jsx(q,{children:B&&J&&h.jsx("div",{className:"mb-6",children:h.jsx(pt,{onSubmit:Q,onCancel:()=>F(!1)})})}),c?h.jsx("div",{className:"space-y-4",children:[...Array(3)].map((e,t)=>h.jsx("div",{className:"animate-pulse",children:h.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[h.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-2"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})},t))}):n.length>0?h.jsxs("div",{className:"space-y-4",children:[n.map(e=>h.jsx(ht,{comment:e,level:0,onReply:e=>V(e),onEdit:e=>{},onDelete:e=>d(null,null,function*(){window.confirm("댓글을 삭제하시겠습니까?")}),onLike:e=>k(e),isLiked:y.has(e.id)},e.id)),h.jsx(q,{children:K&&J&&h.jsx("div",{className:"ml-8",children:h.jsx(pt,{onSubmit:e=>Q(o(i({},e),{parentId:K})),parentId:K,onCancel:()=>V(null),placeholder:"답글을 작성하세요..."})})})]}):h.jsxs("div",{className:"text-center py-8",children:[h.jsx(v,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"아직 댓글이 없습니다"}),J&&h.jsx(Pe,{variant:"outline",onClick:()=>F(!0),children:"첫 댓글을 작성해보세요"})]})]})]})]})}},Symbol.toStringTag,{value:"Module"}));const gt=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const e=O(),[t]=x(),{user:r}=Ne(),{boards:s,boardsLoading:a,postsLoading:n,boardsError:l,postsError:c,loadBoards:m,createPost:p,clearBoardsError:g,clearPostsError:y}=nt(),[v,f]=u.useState(parseInt(t.get("boardId")||"0")||0),[b,j]=u.useState(""),[N,E]=u.useState(""),[C,k]=u.useState(!1),[I,L]=u.useState(!1),[A,D]=u.useState(!1),[M,_]=u.useState(""),[$,H]=u.useState([]),[U,B]=u.useState([]),q=(null==r?void 0:r.role)===Te.ADMIN||(null==r?void 0:r.role)===Te.COORDINATOR,Y=(null==r?void 0:r.role)===Te.ADMIN||(null==r?void 0:r.role)===Te.COORDINATOR;u.useEffect(()=>{m()},[]),u.useEffect(()=>{s.length>0&&0===v&&f(s[0].id)},[s,v]);const Q=()=>{const e=M.trim();e&&!$.includes(e)&&$.length<10&&(H([...$,e]),_(""))},Z=(e,t)=>d(null,null,function*(){if(!e.file)return null;try{B(e=>e.map((e,r)=>r===t?o(i({},e),{uploading:!0}):e));const r=yield rt.uploadFile(e.file);return B(e=>e.map((e,s)=>s===t?o(i({},e),{id:r.id,uploading:!1,uploaded:!0,url:r.downloadUrl}):e)),r.id}catch(r){return B(e=>e.map((e,r)=>r===t?o(i({},e),{uploading:!1,uploaded:!1}):e)),alert(`파일 업로드에 실패했습니다: ${e.name}`),null}}),X=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return a?h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:"animate-pulse",children:[h.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),h.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs(Pe,{variant:"outline",onClick:()=>e(-1),className:"flex items-center",children:[h.jsx(P,{className:"w-4 h-4 mr-2"}),"뒤로"]}),h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"게시글 작성"})]}),h.jsx("div",{className:"flex items-center space-x-3",children:h.jsxs(Pe,{variant:"outline",onClick:()=>{},children:[h.jsx(w,{className:"w-4 h-4 mr-2"}),"미리보기"]})})]}),(l||c)&&h.jsxs(J.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[h.jsx(T,{className:"w-5 h-5 flex-shrink-0"}),h.jsx("span",{className:"text-sm",children:l||c}),h.jsx("button",{onClick:()=>{g(),y()},className:"ml-auto text-red-600 hover:text-red-800",children:"✕"})]}),h.jsxs("form",{onSubmit:t=>d(null,null,function*(){if(t.preventDefault(),v)if(b.trim())if(N.trim())try{const t=[];for(let e=0;e<U.length;e++){const r=U[e];if(r.file&&!r.uploaded){const s=yield Z(r,e);s&&t.push(s)}else r.id&&t.push(r.id)}const r={boardId:v,title:b.trim(),content:N.trim(),isAnonymous:C,isNotice:!!q&&I,isPinned:!!Y&&A,tags:$.length>0?$:void 0,attachmentIds:t.length>0?t:void 0},s=yield p(r);e(`/boards/${v}/posts/${s.id}`)}catch(r){alert("게시글 작성에 실패했습니다. 다시 시도해주세요.")}else alert("내용을 입력해주세요.");else alert("제목을 입력해주세요.");else alert("게시판을 선택해주세요.")}),className:"space-y-6",children:[h.jsxs(De,{children:[h.jsx(Me,{children:h.jsx(_e,{children:"기본 정보"})}),h.jsxs(He,{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["게시판 ",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsxs("select",{value:v,onChange:e=>f(parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500",required:!0,children:[h.jsx("option",{value:0,children:"게시판을 선택해주세요"}),s.map(e=>h.jsx("option",{value:e.id,children:e.name},e.id))]})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["제목 ",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{type:"text",value:b,onChange:e=>j(e.target.value),placeholder:"제목을 입력하세요",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500",maxLength:200,required:!0}),h.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[b.length,"/200자"]})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["내용 ",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("textarea",{value:N,onChange:e=>E(e.target.value),placeholder:"내용을 입력하세요",className:"w-full h-64 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500 resize-none",required:!0}),h.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[N.length,"자"]})]})]})]}),h.jsxs(De,{children:[h.jsx(Me,{children:h.jsx(_e,{children:"게시 옵션"})}),h.jsxs(He,{className:"space-y-4",children:[h.jsxs("label",{className:"flex items-center",children:[h.jsx("input",{type:"checkbox",checked:C,onChange:e=>k(e.target.checked),className:"w-4 h-4 text-elderberry-600 border-gray-300 rounded focus:ring-elderberry-500"}),h.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"익명으로 작성"})]}),q&&h.jsxs("label",{className:"flex items-center",children:[h.jsx("input",{type:"checkbox",checked:I,onChange:e=>L(e.target.checked),className:"w-4 h-4 text-elderberry-600 border-gray-300 rounded focus:ring-elderberry-500"}),h.jsxs("div",{className:"ml-2 flex items-center",children:[h.jsx(F,{className:"w-4 h-4 text-red-500 mr-1"}),h.jsx("span",{className:"text-sm text-gray-700",children:"공지사항으로 등록"})]})]}),Y&&h.jsxs("label",{className:"flex items-center",children:[h.jsx("input",{type:"checkbox",checked:A,onChange:e=>D(e.target.checked),className:"w-4 h-4 text-elderberry-600 border-gray-300 rounded focus:ring-elderberry-500"}),h.jsxs("div",{className:"ml-2 flex items-center",children:[h.jsx(S,{className:"w-4 h-4 text-elderberry-500 mr-1"}),h.jsx("span",{className:"text-sm text-gray-700",children:"상단 고정"})]})]})]})]}),h.jsxs(De,{children:[h.jsx(Me,{children:h.jsx(_e,{children:"태그"})}),h.jsxs(He,{className:"space-y-4",children:[h.jsxs("div",{className:"flex space-x-2",children:[h.jsx("input",{type:"text",value:M,onChange:e=>_(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),Q())},placeholder:"태그를 입력하고 Enter를 누르세요",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500",maxLength:20}),h.jsxs(Pe,{type:"button",variant:"outline",onClick:Q,children:[h.jsx(R,{className:"w-4 h-4 mr-2"}),"추가"]})]}),$.length>0&&h.jsx("div",{className:"flex flex-wrap gap-2",children:$.map((e,t)=>h.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-elderberry-100 text-elderberry-700",children:[h.jsx(R,{className:"w-3 h-3 mr-1"}),e,h.jsx("button",{type:"button",onClick:()=>(e=>{H($.filter((t,r)=>r!==e))})(t),className:"ml-1 text-elderberry-500 hover:text-elderberry-700",children:h.jsx(K,{className:"w-3 h-3"})})]},t))}),h.jsxs("p",{className:"text-xs text-gray-500",children:["최대 10개까지 추가할 수 있습니다. (",$.length,"/10)"]})]})]}),h.jsxs(De,{children:[h.jsx(Me,{children:h.jsx(_e,{children:"첨부파일"})}),h.jsxs(He,{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("input",{type:"file",multiple:!0,onChange:e=>{Array.from(e.target.files||[]).forEach(e=>{if(e.size>10485760)return void alert(`파일 크기가 너무 큽니다: ${e.name} (최대 10MB)`);const t={file:e,name:e.name,size:e.size,type:e.type,uploading:!1,uploaded:!1};B(e=>[...e,t])}),e.target.value=""},className:"hidden",id:"file-upload",accept:"image/*,.pdf,.doc,.docx,.txt,.zip,.rar"}),h.jsxs("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer",children:[h.jsx(V,{className:"w-4 h-4 mr-2"}),"파일 선택"]}),h.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"최대 10MB까지 업로드 가능합니다. (이미지, PDF, 문서, 압축파일)"})]}),U.length>0&&h.jsx("div",{className:"space-y-2",children:U.map((e,t)=>h.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-8 h-8 bg-elderberry-100 rounded-lg flex items-center justify-center",children:e.type.startsWith("image/")?h.jsx(z,{className:"w-4 h-4 text-elderberry-600"}):h.jsx(G,{className:"w-4 h-4 text-elderberry-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.name}),h.jsx("p",{className:"text-xs text-gray-500",children:X(e.size)})]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[e.uploading&&h.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-elderberry-600"}),e.uploaded&&h.jsx("div",{className:"w-4 h-4 bg-green-100 rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-xs text-green-600",children:"✓"})}),h.jsx("button",{type:"button",onClick:()=>(e=>{B(t=>t.filter((t,r)=>r!==e))})(t),className:"text-gray-400 hover:text-red-500",children:h.jsx(K,{className:"w-4 h-4"})})]})]},t))})]})]}),h.jsxs("div",{className:"flex justify-end space-x-3",children:[h.jsx(Pe,{type:"button",variant:"outline",onClick:()=>e(-1),children:"취소"}),h.jsxs(Pe,{type:"submit",variant:"primary",loading:n,disabled:!v||!b.trim()||!N.trim(),children:[h.jsx(W,{className:"w-4 h-4 mr-2"}),n?"작성 중...":"게시글 작성"]})]})]})]})}},Symbol.toStringTag,{value:"Module"}));export{Pe as B,De as C,Te as M,xt as P,Ge as S,Se as T,He as a,Me as b,Le as c,_e as d,Be as e,ze as f,$e as g,Ue as h,Ne as i,Re as j,ce as k,mt as l,gt as m,le as n,Ie as u};
