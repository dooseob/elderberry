var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(s,t,l)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[t]=l,n=(e,s)=>{for(var t in s||(s={}))r.call(s,t)&&i(e,t,s[t]);if(l)for(var t of l(s))a.call(s,t)&&i(e,t,s[t]);return e},c=(e,l)=>s(e,t(l)),d=(e,s)=>{var t={};for(var i in e)r.call(e,i)&&s.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&l)for(var i of l(e))s.indexOf(i)<0&&a.call(e,i)&&(t[i]=e[i]);return t};import{r as x,j as o,u as m,Q as h,V as f,k as p,z as u,W as b,Y as j,Z as g,b as N,h as v}from"./react-vendor-BYDInCC8.js";import{f as w,B as y,C as k,c as C}from"./auth-pages-98jQz8eG.js";const z={log:(...e)=>{},warn:(...e)=>{},debug:(...e)=>{},performance:(e,s)=>{},action:(e,s)=>{}},O={error:(e,s,t)=>{},warn:(e,s)=>{},network:(e,s)=>{},component:(e,s,t)=>{}},S=x.createContext(void 0),E=({children:e})=>o.jsx("div",{children:e}),_=({children:e})=>{const[s,t]=x.useState(!1);return o.jsx(S.Provider,{value:{isVisible:s,setIsVisible:t},children:o.jsx("div",{className:"relative inline-block",onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),children:e})})},T=x.forwardRef((e,s)=>{var t=e,{className:l,children:r,asChild:a=!1}=t,i=d(t,["className","children","asChild"]);return a&&x.isValidElement(r)?x.cloneElement(r,n({ref:s,className:w("cursor-pointer",l)},i)):o.jsx("div",c(n({ref:s,className:w("cursor-pointer",l)},i),{children:r}))});T.displayName="TooltipTrigger";const P=x.forwardRef((e,s)=>{var t=e,{className:l,side:r="top",sideOffset:a=4,children:i}=t,m=d(t,["className","side","sideOffset","children"]);const h=x.useContext(S);return(null==h?void 0:h.isVisible)?o.jsx("div",c(n({ref:s,className:w("absolute z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95","top"===r&&"bottom-full mb-2","bottom"===r&&"top-full mt-2","left"===r&&"right-full mr-2","right"===r&&"left-full ml-2",l)},m),{children:i})):null});P.displayName="TooltipContent";const I=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const e=m(),[s,t]=x.useState(!1),[l,r]=x.useState(""),a=[{icon:o.jsx(b,{className:"w-4 h-4"}),text:"도움말"},{icon:o.jsx(j,{className:"w-4 h-4"}),text:"로그인"},{icon:o.jsx(g,{className:"w-4 h-4"}),text:"Elderberry로 이동",onClick:()=>e("/")}],i=()=>{const s=l.trim();s&&e("/chat",{state:{prompt:s}})},n=()=>{e("/chat")};return o.jsxs("div",{className:"flex h-screen items-start bg-white",children:[o.jsxs("aside",{className:"hidden sm:flex flex-col h-full items-start py-[15px] sm:py-[20px] md:py-[30px] bg-white border-r border-[#e8e8e8] transition-all duration-300 "+(s?"w-[60px] px-2":"w-[180px] sm:w-[220px] md:w-[260px] pl-2 sm:pl-4 md:pl-6 pr-2 sm:pr-4 md:pr-[25px]"),children:[o.jsxs("div",{className:"flex flex-col gap-5 pb-5 w-full "+(s?"items-center":"items-start"),children:[o.jsxs("div",{className:"flex items-center w-full "+(s?"justify-center":"justify-between"),children:[!s&&o.jsx("div",{className:"flex flex-col w-[132px] h-[26px] items-start",children:o.jsx("div",{className:"flex items-center",children:o.jsx("span",{className:"font-bold text-lg",children:"ai search"})})}),o.jsx(y,{variant:"outline",size:"icon",className:"w-8 h-8 border-[#e4e4e4]",onClick:()=>t(!s),children:s?o.jsx(h,{className:"w-5 h-5"}):o.jsx(f,{className:"w-5 h-5"})})]}),!s&&o.jsxs(y,{variant:"outline",className:"flex h-[42px] items-center justify-center gap-1 px-[27px] py-[11px] w-full border-[#dedede]",onClick:n,children:[o.jsx(p,{className:"w-4 h-4"}),o.jsx("span",{className:"font-bold text-[14.2px] text-[#404042]",children:"새 대화"})]}),s&&o.jsx(y,{variant:"outline",size:"icon",className:"w-8 h-8 border-[#dedede]",onClick:n,children:o.jsx(p,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"flex flex-col pt-[21px] pb-0 w-full bg-white border-t border-[#e4e4e4] mt-auto "+(s?"items-center":"items-start"),children:o.jsx("div",{className:"flex flex-col gap-1 w-full "+(s?"items-center":"items-start"),children:a.map((e,t)=>o.jsxs("div",{className:"flex min-h-[22px] items-center gap-1.5 p-1.5 w-full cursor-pointer hover:bg-gray-50 rounded "+(s?"justify-center":""),onClick:e.onClick,children:[o.jsx("div",{className:"flex flex-col w-4 h-4 "+(s?"items-center":"items-start"),children:e.icon}),!s&&o.jsx("div",{className:"flex flex-col h-[22.39px] items-start flex-1",children:o.jsx("div",{className:"relative self-stretch mt-[-1.00px] font-normal text-[#404042] text-[13.1px] tracking-[0] leading-[22.4px] overflow-hidden text-ellipsis",children:e.text})}),"로그인"===e.text&&o.jsx(E,{children:o.jsxs(_,{children:[o.jsx(T,{asChild:!0,children:o.jsx("div",{className:"relative"})}),o.jsx(P,{side:"right",className:"bg-[#202020e6] border-none rounded-md",children:o.jsx("span",{className:"font-bold text-white text-[12.2px]",children:"로그인 해주세요."})})]})})]},t))})})]}),o.jsx("div",{className:"sm:hidden fixed top-4 left-4 z-10",children:o.jsx(y,{variant:"outline",size:"icon",className:"w-10 h-10 border-[#e4e4e4]",children:o.jsx(p,{className:"w-5 h-5 rotate-45"})})}),o.jsxs("main",{className:"flex flex-col items-center justify-center flex-1 h-full bg-white overflow-y-auto",children:[o.jsxs("div",{className:"flex flex-col items-center justify-center gap-6 w-full max-w-[900px] px-4 sm:px-8 md:px-16",children:[o.jsx("div",{className:"flex flex-col items-center w-full",children:o.jsx("h1",{className:"font-bold text-[#111111] text-[28.2px] text-center leading-[48px]",children:"Elderberry"})}),o.jsxs(k,{className:"flex flex-col w-full bg-white rounded-2xl border-2 border-[#29b79c] shadow-[0px_2px_10px_#00000029]",children:[o.jsx(C,{className:"p-0 w-full bg-white",children:o.jsx("div",{className:"flex flex-col w-full",children:o.jsx("textarea",{value:l,onChange:e=>r(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),i())},className:"w-full min-h-[80px] p-4 text-[15px] text-[#333] bg-transparent border-none outline-none resize-none placeholder:text-[#818181]",placeholder:"당신의 노년을 돕습니다.",rows:2})})}),o.jsxs("div",{className:"flex items-center justify-between w-full px-4 py-3 border-t border-[#e4e4e4]",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(y,{variant:"ghost",size:"sm",className:"h-8 px-3 text-[#666] hover:bg-gray-100 text-sm",children:"📎 첨부하기"}),o.jsx(y,{variant:"ghost",size:"sm",className:"h-8 px-3 text-[#666] hover:bg-gray-100 text-sm",children:"📄 문서첨부"})]}),o.jsx(y,{variant:"ghost",size:"icon",className:"w-10 h-10 p-0 hover:bg-gray-100 rounded-full",onClick:i,disabled:!l.trim(),children:o.jsx(u,{className:"w-5 h-5 text-[#29b79c]"})})]})]})]}),o.jsxs("footer",{className:"flex items-center justify-center gap-[12.01px] w-full mt-8",children:[o.jsx("div",{className:"text-[#818181] text-[11.1px] text-center leading-[19.2px]",children:"AI 모델에 의해 부정확한 정보가 포함될 수 있습니다."}),o.jsxs("div",{className:"text-[#818181] text-[11.2px] text-center leading-[19.2px]",children:[o.jsx("span",{className:"font-bold",children:"개인정보처리방침 "}),o.jsx("span",{className:"font-normal",children:"이용약관"})]})]})]})]})}},Symbol.toStringTag,{value:"Module"}));const D=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const e=N(),s=m(),[t,l]=x.useState(!1),[r,a]=x.useState([]),[i,n]=x.useState(""),[c,d]=x.useState(!1),[p,w]=x.useState(""),S=x.useRef(null);x.useEffect(()=>{var s;const t=null==(s=e.state)?void 0:s.prompt;t&&(n(t),setTimeout(()=>{P(t)},100))},[e.state]),x.useEffect(()=>{_()},[r]);const E=[{icon:o.jsx(b,{className:"w-4 h-4"}),text:"도움말"},{icon:o.jsx(j,{className:"w-4 h-4"}),text:"로그인"},{icon:o.jsx(g,{className:"w-4 h-4"}),text:"Elderberry로 이동",onClick:()=>s("/")}],_=()=>{S.current&&(S.current.scrollTop=S.current.scrollHeight)},T=(e,s,t)=>{const l={id:Date.now(),text:e,isUser:s,timestamp:(new Date).toISOString(),extractedInfo:t};a(e=>[...e,l])},P=(...e)=>{return s=null,t=[...e],l=function*(e=i.trim()){if(e){T(e,!0),n(""),d(!0),w("");try{const s=yield fetch("/api/chatbot/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})});if(!s.ok){const e=yield s.text();throw O.network("/api/chatbot/message",{status:s.status,statusText:s.statusText,errorText:e}),new Error(`HTTP error! status: ${s.status}`)}const t=yield s.json();z.log("서버 응답:",t);const l=t.response||"죄송합니다. 응답을 처리할 수 없습니다.";"coordinator_recommendation"===t.response_type&&t.recommendations?T(l,!1,{recommendations:t.recommendations}):T(l,!1)}catch(s){O.error("챗봇 메시지 처리 오류",s),w("메시지 처리 중 오류가 발생했습니다. 다시 시도해 주세요."),T("죄송합니다. 현재 서버에 연결할 수 없습니다. 잠시 후 다시 시도해주세요.",!1)}finally{d(!1)}}},new Promise((e,r)=>{var a=e=>{try{n(l.next(e))}catch(s){r(s)}},i=e=>{try{n(l.throw(e))}catch(s){r(s)}},n=s=>s.done?e(s.value):Promise.resolve(s.value).then(a,i);n((l=l.apply(s,t)).next())});var s,t,l},I=()=>{s("/chat-home")};return o.jsxs("div",{className:"flex h-screen items-start bg-white",children:[o.jsxs("aside",{className:"hidden sm:flex flex-col h-full items-start py-[15px] sm:py-[20px] md:py-[30px] bg-white border-r border-[#e8e8e8] transition-all duration-300 "+(t?"w-[60px] px-2":"w-[180px] sm:w-[220px] md:w-[260px] pl-2 sm:pl-4 md:pl-6 pr-2 sm:pr-4 md:pr-[25px]"),children:[o.jsxs("div",{className:"flex flex-col gap-5 pb-5 w-full "+(t?"items-center":"items-start"),children:[o.jsxs("div",{className:"flex items-center w-full "+(t?"justify-center":"justify-between"),children:[!t&&o.jsx("div",{className:"flex flex-col w-[132px] h-[26px] items-start",children:o.jsx("div",{className:"flex items-center",children:o.jsx("span",{className:"font-bold text-lg",children:"ai search"})})}),o.jsx(y,{variant:"outline",size:"icon",className:"w-8 h-8 border-[#e4e4e4]",onClick:()=>l(!t),children:t?o.jsx(h,{className:"w-5 h-5"}):o.jsx(f,{className:"w-5 h-5"})})]}),!t&&o.jsxs(y,{variant:"outline",className:"flex h-[42px] items-center justify-center gap-1 px-[27px] py-[11px] w-full border-[#dedede]",onClick:I,children:[o.jsx(v,{className:"w-4 h-4"}),o.jsx("span",{className:"font-bold text-[14.2px] text-[#404042]",children:"홈으로"})]}),t&&o.jsx(y,{variant:"outline",size:"icon",className:"w-8 h-8 border-[#dedede]",onClick:I,children:o.jsx(v,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"flex flex-col pt-[21px] pb-0 w-full bg-white border-t border-[#e4e4e4] mt-auto "+(t?"items-center":"items-start"),children:o.jsx("div",{className:"flex flex-col gap-1 w-full "+(t?"items-center":"items-start"),children:E.map((e,s)=>o.jsxs("div",{className:"flex min-h-[22px] items-center gap-1.5 p-1.5 w-full cursor-pointer hover:bg-gray-50 rounded "+(t?"justify-center":""),onClick:e.onClick,children:[o.jsx("div",{className:"flex flex-col w-4 h-4 "+(t?"items-center":"items-start"),children:e.icon}),!t&&o.jsx("div",{className:"flex flex-col h-[22.39px] items-start flex-1",children:o.jsx("div",{className:"relative self-stretch mt-[-1.00px] font-normal text-[#404042] text-[13.1px] tracking-[0] leading-[22.4px] overflow-hidden text-ellipsis",children:e.text})})]},s))})})]}),o.jsxs("main",{className:"flex flex-col flex-1 h-full bg-white",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#e8e8e8] bg-[#f8f9fa]",children:[o.jsx("h1",{className:"font-bold text-xl text-[#111111]",children:"Elderberry Chat"}),o.jsx(y,{variant:"outline",size:"sm",onClick:()=>{a([]),w("")},className:"text-[#666] hover:bg-gray-100",children:"대화 내용 지우기"})]}),o.jsxs("div",{ref:S,className:"flex-1 overflow-y-auto p-6 space-y-6",style:{maxHeight:"calc(100vh - 200px)"},children:[r.map(e=>o.jsxs("div",{className:"animate-in fade-in duration-300",children:[o.jsx("div",{className:`flex ${e.isUser?"justify-end":"justify-start"} mb-2`,children:o.jsxs("div",{className:"max-w-[75%] "+(e.isUser?"ml-12":"mr-12"),children:[o.jsxs("div",{className:"text-xs text-gray-500 mb-1 "+(e.isUser?"text-right":"text-left"),children:[e.isUser?"나":"Elderberry"," • ",new Date(e.timestamp).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})]}),o.jsx("div",{className:"p-4 rounded-2xl shadow-sm "+(e.isUser?"bg-[#29b79c] text-white rounded-br-md":"bg-white text-[#333] border border-gray-200 rounded-bl-md"),children:o.jsx("div",{className:"text-[15px] leading-relaxed whitespace-pre-wrap break-words",children:e.text})})]})}),e.extractedInfo&&Object.keys(e.extractedInfo).length>0&&o.jsx("div",{className:"flex justify-start",children:o.jsx("div",{className:"max-w-[75%] mr-12 mt-2",children:e.extractedInfo.recommendations?o.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),o.jsx("span",{className:"text-sm font-semibold text-green-800",children:"추천 요양보호사"})]}),o.jsx("div",{className:"space-y-3",children:e.extractedInfo.recommendations.map((e,s)=>o.jsxs("div",{className:"bg-white/70 p-3 rounded-lg border border-green-100",children:[o.jsx("div",{className:"font-medium text-green-900 mb-1",children:e.name||`요양보호사 ${s+1}`}),e.experience&&o.jsxs("div",{className:"text-sm text-green-700 mb-1",children:["경력: ",e.experience]}),e.specialization&&o.jsxs("div",{className:"text-sm text-green-700 mb-1",children:["전문분야: ",e.specialization]}),e.location&&o.jsxs("div",{className:"text-sm text-green-700 mb-1",children:["지역: ",e.location]}),e.rating&&o.jsxs("div",{className:"text-sm text-green-700",children:["평점: ⭐ ",e.rating]})]},s))})]}):o.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),o.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"추출된 정보"})]}),o.jsx("pre",{className:"text-sm text-blue-700 whitespace-pre-wrap font-mono bg-white/50 p-3 rounded-lg overflow-x-auto",children:JSON.stringify(e.extractedInfo,null,2)})]})})})]},e.id)),c&&o.jsx("div",{className:"flex justify-start animate-in fade-in duration-300",children:o.jsxs("div",{className:"max-w-[75%] mr-12",children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Elderberry • 입력 중..."}),o.jsx("div",{className:"bg-white border border-gray-200 text-[#666] p-4 rounded-2xl rounded-bl-md shadow-sm",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex space-x-1",children:[o.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),o.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),o.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),o.jsx("span",{className:"text-sm",children:"응답 생성 중입니다..."})]})})]})}),0===r.length&&!c&&o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#29b79c] to-[#20a085] rounded-full flex items-center justify-center mb-4",children:o.jsx("span",{className:"text-2xl text-white",children:"🤖"})}),o.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Elderberry와 대화를 시작해보세요"}),o.jsx("p",{className:"text-gray-500 max-w-md",children:"궁금한 것이 있으시면 언제든지 물어보세요. 도움이 되도록 최선을 다하겠습니다."})]})]}),p&&o.jsx("div",{className:"mx-4 p-3 bg-[#f8d7da] text-[#dc3545] rounded-lg border border-[#f5c6cb]",children:p}),o.jsx("div",{className:"p-4 border-t border-[#e8e8e8]",children:o.jsxs(k,{className:"flex flex-col w-full bg-white rounded-2xl border-2 border-[#29b79c] shadow-[0px_2px_10px_#00000029]",children:[o.jsx(C,{className:"p-0 w-full bg-white",children:o.jsx("div",{className:"flex flex-col w-full",children:o.jsx("textarea",{value:i,onChange:e=>n(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),P())},className:"w-full min-h-[80px] p-4 text-[15px] text-[#333] bg-transparent border-none outline-none resize-none placeholder:text-[#818181]",placeholder:"메시지를 입력하세요...",rows:2,disabled:c})})}),o.jsxs("div",{className:"flex items-center justify-between w-full px-4 py-3 border-t border-[#e4e4e4]",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(y,{variant:"ghost",size:"sm",className:"h-8 px-3 text-[#666] hover:bg-gray-100 text-sm",children:"📎 첨부하기"}),o.jsx(y,{variant:"ghost",size:"sm",className:"h-8 px-3 text-[#666] hover:bg-gray-100 text-sm",children:"📄 문서첨부"})]}),o.jsx(y,{variant:"ghost",size:"icon",className:"w-10 h-10 p-0 hover:bg-gray-100 rounded-full",onClick:()=>P(),disabled:c||!i.trim(),children:o.jsx(u,{className:"w-5 h-5 text-[#29b79c]"})})]})]})})]})]})}},Symbol.toStringTag,{value:"Module"}));export{I as C,D as a,z as d,O as e};
