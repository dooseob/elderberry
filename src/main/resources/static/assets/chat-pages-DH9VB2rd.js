import{o as e,r as s,j as t,H as l,J as a,P as r,v as i,K as n,N as c,O as x,Q as d,p as o}from"./react-vendor-DxVTcXnD.js";import{B as m,T as h,a as p,b as f,c as j,C as u,d as b}from"./board-pages-B7TFhQ6F.js";const g={log:(...e)=>{},warn:(...e)=>{},debug:(...e)=>{},performance:(e,s)=>{},action:(e,s)=>{}},N={error:(e,s,t)=>{},warn:(e,s)=>{},network:(e,s)=>{},component:(e,s,t)=>{}};const w=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const d=e(),[o,g]=s.useState(!1),[N,w]=s.useState(""),v=[{icon:t.jsx(n,{className:"w-4 h-4"}),text:"도움말"},{icon:t.jsx(c,{className:"w-4 h-4"}),text:"로그인"},{icon:t.jsx(x,{className:"w-4 h-4"}),text:"Elderberry로 이동",onClick:()=>d("/")}],y=()=>{const e=N.trim();e&&d("/chat",{state:{prompt:e}})},k=()=>{d("/chat")};return t.jsxs("div",{className:"flex h-screen items-start bg-white",children:[t.jsxs("aside",{className:"hidden sm:flex flex-col h-full items-start py-[15px] sm:py-[20px] md:py-[30px] bg-white border-r border-[#e8e8e8] transition-all duration-300 "+(o?"w-[60px] px-2":"w-[180px] sm:w-[220px] md:w-[260px] pl-2 sm:pl-4 md:pl-6 pr-2 sm:pr-4 md:pr-[25px]"),children:[t.jsxs("div",{className:"flex flex-col gap-5 pb-5 w-full "+(o?"items-center":"items-start"),children:[t.jsxs("div",{className:"flex items-center w-full "+(o?"justify-center":"justify-between"),children:[!o&&t.jsx("div",{className:"flex flex-col w-[132px] h-[26px] items-start",children:t.jsx("div",{className:"flex items-center",children:t.jsx("span",{className:"font-bold text-lg",children:"ai search"})})}),t.jsx(m,{variant:"outline",size:"icon",className:"w-8 h-8 border-[#e4e4e4]",onClick:()=>g(!o),children:o?t.jsx(l,{className:"w-5 h-5"}):t.jsx(a,{className:"w-5 h-5"})})]}),!o&&t.jsxs(m,{variant:"outline",className:"flex h-[42px] items-center justify-center gap-1 px-[27px] py-[11px] w-full border-[#dedede]",onClick:k,children:[t.jsx(r,{className:"w-4 h-4"}),t.jsx("span",{className:"font-bold text-[14.2px] text-[#404042]",children:"새 대화"})]}),o&&t.jsx(m,{variant:"outline",size:"icon",className:"w-8 h-8 border-[#dedede]",onClick:k,children:t.jsx(r,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"flex flex-col pt-[21px] pb-0 w-full bg-white border-t border-[#e4e4e4] mt-auto "+(o?"items-center":"items-start"),children:t.jsx("div",{className:"flex flex-col gap-1 w-full "+(o?"items-center":"items-start"),children:v.map((e,s)=>t.jsxs("div",{className:"flex min-h-[22px] items-center gap-1.5 p-1.5 w-full cursor-pointer hover:bg-gray-50 rounded "+(o?"justify-center":""),onClick:e.onClick,children:[t.jsx("div",{className:"flex flex-col w-4 h-4 "+(o?"items-center":"items-start"),children:e.icon}),!o&&t.jsx("div",{className:"flex flex-col h-[22.39px] items-start flex-1",children:t.jsx("div",{className:"relative self-stretch mt-[-1.00px] font-normal text-[#404042] text-[13.1px] tracking-[0] leading-[22.4px] overflow-hidden text-ellipsis",children:e.text})}),"로그인"===e.text&&t.jsx(h,{children:t.jsxs(p,{children:[t.jsx(f,{asChild:!0,children:t.jsx("div",{className:"relative"})}),t.jsx(j,{side:"right",className:"bg-[#202020e6] border-none rounded-md",children:t.jsx("span",{className:"font-bold text-white text-[12.2px]",children:"로그인 해주세요."})})]})})]},s))})})]}),t.jsx("div",{className:"sm:hidden fixed top-4 left-4 z-10",children:t.jsx(m,{variant:"outline",size:"icon",className:"w-10 h-10 border-[#e4e4e4]",children:t.jsx(r,{className:"w-5 h-5 rotate-45"})})}),t.jsxs("main",{className:"flex flex-col items-center justify-center flex-1 h-full bg-white overflow-y-auto",children:[t.jsxs("div",{className:"flex flex-col items-center justify-center gap-6 w-full max-w-[900px] px-4 sm:px-8 md:px-16",children:[t.jsx("div",{className:"flex flex-col items-center w-full",children:t.jsx("h1",{className:"font-bold text-[#111111] text-[28.2px] text-center leading-[48px]",children:"Elderberry"})}),t.jsxs(u,{className:"flex flex-col w-full bg-white rounded-2xl border-2 border-[#29b79c] shadow-[0px_2px_10px_#00000029]",children:[t.jsx(b,{className:"p-0 w-full bg-white",children:t.jsx("div",{className:"flex flex-col w-full",children:t.jsx("textarea",{value:N,onChange:e=>w(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),y())},className:"w-full min-h-[80px] p-4 text-[15px] text-[#333] bg-transparent border-none outline-none resize-none placeholder:text-[#818181]",placeholder:"당신의 노년을 돕습니다.",rows:2})})}),t.jsxs("div",{className:"flex items-center justify-between w-full px-4 py-3 border-t border-[#e4e4e4]",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(m,{variant:"ghost",size:"sm",className:"h-8 px-3 text-[#666] hover:bg-gray-100 text-sm",children:"📎 첨부하기"}),t.jsx(m,{variant:"ghost",size:"sm",className:"h-8 px-3 text-[#666] hover:bg-gray-100 text-sm",children:"📄 문서첨부"})]}),t.jsx(m,{variant:"ghost",size:"icon",className:"w-10 h-10 p-0 hover:bg-gray-100 rounded-full",onClick:y,disabled:!N.trim(),children:t.jsx(i,{className:"w-5 h-5 text-[#29b79c]"})})]})]})]}),t.jsxs("footer",{className:"flex items-center justify-center gap-[12.01px] w-full mt-8",children:[t.jsx("div",{className:"text-[#818181] text-[11.1px] text-center leading-[19.2px]",children:"AI 모델에 의해 부정확한 정보가 포함될 수 있습니다."}),t.jsxs("div",{className:"text-[#818181] text-[11.2px] text-center leading-[19.2px]",children:[t.jsx("span",{className:"font-bold",children:"개인정보처리방침 "}),t.jsx("span",{className:"font-normal",children:"이용약관"})]})]})]})]})}},Symbol.toStringTag,{value:"Module"}));const v=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const r=d(),h=e(),[p,f]=s.useState(!1),[j,w]=s.useState([]),[v,y]=s.useState(""),[k,C]=s.useState(!1),[z,S]=s.useState(""),_=s.useRef(null);s.useEffect(()=>{var e;const s=null==(e=r.state)?void 0:e.prompt;s&&(y(s),setTimeout(()=>{P(s)},100))},[r.state]),s.useEffect(()=>{E()},[j]);const T=[{icon:t.jsx(n,{className:"w-4 h-4"}),text:"도움말"},{icon:t.jsx(c,{className:"w-4 h-4"}),text:"로그인"},{icon:t.jsx(x,{className:"w-4 h-4"}),text:"Elderberry로 이동",onClick:()=>h("/")}],E=()=>{_.current&&(_.current.scrollTop=_.current.scrollHeight)},O=(e,s,t)=>{const l={id:Date.now(),text:e,isUser:s,timestamp:(new Date).toISOString(),extractedInfo:t};w(e=>[...e,l])},P=(...e)=>{return s=null,t=[...e],l=function*(e=v.trim()){if(e){O(e,!0),y(""),C(!0),S("");try{const s=yield fetch("/api/chatbot/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})});if(!s.ok){const e=yield s.text();throw N.network("/api/chatbot/message",{status:s.status,statusText:s.statusText,errorText:e}),new Error(`HTTP error! status: ${s.status}`)}const t=yield s.json();g.log("서버 응답:",t);const l=t.response||"죄송합니다. 응답을 처리할 수 없습니다.";"coordinator_recommendation"===t.response_type&&t.recommendations?O(l,!1,{recommendations:t.recommendations}):O(l,!1)}catch(s){N.error("챗봇 메시지 처리 오류",s),S("메시지 처리 중 오류가 발생했습니다. 다시 시도해 주세요."),O("죄송합니다. 현재 서버에 연결할 수 없습니다. 잠시 후 다시 시도해주세요.",!1)}finally{C(!1)}}},new Promise((e,a)=>{var r=e=>{try{n(l.next(e))}catch(s){a(s)}},i=e=>{try{n(l.throw(e))}catch(s){a(s)}},n=s=>s.done?e(s.value):Promise.resolve(s.value).then(r,i);n((l=l.apply(s,t)).next())});var s,t,l},I=()=>{h("/chat-home")};return t.jsxs("div",{className:"flex h-screen items-start bg-white",children:[t.jsxs("aside",{className:"hidden sm:flex flex-col h-full items-start py-[15px] sm:py-[20px] md:py-[30px] bg-white border-r border-[#e8e8e8] transition-all duration-300 "+(p?"w-[60px] px-2":"w-[180px] sm:w-[220px] md:w-[260px] pl-2 sm:pl-4 md:pl-6 pr-2 sm:pr-4 md:pr-[25px]"),children:[t.jsxs("div",{className:"flex flex-col gap-5 pb-5 w-full "+(p?"items-center":"items-start"),children:[t.jsxs("div",{className:"flex items-center w-full "+(p?"justify-center":"justify-between"),children:[!p&&t.jsx("div",{className:"flex flex-col w-[132px] h-[26px] items-start",children:t.jsx("div",{className:"flex items-center",children:t.jsx("span",{className:"font-bold text-lg",children:"ai search"})})}),t.jsx(m,{variant:"outline",size:"icon",className:"w-8 h-8 border-[#e4e4e4]",onClick:()=>f(!p),children:p?t.jsx(l,{className:"w-5 h-5"}):t.jsx(a,{className:"w-5 h-5"})})]}),!p&&t.jsxs(m,{variant:"outline",className:"flex h-[42px] items-center justify-center gap-1 px-[27px] py-[11px] w-full border-[#dedede]",onClick:I,children:[t.jsx(o,{className:"w-4 h-4"}),t.jsx("span",{className:"font-bold text-[14.2px] text-[#404042]",children:"홈으로"})]}),p&&t.jsx(m,{variant:"outline",size:"icon",className:"w-8 h-8 border-[#dedede]",onClick:I,children:t.jsx(o,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"flex flex-col pt-[21px] pb-0 w-full bg-white border-t border-[#e4e4e4] mt-auto "+(p?"items-center":"items-start"),children:t.jsx("div",{className:"flex flex-col gap-1 w-full "+(p?"items-center":"items-start"),children:T.map((e,s)=>t.jsxs("div",{className:"flex min-h-[22px] items-center gap-1.5 p-1.5 w-full cursor-pointer hover:bg-gray-50 rounded "+(p?"justify-center":""),onClick:e.onClick,children:[t.jsx("div",{className:"flex flex-col w-4 h-4 "+(p?"items-center":"items-start"),children:e.icon}),!p&&t.jsx("div",{className:"flex flex-col h-[22.39px] items-start flex-1",children:t.jsx("div",{className:"relative self-stretch mt-[-1.00px] font-normal text-[#404042] text-[13.1px] tracking-[0] leading-[22.4px] overflow-hidden text-ellipsis",children:e.text})})]},s))})})]}),t.jsxs("main",{className:"flex flex-col flex-1 h-full bg-white",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#e8e8e8] bg-[#f8f9fa]",children:[t.jsx("h1",{className:"font-bold text-xl text-[#111111]",children:"Elderberry Chat"}),t.jsx(m,{variant:"outline",size:"sm",onClick:()=>{w([]),S("")},className:"text-[#666] hover:bg-gray-100",children:"대화 내용 지우기"})]}),t.jsxs("div",{ref:_,className:"flex-1 overflow-y-auto p-6 space-y-6",style:{maxHeight:"calc(100vh - 200px)"},children:[j.map(e=>t.jsxs("div",{className:"animate-in fade-in duration-300",children:[t.jsx("div",{className:`flex ${e.isUser?"justify-end":"justify-start"} mb-2`,children:t.jsxs("div",{className:"max-w-[75%] "+(e.isUser?"ml-12":"mr-12"),children:[t.jsxs("div",{className:"text-xs text-gray-500 mb-1 "+(e.isUser?"text-right":"text-left"),children:[e.isUser?"나":"Elderberry"," • ",new Date(e.timestamp).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})]}),t.jsx("div",{className:"p-4 rounded-2xl shadow-sm "+(e.isUser?"bg-[#29b79c] text-white rounded-br-md":"bg-white text-[#333] border border-gray-200 rounded-bl-md"),children:t.jsx("div",{className:"text-[15px] leading-relaxed whitespace-pre-wrap break-words",children:e.text})})]})}),e.extractedInfo&&Object.keys(e.extractedInfo).length>0&&t.jsx("div",{className:"flex justify-start",children:t.jsx("div",{className:"max-w-[75%] mr-12 mt-2",children:e.extractedInfo.recommendations?t.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),t.jsx("span",{className:"text-sm font-semibold text-green-800",children:"추천 요양보호사"})]}),t.jsx("div",{className:"space-y-3",children:e.extractedInfo.recommendations.map((e,s)=>t.jsxs("div",{className:"bg-white/70 p-3 rounded-lg border border-green-100",children:[t.jsx("div",{className:"font-medium text-green-900 mb-1",children:e.name||`요양보호사 ${s+1}`}),e.experience&&t.jsxs("div",{className:"text-sm text-green-700 mb-1",children:["경력: ",e.experience]}),e.specialization&&t.jsxs("div",{className:"text-sm text-green-700 mb-1",children:["전문분야: ",e.specialization]}),e.location&&t.jsxs("div",{className:"text-sm text-green-700 mb-1",children:["지역: ",e.location]}),e.rating&&t.jsxs("div",{className:"text-sm text-green-700",children:["평점: ⭐ ",e.rating]})]},s))})]}):t.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),t.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"추출된 정보"})]}),t.jsx("pre",{className:"text-sm text-blue-700 whitespace-pre-wrap font-mono bg-white/50 p-3 rounded-lg overflow-x-auto",children:JSON.stringify(e.extractedInfo,null,2)})]})})})]},e.id)),k&&t.jsx("div",{className:"flex justify-start animate-in fade-in duration-300",children:t.jsxs("div",{className:"max-w-[75%] mr-12",children:[t.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Elderberry • 입력 중..."}),t.jsx("div",{className:"bg-white border border-gray-200 text-[#666] p-4 rounded-2xl rounded-bl-md shadow-sm",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),t.jsx("span",{className:"text-sm",children:"응답 생성 중입니다..."})]})})]})}),0===j.length&&!k&&t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#29b79c] to-[#20a085] rounded-full flex items-center justify-center mb-4",children:t.jsx("span",{className:"text-2xl text-white",children:"🤖"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Elderberry와 대화를 시작해보세요"}),t.jsx("p",{className:"text-gray-500 max-w-md",children:"궁금한 것이 있으시면 언제든지 물어보세요. 도움이 되도록 최선을 다하겠습니다."})]})]}),z&&t.jsx("div",{className:"mx-4 p-3 bg-[#f8d7da] text-[#dc3545] rounded-lg border border-[#f5c6cb]",children:z}),t.jsx("div",{className:"p-4 border-t border-[#e8e8e8]",children:t.jsxs(u,{className:"flex flex-col w-full bg-white rounded-2xl border-2 border-[#29b79c] shadow-[0px_2px_10px_#00000029]",children:[t.jsx(b,{className:"p-0 w-full bg-white",children:t.jsx("div",{className:"flex flex-col w-full",children:t.jsx("textarea",{value:v,onChange:e=>y(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),P())},className:"w-full min-h-[80px] p-4 text-[15px] text-[#333] bg-transparent border-none outline-none resize-none placeholder:text-[#818181]",placeholder:"메시지를 입력하세요...",rows:2,disabled:k})})}),t.jsxs("div",{className:"flex items-center justify-between w-full px-4 py-3 border-t border-[#e4e4e4]",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(m,{variant:"ghost",size:"sm",className:"h-8 px-3 text-[#666] hover:bg-gray-100 text-sm",children:"📎 첨부하기"}),t.jsx(m,{variant:"ghost",size:"sm",className:"h-8 px-3 text-[#666] hover:bg-gray-100 text-sm",children:"📄 문서첨부"})]}),t.jsx(m,{variant:"ghost",size:"icon",className:"w-10 h-10 p-0 hover:bg-gray-100 rounded-full",onClick:()=>P(),disabled:k||!v.trim(),children:t.jsx(i,{className:"w-5 h-5 text-[#29b79c]"})})]})]})})]})]})}},Symbol.toStringTag,{value:"Module"}));export{w as C,v as a,g as d,N as e};
