var e=Object.defineProperty,r=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(r,a,t)=>a in r?e(r,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[a]=t,i=(e,r)=>{for(var a in r||(r={}))l.call(r,a)&&s(e,a,r[a]);if(t)for(var a of t(r))o.call(r,a)&&s(e,a,r[a]);return e},n=(e,r,a)=>new Promise((t,l)=>{var o=e=>{try{i(a.next(e))}catch(r){l(r)}},s=e=>{try{i(a.throw(e))}catch(r){l(r)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,s);i((a=a.apply(e,r)).next())});import{e as c,O as d,R as m,ap as h,j as u,b3 as b,ah as g,aK as v,b1 as p,C as f,K as x,aI as y,a$ as w}from"./react-vendor-D482bdOD.js";import{t as N,o as j,b as k,s as C}from"./schema-validation-BNO6TpWS.js";import{A as I,E as O,P as M}from"./index-DOkQ2MdS.js";import{B as T}from"./core-ui-B951Z2Bq.js";import{u as R}from"./store-DLVPcjaN.js";import{a as S}from"./theme-layout-BH1OkAcf.js";import{c as $}from"./board-pages-CaaiBp8P.js";import"./vendor-lkuvNL7c.js";import"./state-management-DFZwgI-2.js";import"./form-libs-t-WBjOD-.js";import"./animation-lib-DO1H1ffU.js";import"./chat-pages-eKQuMn9L.js";import"./style-utils-DeQRAeyh.js";import"./facility-pages-CBy5qHE4.js";import"./http-client-9JY-woyA.js";const q=j({email:C().min(1,"이메일을 입력해주세요").email("올바른 이메일 형식이 아닙니다"),password:C().min(1,"비밀번호를 입력해주세요").min(6,"비밀번호는 최소 6자 이상이어야 합니다"),rememberMe:k().optional().default(!1)}),z=[{id:"google",name:"구글",icon:b,color:"bg-white border-gray-300 text-gray-700 hover:bg-gray-50",enabled:!0},{id:"kakao",name:"카카오",icon:g,color:"bg-yellow-300 border-yellow-300 text-gray-900 hover:bg-yellow-400",enabled:!0},{id:"naver",name:"네이버",icon:v,color:"bg-green-500 border-green-500 text-white hover:bg-green-600",enabled:!0}],P=()=>{var e,t;const l=c(),o=d(),{login:s,isLoading:b,error:g,clearError:v}=R(),{isReducedMotion:j}=S(),[k,C]=m.useState(!1),[P,V]=m.useState(null),{register:E,handleSubmit:K,watch:L,setValue:A,formState:{errors:B,isValid:F}}=h({resolver:N(q),defaultValues:{email:"",password:"",rememberMe:!1},mode:"onChange"}),H=L("email"),U=L("password");L("rememberMe");const D=m.useMemo(()=>{const e=o.state;return(null==e?void 0:e.from)||"/dashboard"},[o.state]);return m.useEffect(()=>{if(g){const e=setTimeout(()=>{v()},5e3);return()=>clearTimeout(e)}},[g,v]),u.jsx(I,{title:"로그인",subtitle:"계정에 로그인하여 서비스를 이용하세요",showHomeLink:!0,showThemeToggle:!0,testId:"login-page",children:u.jsxs("div",{className:"space-y-6",children:[!1,u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{className:"text-center",children:u.jsx("p",{className:"text-sm text-[var(--linear-color-text-secondary)]",children:"간편 로그인"})}),u.jsx("div",{className:"grid gap-2",children:z.map(e=>u.jsxs(T,{type:"button",variant:"outline",size:"default",onClick:()=>(e=>n(null,null,function*(){var r;if(null==(r=z.find(r=>r.id===e))?void 0:r.enabled){V(e);try{window.location.href=`/api/auth/oauth/${e}?redirect=${encodeURIComponent(D)}`}catch(a){V(null)}}}))(e.id),disabled:!e.enabled||P===e.id,loading:P===e.id,className:$("w-full justify-center gap-3",!j&&"linear-animate-in","google"===e.id&&"bg-white border-gray-300 text-gray-700 hover:bg-gray-50","kakao"===e.id&&"bg-yellow-300 border-yellow-300 text-gray-900 hover:bg-yellow-400","naver"===e.id&&"bg-green-500 border-green-500 text-white hover:bg-green-600"),testId:`social-login-${e.id}`,children:[u.jsx(e.icon,{className:"w-4 h-4"}),e.name,"로 계속하기"]},e.id))})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-[var(--linear-color-border-subtle)]"})}),u.jsx("div",{className:"relative flex justify-center text-sm",children:u.jsx("span",{className:"px-2 bg-[var(--linear-color-surface-modal)] text-[var(--linear-color-text-secondary)]",children:"또는 이메일로 로그인"})})]}),u.jsxs("form",{onSubmit:K(e=>n(null,null,function*(){try{yield s({email:e.email,password:e.password,rememberMe:e.rememberMe}),l(D,{replace:!0})}catch(r){}})),className:"space-y-4",children:[u.jsx("div",{children:u.jsx(O,{label:"이메일",placeholder:"example@email.com",value:H,onChange:e=>A("email",e.target.value),errorText:null==(e=B.email)?void 0:e.message,autoComplete:"email",autoFocus:!0,required:!0,testId:"login-email"})}),u.jsx("div",{children:u.jsx(M,{label:"비밀번호",placeholder:"비밀번호를 입력하세요",value:U,onChange:e=>A("password",e.target.value),errorText:null==(t=B.password)?void 0:t.message,showStrengthIndicator:!1,showRequirements:!1,autoComplete:"current-password",required:!0,testId:"login-password"})}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",(G=i({},E("rememberMe")),J={type:"checkbox",className:"w-4 h-4 rounded border-[var(--linear-color-border-default)] bg-[var(--linear-color-surface-input)] text-[var(--linear-color-accent)] focus:ring-[var(--linear-color-accent)] focus:ring-offset-0"},r(G,a(J)))),u.jsx("span",{className:"text-sm text-[var(--linear-color-text-secondary)]",children:"로그인 상태 유지"})]}),u.jsx(p,{to:"/forgot-password",className:"text-sm text-[var(--linear-color-accent)] hover:text-[var(--linear-color-accent-hover)] hover:underline",children:"비밀번호 찾기"})]}),g&&u.jsxs("div",{className:"flex items-center gap-2 p-3 bg-[var(--linear-color-error-bg)] text-[var(--linear-color-error)] rounded-[var(--linear-radius-medium)] text-sm",role:"alert",children:[u.jsx(f,{className:"w-4 h-4 flex-shrink-0"}),g]}),u.jsxs(T,{type:"submit",variant:"primary",size:"lg",loading:b,disabled:!F||b,className:"w-full",testId:"login-submit",children:[u.jsx(x,{className:"w-4 h-4"}),"로그인"]})]}),u.jsxs("div",{className:"text-center space-y-3",children:[u.jsx("div",{className:"text-sm text-[var(--linear-color-text-secondary)]",children:"아직 계정이 없으신가요?"}),u.jsx(T,{variant:"ghost",size:"default",asChild:!0,className:"w-full",testId:"register-link",children:u.jsxs(p,{to:"/register",className:"flex items-center justify-center gap-2",children:[u.jsx(y,{className:"w-4 h-4"}),"회원가입하기",u.jsx(w,{className:"w-4 h-4"})]})})]}),u.jsx("div",{className:"text-center pt-4 border-t border-[var(--linear-color-border-subtle)]",children:u.jsxs("p",{className:"text-xs text-[var(--linear-color-text-tertiary)]",children:["로그인에 문제가 있으신가요?"," ",u.jsx(p,{to:"/support",className:"text-[var(--linear-color-accent)] hover:underline",children:"고객센터"}),"에 문의해주세요."]})})]})});var G,J};export{P as LoginPage,P as default};
