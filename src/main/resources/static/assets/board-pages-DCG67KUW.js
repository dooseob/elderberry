var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(s,t,r)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,i=(e,s)=>{for(var t in s||(s={}))a.call(s,t)&&n(e,t,s[t]);if(r)for(var t of r(s))l.call(s,t)&&n(e,t,s[t]);return e},o=(e,r)=>s(e,t(r)),c=(e,s,t)=>new Promise((r,a)=>{var l=e=>{try{i(t.next(e))}catch(s){a(s)}},n=e=>{try{i(t.throw(e))}catch(s){a(s)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,n);i((t=t.apply(e,s)).next())});import{c as d,i as m,r as x,j as u,g as h,k as p,l as g,m as y,n as j,S as N,F as b,C as f,f as v,o as w,p as P,A as C,q as k,s as E,t as L,v as S,u as I,h as O,w as A,B as R,x as T,y as D,D as $,z as B,G as M,R as F,H as z,X as _,J as U,K as q,N as V,O as Q}from"./react-vendor-BYDInCC8.js";import{u as W,M as G,B as K,C as J,a as H,b as Y,c as X}from"./auth-pages-CqF2YS6A.js";import{m as Z,A as ee}from"./ui-libs-B_iLp8lQ.js";import{a as se}from"./utils-vhTAaM2j.js";const te=se.create({baseURL:"http://localhost:8080/api/boards",timeout:1e4,headers:{"Content-Type":"application/json"}}),re=se.create({baseURL:"http://localhost:8080/api/posts",timeout:1e4,headers:{"Content-Type":"application/json"}}),ae=se.create({baseURL:"http://localhost:8080/api/comments",timeout:1e4,headers:{"Content-Type":"application/json"}}),le=se.create({baseURL:"http://localhost:8080/api/files",timeout:3e4,headers:{"Content-Type":"multipart/form-data"}}),ne=e=>{const s=localStorage.getItem("accessToken");return s&&(e.headers.Authorization=`Bearer ${s}`),e};te.interceptors.request.use(ne),re.interceptors.request.use(ne),ae.interceptors.request.use(ne),le.interceptors.request.use(ne);const ie=e=>{var s,t,r,a,l,n,i,o;const c={message:(null==(t=null==(s=e.response)?void 0:s.data)?void 0:t.message)||"네트워크 오류가 발생했습니다.",code:(null==(a=null==(r=e.response)?void 0:r.data)?void 0:a.code)||"NETWORK_ERROR",status:(null==(l=e.response)?void 0:l.status)||500,timestamp:(new Date).toISOString(),path:(null==(n=e.config)?void 0:n.url)||"",details:null==(o=null==(i=e.response)?void 0:i.data)?void 0:o.details};return Promise.reject(c)};[te,re,ae,le].forEach(e=>{e.interceptors.response.use(e=>e,ie)});const oe={getBoards(){return c(this,null,function*(){return(yield te.get("")).data})},getBoard(e){return c(this,null,function*(){return(yield te.get(`/${e}`)).data})},createBoard(e){return c(this,null,function*(){return(yield te.post("",e)).data})},updateBoard(e,s){return c(this,null,function*(){return(yield te.put(`/${e}`,s)).data})},deleteBoard(e){return c(this,null,function*(){yield te.delete(`/${e}`)})},getBoardStatistics(){return c(this,null,function*(){return(yield te.get("/statistics")).data})}},ce={getPosts(){return c(this,arguments,function*(e={}){return(yield re.get("",{params:e})).data})},getPost(e){return c(this,null,function*(){return(yield re.get(`/${e}`)).data})},createPost(e){return c(this,null,function*(){return(yield re.post("",e)).data})},updatePost(e,s){return c(this,null,function*(){return(yield re.put(`/${e}`,s)).data})},deletePost(e){return c(this,null,function*(){yield re.delete(`/${e}`)})},getMyPosts(){return c(this,arguments,function*(e={}){return(yield re.get("/my",{params:e})).data})},incrementViewCount(e){return c(this,null,function*(){yield re.post(`/${e}/view`)})},likePost(e){return c(this,null,function*(){return(yield re.post(`/${e}/like`)).data})},unlikePost(e){return c(this,null,function*(){return(yield re.delete(`/${e}/like`)).data})},checkPostLike(e){return c(this,null,function*(){return(yield re.get(`/${e}/like/status`)).data})},getPopularPosts(e=10){return c(this,null,function*(){return(yield re.get("/popular",{params:{limit:e}})).data})},getLatestPosts(e=10){return c(this,null,function*(){return(yield re.get("/latest",{params:{limit:e}})).data})},getRecommendedPosts(e=10){return c(this,null,function*(){return(yield re.get("/recommended",{params:{limit:e}})).data})}},de={getComments(e){return c(this,arguments,function*(e,s={}){return(yield ae.get(`/post/${e}`,{params:s})).data})},getComment(e){return c(this,null,function*(){return(yield ae.get(`/${e}`)).data})},createComment(e){return c(this,null,function*(){return(yield ae.post("",e)).data})},updateComment(e,s){return c(this,null,function*(){return(yield ae.put(`/${e}`,s)).data})},deleteComment(e){return c(this,null,function*(){yield ae.delete(`/${e}`)})},getMyComments(){return c(this,arguments,function*(e={}){return(yield ae.get("/my",{params:e})).data})},likeComment(e){return c(this,null,function*(){return(yield ae.post(`/${e}/like`)).data})},unlikeComment(e){return c(this,null,function*(){return(yield ae.delete(`/${e}/like`)).data})},checkCommentLike(e){return c(this,null,function*(){return(yield ae.get(`/${e}/like/status`)).data})}},me={uploadFile(e){return c(this,null,function*(){const s=new FormData;s.append("file",e);return(yield le.post("/upload",s)).data})},uploadFiles(e){return c(this,null,function*(){const s=new FormData;e.forEach(e=>{s.append("files",e)});return(yield le.post("/upload/multiple",s)).data})},getFileDownloadUrl:e=>`/api/files/download/${e}`,getFileInfo(e){return c(this,null,function*(){return(yield le.get(`/${e}`)).data})},deleteFile(e){return c(this,null,function*(){yield le.delete(`/${e}`)})}},xe={page:0,size:20,sortBy:"createdAt",sortDirection:"desc"},ue={boards:[],currentBoard:null,boardsLoading:!1,boardsError:null,posts:[],currentPost:null,postsLoading:!1,postsError:null,postsTotalPages:0,postsCurrentPage:0,postsTotalElements:0,comments:[],commentsLoading:!1,commentsError:null,commentsTotalPages:0,commentsCurrentPage:0,statistics:null,popularPosts:[],statisticsLoading:!1,statisticsError:null,searchParams:xe,likedPosts:new Set,likedComments:new Set},he=d()((e,s)=>o(i({},ue),{loadBoards:()=>c(null,null,function*(){try{e({boardsLoading:!0,boardsError:null});const s=yield oe.getBoards();e({boards:s,boardsLoading:!1})}catch(s){throw e({boardsLoading:!1,boardsError:s.message||"게시판 목록을 불러오는데 실패했습니다."}),s}}),loadBoard:s=>c(null,null,function*(){try{e({boardsLoading:!0,boardsError:null});const t=yield oe.getBoard(s);e({currentBoard:t,boardsLoading:!1})}catch(t){throw e({boardsLoading:!1,boardsError:t.message||"게시판 정보를 불러오는데 실패했습니다."}),t}}),loadPosts:t=>c(null,null,function*(){try{e({postsLoading:!0,postsError:null});const r=i(i({},s().searchParams),t),a=yield ce.getPosts(r);e({posts:a.content,postsTotalPages:a.totalPages,postsCurrentPage:a.page,postsTotalElements:a.totalElements,searchParams:r,postsLoading:!1})}catch(r){throw e({postsLoading:!1,postsError:r.message||"게시글 목록을 불러오는데 실패했습니다."}),r}}),loadPost:s=>c(null,null,function*(){try{e({postsLoading:!0,postsError:null});const r=yield ce.getPost(s);yield ce.incrementViewCount(s);try{(yield ce.checkPostLike(s)).liked&&e(e=>({likedPosts:new Set([...e.likedPosts,s])}))}catch(t){}e({currentPost:o(i({},r),{viewCount:r.viewCount+1}),postsLoading:!1})}catch(t){throw e({postsLoading:!1,postsError:t.message||"게시글을 불러오는데 실패했습니다."}),t}}),createPost:s=>c(null,null,function*(){try{e({postsLoading:!0,postsError:null});const t=yield ce.createPost(s);return e(e=>({posts:[t,...e.posts],postsTotalElements:e.postsTotalElements+1,postsLoading:!1})),t}catch(t){throw e({postsLoading:!1,postsError:t.message||"게시글 작성에 실패했습니다."}),t}}),updatePost:(s,t)=>c(null,null,function*(){try{e({postsLoading:!0,postsError:null});const r=yield ce.updatePost(s,t);return e(e=>{var t;return{posts:e.posts.map(e=>e.id===s?r:e),currentPost:(null==(t=e.currentPost)?void 0:t.id)===s?r:e.currentPost,postsLoading:!1}}),r}catch(r){throw e({postsLoading:!1,postsError:r.message||"게시글 수정에 실패했습니다."}),r}}),deletePost:s=>c(null,null,function*(){try{e({postsLoading:!0,postsError:null}),yield ce.deletePost(s),e(e=>{var t;return{posts:e.posts.filter(e=>e.id!==s),currentPost:(null==(t=e.currentPost)?void 0:t.id)===s?null:e.currentPost,postsTotalElements:e.postsTotalElements-1,postsLoading:!1}})}catch(t){throw e({postsLoading:!1,postsError:t.message||"게시글 삭제에 실패했습니다."}),t}}),loadMyPosts:t=>c(null,null,function*(){try{e({postsLoading:!0,postsError:null});const r=i(i({},s().searchParams),t),a=yield ce.getMyPosts(r);e({posts:a.content,postsTotalPages:a.totalPages,postsCurrentPage:a.page,postsTotalElements:a.totalElements,searchParams:r,postsLoading:!1})}catch(r){throw e({postsLoading:!1,postsError:r.message||"내 게시글을 불러오는데 실패했습니다."}),r}}),incrementPostView:s=>c(null,null,function*(){try{yield ce.incrementViewCount(s),e(e=>{var t;return{posts:e.posts.map(e=>e.id===s?o(i({},e),{viewCount:e.viewCount+1}):e),currentPost:(null==(t=e.currentPost)?void 0:t.id)===s?o(i({},e.currentPost),{viewCount:e.currentPost.viewCount+1}):e.currentPost}})}catch(t){}}),loadComments:(s,t=0,r=20)=>c(null,null,function*(){try{e({commentsLoading:!0,commentsError:null});const a=yield de.getComments(s,{page:t,size:r});e({comments:a.content,commentsTotalPages:a.totalPages,commentsCurrentPage:a.page,commentsLoading:!1})}catch(a){throw e({commentsLoading:!1,commentsError:a.message||"댓글을 불러오는데 실패했습니다."}),a}}),createComment:s=>c(null,null,function*(){try{e({commentsLoading:!0,commentsError:null});const t=yield de.createComment(s);return e(e=>{var r;return{comments:[...e.comments,t],commentsLoading:!1,currentPost:(null==(r=e.currentPost)?void 0:r.id)===s.postId?o(i({},e.currentPost),{commentCount:e.currentPost.commentCount+1}):e.currentPost,posts:e.posts.map(e=>e.id===s.postId?o(i({},e),{commentCount:e.commentCount+1}):e)}}),t}catch(t){throw e({commentsLoading:!1,commentsError:t.message||"댓글 작성에 실패했습니다."}),t}}),updateComment:(s,t)=>c(null,null,function*(){try{e({commentsLoading:!0,commentsError:null});const r=yield de.updateComment(s,t);return e(e=>({comments:e.comments.map(e=>e.id===s?r:e),commentsLoading:!1})),r}catch(r){throw e({commentsLoading:!1,commentsError:r.message||"댓글 수정에 실패했습니다."}),r}}),deleteComment:s=>c(null,null,function*(){try{e({commentsLoading:!0,commentsError:null}),yield de.deleteComment(s),e(e=>{const t=e.comments.find(e=>e.id===s);return{comments:e.comments.filter(e=>e.id!==s),commentsLoading:!1,currentPost:e.currentPost&&(null==t?void 0:t.postId)===e.currentPost.id?o(i({},e.currentPost),{commentCount:e.currentPost.commentCount-1}):e.currentPost,posts:e.posts.map(e=>(null==t?void 0:t.postId)===e.id?o(i({},e),{commentCount:e.commentCount-1}):e)}})}catch(t){throw e({commentsLoading:!1,commentsError:t.message||"댓글 삭제에 실패했습니다."}),t}}),togglePostLike:t=>c(null,null,function*(){try{const{likedPosts:r}=s(),a=r.has(t)?yield ce.unlikePost(t):yield ce.likePost(t),l=new Set(r);a.liked?l.add(t):l.delete(t),e(e=>{var s;return{likedPosts:l,posts:e.posts.map(e=>e.id===t?o(i({},e),{likeCount:a.likeCount}):e),currentPost:(null==(s=e.currentPost)?void 0:s.id)===t?o(i({},e.currentPost),{likeCount:a.likeCount}):e.currentPost}})}catch(r){throw r}}),toggleCommentLike:t=>c(null,null,function*(){try{const{likedComments:r}=s(),a=r.has(t)?yield de.unlikeComment(t):yield de.likeComment(t),l=new Set(r);a.liked?l.add(t):l.delete(t),e(e=>({likedComments:l,comments:e.comments.map(e=>e.id===t?o(i({},e),{likeCount:a.likeCount}):e)}))}catch(r){throw r}}),loadStatistics:()=>c(null,null,function*(){try{e({statisticsLoading:!0,statisticsError:null});const s=yield oe.getBoardStatistics();e({statistics:s,statisticsLoading:!1})}catch(s){throw e({statisticsLoading:!1,statisticsError:s.message||"통계를 불러오는데 실패했습니다."}),s}}),loadPopularPosts:(s=10)=>c(null,null,function*(){try{e({statisticsLoading:!0,statisticsError:null});const t=yield ce.getPopularPosts(s);e({popularPosts:t,statisticsLoading:!1})}catch(t){throw e({statisticsLoading:!1,statisticsError:t.message||"인기 게시글을 불러오는데 실패했습니다."}),t}}),setSearchParams:s=>{e(e=>({searchParams:i(i({},e.searchParams),s)}))},resetSearchParams:()=>{e({searchParams:xe})},clearBoardsError:()=>{e({boardsError:null})},clearPostsError:()=>{e({postsError:null})},clearCommentsError:()=>{e({commentsError:null})},clearStatisticsError:()=>{e({statisticsError:null})},reset:()=>{e(ue)}}));var pe=(e=>(e.GENERAL="GENERAL",e.NOTICE="NOTICE",e.FAQ="FAQ",e.QNA="QNA",e.REVIEW="REVIEW",e.FREE="FREE",e.JOB_DISCUSSION="JOB_DISCUSSION",e.TIPS="TIPS",e.NEWS="NEWS",e))(pe||{});const ge={[pe.GENERAL]:"일반",[pe.NOTICE]:"공지사항",[pe.FAQ]:"FAQ",[pe.QNA]:"Q&A",[pe.REVIEW]:"후기",[pe.FREE]:"자유",[pe.JOB_DISCUSSION]:"구인구직 토론",[pe.TIPS]:"팁과 노하우",[pe.NEWS]:"업계 소식"},ye=e=>{const s=new Date(e),t=(new Date).getTime()-s.getTime(),r=Math.floor(t/36e5),a=Math.floor(r/24);return r<1?"방금 전":r<24?`${r}시간 전`:a<7?`${a}일 전`:s.toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"})},je=({board:e})=>u.jsx(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},transition:{duration:.2},children:u.jsx(h,{to:`/boards/${e.id}`,children:u.jsx(J,{className:"hover:shadow-lg transition-shadow",children:u.jsxs(H,{className:"p-6",children:[u.jsx("div",{className:"flex items-start justify-between mb-3",children:u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-elderberry-100 text-elderberry-700",children:ge[e.type]})]}),u.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description})]})}),u.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("span",{className:"flex items-center",children:[u.jsx(g,{className:"w-4 h-4 mr-1"}),e.postCount,"개 글"]}),e.lastPostDate&&u.jsxs("span",{className:"flex items-center",children:[u.jsx(y,{className:"w-4 h-4 mr-1"}),ye(e.lastPostDate)]})]}),u.jsx(C,{className:"w-4 h-4 text-gray-400"})]})]})})})}),Ne=({post:e})=>u.jsx(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},transition:{duration:.2},children:u.jsx(h,{to:`/boards/${e.boardId}/posts/${e.id}`,children:u.jsx(J,{className:"hover:shadow-lg transition-shadow",children:u.jsxs(H,{className:"p-4",children:[u.jsx("div",{className:"flex items-start justify-between mb-3",children:u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.isPinned&&u.jsx(k,{className:"w-4 h-4 text-elderberry-600"}),e.isNotice&&u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"공지"}),u.jsx("span",{className:"text-xs text-gray-500",children:e.boardName})]}),u.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2 line-clamp-1",children:e.title}),e.summary&&u.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.summary})]})}),e.tags&&e.tags.length>0&&u.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[e.tags.slice(0,3).map((e,s)=>u.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-600",children:[u.jsx(E,{className:"w-3 h-3 mr-1"}),e]},s)),e.tags.length>3&&u.jsxs("span",{className:"text-xs text-gray-500",children:["+",e.tags.length-3]})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("span",{children:e.isAnonymous?"익명":e.authorName}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(L,{className:"w-3 h-3 mr-1"}),ye(e.createdAt)]})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("span",{className:"flex items-center",children:[u.jsx(v,{className:"w-3 h-3 mr-1"}),e.viewCount]}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(w,{className:"w-3 h-3 mr-1"}),e.likeCount]}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(g,{className:"w-3 h-3 mr-1"}),e.commentCount]})]})]})]})})})});const be=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,s]=m(),{user:t}=W(),{boards:r,posts:a,popularPosts:l,boardsLoading:n,postsLoading:c,boardsError:d,postsError:C,postsTotalPages:k,postsCurrentPage:E,postsTotalElements:L,searchParams:S,loadBoards:I,loadPosts:O,loadPopularPosts:A,setSearchParams:R,clearBoardsError:T,clearPostsError:D}=he(),[$,B]=x.useState(e.get("keyword")||""),[M,F]=x.useState(!1),[z,_]=x.useState(""),[U,q]=x.useState("boards"),V=t&&[G.CAREGIVER,G.EMPLOYER,G.COORDINATOR,G.ADMIN].includes(t.role);x.useEffect(()=>{I(),A();const s={};e.get("keyword")&&(s.keyword=e.get("keyword")),e.get("boardType")&&(s.boardType=e.get("boardType")),e.get("page")&&(s.page=parseInt(e.get("page"))||0),O(s)},[e]);const Q=()=>{const e={page:0,keyword:$||void 0,boardType:z||void 0};R(e),O(e);const t=new URLSearchParams;$&&t.set("keyword",$),z&&t.set("boardType",z),s(t)},Y=t=>{const r=o(i({},S),{page:t});R(r),O(r);const a=new URLSearchParams(e);a.set("page",t.toString()),s(a)},X=()=>{B(""),_(""),R({page:0}),O({page:0}),s({})};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"커뮤니티"}),u.jsx("p",{className:"text-gray-600 mt-1",children:"다양한 정보를 공유하고 소통해보세요"})]}),V&&u.jsx("div",{className:"mt-4 sm:mt-0",children:u.jsx(h,{to:"/boards/create-post",children:u.jsxs(K,{variant:"primary",children:[u.jsx(p,{className:"w-4 h-4 mr-2"}),"글 작성하기"]})})})]}),u.jsx("div",{className:"border-b border-gray-200",children:u.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"boards",label:"게시판",icon:g},{key:"posts",label:"최신 글",icon:y},{key:"popular",label:"인기 글",icon:j}].map(({key:e,label:s,icon:t})=>u.jsxs("button",{onClick:()=>q(e),className:`\n                flex items-center py-4 px-1 border-b-2 font-medium text-sm transition-colors\n                ${U===e?"border-elderberry-500 text-elderberry-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}\n              `,children:[u.jsx(t,{className:"w-4 h-4 mr-2"}),s]},e))})}),("posts"===U||"popular"===U)&&u.jsx(J,{children:u.jsx(H,{className:"p-6",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex space-x-4",children:[u.jsx("div",{className:"flex-1",children:u.jsxs("div",{className:"relative",children:[u.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"제목, 내용, 작성자 검색...",value:$,onChange:e=>B(e.target.value),onKeyPress:e=>"Enter"===e.key&&Q(),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500"})]})}),u.jsxs(K,{variant:"outline",onClick:()=>F(!M),className:"flex items-center",children:[u.jsx(b,{className:"w-4 h-4 mr-2"}),"필터"]}),u.jsx(K,{variant:"primary",onClick:Q,children:"검색"})]}),M&&u.jsxs(Z.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-gray-200 pt-4",children:[u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"게시판 타입"}),u.jsxs("select",{value:z,onChange:e=>_(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500",children:[u.jsx("option",{value:"",children:"전체 게시판"}),Object.entries(ge).map(([e,s])=>u.jsx("option",{value:e,children:s},e))]})]})}),u.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[u.jsx(K,{variant:"outline",onClick:X,children:"초기화"}),u.jsx(K,{variant:"primary",onClick:Q,children:"필터 적용"})]})]})]})})}),(d||C)&&u.jsxs(Z.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[u.jsx(f,{className:"w-5 h-5 flex-shrink-0"}),u.jsx("span",{className:"text-sm",children:d||C}),u.jsx("button",{onClick:()=>{T(),D()},className:"ml-auto text-red-600 hover:text-red-800",children:"✕"})]}),"boards"===U&&u.jsx("div",{children:n?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>u.jsx("div",{className:"animate-pulse",children:u.jsx(J,{children:u.jsxs(H,{className:"p-6",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-2"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3 mb-4"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})})},s))}):r.length>0?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(e=>u.jsx(je,{board:e},e.id))}):u.jsxs("div",{className:"text-center py-12",children:[u.jsx(g,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"게시판이 없습니다"}),u.jsx("p",{className:"text-gray-600",children:"아직 생성된 게시판이 없습니다."})]})}),"posts"===U&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("p",{className:"text-sm text-gray-600",children:["총 ",u.jsx("span",{className:"font-semibold text-elderberry-600",children:L}),"개의 게시글이 있습니다",$&&u.jsxs("span",{children:[" ('",$,"' 검색 결과)"]})]})}),c?u.jsx("div",{className:"space-y-4",children:[...Array(5)].map((e,s)=>u.jsx("div",{className:"animate-pulse",children:u.jsx(J,{children:u.jsxs(H,{className:"p-4",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-3"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-2"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3 mb-3"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]})})},s))}):a.length>0?u.jsx("div",{className:"space-y-4",children:a.map(e=>u.jsx(Ne,{post:e},e.id))}):u.jsxs("div",{className:"text-center py-12",children:[u.jsx(g,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"게시글이 없습니다"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"검색 조건에 맞는 게시글이 없습니다"}),u.jsx(K,{variant:"outline",onClick:X,children:"검색 조건 초기화"})]}),k>1&&u.jsx("div",{className:"flex justify-center",children:u.jsxs("div",{className:"flex space-x-2",children:[u.jsx(K,{variant:"outline",disabled:0===E,onClick:()=>Y(E-1),children:"이전"}),[...Array(Math.min(5,k))].map((e,s)=>{const t=Math.max(0,Math.min(E-2,k-5))+s;return t>=k?null:u.jsx(K,{variant:t===E?"primary":"outline",onClick:()=>Y(t),children:t+1},t)}),u.jsx(K,{variant:"outline",disabled:E>=k-1,onClick:()=>Y(E+1),children:"다음"})]})})]}),"popular"===U&&u.jsx("div",{className:"space-y-4",children:l.length>0?u.jsx("div",{className:"space-y-4",children:l.map((e,s)=>u.jsx(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},children:u.jsx(h,{to:`/boards/posts/${e.id}`,children:u.jsx(J,{className:"hover:shadow-lg transition-shadow",children:u.jsx(H,{className:"p-4",children:u.jsxs("div",{className:"flex items-start space-x-4",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("div",{className:"w-8 h-8 bg-elderberry-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-bold text-elderberry-600",children:s+1})})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:e.title}),"up"===e.trend&&u.jsx(j,{className:"w-4 h-4 text-green-500"})]}),u.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[u.jsx("span",{children:e.boardName}),u.jsx("span",{children:e.authorName}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(v,{className:"w-3 h-3 mr-1"}),e.viewCount]}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(w,{className:"w-3 h-3 mr-1"}),e.likeCount]}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(g,{className:"w-3 h-3 mr-1"}),e.commentCount]})]})]})]})})})})},e.id))}):u.jsxs("div",{className:"text-center py-12",children:[u.jsx(P,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"인기 게시글이 없습니다"}),u.jsx("p",{className:"text-gray-600",children:"아직 인기 게시글이 없습니다."})]})})]})}},Symbol.toStringTag,{value:"Module"})),fe=e=>new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),ve=({comment:e,level:s,onReply:t,onEdit:r,onDelete:a,onLike:l,isLiked:n})=>{const{user:i}=W(),[o,c]=x.useState(!1),d=(null==i?void 0:i.id)===e.authorId,m=(null==i?void 0:i.role)===G.ADMIN||(null==i?void 0:i.role)===G.COORDINATOR;return u.jsx("div",{className:""+(s>0?"ml-8 border-l-2 border-gray-100 pl-4":""),children:u.jsxs(Z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-lg p-4 mb-4 border border-gray-200",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-8 h-8 bg-elderberry-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-semibold text-elderberry-600",children:e.isAnonymous?"익":e.authorName.charAt(0)})}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"font-medium text-gray-900",children:e.isAnonymous?"익명":e.authorName}),u.jsx("span",{className:"text-xs text-gray-500",children:e.authorRole})]}),u.jsx("span",{className:"text-xs text-gray-500",children:fe(e.createdAt)})]})]}),(d||m)&&u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>c(!o),className:"p-1 rounded-full hover:bg-gray-100",children:u.jsx(M,{className:"w-4 h-4 text-gray-400"})}),u.jsx(ee,{children:o&&u.jsxs(Z.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"absolute right-0 mt-2 w-32 bg-white rounded-md shadow-lg border border-gray-200 z-10",children:[d&&u.jsxs("button",{onClick:()=>{r(e),c(!1)},className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[u.jsx(T,{className:"w-3 h-3 mr-2"}),"수정"]}),(d||m)&&u.jsxs("button",{onClick:()=>{a(e.id),c(!1)},className:"flex items-center w-full px-3 py-2 text-sm text-red-600 hover:bg-red-50",children:[u.jsx(D,{className:"w-3 h-3 mr-2"}),"삭제"]})]})})]})]}),u.jsx("div",{className:"prose prose-sm max-w-none mb-4",children:u.jsx("div",{className:"whitespace-pre-wrap text-gray-700",children:e.content})}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("button",{onClick:()=>l(e.id),className:"flex items-center space-x-1 text-sm transition-colors "+(n?"text-red-500":"text-gray-500 hover:text-red-500"),children:[u.jsx(w,{className:"w-4 h-4 "+(n?"fill-current":"")}),u.jsx("span",{children:e.likeCount})]}),u.jsxs("button",{onClick:()=>t(e.id),className:"flex items-center space-x-1 text-sm text-gray-500 hover:text-elderberry-600",children:[u.jsx(F,{className:"w-4 h-4"}),u.jsx("span",{children:"답글"})]})]}),e.replies&&e.replies.length>0&&u.jsx("div",{className:"mt-4",children:e.replies.map(e=>u.jsx(ve,{comment:e,level:s+1,onReply:t,onEdit:r,onDelete:a,onLike:l,isLiked:!1},e.id))})]})})},we=({onSubmit:e,parentId:s,onCancel:t,placeholder:r="댓글을 작성하세요..."})=>{const[a,l]=x.useState(""),[n,i]=x.useState(!1),[o,d]=x.useState(!1);return u.jsxs(Z.form,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},onSubmit:r=>c(null,null,function*(){if(r.preventDefault(),a.trim())try{d(!0),yield e({postId:0,parentId:s,content:a.trim(),isAnonymous:n}),l(""),i(!1),t&&t()}catch(o){}finally{d(!1)}else alert("댓글 내용을 입력해주세요.")}),className:"bg-gray-50 rounded-lg p-4 space-y-4",children:[u.jsx("textarea",{value:a,onChange:e=>l(e.target.value),placeholder:r,className:"w-full h-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500 resize-none",required:!0}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:n,onChange:e=>i(e.target.checked),className:"w-4 h-4 text-elderberry-600 border-gray-300 rounded focus:ring-elderberry-500"}),u.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"익명으로 작성"})]}),u.jsxs("div",{className:"flex space-x-2",children:[t&&u.jsx(K,{type:"button",variant:"outline",onClick:t,children:"취소"}),u.jsxs(K,{type:"submit",variant:"primary",loading:o,children:[o?"작성 중...":"댓글 작성",u.jsx(B,{className:"w-4 h-4 ml-2"})]})]})]})]})};const Pe=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{boardId:e,postId:s}=S(),t=I(),{user:r}=W(),{currentPost:a,comments:l,postsLoading:n,commentsLoading:d,postsError:m,commentsError:p,likedPosts:y,likedComments:j,loadPost:N,loadComments:b,createComment:P,deletePost:C,togglePostLike:B,toggleCommentLike:M,clearPostsError:F,clearCommentsError:z}=he(),[_,U]=x.useState(!1),[q,V]=x.useState(null),Q=parseInt(s||"0"),Z=a&&(null==r?void 0:r.id)===a.authorId,se=(null==r?void 0:r.role)===G.ADMIN||(null==r?void 0:r.role)===G.COORDINATOR,te=r&&[G.CAREGIVER,G.EMPLOYER,G.COORDINATOR,G.ADMIN].includes(r.role),re=y.has(Q);x.useEffect(()=>{Q&&(N(Q),b(Q))},[Q]);const ae=e=>c(null,null,function*(){a&&(yield P(o(i({},e),{postId:a.id})),U(!1),V(null))});return n?u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-8"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"h-64 bg-gray-200 rounded"}),u.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})]})}):m||!a?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(f,{className:"w-16 h-16 text-red-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"게시글을 찾을 수 없습니다"}),u.jsx("p",{className:"text-gray-600 mb-4",children:m||"요청한 게시글이 존재하지 않거나 삭제되었습니다."}),u.jsxs("div",{className:"space-x-3",children:[u.jsxs(K,{variant:"outline",onClick:()=>t(-1),children:[u.jsx(O,{className:"w-4 h-4 mr-2"}),"뒤로 가기"]}),u.jsx(h,{to:"/boards",children:u.jsx(K,{variant:"primary",children:"게시판 목록"})})]})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(K,{variant:"outline",onClick:()=>t(-1),className:"flex items-center",children:[u.jsx(O,{className:"w-4 h-4 mr-2"}),"뒤로"]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs(K,{variant:"outline",onClick:()=>c(null,null,function*(){if(navigator.share)try{yield navigator.share({title:null==a?void 0:a.title,text:null==a?void 0:a.content,url:window.location.href})}catch(e){}else navigator.clipboard.writeText(window.location.href),alert("링크가 클립보드에 복사되었습니다!")}),children:[u.jsx(A,{className:"w-4 h-4 mr-2"}),"공유"]}),u.jsxs(K,{variant:"outline",children:[u.jsx(R,{className:"w-4 h-4 mr-2"}),"북마크"]}),(Z||se)&&u.jsxs(u.Fragment,{children:[u.jsx(h,{to:`/boards/${e}/posts/${a.id}/edit`,children:u.jsxs(K,{variant:"outline",children:[u.jsx(T,{className:"w-4 h-4 mr-2"}),"수정"]})}),u.jsxs(K,{variant:"outline",onClick:()=>c(null,null,function*(){if(a&&window.confirm("정말로 이 게시글을 삭제하시겠습니까?"))try{yield C(a.id),t(`/boards/${e||""}`)}catch(s){}}),children:[u.jsx(D,{className:"w-4 h-4 mr-2"}),"삭제"]})]})]})]}),u.jsx(J,{children:u.jsxs(H,{className:"p-6",children:[u.jsxs("div",{className:"border-b border-gray-200 pb-6 mb-6",children:[u.jsx("div",{className:"flex items-start justify-between mb-4",children:u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.isPinned&&u.jsx(k,{className:"w-4 h-4 text-elderberry-600"}),a.isNotice&&u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"공지"}),u.jsx("span",{className:"text-sm text-gray-500",children:a.boardName})]}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:a.title}),u.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-8 h-8 bg-elderberry-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-semibold text-elderberry-600",children:a.isAnonymous?"익":a.authorName.charAt(0)})}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:a.isAnonymous?"익명":a.authorName}),u.jsx("span",{className:"text-xs text-gray-500 ml-2",children:a.authorRole})]})]}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(L,{className:"w-4 h-4 mr-1"}),fe(a.createdAt)]})]})]})}),u.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[u.jsxs("span",{className:"flex items-center",children:[u.jsx(v,{className:"w-4 h-4 mr-1"}),"조회 ",a.viewCount]}),u.jsxs("button",{onClick:()=>B(a.id),className:"flex items-center transition-colors "+(re?"text-red-500":"hover:text-red-500"),children:[u.jsx(w,{className:"w-4 h-4 mr-1 "+(re?"fill-current":"")}),"좋아요 ",a.likeCount]}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(g,{className:"w-4 h-4 mr-1"}),"댓글 ",a.commentCount]})]})]}),u.jsx("div",{className:"prose max-w-none mb-6",children:u.jsx("div",{className:"whitespace-pre-wrap text-gray-700",children:a.content})}),a.attachments&&a.attachments.length>0&&u.jsxs("div",{className:"border-t border-gray-200 pt-6 mb-6",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"첨부파일"}),u.jsx("div",{className:"space-y-2",children:a.attachments.map(e=>u.jsxs("a",{href:e.downloadUrl,download:e.originalFileName,className:"flex items-center space-x-2 text-sm text-elderberry-600 hover:text-elderberry-800",children:[u.jsx($,{className:"w-4 h-4"}),u.jsx("span",{children:e.originalFileName}),u.jsxs("span",{className:"text-xs text-gray-500",children:["(",(e.fileSize/1024/1024).toFixed(1),"MB)"]})]},e.id))})]}),a.tags&&a.tags.length>0&&u.jsx("div",{className:"border-t border-gray-200 pt-6",children:u.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map((e,s)=>u.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-elderberry-100 text-elderberry-700",children:[u.jsx(E,{className:"w-3 h-3 mr-1"}),e]},s))})})]})}),u.jsxs(J,{children:[u.jsx(Y,{children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(X,{children:["댓글 ",a.commentCount,"개"]}),te&&u.jsxs(K,{variant:"outline",onClick:()=>U(!_),children:[u.jsx(g,{className:"w-4 h-4 mr-2"}),"댓글 작성"]})]})}),u.jsxs(H,{children:[u.jsx(ee,{children:_&&te&&u.jsx("div",{className:"mb-6",children:u.jsx(we,{onSubmit:ae,onCancel:()=>U(!1)})})}),d?u.jsx("div",{className:"space-y-4",children:[...Array(3)].map((e,s)=>u.jsx("div",{className:"animate-pulse",children:u.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-2"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})},s))}):l.length>0?u.jsxs("div",{className:"space-y-4",children:[l.map(e=>u.jsx(ve,{comment:e,level:0,onReply:e=>V(e),onEdit:e=>{},onDelete:e=>c(null,null,function*(){window.confirm("댓글을 삭제하시겠습니까?")}),onLike:e=>M(e),isLiked:j.has(e.id)},e.id)),u.jsx(ee,{children:q&&te&&u.jsx("div",{className:"ml-8",children:u.jsx(we,{onSubmit:e=>ae(o(i({},e),{parentId:q})),parentId:q,onCancel:()=>V(null),placeholder:"답글을 작성하세요..."})})})]}):u.jsxs("div",{className:"text-center py-8",children:[u.jsx(g,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"아직 댓글이 없습니다"}),te&&u.jsx(K,{variant:"outline",onClick:()=>U(!0),children:"첫 댓글을 작성해보세요"})]})]})]})]})}},Symbol.toStringTag,{value:"Module"}));const Ce=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const e=I(),[s]=m(),{user:t}=W(),{boards:r,boardsLoading:a,postsLoading:l,boardsError:n,postsError:d,loadBoards:h,createPost:p,clearBoardsError:g,clearPostsError:y}=he(),[j,N]=x.useState(parseInt(s.get("boardId")||"0")||0),[b,w]=x.useState(""),[P,C]=x.useState(""),[L,S]=x.useState(!1),[A,R]=x.useState(!1),[T,D]=x.useState(!1),[$,B]=x.useState(""),[M,F]=x.useState([]),[ee,se]=x.useState([]),te=(null==t?void 0:t.role)===G.ADMIN||(null==t?void 0:t.role)===G.COORDINATOR,re=(null==t?void 0:t.role)===G.ADMIN||(null==t?void 0:t.role)===G.COORDINATOR;x.useEffect(()=>{h()},[]),x.useEffect(()=>{r.length>0&&0===j&&N(r[0].id)},[r,j]);const ae=()=>{const e=$.trim();e&&!M.includes(e)&&M.length<10&&(F([...M,e]),B(""))},le=(e,s)=>c(null,null,function*(){if(!e.file)return null;try{se(e=>e.map((e,t)=>t===s?o(i({},e),{uploading:!0}):e));const t=yield me.uploadFile(e.file);return se(e=>e.map((e,r)=>r===s?o(i({},e),{id:t.id,uploading:!1,uploaded:!0,url:t.downloadUrl}):e)),t.id}catch(t){return se(e=>e.map((e,t)=>t===s?o(i({},e),{uploading:!1,uploaded:!1}):e)),alert(`파일 업로드에 실패했습니다: ${e.name}`),null}}),ne=e=>{if(0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]};return a?u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),u.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs(K,{variant:"outline",onClick:()=>e(-1),className:"flex items-center",children:[u.jsx(O,{className:"w-4 h-4 mr-2"}),"뒤로"]}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"게시글 작성"})]}),u.jsx("div",{className:"flex items-center space-x-3",children:u.jsxs(K,{variant:"outline",onClick:()=>{},children:[u.jsx(v,{className:"w-4 h-4 mr-2"}),"미리보기"]})})]}),(n||d)&&u.jsxs(Z.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[u.jsx(f,{className:"w-5 h-5 flex-shrink-0"}),u.jsx("span",{className:"text-sm",children:n||d}),u.jsx("button",{onClick:()=>{g(),y()},className:"ml-auto text-red-600 hover:text-red-800",children:"✕"})]}),u.jsxs("form",{onSubmit:s=>c(null,null,function*(){if(s.preventDefault(),j)if(b.trim())if(P.trim())try{const s=[];for(let e=0;e<ee.length;e++){const t=ee[e];if(t.file&&!t.uploaded){const r=yield le(t,e);r&&s.push(r)}else t.id&&s.push(t.id)}const t={boardId:j,title:b.trim(),content:P.trim(),isAnonymous:L,isNotice:!!te&&A,isPinned:!!re&&T,tags:M.length>0?M:void 0,attachmentIds:s.length>0?s:void 0},r=yield p(t);e(`/boards/${j}/posts/${r.id}`)}catch(t){alert("게시글 작성에 실패했습니다. 다시 시도해주세요.")}else alert("내용을 입력해주세요.");else alert("제목을 입력해주세요.");else alert("게시판을 선택해주세요.")}),className:"space-y-6",children:[u.jsxs(J,{children:[u.jsx(Y,{children:u.jsx(X,{children:"기본 정보"})}),u.jsxs(H,{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["게시판 ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{value:j,onChange:e=>N(parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500",required:!0,children:[u.jsx("option",{value:0,children:"게시판을 선택해주세요"}),r.map(e=>u.jsx("option",{value:e.id,children:e.name},e.id))]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["제목 ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",value:b,onChange:e=>w(e.target.value),placeholder:"제목을 입력하세요",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500",maxLength:200,required:!0}),u.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[b.length,"/200자"]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["내용 ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("textarea",{value:P,onChange:e=>C(e.target.value),placeholder:"내용을 입력하세요",className:"w-full h-64 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500 resize-none",required:!0}),u.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[P.length,"자"]})]})]})]}),u.jsxs(J,{children:[u.jsx(Y,{children:u.jsx(X,{children:"게시 옵션"})}),u.jsxs(H,{className:"space-y-4",children:[u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:L,onChange:e=>S(e.target.checked),className:"w-4 h-4 text-elderberry-600 border-gray-300 rounded focus:ring-elderberry-500"}),u.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"익명으로 작성"})]}),te&&u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:A,onChange:e=>R(e.target.checked),className:"w-4 h-4 text-elderberry-600 border-gray-300 rounded focus:ring-elderberry-500"}),u.jsxs("div",{className:"ml-2 flex items-center",children:[u.jsx(z,{className:"w-4 h-4 text-red-500 mr-1"}),u.jsx("span",{className:"text-sm text-gray-700",children:"공지사항으로 등록"})]})]}),re&&u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:T,onChange:e=>D(e.target.checked),className:"w-4 h-4 text-elderberry-600 border-gray-300 rounded focus:ring-elderberry-500"}),u.jsxs("div",{className:"ml-2 flex items-center",children:[u.jsx(k,{className:"w-4 h-4 text-elderberry-500 mr-1"}),u.jsx("span",{className:"text-sm text-gray-700",children:"상단 고정"})]})]})]})]}),u.jsxs(J,{children:[u.jsx(Y,{children:u.jsx(X,{children:"태그"})}),u.jsxs(H,{className:"space-y-4",children:[u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("input",{type:"text",value:$,onChange:e=>B(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),ae())},placeholder:"태그를 입력하고 Enter를 누르세요",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-elderberry-500 focus:border-elderberry-500",maxLength:20}),u.jsxs(K,{type:"button",variant:"outline",onClick:ae,children:[u.jsx(E,{className:"w-4 h-4 mr-2"}),"추가"]})]}),M.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2",children:M.map((e,s)=>u.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-elderberry-100 text-elderberry-700",children:[u.jsx(E,{className:"w-3 h-3 mr-1"}),e,u.jsx("button",{type:"button",onClick:()=>(e=>{F(M.filter((s,t)=>t!==e))})(s),className:"ml-1 text-elderberry-500 hover:text-elderberry-700",children:u.jsx(_,{className:"w-3 h-3"})})]},s))}),u.jsxs("p",{className:"text-xs text-gray-500",children:["최대 10개까지 추가할 수 있습니다. (",M.length,"/10)"]})]})]}),u.jsxs(J,{children:[u.jsx(Y,{children:u.jsx(X,{children:"첨부파일"})}),u.jsxs(H,{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("input",{type:"file",multiple:!0,onChange:e=>{Array.from(e.target.files||[]).forEach(e=>{if(e.size>10485760)return void alert(`파일 크기가 너무 큽니다: ${e.name} (최대 10MB)`);const s={file:e,name:e.name,size:e.size,type:e.type,uploading:!1,uploaded:!1};se(e=>[...e,s])}),e.target.value=""},className:"hidden",id:"file-upload",accept:"image/*,.pdf,.doc,.docx,.txt,.zip,.rar"}),u.jsxs("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer",children:[u.jsx(U,{className:"w-4 h-4 mr-2"}),"파일 선택"]}),u.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"최대 10MB까지 업로드 가능합니다. (이미지, PDF, 문서, 압축파일)"})]}),ee.length>0&&u.jsx("div",{className:"space-y-2",children:ee.map((e,s)=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-8 h-8 bg-elderberry-100 rounded-lg flex items-center justify-center",children:e.type.startsWith("image/")?u.jsx(q,{className:"w-4 h-4 text-elderberry-600"}):u.jsx(V,{className:"w-4 h-4 text-elderberry-600"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.name}),u.jsx("p",{className:"text-xs text-gray-500",children:ne(e.size)})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[e.uploading&&u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-elderberry-600"}),e.uploaded&&u.jsx("div",{className:"w-4 h-4 bg-green-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-green-600",children:"✓"})}),u.jsx("button",{type:"button",onClick:()=>(e=>{se(s=>s.filter((s,t)=>t!==e))})(s),className:"text-gray-400 hover:text-red-500",children:u.jsx(_,{className:"w-4 h-4"})})]})]},s))})]})]}),u.jsxs("div",{className:"flex justify-end space-x-3",children:[u.jsx(K,{type:"button",variant:"outline",onClick:()=>e(-1),children:"취소"}),u.jsxs(K,{type:"submit",variant:"primary",loading:l,disabled:!j||!b.trim()||!P.trim(),children:[u.jsx(Q,{className:"w-4 h-4 mr-2"}),l?"작성 중...":"게시글 작성"]})]})]})]})}},Symbol.toStringTag,{value:"Module"}));export{be as B,Pe as P,Ce as a};
